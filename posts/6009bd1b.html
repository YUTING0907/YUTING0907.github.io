

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon_yt.png">
  <link rel="icon" href="/img/favicon_yt.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Echo Yu">
  <meta name="keywords" content="ML">
  
    <meta name="description" content="ğŸ¥¦ 1.å­¦ä¹ å‰è¨€ğŸ‘ 1.1 å­¦ä¹ å‰æ ç†Ÿç»ƒä½¿ç”¨SpringBoot å¾®æœåŠ¡å¿«é€Ÿå¼€å‘æ¡†æ¶ äº†è§£è¿‡Dubbo + Zookeeper åˆ†å¸ƒå¼åŸºç¡€  ğŸ‘ 1.2 æ–‡ç« å¤§çº²|  Spring Cloud äº”å¤§ç»„ä»¶  æœåŠ¡æ³¨å†Œä¸å‘ç°â€”â€”Netflix Eureka è´Ÿè½½å‡è¡¡ï¼š  â€‹       å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡â€”â€”Netflix Ribbon â€‹        æœåŠ¡ç«¯è´Ÿè½½å‡è¡¡ï¼šâ€”â€”Feign(å…¶ä¹Ÿæ˜¯ä¾èµ–">
<meta property="og:type" content="article">
<meta property="og:title" content="Spring Cloudç‹‚ç¥è¯´">
<meta property="og:url" content="http://yuting0907.github.io/posts/6009bd1b.html">
<meta property="og:site_name" content="YUTING">
<meta property="og:description" content="ğŸ¥¦ 1.å­¦ä¹ å‰è¨€ğŸ‘ 1.1 å­¦ä¹ å‰æ ç†Ÿç»ƒä½¿ç”¨SpringBoot å¾®æœåŠ¡å¿«é€Ÿå¼€å‘æ¡†æ¶ äº†è§£è¿‡Dubbo + Zookeeper åˆ†å¸ƒå¼åŸºç¡€  ğŸ‘ 1.2 æ–‡ç« å¤§çº²|  Spring Cloud äº”å¤§ç»„ä»¶  æœåŠ¡æ³¨å†Œä¸å‘ç°â€”â€”Netflix Eureka è´Ÿè½½å‡è¡¡ï¼š  â€‹       å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡â€”â€”Netflix Ribbon â€‹        æœåŠ¡ç«¯è´Ÿè½½å‡è¡¡ï¼šâ€”â€”Feign(å…¶ä¹Ÿæ˜¯ä¾èµ–">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221018231142.png">
<meta property="og:image" content="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221018232135.png">
<meta property="og:image" content="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221018233249.png">
<meta property="og:image" content="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221026232621.png">
<meta property="og:image" content="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221026233534.png">
<meta property="og:image" content="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221026233758.png">
<meta property="og:image" content="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221026233859.png">
<meta property="og:image" content="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221026233924.png">
<meta property="og:image" content="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221026234114.png">
<meta property="og:image" content="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221031230902.png">
<meta property="og:image" content="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221031231024.png">
<meta property="og:image" content="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221101000801.png">
<meta property="og:image" content="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221101000849.png">
<meta property="og:image" content="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221102234722.png">
<meta property="og:image" content="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221102234941.png">
<meta property="og:image" content="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221103224258.png">
<meta property="og:image" content="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221103224800.png">
<meta property="og:image" content="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221105175026.png">
<meta property="og:image" content="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221105175159.png">
<meta property="og:image" content="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221105223716.png">
<meta property="article:published_time" content="2022-10-18T14:34:25.000Z">
<meta property="article:modified_time" content="2025-01-14T14:11:52.952Z">
<meta property="article:author" content="Echo Yu">
<meta property="article:tag" content="Java">
<meta property="article:tag" content="spring cloud">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221018231142.png">
  
  
    <meta name="referrer" content="no-referrer-when-downgrade">
  
  
  <title>Spring Cloudç‹‚ç¥è¯´ - YUTING</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- ä¸»é¢˜ä¾èµ–çš„å›¾æ ‡åº“ï¼Œä¸è¦è‡ªè¡Œä¿®æ”¹ -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  



  
<link rel="stylesheet" href="/css/reward.css">



  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"yuting0907.github.io","root":"/","version":"1.9.0","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>

  
<meta name="generator" content="Hexo 6.2.0"></head>


<body>
	
	  

<style type="text/css">
    @keyframes spin3D {
        from {
            transform: rotate3d(0.5, 0.5, 0.5, 360deg);
        }

        to {
            transform: rotate3d(0deg);
        }
    }

    #loading {
        height: 100%;
        background-color: #172d4781;
        backdrop-filter: saturate(100%) blur(10px);
        display: flex;
        justify-content: center;
        align-items: center;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        overflow: hidden;
        z-index: 99999999;
    }

    .spinner-box {
        width: 300px;
        height: 300px;
        display: flex;
        justify-content: center;
        align-items: center;
        background-color: transparent;
    }

    .leo {
        position: absolute;
        display: flex;
        justify-content: center;
        align-items: center;
        border-radius: 50%;
    }

    .blue-orbit {
        width: 175px;
        height: 175px;
        border: 2px solid #1a91fa;
        animation: spin3D 3s linear .2s infinite;
    }

    .green-orbit {
        width: 135px;
        height: 135px;
        border: 2px solid #00ffdd;
        animation: spin3D 2s linear 0s infinite;
    }

    .red-orbit {
        width: 100px;
        height: 100px;
        border: 2px solid #d75151;
        animation: spin3D 1s linear 0s infinite;
    }

    .white-orbit-a {
        width: 70px;
        height: 70px;
        border: 1px solid #faf5f5;
        animation: spin3D 3s linear 0s infinite;
    }

    .white-orbit-b {
        width: 70px;
        height: 70px;
        border: 1px solid #faf5f5;
        animation: spin3D 1.5s linear 0s infinite;
    }

    .nucleus {
        width: 1px;
        height: 1px;
        border: 1px solid #ffffff;
        animation: spin3D 1s linear 0s infinite;
    }
</style>

<div id="loading">
    <div class="spinner-box">
        <div class="blue-orbit leo"></div>
        <div class="green-orbit leo"></div>
        <div class="red-orbit leo"></div>
        <div class="white-orbit-a leo"></div>
        <div class="white-orbit-b leo"></div>
        <div class="nucleus leo"></div>
    </div>
</div>

<script>
    (function () {
        const loaded = function () {
            window.onload = function () {
                const loader = document.getElementById("loading");
                loader.className = "fadeout";
                setTimeout(function () {
                    loader.style.display = "none";
                }, 
                5
                );
            }
        };
        loaded();
    })();
</script>
	
	
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong class="navbar-title">EchoYu&#39;s blog</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                é¦–é¡µ
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                å½’æ¡£
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                åˆ†ç±»
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                æ ‡ç­¾
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                å…³äº
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="Spring Cloudç‹‚ç¥è¯´"></span>
          
        </div>

        
          
  <div class="mt-3">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-author" aria-hidden="true"></i>
        Echo Yu
      </span>
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2022-10-18 22:34" pubdate>
          2022å¹´10æœˆ18æ—¥ æ™šä¸Š
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          36k å­—
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          303 åˆ†é’Ÿ
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">Spring Cloudç‹‚ç¥è¯´</h1>
            
            <div class="markdown-body">
              
              <div id="readmore-container"><h2 id="ğŸ¥¦-1-å­¦ä¹ å‰è¨€"><a href="#ğŸ¥¦-1-å­¦ä¹ å‰è¨€" class="headerlink" title="ğŸ¥¦ 1.å­¦ä¹ å‰è¨€"></a>ğŸ¥¦ 1.å­¦ä¹ å‰è¨€</h2><h3 id="ğŸ‘-1-1-å­¦ä¹ å‰æ"><a href="#ğŸ‘-1-1-å­¦ä¹ å‰æ" class="headerlink" title="ğŸ‘ 1.1 å­¦ä¹ å‰æ"></a>ğŸ‘ <strong>1.1 å­¦ä¹ å‰æ</strong></h3><ul>
<li>ç†Ÿç»ƒä½¿ç”¨SpringBoot å¾®æœåŠ¡å¿«é€Ÿå¼€å‘æ¡†æ¶</li>
<li>äº†è§£è¿‡Dubbo + Zookeeper åˆ†å¸ƒå¼åŸºç¡€</li>
</ul>
<h3 id="ğŸ‘-1-2-æ–‡ç« å¤§çº²"><a href="#ğŸ‘-1-2-æ–‡ç« å¤§çº²" class="headerlink" title="ğŸ‘ 1.2 æ–‡ç« å¤§çº²"></a>ğŸ‘ <strong>1.2 æ–‡ç« å¤§çº²</strong></h3><p>|  Spring Cloud äº”å¤§ç»„ä»¶</p>
<ul>
<li>æœåŠ¡æ³¨å†Œä¸å‘ç°â€”â€”<strong>Netflix Eureka</strong></li>
<li>è´Ÿè½½å‡è¡¡ï¼š</li>
</ul>
<p>â€‹       å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡â€”â€”<strong>Netflix Ribbon</strong></p>
<p>â€‹        æœåŠ¡ç«¯è´Ÿè½½å‡è¡¡ï¼šâ€”â€”<strong>Feign</strong>(å…¶ä¹Ÿæ˜¯ä¾èµ–äºRibbonï¼Œåªæ˜¯å°†è°ƒç”¨æ–¹å¼RestTemplete æ›´æ”¹æˆService æ¥å£)</p>
<ul>
<li>æ–­è·¯å™¨â€”â€”<strong>Netflix Hystrix</strong></li>
<li>æœåŠ¡ç½‘å…³â€”â€”<strong>Netflix Zuul</strong></li>
<li>åˆ†å¸ƒå¼é…ç½®â€”â€”<strong>Spring Cloud Config</strong></li>
</ul>
<h3 id="ğŸ‘-1-3å¸¸è§é¢è¯•é¢˜"><a href="#ğŸ‘-1-3å¸¸è§é¢è¯•é¢˜" class="headerlink" title="ğŸ‘ 1.3å¸¸è§é¢è¯•é¢˜"></a>ğŸ‘ <strong>1.3å¸¸è§é¢è¯•é¢˜</strong></h3><p>1.1 ä»€ä¹ˆæ˜¯å¾®æœåŠ¡ï¼Ÿ</p>
<p>1.2 å¾®æœåŠ¡ä¹‹é—´æ˜¯å¦‚ä½•ç‹¬ç«‹é€šè®¯çš„ï¼Ÿ</p>
<p>1.3 SpringCloud å’Œ Dubboæœ‰é‚£äº›åŒºåˆ«ï¼Ÿ</p>
<p>1.4 SpringBoot å’Œ SpringCloudï¼Œè¯·è°ˆè°ˆä½ å¯¹ä»–ä»¬çš„ç†è§£</p>
<p>1.5 ä»€ä¹ˆæ˜¯æœåŠ¡ç†”æ–­ï¼Ÿä»€ä¹ˆæ˜¯æœåŠ¡é™çº§ï¼Ÿ</p>
<p>1.6 å¾®æœåŠ¡çš„ä¼˜ç¼ºç‚¹åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿè¯´ä¸‹ä½ åœ¨é¡¹ç›®å¼€å‘ä¸­é‡åˆ°çš„å‘</p>
<p>1.7 ä½ æ‰€çŸ¥é“çš„å¾®æœåŠ¡æŠ€æœ¯æ ˆæœ‰å“ªäº›ï¼Ÿåˆ—ä¸¾ä¸€äºŒ</p>
<p>1.8 Eurekaå’ŒZookeeperéƒ½å¯ä»¥æä¾›æœåŠ¡æ³¨å†Œä¸å‘ç°çš„åŠŸèƒ½ï¼Œè¯·è¯´è¯´ä¸¤è€…çš„åŒºåˆ«</p>
<p>â€¦..</p>
<h2 id="ğŸ¥¦-2-å¾®æœåŠ¡æ¦‚è¿°"><a href="#ğŸ¥¦-2-å¾®æœåŠ¡æ¦‚è¿°" class="headerlink" title="ğŸ¥¦ 2.å¾®æœåŠ¡æ¦‚è¿°"></a>ğŸ¥¦ 2.å¾®æœåŠ¡æ¦‚è¿°</h2><h3 id="ğŸ‘-2-1-ä»€ä¹ˆæ˜¯å¾®æœåŠ¡ï¼Ÿ"><a href="#ğŸ‘-2-1-ä»€ä¹ˆæ˜¯å¾®æœåŠ¡ï¼Ÿ" class="headerlink" title="ğŸ‘ 2.1 ä»€ä¹ˆæ˜¯å¾®æœåŠ¡ï¼Ÿ"></a>ğŸ‘ <strong>2.1 ä»€ä¹ˆæ˜¯å¾®æœåŠ¡ï¼Ÿ</strong></h3><h3 id="ğŸ‘-2-2-å¾®æœåŠ¡ä¸å¾®æœåŠ¡æ¶æ„"><a href="#ğŸ‘-2-2-å¾®æœåŠ¡ä¸å¾®æœåŠ¡æ¶æ„" class="headerlink" title="ğŸ‘ 2.2 å¾®æœåŠ¡ä¸å¾®æœåŠ¡æ¶æ„"></a>ğŸ‘ <strong>2.2 å¾®æœåŠ¡ä¸å¾®æœåŠ¡æ¶æ„</strong></h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">å¾®æœåŠ¡<br></code></pre></td></tr></table></figure>

<p>å¼ºè°ƒçš„æ˜¯æœåŠ¡çš„å¤§å°ï¼Œå®ƒå…³æ³¨çš„æ˜¯æŸä¸€ä¸ªç‚¹ï¼Œæ˜¯å…·ä½“è§£å†³æŸä¸€ä¸ªé—®é¢˜&#x2F;æä¾›è½åœ°å¯¹åº”æœåŠ¡çš„ä¸€ä¸ªæœåŠ¡åº”ç”¨ï¼Œç‹­ä¹‰çš„çœ‹ï¼Œå¯ä»¥çœ‹ä½œæ˜¯IDEAä¸­çš„ä¸€ä¸ªä¸ªå¾®æœåŠ¡å·¥ç¨‹ï¼Œæˆ–è€…Moudelã€‚IDEA å·¥å…·é‡Œé¢ä½¿ç”¨Mavenå¼€å‘çš„ä¸€ä¸ªä¸ªç‹¬ç«‹çš„å°Moudelï¼Œå®ƒå…·ä½“æ˜¯ä½¿ç”¨SpringBootå¼€å‘çš„ä¸€ä¸ªå°æ¨¡å—ï¼Œä¸“ä¸šçš„äº‹æƒ…äº¤ç»™ä¸“ä¸šçš„æ¨¡å—æ¥åšï¼Œä¸€ä¸ªæ¨¡å—å°±åšç€ä¸€ä»¶äº‹æƒ…ã€‚å¼ºè°ƒçš„æ˜¯ä¸€ä¸ªä¸ªçš„ä¸ªä½“ï¼Œæ¯ä¸ªä¸ªä½“å®Œæˆä¸€ä¸ªå…·ä½“çš„ä»»åŠ¡æˆ–è€…åŠŸèƒ½ã€‚</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">å¾®æœåŠ¡æ¶æ„<br></code></pre></td></tr></table></figure>

<p>ä¸€ç§æ–°çš„æ¶æ„å½¢å¼ï¼ŒMartin Fowler äº2014å¹´æå‡ºã€‚</p>
<p>å¾®æœåŠ¡æ¶æ„æ˜¯ä¸€ç§æ¶æ„æ¨¡å¼ï¼Œå®ƒä½“é•¿å°†å•ä¸€åº”ç”¨ç¨‹åºåˆ’åˆ†æˆä¸€ç»„å°çš„æœåŠ¡ï¼ŒæœåŠ¡ä¹‹é—´ç›¸äº’åè°ƒï¼Œäº’ç›¸é…åˆï¼Œä¸ºç”¨æˆ·æä¾›æœ€ç»ˆä»·å€¼ã€‚æ¯ä¸ªæœåŠ¡è¿è¡Œåœ¨å…¶ç‹¬ç«‹çš„è¿›ç¨‹ä¸­ï¼ŒæœåŠ¡ä¸æœåŠ¡ä¹‹é—´é‡‡ç”¨è½»é‡çº§çš„é€šä¿¡æœºåˆ¶**(å¦‚HTTP)<strong>äº’ç›¸åä½œï¼Œæ¯ä¸ªæœåŠ¡éƒ½å›´ç»•ç€å…·ä½“çš„ä¸šåŠ¡è¿›è¡Œæ„å»ºï¼Œå¹¶ä¸”èƒ½å¤Ÿè¢«ç‹¬ç«‹çš„éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå¦å¤–ï¼Œåº”å°½é‡é¿å…ç»Ÿä¸€çš„ï¼Œé›†ä¸­å¼çš„æœåŠ¡ç®¡ç†æœºåˆ¶ï¼Œå¯¹å…·ä½“çš„ä¸€ä¸ªæœåŠ¡è€Œè¨€ï¼Œåº”æ ¹æ®ä¸šåŠ¡ä¸Šä¸‹æ–‡ï¼Œé€‰æ‹©åˆé€‚çš„è¯­è¨€ã€å·¥å…·</strong>(å¦‚Maven)**å¯¹å…¶è¿›è¡Œæ„å»ºã€‚</p>
<h3 id="ğŸ‘-2-3-å¾®æœåŠ¡ä¼˜ç¼ºç‚¹"><a href="#ğŸ‘-2-3-å¾®æœåŠ¡ä¼˜ç¼ºç‚¹" class="headerlink" title="ğŸ‘ 2.3 å¾®æœåŠ¡ä¼˜ç¼ºç‚¹"></a>ğŸ‘ <strong>2.3 å¾®æœåŠ¡ä¼˜ç¼ºç‚¹</strong></h3><p><code>ä¼˜ç‚¹</code></p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs abnf">å•ä¸€èŒè´£åŸåˆ™ï¼›<br>æ¯ä¸ªæœåŠ¡è¶³å¤Ÿå†…èšï¼Œè¶³å¤Ÿå°ï¼Œä»£ç å®¹æ˜“ç†è§£ï¼Œè¿™æ ·èƒ½èšç„¦ä¸€ä¸ªæŒ‡å®šçš„ä¸šåŠ¡åŠŸèƒ½æˆ–ä¸šåŠ¡éœ€æ±‚ï¼›<br>å¼€å‘ç®€å•ï¼Œå¼€å‘æ•ˆç‡é«˜ï¼Œä¸€ä¸ªæœåŠ¡å¯èƒ½å°±æ˜¯ä¸“ä¸€çš„åªå¹²ä¸€ä»¶äº‹ï¼›<br>å¾®æœåŠ¡èƒ½å¤Ÿè¢«å°å›¢é˜Ÿå•ç‹¬å¼€å‘ï¼Œè¿™ä¸ªå›¢é˜Ÿåªéœ€<span class="hljs-number">2</span>-<span class="hljs-number">5</span>ä¸ªå¼€å‘äººå‘˜ç»„æˆï¼›<br>å¾®æœåŠ¡æ˜¯æ¾è€¦åˆçš„ï¼Œæ˜¯æœ‰åŠŸèƒ½æ„ä¹‰çš„æœåŠ¡ï¼Œæ— è®ºæ˜¯åœ¨å¼€å‘é˜¶æ®µæˆ–éƒ¨ç½²é˜¶æ®µéƒ½æ˜¯ç‹¬ç«‹çš„ï¼›<br>å¾®æœåŠ¡èƒ½ä½¿ç”¨ä¸åŒçš„è¯­è¨€å¼€å‘ï¼›<br>æ˜“äºå’Œç¬¬ä¸‰æ–¹é›†æˆï¼Œå¾®æœåŠ¡å…è®¸å®¹æ˜“ä¸”çµæ´»çš„æ–¹å¼é›†æˆè‡ªåŠ¨éƒ¨ç½²ï¼Œé€šè¿‡æŒç»­é›†æˆå·¥å…·ï¼Œå¦‚jenkinsï¼ŒHudsonï¼Œbambooï¼›<br>å¾®æœåŠ¡æ˜“äºè¢«ä¸€ä¸ªå¼€å‘äººå‘˜ç†è§£ï¼Œä¿®æ”¹å’Œç»´æŠ¤ï¼Œè¿™æ ·å°å›¢é˜Ÿèƒ½å¤Ÿæ›´å…³æ³¨è‡ªå·±çš„å·¥ä½œæˆæœï¼Œæ— éœ€é€šè¿‡åˆä½œæ‰èƒ½ä½“ç°ä»·å€¼ï¼›<br>å¾®æœåŠ¡å…è®¸åˆ©ç”¨å’Œèåˆæœ€æ–°æŠ€æœ¯ï¼›<br>å¾®æœåŠ¡åªæ˜¯ä¸šåŠ¡é€»è¾‘çš„ä»£ç ï¼Œä¸ä¼šå’ŒHTMLï¼ŒCSSï¼Œæˆ–å…¶ä»–çš„ç•Œé¢æ··åˆ<span class="hljs-comment">;</span><br>æ¯ä¸ªå¾®æœåŠ¡éƒ½æœ‰è‡ªå·±çš„å­˜å‚¨èƒ½åŠ›ï¼Œå¯ä»¥æœ‰è‡ªå·±çš„æ•°æ®åº“ï¼Œä¹Ÿå¯ä»¥æœ‰ç»Ÿä¸€çš„æ•°æ®åº“ï¼›<br></code></pre></td></tr></table></figure>

<p><code>ç¼ºç‚¹</code></p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc"><span class="hljs-bullet">- </span>å¼€å‘äººå‘˜è¦å¤„ç†åˆ†å¸ƒå¼ç³»ç»Ÿçš„å¤æ‚æ€§ï¼›<br><span class="hljs-bullet">- </span>å¤šæœåŠ¡è¿ç»´éš¾åº¦ï¼Œéšç€æœåŠ¡çš„å¢åŠ ï¼Œè¿ç»´çš„å‹åŠ›ä¹Ÿåœ¨å¢å¤§ï¼›<br><span class="hljs-bullet">- </span>ç³»ç»Ÿéƒ¨ç½²ä¾èµ–é—®é¢˜ï¼›<br><span class="hljs-bullet">- </span>æœåŠ¡é—´é€šä¿¡æˆæœ¬é—®é¢˜ï¼›<br><span class="hljs-bullet">- </span>æ•°æ®ä¸€è‡´æ€§é—®é¢˜ï¼›<br><span class="hljs-bullet">- </span>ç³»ç»Ÿé›†æˆæµ‹è¯•é—®é¢˜ï¼›<br><span class="hljs-bullet">- </span>æ€§èƒ½å’Œç›‘æ§é—®é¢˜ï¼›<br></code></pre></td></tr></table></figure>



<h3 id="ğŸ‘-2-4-å¾®æœåŠ¡æŠ€æœ¯æ ˆæœ‰é‚£äº›ï¼Ÿ"><a href="#ğŸ‘-2-4-å¾®æœåŠ¡æŠ€æœ¯æ ˆæœ‰é‚£äº›ï¼Ÿ" class="headerlink" title="ğŸ‘ 2.4 å¾®æœåŠ¡æŠ€æœ¯æ ˆæœ‰é‚£äº›ï¼Ÿ"></a>ğŸ‘ <strong>2.4 å¾®æœåŠ¡æŠ€æœ¯æ ˆæœ‰é‚£äº›ï¼Ÿ</strong></h3><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">|<span class="hljs-string"> **å¾®æœåŠ¡æŠ€æœ¯æ¡ç›®**          </span>|<span class="hljs-string"> è½åœ°æŠ€æœ¯                                             </span>|<br>|<span class="hljs-string"> -------------------- </span>|<span class="hljs-string"> ------------------------------------------------ </span>|<br>|<span class="hljs-string"> æœåŠ¡å¼€å‘                 </span>|<span class="hljs-string"> SpringBootã€Springã€SpringMVCç­‰                     </span>|<br>|<span class="hljs-string"> æœåŠ¡é…ç½®ä¸ç®¡ç†              </span>|<span class="hljs-string"> Netfixå…¬å¸çš„Archaiusã€é˜¿é‡Œçš„Diamondç­‰                    </span>|<br>|<span class="hljs-string"> æœåŠ¡æ³¨å†Œä¸å‘ç°              </span>|<span class="hljs-string"> Eurekaã€Consulã€Zookeeperç­‰                         </span>|<br>|<span class="hljs-string"> æœåŠ¡è°ƒç”¨                 </span>|<span class="hljs-string"> Restã€PRCã€gRPC                                    </span>|<br>|<span class="hljs-string"> æœåŠ¡ç†”æ–­å™¨                </span>|<span class="hljs-string"> Hystrixã€Envoyç­‰                                   </span>|<br>|<span class="hljs-string"> è´Ÿè½½å‡è¡¡                 </span>|<span class="hljs-string"> Ribbonã€Nginxç­‰                                    </span>|<br>|<span class="hljs-string"> æœåŠ¡æ¥å£è°ƒç”¨(å®¢æˆ·ç«¯è°ƒç”¨æœåŠ¡çš„ç®€åŒ–å·¥å…·) </span>|<span class="hljs-string"> Feginç­‰                                           </span>|<br>|<span class="hljs-string"> æ¶ˆæ¯é˜Ÿåˆ—                 </span>|<span class="hljs-string"> Kafkaã€RabbitMQã€ActiveMQç­‰                         </span>|<br>|<span class="hljs-string"> æœåŠ¡é…ç½®ä¸­å¿ƒç®¡ç†             </span>|<span class="hljs-string"> SpringCloudConfigã€Chefç­‰                          </span>|<br>|<span class="hljs-string"> æœåŠ¡è·¯ç”±(APIç½‘å…³)          </span>|<span class="hljs-string"> Zuulç­‰                                            </span>|<br>|<span class="hljs-string"> æœåŠ¡ç›‘æ§                 </span>|<span class="hljs-string"> Zabbixã€Nagiosã€Metricsã€Specatatorç­‰                </span>|<br>|<span class="hljs-string"> å…¨é“¾è·¯è¿½è¸ª                </span>|<span class="hljs-string"> Zipkinã€Braveã€Dapperç­‰                             </span>|<br>|<span class="hljs-string"> æ•°æ®æµæ“ä½œå¼€å‘åŒ…             </span>|<span class="hljs-string"> SpringCloud Stream(å°è£…ä¸Redisï¼ŒRabbitï¼ŒKafkaç­‰å‘é€æ¥æ”¶æ¶ˆæ¯) </span>|<br>|<span class="hljs-string"> æ—¶é—´æ¶ˆæ¯æ€»æ ˆ               </span>|<span class="hljs-string"> SpringCloud Bus                                  </span>|<br>|<span class="hljs-string"> æœåŠ¡éƒ¨ç½²                 </span>|<span class="hljs-string"> Dockerã€OpenStackã€Kubernetesç­‰                     </span>|<br></code></pre></td></tr></table></figure>



<h3 id="ğŸ‘-2-5-ä¸ºä»€ä¹ˆé€‰æ‹©SpringCloudä½œä¸ºå¾®æœåŠ¡æ¶æ„ï¼Ÿ"><a href="#ğŸ‘-2-5-ä¸ºä»€ä¹ˆé€‰æ‹©SpringCloudä½œä¸ºå¾®æœåŠ¡æ¶æ„ï¼Ÿ" class="headerlink" title="ğŸ‘ 2.5 ä¸ºä»€ä¹ˆé€‰æ‹©SpringCloudä½œä¸ºå¾®æœåŠ¡æ¶æ„ï¼Ÿ"></a>ğŸ‘ <strong>2.5 ä¸ºä»€ä¹ˆé€‰æ‹©SpringCloudä½œä¸ºå¾®æœåŠ¡æ¶æ„ï¼Ÿ</strong></h3><ol>
<li>é€‰å‹ä¾æ®<ul>
<li>æ•´ä½“è§£å†³æ–¹æ¡ˆå’Œæ¡†æ¶æˆç†Ÿåº¦</li>
<li>ç¤¾åŒºçƒ­åº¦</li>
<li>å¯ç»´æŠ¤æ€§</li>
<li>å­¦ä¹ æ›²çº¿</li>
</ul>
</li>
<li>å½“å‰å„å¤§ITå…¬å¸ç”¨çš„å¾®æœåŠ¡æ¶æ„æœ‰é‚£äº›ï¼Ÿ<ul>
<li>é˜¿é‡Œï¼šdubbo+HFS</li>
<li>äº¬ä¸œï¼šJFS</li>
<li>æ–°æµªï¼šMotan</li>
<li>å½“å½“ç½‘ï¼šDubboX</li>
</ul>
</li>
<li>å„å¾®æœåŠ¡æ¡†æ¶å¯¹æ¯”</li>
</ol>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">|<span class="hljs-string"> **åŠŸèƒ½ç‚¹/æœåŠ¡æ¡†æ¶** </span>|<span class="hljs-string"> Netflix/SpringCloud </span>|<span class="hljs-string"> Motan </span>|<span class="hljs-string"> gRPC </span>|<span class="hljs-string"> Thri t </span>|<span class="hljs-string"> Dubbo/DubboX </span>|<br>|<span class="hljs-string">â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”- </span>|<span class="hljs-string"> â€”â€”â€”â€”â€”â€”â€”â€”â€” </span>|<span class="hljs-string"> â€”â€”â€”â€” </span>|<span class="hljs-string"> â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” </span>|<br>|<span class="hljs-string"> åŠŸèƒ½å®šä½ </span>|<span class="hljs-string"> å®Œæ•´çš„å¾®æœåŠ¡æ¡†æ¶ </span>|<span class="hljs-string"> RPCæ¡†æ¶ï¼Œä½†æ•´åˆäº†ZKæˆ–Consulï¼Œå®ç°é›†ç¾¤ç¯å¢ƒçš„åŸºæœ¬æœåŠ¡æ³¨å†Œå‘ç° </span>|<span class="hljs-string"> RPCæ¡†æ¶ </span>|<span class="hljs-string"> RPCæ¡†æ¶ </span>|<span class="hljs-string"> æœåŠ¡æ¡†æ¶ </span>|<br>|<span class="hljs-string"> æ”¯æŒRest </span>|<span class="hljs-string"> æ˜¯ï¼ŒRibbonæ”¯æŒå¤šç§å¯æ‹”æ’çš„åºåˆ—å·é€‰æ‹© </span>|<span class="hljs-string"> å¦ </span>|<span class="hljs-string"> å¦ </span>|<span class="hljs-string"> å¦ </span>|<span class="hljs-string"> å¦ </span>|<br>|<span class="hljs-string"> æ”¯æŒRPC </span>|<span class="hljs-string"> å¦ </span>|<span class="hljs-string"> æ˜¯(Hession2) </span>|<span class="hljs-string"> æ˜¯ </span>|<span class="hljs-string"> æ˜¯ </span>|<span class="hljs-string"> æ˜¯ </span>|<br>|<span class="hljs-string"> æ”¯æŒå¤šè¯­è¨€ </span>|<span class="hljs-string"> æ˜¯(Restå½¢å¼) </span>|<span class="hljs-string"> å¦ </span>|<span class="hljs-string"> æ˜¯ </span>|<span class="hljs-string"> æ˜¯ </span>|<span class="hljs-string"> å¦ </span>|<br>|<span class="hljs-string"> è´Ÿè½½å‡è¡¡ </span>|<span class="hljs-string"> æ˜¯(æœåŠ¡ç«¯zuul+å®¢æˆ·ç«¯Ribbon)ï¼Œzuul-æœåŠ¡ï¼ŒåŠ¨æ€è·¯ç”±ï¼Œäº‘ç«¯è´Ÿè½½å‡è¡¡Eurekaï¼ˆé’ˆå¯¹ä¸­é—´å±‚æœåŠ¡å™¨ï¼‰ </span>|<span class="hljs-string"> æ˜¯(å®¢æˆ·ç«¯) </span>|<span class="hljs-string"> å¦ </span>|<span class="hljs-string"> å¦ </span>|<span class="hljs-string"> æ˜¯(å®¢æˆ·ç«¯) </span>|<br>|<span class="hljs-string"> é…ç½®æœåŠ¡ </span>|<span class="hljs-string"> Netfix Archaiusï¼ŒSpring Cloud Config Server é›†ä¸­é…ç½® </span>|<span class="hljs-string"> æ˜¯(Zookeeperæä¾›) </span>|<span class="hljs-string"> å¦ </span>|<span class="hljs-string"> å¦ </span>|<span class="hljs-string"> å¦ </span>|<br>|<span class="hljs-string"> æœåŠ¡è°ƒç”¨é“¾ç›‘æ§ </span>|<span class="hljs-string"> æ˜¯(zuul)ï¼Œzuulæä¾›è¾¹ç¼˜æœåŠ¡ï¼ŒAPIç½‘å…³ </span>|<span class="hljs-string"> å¦ </span>|<span class="hljs-string"> å¦ </span>|<span class="hljs-string"> å¦ </span>|<span class="hljs-string"> å¦ </span>|<br>|<span class="hljs-string"> é«˜å¯ç”¨/å®¹é”™ </span>|<span class="hljs-string"> æ˜¯(æœåŠ¡ç«¯Hystrix+å®¢æˆ·ç«¯Ribbon) </span>|<span class="hljs-string"> æ˜¯(å®¢æˆ·ç«¯) </span>|<span class="hljs-string"> å¦ </span>|<span class="hljs-string"> å¦ </span>|<span class="hljs-string"> æ˜¯(å®¢æˆ·ç«¯) </span>|<br>|<span class="hljs-string"> å…¸å‹åº”ç”¨æ¡ˆä¾‹ </span>|<span class="hljs-string"> Netflix </span>|<span class="hljs-string"> Sina </span>|<span class="hljs-string"> Google </span>|<span class="hljs-string"> Facebook </span>|<span class="hljs-string"> </span>|<br>|<span class="hljs-string"> ç¤¾åŒºæ´»è·ƒç¨‹åº¦ </span>|<span class="hljs-string"> é«˜ </span>|<span class="hljs-string"> ä¸€èˆ¬ </span>|<span class="hljs-string"> é«˜ </span>|<span class="hljs-string"> ä¸€èˆ¬ </span>|<span class="hljs-string"> 2017å¹´åé‡æ–°å¼€å§‹ç»´æŠ¤ï¼Œä¹‹å‰ä¸­æ–­äº†5å¹´ </span>|<br>|<span class="hljs-string"> å­¦ä¹ éš¾åº¦ </span>|<span class="hljs-string"> ä¸­ç­‰ </span>|<span class="hljs-string"> ä½ </span>|<span class="hljs-string"> é«˜ </span>|<span class="hljs-string"> é«˜ </span>|<span class="hljs-string"> ä½ </span>|<br>|<span class="hljs-string"> æ–‡æ¡£ä¸°å¯Œç¨‹åº¦ </span>|<span class="hljs-string"> é«˜ </span>|<span class="hljs-string"> ä¸€èˆ¬ </span>|<span class="hljs-string"> ä¸€èˆ¬ </span>|<span class="hljs-string"> ä¸€èˆ¬ </span>|<span class="hljs-string"> é«˜ </span>|<br>|<span class="hljs-string"> å…¶ä»– </span>|<span class="hljs-string"> Spring Cloud Busä¸ºæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºå¸¦æ¥äº†æ›´å¤šç®¡ç†ç«¯ç‚¹ </span>|<span class="hljs-string"> æ”¯æŒé™çº§ </span>|<span class="hljs-string"> Netflixå†…éƒ¨åœ¨å¼€å‘é›†æˆgRPC </span>|<span class="hljs-string"> IDLå®šä¹‰ </span>|<span class="hljs-string"> å®è·µçš„å…¬å¸æ¯”è¾ƒå¤š </span>|<br></code></pre></td></tr></table></figure>



<h2 id="ğŸ¥¦-3-SpringCloudå…¥é—¨æ¦‚è¿°"><a href="#ğŸ¥¦-3-SpringCloudå…¥é—¨æ¦‚è¿°" class="headerlink" title="ğŸ¥¦ 3.SpringCloudå…¥é—¨æ¦‚è¿°"></a>ğŸ¥¦ 3.SpringCloudå…¥é—¨æ¦‚è¿°</h2><h3 id="ğŸ‘-3-1-SpringCloudæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#ğŸ‘-3-1-SpringCloudæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="ğŸ‘ 3.1 SpringCloudæ˜¯ä»€ä¹ˆï¼Ÿ"></a>ğŸ‘ <strong>3.1 SpringCloudæ˜¯ä»€ä¹ˆï¼Ÿ</strong></h3><p>Springå®˜ç½‘ï¼š<a target="_blank" rel="noopener" href="https://spring.io/">https://spring.io/</a></p>
<h3 id="ğŸ‘-3-2-SpringCloudå’ŒSpringBootçš„å…³ç³»"><a href="#ğŸ‘-3-2-SpringCloudå’ŒSpringBootçš„å…³ç³»" class="headerlink" title="ğŸ‘ 3.2 SpringCloudå’ŒSpringBootçš„å…³ç³»"></a>ğŸ‘ <strong>3.2 SpringCloudå’ŒSpringBootçš„å…³ç³»</strong></h3><ul>
<li>SpringBootä¸“æ³¨äºå¼€è‹æ–¹ä¾¿çš„å¼€å‘å•ä¸ªä¸ªä½“å¾®æœåŠ¡ï¼›</li>
<li>SpringCloudæ˜¯å…³æ³¨å…¨å±€çš„å¾®æœåŠ¡åè°ƒæ•´ç†æ²»ç†æ¡†æ¶ï¼Œå®ƒå°†SpringBootå¼€å‘çš„ä¸€ä¸ªä¸ªå•ä½“å¾®æœåŠ¡ï¼Œæ•´åˆå¹¶ç®¡ç†èµ·æ¥ï¼Œä¸ºå„ä¸ªå¾®æœåŠ¡ä¹‹é—´æä¾›ï¼šé…ç½®ç®¡ç†ã€æœåŠ¡å‘ç°ã€æ–­è·¯å™¨ã€è·¯ç”±ã€ä¸ºä»£ç†ã€äº‹ä»¶æ€»æ ˆã€å…¨å±€é”ã€å†³ç­–ç«é€‰ã€åˆ†å¸ƒå¼ä¼šè¯ç­‰ç­‰é›†æˆæœåŠ¡ï¼›</li>
<li>SpringBootå¯ä»¥ç¦»å¼€SpringCloudç‹¬ç«‹ä½¿ç”¨ï¼Œå¼€å‘é¡¹ç›®ï¼Œä½†SpringCloudç¦»ä¸å¼€SpringBootï¼Œå±äºä¾èµ–å…³ç³»ï¼›</li>
<li>SpringBootä¸“æ³¨äºå¿«é€Ÿã€æ–¹ä¾¿çš„å¼€å‘å•ä¸ªä¸ªä½“å¾®æœåŠ¡ï¼ŒSpringCloudå…³æ³¨å…¨å±€çš„æœåŠ¡æ²»ç†æ¡†æ¶ï¼›</li>
</ul>
<h3 id="ğŸ‘-3-3-Dubbo-å’Œ-SpringCloudæŠ€æœ¯é€‰å‹"><a href="#ğŸ‘-3-3-Dubbo-å’Œ-SpringCloudæŠ€æœ¯é€‰å‹" class="headerlink" title="ğŸ‘ 3.3 Dubbo å’Œ SpringCloudæŠ€æœ¯é€‰å‹"></a>ğŸ‘ <strong>3.3 Dubbo å’Œ SpringCloudæŠ€æœ¯é€‰å‹</strong></h3><p>   ğŸ“åˆ†å¸ƒå¼+æœåŠ¡æ²»ç†Dubb</p>
<p>   ç›®å‰æˆç†Ÿçš„äº’è”ç½‘æ¶æ„ï¼Œåº”ç”¨æœåŠ¡åŒ–æ‹†åˆ† + æ¶ˆæ¯ä¸­é—´ä»¶</p>
<p>   ğŸ“Dubbo å’Œ SpringCloudå¯¹æ¯”</p>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">        |<span class="hljs-string"> Dubbo         </span>|<span class="hljs-string"> SpringCloud                  </span>|<br>|<span class="hljs-string"> ------ </span>|<span class="hljs-string"> ------------- </span>|<span class="hljs-string"> ---------------------------- </span>|<br>|<span class="hljs-string"> æœåŠ¡æ³¨å†Œä¸­å¿ƒ </span>|<span class="hljs-string"> Zookeeper     </span>|<span class="hljs-string"> Spring Cloud Netfilx Eureka  </span>|<br>|<span class="hljs-string"> æœåŠ¡è°ƒç”¨æ–¹å¼ </span>|<span class="hljs-string"> RPC           </span>|<span class="hljs-string"> REST API                     </span>|<br>|<span class="hljs-string"> æœåŠ¡ç›‘æ§   </span>|<span class="hljs-string"> Dubbo-monitor </span>|<span class="hljs-string"> Spring Boot Admin            </span>|<br>|<span class="hljs-string"> æ–­è·¯å™¨    </span>|<span class="hljs-string"> ä¸å®Œå–„           </span>|<span class="hljs-string"> Spring Cloud Netfilx Hystrix </span>|<br>|<span class="hljs-string"> æœåŠ¡ç½‘å…³   </span>|<span class="hljs-string"> æ—              </span>|<span class="hljs-string"> Spring Cloud Netfilx Zuul    </span>|<br>|<span class="hljs-string"> åˆ†å¸ƒå¼é…ç½®  </span>|<span class="hljs-string"> æ—              </span>|<span class="hljs-string"> Spring Cloud Config          </span>|<br>|<span class="hljs-string"> æœåŠ¡è·Ÿè¸ª   </span>|<span class="hljs-string"> æ—              </span>|<span class="hljs-string"> Spring Cloud Sleuth          </span>|<br>|<span class="hljs-string"> æ¶ˆæ¯æ€»æ ˆ   </span>|<span class="hljs-string"> æ—              </span>|<span class="hljs-string"> Spring Cloud Bus             </span>|<br>|<span class="hljs-string"> æ•°æ®æµ    </span>|<span class="hljs-string"> æ—              </span>|<span class="hljs-string"> Spring Cloud Stream          </span>|<br>|<span class="hljs-string"> æ‰¹é‡ä»»åŠ¡   </span>|<span class="hljs-string"> æ—              </span>|<span class="hljs-string"> Spring Cloud Task            </span>|<br><br></code></pre></td></tr></table></figure>

<p><strong>æœ€å¤§åŒºåˆ«ï¼šSpring Cloud æŠ›å¼ƒäº†Dubboçš„RPCé€šä¿¡ï¼Œé‡‡ç”¨çš„æ˜¯åŸºäºHTTPçš„RESTæ–¹å¼</strong></p>
<p>ä¸¥æ ¼æ¥è¯´ï¼Œè¿™ä¸¤ç§æ–¹å¼å„æœ‰ä¼˜åŠ£ã€‚è™½ç„¶ä»ä¸€å®šç¨‹åº¦ä¸Šæ¥è¯´ï¼Œåè€…ç‰ºç‰²äº†æœåŠ¡è°ƒç”¨çš„æ€§èƒ½ï¼Œä½†ä¹Ÿé¿å…äº†ä¸Šé¢æåˆ°çš„åŸç”ŸRPCå¸¦æ¥çš„é—®é¢˜ã€‚è€Œä¸”RESTç›¸æ¯”RPCæ›´ä¸ºçµæ´»ï¼ŒæœåŠ¡æä¾›æ–¹å’Œè°ƒç”¨æ–¹çš„ä¾èµ–åªä¾é ä¸€çº¸å¥‘çº¦ï¼Œä¸å­˜åœ¨ä»£ç çº§åˆ«çš„å¼ºä¾èµ–ï¼Œè¿™ä¸ªä¼˜ç‚¹åœ¨å½“ä¸‹å¼ºè°ƒå¿«é€Ÿæ¼”åŒ–çš„å¾®æœåŠ¡ç¯å¢ƒä¸‹ï¼Œæ˜¾å¾—æ›´åŠ åˆé€‚ã€‚</p>
<p><strong>æ€»ç»“ï¼š</strong>äºŒè€…è§£å†³çš„é—®é¢˜åŸŸä¸ä¸€æ ·ï¼šDubboçš„å®šä½æ˜¯ä¸€æ¬¾RPCæ¡†æ¶ï¼Œè€ŒSpringCloudçš„ç›®æ ‡æ˜¯å¾®æœåŠ¡æ¶æ„ä¸‹çš„ä¸€ç«™å¼è§£å†³æ–¹æ¡ˆã€‚</p>
<h3 id="ğŸ‘-3-4-SpringCloudèƒ½å¹²å˜›ï¼Ÿ"><a href="#ğŸ‘-3-4-SpringCloudèƒ½å¹²å˜›ï¼Ÿ" class="headerlink" title="ğŸ‘ 3.4 SpringCloudèƒ½å¹²å˜›ï¼Ÿ"></a>ğŸ‘ <strong>3.4 SpringCloudèƒ½å¹²å˜›ï¼Ÿ</strong></h3><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">Distributed/versioned <span class="hljs-keyword">configuration</span> åˆ†å¸ƒå¼/ç‰ˆæœ¬æ§åˆ¶é…ç½®<br>Service registration <span class="hljs-keyword">and</span> discovery æœåŠ¡æ³¨å†Œä¸å‘ç°<br>Routing è·¯ç”±<br>Service-<span class="hljs-keyword">to</span>-service calls æœåŠ¡åˆ°æœåŠ¡çš„è°ƒç”¨<br><span class="hljs-keyword">Load</span> balancing è´Ÿè½½å‡è¡¡é…ç½®<br>Circuit Breakers æ–­è·¯å™¨<br>Distributed messaging åˆ†å¸ƒå¼æ¶ˆæ¯ç®¡ç†<br>â€¦<br></code></pre></td></tr></table></figure>

<h3 id="ğŸ‘-3-5-SpringCloudä¸‹è½½"><a href="#ğŸ‘-3-5-SpringCloudä¸‹è½½" class="headerlink" title="ğŸ‘ 3.5 SpringCloudä¸‹è½½"></a>ğŸ‘ <strong>3.5 SpringCloudä¸‹è½½</strong></h3><p>å®˜ç½‘ï¼š<a target="_blank" rel="noopener" href="http://projects.spring.io/spring-cloud/">http://projects.spring.io/spring-cloud/</a></p>
<p>ç‰ˆæœ¬å·æœ‰ç‚¹ç‰¹åˆ«ï¼š</p>
<p>SpringCloudæ²¡æœ‰é‡‡ç”¨æ•°å­—ç¼–å·çš„æ–¹å¼å‘½åç‰ˆæœ¬å·ï¼Œè€Œæ˜¯é‡‡ç”¨äº†ä¼¦æ•¦åœ°é“ç«™çš„åç§°ï¼Œ<strong>åŒæ—¶æ ¹æ®å­—æ¯è¡¨çš„é¡ºåºæ¥å¯¹åº”ç‰ˆæœ¬æ—¶é—´é¡ºåº</strong>ï¼Œæ¯”å¦‚æœ€æ—©çš„Realseç‰ˆæœ¬ï¼šAngelï¼Œç¬¬äºŒä¸ªRealseç‰ˆæœ¬ï¼šBrixtonï¼Œç„¶åæ˜¯Camdenã€Dalstonã€Edgwareï¼Œç›®å‰æœ€æ–°çš„æ˜¯Hoxton SR4 CURRENT GAé€šç”¨ç¨³å®šç‰ˆã€‚</p>
<p><strong>è‡ªå­¦å‚è€ƒä¹¦ï¼š</strong></p>
<ul>
<li><p>SpringCloud Netflix ä¸­æ–‡æ–‡æ¡£ï¼š<a target="_blank" rel="noopener" href="https://springcloud.cc/spring-cloud-netflix.html">https://springcloud.cc/spring-cloud-netflix.html</a></p>
</li>
<li><p>SpringCloud ä¸­æ–‡APIæ–‡æ¡£(å®˜æ–¹æ–‡æ¡£ç¿»è¯‘ç‰ˆ)ï¼š<a target="_blank" rel="noopener" href="https://springcloud.cc/spring-cloud-dalston.html">https://springcloud.cc/spring-cloud-dalston.html</a></p>
</li>
<li><p>SpringCloudä¸­å›½ç¤¾åŒºï¼š<a target="_blank" rel="noopener" href="http://springcloud.cn/">http://springcloud.cn/</a></p>
</li>
<li><p>SpringCloudä¸­æ–‡ç½‘ï¼š<a target="_blank" rel="noopener" href="https://springcloud.cc/">https://springcloud.cc</a></p>
</li>
</ul>
<h2 id="ğŸ¥¦-4-SpringCloud-Restå­¦ä¹ ç¯å¢ƒæ­å»ºï¼šæœåŠ¡æä¾›è€…"><a href="#ğŸ¥¦-4-SpringCloud-Restå­¦ä¹ ç¯å¢ƒæ­å»ºï¼šæœåŠ¡æä¾›è€…" class="headerlink" title="ğŸ¥¦ 4.SpringCloud Restå­¦ä¹ ç¯å¢ƒæ­å»ºï¼šæœåŠ¡æä¾›è€…"></a>ğŸ¥¦ 4.SpringCloud Restå­¦ä¹ ç¯å¢ƒæ­å»ºï¼šæœåŠ¡æä¾›è€…</h2><h3 id="ğŸ‘-4-1-ä»‹ç»"><a href="#ğŸ‘-4-1-ä»‹ç»" class="headerlink" title="ğŸ‘ 4.1 ä»‹ç»"></a>ğŸ‘ <strong>4.1 ä»‹ç»</strong></h3><ul>
<li>æˆ‘ä»¬ä¼šä½¿ç”¨ä¸€ä¸ªDeptéƒ¨é—¨æ¨¡å—åšä¸€ä¸ªå¾®æœåŠ¡é€šç”¨æ¡ˆä¾‹<strong>Consumer</strong>æ¶ˆè´¹è€…(<strong>Client</strong>)é€šè¿‡RESTè°ƒç”¨<strong>Provider</strong>æä¾›è€…(<strong>Server</strong>)æä¾›çš„æœåŠ¡ã€‚</li>
<li>å›é¡¾Springï¼ŒSpringMVCï¼ŒMybatisç­‰ä»¥å¾€å­¦ä¹ çš„çŸ¥è¯†ã€‚</li>
<li>Mavençš„åˆ†åŒ…åˆ†æ¨¡å—æ¶æ„å¤ä¹ ã€‚</li>
</ul>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs gradle">ä¸€ä¸ªçˆ¶å·¥ç¨‹å¸¦ç€å¤šä¸ªMouduleå­æ¨¡å—<br><br>MicroServiceCloudçˆ¶å·¥ç¨‹(<span class="hljs-keyword">Project</span>)ä¸‹åˆæ¬¡å¸¦ç€<span class="hljs-number">3</span>ä¸ªå­æ¨¡å—(Module)<br><br>microservicecloud-api ã€å°è£…çš„æ•´ä½“entity<span class="hljs-regexp">/æ¥å£/</span>å…¬å…±é…ç½®ç­‰ã€‘<br>microservicecloud-consumer-dept-<span class="hljs-number">80</span> ã€æœåŠ¡æä¾›è€…ã€‘<br>microservicecloud-provider-dept-<span class="hljs-number">8001</span> ã€æœåŠ¡æ¶ˆè´¹è€…ã€‘<br></code></pre></td></tr></table></figure>



<h3 id="ğŸ‘-4-2-SpringCloudç‰ˆæœ¬é€‰æ‹©"><a href="#ğŸ‘-4-2-SpringCloudç‰ˆæœ¬é€‰æ‹©" class="headerlink" title="ğŸ‘ 4.2 SpringCloudç‰ˆæœ¬é€‰æ‹©"></a>ğŸ‘ <strong>4.2 SpringCloudç‰ˆæœ¬é€‰æ‹©</strong></h3><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">å¤§ç‰ˆæœ¬è¯´æ˜<br>|<span class="hljs-string"> SpringBoot </span>|<span class="hljs-string"> SpringCloud       </span>|<span class="hljs-string"> å…³ç³»                                 </span>|<br>|<span class="hljs-string"> ---------- </span>|<span class="hljs-string"> ----------------- </span>|<span class="hljs-string"> ---------------------------------- </span>|<br>|<span class="hljs-string"> 1.2.x      </span>|<span class="hljs-string"> Angelç‰ˆæœ¬(å¤©ä½¿)       </span>|<span class="hljs-string"> å…¼å®¹SpringBoot1.2x                   </span>|<br>|<span class="hljs-string"> 1.3.x      </span>|<span class="hljs-string"> Brixtonç‰ˆæœ¬(å¸ƒé‡Œå…‹æ–¯é¡¿)  </span>|<span class="hljs-string"> å…¼å®¹SpringBoot1.3xï¼Œä¹Ÿå…¼å®¹SpringBoot1.4x </span>|<br>|<span class="hljs-string"> 1.4.x      </span>|<span class="hljs-string"> Camdenç‰ˆæœ¬(å¡å§†ç™»)     </span>|<span class="hljs-string"> å…¼å®¹SpringBoot1.4xï¼Œä¹Ÿå…¼å®¹SpringBoot1.5x </span>|<br>|<span class="hljs-string"> 1.5.x      </span>|<span class="hljs-string"> Dalstonç‰ˆæœ¬(å¤šå°”æ–¯é¡¿)   </span>|<span class="hljs-string"> å…¼å®¹SpringBoot1.5xï¼Œä¸å…¼å®¹SpringBoot2.0x </span>|<br>|<span class="hljs-string"> 1.5.x      </span>|<span class="hljs-string"> Edgwareç‰ˆæœ¬(åŸƒå¥‡éŸ¦å°”)   </span>|<span class="hljs-string"> å…¼å®¹SpringBoot1.5xï¼Œä¸å…¼å®¹SpringBoot2.0x </span>|<br>|<span class="hljs-string"> 2.0.x      </span>|<span class="hljs-string"> Finchleyç‰ˆæœ¬(èŠ¬å¥‡åˆ©)   </span>|<span class="hljs-string"> å…¼å®¹SpringBoot2.0xï¼Œä¸å…¼å®¹SpringBoot1.5x </span>|<br>|<span class="hljs-string"> 2.1.x      </span>|<span class="hljs-string"> Greenwichç‰ˆæœ¬(æ ¼æ—å¨æ²») </span>|<span class="hljs-string">   </span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string">å®é™…å¼€å‘ç‰ˆæœ¬å…³ç³»</span><br><span class="hljs-string"></span><br><span class="hljs-string"></span>|<span class="hljs-string"> spring-boot-starter-parent </span>|<span class="hljs-string">          </span>|<span class="hljs-string"> spring-cloud-dependencles </span>|<span class="hljs-string">          </span>|<br>|<span class="hljs-string"> -------------------------- </span>|<span class="hljs-string"> -------- </span>|<span class="hljs-string"> ------------------------- </span>|<span class="hljs-string"> -------- </span>|<br>|<span class="hljs-string">          **ç‰ˆæœ¬å·**         </span>|<span class="hljs-string"> å‘å¸ƒæ—¥æœŸ  </span>|<span class="hljs-string">          **ç‰ˆæœ¬å·**        </span>|<span class="hljs-string">   å‘å¸ƒæ—¥æœŸ </span>|<br>|<span class="hljs-string">       1.5.2.RELEASE        </span>|<span class="hljs-string">  2017-03 </span>|<span class="hljs-string">        Dalston.RC1        </span>|<span class="hljs-string">  2017-x  </span>|<br>|<span class="hljs-string">       1.5.9.RELEASE        </span>|<span class="hljs-string">  2017-11 </span>|<span class="hljs-string">      Edgware.RELEASE      </span>|<span class="hljs-string"> 2017-11  </span>|<br>|<span class="hljs-string">       1.5.16.RELEASE       </span>|<span class="hljs-string">  2018-04 </span>|<span class="hljs-string">        Edgware.SR5        </span>|<span class="hljs-string"> 2018-10  </span>|<br>|<span class="hljs-string">       1.5.20.RELEASE       </span>|<span class="hljs-string">  2018-09 </span>|<span class="hljs-string">        Edgware.SR5        </span>|<span class="hljs-string"> 2018-10  </span>|<br>|<span class="hljs-string">       2.0.2.RELEASE        </span>|<span class="hljs-string">  2018-05 </span>|<span class="hljs-string">  Fomchiey.BULD-SNAPSHOT   </span>|<span class="hljs-string">  2018-x  </span>|<br>|<span class="hljs-string">       2.0.6.RELEASE        </span>|<span class="hljs-string">  2018-10 </span>|<span class="hljs-string">       Fomchiey-SR2        </span>|<span class="hljs-string"> 2018-10  </span>|<br>|<span class="hljs-string">       2.1.4.RELEASE        </span>|<span class="hljs-string">  2019-04 </span>|<span class="hljs-string">       Greenwich.SR1       </span>|<span class="hljs-string"> 2019-03  </span>|<br></code></pre></td></tr></table></figure>

<p>å¯ä»¥æ ¹æ®ä½¿ç”¨äººæ•°æ¥é€‰æ‹©ç‰ˆæœ¬ï¼Œä¸€èˆ¬ä½¿ç”¨Greenå¤šä¸€ç‚¹</p>
<h3 id="ğŸ‘-4-3-åˆ›å»ºçˆ¶å·¥ç¨‹"><a href="#ğŸ‘-4-3-åˆ›å»ºçˆ¶å·¥ç¨‹" class="headerlink" title="ğŸ‘ 4.3 åˆ›å»ºçˆ¶å·¥ç¨‹"></a>ğŸ‘ <strong>4.3 åˆ›å»ºçˆ¶å·¥ç¨‹</strong></h3><p>ï½æ–°å»ºä¸€ä¸ªmavené¡¹ç›®</p>
<p>ï½ç¼–è¾‘pom.xmlæ–‡ä»¶<strong>Packageingæ˜¯pomæ¨¡å¼</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.haust<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>springcloud<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">modules</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>springcloud-api<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>springcloud-provider-dept-8001<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>springcloud-consumer-dept-80<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>springcloud-eureka-7001<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>springcloud-eureka-7002<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>springcloud-eureka-7003<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>springcloud-provider-dept-8002<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>springcloud-provider-dept-8003<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>springcloud-consumer-dept-feign<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>springcloud-provider-dept-hystrix-8001<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>springcloud-consumer-hystrix-dashboard<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>springcloud-zuul-9527<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>springcloud-config-server-3344<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>springcloud-config-client-3355<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>springcloud-config-eureka-7001<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>springcloud-config-dept-8001<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">modules</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--æ‰“åŒ…æ–¹å¼  pom--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">packaging</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">packaging</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="hljs-tag">&lt;/<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.source</span>&gt;</span>1.8<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.source</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.target</span>&gt;</span>1.8<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.target</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">junit.version</span>&gt;</span>4.12<span class="hljs-tag">&lt;/<span class="hljs-name">junit.version</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">log4j.version</span>&gt;</span>1.2.17<span class="hljs-tag">&lt;/<span class="hljs-name">log4j.version</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">lombok.version</span>&gt;</span>1.16.18<span class="hljs-tag">&lt;/<span class="hljs-name">lombok.version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependencyManagement</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-alibaba-dependencies<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.2.0.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">type</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-comment">&lt;!--springCloudçš„ä¾èµ–--&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-dependencies<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>Greenwich.SR1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">type</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-comment">&lt;!--SpringBoot--&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-dependencies<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.1.4.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">type</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-comment">&lt;!--æ•°æ®åº“--&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.1.47<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>druid<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.1.10<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-comment">&lt;!--SpringBoot å¯åŠ¨å™¨--&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.3.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-comment">&lt;!--æ—¥å¿—æµ‹è¯•~--&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>ch.qos.logback<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>logback-core<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.2.3<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$&#123;junit.version&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>log4j<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>log4j<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$&#123;log4j.version&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.projectlombok<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>lombok<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$&#123;lombok.version&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencyManagement</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h3 id="ğŸ‘-4-4-åˆ›å»ºå­æ¨¡å—"><a href="#ğŸ‘-4-4-åˆ›å»ºå­æ¨¡å—" class="headerlink" title="ğŸ‘ 4.4 åˆ›å»ºå­æ¨¡å—"></a>ğŸ‘ <strong>4.4 åˆ›å»ºå­æ¨¡å—</strong></h3><h3 id="ğŸ‘-4-5-è¸©å‘è®°å½•"><a href="#ğŸ‘-4-5-è¸©å‘è®°å½•" class="headerlink" title="ğŸ‘ 4.5 è¸©å‘è®°å½•"></a>ğŸ‘ <strong>4.5 è¸©å‘è®°å½•</strong></h3><ul>
<li><p>åœ¨springbootè¿è¡Œä¸»ç±»ä¸­çš„ä»£ç </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.yuting.springcloud;<br><br><span class="hljs-keyword">import</span> org.springframework.boot.SpringApplication;<br><span class="hljs-keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> yuting</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@version</span> 1.0</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@date</span> 2022/10/18 1:54 AM</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DeptProvider</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span>&#123;<br>        <br>        SpringApplication.run(DeptProvider.class,args);<br>      # âŒ SpringBootApplication.run(DeptProvider.class,args); è¿™é‡Œçš„runç›´æ¥é£˜çº¢<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221018231142.png" srcset="/img/loading.gif" lazyload></p>
</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/GTWZeus/article/details/116305390?spm=1001.2101.3001.6650.4&utm_medium=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~Rate-4-116305390-blog-82683368.pc_relevant_default&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~Rate-4-116305390-blog-82683368.pc_relevant_default&utm_relevant_index=5">CSDNä¸ŠåŒæ ·çš„é”™è¯¯</a></p>
<ul>
<li>åœ¨ä½¿ç”¨springbootè¿æ¥æ•°æ®åº“å¯åŠ¨é¡¹ç›®å‡ºç°é”™è¯¯ï¼šFailed to configure a DataSource: â€˜urlâ€™ attribute is not specified and no embedded datasource could</li>
</ul>
<p>å®Œæ•´é”™è¯¯ä¿¡æ¯ï¼š</p>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">***************************<br>APPLICATION FAILED TO START<br>***************************<br> <br>Description:<br> <br>Failed <span class="hljs-built_in">to</span> configure <span class="hljs-keyword">a</span> DataSource: <span class="hljs-string">&#x27;url&#x27;</span> attribute is <span class="hljs-keyword">not</span> specified <span class="hljs-keyword">and</span> no embedded datasource could be configured.<br> <br>Reason: Failed <span class="hljs-built_in">to</span> determine <span class="hljs-keyword">a</span> suitable driver class<br> <br> <br>Action:<br> <br>Consider <span class="hljs-keyword">the</span> following:<br>    If you want <span class="hljs-keyword">an</span> embedded database (H2, HSQL <span class="hljs-keyword">or</span> Derby), please <span class="hljs-built_in">put</span> <span class="hljs-keyword">it</span> <span class="hljs-keyword">on</span> <span class="hljs-title">the</span> <span class="hljs-title">classpath</span>.<br>    If you have database settings <span class="hljs-built_in">to</span> be loaded <span class="hljs-built_in">from</span> <span class="hljs-keyword">a</span> particular profile you may need <span class="hljs-built_in">to</span> activate <span class="hljs-keyword">it</span> (no profiles are currently active).<br></code></pre></td></tr></table></figure>

<p>æŸ¥è¯¢ä¸€åœˆå‘ç°æ˜¯springbootæ²¡æœ‰è¯†åˆ«åˆ°é…ç½®çš„application.ymlæ–‡ä»¶ï¼Œç±»ä¼¼è¯†åˆ«ä¸åˆ°ymlæ–‡ä»¶çš„æƒ…å†µå¯ä»¥ç”¨ä»¥ä¸‹æ–¹æ³•è§£å†³ã€‚</p>
<p>åœ¨çˆ¶ç±»å·¥ç¨‹ä¸­çš„pomæ–‡ä»¶ä¸­åŠ å…¥ä»¥ä¸‹å†…å®¹ï¼Œè§£å†³äº†mavenæ‰“åŒ…æœ‰æ—¶åªè¯†åˆ«javaä»£ç ï¼Œè€Œä¸ä¼šæ‰“åŒ…é…ç½®æ–‡ä»¶çš„é—®é¢˜</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">fork</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">fork</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">addResources</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">addResources</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--å°†mapperæ–‡ä»¶æ‰“åŒ…è¿›å»--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">resources</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">resource</span>&gt;</span><br>            <span class="hljs-comment">&lt;!--æŒ‡å®šæ ¹ç›®å½• åˆ°æºæ–‡ä»¶å¤¹ ä¸€èˆ¬å¦‚ä¸‹--&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>src/main/java<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">includes</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.yml<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.yaml<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.xml<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.properties<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">includes</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">filtering</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">filtering</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">resource</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">resource</span>&gt;</span> <span class="hljs-comment">&lt;!--æŒ‡å®šæ ¹ç›®å½• åˆ°æºæ–‡ä»¶å¤¹ ä¸€èˆ¬å¦‚ä¸‹--&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>src/main/resources<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">includes</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.yml<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.yaml<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.xml<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.properties<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">includes</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">filtering</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">filtering</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">resource</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">resources</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span><br></code></pre></td></tr></table></figure>

<ul>
<li>Invalid bound statement (not found): com.yuting.springcloud.dao.DeptDao.queryById</li>
</ul>
<p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221018232135.png" srcset="/img/loading.gif" lazyload></p>
<p>æœ€å‘çš„æ˜¯è¿™ä¸ªé—®é¢˜ï¼Œå°è¯•éäº†ç½‘ä¸Šçš„å„ç§è§£å†³åŠæ³•</p>
<p>1.æ£€æŸ¥xmlæ–‡ä»¶çš„namespaceæ˜¯ä¸æ˜¯æŒ‡å‘äº†Daoç±»(è¿™ä¸¤ä¸ªä¸œè¥¿å¯ä»¥ä¸ç”¨æ”¾åœ¨ä¸€ä¸ªåŒ…ä¸‹)	</p>
<p><code>&lt;mapper namespace=&quot;com.yuting.springcloud.dao.DeptDao&quot;&gt;</code></p>
<p>2.æ£€æŸ¥DeptDao.xmlæ–‡ä»¶çš„idåœ¨DeptDaoæ˜¯å¦æœ‰å¯¹åº”çš„æ–¹æ³•</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs csharp"> &lt;<span class="hljs-keyword">select</span> id=<span class="hljs-string">&quot;queryById&quot;</span> resultType=<span class="hljs-string">&quot;Dept&quot;</span> parameterType=<span class="hljs-string">&quot;Long&quot;</span>&gt;<br>   <span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> dept <span class="hljs-keyword">where</span> deptno = <span class="hljs-meta">#&#123;deptno&#125;;</span><br> &lt;/<span class="hljs-keyword">select</span>&gt;<br>    <br>    <br>@Mapper<br>@Repository<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">DeptDao</span> &#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> boolean <span class="hljs-title">addDept</span>(<span class="hljs-params">Dept dept</span>)</span>;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Dept <span class="hljs-title">queryById</span>(<span class="hljs-params">Long id</span>)</span>;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;Dept&gt; <span class="hljs-title">queryAll</span>()</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>3.DeptDao.xmlæ–¹æ³•è¿”å›å€¼æ˜¯å¦å’ŒDeptDaoä¿æŒä¸€è‡´</p>
<p>4.mapperçš„xmlé…ç½®è·¯å¾„æ˜¯å¦æ­£ç¡®</p>
<p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221018233249.png" srcset="/img/loading.gif" lazyload></p>
<p>å¯ä»¥çœ‹åˆ°è¿™é‡Œæ˜¾ç¤ºæœ‰é—®é¢˜ï¼Œç»“æœå‘ç°æ˜¯å°‘å†™ä¸€ä¸ªs. </p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle">mapper-locations: <span class="hljs-keyword">classpath</span>:mybatis<span class="hljs-regexp">/mapper/</span>*.xml<br></code></pre></td></tr></table></figure>



<ul>
<li>ç«¯å£å·å ç”¨</li>
</ul>
<p>Macç³»ç»Ÿä½¿ç”¨æŸ¥çœ‹ç«¯å£æ˜¯å¦è¢«å ç”¨</p>
<p><code>sudo lsof -i tcp:8081</code></p>
<p>å¼ºåˆ¶æ€æ‰è¿›ç¨‹</p>
<p><code>sudo kill -9 6076</code></p>
<h2 id="ğŸ¥¦-5-EurekaæœåŠ¡æ³¨å†Œä¸­å¿ƒ"><a href="#ğŸ¥¦-5-EurekaæœåŠ¡æ³¨å†Œä¸­å¿ƒ" class="headerlink" title="ğŸ¥¦ 5. EurekaæœåŠ¡æ³¨å†Œä¸­å¿ƒ"></a>ğŸ¥¦ 5. EurekaæœåŠ¡æ³¨å†Œä¸­å¿ƒ</h2><h3 id="ğŸ‘-5-1-ä»€ä¹ˆæ˜¯Eureka"><a href="#ğŸ‘-5-1-ä»€ä¹ˆæ˜¯Eureka" class="headerlink" title="ğŸ‘ 5.1 ä»€ä¹ˆæ˜¯Eureka"></a>ğŸ‘ <strong>5.1 ä»€ä¹ˆæ˜¯Eureka</strong></h3><ul>
<li>Netflixåœ¨æ¶‰åŠEurekaæ—¶ï¼Œéµå¾ªçš„å°±æ˜¯APIåŸåˆ™.</li>
<li>Eurekaæ˜¯Netflixçš„æœ‰ä¸ªå­æ¨¡å—ï¼Œä¹Ÿæ˜¯æ ¸å¿ƒæ¨¡å—ä¹‹ä¸€ã€‚Eurekaæ˜¯åŸºäºRESTçš„æœåŠ¡ï¼Œç”¨äºå®šä½æœåŠ¡ï¼Œä»¥å®ç°äº‘ç«¯ä¸­é—´ä»¶å±‚æœåŠ¡å‘ç°å’Œæ•…éšœè½¬ç§»ï¼ŒæœåŠ¡æ³¨å†Œä¸å‘ç°å¯¹äºå¾®æœåŠ¡æ¥è¯´æ˜¯éå¸¸é‡è¦çš„ï¼Œæœ‰äº†æœåŠ¡æ³¨å†Œä¸å‘ç°ï¼Œåªéœ€è¦ä½¿ç”¨æœåŠ¡çš„æ ‡è¯†ç¬¦ï¼Œå°±å¯ä»¥è®¿é—®åˆ°æœåŠ¡ï¼Œè€Œä¸éœ€è¦ä¿®æ”¹æœåŠ¡è°ƒç”¨çš„é…ç½®æ–‡ä»¶äº†ï¼ŒåŠŸèƒ½ç±»ä¼¼äºDubboçš„æ³¨å†Œä¸­å¿ƒï¼Œæ¯”å¦‚Zookeeper.</li>
</ul>
<h3 id="ğŸ‘-5-2-åŸç†ç†è§£"><a href="#ğŸ‘-5-2-åŸç†ç†è§£" class="headerlink" title="ğŸ‘ 5.2 åŸç†ç†è§£"></a>ğŸ‘ <strong>5.2 åŸç†ç†è§£</strong></h3><ul>
<li><p><strong>EurekaåŸºæœ¬çš„æ¶æ„</strong></p>
<ul>
<li>Springcloud å°è£…äº†Netflixå…¬å¸å¼€å‘çš„Eurekaæ¨¡å—æ¥å®ç°æœåŠ¡æ³¨å†Œä¸å‘ç° (å¯¹æ¯”Zookeeper).</li>
<li>Eurekaé‡‡ç”¨äº†C-Sçš„æ¶æ„è®¾è®¡ï¼ŒEurekaServerä½œä¸ºæœåŠ¡æ³¨å†ŒåŠŸèƒ½çš„æœåŠ¡å™¨ï¼Œä»–æ˜¯æœåŠ¡æ³¨å†Œä¸­å¿ƒ.</li>
<li>è€Œç³»ç»Ÿä¸­çš„å…¶ä»–å¾®æœåŠ¡ï¼Œä½¿ç”¨Eurekaçš„å®¢æˆ·ç«¯è¿æ¥åˆ°EurekaServerå¹¶ç»´æŒå¿ƒè·³è¿æ¥ã€‚è¿™æ ·ç³»ç»Ÿçš„ç»´æŠ¤äººå‘˜å°±å¯ä»¥é€šè¿‡EurekaServeræ¥ç›‘æ§ç³»ç»Ÿä¸­å„ä¸ªå¾®æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œï¼ŒSpringcloud çš„ä¸€äº›å…¶ä»–æ¨¡å— (æ¯”å¦‚Zuul) å°±å¯ä»¥é€šè¿‡EurekaServeræ¥å‘ç°ç³»ç»Ÿä¸­çš„å…¶ä»–å¾®æœåŠ¡ï¼Œå¹¶æ‰§è¡Œç›¸å…³çš„é€»è¾‘.</li>
<li>Eureka åŒ…å«ä¸¤ä¸ªç»„ä»¶ï¼š<strong>Eureka Server</strong> å’Œ <strong>Eureka Client</strong>.</li>
<li>Eureka Server æä¾›æœåŠ¡æ³¨å†Œï¼Œå„ä¸ªèŠ‚ç‚¹å¯åŠ¨åï¼Œå›åœ¨EurekaServerä¸­è¿›è¡Œæ³¨å†Œï¼Œè¿™æ ·Eureka Serverä¸­çš„æœåŠ¡æ³¨å†Œè¡¨ä¸­å°†ä¼šå‚¨å­˜æ‰€æœ‰è¯¾ç”¨æœåŠ¡èŠ‚ç‚¹çš„ä¿¡æ¯ï¼ŒæœåŠ¡èŠ‚ç‚¹çš„ä¿¡æ¯å¯ä»¥åœ¨ç•Œé¢ä¸­ç›´è§‚çš„çœ‹åˆ°.</li>
<li>Eureka Client æ˜¯ä¸€ä¸ªJavaå®¢æˆ·ç«¯ï¼Œç”¨äºç®€åŒ–EurekaServerçš„äº¤äº’ï¼Œå®¢æˆ·ç«¯åŒæ—¶ä¹Ÿå…·å¤‡ä¸€ä¸ªå†…ç½®çš„ï¼Œä½¿ç”¨è½®è¯¢è´Ÿè½½ç®—æ³•çš„è´Ÿè½½å‡è¡¡å™¨ã€‚åœ¨åº”ç”¨å¯åŠ¨åï¼Œå°†ä¼šå‘EurekaServerå‘é€å¿ƒè·³ (é»˜è®¤å‘¨æœŸä¸º30ç§’) ã€‚å¦‚æœEureka Serveråœ¨å¤šä¸ªå¿ƒè·³å‘¨æœŸå†…æ²¡æœ‰æ¥æ”¶åˆ°æŸä¸ªèŠ‚ç‚¹çš„å¿ƒè·³ï¼ŒEurekaServerå°†ä¼šä»æœåŠ¡æ³¨å†Œè¡¨ä¸­æŠŠè¿™ä¸ªæœåŠ¡èŠ‚ç‚¹ç§»é™¤æ‰ (é»˜è®¤å‘¨æœŸä¸º90s).</li>
</ul>
<p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221026232621.png" srcset="/img/loading.gif" lazyload></p>
</li>
<li><p><strong>ä¸‰å¤§è§’è‰²</strong></p>
<ul>
<li>Eureka Serverï¼šæä¾›æœåŠ¡çš„æ³¨å†Œä¸å‘ç°</li>
<li>Service Providerï¼šæœåŠ¡ç”Ÿäº§æ–¹ï¼Œå°†è‡ªèº«æœåŠ¡æ³¨å†Œåˆ°Eurekaä¸­ï¼Œä»è€Œä½¿æœåŠ¡æ¶ˆè´¹æ–¹èƒ½å¤Ÿæ‰¾åˆ°</li>
<li>Service Consumerï¼šæœåŠ¡æ¶ˆè´¹æ–¹ï¼Œä»Eurekaä¸­è·å–æ³¨å†ŒæœåŠ¡åˆ—è¡¨ï¼Œä»è€Œæ‰¾åˆ°æ¶ˆè´¹æœåŠ¡</li>
</ul>
</li>
<li><p>ç›®å‰å·¥ç¨‹çŠ¶å†µ</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">PREFIX</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;eureka.client&quot;</span>;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">DEFAULT_URL</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;http://localhost:8761&quot;</span> + PREFIX + <span class="hljs-string">&quot;/&quot;</span>;<br></code></pre></td></tr></table></figure>

<h3 id="ğŸ‘-5-3-æ„å»ºæ­¥éª¤"><a href="#ğŸ‘-5-3-æ„å»ºæ­¥éª¤" class="headerlink" title="ğŸ‘ 5.3 æ„å»ºæ­¥éª¤"></a>ğŸ‘ <strong>5.3 æ„å»ºæ­¥éª¤</strong></h3><p>ğŸ“1. eureka-server</p>
<p>â€‹     01.springcloud-eureka-7001 æ¨¡å—å»ºç«‹</p>
<p>â€‹     02.pom.xml é…ç½®</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">&lt;!--å¯¼åŒ…~--&gt;</span><br><span class="hljs-string">&lt;dependencies&gt;</span><br>    <span class="hljs-string">&lt;!--</span> <span class="hljs-string">https://mvnrepository.com/artifact/org.springframework.cloud/spring-cloud-starter-eureka-server</span> <span class="hljs-string">--&gt;</span><br>    <span class="hljs-string">&lt;!--å¯¼å…¥Eureka</span> <span class="hljs-string">Serverä¾èµ–--&gt;</span><br>    <span class="hljs-string">&lt;dependency&gt;</span><br>        <span class="hljs-string">&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span><br>        <span class="hljs-string">&lt;artifactId&gt;spring-cloud-starter-eureka-server&lt;/artifactId&gt;</span><br>        <span class="hljs-string">&lt;version&gt;1.4.6.RELEASE&lt;/version&gt;</span><br>    <span class="hljs-string">&lt;/dependency&gt;</span><br>    <span class="hljs-string">&lt;!--çƒ­éƒ¨ç½²å·¥å…·--&gt;</span><br>    <span class="hljs-string">&lt;dependency&gt;</span><br>        <span class="hljs-string">&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br>        <span class="hljs-string">&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;</span><br>    <span class="hljs-string">&lt;/dependency&gt;</span><br><span class="hljs-string">&lt;/dependencies&gt;</span><br></code></pre></td></tr></table></figure>

<p>  03.application.yml</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">server:</span><br>  <span class="hljs-attr">port:</span> <span class="hljs-number">7001</span><br><span class="hljs-comment"># Eurekaé…ç½®</span><br><span class="hljs-attr">eureka:</span><br>  <span class="hljs-attr">instance:</span><br>    <span class="hljs-comment"># EurekaæœåŠ¡ç«¯çš„å®ä¾‹åå­—</span><br>    <span class="hljs-attr">hostname:</span> <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span><br>  <span class="hljs-attr">client:</span><br>    <span class="hljs-comment"># è¡¨ç¤ºæ˜¯å¦å‘ Eureka æ³¨å†Œä¸­å¿ƒæ³¨å†Œè‡ªå·±(è¿™ä¸ªæ¨¡å—æœ¬èº«æ˜¯æœåŠ¡å™¨,æ‰€ä»¥ä¸éœ€è¦)</span><br>    <span class="hljs-attr">register-with-eureka:</span> <span class="hljs-literal">false</span><br>    <span class="hljs-comment"># fetch-registryå¦‚æœä¸ºfalse,åˆ™è¡¨ç¤ºè‡ªå·±ä¸ºæ³¨å†Œä¸­å¿ƒ,å®¢æˆ·ç«¯çš„åŒ–ä¸º ture</span><br>    <span class="hljs-attr">fetch-registry:</span> <span class="hljs-literal">false</span><br>    <span class="hljs-comment"># Eurekaç›‘æ§é¡µé¢~</span><br>    <span class="hljs-attr">service-url:</span><br>      <span class="hljs-attr">defaultZone:</span> <span class="hljs-string">http://$&#123;eureka.instance.hostname&#125;:$&#123;server.port&#125;/eureka/</span><br></code></pre></td></tr></table></figure>

<p>04.ä¸»å¯åŠ¨ç±»</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@Auther</span>: csp1999</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@Date</span>: 2020/05/18/10:26</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@Description</span>: å¯åŠ¨ä¹‹åï¼Œè®¿é—® http://127.0.0.1:7001/</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-comment">// @EnableEurekaServer æœåŠ¡ç«¯çš„å¯åŠ¨ç±»ï¼Œå¯ä»¥æ¥å—åˆ«äººæ³¨å†Œè¿›æ¥~</span><br><span class="hljs-meta">@EnableEurekaServer</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EurekaServer_7001</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        SpringApplication.run(EurekaServer_7001.class,args);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>05.å¯åŠ¨æˆåŠŸåè®¿é—® <a target="_blank" rel="noopener" href="http://localhost:7001/">http://localhost:7001/</a> å¾—åˆ°ä»¥ä¸‹é¡µé¢</p>
<p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221026233534.png" srcset="/img/loading.gif" lazyload></p>
<p> ğŸ“2. eureka-client</p>
<p><strong>è°ƒæ•´ä¹‹å‰åˆ›å»ºçš„springlouc-provider-dept-8001</strong></p>
<p> 01.å¯¼å…¥Eurekaä¾èµ–</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">&lt;!--Eurekaä¾èµ–--&gt;</span><br><span class="hljs-string">&lt;!--</span> <span class="hljs-string">https://mvnrepository.com/artifact/org.springframework.cloud/spring-cloud-starter-eureka</span> <span class="hljs-string">--&gt;</span><br><span class="hljs-string">&lt;dependency&gt;</span><br>    <span class="hljs-string">&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span><br>    <span class="hljs-string">&lt;artifactId&gt;spring-cloud-starter-eureka&lt;/artifactId&gt;</span><br>    <span class="hljs-string">&lt;version&gt;1.4.6.RELEASE&lt;/version&gt;</span><br><span class="hljs-string">&lt;/dependency&gt;</span><br></code></pre></td></tr></table></figure>

<p>02.applicationä¸­æ–°å¢Eurecaé…ç½®</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment"># Eurekaé…ç½®ï¼šé…ç½®æœåŠ¡æ³¨å†Œä¸­å¿ƒåœ°å€</span><br>eureka:<br>  client:<br>    service-url:<br>      defaultZone: http:<span class="hljs-regexp">//</span>localhost:<span class="hljs-number">7001</span><span class="hljs-regexp">/eureka/</span><br></code></pre></td></tr></table></figure>

<p>03.ä¸ºä¸»å¯åŠ¨ç±»æ·»åŠ <a target="_blank" rel="noopener" href="https://github.com/EnableEurekaClient">@EnableEurekaClient</a>æ³¨è§£</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * @Auther: csp1999</span><br><span class="hljs-comment"> * @Date: 2020/05/17/22:09</span><br><span class="hljs-comment"> * @Description: å¯åŠ¨ç±»</span><br><span class="hljs-comment"> */</span><br><span class="hljs-variable">@SpringBootApplication</span><br><span class="hljs-comment">// @EnableEurekaClient å¼€å¯Eurekaå®¢æˆ·ç«¯æ³¨è§£ï¼Œåœ¨æœåŠ¡å¯åŠ¨åè‡ªåŠ¨å‘æ³¨å†Œä¸­å¿ƒæ³¨å†ŒæœåŠ¡</span><br><span class="hljs-variable">@EnableEurekaClient</span><br>public class DeptProvider_8001 &#123;<br>    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">static</span> <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">main</span>(String[] args) &#123;<br>        <span class="hljs-selector-tag">SpringApplication</span><span class="hljs-selector-class">.run</span>(DeptProvider_8001.class,args);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>04.å…ˆå¯åŠ¨7001æœåŠ¡ç«¯åå¯åŠ¨8001å®¢æˆ·ç«¯è¿›è¡Œæµ‹è¯•ï¼Œç„¶åè®¿é—®ç›‘æ§é¡µ<a target="_blank" rel="noopener" href="http://localhost:7001/">http://localhost:7001/</a> äº§çœ‹ç»“æœå¦‚å›¾ï¼ŒæˆåŠŸ</p>
<p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221026233758.png" srcset="/img/loading.gif" lazyload></p>
<p>05.ä¿®æ”¹Eurekaä¸Šçš„é»˜è®¤æè¿°ä¿¡æ¯</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment"># Eurekaé…ç½®ï¼šé…ç½®æœåŠ¡æ³¨å†Œä¸­å¿ƒåœ°å€</span><br><span class="hljs-attr">eureka:</span><br>  <span class="hljs-attr">client:</span><br>    <span class="hljs-attr">service-url:</span><br>      <span class="hljs-attr">defaultZone:</span> <span class="hljs-string">http://localhost:7001/eureka/</span><br>  <span class="hljs-attr">instance:</span><br>    <span class="hljs-attr">instance-id:</span> <span class="hljs-string">springcloud-provider-dept-8001</span> <span class="hljs-comment">#ä¿®æ”¹Eurekaä¸Šçš„é»˜è®¤æè¿°ä¿¡æ¯</span><br></code></pre></td></tr></table></figure>

<p>ç»“æœå¦‚å›¾ï¼š</p>
<p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221026233859.png" srcset="/img/loading.gif" lazyload></p>
<p>å¦‚æœæ­¤æ—¶åœæ‰springcloud-provider-dept-8001 ç­‰<strong>30s</strong>å ç›‘æ§ä¼šå¼€å¯ä¿æŠ¤æœºåˆ¶ï¼š</p>
<p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221026233924.png" srcset="/img/loading.gif" lazyload></p>
<p> 06.é…ç½®å…³äºæœåŠ¡åŠ è½½çš„ç›‘æ§ä¿¡æ¯</p>
<p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221026234114.png" srcset="/img/loading.gif" lazyload></p>
<p>pom.xmlä¸­æ·»åŠ ä¾èµ–</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--actuatorå®Œå–„ç›‘æ§ä¿¡æ¯--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br> <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br> <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-actuator<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>application.ymlä¸­æ·»åŠ é…ç½®</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment"># infoé…ç½®</span><br><span class="hljs-attr">info:</span><br><span class="hljs-comment"># é¡¹ç›®çš„åç§°</span><br><span class="hljs-attr">app.name:</span> <span class="hljs-string">yuting-springcloud</span><br><span class="hljs-comment"># å…¬å¸çš„åç§°</span><br><span class="hljs-attr">company.name:</span> <span class="hljs-string">åä¸œå¸ˆèŒƒå¤§å­¦è®¡ç®—æœºç§‘å­¦å­¦é™¢</span><br></code></pre></td></tr></table></figure>

<p>æ­¤æ—¶åˆ·æ–°ç›‘æ§é¡µï¼Œç‚¹å‡»è¿›å…¥<img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221031230902.png" srcset="/img/loading.gif" lazyload style="zoom:50%;" />è·³è½¬æ–°é¡µé¢æ˜¾ç¤ºå¦‚ä¸‹å†…å®¹ï¼š</p>
<img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221031231024.png" srcset="/img/loading.gif" lazyload style="zoom:67%;" />

<p>ğŸ“3. Eurekaè‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ï¼šå¥½æ­»ä¸å¦‚èµ–æ´»ç€</p>
<p>ä¸€å¥è¯æ€»ç»“å°±æ˜¯ï¼š<strong>æŸæ—¶åˆ»æŸä¸€ä¸ªå¾®æœåŠ¡ä¸å¯ç”¨ï¼Œeurekaä¸ä¼šç«‹å³æ¸…ç†ï¼Œä¾æ—§ä¼šå¯¹è¯¥å¾®æœåŠ¡çš„ä¿¡æ¯è¿›è¡Œä¿å­˜ï¼</strong></p>
<ul>
<li>é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“eureka serveråœ¨ä¸€å®šæ—¶é—´å†…æ²¡æœ‰æ”¶åˆ°å®ä¾‹çš„å¿ƒè·³ï¼Œä¾¿ä¼šæŠŠè¯¥å®ä¾‹ä»æ³¨å†Œè¡¨ä¸­åˆ é™¤ï¼ˆ<strong>é»˜è®¤æ˜¯90ç§’</strong>ï¼‰ï¼Œä½†æ˜¯ï¼Œå¦‚æœçŸ­æ—¶é—´å†…ä¸¢å¤±å¤§é‡çš„å®ä¾‹å¿ƒè·³ï¼Œä¾¿ä¼šè§¦å‘eureka serverçš„è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ï¼Œæ¯”å¦‚åœ¨å¼€å‘æµ‹è¯•æ—¶ï¼Œéœ€è¦é¢‘ç¹åœ°é‡å¯å¾®æœåŠ¡å®ä¾‹ï¼Œä½†æ˜¯æˆ‘ä»¬å¾ˆå°‘ä¼šæŠŠeureka serverä¸€èµ·é‡å¯ï¼ˆå› ä¸ºåœ¨å¼€å‘è¿‡ç¨‹ä¸­ä¸ä¼šä¿®æ”¹eurekaæ³¨å†Œä¸­å¿ƒï¼‰ï¼Œ<strong>å½“ä¸€åˆ†é’Ÿå†…æ”¶åˆ°çš„å¿ƒè·³æ•°å¤§é‡å‡å°‘æ—¶ï¼Œä¼šè§¦å‘è¯¥ä¿æŠ¤æœºåˆ¶</strong>ã€‚å¯ä»¥åœ¨eurekaç®¡ç†ç•Œé¢çœ‹åˆ°Renews thresholdå’ŒRenews(last min)ï¼Œå½“åè€…ï¼ˆæœ€åä¸€åˆ†é’Ÿæ”¶åˆ°çš„å¿ƒè·³æ•°ï¼‰å°äºå‰è€…ï¼ˆå¿ƒè·³é˜ˆå€¼ï¼‰çš„æ—¶å€™ï¼Œè§¦å‘ä¿æŠ¤æœºåˆ¶ï¼Œä¼šå‡ºç°çº¢è‰²çš„è­¦å‘Šï¼š<code>EMERGENCY!EUREKA MAY BE INCORRECTLY CLAIMING INSTANCES ARE UP WHEN THEY&#39;RE NOT.RENEWALS ARE LESSER THAN THRESHOLD AND HENCE THE INSTANCES ARE NOT BEGING EXPIRED JUST TO BE SAFE.</code>ä»è­¦å‘Šä¸­å¯ä»¥çœ‹åˆ°ï¼Œeurekaè®¤ä¸ºè™½ç„¶æ”¶ä¸åˆ°å®ä¾‹çš„å¿ƒè·³ï¼Œä½†å®ƒè®¤ä¸ºå®ä¾‹è¿˜æ˜¯å¥åº·çš„ï¼Œeurekaä¼šä¿æŠ¤è¿™äº›å®ä¾‹ï¼Œä¸ä¼šæŠŠå®ƒä»¬ä»æ³¨å†Œè¡¨ä¸­åˆ æ‰ã€‚</li>
<li>è¯¥ä¿æŠ¤æœºåˆ¶çš„ç›®çš„æ˜¯é¿å…ç½‘ç»œè¿æ¥æ•…éšœï¼Œåœ¨å‘ç”Ÿç½‘ç»œæ•…éšœæ—¶ï¼Œå¾®æœåŠ¡å’Œæ³¨å†Œä¸­å¿ƒä¹‹é—´æ— æ³•æ­£å¸¸é€šä¿¡ï¼Œä½†æœåŠ¡æœ¬èº«æ˜¯å¥åº·çš„ï¼Œä¸åº”è¯¥æ³¨é”€è¯¥æœåŠ¡ï¼Œå¦‚æœeurekaå› ç½‘ç»œæ•…éšœè€ŒæŠŠå¾®æœåŠ¡è¯¯åˆ äº†ï¼Œé‚£å³ä½¿ç½‘ç»œæ¢å¤äº†ï¼Œè¯¥å¾®æœåŠ¡ä¹Ÿä¸ä¼šé‡æ–°æ³¨å†Œåˆ°eureka serveräº†ï¼Œå› ä¸ºåªæœ‰åœ¨å¾®æœåŠ¡å¯åŠ¨çš„æ—¶å€™æ‰ä¼šå‘èµ·æ³¨å†Œè¯·æ±‚ï¼Œåé¢åªä¼šå‘é€å¿ƒè·³å’ŒæœåŠ¡åˆ—è¡¨è¯·æ±‚ï¼Œè¿™æ ·çš„è¯ï¼Œè¯¥å®ä¾‹è™½ç„¶æ˜¯è¿è¡Œç€ï¼Œä½†æ°¸è¿œä¸ä¼šè¢«å…¶å®ƒæœåŠ¡æ‰€æ„ŸçŸ¥ã€‚æ‰€ä»¥ï¼Œeureka serveråœ¨çŸ­æ—¶é—´å†…ä¸¢å¤±è¿‡å¤šçš„å®¢æˆ·ç«¯å¿ƒè·³æ—¶ï¼Œä¼šè¿›å…¥è‡ªæˆ‘ä¿æŠ¤æ¨¡å¼ï¼Œè¯¥æ¨¡å¼ä¸‹ï¼Œeurekaä¼šä¿æŠ¤æ³¨å†Œè¡¨ä¸­çš„ä¿¡æ¯ï¼Œä¸åœ¨æ³¨é”€ä»»ä½•å¾®æœåŠ¡ï¼Œå½“ç½‘ç»œæ•…éšœæ¢å¤åï¼Œeurekaä¼šè‡ªåŠ¨é€€å‡ºä¿æŠ¤æ¨¡å¼ã€‚è‡ªæˆ‘ä¿æŠ¤æ¨¡å¼å¯ä»¥è®©é›†ç¾¤æ›´åŠ å¥å£®ã€‚</li>
<li>ä½†æ˜¯æˆ‘ä»¬åœ¨å¼€å‘æµ‹è¯•é˜¶æ®µï¼Œéœ€è¦é¢‘ç¹åœ°é‡å¯å‘å¸ƒï¼Œå¦‚æœè§¦å‘äº†ä¿æŠ¤æœºåˆ¶ï¼Œåˆ™æ—§çš„æœåŠ¡å®ä¾‹æ²¡æœ‰è¢«åˆ é™¤ï¼Œè¿™æ—¶è¯·æ±‚æœ‰å¯èƒ½è·‘åˆ°æ—§çš„å®ä¾‹ä¸­ï¼Œè€Œè¯¥å®ä¾‹å·²ç»å…³é—­äº†ï¼Œè¿™å°±å¯¼è‡´è¯·æ±‚é”™è¯¯ï¼Œå½±å“å¼€å‘æµ‹è¯•ã€‚æ‰€ä»¥ï¼Œåœ¨å¼€å‘æµ‹è¯•é˜¶æ®µï¼Œæˆ‘ä»¬å¯ä»¥æŠŠè‡ªæˆ‘ä¿æŠ¤æ¨¡å¼å…³é—­ï¼Œåªéœ€åœ¨eureka serveré…ç½®æ–‡ä»¶ä¸­åŠ ä¸Šå¦‚ä¸‹é…ç½®å³å¯ï¼š<code>eureka.server.enable-self-preservation=false</code>ã€ä¸æ¨èå…³é—­è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ã€‘</li>
</ul>
<p>è¯¦ç»†å†…å®¹å¯ä»¥å‚è€ƒä¸‹è¿™ç¯‡åšå®¢å†…å®¹ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/wudiyong22/article/details/80827594">https://blog.csdn.net/wudiyong22/article/details/80827594</a></p>
<p> ğŸ“4. æ³¨å†Œè¿›æ¥çš„å¾®æœåŠ¡ï¼Œè·å–ä¸€äº›æ¶ˆæ¯ï¼ˆå›¢é˜Ÿå¼€å‘ä¼šç”¨åˆ°ï¼‰</p>
<p><strong>DeptController.java</strong>æ–°å¢æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * DiscoveryClient å¯ä»¥ç”¨æ¥è·å–ä¸€äº›é…ç½®çš„ä¿¡æ¯ï¼Œå¾—åˆ°å…·ä½“çš„å¾®æœåŠ¡ï¼</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@Autowired</span><br><span class="hljs-keyword">private</span> DiscoveryClient client;<br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * è·å–ä¸€äº›æ³¨å†Œè¿›æ¥çš„å¾®æœåŠ¡çš„ä¿¡æ¯~ï¼Œ</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@GetMapping(&quot;/dept/discovery&quot;)</span><br><span class="hljs-keyword">public</span> Object <span class="hljs-title function_">discovery</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-comment">// è·å–å¾®æœåŠ¡åˆ—è¡¨çš„æ¸…å•</span><br>    List&lt;String&gt; services = client.getServices();<br>    System.out.println(<span class="hljs-string">&quot;discovery=&gt;services:&quot;</span> + services);<br>    <span class="hljs-comment">// å¾—åˆ°ä¸€ä¸ªå…·ä½“çš„å¾®æœåŠ¡ä¿¡æ¯,é€šè¿‡å…·ä½“çš„å¾®æœåŠ¡idï¼ŒapplicaioinNameï¼›</span><br>    List&lt;ServiceInstance&gt; instances = client.getInstances(<span class="hljs-string">&quot;SPRINGCLOUD-PROVIDER-DEPT&quot;</span>);<br>    <span class="hljs-keyword">for</span> (ServiceInstance instance : instances) &#123;<br>        System.out.println(<br>                instance.getHost() + <span class="hljs-string">&quot;\t&quot;</span> + <span class="hljs-comment">// ä¸»æœºåç§°</span><br>                        instance.getPort() + <span class="hljs-string">&quot;\t&quot;</span> + <span class="hljs-comment">// ç«¯å£å·</span><br>                        instance.getUri() + <span class="hljs-string">&quot;\t&quot;</span> + <span class="hljs-comment">// uri</span><br>                        instance.getServiceId() <span class="hljs-comment">// æœåŠ¡id</span><br>        );<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.client;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>ä¸»å¯åŠ¨ç±»ä¸­åŠ å…¥<a target="_blank" rel="noopener" href="https://github.com/EnableDiscoveryClient">@EnableDiscoveryClient</a> æ³¨è§£</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-comment">// @EnableEurekaClient å¼€å¯Eurekaå®¢æˆ·ç«¯æ³¨è§£ï¼Œåœ¨æœåŠ¡å¯åŠ¨åè‡ªåŠ¨å‘æ³¨å†Œä¸­å¿ƒæ³¨å†ŒæœåŠ¡</span><br><span class="hljs-meta">@EnableEurekaClient</span><br><span class="hljs-comment">// @EnableEurekaClient å¼€å¯æœåŠ¡å‘ç°å®¢æˆ·ç«¯çš„æ³¨è§£ï¼Œå¯ä»¥ç”¨æ¥è·å–ä¸€äº›é…ç½®çš„ä¿¡æ¯ï¼Œå¾—åˆ°å…·ä½“çš„å¾®æœåŠ¡</span><br><span class="hljs-meta">@EnableDiscoveryClient</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DeptProvider_8001</span> &#123;<br>    ...<br>&#125;<br></code></pre></td></tr></table></figure>

<p>ç»“æœå¦‚å›¾ï¼š</p>
<img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221101000801.png" srcset="/img/loading.gif" lazyload style="zoom: 50%;" />

<p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221101000849.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="ğŸ‘-5-4-Eurekaï¼šé›†ç¾¤ç¯å¢ƒé…ç½®"><a href="#ğŸ‘-5-4-Eurekaï¼šé›†ç¾¤ç¯å¢ƒé…ç½®" class="headerlink" title="ğŸ‘ 5.4  Eurekaï¼šé›†ç¾¤ç¯å¢ƒé…ç½®"></a>ğŸ‘ <strong>5.4  Eurekaï¼šé›†ç¾¤ç¯å¢ƒé…ç½®</strong></h3><p>ğŸ“1.åˆå§‹åŒ–</p>
<p>æ–°å»ºspringcloud-eureka-7002ã€springcloud-eureka-7003 æ¨¡å—</p>
<p>1.ä¸ºpom.xmlæ·»åŠ ä¾èµ– (ä¸springcloud-eureka-7001ç›¸åŒ)</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--å¯¼åŒ…~--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework.cloud/spring-cloud-starter-eureka-server --&gt;</span><br>    <span class="hljs-comment">&lt;!--å¯¼å…¥Eureka Serverä¾èµ–--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-eureka-server<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.4.6.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--çƒ­éƒ¨ç½²å·¥å…·--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-devtools<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>2.application.ymlé…ç½®(ä¸springcloud-eureka-7001ç›¸åŒ)</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">server:</span><br>  <span class="hljs-attr">port:</span> <span class="hljs-number">7003</span><br><span class="hljs-comment"># Eurekaé…ç½®</span><br><span class="hljs-attr">eureka:</span><br>  <span class="hljs-attr">instance:</span><br>    <span class="hljs-attr">hostname:</span> <span class="hljs-string">localhost</span> <span class="hljs-comment"># EurekaæœåŠ¡ç«¯çš„å®ä¾‹åå­—</span><br>  <span class="hljs-attr">client:</span><br>    <span class="hljs-attr">register-with-eureka:</span> <span class="hljs-literal">false</span> <span class="hljs-comment"># è¡¨ç¤ºæ˜¯å¦å‘ Eureka æ³¨å†Œä¸­å¿ƒæ³¨å†Œè‡ªå·±(è¿™ä¸ªæ¨¡å—æœ¬èº«æ˜¯æœåŠ¡å™¨,æ‰€ä»¥ä¸éœ€è¦)</span><br>    <span class="hljs-attr">fetch-registry:</span> <span class="hljs-literal">false</span> <span class="hljs-comment"># fetch-registryå¦‚æœä¸ºfalse,åˆ™è¡¨ç¤ºè‡ªå·±ä¸ºæ³¨å†Œä¸­å¿ƒ</span><br>    <span class="hljs-attr">service-url:</span> <span class="hljs-comment"># ç›‘æ§é¡µé¢~</span><br>      <span class="hljs-comment"># é‡å†™Eurekaçš„é»˜è®¤ç«¯å£ä»¥åŠè®¿é—®è·¯å¾„ ---&gt;http://localhost:7001/eureka/</span><br>      <span class="hljs-attr">defaultZone:</span> <span class="hljs-string">http://$&#123;</span><br>    <span class="hljs-string">eureka.instance.hostname&#125;:$&#123;</span><br>    <span class="hljs-string">server.port&#125;/eureka/</span><br></code></pre></td></tr></table></figure>

<p>3.ä¸»å¯åŠ¨ç±»(ä¸springcloud-eureka-7001ç›¸åŒ)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@Auther</span>: yuting</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@Date</span>: 2022/11/02/10:26</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@Description</span>: å¯åŠ¨ä¹‹åï¼Œè®¿é—® http://127.0.0.1:7003/</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-comment">// @EnableEurekaServer æœåŠ¡ç«¯çš„å¯åŠ¨ç±»ï¼Œå¯ä»¥æ¥å—åˆ«äººæ³¨å†Œè¿›æ¥~</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EurekaServer_7003</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        SpringApplication.run(EurekaServer_7003.class,args);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>ğŸ“2.é›†ç¾¤æˆå‘˜ç›¸äº’å…³è”</p>
<p>é…ç½®ä¸€äº›è‡ªå®šä¹‰æœ¬æœºåå­—ï¼Œæ‰¾åˆ°æœ¬æœºhostsæ–‡ä»¶å¹¶æ‰“å¼€</p>
<p>åœ¨hostsæ–‡ä»¶æœ€ååŠ ä¸Šï¼Œè¦è®¿é—®çš„æœ¬æœºåç§°ï¼Œé»˜è®¤æ˜¯localhost</p>
<p>127.0.0.1    eureka7001</p>
<p>127.0.0.1    eureka7002</p>
<p>127.0.0.1    eureka7003</p>
<p>ä¿®æ”¹application.ymlçš„é…ç½®ï¼Œå¦‚å›¾ä¸ºspringcloud-eureka-7001é…ç½®ï¼Œspringcloud-eureka-7002&#x2F;springcloud-eureka-7003åŒæ ·åˆ†åˆ«ä¿®æ”¹ä¸ºå…¶å¯¹åº”çš„åç§°å³å¯</p>
<p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221102234722.png" srcset="/img/loading.gif" lazyload></p>
<p>åœ¨é›†ç¾¤ä¸­ä½¿springcloud-eureka-7001å…³è”springcloud-eureka-7002ã€springcloud-eureka-7003</p>
<p>å®Œæ•´çš„springcloud-eureka-7001ä¸‹çš„application.ymlå¦‚ä¸‹</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">server:</span><br>  <span class="hljs-attr">port:</span> <span class="hljs-number">7001</span><br><span class="hljs-comment">#Eurekaé…ç½®</span><br><span class="hljs-attr">eureka:</span><br>  <span class="hljs-attr">instance:</span><br>    <span class="hljs-attr">hostname:</span> <span class="hljs-string">eureka7001.com</span> <span class="hljs-comment">#EurekaæœåŠ¡ç«¯çš„å®ä¾‹åå­—</span><br>  <span class="hljs-attr">client:</span><br>    <span class="hljs-attr">register-with-eureka:</span> <span class="hljs-literal">false</span> <span class="hljs-comment">#è¡¨ç¤ºæ˜¯å¦å‘ Eureka æ³¨å†Œä¸­å¿ƒæ³¨å†Œè‡ªå·±(è¿™ä¸ªæ¨¡å—æœ¬èº«æ˜¯æœåŠ¡å™¨,æ‰€ä»¥ä¸éœ€è¦)</span><br>    <span class="hljs-attr">fetch-registry:</span> <span class="hljs-literal">false</span> <span class="hljs-comment">#fetch-registryå¦‚æœä¸ºfalse,åˆ™è¡¨ç¤ºè‡ªå·±ä¸ºæ³¨å†Œä¸­å¿ƒ</span><br>    <span class="hljs-attr">service-url:</span> <span class="hljs-comment">#ç›‘æ§é¡µé¢~</span><br>      <span class="hljs-comment">#é‡å†™Eurekaçš„é»˜è®¤ç«¯å£ä»¥åŠè®¿é—®è·¯å¾„ ---&gt;http://localhost:7001/eureka/</span><br>      <span class="hljs-comment"># å•æœºï¼š defaultZone: http://$&#123;eureka.instance.hostname&#125;:$&#123;server.port&#125;/eureka/</span><br>      <span class="hljs-comment"># é›†ç¾¤ï¼ˆå…³è”ï¼‰ï¼š7001å…³è”7002ã€7003</span><br>      <span class="hljs-attr">defaultZone:</span> <span class="hljs-string">http://eureka7002.com:7002/eureka/,http://eureka7003.com:7003/eureka/</span><br></code></pre></td></tr></table></figure>



<p>åŒæ—¶åœ¨é›†ç¾¤ä¸­ä½¿springcloud-eureka-7002å…³è”springcloud-eureka-7001ã€springcloud-eureka-7003</p>
<p>å®Œæ•´çš„springcloud-eureka-7002ä¸‹çš„application.ymlå¦‚ä¸‹</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">server:</span><br>  <span class="hljs-attr">port:</span> <span class="hljs-number">7002</span><br><span class="hljs-comment">#Eurekaé…ç½®</span><br><span class="hljs-attr">eureka:</span><br>  <span class="hljs-attr">instance:</span><br>    <span class="hljs-attr">hostname:</span> <span class="hljs-string">eureka7002.com</span> <span class="hljs-comment">#EurekaæœåŠ¡ç«¯çš„å®ä¾‹åå­—</span><br>  <span class="hljs-attr">client:</span><br>    <span class="hljs-attr">register-with-eureka:</span> <span class="hljs-literal">false</span> <span class="hljs-comment">#è¡¨ç¤ºæ˜¯å¦å‘ Eureka æ³¨å†Œä¸­å¿ƒæ³¨å†Œè‡ªå·±(è¿™ä¸ªæ¨¡å—æœ¬èº«æ˜¯æœåŠ¡å™¨,æ‰€ä»¥ä¸éœ€è¦)</span><br>    <span class="hljs-attr">fetch-registry:</span> <span class="hljs-literal">false</span> <span class="hljs-comment">#fetch-registryå¦‚æœä¸ºfalse,åˆ™è¡¨ç¤ºè‡ªå·±ä¸ºæ³¨å†Œä¸­å¿ƒ</span><br>    <span class="hljs-attr">service-url:</span> <span class="hljs-comment">#ç›‘æ§é¡µé¢~</span><br>      <span class="hljs-comment">#é‡å†™Eurekaçš„é»˜è®¤ç«¯å£ä»¥åŠè®¿é—®è·¯å¾„ ---&gt;http://localhost:7001/eureka/</span><br>      <span class="hljs-comment"># å•æœºï¼š defaultZone: http://$&#123;eureka.instance.hostname&#125;:$&#123;server.port&#125;/eureka/</span><br>      <span class="hljs-comment"># é›†ç¾¤ï¼ˆå…³è”ï¼‰ï¼š7002å…³è”7001ã€7003</span><br>      <span class="hljs-attr">defaultZone:</span> <span class="hljs-string">http://eureka7001.com:7001/eureka/,http://eureka7003.com:7003/eureka/</span><br></code></pre></td></tr></table></figure>

<p>springcloud-eureka-7003é…ç½®æ–¹å¼åŒç†å¯å¾—.</p>
<p>é€šè¿‡springcloud-provider-dept-8001ä¸‹çš„ymlé…ç½®æ–‡ä»¶ï¼Œä¿®æ”¹<strong>Eurekaé…ç½®ï¼šé…ç½®æœåŠ¡æ³¨å†Œä¸­å¿ƒåœ°å€</strong></p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment"># Eurekaé…ç½®ï¼šé…ç½®æœåŠ¡æ³¨å†Œä¸­å¿ƒåœ°å€</span><br>eureka:<br>  client:<br>    service-url:<br>      <span class="hljs-comment"># æ³¨å†Œä¸­å¿ƒåœ°å€7001-7003</span><br>      defaultZone: http:<span class="hljs-regexp">//</span>eureka7001.com:<span class="hljs-number">7001</span><span class="hljs-regexp">/eureka/</span>,http:<span class="hljs-regexp">//</span>eureka7002.com:<span class="hljs-number">7002</span><span class="hljs-regexp">/eureka/</span>,http:<span class="hljs-regexp">//</span>eureka7003.com:<span class="hljs-number">7003</span><span class="hljs-regexp">/eureka/</span><br>  instance:<br>    instance-id: springcloud-provider-dept-<span class="hljs-number">8001</span> <span class="hljs-comment">#ä¿®æ”¹Eurekaä¸Šçš„é»˜è®¤æè¿°ä¿¡æ¯</span><br></code></pre></td></tr></table></figure>

<p>è¿™æ ·æ¨¡æ‹Ÿé›†ç¾¤å°±æ­å»ºå·äº†ï¼Œå°±å¯ä»¥æŠŠä¸€ä¸ªé¡¹ç›®æŒ‚è½½åˆ°ä¸‰ä¸ªæœåŠ¡å™¨ä¸Šäº†</p>
<p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221102234941.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="ğŸ‘5-5-å¯¹æ¯”å’ŒZookeeperåŒºåˆ«"><a href="#ğŸ‘5-5-å¯¹æ¯”å’ŒZookeeperåŒºåˆ«" class="headerlink" title="ğŸ‘5.5 å¯¹æ¯”å’ŒZookeeperåŒºåˆ«"></a>ğŸ‘<strong>5.5 å¯¹æ¯”å’ŒZookeeperåŒºåˆ«</strong></h3><p>ğŸ<strong>1. å›é¡¾CAPåŸåˆ™</strong></p>
<p>RDBMS (MySQL\Oracle\sqlServer) &#x3D;&#x3D;&#x3D;&gt; ACID</p>
<p>NoSQL (Redis\MongoDB) &#x3D;&#x3D;&#x3D;&gt; CAP</p>
<p>ğŸ<strong>2. ACIDæ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>
<ul>
<li>A (Atomicity) åŸå­æ€§</li>
<li>C (Consistency) ä¸€è‡´æ€§</li>
<li>I (Isolation) éš”ç¦»æ€§</li>
<li>D (Durability) æŒä¹…æ€§</li>
</ul>
<p>ğŸ<strong>3. CAPæ˜¯ä»€ä¹ˆ?</strong></p>
<ul>
<li>C (Consistency) å¼ºä¸€è‡´æ€§</li>
<li>A (Availability) å¯ç”¨æ€§</li>
<li>P (Partition tolerance) åˆ†åŒºå®¹é”™æ€§</li>
</ul>
<p>CAPçš„ä¸‰è¿›äºŒï¼šCAã€APã€CP</p>
<p>ğŸ<strong>4. CAPç†è®ºçš„æ ¸å¿ƒ</strong></p>
<ul>
<li>ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿä¸å¯èƒ½åŒæ—¶å¾ˆå¥½çš„æ»¡è¶³ä¸€è‡´æ€§ï¼Œå¯ç”¨æ€§å’Œåˆ†åŒºå®¹é”™æ€§è¿™ä¸‰ä¸ªéœ€æ±‚</li>
<li>æ ¹æ®CAPåŸç†ï¼Œå°†NoSQLæ•°æ®åº“åˆ†æˆäº†æ»¡è¶³CAåŸåˆ™ï¼Œæ»¡è¶³CPåŸåˆ™å’Œæ»¡è¶³APåŸåˆ™ä¸‰å¤§ç±»<ul>
<li>CAï¼šå•ç‚¹é›†ç¾¤ï¼Œæ»¡è¶³ä¸€è‡´æ€§ï¼Œå¯ç”¨æ€§çš„ç³»ç»Ÿï¼Œé€šå¸¸å¯æ‰©å±•æ€§è¾ƒå·®</li>
<li>CPï¼šæ»¡è¶³ä¸€è‡´æ€§ï¼Œåˆ†åŒºå®¹é”™çš„ç³»ç»Ÿï¼Œé€šå¸¸æ€§èƒ½ä¸æ˜¯ç‰¹åˆ«é«˜</li>
<li>APï¼šæ»¡è¶³å¯ç”¨æ€§ï¼Œåˆ†åŒºå®¹é”™çš„ç³»ç»Ÿï¼Œé€šå¸¸å¯èƒ½å¯¹ä¸€è‡´æ€§è¦æ±‚ä½ä¸€äº›</li>
</ul>
</li>
</ul>
<p>ğŸ<strong>5. ä½œä¸ºåˆ†å¸ƒå¼æœåŠ¡æ³¨å†Œä¸­å¿ƒï¼ŒEurekaæ¯”Zookeeperå¥½åœ¨å“ªé‡Œï¼Ÿ</strong></p>
<p>è‘—åçš„CAPç†è®ºæŒ‡å‡ºï¼Œä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿä¸å¯èƒ½åŒæ—¶æ»¡è¶³C (ä¸€è‡´æ€§) ã€A (å¯ç”¨æ€§) ã€P (å®¹é”™æ€§)ï¼Œç”±äºåˆ†åŒºå®¹é”™æ€§På†åˆ†å¸ƒå¼ç³»ç»Ÿä¸­æ˜¯å¿…é¡»è¦ä¿è¯çš„ï¼Œå› æ­¤æˆ‘ä»¬åªèƒ½å†Aå’ŒCä¹‹é—´è¿›è¡Œæƒè¡¡ã€‚</p>
<ul>
<li>Zookeeper ä¿è¯çš„æ˜¯ CP â€”&gt; æ»¡è¶³ä¸€è‡´æ€§ï¼Œåˆ†åŒºå®¹é”™çš„ç³»ç»Ÿï¼Œé€šå¸¸æ€§èƒ½ä¸æ˜¯ç‰¹åˆ«é«˜</li>
<li>Eureka ä¿è¯çš„æ˜¯ AP â€”&gt; æ»¡è¶³å¯ç”¨æ€§ï¼Œåˆ†åŒºå®¹é”™çš„ç³»ç»Ÿï¼Œé€šå¸¸å¯èƒ½å¯¹ä¸€è‡´æ€§è¦æ±‚ä½ä¸€äº›</li>
</ul>
<p><strong>Zookeeperä¿è¯çš„æ˜¯CP</strong></p>
<p>å½“å‘æ³¨å†Œä¸­å¿ƒæŸ¥è¯¢æœåŠ¡åˆ—è¡¨æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å®¹å¿æ³¨å†Œä¸­å¿ƒè¿”å›çš„æ˜¯å‡ åˆ†é’Ÿä»¥å‰çš„æ³¨å†Œä¿¡æ¯ï¼Œä½†ä¸èƒ½æ¥æ”¶æœåŠ¡ç›´æ¥downæ‰ä¸å¯ç”¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ<strong>æœåŠ¡æ³¨å†ŒåŠŸèƒ½å¯¹å¯ç”¨æ€§çš„è¦æ±‚è¦é«˜äºä¸€è‡´æ€§</strong>ã€‚ä½†zookeeperä¼šå‡ºç°è¿™æ ·ä¸€ç§æƒ…å†µï¼Œå½“masterèŠ‚ç‚¹å› ä¸ºç½‘ç»œæ•…éšœä¸å…¶ä»–èŠ‚ç‚¹å¤±å»è”ç³»æ—¶ï¼Œå‰©ä½™èŠ‚ç‚¹ä¼šé‡æ–°è¿›è¡Œleaderé€‰ä¸¾ã€‚é—®é¢˜åœ¨äºï¼Œé€‰ä¸¾leaderçš„æ—¶é—´å¤ªé•¿ï¼Œ30-120sï¼Œä¸”é€‰ä¸¾æœŸé—´æ•´ä¸ªzookeeperé›†ç¾¤æ˜¯ä¸å¯ç”¨çš„ï¼Œè¿™å°±å¯¼è‡´åœ¨é€‰ä¸¾æœŸé—´æ³¨å†ŒæœåŠ¡ç˜«ç—ªã€‚åœ¨äº‘éƒ¨ç½²çš„ç¯å¢ƒä¸‹ï¼Œå› ä¸ºç½‘ç»œé—®é¢˜ä½¿å¾—zookeeperé›†ç¾¤å¤±å»masterèŠ‚ç‚¹æ˜¯è¾ƒå¤§æ¦‚ç‡å‘ç”Ÿçš„äº‹ä»¶ï¼Œè™½ç„¶æœåŠ¡æœ€ç»ˆèƒ½å¤Ÿæ¢å¤ï¼Œä½†æ˜¯ï¼Œæ¼«é•¿çš„é€‰ä¸¾æ—¶é—´å¯¼è‡´æ³¨å†Œé•¿æœŸä¸å¯ç”¨ï¼Œæ˜¯ä¸å¯å®¹å¿çš„ã€‚</p>
<p><strong>Eurekaä¿è¯çš„æ˜¯AP</strong></p>
<p>Eurekaçœ‹æ˜ç™½äº†è¿™ä¸€ç‚¹ï¼Œå› æ­¤åœ¨è®¾è®¡æ—¶å°±ä¼˜å…ˆä¿è¯å¯ç”¨æ€§ã€‚<strong>Eurekaå„ä¸ªèŠ‚ç‚¹éƒ½æ˜¯å¹³ç­‰çš„</strong>ï¼Œå‡ ä¸ªèŠ‚ç‚¹æŒ‚æ‰ä¸ä¼šå½±å“æ­£å¸¸èŠ‚ç‚¹çš„å·¥ä½œï¼Œå‰©ä½™çš„èŠ‚ç‚¹ä¾ç„¶å¯ä»¥æä¾›æ³¨å†Œå’ŒæŸ¥è¯¢æœåŠ¡ã€‚è€ŒEurekaçš„å®¢æˆ·ç«¯åœ¨å‘æŸä¸ªEurekaæ³¨å†Œæ—¶ï¼Œå¦‚æœå‘ç°è¿æ¥å¤±è´¥ï¼Œåˆ™ä¼šè‡ªåŠ¨åˆ‡æ¢è‡³å…¶ä»–èŠ‚ç‚¹ï¼Œåªè¦æœ‰ä¸€å°Eurekaè¿˜åœ¨ï¼Œå°±èƒ½ä¿ä½æ³¨å†ŒæœåŠ¡çš„å¯ç”¨æ€§ï¼Œåªä¸è¿‡æŸ¥åˆ°çš„ä¿¡æ¯å¯èƒ½ä¸æ˜¯æœ€æ–°çš„ï¼Œé™¤æ­¤ä¹‹å¤–ï¼ŒEurekaè¿˜æœ‰ä¹‹ä¸­è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ï¼Œå¦‚æœåœ¨15åˆ†é’Ÿå†…è¶…è¿‡85%çš„èŠ‚ç‚¹éƒ½æ²¡æœ‰æ­£å¸¸çš„å¿ƒè·³ï¼Œé‚£ä¹ˆEurekaå°±è®¤ä¸ºå®¢æˆ·ç«¯ä¸æ³¨å†Œä¸­å¿ƒå‡ºç°äº†ç½‘ç»œæ•…éšœï¼Œæ­¤æ—¶ä¼šå‡ºç°ä»¥ä¸‹å‡ ç§æƒ…å†µï¼š</p>
<ul>
<li>Eurekaä¸åœ¨ä»æ³¨å†Œåˆ—è¡¨ä¸­ç§»é™¤å› ä¸ºé•¿æ—¶é—´æ²¡æ”¶åˆ°å¿ƒè·³è€Œåº”è¯¥è¿‡æœŸçš„æœåŠ¡</li>
<li>Eurekaä»ç„¶èƒ½å¤Ÿæ¥å—æ–°æœåŠ¡çš„æ³¨å†Œå’ŒæŸ¥è¯¢è¯·æ±‚ï¼Œä½†æ˜¯ä¸ä¼šè¢«åŒæ­¥åˆ°å…¶ä»–èŠ‚ç‚¹ä¸Š (å³ä¿è¯å½“å‰èŠ‚ç‚¹ä¾ç„¶å¯ç”¨)</li>
<li>å½“ç½‘ç»œç¨³å®šæ—¶ï¼Œå½“å‰å®ä¾‹æ–°çš„æ³¨å†Œä¿¡æ¯ä¼šè¢«åŒæ­¥åˆ°å…¶ä»–èŠ‚ç‚¹ä¸­</li>
</ul>
<p>å› æ­¤ï¼ŒEurekaå¯ä»¥å¾ˆå¥½çš„åº”å¯¹å› ç½‘ç»œæ•…éšœå¯¼è‡´éƒ¨åˆ†èŠ‚ç‚¹å¤±å»è”ç³»çš„æƒ…å†µï¼Œè€Œä¸ä¼šåƒzookeeperé‚£æ ·ä½¿æ•´ä¸ªæ³¨å†ŒæœåŠ¡ç˜«ç—ª</p>
<p>âš ï¸æ³¨æ„ï¼šåœ¨ä½¿ç”¨spingcloudçš„å¾®æœåŠ¡çš„æ—¶å€™ï¼Œè¦è®°ä½ä¸èƒ½ä½¿ç”¨ä¸‹åˆ’çº¿ï¼Œç”¨æ¨ªçº¿å»ä»£æ›¿ã€‚</p>
<p>(1)é—®é¢˜æè¿°ï¼š</p>
<p>åœ¨è¿›è¡Œä½¿ç”¨springcloudå¾®æœåŠ¡çš„æ—¶å€™ï¼Œåœ¨eurekaæ³¨å†Œä¸­å¿ƒï¼Œæ³¨å†Œå®Œå¤šä¸ªæœåŠ¡æä¾›è€…åœ¨eurekaæ³¨å†Œä¸­å¿ƒï¼Œä½¿ç”¨è´Ÿè½½å‡è¡¡Ribbonï¼Œåœ¨spingbootå¯åŠ¨å™¨è¿è¡Œæ—¶æ›å‡ºè¿™ä¸ªé”™è¯¯çš„ï¼ŒæŠ›å‡ºè¿™ä¸ªå¼‚å¸¸ï¼Œ<br>java.lang.IllegalStateException: Request URI does not contain a valid hostname: <a target="_blank" rel="noopener" href="http://user_service/user/">http://user_service/user/</a></p>
<p>(2)é—®é¢˜åˆ†æï¼š</p>
<p><code>java.lang.IllegalStateException: Request URI does not contain a valid hostname: http://user_service/user/</code></p>
<p>è¿™ä¸ªå¼‚å¸¸æ˜¯æ‰¾ä¸åˆ°æŒ‡å®šçš„urlï¼Œåœ¨eurekaçš„clientç«¯ï¼Œé€šè¿‡restTempleå‘eurekaçš„serverè·å–å¾®æœåŠ¡çš„æ—¶å€™ï¼Œæ²¡æœ‰è¿æ¥ä¸Šä¸»æœºåï¼Œæ‰€ä»¥éœ€è¦æ£€æŸ¥urlæœåŠ¡åå­—çš„é”™è¯¯ï¼Œæœ€åæ˜¯å‘ç°è´Ÿè½½å‡è¡¡Ribbonæ˜¯ä¸æ”¯æŒä¸‹åˆ’çº¿çš„ï¼Œåªæ”¯æŒæ¨ªçº¿ã€‚åœ¨å°†æœåŠ¡æä¾›è€…çš„åå­—é‡æ–°å‘½åï¼Œå°†ä¸‹åˆ’çº¿æ”¹ä¸ºæ¨ªçº¿ï¼Œé‡æ–°å¯åŠ¨æœåŠ¡ï¼Œè¿™ä¸ªå¼‚å¸¸å°±è§£å†³äº†ã€‚</p>
<p>å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_42614080/article/details/88982043">https://blog.csdn.net/weixin_42614080/article/details/88982043</a></p>
<h2 id="ğŸ¥¦-6-Ribbonï¼šè´Ÿè½½å‡è¡¡-åŸºäºå®¢æˆ·ç«¯"><a href="#ğŸ¥¦-6-Ribbonï¼šè´Ÿè½½å‡è¡¡-åŸºäºå®¢æˆ·ç«¯" class="headerlink" title="ğŸ¥¦ 6. Ribbonï¼šè´Ÿè½½å‡è¡¡(åŸºäºå®¢æˆ·ç«¯)"></a>ğŸ¥¦ 6. Ribbonï¼šè´Ÿè½½å‡è¡¡(åŸºäºå®¢æˆ·ç«¯)</h2><h3 id="ğŸ‘6-1-è´Ÿè½½å‡è¡¡ä»¥åŠRibbon"><a href="#ğŸ‘6-1-è´Ÿè½½å‡è¡¡ä»¥åŠRibbon" class="headerlink" title="ğŸ‘6.1 è´Ÿè½½å‡è¡¡ä»¥åŠRibbon"></a>ğŸ‘6.1 è´Ÿè½½å‡è¡¡ä»¥åŠRibbon</h3><p>Ribbonæ˜¯ä»€ä¹ˆï¼Ÿ</p>
<ul>
<li>Spring Cloud Ribbon æ˜¯åŸºäºNetflix Ribbon å®ç°çš„ä¸€å¥—<strong>å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡çš„å·¥å…·</strong>ã€‚</li>
<li>ç®€å•çš„è¯´ï¼ŒRibbon æ˜¯ Netflix å‘å¸ƒçš„å¼€æºé¡¹ç›®ï¼Œä¸»è¦åŠŸèƒ½æ˜¯æä¾›å®¢æˆ·ç«¯çš„è½¯ä»¶è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œå°† Netflix çš„ä¸­é—´å±‚æœåŠ¡è¿æ¥åœ¨ä¸€èµ·ã€‚Ribbon çš„å®¢æˆ·ç«¯ç»„ä»¶æä¾›ä¸€ç³»åˆ—å®Œæ•´çš„é…ç½®é¡¹ï¼Œå¦‚ï¼šè¿æ¥è¶…æ—¶ã€é‡è¯•ç­‰ã€‚ç®€å•çš„è¯´ï¼Œå°±æ˜¯åœ¨é…ç½®æ–‡ä»¶ä¸­åˆ—å‡º LoadBalancer (ç®€ç§°LBï¼šè´Ÿè½½å‡è¡¡) åé¢æ‰€æœ‰çš„åŠå…¶ï¼ŒRibbon ä¼šè‡ªåŠ¨çš„å¸®åŠ©ä½ åŸºäºæŸç§è§„åˆ™ (å¦‚ç®€å•è½®è¯¢ï¼Œéšæœºè¿æ¥ç­‰ç­‰) å»è¿æ¥è¿™äº›æœºå™¨ã€‚æˆ‘ä»¬ä¹Ÿå®¹æ˜“ä½¿ç”¨ Ribbon å®ç°è‡ªå®šä¹‰çš„è´Ÿè½½å‡è¡¡ç®—æ³•ï¼</li>
</ul>
<p>Ribbonèƒ½å¹²å˜›ï¼Ÿ</p>
<p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221103224258.png" srcset="/img/loading.gif" lazyload></p>
<ul>
<li><p>LBï¼Œå³è´Ÿè½½å‡è¡¡ (LoadBalancer) ï¼Œåœ¨å¾®æœåŠ¡æˆ–åˆ†å¸ƒå¼é›†ç¾¤ä¸­ç»å¸¸ç”¨çš„ä¸€ç§åº”ç”¨ã€‚</p>
</li>
<li><p>è´Ÿè½½å‡è¡¡ç®€å•çš„è¯´å°±æ˜¯å°†ç”¨æˆ·çš„è¯·æ±‚å¹³æ‘Šçš„åˆ†é…åˆ°å¤šä¸ªæœåŠ¡ä¸Šï¼Œä»è€Œè¾¾åˆ°ç³»ç»Ÿçš„HA (é«˜ç”¨)ã€‚</p>
</li>
<li><p>å¸¸è§çš„è´Ÿè½½å‡è¡¡è½¯ä»¶æœ‰ Nginxã€Lvs ç­‰ç­‰ã€‚</p>
</li>
<li><p>Dubboã€SpringCloud ä¸­å‡ç»™æˆ‘ä»¬æä¾›äº†è´Ÿè½½å‡è¡¡ï¼Œ<strong>SpringCloud çš„è´Ÿè½½å‡è¡¡ç®—æ³•å¯ä»¥è‡ªå®šä¹‰</strong>ã€‚</p>
</li>
<li><p>è´Ÿè½½å‡è¡¡ç®€å•åˆ†ç±»ï¼š</p>
<ul>
<li>é›†ä¸­å¼LB<ul>
<li>å³åœ¨æœåŠ¡çš„æä¾›æ–¹å’Œæ¶ˆè´¹æ–¹ä¹‹é—´ä½¿ç”¨ç‹¬ç«‹çš„LBè®¾æ–½ï¼Œå¦‚**Nginx(åå‘ä»£ç†æœåŠ¡å™¨)**ï¼Œç”±è¯¥è®¾æ–½è´Ÿè´£æŠŠè®¿é—®è¯·æ±‚é€šè¿‡æŸç§ç­–ç•¥è½¬å‘è‡³æœåŠ¡çš„æä¾›æ–¹ï¼</li>
</ul>
</li>
<li>è¿›ç¨‹å¼ LB<ul>
<li>å°†LBé€»è¾‘é›†æˆåˆ°æ¶ˆè´¹æ–¹ï¼Œæ¶ˆè´¹æ–¹ä»æœåŠ¡æ³¨å†Œä¸­å¿ƒè·çŸ¥æœ‰å“ªäº›åœ°å€å¯ç”¨ï¼Œç„¶åè‡ªå·±å†ä»è¿™äº›åœ°å€ä¸­é€‰å‡ºä¸€ä¸ªåˆé€‚çš„æœåŠ¡å™¨ã€‚</li>
<li><strong>Ribbon å°±å±äºè¿›ç¨‹å†…LB</strong>ï¼Œå®ƒåªæ˜¯ä¸€ä¸ªç±»åº“ï¼Œé›†æˆäºæ¶ˆè´¹æ–¹è¿›ç¨‹ï¼Œæ¶ˆè´¹æ–¹é€šè¿‡å®ƒæ¥è·å–åˆ°æœåŠ¡æä¾›æ–¹çš„åœ°å€ï¼</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="ğŸ‘6-2-é›†æˆRibbon"><a href="#ğŸ‘6-2-é›†æˆRibbon" class="headerlink" title="ğŸ‘6.2 é›†æˆRibbon"></a>ğŸ‘6.2 é›†æˆRibbon</h3><p><strong>springcloud-consumer-dept-80</strong>å‘pom.xmlä¸­æ·»åŠ Ribbonå’ŒEurekaä¾èµ–</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--Ribbon--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-ribbon<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.4.6.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-comment">&lt;!--Eureka: Ribbonéœ€è¦ä»EurekaæœåŠ¡ä¸­å¿ƒè·å–è¦æ‹¿ä»€ä¹ˆ--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-eureka<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.4.6.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>åœ¨application.ymlæ–‡ä»¶ä¸­é…ç½®Eureka</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment"># Eurekaé…ç½®</span><br>eureka:<br>  client:<br>    register-with-eureka: false <span class="hljs-comment"># ä¸å‘ Eurekaæ³¨å†Œè‡ªå·±</span><br>    service-url: <span class="hljs-comment"># ä»ä¸‰ä¸ªæ³¨å†Œä¸­å¿ƒä¸­éšæœºå–ä¸€ä¸ªå»è®¿é—®</span><br>      defaultZone: http:<span class="hljs-regexp">//</span>eureka7001.com:<span class="hljs-number">7001</span><span class="hljs-regexp">/eureka/</span>,http:<span class="hljs-regexp">//</span>eureka7002.com:<span class="hljs-number">7002</span><span class="hljs-regexp">/eureka/</span>,http:<span class="hljs-regexp">//</span>eureka7003.com:<span class="hljs-number">7003</span><span class="hljs-regexp">/eureka/</span><br></code></pre></td></tr></table></figure>

<p>ä¸»å¯åŠ¨ç±»åŠ ä¸Š@EnableEurekaClientæ³¨è§£ï¼Œå¼€å¯Eurekaæ³¨è§£</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-comment">//Ribbon å’Œ Eureka æ•´åˆä»¥åï¼Œå®¢æˆ·ç«¯å¯ä»¥ç›´æ¥è°ƒç”¨ï¼Œä¸ç”¨å…³å¿ƒIPåœ°å€å’Œç«¯å£å·</span><br><span class="hljs-variable">@SpringBootApplication</span><br><span class="hljs-variable">@EnableEurekaClient</span> <span class="hljs-comment">//å¼€å¯Eureka å®¢æˆ·ç«¯</span><br>public class DeptConsumer_80 &#123;<br>    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">static</span> <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">main</span>(String[] args) &#123;<br>        <span class="hljs-selector-tag">SpringApplication</span><span class="hljs-selector-class">.run</span>(DeptConsumer_80.class, args);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>è‡ªå®šä¹‰Springé…ç½®ç±»ï¼šConfigBean.java é…ç½®è´Ÿè½½å‡è¡¡å®ç°RestTemplate</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-variable">@Configuration</span><br>public class ConfigBean &#123;<br>    <span class="hljs-comment">//@Configuration -- spring  applicationContext.xml</span><br>    <span class="hljs-variable">@LoadBalanced</span> <span class="hljs-comment">//é…ç½®è´Ÿè½½å‡è¡¡å®ç°RestTemplate</span><br>    <span class="hljs-variable">@Bean</span><br>    public RestTemplate getRestTemplate() &#123;<br>        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">new</span> <span class="hljs-selector-tag">RestTemplate</span>();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>ä¿®æ”¹conrollerï¼šDeptConsumerController.java</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-comment">//Ribbon:æˆ‘ä»¬è¿™é‡Œçš„åœ°å€ï¼Œåº”è¯¥æ˜¯ä¸€ä¸ªå˜é‡ï¼Œé€šè¿‡æœåŠ¡åæ¥è®¿é—®</span><br><span class="hljs-comment">//private static final String REST_URL_PREFIX = &quot;http://localhost:8001&quot;;</span><br><span class="hljs-keyword">private</span> <span class="hljs-type">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> REST_URL_PREFIX = <span class="hljs-string">&quot;http://SPRINGCLOUD-PROVIDER-DEPT&quot;</span>;<br></code></pre></td></tr></table></figure>

<h3 id="ğŸ‘6-3-ä½¿ç”¨Ribbonå®ç°è´Ÿè½½å‡è¡¡"><a href="#ğŸ‘6-3-ä½¿ç”¨Ribbonå®ç°è´Ÿè½½å‡è¡¡" class="headerlink" title="ğŸ‘6.3 ä½¿ç”¨Ribbonå®ç°è´Ÿè½½å‡è¡¡"></a>ğŸ‘6.3 ä½¿ç”¨Ribbonå®ç°è´Ÿè½½å‡è¡¡</h3><p>æµç¨‹å›¾ï¼š</p>
<p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221103224800.png" srcset="/img/loading.gif" lazyload></p>
<p>1.æ–°å»ºä¸¤ä¸ªæœåŠ¡æä¾›è€…Moudleï¼šspringcloud-provider-dept-8003ã€springcloud-provider-dept-8002</p>
<p>2.å‚ç…§springcloud-provider-dept-8001 ä¾æ¬¡ä¸ºå¦å¤–ä¸¤ä¸ªMoudleæ·»åŠ pom.xmlä¾èµ– ã€resoureceä¸‹çš„mybatiså’Œapplication.ymlé…ç½®ï¼ŒJavaä»£ç </p>
<p>3.å¯åŠ¨æ‰€æœ‰æœåŠ¡æµ‹è¯•(æ ¹æ®è‡ªèº«ç”µè„‘é…ç½®å†³å®šå¯åŠ¨æœåŠ¡çš„ä¸ªæ•°)ï¼Œè®¿é—®<a target="_blank" rel="noopener" href="http://eureka7001.com:7002/%E6%9F%A5%E7%9C%8B%E7%BB%93%E6%9E%9C">http://eureka7001.com:7002/æŸ¥çœ‹ç»“æœ</a></p>
<p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221105175026.png" srcset="/img/loading.gif" lazyload></p>
<p>æµ‹è¯•è®¿é—®<a target="_blank" rel="noopener" href="http://localhost/consumer/dept/list">http://localhost/consumer/dept/list</a> è¿™æ—¶å€™éšæœºè®¿é—®çš„æ˜¯æœåŠ¡æä¾›è€…8003</p>
<p>å†æ¬¡è®¿é—®<a target="_blank" rel="noopener" href="http://localhost/consumer/dept/list%E8%BF%99%E6%97%B6%E5%80%99%E9%9A%8F%E6%9C%BA%E7%9A%84%E6%98%AF%E6%9C%8D%E5%8A%A1%E6%8F%90%E4%BE%9B%E8%80%858001">http://localhost/consumer/dept/listè¿™æ—¶å€™éšæœºçš„æ˜¯æœåŠ¡æä¾›è€…8001</a></p>
<p>ä»¥ä¸Šè¿™ç§<strong>æ¯æ¬¡è®¿é—®<a target="_blank" rel="noopener" href="http://localhost/consumer/dept/list%E9%9A%8F%E6%9C%BA%E8%AE%BF%E9%97%AE%E9%9B%86%E7%BE%A4%E4%B8%AD%E6%9F%90%E4%B8%AA%E6%9C%8D%E5%8A%A1%E6%8F%90%E4%BE%9B%E8%80%85%EF%BC%8C%E8%BF%99%E7%A7%8D%E6%83%85%E5%86%B5%E5%8F%AB%E5%81%9A%E8%BD%AE%E8%AF%A2">http://localhost/consumer/dept/listéšæœºè®¿é—®é›†ç¾¤ä¸­æŸä¸ªæœåŠ¡æä¾›è€…ï¼Œè¿™ç§æƒ…å†µå«åšè½®è¯¢</a></strong>ï¼Œè½®è¯¢ç®—æ³•åœ¨SpringCloudä¸­å¯ä»¥è‡ªå®šä¹‰ã€‚</p>
<p><strong>å¦‚ä½•åˆ‡æ¢æˆ–è€…è‡ªå®šä¹‰è§„åˆ™å‘¢ï¼Ÿ</strong></p>
<p>åœ¨springcloud-provider-dept-80æ¨¡å—ä¸‹çš„ConfigBeanä¸­è¿›è¡Œé…ç½®ï¼Œåˆ‡æ¢ä½¿ç”¨ä¸åŒçš„è§„åˆ™</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ConfigBean</span> &#123;<br>    <span class="hljs-comment">//@Configuration -- spring  applicationContext.xml</span><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * IRule:</span><br><span class="hljs-comment">     * RoundRobinRule è½®è¯¢ç­–ç•¥</span><br><span class="hljs-comment">     * RandomRule éšæœºç­–ç•¥</span><br><span class="hljs-comment">     * AvailabilityFilteringRule ï¼š ä¼šå…ˆè¿‡æ»¤æ‰ï¼Œè·³é—¸ï¼Œè®¿é—®æ•…éšœçš„æœåŠ¡~ï¼Œå¯¹å‰©ä¸‹çš„è¿›è¡Œè½®è¯¢~</span><br><span class="hljs-comment">     * RetryRule ï¼š ä¼šå…ˆæŒ‰ç…§è½®è¯¢è·å–æœåŠ¡~ï¼Œå¦‚æœæœåŠ¡è·å–å¤±è´¥ï¼Œåˆ™ä¼šåœ¨æŒ‡å®šçš„æ—¶é—´å†…è¿›è¡Œï¼Œé‡è¯•</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> IRule <span class="hljs-title function_">myRule</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RandomRule</span>();<span class="hljs-comment">//ä½¿ç”¨éšæœºç­–ç•¥</span><br>        <span class="hljs-comment">//return new RoundRobinRule();//ä½¿ç”¨è½®è¯¢ç­–ç•¥</span><br>        <span class="hljs-comment">//return new AvailabilityFilteringRule();//ä½¿ç”¨è½®è¯¢ç­–ç•¥</span><br>        <span class="hljs-comment">//return new RetryRule();//ä½¿ç”¨è½®è¯¢ç­–ç•¥</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>ä¹Ÿå¯ä»¥è‡ªå®šä¹‰è§„åˆ™ï¼Œåœ¨myRuleåŒ…ä¸‹è‡ªå®šä¹‰ä¸€ä¸ªé…ç½®ç±»MyRule.javaï¼Œæ³¨æ„ï¼š<strong>è¯¥åŒ…ä¸è¦å’Œä¸»å¯åŠ¨ç±»æ‰€åœ¨çš„åŒ…åŒçº§ï¼Œè¦è·Ÿå¯åŠ¨ç±»æ‰€åœ¨åŒ…åŒçº§</strong>ï¼š</p>
<p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221105175159.png" srcset="/img/loading.gif" lazyload></p>
<p>MyRule.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyRule</span> &#123;<br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> IRule <span class="hljs-title function_">myRule</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyRandomRule</span>();<span class="hljs-comment">//é»˜è®¤æ˜¯è½®è¯¢RandomRule,ç°åœ¨è‡ªå®šä¹‰ä¸ºè‡ªå·±çš„</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>ä¸»å¯åŠ¨ç±»å¼€å¯è´Ÿè½½å‡è¡¡å¹¶æŒ‡å®šè‡ªå®šä¹‰çš„MyRuleé…ç½®ç±»</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//Ribbon å’Œ Eureka æ•´åˆä»¥åï¼Œå®¢æˆ·ç«¯å¯ä»¥ç›´æ¥è°ƒç”¨ï¼Œä¸ç”¨å…³å¿ƒIPåœ°å€å’Œç«¯å£å·</span><br><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-meta">@EnableEurekaClient</span><br><span class="hljs-comment">//åœ¨å¾®æœåŠ¡å¯åŠ¨çš„æ—¶å€™å°±èƒ½åŠ è½½è‡ªå®šä¹‰çš„Ribbonç±»(è‡ªå®šä¹‰çš„è§„åˆ™ä¼šè¦†ç›–åŸæœ‰é»˜è®¤çš„è§„åˆ™)</span><br><span class="hljs-meta">@RibbonClient(name = &quot;SPRINGCLOUD-PROVIDER-DEPT&quot;,configuration = MyRule.class)</span><span class="hljs-comment">//å¼€å¯è´Ÿè½½å‡è¡¡,å¹¶æŒ‡å®šè‡ªå®šä¹‰çš„è§„åˆ™</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DeptConsumer_80</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        SpringApplication.run(DeptConsumer_80.class, args);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>è‡ªå®šä¹‰çš„è§„åˆ™(è¿™é‡Œæˆ‘ä»¬å‚è€ƒRibbonä¸­é»˜è®¤çš„è§„åˆ™ä»£ç è‡ªå·±ç¨å¾®æ”¹åŠ¨)ï¼šMyRandomRule.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyRandomRule</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractLoadBalancerRule</span> &#123;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ¯ä¸ªæœåŠ¡è®¿é—®5æ¬¡åˆ™æ¢ä¸‹ä¸€ä¸ªæœåŠ¡(æ€»å…±3ä¸ªæœåŠ¡)</span><br><span class="hljs-comment">     * &lt;p&gt;</span><br><span class="hljs-comment">     * total=0,é»˜è®¤=0,å¦‚æœ=5,æŒ‡å‘ä¸‹ä¸€ä¸ªæœåŠ¡èŠ‚ç‚¹</span><br><span class="hljs-comment">     * index=0,é»˜è®¤=0,å¦‚æœtotal=5,index+1</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">total</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<span class="hljs-comment">//è¢«è°ƒç”¨çš„æ¬¡æ•°</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">currentIndex</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<span class="hljs-comment">//å½“å‰æ˜¯è°åœ¨æä¾›æœåŠ¡</span><br>    <span class="hljs-comment">//@edu.umd.cs.findbugs.annotations.SuppressWarnings(value = &quot;RCN_REDUNDANT_NULLCHECK_OF_NULL_VALUE&quot;)</span><br>    <span class="hljs-keyword">public</span> Server <span class="hljs-title function_">choose</span><span class="hljs-params">(ILoadBalancer lb, Object key)</span> &#123;<br>        <span class="hljs-keyword">if</span> (lb == <span class="hljs-literal">null</span>) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>        &#125;<br>        <span class="hljs-type">Server</span> <span class="hljs-variable">server</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">while</span> (server == <span class="hljs-literal">null</span>) &#123;<br>            <span class="hljs-keyword">if</span> (Thread.interrupted()) &#123;<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>            &#125;<br>            List&lt;Server&gt; upList = lb.getReachableServers();<span class="hljs-comment">//è·å¾—å½“å‰æ´»ç€çš„æœåŠ¡</span><br>            List&lt;Server&gt; allList = lb.getAllServers();<span class="hljs-comment">//è·å–æ‰€æœ‰çš„æœåŠ¡</span><br>            <span class="hljs-type">int</span> <span class="hljs-variable">serverCount</span> <span class="hljs-operator">=</span> allList.size();<br>            <span class="hljs-keyword">if</span> (serverCount == <span class="hljs-number">0</span>) &#123;<br>                <span class="hljs-comment">/*</span><br><span class="hljs-comment">                 * No servers. End regardless of pass, because subsequent passes</span><br><span class="hljs-comment">                 * only get more restrictive.</span><br><span class="hljs-comment">                 */</span><br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>            &#125;<br>            <span class="hljs-comment">//int index = chooseRandomInt(serverCount);//ç”ŸæˆåŒºé—´éšæœºæ•°</span><br>            <span class="hljs-comment">//server = upList.get(index);//ä»æˆ–æ´»ç€çš„æœåŠ¡ä¸­,éšæœºè·å–ä¸€ä¸ª</span><br>            <span class="hljs-comment">//=====================è‡ªå®šä¹‰ä»£ç =========================</span><br>            <span class="hljs-keyword">if</span> (total &lt; <span class="hljs-number">5</span>) &#123;<br>                server = upList.get(currentIndex);<br>                total++;<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                total = <span class="hljs-number">0</span>;<br>                currentIndex++;<br>                <span class="hljs-keyword">if</span> (currentIndex &gt; upList.size()) &#123;<br>                    currentIndex = <span class="hljs-number">0</span>;<br>                &#125;<br>                server = upList.get(currentIndex);<span class="hljs-comment">//ä»æ´»ç€çš„æœåŠ¡ä¸­,è·å–æŒ‡å®šçš„æœåŠ¡æ¥è¿›è¡Œæ“ä½œ</span><br>            &#125;<br>            <span class="hljs-comment">//======================================================</span><br>            <span class="hljs-keyword">if</span> (server == <span class="hljs-literal">null</span>) &#123;<br>                <span class="hljs-comment">/*</span><br><span class="hljs-comment">                 * The only time this should happen is if the server list were</span><br><span class="hljs-comment">                 * somehow trimmed. This is a transient condition. Retry after</span><br><span class="hljs-comment">                 * yielding.</span><br><span class="hljs-comment">                 */</span><br>                Thread.yield();<br>                <span class="hljs-keyword">continue</span>;<br>            &#125;<br>            <span class="hljs-keyword">if</span> (server.isAlive()) &#123;<br>                <span class="hljs-keyword">return</span> (server);<br>            &#125;<br>            <span class="hljs-comment">// Shouldn&#x27;t actually happen.. but must be transient or a bug.</span><br>            server = <span class="hljs-literal">null</span>;<br>            Thread.yield();<br>        &#125;<br>        <span class="hljs-keyword">return</span> server;<br>    &#125;<br>    <span class="hljs-keyword">protected</span> <span class="hljs-type">int</span> <span class="hljs-title function_">chooseRandomInt</span><span class="hljs-params">(<span class="hljs-type">int</span> serverCount)</span> &#123;<br>        <span class="hljs-keyword">return</span> ThreadLocalRandom.current().nextInt(serverCount);<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Server <span class="hljs-title function_">choose</span><span class="hljs-params">(Object key)</span> &#123;<br>        <span class="hljs-keyword">return</span> choose(getLoadBalancer(), key);<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">initWithNiwsConfig</span><span class="hljs-params">(IClientConfig clientConfig)</span> &#123;<br>        <span class="hljs-comment">// TODO Auto-generated method stub</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="ğŸ¥¦-7-Feignï¼šè´Ÿè½½å‡è¡¡-åŸºäºæœåŠ¡ç«¯"><a href="#ğŸ¥¦-7-Feignï¼šè´Ÿè½½å‡è¡¡-åŸºäºæœåŠ¡ç«¯" class="headerlink" title="ğŸ¥¦ 7. Feignï¼šè´Ÿè½½å‡è¡¡(åŸºäºæœåŠ¡ç«¯)"></a>ğŸ¥¦ 7. Feignï¼šè´Ÿè½½å‡è¡¡(åŸºäºæœåŠ¡ç«¯)</h2><h3 id="ğŸ‘-7-1-Feignç®€ä»‹"><a href="#ğŸ‘-7-1-Feignç®€ä»‹" class="headerlink" title="ğŸ‘ 7.1 Feignç®€ä»‹"></a>ğŸ‘ 7.1 Feignç®€ä»‹</h3><p>Feignæ˜¯å£°æ˜å¼Web Serviceå®¢æˆ·ç«¯ï¼Œå®ƒè®©å¾®æœåŠ¡ä¹‹é—´çš„è°ƒç”¨å˜å¾—æ›´ç®€å•ï¼Œç±»ä¼¼controllerè°ƒç”¨serviceã€‚SpringCloudé›†æˆäº†Ribbonå’ŒEurekaï¼Œå¯ä»¥ä½¿ç”¨Feiginæä¾›è´Ÿè½½å‡è¡¡çš„httpå®¢æˆ·ç«¯</p>
<p><strong>åªéœ€è¦åˆ›å»ºä¸€ä¸ªæ¥å£ï¼Œç„¶åæ·»åŠ æ³¨è§£å³å¯~</strong></p>
<p>Feignï¼Œä¸»è¦æ˜¯ç¤¾åŒºç‰ˆï¼Œå¤§å®¶éƒ½ä¹ æƒ¯é¢å‘æ¥å£ç¼–ç¨‹ã€‚è¿™ä¸ªæ˜¯å¾ˆå¤šå¼€å‘äººå‘˜çš„è§„èŒƒã€‚è°ƒç”¨å¾®æœåŠ¡è®¿é—®ä¸¤ç§æ–¹æ³•</p>
<ol>
<li>å¾®æœåŠ¡åå­— ã€ribbonã€‘</li>
<li>æ¥å£å’Œæ³¨è§£ ã€feignã€‘</li>
</ol>
<p><strong>Feignèƒ½å¹²ä»€ä¹ˆï¼Ÿ</strong></p>
<ul>
<li>Feignæ—¨åœ¨ä½¿ç¼–å†™Java Httpå®¢æˆ·ç«¯å˜å¾—æ›´å®¹æ˜“</li>
<li>å‰é¢åœ¨ä½¿ç”¨<strong>Ribbon</strong> + <strong>RestTemplate</strong>æ—¶ï¼Œåˆ©ç”¨<strong>RestTemplate</strong>å¯¹Httpè¯·æ±‚çš„å°è£…å¤„ç†ï¼Œå½¢æˆäº†ä¸€å¥—æ¨¡æ¿åŒ–çš„è°ƒç”¨æ–¹æ³•ã€‚ä½†æ˜¯åœ¨å®é™…å¼€å‘ä¸­ï¼Œç”±äºå¯¹æœåŠ¡ä¾èµ–çš„è°ƒç”¨å¯èƒ½ä¸æ­¢ä¸€å¤„ï¼Œå¾€å¾€ä¸€ä¸ªæ¥å£ä¼šè¢«å¤šå¤„è°ƒç”¨ï¼Œæ‰€ä»¥é€šå¸¸éƒ½ä¼šé’ˆå¯¹æ¯ä¸ªå¾®æœåŠ¡è‡ªè¡Œå°è£…ä¸€ä¸ªå®¢æˆ·ç«¯ç±»æ¥åŒ…è£…è¿™äº›ä¾èµ–æœåŠ¡çš„è°ƒç”¨ã€‚æ‰€ä»¥ï¼Œ<strong>Feign</strong>åœ¨æ­¤åŸºç¡€ä¸Šåšäº†è¿›ä¸€æ­¥çš„å°è£…ï¼Œç”±ä»–æ¥å¸®åŠ©æˆ‘ä»¬å®šä¹‰å’Œå®ç°ä¾èµ–æœåŠ¡æ¥å£çš„å®šä¹‰ï¼Œåœ¨Feignçš„å®ç°ä¸‹ï¼Œæˆ‘ä»¬åªéœ€è¦åˆ›å»ºä¸€ä¸ªæ¥å£å¹¶ä½¿ç”¨æ³¨è§£çš„æ–¹å¼æ¥é…ç½®å®ƒ (ç±»ä¼¼ä»¥å‰Daoæ¥å£ä¸Šæ ‡æ³¨Mapperæ³¨è§£ï¼Œç°åœ¨æ˜¯ä¸€ä¸ªå¾®æœåŠ¡æ¥å£ä¸Šé¢æ ‡æ³¨ä¸€ä¸ªFeignæ³¨è§£)ï¼Œå³å¯å®Œæˆå¯¹æœåŠ¡æä¾›æ–¹çš„æ¥å£ç»‘å®šï¼Œç®€åŒ–äº†ä½¿ç”¨Spring Cloud Ribbon æ—¶ï¼Œè‡ªåŠ¨å°è£…æœåŠ¡è°ƒç”¨å®¢æˆ·ç«¯çš„å¼€å‘é‡ã€‚</li>
</ul>
<p><strong>Feigné»˜è®¤é›†æˆäº†Ribbon</strong></p>
<ul>
<li>åˆ©ç”¨<strong>Ribbon</strong>ç»´æŠ¤äº†MicroServiceCloud-Deptçš„æœåŠ¡åˆ—è¡¨ä¿¡æ¯ï¼Œå¹¶ä¸”é€šè¿‡è½®è¯¢å®ç°äº†å®¢æˆ·ç«¯çš„è´Ÿè½½å‡è¡¡ï¼Œè€Œä¸<strong>Ribbon</strong>ä¸åŒçš„æ˜¯ï¼Œé€šè¿‡<strong>Feign</strong>åªéœ€è¦å®šä¹‰æœåŠ¡ç»‘å®šæ¥å£ä¸”ä»¥å£°æ˜å¼çš„æ–¹æ³•ï¼Œä¼˜é›…è€Œç®€å•çš„å®ç°äº†æœåŠ¡è°ƒç”¨ã€‚</li>
</ul>
<h3 id="ğŸ‘-7-2-Feignçš„ä½¿ç”¨æ­¥éª¤"><a href="#ğŸ‘-7-2-Feignçš„ä½¿ç”¨æ­¥éª¤" class="headerlink" title="ğŸ‘ 7.2 Feignçš„ä½¿ç”¨æ­¥éª¤"></a>ğŸ‘ 7.2 Feignçš„ä½¿ç”¨æ­¥éª¤</h3><p>åˆ›å»ºspringcloud-consumer-fdept-feignæ¨¡å—</p>
<p>æ‹·è´springcloud-consumer-dept-80æ¨¡å—ä¸‹çš„pom.xmlï¼Œresourceï¼Œä»¥åŠjavaä»£ç åˆ°springcloud-consumer-feignæ¨¡å—ï¼Œå¹¶æ·»åŠ feignä¾èµ–ã€‚</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--Feignçš„ä¾èµ–--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-feign<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.4.6.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><code class="hljs java">``````````<br>é€šè¿‡Ribbonå®ç°ï¼šåŸæ¥çš„controllerï¼šDeptConsumerController.java<br>``````````  <br><span class="hljs-meta">@RestController</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DeptConsumerController</span> &#123;<br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ç†è§£ï¼šæ¶ˆè´¹è€…ï¼Œä¸åº”è¯¥æœ‰serviceå±‚~</span><br><span class="hljs-comment">     * RestTemplate .... ä¾›æˆ‘ä»¬ç›´æ¥è°ƒç”¨å°±å¯ä»¥äº†ï¼ æ³¨å†Œåˆ°Springä¸­</span><br><span class="hljs-comment">     * (åœ°å€ï¼šurl, å®ä½“ï¼šMap ,Class&lt;T&gt; responseType)</span><br><span class="hljs-comment">     * &lt;p&gt;</span><br><span class="hljs-comment">     * æä¾›å¤šç§ä¾¿æ·è®¿é—®è¿œç¨‹httpæœåŠ¡çš„æ–¹æ³•ï¼Œç®€å•çš„RestfulæœåŠ¡æ¨¡æ¿~</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> RestTemplate restTemplate;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æœåŠ¡æä¾›æ–¹åœ°å€å‰ç¼€</span><br><span class="hljs-comment">     * &lt;p&gt;</span><br><span class="hljs-comment">     * Ribbon:æˆ‘ä»¬è¿™é‡Œçš„åœ°å€ï¼Œåº”è¯¥æ˜¯ä¸€ä¸ªå˜é‡ï¼Œé€šè¿‡æœåŠ¡åæ¥è®¿é—®</span><br><span class="hljs-comment">     */</span><br><span class="hljs-comment">//    private static final String REST_URL_PREFIX = &quot;http://localhost:8001&quot;;</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">REST_URL_PREFIX</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;http://SPRINGCLOUD-PROVIDER-DEPT&quot;</span>;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ¶ˆè´¹æ–¹æ·»åŠ éƒ¨é—¨ä¿¡æ¯</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> dept</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@RequestMapping(&quot;/consumer/dept/add&quot;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">add</span><span class="hljs-params">(Dept dept)</span> &#123;<br>        <span class="hljs-comment">// postForObject(æœåŠ¡æä¾›æ–¹åœ°å€(æ¥å£),å‚æ•°å®ä½“,è¿”å›ç±»å‹.class)</span><br>        <span class="hljs-keyword">return</span> restTemplate.postForObject(REST_URL_PREFIX + <span class="hljs-string">&quot;/dept/add&quot;</span>, dept, Boolean.class);<br>    &#125;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ¶ˆè´¹æ–¹æ ¹æ®idæŸ¥è¯¢éƒ¨é—¨ä¿¡æ¯</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> id</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@RequestMapping(&quot;/consumer/dept/get/&#123;id&#125;&quot;)</span><br>    <span class="hljs-keyword">public</span> Dept <span class="hljs-title function_">get</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable(&quot;id&quot;)</span> Long id)</span> &#123;<br>        <span class="hljs-comment">// getForObject(æœåŠ¡æä¾›æ–¹åœ°å€(æ¥å£),è¿”å›ç±»å‹.class)</span><br>        <span class="hljs-keyword">return</span> restTemplate.getForObject(REST_URL_PREFIX + <span class="hljs-string">&quot;/dept/get/&quot;</span> + id, Dept.class);<br>    &#125;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ¶ˆè´¹æ–¹æŸ¥è¯¢éƒ¨é—¨ä¿¡æ¯åˆ—è¡¨</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@RequestMapping(&quot;/consumer/dept/list&quot;)</span><br>    <span class="hljs-keyword">public</span> List&lt;Dept&gt; <span class="hljs-title function_">list</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> restTemplate.getForObject(REST_URL_PREFIX + <span class="hljs-string">&quot;/dept/list&quot;</span>, List.class);<br>    &#125;<br>&#125;<br>``````````<br>é€šè¿‡**Feign**å®ç°ï¼šâ€”æ”¹é€ åcontrollerï¼š**DeptConsumerController.java**<br>``````````<br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@Auther</span>: yuting</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@Date</span>: 2022/11/05/22:47</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@Description</span>:</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@RestController</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DeptConsumerController</span> &#123;<br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> DeptClientService deptClientService;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ¶ˆè´¹æ–¹æ·»åŠ éƒ¨é—¨ä¿¡æ¯</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> dept</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@RequestMapping(&quot;/consumer/dept/add&quot;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">add</span><span class="hljs-params">(Dept dept)</span> &#123;<br>        <span class="hljs-keyword">return</span> deptClientService.addDept(dept);<br>    &#125;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ¶ˆè´¹æ–¹æ ¹æ®idæŸ¥è¯¢éƒ¨é—¨ä¿¡æ¯</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> id</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@RequestMapping(&quot;/consumer/dept/get/&#123;id&#125;&quot;)</span><br>    <span class="hljs-keyword">public</span> Dept <span class="hljs-title function_">get</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable(&quot;id&quot;)</span> Long id)</span> &#123;<br>       <span class="hljs-keyword">return</span> deptClientService.queryById(id);<br>    &#125;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ¶ˆè´¹æ–¹æŸ¥è¯¢éƒ¨é—¨ä¿¡æ¯åˆ—è¡¨</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@RequestMapping(&quot;/consumer/dept/list&quot;)</span><br>    <span class="hljs-keyword">public</span> List&lt;Dept&gt; <span class="hljs-title function_">list</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> deptClientService.queryAll();<br>    &#125;<br>&#125;<br>``````````<br>Feignå’ŒRibbonäºŒè€…å¯¹æ¯”ï¼Œå‰è€…æ˜¾ç°å‡ºé¢å‘æ¥å£ç¼–ç¨‹ç‰¹ç‚¹ï¼Œä»£ç çœ‹èµ·æ¥æ›´æ¸…çˆ½ï¼Œè€Œä¸”Feignè°ƒç”¨æ–¹å¼æ›´ç¬¦åˆæˆ‘ä»¬ä¹‹å‰åœ¨åšSSMæˆ–è€…SprngBooté¡¹ç›®æ—¶ï¼ŒControllerå±‚è°ƒç”¨Serviceå±‚çš„ç¼–ç¨‹ä¹ æƒ¯ï¼<br>**ä¸»é…ç½®ç±»**ï¼š<br>``````````<br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@Auther</span>: yuting</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@Date</span>: 2022/11/05/22:47</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@Description</span>:</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-meta">@EnableEurekaClient</span><br><span class="hljs-comment">// feignå®¢æˆ·ç«¯æ³¨è§£,å¹¶æŒ‡å®šè¦æ‰«æçš„åŒ…ä»¥åŠé…ç½®æ¥å£DeptClientService</span><br><span class="hljs-meta">@EnableFeignClients(basePackages = &#123;</span><br><span class="hljs-meta">      &quot;com.haust.springcloud&quot;&#125;)</span><br><span class="hljs-comment">// åˆ‡è®°ä¸è¦åŠ è¿™ä¸ªæ³¨è§£ï¼Œä¸ç„¶ä¼šå‡ºç°404è®¿é—®ä¸åˆ°</span><br><span class="hljs-comment">//@ComponentScan(&quot;com.haust.springcloud&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FeignDeptConsumer_80</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        SpringApplication.run(FeignDeptConsumer_80.class, args);<br>    &#125;<br>&#125;<br>``````````<br>  <br></code></pre></td></tr></table></figure>



<p>01.æ”¹é€ springcloud-apiæ¨¡å—</p>
<p>pom.xmlæ·»åŠ feignä¾èµ–</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">&lt;!--Feignçš„ä¾èµ–--&gt;</span><br><span class="hljs-string">&lt;dependency&gt;</span><br>    <span class="hljs-string">&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span><br>    <span class="hljs-string">&lt;artifactId&gt;spring-cloud-starter-feign&lt;/artifactId&gt;</span><br>    <span class="hljs-string">&lt;version&gt;1.4.6.RELEASE&lt;/version&gt;</span><br><span class="hljs-string">&lt;/dependency&gt;</span><br></code></pre></td></tr></table></figure>

<p>æ–°å»ºserviceåŒ…ï¼Œå¹¶æ–°å»ºDeptClientService.javaæ¥å£ï¼Œ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// @FeignClient:å¾®æœåŠ¡å®¢æˆ·ç«¯æ³¨è§£,value:æŒ‡å®šå¾®æœåŠ¡çš„åå­—,è¿™æ ·å°±å¯ä»¥ä½¿Feignå®¢æˆ·ç«¯ç›´æ¥æ‰¾åˆ°å¯¹åº”çš„å¾®æœåŠ¡</span><br>``````````<br><span class="hljs-meta">@FeignClient(value = â€œSPRINGCLOUD-PROVIDER-DEPTâ€)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">DeptClientService</span> &#123;<br>    <span class="hljs-meta">@GetMapping(&quot;/dept/get/&#123;id&#125;&quot;)</span><br>    <span class="hljs-keyword">public</span> Dept <span class="hljs-title function_">queryById</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable(&quot;id&quot;)</span> Long id)</span>;<br>    <span class="hljs-meta">@GetMapping(&quot;/dept/list&quot;)</span><br>    <span class="hljs-keyword">public</span> Dept <span class="hljs-title function_">queryAll</span><span class="hljs-params">()</span>;<br>    <span class="hljs-meta">@GetMapping(&quot;/dept/add&quot;)</span><br>    <span class="hljs-keyword">public</span> Dept <span class="hljs-title function_">addDept</span><span class="hljs-params">(Dept dept)</span>;<br>&#125;<br>``````````<br></code></pre></td></tr></table></figure>

<h3 id="ğŸ‘7-3-Feignå’ŒRibbonå¦‚ä½•é€‰æ‹©ï¼Ÿ"><a href="#ğŸ‘7-3-Feignå’ŒRibbonå¦‚ä½•é€‰æ‹©ï¼Ÿ" class="headerlink" title="ğŸ‘7.3 Feignå’ŒRibbonå¦‚ä½•é€‰æ‹©ï¼Ÿ"></a>ğŸ‘7.3 Feignå’ŒRibbonå¦‚ä½•é€‰æ‹©ï¼Ÿ</h3><p><strong>æ ¹æ®ä¸ªäººä¹ æƒ¯è€Œå®šï¼Œå¦‚æœå–œæ¬¢RESTé£æ ¼ä½¿ç”¨Ribbonï¼›å¦‚æœå–œæ¬¢ç¤¾åŒºç‰ˆçš„é¢å‘æ¥å£é£æ ¼ä½¿ç”¨Feign.</strong></p>
<p>Feign æœ¬è´¨ä¸Šä¹Ÿæ˜¯å®ç°äº† Ribbonï¼Œåªä¸è¿‡åè€…æ˜¯åœ¨è°ƒç”¨æ–¹å¼ä¸Šï¼Œä¸ºäº†æ»¡è¶³ä¸€äº›å¼€å‘è€…ä¹ æƒ¯çš„æ¥å£è°ƒç”¨ä¹ æƒ¯ï¼</p>
<h2 id="ğŸ¥¦-8-Hystrixï¼šæœåŠ¡ç†”æ–­"><a href="#ğŸ¥¦-8-Hystrixï¼šæœåŠ¡ç†”æ–­" class="headerlink" title="ğŸ¥¦ 8. Hystrixï¼šæœåŠ¡ç†”æ–­"></a>ğŸ¥¦ 8. Hystrixï¼šæœåŠ¡ç†”æ–­</h2><blockquote>
<p>åˆ†å¸ƒå¼ç³»ç»Ÿé¢ä¸´çš„é—®é¢˜</p>
</blockquote>
<p>å¤æ‚åˆ†å¸ƒå¼ä½“ç³»ç»“æ„ä¸­çš„åº”ç”¨ç¨‹åºæœ‰æ•°åä¸ªä¾èµ–å…³ç³»ï¼Œæ¯ä¸ªä¾èµ–å…³ç³»åœ¨æŸäº›æ—¶å€™å°†ä¸å¯é¿å…å¤±è´¥ï¼</p>
<h3 id="ğŸ‘8-1-æœåŠ¡é›ªå´©"><a href="#ğŸ‘8-1-æœåŠ¡é›ªå´©" class="headerlink" title="ğŸ‘8.1 æœåŠ¡é›ªå´©"></a>ğŸ‘8.1 æœåŠ¡é›ªå´©</h3><p>å¤šä¸ªå¾®æœåŠ¡ä¹‹é—´è°ƒç”¨çš„æ—¶å€™ï¼Œå‡è®¾å¾®æœåŠ¡Aè°ƒç”¨å¾®æœåŠ¡Bå’Œå¾®æœåŠ¡Cï¼Œå¾®æœåŠ¡Bå’Œå¾®æœåŠ¡Cåˆè°ƒç”¨å…¶ä»–çš„å¾®æœåŠ¡ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„â€œæ‰‡å‡ºâ€ï¼Œå¦‚æœæ‰‡å‡ºçš„é“¾è·¯ä¸Š<strong>æŸä¸ªå¾®æœåŠ¡çš„è°ƒç”¨å“åº”æ—¶é—´è¿‡é•¿ï¼Œæˆ–è€…ä¸å¯ç”¨</strong>ï¼Œå¯¹å¾®æœåŠ¡Açš„è°ƒç”¨å°±ä¼šå ç”¨è¶Šæ¥è¶Šå¤šçš„ç³»ç»Ÿèµ„æºï¼Œè¿›è€Œå¼•èµ·ç³»ç»Ÿå´©æºƒï¼Œæ‰€è°“çš„â€œé›ªå´©æ•ˆåº”â€ã€‚</p>
<p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221105223716.png" srcset="/img/loading.gif" lazyload></p>
<p>å¯¹äºé«˜æµé‡çš„åº”ç”¨æ¥è¯´ï¼Œå•ä¸€çš„åç«¯ä¾èµ–å¯èƒ½ä¼šå¯¼è‡´æ‰€æœ‰æœåŠ¡å™¨ä¸Šçš„æ‰€æœ‰èµ„æºéƒ½åœ¨å‡ åç§’å†…é¥±å’Œã€‚æ¯”å¤±è´¥æ›´ç³Ÿç³•çš„æ˜¯ï¼Œè¿™äº›åº”ç”¨ç¨‹åºè¿˜å¯èƒ½å¯¼è‡´æœåŠ¡ä¹‹é—´çš„å»¶è¿Ÿå¢åŠ ï¼Œå¤‡ä»½é˜Ÿåˆ—ï¼Œçº¿ç¨‹å’Œå…¶ä»–ç³»ç»Ÿèµ„æºç´§å¼ ï¼Œå¯¼è‡´æ•´ä¸ªç³»ç»Ÿå‘ç”Ÿæ›´å¤šçš„çº§è”æ•…éšœï¼Œ<strong>è¿™äº›éƒ½è¡¨ç¤ºéœ€è¦å¯¹æ•…éšœå’Œå»¶è¿Ÿè¿›è¡Œéš”ç¦»å’Œç®¡ç†ï¼Œä»¥è¾¾åˆ°å•ä¸ªä¾èµ–å…³ç³»çš„å¤±è´¥è€Œä¸å½±å“æ•´ä¸ªåº”ç”¨ç¨‹åºæˆ–ç³»ç»Ÿè¿è¡Œ</strong>ã€‚</p>
<p>æˆ‘ä»¬éœ€è¦ï¼Œ<strong>å¼ƒè½¦ä¿å¸…</strong>ï¼</p>
<h3 id="ğŸ‘8-2-ä»€ä¹ˆæ˜¯Hystrixï¼Ÿ"><a href="#ğŸ‘8-2-ä»€ä¹ˆæ˜¯Hystrixï¼Ÿ" class="headerlink" title="ğŸ‘8.2 ä»€ä¹ˆæ˜¯Hystrixï¼Ÿ"></a>ğŸ‘8.2 ä»€ä¹ˆæ˜¯Hystrixï¼Ÿ</h3><p><strong>Hystrix</strong>æ˜¯ä¸€ä¸ªåº”ç”¨äºå¤„ç†åˆ†å¸ƒå¼ç³»ç»Ÿçš„å»¶è¿Ÿå’Œå®¹é”™çš„å¼€æºåº“ï¼Œåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿé‡Œï¼Œè®¸å¤šä¾èµ–ä¸å¯é¿å…çš„ä¼šè°ƒç”¨å¤±è´¥ï¼Œæ¯”å¦‚è¶…æ—¶ï¼Œå¼‚å¸¸ç­‰ï¼Œ<strong>Hystrix</strong> èƒ½å¤Ÿä¿è¯åœ¨ä¸€ä¸ªä¾èµ–å‡ºé—®é¢˜çš„æƒ…å†µä¸‹ï¼Œä¸ä¼šå¯¼è‡´æ•´ä¸ªä½“ç³»æœåŠ¡å¤±è´¥ï¼Œé¿å…çº§è”æ•…éšœï¼Œä»¥æé«˜åˆ†å¸ƒå¼ç³»ç»Ÿçš„å¼¹æ€§ã€‚</p>
<p>â€œ<strong>æ–­è·¯å™¨</strong>â€æœ¬èº«æ˜¯ä¸€ç§å¼€å…³è£…ç½®ï¼Œå½“æŸä¸ªæœåŠ¡å•å…ƒå‘ç”Ÿæ•…éšœä¹‹åï¼Œé€šè¿‡æ–­è·¯å™¨çš„æ•…éšœç›‘æ§ (ç±»ä¼¼ç†”æ–­ä¿é™©ä¸) ï¼Œ<strong>å‘è°ƒç”¨æ–¹è¿”å›ä¸€ä¸ªæœåŠ¡é¢„æœŸçš„ï¼Œå¯å¤„ç†çš„å¤‡é€‰å“åº” (FallBack) ï¼Œè€Œä¸æ˜¯é•¿æ—¶é—´çš„ç­‰å¾…æˆ–è€…æŠ›å‡ºè°ƒç”¨æ–¹æ³•æ— æ³•å¤„ç†çš„å¼‚å¸¸ï¼Œè¿™æ ·å°±å¯ä»¥ä¿è¯äº†æœåŠ¡è°ƒç”¨æ–¹çš„çº¿ç¨‹ä¸ä¼šè¢«é•¿æ—¶é—´ï¼Œä¸å¿…è¦çš„å ç”¨</strong>ï¼Œä»è€Œé¿å…äº†æ•…éšœåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„è”“å»¶ï¼Œä¹ƒè‡³é›ªå´©ã€‚</p>
<h3 id="ğŸ‘8-3-Hystrixèƒ½å¹²å˜›ï¼Ÿ"><a href="#ğŸ‘8-3-Hystrixèƒ½å¹²å˜›ï¼Ÿ" class="headerlink" title="ğŸ‘8.3 Hystrixèƒ½å¹²å˜›ï¼Ÿ"></a>ğŸ‘8.3 Hystrixèƒ½å¹²å˜›ï¼Ÿ</h3><ul>
<li>æœåŠ¡é™çº§</li>
<li>æœåŠ¡ç†”æ–­</li>
<li>æœåŠ¡é™æµ</li>
<li>æ¥è¿‘å®æ—¶çš„ç›‘æ§</li>
<li>â€¦</li>
</ul>
</div>
				<link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css">
				<script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script>
				<script>
				var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);
				var isEncrypt = document.getElementById('hexo-blog-encrypt');
				var allowMobile = false;
				if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {
					try {
						var plugin = new ReadmorePlugin();
						plugin.init({
							"type": "hexo",
							"id": "readmore-container",
							"name": "YutingNotFound",
							"blogId": "04372-4551209630277-002",
							"qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg",
							"keyword": "éªŒè¯ç ",
							"random": "1",
							"height": "auto",
							"expires": "36500",
							"lockToc": "yes",
							"interval": "60",
							"baseUrl": "",
							"tocSelector": ""
						});
					} catch(e) {
						console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);
					}
				}
				</script>
			
              
            </div>
            <hr/>
            
            <!--  -->
            <div class="reward-container">
            	
            		<button id="rewardBtn" class="reward-btn">
            			 
            				  â¤ æ‰“èµ
            				
            		</button>
            		<p class="tea">è§‰å¾—ä¸é”™çš„è¯ï¼Œæ”¯æŒä¸€æ ¹æ£’æ£’ç³–å§ à­§(à¹‘â€¢Ì€âŒ„â€¢Ìà¹‘)à«­</p>
            		<div id="rewardImgContainer" class="reward-img-container">
                     	<div class="singleImgContainer">
                        	<img id="wechatImg" class="reward-img" src="/img/wechatpay.jpg" srcset="/img/loading.gif" lazyload alt="">
                            <p class="wechatPay">wechat pay</p>
                      </div>
                      <div class="singleImgContainer">
                           	<img id="alipayImg" class="reward-img" src="/img/alipay.jpg" srcset="/img/loading.gif" lazyload alt="">
                            <p class="aliPay">alipay</p>
                      </div>
            		</div>
            	
            </div>
            
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/Java/" class="category-chain-item">Java</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/Java/">#Java</a>
      
        <a href="/tags/spring-cloud/">#spring cloud</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>Spring Cloudç‹‚ç¥è¯´</div>
      <div>http://yuting0907.github.io/posts/6009bd1b.html</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>ä½œè€…</div>
          <div>Echo Yu</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>å‘å¸ƒäº</div>
          <div>2022å¹´10æœˆ18æ—¥</div>
        </div>
      
      
      <div class="license-meta-item">
        <div>è®¸å¯åè®®</div>
        <div>
          
            
            
              <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
              <span class="hint--top hint--rounded" aria-label="BY - ç½²å">
                <i class="iconfont icon-by"></i>
              </span>
              </a>
            
          
        </div>
      </div>
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/posts/9dcdd96b.html" title="è®¡ç®—æœºè§†è§‰-kalmanFilter">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">è®¡ç®—æœºè§†è§‰-kalmanFilter</span>
                        <span class="visible-mobile">ä¸Šä¸€ç¯‡</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/posts/f3d93e9f.html" title="å¦‚ä½•åˆ†æå¼€æºé¡¹ç›®">
                        <span class="hidden-mobile">å¦‚ä½•åˆ†æå¼€æºé¡¹ç›®</span>
                        <span class="visible-mobile">ä¸‹ä¸€ç¯‡</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  <article id="comments" lazyload>
    
  <div id="valine"></div>
  <script type="text/javascript">
    Fluid.utils.loadComments('#valine', function() {
      Fluid.utils.createScript('https://lib.baomitu.com/valine/1.4.16/Valine.min.js', function() {
        var options = Object.assign(
          {"appId":"R7QNfEH5amaZQLZm17hGAbmw-MdYXbMMI","appKey":"sUFrjMTIQtqH2qKITIAxiQf4","path":"window.location.pathname","placeholder":"Just go go","avatar":"mm","meta":["nick","mail","link"],"requiredFields":[],"pageSize":10,"lang":"zh-CN","highlight":false,"recordIP":false,"serverURLs":"","emojiCDN":null,"emojiMaps":null,"enableQQ":false,"enable":true,"appid":"R7QNfEH5amaZQLZm17hGAbmw-MdYXbMMI","appkey":"sUFrjMTIQtqH2qKITIAxiQf4","verify":false,"notify":false},
          {
            el: "#valine",
            path: window.location.pathname
          }
        )
        new Valine(options);
        Fluid.utils.waitElementVisible('#valine .vcontent', () => {
          var imgSelector = '#valine .vcontent img:not(.vemoji)';
          Fluid.plugins.imageCaption(imgSelector);
          Fluid.plugins.fancyBox(imgSelector);
        })
      });
    });
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


  </article>


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;ç›®å½•</p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  


  
  








    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">æœç´¢</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">å…³é”®è¯</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
    <div class="statistics">
  
  

  
    
      <span id="busuanzi_container_site_pv" style="display: none">
        æ€»è®¿é—®é‡ 
        <span id="busuanzi_value_site_pv"></span>
         æ¬¡
      </span>
    
    
      <span id="busuanzi_container_site_uv" style="display: none">
        æ€»è®¿å®¢æ•° 
        <span id="busuanzi_value_site_uv"></span>
         äºº
      </span>
    
    
  
</div>

  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>






  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.0/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      headingSelector : CONFIG.toc.headingSelector || 'h1,h2,h3,h4,h5,h6',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      collapseDepth   : CONFIG.toc.collapseDepth || 0,
      scrollSmooth    : true,
      headingsOffset  : -boardTop
    });
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }
  });
</script>


  <script>
  (function() {
    var enableLang = CONFIG.code_language.enable && CONFIG.code_language.default;
    var enableCopy = CONFIG.copy_btn;
    if (!enableLang && !enableCopy) {
      return;
    }

    function getBgClass(ele) {
      return Fluid.utils.getBackgroundLightness(ele) >= 0 ? 'code-widget-light' : 'code-widget-dark';
    }

    var copyTmpl = '';
    copyTmpl += '<div class="code-widget">';
    copyTmpl += 'LANG';
    copyTmpl += '</div>';
    jQuery('.markdown-body pre').each(function() {
      var $pre = jQuery(this);
      if ($pre.find('code.mermaid').length > 0) {
        return;
      }
      if ($pre.find('span.line').length > 0) {
        return;
      }

      var lang = '';

      if (enableLang) {
        lang = CONFIG.code_language.default;
        if ($pre[0].children.length > 0 && $pre[0].children[0].classList.length >= 2 && $pre.children().hasClass('hljs')) {
          lang = $pre[0].children[0].classList[1];
        } else if ($pre[0].getAttribute('data-language')) {
          lang = $pre[0].getAttribute('data-language');
        } else if ($pre.parent().hasClass('sourceCode') && $pre[0].children.length > 0 && $pre[0].children[0].classList.length >= 2) {
          lang = $pre[0].children[0].classList[1];
          $pre.parent().addClass('code-wrapper');
        } else if ($pre.parent().hasClass('markdown-body') && $pre[0].classList.length === 0) {
          $pre.wrap('<div class="code-wrapper"></div>');
        }
        lang = lang.toUpperCase().replace('NONE', CONFIG.code_language.default);
      }
      $pre.append(copyTmpl.replace('LANG', lang).replace('code-widget">',
        getBgClass($pre[0]) + (enableCopy ? ' code-widget copy-btn" data-clipboard-snippet><i class="iconfont icon-copy"></i>' : ' code-widget">')));

      if (enableCopy) {
        Fluid.utils.createScript('https://lib.baomitu.com/clipboard.js/2.0.10/clipboard.min.js', function() {
          var clipboard = new window.ClipboardJS('.copy-btn', {
            target: function(trigger) {
              var nodes = trigger.parentNode.childNodes;
              for (var i = 0; i < nodes.length; i++) {
                if (nodes[i].tagName === 'CODE') {
                  return nodes[i];
                }
              }
            }
          });
          clipboard.on('success', function(e) {
            e.clearSelection();
            e.trigger.innerHTML = e.trigger.innerHTML.replace('icon-copy', 'icon-success');
            setTimeout(function() {
              e.trigger.innerHTML = e.trigger.innerHTML.replace('icon-success', 'icon-copy');
            }, 2000);
          });
        });
      }
    });
  })();
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  
      <script>
        MathJax = {
          tex    : {
            inlineMath: { '[+]': [['$', '$']] }
          },
          loader : {
            load: ['ui/lazy']
          },
          options: {
            renderActions: {
              findScript    : [10, doc => {
                document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
                  const display = !!node.type.match(/; *mode=display/);
                  const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
                  const text = document.createTextNode('');
                  node.parentNode.replaceChild(text, node);
                  math.start = { node: text, delim: '', n: 0 };
                  math.end = { node: text, delim: '', n: 0 };
                  doc.math.push(math);
                });
              }, '', false],
              insertedScript: [200, () => {
                document.querySelectorAll('mjx-container').forEach(node => {
                  let target = node.parentNode;
                  if (target.nodeName.toLowerCase() === 'li') {
                    target.parentNode.classList.add('has-jax');
                  }
                });
              }, '', false]
            }
          }
        };
      </script>
    

  <script  src="https://lib.baomitu.com/mathjax/3.2.0/es5/tex-mml-chtml.js" ></script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>




  
<script src="/js/reward.js"></script>



<!-- ä¸»é¢˜çš„å¯åŠ¨é¡¹ï¼Œå°†å®ƒä¿æŒåœ¨æœ€åº•éƒ¨ -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">åšå®¢åœ¨å…è®¸ JavaScript è¿è¡Œçš„ç¯å¢ƒä¸‹æµè§ˆæ•ˆæœæ›´ä½³</div>
  </noscript>
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>

<!--  -->
<script type="text/javascript" src="/js/love.js"></script>

<!--åŠ¨æ€çº¿æ¡èƒŒæ™¯-->
<script type="text/javascript"
color="220,220,220" opacity='0.7' zIndex="-2" count="200" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js">
</script>  

<!--æµè§ˆå™¨æç¬‘æ ‡é¢˜-->
<script type="text/javascript" src="/js/FunnyTitle.js"></script>
