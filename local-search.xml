<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>DataX源码解析-01整体架构</title>
    <link href="/posts/2025/09/fc450966.html"/>
    <url>/posts/2025/09/fc450966.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>近期在工作中需要用到DataX去作为公司内部离线数据同步引擎，好奇心驱使就花了一些时间研究了DataX的整体架构和设计思想，从中吸收了很多优秀的设计思路，作为一款纯Java实现的数据同步工具，相对于市面上已存在的基于大数据框架为背景的数据同步工具有着易部署、易扩展的优点，但不足的地方是alibaba只是开源了DataX单机模式代码，并未开源分布式部分代码，目前在Github中的只是阉割版是DataX。</p><p> DataX 是一个异构数据源离线同步工具，致力于实现包括关系型数据库(MySQL、Oracle等)、HDFS、Hive、ODPS、HBase、FTP等各种异构数据源之间稳定高效的数据同步功能。</p><p><img src="https://raw.gitmirror.com/YUTING0907/PicGo/main/img20250901124943.png" alt="https://raw.gitmirror.com/YUTING0907/PicGo/main/img20250901124943.png"></p><p>DataX本身作为离线数据同步框架，采用Framework + plugin架构构建。将数据源读取和写入抽象成为Reader&#x2F;Writer插件，纳入到整个同步框架中。</p><ul><li>Reader：Reader为数据采集模块，负责采集数据源的数据，将数据发送给Framework。</li><li>Writer： Writer为数据写入模块，负责不断向Framework取数据，并将数据写入到目的端。</li><li>Framework：Framework用于连接reader和writer，作为两者的数据传输通道，并处理缓冲，流控，并发，数据转换等核心技术问题。</li></ul><h3 id="DataX核心架构概览"><a href="#DataX核心架构概览" class="headerlink" title="DataX核心架构概览"></a>DataX核心架构概览</h3><p><img src="https://raw.gitmirror.com/YUTING0907/PicGo/main/img20250901125237.png"></p><h4 id="核心模块介绍："><a href="#核心模块介绍：" class="headerlink" title="核心模块介绍："></a>核心模块介绍：</h4><ol><li>DataX完成单个数据同步的作业，我们称之为Job，<strong>DataX接受到一个Job之后，将启动一个进程来完成整个作业同步过程</strong>。DataX Job模块是单个作业的中枢管理节点，承担了数据清理、子任务切分(将单一作业计算转化为多个子Task)、TaskGroup管理等功能。</li><li>DataXJob启动后，**会根据不同的源端切分策略，将Job切分成多个小的Task(子任务)**，以便于并发执行。Task便是DataX作业的最小单元，每一个Task都会负责一部分数据的同步工作。</li><li>切分多个Task之后，DataX Job会调用Scheduler模块，根据配置的并发数据量，将拆分成的Task重新组合，组装成TaskGroup(任务组)。每一个TaskGroup负责以一定的并发运行完毕分配好的所有Task，默认单个任务组的并发数量为5。</li><li>每一个Task都由TaskGroup负责启动，Task启动后，会固定启动Reader—&gt;Channel—&gt;Writer的线程来完成任务同步工作。</li><li>DataX作业运行起来之后， Job监控并等待多个TaskGroup模块任务完成，等待所有TaskGroup任务完成后Job成功退出。否则，异常退出，进程退出值非0</li></ol><h4 id="DataX运行流程简单举例"><a href="#DataX运行流程简单举例" class="headerlink" title="DataX运行流程简单举例"></a>DataX运行流程简单举例</h4><p>举例来说，用户提交了一个<code>DataX</code>作业，并且配置了<code>20</code>个并发，目的是将一个<code>100</code>张分表的<code>mysql</code>数据同步到<code>doris</code>里面。</p><p>DataX执行的思路为：</p><ul><li>① DataXJob根据表的数量切分成了100个Task。</li><li>② DataX 默认给每个 TaskGroup分配 5 个 Channel，根据20个并发，DataX计算共需要分配20&#x2F;5&#x3D;4个TaskGroup（默认单个任务组的并发数量为5）。</li><li>③ 根据 DataX 的公平分配策略，4个TaskGroup平分切分好100个Task，每一个TaskGroup共计运行100&#x2F;4&#x3D;25个Task(负责以5个并发)。</li></ul><p>由于一个 Channel 对应一个线程执行，因此 DataX 的线程模型可以用如下图表示：</p><p><img src="https://raw.gitmirror.com/YUTING0907/PicGo/main/img20250901132528.png"></p><h3 id="DataX源码解析"><a href="#DataX源码解析" class="headerlink" title="DataX源码解析"></a>DataX源码解析</h3><h4 id="程序入口"><a href="#程序入口" class="headerlink" title="程序入口"></a>程序入口</h4><p>从官网得知，要启动一个简单的数据任务，要经历以下二步：</p><ol><li><p>配置任务json</p></li><li><p>使用DataX自带的Python脚本启动任务</p><p><code>python datax.py job.json</code></p></li></ol><p>在扒了datax.py的源码之后，发现使用python去进行启动的作用是快速构建了DataX的启动命令，尤其是补充了一些有用的jvm参数，实际上最后python拼接出来的命令如下：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">java -server $&#123;jvm&#125; %s -classpath %s  $&#123;params&#125; com.alibaba.datax.core.Engine -mode $&#123;mode&#125; -jobid $&#123;jobid&#125; -job $&#123;job&#125;<br><br></code></pre></td></tr></table></figure><p>我们根据这条命令就会发现入口的主类：<code>com.alibaba.datax.core.Engine</code></p><h4 id="主程序执行流程"><a href="#主程序执行流程" class="headerlink" title="主程序执行流程"></a>主程序执行流程</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs awk">public static void main(String[] args) throws Exception &#123;<br>int exitCode = <span class="hljs-number">0</span>;<br>try &#123;<br>Engine.entry(args);<br>&#125; catch (Throwable e) &#123;<br>exitCode = <span class="hljs-number">1</span>;<br>LOG.error(<span class="hljs-string">&quot;\n\n经DataX智能分析,该任务最可能的错误原因是:\n&quot;</span> + ExceptionTracker.trace(e));<br><br><span class="hljs-keyword">if</span> (e instanceof DataXException) &#123;<br>DataXException tempException = (DataXException) e;<br>ErrorCode errorCode = tempException.getErrorCode();<br><span class="hljs-keyword">if</span> (errorCode instanceof FrameworkErrorCode) &#123;<br>FrameworkErrorCode tempErrorCode = (FrameworkErrorCode) errorCode;<br>exitCode = tempErrorCode.toExitValue();<br>&#125;<br>&#125;<br><br>System.<span class="hljs-keyword">exit</span>(exitCode);<br>&#125;<br>System.<span class="hljs-keyword">exit</span>(exitCode);<br>&#125;<br></code></pre></td></tr></table></figure><p>从上面代码，一切的一切都是从<code>Engine.entry(args)</code>这个方法开始，接下来分析一下这个方法究竟做了哪些工作：</p><p>1.解析命令行参数：</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> entry(<span class="hljs-keyword">final</span> String[] args) <span class="hljs-keyword">throws</span> Throwable &#123;<br><span class="hljs-comment">// 解析命令行参数</span><br><span class="hljs-keyword">Options</span> <span class="hljs-keyword">options</span> = <span class="hljs-keyword">new</span> <span class="hljs-keyword">Options</span>();<br><span class="hljs-keyword">options</span>.addOption(<span class="hljs-string">&quot;job&quot;</span>, <span class="hljs-keyword">true</span>, <span class="hljs-string">&quot;Job config.&quot;</span>);<br><span class="hljs-keyword">options</span>.addOption(<span class="hljs-string">&quot;jobid&quot;</span>, <span class="hljs-keyword">true</span>, <span class="hljs-string">&quot;Job unique id.&quot;</span>);<br><span class="hljs-keyword">options</span>.addOption(<span class="hljs-string">&quot;mode&quot;</span>, <span class="hljs-keyword">true</span>, <span class="hljs-string">&quot;Job runtime mode.&quot;</span>);<br><br>BasicParser parser = <span class="hljs-keyword">new</span> BasicParser();<br>CommandLine cl = parser.parse(<span class="hljs-keyword">options</span>, args);<br><br><span class="hljs-comment">//获取job json路径</span><br>String jobPath = cl.getOptionValue(<span class="hljs-string">&quot;job&quot;</span>);<br><br><span class="hljs-comment">// 如果用户没有明确指定jobid, 则 datax.py 会指定 jobid 默认值为-1</span><br>String jobIdString = cl.getOptionValue(<span class="hljs-string">&quot;jobid&quot;</span>);<br><span class="hljs-comment">// 获取执行方式 阉割版默认standalone</span><br>RUNTIME_MODE = cl.getOptionValue(<span class="hljs-string">&quot;mode&quot;</span>);<br>Configuration configuration = ConfigParser.parse(jobPath);<br><span class="hljs-comment">// 绑定i18n信息</span><br>MessageSource.init(configuration);<br>MessageSource.reloadResourceBundle(Configuration.<span class="hljs-keyword">class</span>);<br></code></pre></td></tr></table></figure><p>‘job’:获取job json路径；</p><p>“jobid”:当前job的id，如果用户未显式指定，那么将会被置为-1；</p><p>“mode”:当前job的运行模式，当前DataX开源版本只支持Standalone模式</p><p>2.解析配置，<code>ConfigParser.parse(jobPath)</code>，往配置中加入系统默认项，用户只提供<code>job</code>部分，补上其余<code>common</code> <code>core</code> <code>entry</code> <code>job</code> <code>plugin</code>配置项</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><code class="hljs xml">&#123;<br>    &quot;common&quot;: &#123;<br>        &quot;column&quot;: &#123;<br>            &quot;dateFormat&quot;: &quot;yyyy-MM-dd&quot;,<br>            &quot;datetimeFormat&quot;: &quot;yyyy-MM-dd HH:mm:ss&quot;,<br>            &quot;encoding&quot;: &quot;utf-8&quot;,<br>            &quot;extraFormats&quot;: [<br>                &quot;yyyyMMdd&quot;<br>            ],<br>            &quot;timeFormat&quot;: &quot;HH:mm:ss&quot;,<br>            &quot;timeZone&quot;: &quot;GMT+8&quot;<br>        &#125;<br>    &#125;,<br>    &quot;core&quot;: &#123;<br>        &quot;container&quot;: &#123;<br>            &quot;job&quot;: &#123;<br>                &quot;id&quot;: -1,<br>                &quot;reportInterval&quot;: 10000<br>            &#125;,<br>            &quot;taskGroup&quot;: &#123;<br>                &quot;channel&quot;: 5<br>            &#125;,<br>            &quot;trace&quot;: &#123;<br>                &quot;enable&quot;: &quot;false&quot;<br>            &#125;<br>        &#125;,<br>        &quot;dataXServer&quot;: &#123;<br>            &quot;address&quot;: &quot;http://localhost:7001/api&quot;,<br>            &quot;reportDataxLog&quot;: false,<br>            &quot;reportPerfLog&quot;: false,<br>            &quot;timeout&quot;: 10000<br>        &#125;,<br>        &quot;statistics&quot;: &#123;<br>            &quot;collector&quot;: &#123;<br>                &quot;plugin&quot;: &#123;<br>                    &quot;maxDirtyNumber&quot;: 10,<br>                    &quot;taskClass&quot;: &quot;com.alibaba.datax.core.statistics.plugin.task.StdoutPluginCollector&quot;<br>                &#125;<br>            &#125;<br>        &#125;,<br>        &quot;transport&quot;: &#123;<br>            &quot;channel&quot;: &#123;<br>                &quot;byteCapacity&quot;: 67108864,<br>                &quot;capacity&quot;: 512,<br>                &quot;class&quot;: &quot;com.alibaba.datax.core.transport.channel.memory.MemoryChannel&quot;,<br>                &quot;flowControlInterval&quot;: 20,<br>                &quot;speed&quot;: &#123;<br>                    &quot;byte&quot;: -1,<br>                    &quot;record&quot;: -1<br>                &#125;<br>            &#125;,<br>            &quot;exchanger&quot;: &#123;<br>                &quot;bufferSize&quot;: 32,<br>                &quot;class&quot;: &quot;com.alibaba.datax.core.plugin.BufferedRecordExchanger&quot;<br>            &#125;<br>        &#125;<br>    &#125;,<br>    &quot;entry&quot;: &#123;<br>        &quot;jvm&quot;: &quot;-Xms1G -Xmx1G&quot;<br>    &#125;,<br>    &quot;job&quot;: &#123;<br>        &quot;content&quot;: [<br>            &#123;<br>                &quot;reader&quot;: &#123;<br>                    &quot;name&quot;: &quot;streamreader&quot;,<br>                    &quot;parameter&quot;: &#123;<br>                        &quot;column&quot;: [<br>                            &#123;<br>                                &quot;type&quot;: &quot;long&quot;,<br>                                &quot;value&quot;: &quot;10&quot;<br>                            &#125;,<br>                            &#123;<br>                                &quot;type&quot;: &quot;string&quot;,<br>                                &quot;value&quot;: &quot;hello，你好，世界-DataX&quot;<br>                            &#125;<br>                        ],<br>                        &quot;sliceRecordCount&quot;: 10<br>                    &#125;<br>                &#125;,<br>                &quot;writer&quot;: &#123;<br>                    &quot;name&quot;: &quot;streamwriter&quot;,<br>                    &quot;parameter&quot;: &#123;<br>                        &quot;encoding&quot;: &quot;UTF-8&quot;,<br>                        &quot;print&quot;: true<br>                    &#125;<br>                &#125;<br>            &#125;<br>        ],<br>        &quot;setting&quot;: &#123;<br>            &quot;speed&quot;: &#123;<br>                &quot;channel&quot;: 5<br>            &#125;<br>        &#125;<br>    &#125;,<br>    &quot;plugin&quot;: &#123;<br>        &quot;reader&quot;: &#123;<br>            &quot;streamreader&quot;: &#123;<br>                &quot;class&quot;: &quot;com.alibaba.datax.plugin.reader.streamreader.StreamReader&quot;,<br>                &quot;description&quot;: &#123;<br>                    &quot;mechanism&quot;: &quot;use datax framework to transport data from stream.&quot;,<br>                    &quot;useScene&quot;: &quot;only for developer test.&quot;,<br>                    &quot;warn&quot;: &quot;Never use it in your real job.&quot;<br>                &#125;,<br>                &quot;developer&quot;: &quot;alibaba&quot;,<br>                &quot;name&quot;: &quot;streamreader&quot;,<br>                &quot;path&quot;: &quot;/home/tyrantlucifer/IdeaProjects/DataX/target/datax/datax/plugin/reader/streamreader&quot;<br>            &#125;<br>        &#125;,<br>        &quot;writer&quot;: &#123;<br>            &quot;streamwriter&quot;: &#123;<br>                &quot;class&quot;: &quot;com.alibaba.datax.plugin.writer.streamwriter.StreamWriter&quot;,<br>                &quot;description&quot;: &#123;<br>                    &quot;mechanism&quot;: &quot;use datax framework to transport data to stream.&quot;,<br>                    &quot;useScene&quot;: &quot;only for developer test.&quot;,<br>                    &quot;warn&quot;: &quot;Never use it in your real job.&quot;<br>                &#125;,<br>                &quot;developer&quot;: &quot;alibaba&quot;,<br>                &quot;name&quot;: &quot;streamwriter&quot;,<br>                &quot;path&quot;: &quot;/home/tyrantlucifer/IdeaProjects/DataX/target/datax/datax/plugin/writer/streamwriter&quot;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>3.打印当前jvm虚拟机信息</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs 1c"><span class="hljs-comment">//打印vmInfo</span><br>VMInfo vmInfo <span class="hljs-punctuation">=</span> VMInfo.getVmInfo<span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">;</span><br>if <span class="hljs-punctuation">(</span>vmInfo !<span class="hljs-punctuation">=</span> <span class="hljs-literal">null</span><span class="hljs-punctuation">)</span> &#123; <br>  <span class="hljs-built_in">LOG</span>.info<span class="hljs-punctuation">(</span>vmInfo.toString<span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">;</span><br>&#125;<br><br></code></pre></td></tr></table></figure><p>4.打印当前配置</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">LOG</span>.<span class="hljs-keyword">info</span>(&quot;\n&quot; + Engine.filterJobConfiguration(<span class="hljs-keyword">configuration</span>) + &quot;\n&quot;);<br><br><span class="hljs-keyword">LOG</span>.<span class="hljs-keyword">debug</span>(<span class="hljs-keyword">configuration</span>.toJSON());<br><br></code></pre></td></tr></table></figure><p>5.配置校验</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ConfigurationValidate</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">doValidate</span>(<span class="hljs-params"><span class="hljs-title class_">Configuration</span> allConfig</span>) &#123;<br>        <span class="hljs-title class_">Validate</span>.<span class="hljs-title function_">isTrue</span>(allConfig!=<span class="hljs-literal">null</span>, <span class="hljs-string">&quot;&quot;</span>);<br><br>        <span class="hljs-title function_">coreValidate</span>(allConfig);<br><br>        <span class="hljs-title function_">pluginValidate</span>(allConfig);<br><br>        <span class="hljs-title function_">jobValidate</span>(allConfig);<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">coreValidate</span>(<span class="hljs-params"><span class="hljs-title class_">Configuration</span> allconfig</span>) &#123;<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">pluginValidate</span>(<span class="hljs-params"><span class="hljs-title class_">Configuration</span> allConfig</span>) &#123;<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">jobValidate</span>(<span class="hljs-params"><span class="hljs-title class_">Configuration</span> allConfig</span>) &#123;<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>其实毫无校验逻辑，比较敷衍。</p><p>6.启动任务</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs abnf">Engine engine <span class="hljs-operator">=</span> new Engine()<span class="hljs-comment">;</span><br>engine.start(configuration)<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><hr><h4 id="任务执行流程"><a href="#任务执行流程" class="headerlink" title="任务执行流程"></a>任务执行流程</h4><p>此时程序进入到了Engine.start(configuration)的执行流程，在这一步中经历以下环节：</p><p>1.绑定Column转换格式，这一步会在配置中指定以下信息：</p><p>字符串转换格式</p><p>日期转换格式</p><p>字节编码格式</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-built_in">public</span> <span class="hljs-type">void</span> <span class="hljs-keyword">start</span>(<span class="hljs-keyword">Configuration</span> allConf) &#123;<br><br>// 绑定<span class="hljs-keyword">column</span>转换信息<br>ColumnCast.bind(allConf);<br></code></pre></td></tr></table></figure><p>2.初始化PluginLoader</p><p>PluginLoader可以理解是所有数据同步插件的统一加载器，在这一步中实际上是将当前的任务配置赋值给了PluginLoader一份：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs scss"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 初始化PluginLoader，可以获取各种插件配置</span><br><span class="hljs-comment"> */</span><br>LoadUtil<span class="hljs-selector-class">.bind</span>(allConf);<br></code></pre></td></tr></table></figure><p>3.实例化任务容器</p><p>判断配置中<code>core.container.model</code>是不是taskGroup。</p><p>如果是taskGroup实例化<code>TaskGroupContainer</code>，如果不是，实例化JobContainer。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">boolean</span> <span class="hljs-variable">isJob</span> <span class="hljs-operator">=</span> !(<span class="hljs-string">&quot;taskGroup&quot;</span>.equalsIgnoreCase(allConf<br>.getString(CoreConstant.DATAX_CORE_CONTAINER_MODEL)));<br><span class="hljs-comment">//JobContainer会在schedule后再行进行设置和调整值</span><br><span class="hljs-type">int</span> <span class="hljs-variable">channelNumber</span> <span class="hljs-operator">=</span><span class="hljs-number">0</span>;<br>AbstractContainer container;<br><span class="hljs-type">long</span> instanceId;<br><span class="hljs-type">int</span> <span class="hljs-variable">taskGroupId</span> <span class="hljs-operator">=</span> -<span class="hljs-number">1</span>;<br><span class="hljs-keyword">if</span> (isJob) &#123;<br>allConf.set(CoreConstant.DATAX_CORE_CONTAINER_JOB_MODE, RUNTIME_MODE);<br>container = <span class="hljs-keyword">new</span> <span class="hljs-title class_">JobContainer</span>(allConf);<br>instanceId = allConf.getLong(<br>CoreConstant.DATAX_CORE_CONTAINER_JOB_ID, <span class="hljs-number">0</span>);<br><br>&#125; <span class="hljs-keyword">else</span> &#123;<br>container = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TaskGroupContainer</span>(allConf);<br>instanceId = allConf.getLong(<br>CoreConstant.DATAX_CORE_CONTAINER_JOB_ID);<br>taskGroupId = allConf.getInt(<br>CoreConstant.DATAX_CORE_CONTAINER_TASKGROUP_ID);<br>channelNumber = allConf.getInt(<br>CoreConstant.DATAX_CORE_CONTAINER_TASKGROUP_CHANNEL);<br>&#125;<br></code></pre></td></tr></table></figure><p>4.初始化性能追踪器，使用单例模式，一个jvm进程中只存在一个PerfTrace</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//初始化PerfTrace</span><br><span class="hljs-type">PerfTrace</span> <span class="hljs-variable">perfTrace</span> <span class="hljs-operator">=</span> PerfTrace.getInstance(isJob, instanceId, taskGroupId, traceEnable);<br>perfTrace.setJobInfo(jobInfoConfig,perfReportEnable,channelNumber);<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 单实例</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> isJob</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> jobId</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> taskGroupId</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> PerfTrace <span class="hljs-title function_">getInstance</span><span class="hljs-params">(<span class="hljs-type">boolean</span> isJob, <span class="hljs-type">long</span> jobId, <span class="hljs-type">int</span> taskGroupId, <span class="hljs-type">boolean</span> enable)</span> &#123;<br><br><span class="hljs-keyword">if</span> (instance == <span class="hljs-literal">null</span>) &#123;<br><span class="hljs-keyword">synchronized</span> (lock) &#123;<br><span class="hljs-keyword">if</span> (instance == <span class="hljs-literal">null</span>) &#123;<br>instance = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PerfTrace</span>(isJob, jobId, taskGroupId, enable);<br>&#125;<br>&#125;<br>&#125;<br><span class="hljs-keyword">return</span> instance;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>5.启动第3步实例化好的任务容器</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs scss"><span class="hljs-attribute">container</span><span class="hljs-selector-class">.start</span>();<br></code></pre></td></tr></table></figure><hr><h4 id="任务容器执行流程"><a href="#任务容器执行流程" class="headerlink" title="任务容器执行流程"></a>任务容器执行流程</h4><p>任务容器这里是一个抽象类，实现类有JobContainer和TaskGroupContainer。</p><p><img src="https://raw.gitmirror.com/YUTING0907/PicGo/main/img20250901172250.png"></p><p>任务容器被启动后，会执行任务生命周期的每一个阶段</p><ol><li><p>preHandle：用户可配置任务处理前的前置处理逻辑，这个前置处理逻辑处于writer或者reader中</p></li><li><p>init：任务初始化阶段，初始化reader和writer（使用自定义的classLoader进行类加载），调用reader和writer的init()方法</p></li><li><p>prepare：任务准备阶段，实际上调用reader和writer的prepare()方法</p></li><li><p>split：任务分片，调整channel数，其实也就是任务的并发数</p><ul><li>调整channel数量</li></ul><p>​     判断是否设置了字节限制<code>job.setting.speed.byte</code>，如果是，根据字节限制配置计算channel数量</p><p>​     判断是否设置了条数限制<code>job.setting.speed.record</code>，如果是，根据条数限制配置计算channel数量</p><p>​     取以上1 2步的最小值。</p><p>​     如果1 2步都没有设置，取配置中的<code>job.setting.speed.channel</code>来确定channel数量</p><ul><li>根据channel数量切分configuration，包括readerConfig和writerConfig，切分逻辑在每个插件中具体实现的，在切分好配置之后会将配置覆盖进 <code>job.content</code>中</li></ul></li><li><p>schedule：任务调度执行阶段，根据第四步中确定的并发数进行任务调度工作</p><ul><li><p>根据上面的split中算出的channel数，设置taskGroup的数量，默认一个taskGroup中运行5个channel，切分configuration，为每个taskGroup创建自己的configuration</p></li><li><p>开始对taskGroupConfigurations进行调度，底层使用线程池，通过taskGroup的数量来确定线程池的线程个数</p></li><li><p>启动线程，TaskGroupContainerRunner，每一个TaskGroupContainerRunner中包含了一个TaskGroupContainer，实际上执行任务核心逻辑的容器是TaskGroupContainer，TaskGroupContainer会为每个channel创建TaskExecutor，TaskExecutor是执行子任务的最小单位</p></li><li><p>while循环监控taskGroup运行状态，等待每个子任务完成和数据情况的上报，并收集</p></li></ul></li><li><p>post：任务执行结束后阶段</p></li><li><p>postHandler：任务结束后后置处理逻辑，这个后置处理逻辑处于writer或者reader中</p></li><li><p>invokeHooks：DataX预留的spi接口，用户可自定义spi插件来丰富整个同步任务的生命周期</p></li></ol><p>总结：</p><p><img src="https://raw.gitmirror.com/YUTING0907/PicGo/main/img20250901202050.png"></p><p>Reference:</p><p><a href="https://juejin.cn/post/6869755803570536461?from=search-suggest">https://juejin.cn/post/6869755803570536461?from=search-suggest</a></p><p><a href="https://blog.csdn.net/qq_20042935/article/details/122584478">https://blog.csdn.net/qq_20042935/article/details/122584478</a></p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    
    <tags>
      
      <tag>大数据</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>基于OCR的身份证信息提取</title>
    <link href="/posts/2025/05/ce9e260e.html"/>
    <url>/posts/2025/05/ce9e260e.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><p>背景</p><p>用户上传的身份证照片各式各样，图像质量参差不齐，部分还存在水印，并且混杂身份证的正反面，这就导致在OCR识别过程中难度比较大。</p><p>针对于此，进行图像预处理的各种尝试，大方向是将图像中的身份证框出来进行裁剪，让输入给OCR进行识别的图像尽可能质量好。</p><p>尝试过如下方法：</p><p>1.利用opencv进行框选</p><p> 该方案由于图像大小、分辨率、背景区别差异大，效果不好</p><p>2.利用rembg算法进行抠图</p><p>由于rembg算法是扣人像的，在身份证照片特别突出的情况下，容易被扣掉身份信息</p><p>3.利用YOLO目标检测算法进行检测，识别率高</p><p>步骤为：</p><p>0.按照如下文件结构构建</p><p>our_project</p><p>—&#x2F;images</p><p>——&#x2F;train</p><p>——&#x2F;val</p><p>—&#x2F;labels</p><p>——&#x2F;train</p><p>——&#x2F;val</p><p>—detect_data.yaml</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment">#训练图片目录以及类别</span><br><span class="hljs-attr">names:</span> <br>  <span class="hljs-attr">0:</span> <span class="hljs-string">id_card</span><br><span class="hljs-attr">path:</span> <span class="hljs-string">D:\0000_Work\python_project\ocr\YOLO_segement</span><br><span class="hljs-attr">train:</span> <span class="hljs-string">images/train</span><br><span class="hljs-attr">val:</span> <span class="hljs-string">images/val</span><br><br></code></pre></td></tr></table></figure><p>1.安装相应的python库</p><p>2.训练模型指令</p><p><a href="https://docs.ultralytics.com/zh/tasks/detect/#dataset-format">https://docs.ultralytics.com/zh/tasks/detect/#dataset-format</a></p><p><code>yolo detect train data=data-detect.yaml model=yolo11n.pt epochs=100 imgsz=640</code></p><p><img src="https://raw.gitmirror.com/YUTING0907/PicGo/main/img20250522181742.png"></p><p>3.模型评估并导出onnx模型,onnx模型为跨平台的模型参数文件，可直接跨平台加载。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">from</span> <span class="hljs-string">ultralytics</span> <span class="hljs-string">import</span> <span class="hljs-string">YOLO</span><br><span class="hljs-string">model</span> <span class="hljs-string">=</span> <span class="hljs-string">YOLO(&#x27;runs/detect/train/weights/best.pt&#x27;)</span><br><span class="hljs-string">model.val()</span><br><span class="hljs-comment">#导出onnx模型</span><br><span class="hljs-string">model.export(format=&#x27;onnx&#x27;)</span><br></code></pre></td></tr></table></figure><p>4.OCR识别</p><p>在OCR识别之前尽量将身份证照片正向摆正进行OCR识别。</p><p>其中最终OCR识别之前的图像预处理步骤为：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">preprocess_id_card</span>(<span class="hljs-params">pt_path ,image_path ,save_dir=<span class="hljs-string">&quot;YOLO_id_cards&quot;</span>,</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;完整的身份证图像预处理流程&quot;&quot;&quot;</span><br>    image = cv2.imread(image_path)<br>    <span class="hljs-keyword">if</span> image <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:<br>        logger.info(<span class="hljs-string">f&quot;无法读取图像：<span class="hljs-subst">&#123;image_path&#125;</span>&quot;</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span><br><br>    <span class="hljs-comment"># Step 1: 使用YOLO检测并裁剪去背景</span><br>    <span class="hljs-comment"># YOLO身份证识别&amp;裁剪</span><br>    no_bg = cut(pt_path, image_path)<br>    <span class="hljs-keyword">if</span> no_bg <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span><br><br>    <span class="hljs-comment"># Step 2: 检测四个角点并透视矫正</span><br>    corners = detect_id_card_corners(no_bg)<br>    <span class="hljs-keyword">if</span> corners <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:<br>        logger.info(<span class="hljs-string">f&quot;[<span class="hljs-subst">&#123;os.path.basename(image_path)&#125;</span>] ⚠️ 无法检测身份证角点&quot;</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span><br>    corrected = perspective_transform(no_bg, corners)<br><br>    <span class="hljs-comment"># Step 3: 如果为竖图则旋转90度（人脸朝上）</span><br>    corrected = rotate_if_vertical(corrected)<br><br>    <span class="hljs-comment"># Step 4: OCR判断是否180度倒置</span><br>    <span class="hljs-comment"># 对透视矫正后的图像先OCR识别，判断是否倒置180度</span><br>    ocr_results = ocr_(corrected)  <span class="hljs-comment"># 你需要支持传入图像（cv2 image）或者保存临时图像后传路径</span><br>    <span class="hljs-keyword">if</span> ocr_results:<br>        img_h, img_w = corrected.shape[:<span class="hljs-number">2</span>]<br>        <span class="hljs-keyword">if</span> is_id_card_upside_down(ocr_results):<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;检测到身份证倒置180度，自动旋转180度&quot;</span>)<br>            logger.info(<span class="hljs-string">&quot;检测到身份证倒置180度，自动旋转180度&quot;</span>)<br>            corrected = cv2.rotate(corrected, cv2.ROTATE_180)<br>            <span class="hljs-comment">#show(image_path, corrected)</span><br>    <span class="hljs-keyword">else</span>:<br>        logger.info(<span class="hljs-string">&quot;OCR未检测到关键字段，默认身份证正向&quot;</span>)<br><br>    <span class="hljs-comment"># show(&quot;透视矫正后&quot;, corrected)</span><br>    <span class="hljs-comment"># ✅ 使用 PaddleOCR 自动旋转</span><br>    <span class="hljs-comment">#aligned = align_face_after_perspective(corrected)</span><br>    <span class="hljs-comment"># 根据长宽比判断是否旋转90度（人脸朝上）</span><br>    <span class="hljs-comment">#corrected = auto_rotate_image_with_paddle(corrected)</span><br>    <span class="hljs-comment">#aligned = correct_idcard_orientation(corrected)</span><br>    corrected = enhance_for_address_recognition(corrected)<br>    <span class="hljs-comment"># 保存图像</span><br>    <span class="hljs-comment"># Step 5: 保存矫正后的图像</span><br>    os.makedirs(save_dir, exist_ok=<span class="hljs-literal">True</span>)<br>    base_name = os.path.basename(image_path)<br>    name_no_ext, ext = os.path.splitext(base_name)<br>    save_path = os.path.join(save_dir, <span class="hljs-string">f&quot;<span class="hljs-subst">&#123;name_no_ext&#125;</span>_corrected<span class="hljs-subst">&#123;ext&#125;</span>&quot;</span>)<br>    cv2.imwrite(save_path, corrected)<br>    logger.info(<span class="hljs-string">f&quot;✅ 图像保存到: <span class="hljs-subst">&#123;save_path&#125;</span>&quot;</span>)<br><br>    <span class="hljs-keyword">return</span> save_path<br></code></pre></td></tr></table></figure><p>OCR识别代码：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">ocr_path</span>(<span class="hljs-params">image_path</span>):<br>    ocr = PaddleOCR(use_angle_cls=<span class="hljs-literal">True</span>, lang=<span class="hljs-string">&#x27;ch&#x27;</span>,<br>                   <span class="hljs-comment"># rec_model_dir=&#x27;ch_PP-OCRv5/PP-OCRv5_server_rec_infer&#x27;,</span><br>                    ocr_version=<span class="hljs-string">&#x27;PP-OCRv4&#x27;</span><br>                    )<br>    img = cv2.imread(image_path)<br>    <span class="hljs-keyword">if</span> img <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span><br>    result = ocr.ocr(img, cls=<span class="hljs-literal">True</span>)<br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> result <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> result[<span class="hljs-number">0</span>]:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span><br>    logger.info(<span class="hljs-string">f&quot;ocr识别结果：<span class="hljs-subst">&#123;result&#125;</span>&quot;</span>)<br>    <span class="hljs-built_in">print</span>(result)<br><br>    <span class="hljs-keyword">return</span> result<br></code></pre></td></tr></table></figure><p>5.OCR识别后处理：地址信息清洗</p><p>整体代码流程为：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs python"><br><span class="hljs-comment"># 示例调用方式：</span><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    <span class="hljs-comment"># 加载YOLO模型</span><br>    pt_path = <span class="hljs-string">&#x27;detect_best.onnx&#x27;</span><br>    <span class="hljs-comment"># 加载图片进行推理(判断准确率用)</span><br>    image_dir = <span class="hljs-string">&#x27;D:/0000_Work/python_project/ocr/utils/download_image/data/images_all&#x27;</span><br>    <span class="hljs-comment">#image_dir = &#x27;D:/0000_Work/python_project/ocr/idCardHandler/image1&#x27;</span><br>    <span class="hljs-comment">#point(image_dir, output_dir, pt_path)</span><br>    <span class="hljs-comment">#batch_cut(pt_path=&quot;detect_best.onnx&quot;,input_dir=&quot;input_images&quot;,output_dir=&quot;cropped_results&quot;)</span><br>    <span class="hljs-comment"># image_dir = &quot;D:/0000_Work/ai/identification_img/&quot;</span><br>    files = get_file_names(image_dir)<br><br>    results = []  <span class="hljs-comment"># 保存每张图片的文件名和地址信息</span><br>    <span class="hljs-keyword">for</span> file <span class="hljs-keyword">in</span> files:<br>        image_path = os.path.join(image_dir, file)<br>        logger.info(<span class="hljs-string">f&quot;开始处理：<span class="hljs-subst">&#123;image_path&#125;</span>&quot;</span>)<br><br>        <span class="hljs-comment"># Step 1: 身份证图像预处理</span><br>        save_path = preprocess_id_card(pt_path, image_path)<br><br>        <span class="hljs-keyword">if</span> save_path <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:<br>            logger.error(<span class="hljs-string">f&quot;❌ 身份证预处理失败，跳过 OCR：<span class="hljs-subst">&#123;image_path&#125;</span>&quot;</span>)<br>            <span class="hljs-keyword">continue</span><br><br>        <span class="hljs-comment"># save_path = crop_address(save_path)</span><br>        ocr_results = ocr_path(save_path)<br>        <span class="hljs-comment"># Step 2: OCR识别</span><br>        <span class="hljs-keyword">try</span>:<br>            ocr_results = ocr_path(save_path)<br>        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>            logger.exception(<span class="hljs-string">f&quot;OCR处理异常：<span class="hljs-subst">&#123;e&#125;</span>&quot;</span>)<br>            ocr_results = []<br><br>        raw_addr = <span class="hljs-string">&quot;&quot;</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> ocr_results:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;---------------ocr_results--------------&quot;</span>)<br>            <span class="hljs-built_in">print</span>(ocr_results)<br>            logger.warning(<span class="hljs-string">f&quot;[<span class="hljs-subst">&#123;os.path.basename(save_path)&#125;</span>] ⚠️ OCR识别结果为空&quot;</span>)<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;[<span class="hljs-subst">&#123;os.path.basename(save_path)&#125;</span>] ⚠️ OCR识别结果为空&quot;</span>)<br>            raw_addr = <span class="hljs-string">&quot;&quot;</span><br>        <span class="hljs-keyword">else</span>:<br>            raw_addr = extract_full_address(ocr_results)<br>            logger.info(<span class="hljs-string">f&quot;原始地址文本: <span class="hljs-subst">&#123;raw_addr&#125;</span>&quot;</span>)<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;原始地址文本:&quot;</span>, raw_addr)<br><br>        <span class="hljs-comment"># Step 3: 地址清洗和结构化</span><br>        parsed = clean_and_parse_address(raw_addr)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;结构化解析结果:&quot;</span>, parsed)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\n&quot;</span>)<br><br>        results.append(&#123;<br>            <span class="hljs-string">&quot;文件名&quot;</span>: file,<br>            <span class="hljs-string">&quot;地址&quot;</span>: parsed.get(<span class="hljs-string">&#x27;full_address&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>),<br>            <span class="hljs-string">&quot;ocr_results&quot;</span>: ocr_results<br>        &#125;)<br><br>    <span class="hljs-comment"># Step 4: 保存结果为 Excel</span><br>    <span class="hljs-comment"># 保存为 Excel</span><br>    df = pd.DataFrame(results)<br>    output_excel_path = <span class="hljs-string">&quot;YOLO_身份证地址提取结果_V5.xlsx&quot;</span><br>    df.to_excel(output_excel_path, index=<span class="hljs-literal">False</span>)<br>    logger.info(<span class="hljs-string">f&quot;🎉 地址信息已保存至 Excel：<span class="hljs-subst">&#123;output_excel_path&#125;</span>&quot;</span>)<br></code></pre></td></tr></table></figure></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    
    <tags>
      
      <tag>CV</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>华东师范大学专业硕士毕业论文latex修改记录</title>
    <link href="/posts/2025/02/3f2fca97.html"/>
    <url>/posts/2025/02/3f2fca97.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><h4 id="硕士毕业论文latex修改记录"><a href="#硕士毕业论文latex修改记录" class="headerlink" title="硕士毕业论文latex修改记录"></a>硕士毕业论文latex修改记录</h4><p>overleaf官网下载的ECNU学硕&#x2F;博论文模版运用到专业硕士上还是有点区别，需要修改模版的如下地方。</p><p>自用。不对内容正确性负责。</p><h3 id="封面"><a href="#封面" class="headerlink" title="封面"></a>封面</h3><p><code>1.preface/inner-cover.tex</code></p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-comment">% ~ Line 4  xxxx届硕士专业学位研究生学位论文</span><br><span class="hljs-comment">% 由</span><br><span class="hljs-keyword">\noindent</span>&#123;&#123;<span class="hljs-keyword">\zihao</span>&#123;4&#125; &#123;<span class="hljs-keyword">\large</span> <span class="hljs-keyword">\year</span>&#125; 届研究生&#123;<span class="hljs-keyword">\degreeCN</span>&#125;学位论文&#125;&#125;<span class="hljs-keyword">\\</span> <br><span class="hljs-comment">% 改为：</span><br><span class="hljs-keyword">\noindent</span>&#123;&#123;<span class="hljs-keyword">\zihao</span>&#123;4&#125; &#123;<span class="hljs-keyword">\large</span> <span class="hljs-keyword">\year</span>&#125; 届&#123;<span class="hljs-keyword">\degreeCN</span>&#125;学位研究生学位论文&#125;&#125;<span class="hljs-keyword">\\</span> <br></code></pre></td></tr></table></figure><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-comment">% ~ Line 31 Master’s Degree Thesis (Professional)</span><br><span class="hljs-comment">% 由</span><br>&#123;<span class="hljs-keyword">\textbf</span>&#123;&#123;<span class="hljs-keyword">\xiaosi</span> <span class="hljs-keyword">\MakeUppercase</span>&#123;<span class="hljs-keyword">\degreeENs</span>&#125; DISSERTATION&#125;&#125;&#125;<span class="hljs-keyword">\\</span><br><span class="hljs-comment">% 改为：</span><br>&#123;<span class="hljs-keyword">\textbf</span>&#123;<span class="hljs-keyword">\xiaosi</span> &#123;<span class="hljs-keyword">\degreeENs</span>&#125; Degree Thesis (Professional)&#125;&#125;<span class="hljs-keyword">\\</span><span class="hljs-keyword">\</span><br></code></pre></td></tr></table></figure><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-comment">% ~ Line 38 论文题目</span><br><span class="hljs-comment">% 由</span><br>&#123;<span class="hljs-keyword">\cyihao</span> <span class="hljs-keyword">\bf</span> 论文题目：<span class="hljs-keyword">\underline</span>&#123;论文题目&#125; <span class="hljs-keyword">\par</span> &#125;<br><span class="hljs-comment">% 改为：</span><br>&#123;<span class="hljs-keyword">\yihao</span> <span class="hljs-keyword">\bf</span> 论文题目：<span class="hljs-keyword">\uline</span>&#123;论文题目<span class="hljs-keyword">\\</span>题目&#125;&#125; <span class="hljs-comment">% \\ 用于换行</span><br><span class="hljs-comment">% 例如&#123;\cyihao \bf 论文题目：\uline&#123;基于深度学习的\\多任务与个性化图像美学评估方法研究&#125;&#125;</span><br></code></pre></td></tr></table></figure><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-comment">% ~ Line 48 </span><br><span class="hljs-comment">% 由</span><br>    <span class="hljs-keyword">\begin</span>&#123;tabular&#125;&#123;l&#125;<br>        <span class="hljs-keyword">\makebox</span>[<span class="hljs-keyword">\coverlength</span>][s]&#123;<span class="hljs-keyword">\sihao</span> <span class="hljs-keyword">\bf</span> 院系:&#125;~~<span class="hljs-keyword">\\</span><br>        <span class="hljs-keyword">\makebox</span>[<span class="hljs-keyword">\coverlength</span>][s]&#123;<span class="hljs-keyword">\sihao</span> <span class="hljs-keyword">\bf</span> 专业类别:&#125;<span class="hljs-keyword">\\</span> <br>        <span class="hljs-keyword">\makebox</span>[<span class="hljs-keyword">\coverlength</span>][s]&#123;<span class="hljs-keyword">\sihao</span> <span class="hljs-keyword">\bf</span> 研究方向:&#125;<span class="hljs-keyword">\\</span><br>        <span class="hljs-keyword">\makebox</span>[<span class="hljs-keyword">\coverlength</span>][s]&#123;<span class="hljs-keyword">\sihao</span> <span class="hljs-keyword">\bf</span> 指导教师:&#125;<span class="hljs-keyword">\\</span> <br>        <span class="hljs-keyword">\makebox</span>[<span class="hljs-keyword">\coverlength</span>][s]&#123;<span class="hljs-keyword">\sihao</span> <span class="hljs-keyword">\bf</span> 学位申请人:&#125;<br>    <span class="hljs-keyword">\end</span>&#123;tabular&#125;<br><span class="hljs-comment">% 改为：</span><br>    <span class="hljs-keyword">\begin</span>&#123;tabular&#125;&#123;l&#125;<br>        <span class="hljs-keyword">\makebox</span>[<span class="hljs-keyword">\coverlength</span>][s]&#123;<span class="hljs-keyword">\sihao</span> <span class="hljs-keyword">\bf</span> 院~~~~~~~~~~~~~~~~~~~~~~~~系:&#125;~~<span class="hljs-keyword">\\</span><br>        <span class="hljs-keyword">\makebox</span>[<span class="hljs-keyword">\coverlength</span>][s]&#123;<span class="hljs-keyword">\sihao</span>  <span class="hljs-keyword">\bf</span> 专业学位类别:&#125;<span class="hljs-keyword">\\</span> <br>        <span class="hljs-keyword">\makebox</span>[<span class="hljs-keyword">\coverlength</span>][s]&#123;<span class="hljs-keyword">\sihao</span>  <span class="hljs-keyword">\bf</span> 专业学位领域:&#125;<span class="hljs-keyword">\\</span><br>        <span class="hljs-keyword">\makebox</span>[<span class="hljs-keyword">\coverlength</span>][s]&#123;<span class="hljs-keyword">\sihao</span>  <span class="hljs-keyword">\bf</span> 指导教师:&#125;<span class="hljs-keyword">\\</span> <br>        <span class="hljs-keyword">\makebox</span>[<span class="hljs-keyword">\coverlength</span>][s]&#123;<span class="hljs-keyword">\sihao</span>  <span class="hljs-keyword">\bf</span> 学位申请人:&#125;<span class="hljs-keyword">\\</span><br>    <span class="hljs-keyword">\end</span>&#123;tabular&#125;<br></code></pre></td></tr></table></figure><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-comment">% ~ Line 65 时间加粗</span><br><span class="hljs-comment">% 由</span><br><span class="hljs-keyword">\begin</span>&#123;center&#125;<br>    &#123;<span class="hljs-keyword">\sihao</span> &#123;<span class="hljs-keyword">\year</span>&#125;年3月20日&#125;<br><span class="hljs-keyword">\end</span>&#123;center&#125;<br><span class="hljs-comment">% 改为：</span><br><span class="hljs-keyword">\begin</span>&#123;center&#125;<br>    &#123;<span class="hljs-keyword">\sihao</span> <span class="hljs-keyword">\bf</span> &#123;<span class="hljs-keyword">\year</span>&#125;年3月20日&#125;<br><span class="hljs-keyword">\end</span>&#123;center&#125;<br></code></pre></td></tr></table></figure><p><code>2.preface/inner-cover-en.tex</code></p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-comment">% ~ Line 5</span><br><span class="hljs-comment">% 由</span><br><span class="hljs-keyword">\noindent</span>&#123;<span class="hljs-keyword">\large</span> Dissertation for &#123;<span class="hljs-keyword">\degreeENs</span>&#125; Degree in &#123;<span class="hljs-keyword">\year</span>&#125;&#125;<span class="hljs-keyword">\\</span><br><span class="hljs-comment">% 改为：</span><br><span class="hljs-keyword">\noindent</span>&#123;Thesis for &#123;<span class="hljs-keyword">\degreeENs</span>&#125; Degree (Professional) in &#123;<span class="hljs-keyword">\year</span>&#125;&#125;<br></code></pre></td></tr></table></figure><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-comment">% ~ Line 11 </span><br><span class="hljs-comment">% 由</span><br><span class="hljs-keyword">\begin</span>&#123;center&#125;<br>    &#123;<span class="hljs-keyword">\Huge</span> <span class="hljs-built_in">$</span><span class="hljs-keyword">\mathbb</span>&#123;EAST&#125;<span class="hljs-keyword">\,</span><span class="hljs-keyword">\mathbb</span>&#123;CHINA&#125;<span class="hljs-keyword">\,</span><span class="hljs-keyword">\mathbb</span>&#123;NORMAL&#125;<span class="hljs-keyword">\,</span><br>            <span class="hljs-keyword">\mathbb</span>&#123;UNIVERSITY&#125;<span class="hljs-built_in">$</span>&#125;<br><span class="hljs-keyword">\end</span>&#123;center&#125;<br><span class="hljs-comment">% 改为：</span><br><span class="hljs-keyword">\begin</span>&#123;center&#125;<br>&#123;<span class="hljs-keyword">\bfseries</span> East China Normal University&#125;<br><span class="hljs-keyword">\end</span>&#123;center&#125;<br></code></pre></td></tr></table></figure><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-comment">% ~ Line 18 修改英文论文标题字号</span><br><span class="hljs-comment">% 由</span><br><span class="hljs-keyword">\begin</span>&#123;center&#125;<br>    <span class="hljs-keyword">\bfseries</span>&#123;<span class="hljs-keyword">\scshape</span>&#123;<span class="hljs-keyword">\huge</span> &#123;theis title&#125;&#125;&#125; <span class="hljs-keyword">\\</span><br><span class="hljs-keyword">\end</span>&#123;center&#125;<br><span class="hljs-comment">% 改为：</span><br><span class="hljs-keyword">\begin</span>&#123;center&#125;<br>&#123;<span class="hljs-keyword">\setmainfont</span>&#123;Times New Roman&#125;<span class="hljs-keyword">\fontsize</span>&#123;16&#125;&#123;19.2&#125;<span class="hljs-keyword">\selectfont</span><span class="hljs-keyword">\bfseries</span> <br>    Title：<span class="hljs-keyword">\uline</span>&#123;论文题目&#125;&#125;<br><span class="hljs-keyword">\end</span>&#123;center&#125;<br></code></pre></td></tr></table></figure><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-comment">% ~ Line 26 </span><br><span class="hljs-keyword">\begin</span>&#123;tabular&#125;&#123;r&#125;<br>    Department:         <span class="hljs-keyword">\\</span><br>    <span class="hljs-comment">% \\</span><br>    Major:              <span class="hljs-keyword">\\</span><br>    Research Direction: <span class="hljs-keyword">\\</span><br>    Supervisor:         <span class="hljs-keyword">\\</span><br>    Candidate:<br><span class="hljs-keyword">\end</span>&#123;tabular&#125;<br><span class="hljs-comment">% 改为：</span><br><span class="hljs-keyword">\begin</span>&#123;tabular&#125;&#123;r&#125;<br>    Department:         <span class="hljs-keyword">\\</span><br>    <span class="hljs-comment">% \\</span><br>    Category:              <span class="hljs-keyword">\\</span><br>    Field: <span class="hljs-keyword">\\</span><br>    Supervisor:         <span class="hljs-keyword">\\</span><br>    Candidate:<br><span class="hljs-keyword">\end</span>&#123;tabular&#125;<br></code></pre></td></tr></table></figure><h3 id="页眉"><a href="#页眉" class="headerlink" title="页眉"></a>页眉</h3><p><code>format/format.tex</code></p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-comment">% ~ Line135 页眉在居中显示 华东师范大学硕士专业学位论文</span><br>由<br><span class="hljs-keyword">\fancyhead</span>[RO,LE]&#123;<span class="hljs-keyword">\bfseries</span> 华东师范大学&#123;<span class="hljs-keyword">\degreeCN</span>&#125;学位论文&#125;<br><span class="hljs-comment">% 改为：</span><br><span class="hljs-keyword">\fancyhead</span>[C]&#123; 华东师范大学&#123;<span class="hljs-keyword">\degreeCN</span>&#125;学位论文&#125; <span class="hljs-comment">% 在页眉中间显示</span><br></code></pre></td></tr></table></figure><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-comment">% ~ Line135 注释掉 页眉章节显示</span><br><span class="hljs-comment">%\fancyhead[LO,RE]&#123;\small\leftmark&#125;</span><br></code></pre></td></tr></table></figure><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-comment">% ~ Line141 页眉单实线</span><br><span class="hljs-keyword">\newcommand</span>&#123;<span class="hljs-keyword">\makeheadrule</span>&#125;&#123;<span class="hljs-comment">%</span><br><span class="hljs-keyword">\makebox</span>[0pt][l]&#123;<span class="hljs-keyword">\rule</span>[.0<span class="hljs-keyword">\baselineskip</span>]&#123;<span class="hljs-keyword">\headwidth</span>&#125;&#123;0.0pt&#125;&#125;<span class="hljs-comment">%</span><br><span class="hljs-keyword">\rule</span>[0.85<span class="hljs-keyword">\baselineskip</span>]&#123;<span class="hljs-keyword">\headwidth</span>&#125;&#123;0.4pt&#125; <span class="hljs-keyword">\vskip</span>-.8<span class="hljs-keyword">\baselineskip</span><br>    &#125;<br><span class="hljs-keyword">\makeatletter</span><br></code></pre></td></tr></table></figure><h3 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h3><p><code>main.tex</code></p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-comment">% ~ Line33</span><br><span class="hljs-keyword">\def</span><span class="hljs-keyword">\degreeCN</span>&#123;硕士&#125;<br>改为<br><span class="hljs-keyword">\def</span><span class="hljs-keyword">\degreeCN</span>&#123;硕士专业&#125;<br></code></pre></td></tr></table></figure></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    
    <tags>
      
      <tag>博客</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hexo+GitHub Pages搭建的个人博客加入到Bing搜索引擎</title>
    <link href="/posts/2025/02/7cddb87d.html"/>
    <url>/posts/2025/02/7cddb87d.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><h4 id="将中文网页名称转换为固定字符串"><a href="#将中文网页名称转换为固定字符串" class="headerlink" title="将中文网页名称转换为固定字符串"></a>将中文网页名称转换为固定字符串</h4><p>hexo默认生成的页面是你的title名，即title是中文那么网站访问的路径也是中文，这样是很不利于搜索引擎收录的，让我们使用插件来解决这个问题。</p><p>1.安装缩短链接插件 <code>npm install hexo-abbrlink --save</code></p><p>2.hexo的_config.yml 添加如下配置：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">permalink:</span> <span class="hljs-string">posts/:abbrlink.html</span><br><span class="hljs-attr">abbrlink:</span><br>  <span class="hljs-attr">alg:</span> <span class="hljs-string">crc32</span>  <span class="hljs-comment"># 算法：crc16(default) and crc32</span><br>  <span class="hljs-attr">rep:</span> <span class="hljs-string">hex</span>    <span class="hljs-comment"># 进制：dec(default) and hex</span><br><span class="hljs-attr">permalink_defaults:</span><br><span class="hljs-attr">pretty_urls:</span><br>  <span class="hljs-attr">trailing_index:</span> <span class="hljs-literal">true</span> <span class="hljs-comment"># Set to false to remove trailing &#x27;index.html&#x27; from permalinks</span><br>  <span class="hljs-attr">trailing_html:</span> <span class="hljs-literal">true</span> <span class="hljs-comment"># Set to false to remove trailing &#x27;.html&#x27; from permalinks</span><br></code></pre></td></tr></table></figure><p>安装完毕后此时再clean <code>hexo g</code> 会发现生成的网页名称不再是中文，而是固定的字符串，访问路径也统一变成了posts&#x2F;xxx.html，这种简单的访问路径比较利于搜索引擎收录。</p><h2 id="关于-Bing-Webmaster-Tools"><a href="#关于-Bing-Webmaster-Tools" class="headerlink" title="关于 Bing Webmaster Tools"></a>关于 Bing Webmaster Tools</h2><p><a href="https://www.bing.com/webmasters">Bing Webmaster Tools</a> 是必应的网站管理员工具，可以添加个人网站并带进行一些网站操作。</p><h5 id="步骤一：登录"><a href="#步骤一：登录" class="headerlink" title="步骤一：登录"></a>步骤一：登录</h5><p>打开 <a href="https://www.bing.com/webmasters">Webmaster</a>，点击“开始”或右上角“登录”以登录到官网。可以选择三种登录账号：Google、Microsoft、Facebook。这里我用 Microsoft 账号登录。</p><h5 id="步骤二：添加网站"><a href="#步骤二：添加网站" class="headerlink" title="步骤二：添加网站"></a>步骤二：添加网站</h5><p>初次登录会提示您添加网站，有两种添加方式：从 GSC 导入、手动添加。如果您的网站已通过 GSC 收录，可以用 GSC。这里我尝试手动添加。</p><p>在右侧输入框输入网站 URL，点击添加即可。这里容易失败，可以多试几次。</p><p>然后会要求验证网站。</p><p><img src="https://raw.gitmirror.com/YUTING0907/PicGo/main/img20250209205241.png"></p><h5 id="步骤三：验证网站"><a href="#步骤三：验证网站" class="headerlink" title="步骤三：验证网站"></a>步骤三：验证网站</h5><p>有多种验证方式：文件、标签、CNAME 等。这里我选择文件验证（第一个XML File进行验证）。</p><p><img src="https://raw.gitmirror.com/YUTING0907/PicGo/main/img20250209205321.png"></p><p>点击 <code>BingSiteAuth.xml</code> 下载验证文件，然后上传到 Gitee Page 的根目录下，再更新 Gitee Page 部署，这样个人博客就被更新了，可以访问网站根目录下找到 <code>BingSiteAuth.xml</code>。</p><p>注：那么这个根目录是哪里呢？</p><p>其实就是public文件夹下，我直接将BingSiteAuth.xml文件黏贴到public文件夹下，Git中hexo clean &amp;&amp; hexo g &amp;&amp; hexo d。但是当我去github的仓库中看时，仓库中并没有出现BingSiteAuth.xml文件。这是为什么呢？</p><p>因为 Hexo 的生成流程不会保留 <code>public</code> 目录下非由 Hexo 生成的原始文件。<code>hexo g</code> 命令会清理 <code>public</code> 目录并重新生成所有内容，但只包括从 <code>source</code> 目录和主题中通过 Hexo 处理的文件。</p><p>所以我的办法是先运行hexo clean &amp;&amp; hexo g之后，再将BingSiteAuth.xml黏贴到public下，之后再hexo d。这是github的仓库中就顺利出现了这个文件。</p><h5 id="步骤四：添加网站地图"><a href="#步骤四：添加网站地图" class="headerlink" title="步骤四：添加网站地图"></a>步骤四：添加网站地图</h5><p>首先生成sitemap.xml，并将sitemap.xml文件防到根目录下。</p><p><code>npm install hexo-generator-sitemap --save</code></p><p>该插件可以帮助Hexo自动生成sitemap.xml文件。</p><p>然后在站点配置文件_config.yml文件中输入：</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-meta"># Sitemap Generator  </span><br><span class="hljs-symbol">sitemap:</span>  <br><span class="hljs-symbol">  path:</span> sitemap.xml<br></code></pre></td></tr></table></figure><p>之后在Git中使用<code>hexo g</code>,就可以看到在public中生成了sitemap.xml文件了。然后再通过部署到仓库，就可以在网站地图中完成网站地图的提交。</p><p>生成sitemap.xml后，需要添加网站地图（Sitemap）到Bing Webmaster Tools。</p><p>点击左上角侧边栏按钮，选择“网站地图（Sitemap）”。</p><p><img src="https://raw.gitmirror.com/YUTING0907/PicGo/main/img20250209205506.png"></p><p>选择<code>https://yuting0907.github.io/sitemap.xml</code>，然后提交。</p><p>提交过后后台会花一段时间分析站点，然后显示“导入成功”，这时您的网站已正式录入到 Bing。</p><h2 id="验证-amp-总结"><a href="#验证-amp-总结" class="headerlink" title="验证 &amp; 总结"></a>验证 &amp; 总结</h2><p>怎么知道sitemap.xml和BingSiteAuth.xml是否可以被搜索到呢？</p><p>可以自己直接搜索username.github.io&#x2F;BingSiteAuth.xml和username.github.io&#x2F;sitemap.xml，username就是你的仓库用户名。如果可以看到xml文件中的内容就是上传到仓库成功。</p><p>可能需要等一会才能搜索到。</p><p>最后用搜索引擎尝试搜一下自己的博客网站看看有没有结果。我搜我的网名，第一个就是。</p><p>另外，Bing Webmaster Tools 还有一些其他工具也可以研究一下，帮您提升流量。但最重要的还是网站质量。</p><p>参考链接：</p><p><a href="https://www.cnblogs.com/RainbowC0/p/18107581">https://www.cnblogs.com/RainbowC0/p/18107581</a></p><p><a href="https://lengnian.github.io/posts/7cddb87d/">https://lengnian.github.io/posts/7cddb87d/</a></p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    
    <tags>
      
      <tag>博客</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>大模型必知必会的问题及答案</title>
    <link href="/posts/2025/01/b3b6ea6b.html"/>
    <url>/posts/2025/01/b3b6ea6b.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><p>以问题为导向来检验自己学习的效果。以下是一些大模型必知必会的问题，快来检查一下掌握程度吧～</p><h3 id="数据预处理"><a href="#数据预处理" class="headerlink" title="数据预处理"></a>数据预处理</h3><div class="note note-primary">            <p>1.什么是 BPE？它如何工作？</p>          </div><p>Byte Pair Encoding (BPE),又称 digram coding 双字母组合编码，是一种<strong>数据压缩</strong> 算法，用来在固定大小的词表中实现可变⻓度的子词。该算法简单有效，因而目前它是最流行的方法。</p><div class="note note-primary">            <p>2.BPE工作原理？</p>          </div><p>合并：找到数据集中最频繁的字符对，将其合并为一个新单元。<br>重复：迭代上述过程，直到达到预设的合并次数。<br>输出：生成固定大小的子词词表，可以覆盖高频词和罕见词。</p><p>过程如下：</p><p>1.将每个词拆分为字符序列，并统计每个字符出现的频次，</p><p>2.将最高频的两个字符组合在一起，形成新的’组合字符’(频次为两个字符同时出现的频次a)，同时原来的两个字符频次减去a.</p><p>3.重复第二个步骤直到，直到词表中单词数达到设定量 或下一个最高频数为 1 ，如果已经打到设定量，其余的词汇直接丢弃。</p><p><img src="https://raw.gitmirror.com/YUTING0907/PicGo/main/img20250116211822.png"></p><div class="note note-primary">            <p>3.BPE 优缺点？</p>          </div><p>优点</p><ul><li><p>有效地平衡词典大小和将预料编码所需要的token数量</p></li><li><p>不同语种通用</p></li><li><p>对于未知单词也适用</p></li></ul><p>缺点</p><ul><li>就是会产生一些不完整的单词（subword）</li><li>适合欧美语言拉丁语系，不适合中文汉字，中文的处理通常只有分词和分字。</li></ul><div class="note note-primary">            <p>4.什么是 Tokenization？NLP 中常见的 Tokenization 方法有哪些？</p>          </div><p>在解释Tokenization之前，先说说什么是Token。Token，也称为标记或词元，是语言处理中的一个基本单元。它通常代表一个单词、标点符号或一个特定的符号序列。Token是文本的基本组成单元，用于表示文本中的有意义的语言元素。例如，“Hello, world!”这个句子可以被划分为多个Token：“Hello”、“,”、“world”和“!”。</p><p>Tokenization是将连续的文本分割成一个个独立的Token的过程。它是NLP中的一项基础任务，通常在文本预处理阶段完成。Tokenization的目的是将文本分解成更小的、易于处理和分析的单元，以便于后续的词法分析、句法分析等任务。</p><p> <strong>Tokenization 常用方法:</strong></p><p><img src="https://raw.gitmirror.com/YUTING0907/PicGo/main/img20250116213932.png"></p><p>词粒度：就跟人类平时理解文本原理一样，常常用一些工具来完成，例如英文的NLTK、SpaCy，中文的jieba、LTP等。</p><p>字粒度：英文就是以字母为单位（对于大小写不敏感的任务，甚至可以先转小写再切分），中文就是以字为单位。</p><p>Subword粒度：</p><ul><li>BPE</li><li>WordPiece</li><li>ULM</li></ul><p>ULM算法：</p><p>它不是从一组基本符号开始，而是从一个庞大的词汇量开始，例如所有预处理的单词和最常见的子字符串，并逐步减少。</p><ol><li>准备足够大的语料库</li><li>定义好所需要的词表大小</li><li>给定词序列优化下一个词出现的概率</li><li>计算每个subword的损失</li><li>基于损失对subword排序并保留前X%。为了避免OOV，保留字符级的单元</li><li>重复第3至第5步直到达到第2步设定的subword词表大小或第5步的结果不再变化。</li></ol><p>WordPiece算法：</p><p>WordPiece最初用于解决日语和韩语语音问题。它在许多方面类似于BPE，只是它基于可能性而不是下一个最高频率对来形成一个新的子词。算法步骤如下：</p><ol><li>用文本中的所有字符初始化词单元库。</li><li>使用第一步中的库在训练数据上构建一个语言模型</li><li>通过结合当前词库中的两个单元来生成一个新的词单元，从而使词单元库增加一个</li><li>在所有可能的新词单元中选择一个，当添加到模型中时，它能最大程度地提高训练数据的可能性</li><li>重复第二步，直到达到预定义的词单元限制或可能性增加低于某个阈值。</li><li>重复第5步直到达到第2步设定的subword词表大小或概率增量低于某一阈值</li></ol><h5 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h5><p>简单几句话总结下Subword的三种算法：</p><ul><li>BPE：只需在每次迭代中使用<strong>「出现频率」</strong>来确定最佳匹配，直到达到预定义的词汇表大小；</li><li>Unigram：使用概率模型训练LM，移除提高整体可能性最小的token；然后迭代进行，直到达到预定义的词汇表大小；</li><li>WordPiece：结合BPE与Unigram，使用<strong>「出现频率」</strong>来确定潜在匹配，但根据合并token的概率做出最终决定.</li></ul><p>SentencePiece 是一个由谷歌开发的开源文本处理工具，它主要用于神经网络文本生成系统中的无监督文本分词（tokenization）和合词（detokenization）。这个工具的核心思想是将文本分词问题视为一个无监督学习问题，它不依赖于语言特定的预处理或后处理。</p><div class="note note-primary">            <p>5.Tokenization 的选择对模型训练有什么影响？</p>          </div><ul><li>词表大小</li></ul><p>大词表（如 Word-based Tokenization）：<br>优点：训练更快，序列长度较短。<br>缺点：内存占用大，OOV 问题严重。<br>小词表（如 Subword 或 Character-based Tokenization）：<br>优点：内存占用小，泛化性更好。<br>缺点：序列长度增加，计算成本提高。</p><ul><li>序列长度</li></ul><p>较短的序列（如 Word-based）：<br>计算效率更高。<br>较长的序列（如 Character-based）：<br>提高对细粒度信息的处理能力，但增加了计算开销。</p><ul><li>OOV 问题</li></ul><p>Word-based Tokenization：<br>对未登录词无法处理，会丢失信息。<br>Subword 或 Character-based Tokenization：<br>通过拆分单词解决 OOV 问题，提高泛化能力。</p><ul><li>训练效率</li></ul><p>复杂的 Tokenization（如 BPE 或 WordPiece）：<br>需要较大的预处理时间，但训练更加稳定。<br>简单的 Tokenization（如 Character-based）：<br>初始处理快，但序列长度显著增加，导致训练时间变长。</p><ul><li>模型泛化能力</li></ul><p>Subword-based Tokenization 通常在泛化能力和训练效率之间实现了较好的平衡。<br>Character-based Tokenization 能够捕获更细粒度的信息，但在小数据集下可能不足以学习高层语义</p><h3 id="模型细节"><a href="#模型细节" class="headerlink" title="模型细节"></a>模型细节</h3><div class="note note-primary">            <p>1.多头注意力的时间复杂度？空间复杂度？</p>          </div><p><strong>复杂度</strong></p><p>对于一个由n个单词组成的输入序列，假设有d个维度的特征，那么查询矩阵、键矩阵和值矩阵的维度都将是 n × d。</p><p>阅读 Transformer 相关的论文，在讨论 self-attention 的时间和空间复杂度时，都会提到是<br>$O(N^2)$,其中 $N$ 是序列长度。</p><p>我们来看下 $\textbf{scaled dot-product attention}$ 的时间和空间复杂度：</p><p>$\text{Attention}(Q, K, V) &#x3D; \text{softmax}\left(\frac{Q K^T}{\sqrt{d}}\right)$</p><p>为了分析时间和空间复杂度，我们把上述的计算过程拆分为：<br>$<br>S &#x3D; Q K^T, \quad S &#x3D; \frac{S}{\sqrt{d}}, \quad S V.<br>$</p><p>只要我们分析出每个计算的复杂度，就可以得到整体计算的复杂度。</p><p>我们先来看第一个矩阵乘法 $QK^T$，$Q \in \mathbb{R}^{N \times d}$, $K \in \mathbb{R}^{N \times d}$，矩阵乘法的朴素算法时间复杂度是：<br>$<br>O(N \cdot d \cdot N) &#x3D; O(N^2 \cdot d)<br>$，代码实现其实就是三个for循环。</p><p>至于空间复杂度，只有存储 $QK^T$ 计算结果，复杂度是：<br>$O(N^2)$<br>但是也不要觉得这个数字很大，如果 $N &lt; d$，其实存储 $Q$ 和 $K$ 要比 $QK^T$ 更占内存（显存）。除非序列很长 $N &gt; d$，空间复杂度 $O(N^2)$ 才会是瓶颈。</p><div class="note note-primary">            <p>2.为什么要用位置编码？</p>          </div><p>位置编码提供了位置信息，使 Transformer 能够捕捉序列的顺序关系，从而更有效地理解上下文依赖</p><div class="note note-primary">            <p>3.为什么要用多头注意力？手写多头注意力代码？</p>          </div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> math<br><span class="hljs-keyword">import</span> torch<br><span class="hljs-keyword">import</span> torch.nn <span class="hljs-keyword">as</span> nn<br><span class="hljs-keyword">import</span> torch.nn.functional <span class="hljs-keyword">as</span> F<br><br><span class="hljs-comment"># 定义一个 MultiHeadAttention 类，它继承自 nn.Module</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">MultiHeadAttention</span>(nn.Module):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, heads, d_model, dropout=<span class="hljs-number">0.1</span></span>):<br>        <span class="hljs-comment"># 调用父类的构造函数</span><br>        <span class="hljs-built_in">super</span>().__init__()<br>        <span class="hljs-comment"># 保存模型维度和头数</span><br>        <span class="hljs-variable language_">self</span>.d_model = d_model<br>        <span class="hljs-variable language_">self</span>.d_k = d_model // heads  <span class="hljs-comment"># 每个头对应的维度</span><br>        <span class="hljs-variable language_">self</span>.h = heads  <span class="hljs-comment"># 头的数量</span><br><br>        <span class="hljs-comment"># 初始化线性层，用于将输入转换为查询（Q）、键（K）和值（V）</span><br>        <span class="hljs-variable language_">self</span>.q_linear = nn.Linear(d_model, d_model)<br>        <span class="hljs-variable language_">self</span>.k_linear = nn.Linear(d_model, d_model)<br>        <span class="hljs-variable language_">self</span>.v_linear = nn.Linear(d_model, d_model)<br>        <span class="hljs-comment"># 初始化Dropout层，用于正则化</span><br>        <span class="hljs-variable language_">self</span>.dropout = nn.Dropout(dropout)<br>        <span class="hljs-comment"># 初始化输出线性层，用于将多头注意力输出转换为模型维度</span><br>        <span class="hljs-variable language_">self</span>.out = nn.Linear(d_model, d_model)<br><br>    <span class="hljs-comment"># 定义注意力机制的计算过程</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">attention</span>(<span class="hljs-params">self, q, k, v, mask=<span class="hljs-literal">None</span></span>):<br>        <span class="hljs-comment"># 计算Q和K的矩阵乘积，然后除以根号下d_k</span><br>        scores = torch.matmul(q, k.transpose(-<span class="hljs-number">2</span>, -<span class="hljs-number">1</span>)) / math.sqrt(<span class="hljs-variable language_">self</span>.d_k)<br>        <span class="hljs-comment"># 如果提供了掩码，则将掩码对应的位置设置为负无穷，这样在softmax后这些位置的值为0</span><br>        <span class="hljs-keyword">if</span> mask <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:<br>            scores = scores.masked_fill(mask == <span class="hljs-number">0</span>, -<span class="hljs-number">1e9</span>)<br>        <span class="hljs-comment"># 应用softmax函数获得注意力权重</span><br>        scores = F.softmax(scores, dim=-<span class="hljs-number">1</span>)<br>        <span class="hljs-comment"># 应用dropout</span><br>        scores = <span class="hljs-variable language_">self</span>.dropout(scores)<br>        <span class="hljs-comment"># 将注意力权重和V相乘得到输出</span><br>        output = torch.matmul(scores, v)<br>        <span class="hljs-keyword">return</span> output<br><br>    <span class="hljs-comment"># 定义前向传播过程</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">forward</span>(<span class="hljs-params">self, q, k, v, mask=<span class="hljs-literal">None</span></span>):<br>        batch_size = q.size(<span class="hljs-number">0</span>)<br>        <span class="hljs-comment"># 将输入Q、K、V通过线性层，并调整形状以进行多头注意力计算</span><br>        q = <span class="hljs-variable language_">self</span>.q_linear(q).view(batch_size, -<span class="hljs-number">1</span>, <span class="hljs-variable language_">self</span>.h, <span class="hljs-variable language_">self</span>.d_k).transpose(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)<br>        k = <span class="hljs-variable language_">self</span>.k_linear(k).view(batch_size, -<span class="hljs-number">1</span>, <span class="hljs-variable language_">self</span>.h, <span class="hljs-variable language_">self</span>.d_k).transpose(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)<br>        v = <span class="hljs-variable language_">self</span>.v_linear(v).view(batch_size, -<span class="hljs-number">1</span>, <span class="hljs-variable language_">self</span>.h, <span class="hljs-variable language_">self</span>.d_k).transpose(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)<br>        <span class="hljs-comment"># 计算注意力输出</span><br>        scores = <span class="hljs-variable language_">self</span>.attention(q, k, v, mask)<br>        <span class="hljs-comment"># 将多头输出合并，并调整形状以匹配模型维度</span><br>        concat = scores.transpose(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>).contiguous().view(batch_size, -<span class="hljs-number">1</span>, <span class="hljs-variable language_">self</span>.d_model)<br>        <span class="hljs-comment"># 通过输出线性层</span><br>        output = <span class="hljs-variable language_">self</span>.out(concat)<br>        <span class="hljs-keyword">return</span> output<br><br><span class="hljs-comment"># 主函数，用于测试 MultiHeadAttention 类</span><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    <span class="hljs-comment"># 初始化模型参数</span><br>    heads = <span class="hljs-number">4</span><br>    d_model = <span class="hljs-number">128</span>  <span class="hljs-comment"># d_model应该是heads的整数倍。</span><br>    dropout = <span class="hljs-number">0.1</span><br><br>    <span class="hljs-comment"># 创建 MultiHeadAttention 实例</span><br>    model = MultiHeadAttention(heads, d_model, dropout)<br><br>    <span class="hljs-comment"># 创建随机数据作为输入</span><br>    batch_size = <span class="hljs-number">2</span><br>    seq_len = <span class="hljs-number">5</span><br>    q = torch.rand(batch_size, seq_len, d_model)  <span class="hljs-comment"># Query</span><br>    k = torch.rand(batch_size, seq_len, d_model)  <span class="hljs-comment"># Key</span><br>    v = torch.rand(batch_size, seq_len, d_model)  <span class="hljs-comment"># Value</span><br><br>    <span class="hljs-comment"># 执行前向传播</span><br>    output = model(q, k, v)<br><br>    <span class="hljs-comment"># 打印输出形状，应该是 [batch_size, seq_len, d_model]</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Output shape:&quot;</span>, output.shape)<br><br>    <span class="hljs-comment"># 检查模型是否可以进行反向传播</span><br>    loss = output.mean()  <span class="hljs-comment"># 创建一个简单的损失函数</span><br>    loss.backward()  <span class="hljs-comment"># 执行反向传播</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Backward pass completed.&quot;</span>)  <span class="hljs-comment"># 如果没有错误，则表示反向传播成功</span><br></code></pre></td></tr></table></figure><div class="note note-primary">            <p>4.多头注意力的优化方式？</p>          </div><p><strong>优化</strong></p><p>共用KV Cache（MQA和GQA）:</p><p>MQA（Multi Query Attention）多查询注意力是MHA多头注意力的变体。两者主要区别是MQA中不同头共享一组KV，每个头只保留查询参数Q。KV矩阵只有一份，大幅减少内存。<br>由于MQA改变注意力机制结构，模型需要从训练开始就支持MQA，或通过对已训练好的模型微调支持MQA，仅需约5%的原始数据量即可达到不过效果。Falcon、SantaCoder、StarCoder 等模型都采用了MQA机。</p><p>GQA (Grouped Query Attention，分组查询注意力)，介于MHQ和MQA之间的折中方案。按查询头Q分组，每个组共享一个K和V。表达能力与推理性能兼顾。</p><div class="note note-primary">            <p>5.各种Norm介绍和解释？</p>          </div><p>6.BERT使用的编码？<br>7.BERT的loss？<br>8.BERT的架构？</p><p>9.BERT，GPT等比较主流大模型，一些细节，比如位置编码，训练loss，激活，架构些许不同这种。自回归重点</p><h3 id="框架相关内容"><a href="#框架相关内容" class="headerlink" title="框架相关内容"></a>框架相关内容</h3><p>各种并行方式，优缺点。DeepSpeed，Megatron可以看看源代码，Flash-Attention等内容。这个点也经常考代码题。</p><div class="note note-primary">            <p>1.并行方式有哪些？</p>          </div><ul><li>数据并行</li></ul><p>​所谓数据并行，就是由于训练数据集太大；因此，将数据集分为N份，每一份分别装载到N个GPU节点中，同时，每个GPU节点持有一个完整的模型副本，分别基于每个GPU中的数据去进行梯度求导。然后，在GPU0上对每个GPU中的梯度进行累加，最后，再将GPU0聚合后的结果广播到其他GPU节点。</p><ul><li><p>流水线并行</p><p>所谓流水线并行，就是由于模型太大，无法将整个模型放置到单张GPU卡中；因此，将模型的不同层放置到不同的计算设备，降低单个计算设备的显存消耗，从而实现超大规模模型训练。 如下图所示，模型共包含四个模型层（如：Transformer层），被切分为三个部分，分别放置到三个不同的计算设备。即第 1 层放置到设备 0，第 2 层和第三 3 层放置到设备 1，第 4 层放置到设备 2。</p></li><li><p>张量并行</p><p>和流水线并行类似，张量并行也是将模型分解放置到不同的GPU上，以解决单块GPU无法储存整个模型的问题。和流水线并行不同的地方在于，张量并行是针对模型中的张量进行拆分，将其放置到不同的GPU上。</p><p>模型并行是不同设备负责单个计算图不同部分的计算。而将计算图中的层内的参数（张量）切分到不同设备（即层内并行），每个设备只拥有模型的一部分，以减少内存负荷，我们称之为张量模型并行</p></li></ul><p><strong>数据并行 vs 张量并行 vs 流水线并行?</strong><br>数据并行、张量并行和流水线并行是在并行计算中常见的三种策略，它们有不同的应用场景和优势：</p><p>1、数据并行（Data Parallelism）：</p><p>概念： 数据并行是指将整个模型复制到每个处理单元上，不同处理单元处理不同的数据子集。每个处理单元独立计算，并通过同步更新模型参数来实现训练。<br>适用场景： 数据并行适用于大型模型和数据集，特别是在深度学习中。每个处理单元负责计算不同数据子集上的梯度，然后同步更新模型参数。<br>优势： 易于实现，适用于大规模数据和模型。<br>2、张量并行（Tensor Parallelism）：</p><p>概念： 张量并行是指将模型分解成多个部分，每个部分在不同处理单元上进行计算。通常，这涉及到在层与层之间划分模型，并在不同的 GPU 或处理单元上执行这些部分。<br>适用场景： 张量并行适用于非常大的模型，其中单个 GPU 的内存容量无法容纳整个模型。它允许将模型的不同部分分配到不同的处理单元上，从而扩展模型的规模。<br>优势： 适用于大型模型的规模扩展，可用于解决内存限制问题。<br>3、流水线并行（Pipeline Parallelism）：</p><p>概念： 流水线并行是指将模型的不同层分配到不同的处理单元上，并通过将不同层的输出传递给下一层来实现计算。每个处理单元负责一个模型层的计算。<br>适用场景： 流水线并行适用于深层次的模型，其中各层之间的计算相对独立。它可以提高模型的整体计算速度，特别是在层之间存在较大的计算延迟时。<br>优势： 适用于深层次模型，减少整体计算时间。<br>这三种并行策略通常可以结合使用，具体取决于应用的场景和问题的性质。在深度学习等领域，常常会使用数据并行和张量并行相结合的方式，以提高模型的训练速度和规模。</p><p>4、3D并行，或者混合并行 (Hybrid Parallelism)</p><p>则是将以上三种策略结合起来使用，达到同时提升存储和计算效率的目的。Megatron-Turing NLG 就是先将 Transformer block 使用流水线和张量 2D 并行，然后再加上数据并行，将训练扩展到更多的GPU。</p><div class="note note-primary">            <p>2.如果有N张显存足够大的显卡，怎么加速训练？</p>          </div><p>数据并行化<strong>：</strong> 在数据并行化中，模型的多个副本在不同的 GPU 上训练相同的数据批次。每个 GPU 计算梯度，并将结果汇总到主 GPU 或进行参数更新。这种方法适用于模型过大而无法完全容纳在单个 GPU 内存中的情况。</p><p>模型并行化<strong>：</strong> 在模型并行化中，模型的不同部分分配到不同的 GPU 上。每个 GPU 负责计算其分配的部分，并将结果传递给其他 GPU。这对于大型模型，特别是具有分层结构的模型（如大型神经网络）是有益的。</p><p>分布式训练<strong>：</strong> 使用分布式框架（例如 TensorFlow 的 tf.distribute 或 PyTorch 的 torch.nn.parallel.DistributedDataParallel）来实现训练任务的分布式执行。这允许将训练任务分配到多个 GPU 或多台机器上进行加速。</p><p>优化批处理大小<strong>：</strong> 增大批处理大小可以提高 GPU 利用率，但需要注意的是，批处理大小的增加也可能导致内存不足或梯度下降不稳定。因此，需要根据模型和硬件配置进行合理的调整。</p><p>混合精度训练<strong>：</strong> 使用半精度浮点数（例如 TensorFlow 的 tf.keras.mixed_precision 或 PyTorch 的 AMP）来减少内存占用，加速训练过程。</p><p>模型剪枝和优化<strong>：</strong> 对模型进行剪枝和优化以减少模型的大小和计算负荷，有助于提高训练速度和效率。</p><div class="note note-primary">            <p>3.想要训练1个LLM，如果只想用1张显卡，那么对显卡的要求是什么？</p>          </div><p>显卡显存足够大，nB模型微调一般最好准备20nGB以上的显存。</p><div class="note note-primary">            <p>4.如果显卡的显存不够装下一个完整的模型呢？</p>          </div><p>最直观想法，需要分层加载，把不同的层加载到不同的GPU上（accelerate的device_map）也就是常见的PP，流水线并行</p><div class="note note-primary">            <p>4.常见的分布式训练框架哪一些，都有什么特点？</p>          </div><p>1、Megatron-LM</p><p>Megatron 是由 NVIDIA 深度学习应用研究团队开发的大型 Transformer 语言模型，该模型用于研究大规模训练大型语言模型。</p><p>Megatron 支持transformer模型的模型并行（张量、序列和管道）和多节点预训练，同时还支持 BERT、GPT 和 T5 等模型。</p><p>2、DeepSpeed</p><p>DeepSpeed是微软的深度学习库，已被用于训练 Megatron-Turing NLG 530B 和 BLOOM等大型模型。</p><p>DeepSpeed的创新体现在三个方面：</p><p>训练，推理，压缩<br>DeepSpeed具备以下优势：</p><p>训练&#x2F;推理具有数十亿或数万亿个参数的密集或稀疏模型<br>实现出色的系统吞吐量并有效扩展到数千个 GPU<br>在资源受限的 GPU 系统上训练&#x2F;推理<br>为推理实现前所未有的低延迟和高吞吐量<br>以低成本实现极致压缩，实现无与伦比的推理延迟和模型尺寸缩减</p><div class="note note-primary">            <p>5.Flash-Attention？</p>          </div><h3 id="模型训练"><a href="#模型训练" class="headerlink" title="模型训练"></a>模型训练</h3><p>这个可能主要是工作经验相关，经常问比如训练loss炸掉了，如何解决，一些技巧之类的。面试时有些面试官会问一些很细节的东西，感觉是在确认确实上手跑过基座训练不是吹水。</p><h3 id="模型评估"><a href="#模型评估" class="headerlink" title="模型评估"></a>模型评估</h3><p>如何评估大模型，安全性，有效性，公开数据，个别考过手写eval框架（多选，生成）。</p><p>ChatbotArena：借鉴游戏排位赛机制，让人类对模型两两评价<br>SuperCLUE：中文通用大模型综合性评测基准，尝试全自动测评大模型<br>C-Eval：采用 1.4 万道涵盖 52 个学科的选择题，评估模型中文能力<br>FlagEval：采用“能力—任务—指标”三维评测框架</p><p>参考：<a href="https://zhuanlan.zhihu.com/p/448147465">https://zhuanlan.zhihu.com/p/448147465</a></p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>NLP</category>
      
    </categories>
    
    
    <tags>
      
      <tag>NLP</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Fluid-7-添加星系loading动画</title>
    <link href="/posts/2025/01/58ed6977.html"/>
    <url>/posts/2025/01/58ed6977.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><p>Hexo博客主题为Fluid</p><p>1.在<code>themes\fluid\layout\_partials\</code>路径下创建<code>loading.ejs</code>，内容参考：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;%<br>    play_time=theme.<span class="hljs-property">loading</span>.<span class="hljs-property">play_time</span> || <span class="hljs-number">500</span><br>%&gt;<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/css&quot;</span>&gt;</span><span class="language-css"></span></span><br><span class="language-css"><span class="language-xml">    <span class="hljs-keyword">@keyframes</span> spin3D &#123;</span></span><br><span class="language-css"><span class="language-xml">        <span class="hljs-selector-tag">from</span> &#123;</span></span><br><span class="language-css"><span class="language-xml">            <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotate3d</span>(<span class="hljs-number">0.5</span>, <span class="hljs-number">0.5</span>, <span class="hljs-number">0.5</span>, <span class="hljs-number">360deg</span>);</span></span><br><span class="language-css"><span class="language-xml">        &#125;</span></span><br><span class="language-css"><span class="language-xml"></span></span><br><span class="language-css"><span class="language-xml">        <span class="hljs-selector-tag">to</span> &#123;</span></span><br><span class="language-css"><span class="language-xml">            <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotate3d</span>(<span class="hljs-number">0deg</span>);</span></span><br><span class="language-css"><span class="language-xml">        &#125;</span></span><br><span class="language-css"><span class="language-xml">    &#125;</span></span><br><span class="language-css"><span class="language-xml"></span></span><br><span class="language-css"><span class="language-xml">    <span class="hljs-selector-id">#loading</span> &#123;</span></span><br><span class="language-css"><span class="language-xml">        <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;</span></span><br><span class="language-css"><span class="language-xml">        <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#172d4781</span>;</span></span><br><span class="language-css"><span class="language-xml">        <span class="hljs-attribute">backdrop-filter</span>: <span class="hljs-built_in">saturate</span>(<span class="hljs-number">100%</span>) <span class="hljs-built_in">blur</span>(<span class="hljs-number">10px</span>);</span></span><br><span class="language-css"><span class="language-xml">        <span class="hljs-attribute">display</span>: flex;</span></span><br><span class="language-css"><span class="language-xml">        <span class="hljs-attribute">justify-content</span>: center;</span></span><br><span class="language-css"><span class="language-xml">        <span class="hljs-attribute">align-items</span>: center;</span></span><br><span class="language-css"><span class="language-xml">        <span class="hljs-attribute">position</span>: fixed;</span></span><br><span class="language-css"><span class="language-xml">        <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;</span></span><br><span class="language-css"><span class="language-xml">        <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;</span></span><br><span class="language-css"><span class="language-xml">        <span class="hljs-attribute">right</span>: <span class="hljs-number">0</span>;</span></span><br><span class="language-css"><span class="language-xml">        <span class="hljs-attribute">overflow</span>: hidden;</span></span><br><span class="language-css"><span class="language-xml">        <span class="hljs-attribute">z-index</span>: <span class="hljs-number">99999999</span>;</span></span><br><span class="language-css"><span class="language-xml">    &#125;</span></span><br><span class="language-css"><span class="language-xml"></span></span><br><span class="language-css"><span class="language-xml">    <span class="hljs-selector-class">.spinner-box</span> &#123;</span></span><br><span class="language-css"><span class="language-xml">        <span class="hljs-attribute">width</span>: <span class="hljs-number">300px</span>;</span></span><br><span class="language-css"><span class="language-xml">        <span class="hljs-attribute">height</span>: <span class="hljs-number">300px</span>;</span></span><br><span class="language-css"><span class="language-xml">        <span class="hljs-attribute">display</span>: flex;</span></span><br><span class="language-css"><span class="language-xml">        <span class="hljs-attribute">justify-content</span>: center;</span></span><br><span class="language-css"><span class="language-xml">        <span class="hljs-attribute">align-items</span>: center;</span></span><br><span class="language-css"><span class="language-xml">        <span class="hljs-attribute">background-color</span>: transparent;</span></span><br><span class="language-css"><span class="language-xml">    &#125;</span></span><br><span class="language-css"><span class="language-xml"></span></span><br><span class="language-css"><span class="language-xml">    <span class="hljs-selector-class">.leo</span> &#123;</span></span><br><span class="language-css"><span class="language-xml">        <span class="hljs-attribute">position</span>: absolute;</span></span><br><span class="language-css"><span class="language-xml">        <span class="hljs-attribute">display</span>: flex;</span></span><br><span class="language-css"><span class="language-xml">        <span class="hljs-attribute">justify-content</span>: center;</span></span><br><span class="language-css"><span class="language-xml">        <span class="hljs-attribute">align-items</span>: center;</span></span><br><span class="language-css"><span class="language-xml">        <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">50%</span>;</span></span><br><span class="language-css"><span class="language-xml">    &#125;</span></span><br><span class="language-css"><span class="language-xml"></span></span><br><span class="language-css"><span class="language-xml">    <span class="hljs-selector-class">.blue-orbit</span> &#123;</span></span><br><span class="language-css"><span class="language-xml">        <span class="hljs-attribute">width</span>: <span class="hljs-number">175px</span>;</span></span><br><span class="language-css"><span class="language-xml">        <span class="hljs-attribute">height</span>: <span class="hljs-number">175px</span>;</span></span><br><span class="language-css"><span class="language-xml">        <span class="hljs-attribute">border</span>: <span class="hljs-number">2px</span> solid <span class="hljs-number">#1a91fa</span>;</span></span><br><span class="language-css"><span class="language-xml">        <span class="hljs-attribute">animation</span>: spin3D <span class="hljs-number">3s</span> linear .<span class="hljs-number">2s</span> infinite;</span></span><br><span class="language-css"><span class="language-xml">    &#125;</span></span><br><span class="language-css"><span class="language-xml"></span></span><br><span class="language-css"><span class="language-xml">    <span class="hljs-selector-class">.green-orbit</span> &#123;</span></span><br><span class="language-css"><span class="language-xml">        <span class="hljs-attribute">width</span>: <span class="hljs-number">135px</span>;</span></span><br><span class="language-css"><span class="language-xml">        <span class="hljs-attribute">height</span>: <span class="hljs-number">135px</span>;</span></span><br><span class="language-css"><span class="language-xml">        <span class="hljs-attribute">border</span>: <span class="hljs-number">2px</span> solid <span class="hljs-number">#00ffdd</span>;</span></span><br><span class="language-css"><span class="language-xml">        <span class="hljs-attribute">animation</span>: spin3D <span class="hljs-number">2s</span> linear <span class="hljs-number">0s</span> infinite;</span></span><br><span class="language-css"><span class="language-xml">    &#125;</span></span><br><span class="language-css"><span class="language-xml"></span></span><br><span class="language-css"><span class="language-xml">    <span class="hljs-selector-class">.red-orbit</span> &#123;</span></span><br><span class="language-css"><span class="language-xml">        <span class="hljs-attribute">width</span>: <span class="hljs-number">100px</span>;</span></span><br><span class="language-css"><span class="language-xml">        <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>;</span></span><br><span class="language-css"><span class="language-xml">        <span class="hljs-attribute">border</span>: <span class="hljs-number">2px</span> solid <span class="hljs-number">#d75151</span>;</span></span><br><span class="language-css"><span class="language-xml">        <span class="hljs-attribute">animation</span>: spin3D <span class="hljs-number">1s</span> linear <span class="hljs-number">0s</span> infinite;</span></span><br><span class="language-css"><span class="language-xml">    &#125;</span></span><br><span class="language-css"><span class="language-xml"></span></span><br><span class="language-css"><span class="language-xml">    <span class="hljs-selector-class">.white-orbit-a</span> &#123;</span></span><br><span class="language-css"><span class="language-xml">        <span class="hljs-attribute">width</span>: <span class="hljs-number">70px</span>;</span></span><br><span class="language-css"><span class="language-xml">        <span class="hljs-attribute">height</span>: <span class="hljs-number">70px</span>;</span></span><br><span class="language-css"><span class="language-xml">        <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#faf5f5</span>;</span></span><br><span class="language-css"><span class="language-xml">        <span class="hljs-attribute">animation</span>: spin3D <span class="hljs-number">3s</span> linear <span class="hljs-number">0s</span> infinite;</span></span><br><span class="language-css"><span class="language-xml">    &#125;</span></span><br><span class="language-css"><span class="language-xml"></span></span><br><span class="language-css"><span class="language-xml">    <span class="hljs-selector-class">.white-orbit-b</span> &#123;</span></span><br><span class="language-css"><span class="language-xml">        <span class="hljs-attribute">width</span>: <span class="hljs-number">70px</span>;</span></span><br><span class="language-css"><span class="language-xml">        <span class="hljs-attribute">height</span>: <span class="hljs-number">70px</span>;</span></span><br><span class="language-css"><span class="language-xml">        <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#faf5f5</span>;</span></span><br><span class="language-css"><span class="language-xml">        <span class="hljs-attribute">animation</span>: spin3D <span class="hljs-number">1.5s</span> linear <span class="hljs-number">0s</span> infinite;</span></span><br><span class="language-css"><span class="language-xml">    &#125;</span></span><br><span class="language-css"><span class="language-xml"></span></span><br><span class="language-css"><span class="language-xml">    <span class="hljs-selector-class">.nucleus</span> &#123;</span></span><br><span class="language-css"><span class="language-xml">        <span class="hljs-attribute">width</span>: <span class="hljs-number">1px</span>;</span></span><br><span class="language-css"><span class="language-xml">        <span class="hljs-attribute">height</span>: <span class="hljs-number">1px</span>;</span></span><br><span class="language-css"><span class="language-xml">        <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ffffff</span>;</span></span><br><span class="language-css"><span class="language-xml">        <span class="hljs-attribute">animation</span>: spin3D <span class="hljs-number">1s</span> linear <span class="hljs-number">0s</span> infinite;</span></span><br><span class="language-css"><span class="language-xml">    &#125;</span></span><br><span class="language-css"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span><br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;loading&quot;</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;spinner-box&quot;</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;blue-orbit leo&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;green-orbit leo&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;red-orbit leo&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;white-orbit-a leo&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;white-orbit-b leo&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;nucleus leo&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml">    (<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">const</span> loaded = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;</span></span><br><span class="language-javascript"><span class="language-xml">            <span class="hljs-variable language_">window</span>.<span class="hljs-property">onload</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;</span></span><br><span class="language-javascript"><span class="language-xml">                <span class="hljs-keyword">const</span> loader = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;loading&quot;</span>);</span></span><br><span class="language-javascript"><span class="language-xml">                loader.<span class="hljs-property">className</span> = <span class="hljs-string">&quot;fadeout&quot;</span>;</span></span><br><span class="language-javascript"><span class="language-xml">                <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;</span></span><br><span class="language-javascript"><span class="language-xml">                    loader.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">&quot;none&quot;</span>;</span></span><br><span class="language-javascript"><span class="language-xml">                &#125;, </span></span><br><span class="language-javascript"><span class="language-xml">                &lt;%- play_time %&gt;</span></span><br><span class="language-javascript"><span class="language-xml">                );</span></span><br><span class="language-javascript"><span class="language-xml">            &#125;</span></span><br><span class="language-javascript"><span class="language-xml">        &#125;;</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-title function_">loaded</span>();</span></span><br><span class="language-javascript"><span class="language-xml">    &#125;)();</span></span><br><span class="language-javascript"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p>2.修改<code>themes\fluid\layout\layout.ejs</code>文件，找到<code>&lt;body&gt;</code>标签，在其内部第一行插入下面代码：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;% <span class="hljs-keyword">if</span> (theme.<span class="hljs-property">loading</span>.<span class="hljs-property">enable</span>) &#123; %&gt;<br>  &lt;%- <span class="hljs-title function_">partial</span>(<span class="hljs-string">&#x27;_partials/loading.ejs&#x27;</span>) %&gt;<br>&lt;% &#125; %&gt;<br></code></pre></td></tr></table></figure><p>3.修改主题配置文件<code>_config.fluid.yml</code>，添加loading动画的配置项：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"># 加载动画<br>loading:<br>  enable: true<br>  # 动画时长，从动画开始播放计算，不包含页面加载时间，单位ms<br>  play_time: 500<br></code></pre></td></tr></table></figure></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>博客</category>
      
    </categories>
    
    
    <tags>
      
      <tag>hexo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Fluid-6-导航栏标题添加霓虹灯特效</title>
    <link href="/posts/2025/01/e95612a0.html"/>
    <url>/posts/2025/01/e95612a0.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><p>注意 主题为Fluid!!!!</p><ol><li>修改<code>themes\fluid\source\css\_pages\_base\_widget\header.styl</code>，在里面追加样式(注意缩进)：</li></ol><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.navbar-title</span><br>  <span class="hljs-attribute">outline</span> <span class="hljs-attribute">none</span><br>  <span class="hljs-attr">--c</span> lightseagreen<br>  <span class="hljs-attribute">text-shadow</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">10px</span> <span class="hljs-selector-tag">var</span>(<span class="hljs-attr">--c</span>),<span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">20px</span> <span class="hljs-selector-tag">var</span>(<span class="hljs-attr">--c</span>),<span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">40px</span> <span class="hljs-selector-tag">var</span>(<span class="hljs-attr">--c</span>),<span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">80px</span> <span class="hljs-selector-tag">var</span>(<span class="hljs-attr">--c</span>),<span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">160px</span> <span class="hljs-selector-tag">var</span>(<span class="hljs-attr">--c</span>)<br>  <span class="hljs-attribute">animation</span> animate <span class="hljs-number">5s</span> linear infinite<br><br><span class="hljs-keyword">@keyframes</span> animate&#123;<br>  <span class="hljs-selector-tag">to</span>&#123;<br>      <span class="hljs-attribute">filter</span>: <span class="hljs-built_in">hue-rotate</span>(<span class="hljs-number">360deg</span>)<br>  &#125;<br>&#125;  <br></code></pre></td></tr></table></figure><ol start="2"><li>然后修改<code>themes\fluid\layout\_partials\header\navigation.ejs</code>，给其添加上class属性<br>找到对应导航栏标题的标签内容：<br><code>&lt;strong&gt;&lt;%= theme.navbar.blog_title || config.title %&gt;&lt;/strong&gt;</code><br>修改为：<br><code>&lt;strong class=&quot;navbar-title&quot;&gt;&lt;%= theme.navbar.blog_title || config.title %&gt;&lt;/strong&gt;</code></li></ol><h2 id=""><a href="#" class="headerlink" title=""></a></h2></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>博客</category>
      
    </categories>
    
    
    <tags>
      
      <tag>hexo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Fluid-5-主题美化之添加Live2D看板娘</title>
    <link href="/posts/2025/01/f6599f80.html"/>
    <url>/posts/2025/01/f6599f80.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><p>此功能将会使得 博客网站上有2D的小漫画人物或者萌宠陪伴～</p><h3 id="安装Live2D插件"><a href="#安装Live2D插件" class="headerlink" title="安装Live2D插件"></a>安装Live2D插件</h3><p>1、进入Hexo根目录</p><p>2、打开Git Bash，输入以下命令进行安装：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript">npm install --save hexo-helper-live2d<br></code></pre></td></tr></table></figure><h3 id="添加自定义配置"><a href="#添加自定义配置" class="headerlink" title="添加自定义配置"></a>添加自定义配置</h3><p>1、打开Hexo根目录下的配置文件</p><p> 2、在合适位置处添加以下内容</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-title class_">Olive2</span><span class="hljs-attr">d</span>:<br><span class="hljs-attr">enable</span>: <span class="hljs-literal">true</span> <br><span class="hljs-attr">scriptFrom</span>: local <br><span class="hljs-attr">pluginRootPath</span>: live2dw/ <br><span class="hljs-attr">pluginJsPath</span>: lib/ <br><span class="hljs-attr">pluginModelPath</span>: assets/ <br><span class="hljs-attr">tagMode</span>: <span class="hljs-literal">false</span> <br><span class="hljs-attr">debug</span>: <span class="hljs-literal">false</span> <br><span class="hljs-attr">model</span>: <br><span class="hljs-attr">use</span>: live2d-widget-model-wanko # live2d-widget-model-hijiki 萝莉 该配置即为要使用的<span class="hljs-title class_">Live2D</span>模型的名字 <br><span class="hljs-attr">scale</span>: <span class="hljs-number">1</span> <br><span class="hljs-attr">hHeadPos</span>: <span class="hljs-number">0.5</span> <br><span class="hljs-attr">vHeadPos</span>: <span class="hljs-number">0.618</span> <br><span class="hljs-attr">display</span>: <br><span class="hljs-attr">superSample</span>: <span class="hljs-number">2</span> <br><span class="hljs-attr">width</span>: <span class="hljs-number">200</span> <br><span class="hljs-attr">height</span>: <span class="hljs-number">350</span> <br><span class="hljs-attr">position</span>: right <br><span class="hljs-attr">hOffset</span>: <span class="hljs-number">0</span> <br><span class="hljs-attr">vOffset</span>: -<span class="hljs-number">20</span> <br><span class="hljs-attr">mobile</span>: <br><span class="hljs-attr">show</span>: <span class="hljs-literal">false</span> <br><span class="hljs-attr">scale</span>: <span class="hljs-number">0.5</span> <br><span class="hljs-attr">react</span>:<br><span class="hljs-attr">opacityDefault</span>: <span class="hljs-number">1</span> <br><span class="hljs-attr">opacityOnHover</span>: <span class="hljs-number">0.5</span><br></code></pre></td></tr></table></figure><h3 id="安装所需模型"><a href="#安装所需模型" class="headerlink" title="安装所需模型"></a>安装所需模型</h3><p>1、从以下链接处找到你所需的模型的名字 </p><p><a href="https://github.com/xiazeyu/live2d-widget-models">https://github.com/xiazeyu/live2d-widget-models</a> </p><p>2、进入Hexo根目录，打开Git Bash，输入以下命令安装模型 npm install live2d-widget-model-wanko </p><p>3、修改自定义配置中要使用的模型，必须要与已安装的模型名称一致</p><h3 id="检查是否配置成功"><a href="#检查是否配置成功" class="headerlink" title="检查是否配置成功"></a>检查是否配置成功</h3><p>使用以下命令检查是否配置成功： </p><p><code>hexo clean</code></p><p><code> hexo g</code></p><p><code> hexo s</code></p><p> 若配置成功，则上传到网站根目录： </p><p><code>hexo d</code></p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>博客</category>
      
    </categories>
    
    
    <tags>
      
      <tag>hexo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>一文读懂transform原理及代码实现</title>
    <link href="/posts/2025/01/8c15d6cc.html"/>
    <url>/posts/2025/01/8c15d6cc.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><h3 id="0-引言"><a href="#0-引言" class="headerlink" title="0 引言"></a>0 引言</h3><p>由于之前的模型，例如Seq2Seq模型有如下缺点，所以导致了transformer的诞生～</p><ol><li><p>上下文向量信息压缩</p><p>输入序列的全部信息需要被编码成<strong>一个固定维度的上下文向量</strong>，用这个固定的向量来表示编码器的全部信息，这样会导致信息的损耗。</p></li><li><p>无法并行</p><p>Seq2Seq模型在处理长序列时存在短期记忆限制，难以有效捕获和传递长期依赖性。本质上和RNN&#x2F;LSTM无法并行的原因一样。</p><p>对于 RNN 来说, 任意时刻 t 的输⼊是时刻 t 的输⼊ x(t) 和上⼀时刻的隐藏层输出 h(t-1) , 经过运算后得到当前时刻隐藏层的输出 h(t) , 这个 h(t) 也即将作为下⼀时刻 t+1 的输⼊的⼀部分. 这个计算过程是 RNN 的本质特征, RNN 的历史信息是需要通过这个时间步⼀步⼀步向后传递的. ⽽这就意味着 RNN 序列后⾯的信息只能等到前⾯的计算结束后, 将历史信息通过 hidden state 传递给后⾯才能开始计算, 形成链式的序列依赖关系, ⽆法实现并⾏。</p></li></ol><p>Transformer架构同时解决了Seq2Seq的两大缺陷，既可以并行又利用multi-head attention机制来解决Encoder固定编码的问题，让Decoder在解码的每一步可以通过注意力机制去关注编码器中最重要的部分。</p><p>对于 Transformer 结构来说, 在 self-attention 层, ⽆论序列的⻓度是多少, 都可以⼀次性计算所有单词之间的注意⼒关系, 这个 attention 的计算是同步的, 可以实现并⾏.</p><p>注意: 不是越先进的模型就越⽆敌, 在很多具体的应⽤中 RNN&#x2F;LSTM 依然⼤有⽤武之地, 要具体问题具体分析</p><h4 id="0-1-预备知识-self-attention"><a href="#0-1-预备知识-self-attention" class="headerlink" title="0.1 预备知识-self attention"></a>0.1 预备知识-self attention</h4><p>（1）self-attention 的机制和原理<br>self-attention 是⼀种通过⾃身和⾃身进⾏关联的 attention 机制, 从⽽得到更好的 representation 来表达⾃身.<br>self-attention 是 attention 机制的⼀种特殊情况: 在 self-attention 中, Q&#x3D;K&#x3D;V, 序列中的每个单词(token)都和该序列中的其他所有单词 (token)进⾏ attention 规则的计算.<br>attention 机制计算的特点在于, 可以直接跨越⼀句话中不同距离的 token, 可以远距离的学习到序列的知识依赖和语序结构.</p><ul><li>从上图中可以看到, self-attention 可以远距离的捕捉到语义层⾯的特征(it 的指代对象是 animal). </li><li>应⽤传统的 RNN, LSTM, 在获取⻓距离语义特征和结构特征的时候, 需要按照序列顺序依次 计算, 距离越远的联系信息的损耗越⼤, 有效提取和捕获的可能性越⼩.</li><li>但是应⽤ self-attention 时, 计算过程中会直接将句⼦中任意两个 token 的联系通过⼀个计算 步骤直接联系起来</li></ul><p>（2）关于 self-attention 为什么要使⽤(Q, K, V)三元组⽽不是其他形式</p><p>⾸先⼀条就是从分析的⻆度看, 查询 Query 是⼀条独⽴的序列信息, 通过关键词 Key的提示作⽤, 得到最终语义的真实值 Value 表达, 数学意义更充分, 完备. </p><p>这⾥不使⽤(K, V)或者(V)没有什么必须的理由, 也没有相关的论⽂来严格阐述⽐较试验的结果差异, 所以可以作为开放性问题未来去探索, 只要明确在经典 self-attention实现中⽤的是三元组就好。</p><hr><h3 id="1-Transformer架构处理流程"><a href="#1-Transformer架构处理流程" class="headerlink" title="1. Transformer架构处理流程"></a>1. Transformer架构处理流程</h3><p>Transformer的核心是其编码器-解码器架构</p><p>两个关键组件之间的共生关系，分别负责处理输入序列和生成输出序列。</p><p>编码器和解码器中的每一层都包含相同的子层，包括自注意力机制和前馈网络。</p><p>这种架构不仅有助于全面理解输入序列，而且能够生成上下文丰富的输出序列。</p><p><img src="https://raw.gitmirror.com/YUTING0907/PicGo/main/img20250113205206.png"></p><h4 id="1-1编码器-解码器架构"><a href="#1-1编码器-解码器架构" class="headerlink" title="1.1编码器-解码器架构"></a><strong>1.1编码器-解码器架构</strong></h4><p>Transformer的核心是其编码器-解码器架构——两个关键组件之间的共生关系，分别负责处理输入序列和生成输出序列。编码器和解码器中的每一层都包含相同的子层，包括自注意力机制和前馈网络。这种架构不仅有助于全面理解输入序列，而且能够生成上下文丰富的输出序列。</p><h4 id="1-2-Encoder的处理阶段"><a href="#1-2-Encoder的处理阶段" class="headerlink" title="1.2 Encoder的处理阶段"></a><strong>1.2 Encoder的处理阶段</strong></h4><p>分别为：输入阶段 –&gt; 核心处理阶段 –&gt; 残差与归一化阶段</p><p><strong>输入阶段</strong></p><p><strong>1)初始输入</strong></p><p>整个 Encoder 部分由 6 个相同的子模块按顺序连接构成。第一个 Encoder 子模块接收来自<strong>嵌入（Input Embedding）和位置编码（Position Embedding）组合后的输入（inputs）</strong>。这里的输入嵌入通常是将输入的原始数据（比如文本中的单词等）转化为向量表示，而位置编码则是为了让模型能够捕捉到输入序列中元素的位置信息，因为标准的向量表示本身没有位置概念。</p><p><strong>(2)后续 Encoder 输入</strong></p><p>除了第一个 Encoder 之外的其他 Encoder 子模块，它们从<strong>前一个</strong> Encoder 接收相应的输入（inputs），这样就形成了一个顺序传递信息的链路。</p><p><strong>核心处理阶段</strong></p><p><strong>(1)多头自注意力层处理</strong></p><p>每个 Encoder 子模块在接收到输入后，首先会将其传递到<strong>多头自注意力层（Multi-Head Self-Attention layer）</strong>。在这一层中，通过多头自注意力机制（如前面所述，查询、键、值都来自同一个输入序列自身）去计算输入序列不同位置之间的关联关系，生成相应的自注意力输出。</p><p><strong>(2)前馈层处理</strong></p><p>自注意力层的输出紧接着被传递到<strong>前馈层（Feedforward layer）</strong>。前馈层一般是<strong>由全连接网络等构成</strong>，对自注意力层输出的特征做进一步的<strong>非线性变换</strong>，提取更复杂、高层次的特征，然后将其输出向上发送到下一个编码器（如果不是最后一个 Encoder 的话），以便后续 Encoder 子模块继续进行处理。</p><p><strong>残差与归一化阶段</strong></p><p><strong>(1)残差连接（Residual Connection）</strong></p><p>自注意力层和前馈子层（Feedforward sublayer）均配备了残差快捷链路。从网络拓扑结构来看，这种连接方式构建了一种并行通路，使得<strong>输入信号能够以残差的形式</strong>参与到每一层的输出计算中。</p><p>对于自注意力层，其<strong>输入会与自注意力层的输出进行相加操作</strong>（ 假设自注意力层输入为 x，输出为 y，经过残差连接后变为 x + y ）</p><p>同样，前馈层的输入也会和前馈层的输出进行相加。<strong>残差连接</strong>（Residual Connection）有助于缓解深度网络训练过程中的梯度消失或梯度爆炸问题，使得网络能够更容易地训练深层模型，并且能够让信息更顺畅地在网络中传递。</p><p><strong>(2)层归一化（Layer Norm）</strong></p><p>在残差连接之后，紧跟着会进行层归一化操作。<strong>层归一化是对每一层的神经元的输入进行归一化处理</strong>，它可以加速网络的收敛速度、提高模型的泛化能力等，使得模型训练更加稳定、高效。经过层归一化后的结果就是当前 Encoder 子模块最终的输出，然后传递给下一个 Encoder 子模块或者后续的其他模块（比如在 Encoder-Decoder 架构中传递给 Decoder 部分等情况）。</p><h4 id="1-3-Decoder解码流程"><a href="#1-3-Decoder解码流程" class="headerlink" title="1.3 Decoder解码流程"></a>1.3 Decoder解码流程</h4><ol><li><p>输出嵌入的右向偏移</p><p>在开始处理输入序列之前，模型对输出嵌入进行向右偏移一个位置，确保在训练阶段，解码器内的每个符号都能正确地获取之前生成符号的上下文信息。</p></li><li><p>位置编码的整合</p><p>仿照编码器的设计，模型将位置编码与输出嵌入相结合，以此保留符号的序列顺序信息。</p></li><li><p>带掩码的多头自注意力机制</p><p>解码器利用带掩码的多头自注意力机制，专注于输入序列的相关片段以及之前产生的符号。在训练过程中，通过掩码技术，防止模型对未来符号的预知，确保每个符号仅能参考其之前的符号。</p></li><li><p>编码器-解码器注意力交互</p><p>除了带掩码的自注意力机制外，解码器还融合了编码器-解码器注意力交互，这使得解码器能够聚焦于输入序列的重要部分，进而生成受输入语境影响的输出符号。</p></li><li><p>基于位置的前馈网络</p><p>在自注意力层之后，解码器对每个符号独立施加位置编码的前馈网络。该网络旨在捕捉输入和已生成符号之间的复杂模式与关联，以助力精确输出序列的构建。</p></li></ol><p><strong>Decoder 部分相比于 Encoder ，其结构中增加了一个名为“Mask”的多头注意力子层</strong>。与标准的多头注意力机制中的缩放点积注意力不同，<strong>Mask-Multi-Head-Attention</strong>在应用缩放操作之后引入了一个<strong>Mask步骤</strong>。</p><p>这一操作的必要性源于解码过程中的<strong>特性</strong>：解码并非一次性完成，而是按时间步<strong>逐个生成输出</strong>。在生成某个特定时间步的输出时，模型不应访问该时间步之后的信息，因此通过Mask操作来隐藏未来的序列元素，确保解码过程的一致性和正确性。</p><p><strong>在解码时的流程为：</strong></p><ul><li>假设当前已经解码的序列为 s1,s2,…,st−1<em>s</em>1,<em>s</em>2,…,<em>s**t</em>−1 把该序列做词向量和位置向量嵌入</li><li>对上述向量做 Masked Multi-Head Attention，把得到的结果作为 Q</li><li>Encoder 端的输出向量看做 K，V</li><li>结合 Q，K，V 做 Multi-Head Attention 和 Feed-Forward Networks 等操作</li><li>重复 decoder 部分 的子结构得到输出，而后解码得到输出词的概率</li></ul><hr><h3 id="2-Transformer-各个模块细节"><a href="#2-Transformer-各个模块细节" class="headerlink" title="2. Transformer 各个模块细节"></a>2. Transformer 各个模块细节</h3><h3 id="❤️2-1Encoder模块"><a href="#❤️2-1Encoder模块" class="headerlink" title="❤️2.1Encoder模块"></a>❤️2.1Encoder模块</h3><ul><li><p>经典的Transformer架构中的Encoder模块包含6个Encorder Block。</p></li><li><p>每个 Encoder Block 包含两个⼦模块, 分别是<strong>多头⾃注意⼒层</strong>（Multi-Head Self-Attention）, 和<strong>前馈全连接层</strong>（Position-wise Feed-Forward Network）. </p></li><li><p><strong>多头⾃注意⼒层</strong>采⽤的是⼀种 Scaled Dot-Product Attention 的计算⽅式, 实验结果表 明, Multi-head 可以在更细致的层⾯上提取不同 head 的特征, ⽐单⼀head 提取特征的 效果更佳.</p></li><li><p><strong>前馈全连接层</strong>是由两个全连接层组成, 线性变换中间增添⼀个 Relu 激活函数, 具体的 维度采⽤ 4 倍关系, 即多头⾃注意⼒的 d_model&#x3D;512, 则层内的变换维度d_ff&#x3D;2048</p></li></ul><p>Multi-Head Self-Attention<strong>由 Scaled Dot-product Attention 和 Multi-Head Attention 以及 Self Attention 和 Add &amp; Norm 组成。</strong></p><h4 id="2-1-1多头⾃注意⼒层（Multi-Head-Self-Attention）"><a href="#2-1-1多头⾃注意⼒层（Multi-Head-Self-Attention）" class="headerlink" title="2.1.1多头⾃注意⼒层（Multi-Head Self-Attention）"></a>2.1.1<strong>多头⾃注意⼒层</strong>（Multi-Head Self-Attention）</h4><p>(1）采⽤ Multi-head Attention 的原因<br>原始论⽂中提到进⾏ Multi-head Attention 的原因是将模型分为多个头, 可以形成多个⼦空间间, 让模型去关注不同⽅⾯的信息, 最后再将各个⽅⾯的信息综合起来得到更好的效果.<br>多个头进⾏ attention 计算最后再综合起来, 类似于 CNN 中采⽤多个卷积核的作⽤, 不同的卷 积核提取不同的特征, 关注不同的部分, 最后再进⾏融合. </p><p>直观上讲, 多头注意⼒有助于神经⽹络捕捉到更丰富的特征信息.</p><p>（2）Multi-head Attention 的计算⽅式 </p><p>1.Multi-head Attention 和单⼀ head 的 Attention 唯⼀的区别就在于, 其对特征张量的最后⼀个维度进⾏了分割, ⼀般是对词嵌⼊的 embedding_dim&#x3D;512 进⾏切割成 head&#x3D;8, 这样每⼀个 head 的嵌⼊维度就是 512&#x2F;8&#x3D;64, 后续的 Attention 计算公式完全⼀致, 只不过是在 64 这个维度上进⾏⼀系列的矩阵运算⽽已。</p><p>2.在 head&#x3D;8 个头上分别进⾏注意⼒规则的运算后, 简单采⽤拼接 concat 的⽅式对结果张量进 ⾏融合就得到了 Multi-head Attention 的计算结果</p><p>Self-attention 归⼀化和放缩</p><p>训练上的意义：随着词嵌⼊维度 d_k 的增⼤, q * k 点积后的结果也会增⼤, 在训练时会将 softmax 函数推⼊梯度⾮常⼩的区域, 可能出现梯度消失的现象, 造成模型收敛困难. </p><p>数学上的意义: 假设 q 和 k 的统计变量是满⾜标准正态分布的独⽴随机变量, 意味着q 和 k 满⾜均 值为 0, ⽅差为 1。 那么 q 和 k 的点积结果就是均值为 0, ⽅差为 , 为了抵消这种⽅差被放⼤  倍的影响, 在计算中主动将点积缩放 , 这样点积后的结果依然满⾜均值为 0, ⽅差为 1。</p><p>最终的结论：通过数学上的技巧将⽅差控制在 1, 也就有效的控制了点积结果的发散, 也就控制了对应的梯度消失的问题!</p><h4 id="2-1-2-Add-amp-Norm-模块"><a href="#2-1-2-Add-amp-Norm-模块" class="headerlink" title="2.1.2 Add &amp; Norm 模块"></a>2.1.2 Add &amp; Norm 模块</h4><ul><li>Add &amp; Norm 模块接在每⼀个 Encoder Block 和 Decoder Block 中的每⼀个⼦<br>层的后⾯. </li><li>对于每⼀个 Encoder Block, ⾥⾯的两个⼦层后⾯都有 Add &amp; Norm. </li><li>对于每⼀个 Decoder Block, ⾥⾯的三个⼦层后⾯都有 Add &amp; Norm. </li><li>Add 表示残差连接, 作⽤是为了将信息⽆损耗的传递的更深, 来增强模型的拟合能⼒. </li><li>Norm 表示 LayerNorm, 层级别的数值标准化操作, 作⽤是防⽌参数过⼤过⼩导致的学习过程异常 , 模型收敛特别慢的问题.</li></ul><h4 id="2-1-3-位置编码器-Positional-Encoding"><a href="#2-1-3-位置编码器-Positional-Encoding" class="headerlink" title="2.1.3 位置编码器 Positional Encoding"></a>2.1.3 位置编码器 Positional Encoding</h4><p>Transformer 中采⽤三⻆函数来计算位置编码.<br>因为三⻆函数是周期性函数, 不受序列⻓度的限制, ⽽且这种计算⽅式可以对序列中不同位置的编码的重要程度同等看待</p><h3 id="❤️2-2-Decoder模块"><a href="#❤️2-2-Decoder模块" class="headerlink" title="❤️2.2 Decoder模块"></a>❤️2.2 Decoder模块</h3><ul><li>经典的 Transformer 架构中的 Decoder 模块包含 6 个 Decoder Block. </li><li>每个 Decoder Block 包含 3 个⼦模块, 分别是多头⾃注意⼒层, Encoder-Decoder<br>Attention 层, 和前馈全连接层. <ul><li>多头⾃注意⼒层采⽤和 Encoder 模块⼀样的 Scaled Dot-Product<br>Attention 的计算⽅ 式, 最⼤的 区别在于需要添加 look-ahead-mask, 即遮掩”未来的信息”.</li><li>Encoder-Decoder Attention 层和上⼀层多头⾃注意⼒层最主要的区别在于Q !&#x3D; K &#x3D; V, 矩阵 Q 来源于上⼀层 Decoder Block 的输出, 同时 K, V 来源于 Encoder 端的输出. </li><li>前馈全连接层和 Encoder 中完全⼀样.</li></ul></li></ul><p>在 Transformer 结构中的 Decoder 模块的输⼊, 区分于不同的 Block, 最底层的Block 输⼊有其特殊的地⽅。第⼆层到第六层的输⼊⼀致, 都是上⼀层的输出和Encoder 的输出。</p><p>最底层的 Block 在训练阶段, 每⼀个 time step 的输⼊是上⼀个 time step 的输⼊加上真实标 签序列向后移⼀位. 具体来看, 就是每⼀个 time step 的输⼊序列会越来越⻓, 不断的将之前的 输⼊融合进来.</p><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs maxima">假设现在的真实标签序列等于<span class="hljs-string">&quot;How are you?&quot;</span>, <br>当<span class="hljs-built_in">time</span> <span class="hljs-keyword">step</span>=<span class="hljs-number">1</span>时, 输⼊张量为⼀个特殊的token, ⽐如<span class="hljs-string">&quot;SOS&quot;</span>; 当<span class="hljs-built_in">time</span> <span class="hljs-keyword">step</span>=<span class="hljs-number">2</span>时, 输⼊张量为<span class="hljs-string">&quot;SOS How&quot;</span>; <br>当<span class="hljs-built_in">time</span> <span class="hljs-keyword">step</span>=<span class="hljs-number">3</span>时, 输⼊张量为<span class="hljs-string">&quot;SOS How are&quot;</span>;<br>以此类推...<br></code></pre></td></tr></table></figure><p>最底层的 Block 在训练阶段, 真实的代码实现中, 采⽤的是 MASK 机制来模拟输⼊序列不断添 加的过程.</p><p>最底层的 Block 在预测阶段, 每⼀个 time step 的输⼊是从 time step&#x3D;0 开始, ⼀直到上⼀个 time step 的预测值的累积拼接张量. 具体来看, 也是随着每⼀个<br>time step 的输⼊序列会越来越⻓. 相⽐于训练阶段最⼤的不同是这⾥不断拼接进来的 token 是每⼀个 time step 的预测值, ⽽不是训练阶段每⼀个 time step 取得的 groud truth 值</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs routeros">当time <span class="hljs-attribute">step</span>=1时, 输⼊的<span class="hljs-attribute">input_tensor</span>=<span class="hljs-string">&quot;SOS&quot;</span>, 预测出来的输出值是<span class="hljs-attribute">output_tensor</span>=<span class="hljs-string">&quot;What&quot;</span>;<br>当time <span class="hljs-attribute">step</span>=2时, 输⼊的<span class="hljs-attribute">input_tensor</span>=<span class="hljs-string">&quot;SOS What&quot;</span>, 预测出来的输出值是<span class="hljs-attribute">output_tensor</span>=<span class="hljs-string">&quot;is&quot;</span>;<br>当time <span class="hljs-attribute">step</span>=3时, 输⼊的<span class="hljs-attribute">input_tensor</span>=<span class="hljs-string">&quot;SOS What is&quot;</span>, 预测出来的输出值是<span class="hljs-attribute">output_tensor</span>=<span class="hljs-string">&quot;the&quot;</span>;<br>当time <span class="hljs-attribute">step</span>=4时, 输⼊的<span class="hljs-attribute">input_tensor</span>=<span class="hljs-string">&quot;SOS What is the&quot;</span>, 预测出来的输出值是<span class="hljs-attribute">output_tensor</span>=<span class="hljs-string">&quot;matter&quot;</span>;<br>当time <span class="hljs-attribute">step</span>=5时, 输⼊的<span class="hljs-attribute">input_tensor</span>=<span class="hljs-string">&quot;SOS What is the matter&quot;</span>, 预测<br>出来的输出值是<span class="hljs-attribute">output_tensor</span>=<span class="hljs-string">&quot;?&quot;</span>;<br>当time <span class="hljs-attribute">step</span>=6时, 输⼊的<span class="hljs-attribute">input_tensor</span>=<span class="hljs-string">&quot;SOS What is the matter ?&quot;</span>, 预测出来的输出值是<span class="hljs-attribute">output_tensor</span>=<span class="hljs-string">&quot;EOS&quot;</span>, 代表句⼦的结束符, 说明解码结束, 预测结束.<br></code></pre></td></tr></table></figure><hr><h3 id="3-代码实现"><a href="#3-代码实现" class="headerlink" title="3. 代码实现"></a>3. 代码实现</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> math<br><span class="hljs-keyword">import</span> torch<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">import</span> torch.nn <span class="hljs-keyword">as</span> nn<br><span class="hljs-keyword">import</span> torch.optim <span class="hljs-keyword">as</span> optim<br><span class="hljs-keyword">import</span> torch.utils.data <span class="hljs-keyword">as</span> Data<br><br>            <span class="hljs-comment"># Encoder_input    Decoder_input          Decoder_output(预测下一个字符)</span><br>sentences = [[<span class="hljs-string">&#x27;我 是 学 生 P&#x27;</span> , <span class="hljs-string">&#x27;S I am a student&#x27;</span>   , <span class="hljs-string">&#x27;I am a student E&#x27;</span>],         <span class="hljs-comment"># S: 开始符号</span><br>             [<span class="hljs-string">&#x27;我 喜 欢 学 习&#x27;</span>, <span class="hljs-string">&#x27;S I like learning P&#x27;</span>, <span class="hljs-string">&#x27;I like learning P E&#x27;</span>],      <span class="hljs-comment"># E: 结束符号</span><br>             [<span class="hljs-string">&#x27;我 是 男 生 P&#x27;</span> , <span class="hljs-string">&#x27;S I am a boy&#x27;</span>       , <span class="hljs-string">&#x27;I am a boy E&#x27;</span>]]             <span class="hljs-comment"># P: 占位符号，如果当前句子不足固定长度用P占位 pad补0</span><br><br><span class="hljs-comment"># 以下的一个batch中是sentences[0,1]</span><br>src_vocab = &#123;<span class="hljs-string">&#x27;P&#x27;</span>:<span class="hljs-number">0</span>, <span class="hljs-string">&#x27;我&#x27;</span>:<span class="hljs-number">1</span>, <span class="hljs-string">&#x27;是&#x27;</span>:<span class="hljs-number">2</span>, <span class="hljs-string">&#x27;学&#x27;</span>:<span class="hljs-number">3</span>, <span class="hljs-string">&#x27;生&#x27;</span>:<span class="hljs-number">4</span>, <span class="hljs-string">&#x27;喜&#x27;</span>:<span class="hljs-number">5</span>, <span class="hljs-string">&#x27;欢&#x27;</span>:<span class="hljs-number">6</span>,<span class="hljs-string">&#x27;习&#x27;</span>:<span class="hljs-number">7</span>,<span class="hljs-string">&#x27;男&#x27;</span>:<span class="hljs-number">8</span>&#125;   <span class="hljs-comment"># 词源字典  字：索引</span><br>src_idx2word = &#123;src_vocab[key]: key <span class="hljs-keyword">for</span> key <span class="hljs-keyword">in</span> src_vocab&#125;<br>src_vocab_size = <span class="hljs-built_in">len</span>(src_vocab)                 <span class="hljs-comment"># 字典字的个数</span><br><br><span class="hljs-comment"># 生成目标中 &#x27;S&#x27;是0填充的</span><br>tgt_vocab = &#123;<span class="hljs-string">&#x27;S&#x27;</span>:<span class="hljs-number">0</span>, <span class="hljs-string">&#x27;E&#x27;</span>:<span class="hljs-number">1</span>, <span class="hljs-string">&#x27;P&#x27;</span>:<span class="hljs-number">2</span>, <span class="hljs-string">&#x27;I&#x27;</span>:<span class="hljs-number">3</span>, <span class="hljs-string">&#x27;am&#x27;</span>:<span class="hljs-number">4</span>, <span class="hljs-string">&#x27;a&#x27;</span>:<span class="hljs-number">5</span>, <span class="hljs-string">&#x27;student&#x27;</span>:<span class="hljs-number">6</span>, <span class="hljs-string">&#x27;like&#x27;</span>:<span class="hljs-number">7</span>, <span class="hljs-string">&#x27;learning&#x27;</span>:<span class="hljs-number">8</span>, <span class="hljs-string">&#x27;boy&#x27;</span>:<span class="hljs-number">9</span>&#125;<br>idx2word = &#123;tgt_vocab[key]: key <span class="hljs-keyword">for</span> key <span class="hljs-keyword">in</span> tgt_vocab&#125;                               <span class="hljs-comment"># 把目标字典转换成 索引：字的形式</span><br>tgt_vocab_size = <span class="hljs-built_in">len</span>(tgt_vocab)                                                     <span class="hljs-comment"># 目标字典尺寸</span><br><br>src_len = <span class="hljs-built_in">len</span>(sentences[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>].split(<span class="hljs-string">&quot; &quot;</span>))                                           <span class="hljs-comment"># Encoder输入的最大长度 5</span><br>tgt_len = <span class="hljs-built_in">len</span>(sentences[<span class="hljs-number">0</span>][<span class="hljs-number">1</span>].split(<span class="hljs-string">&quot; &quot;</span>))                                           <span class="hljs-comment"># Decoder输入输出最大长度 5</span><br><br><span class="hljs-comment"># 把sentences 转换成字典索引</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">make_data</span>(<span class="hljs-params">sentences</span>):<br>    enc_inputs, dec_inputs, dec_outputs = [], [], []<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(sentences)):    <span class="hljs-comment"># 遍历每句话</span><br>      enc_input = [[src_vocab[n] <span class="hljs-keyword">for</span> n <span class="hljs-keyword">in</span> sentences[i][<span class="hljs-number">0</span>].split()]]    <span class="hljs-comment"># Encoder_input 索引</span><br>      dec_input = [[tgt_vocab[n] <span class="hljs-keyword">for</span> n <span class="hljs-keyword">in</span> sentences[i][<span class="hljs-number">1</span>].split()]]    <span class="hljs-comment"># Decoder_input 索引</span><br>      dec_output = [[tgt_vocab[n] <span class="hljs-keyword">for</span> n <span class="hljs-keyword">in</span> sentences[i][<span class="hljs-number">2</span>].split()]]    <span class="hljs-comment"># Decoder_output 索引</span><br>      enc_inputs.extend(enc_input)<br>      dec_inputs.extend(dec_input)<br>      dec_outputs.extend(dec_output)<br>    <span class="hljs-keyword">return</span> torch.LongTensor(enc_inputs), torch.LongTensor(dec_inputs), torch.LongTensor(dec_outputs)<br>enc_inputs, dec_inputs, dec_outputs = make_data(sentences)    <span class="hljs-comment"># [3,5], [3,5], [3,5] 只是恰巧长度都为5，enc_inputs、dec_inputs长度可以不一样</span><br><span class="hljs-built_in">print</span>(enc_inputs)<br><span class="hljs-built_in">print</span>(dec_inputs)<br><span class="hljs-built_in">print</span>(dec_outputs)<br><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">sentences 里一共有三个训练数据，中文-&gt;英文。把Encoder_input、Decoder_input、Decoder_output转换成字典索引，</span><br><span class="hljs-string">例如&quot;学&quot;-&gt;3、“student”-&gt;6。再把数据转换成batch大小为2的分组数据，3句话一共可以分成两组，一组2句话、一组1句话。src_len表示中文句子</span><br><span class="hljs-string">固定最大长度，tgt_len 表示英文句子固定最大长度。</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-comment">#自定义数据集函数</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyDataSet</span>(Data.Dataset):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, enc_inputs, dec_inputs, dec_outputs</span>):<br>        <span class="hljs-built_in">super</span>(MyDataSet, <span class="hljs-variable language_">self</span>).__init__()<br>        <span class="hljs-variable language_">self</span>.enc_inputs = enc_inputs<br>        <span class="hljs-variable language_">self</span>.dec_inputs = dec_inputs<br>        <span class="hljs-variable language_">self</span>.dec_outputs = dec_outputs<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__len__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">self</span>.enc_inputs.shape[<span class="hljs-number">0</span>]<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__getitem__</span>(<span class="hljs-params">self, idx</span>):<br>        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">self</span>.enc_inputs[idx], <span class="hljs-variable language_">self</span>.dec_inputs[idx], <span class="hljs-variable language_">self</span>.dec_outputs[idx]<br><br>loader = Data.DataLoader(MyDataSet(enc_inputs, dec_inputs, dec_outputs), <span class="hljs-number">2</span>, <span class="hljs-literal">False</span>)<br><br>d_model = <span class="hljs-number">512</span>   <span class="hljs-comment"># 字 Embedding 的维度</span><br>d_ff = <span class="hljs-number">2048</span>     <span class="hljs-comment"># 前向传播隐藏层维度</span><br>d_k = d_v = <span class="hljs-number">64</span>  <span class="hljs-comment"># K(=Q), V的维度. V的维度可以和K=Q不一样</span><br>n_layers = <span class="hljs-number">6</span>    <span class="hljs-comment"># 有多少个encoder和decoder</span><br>n_heads = <span class="hljs-number">8</span>     <span class="hljs-comment"># Multi-Head Attention设置为8</span><br><br><span class="hljs-comment"># 位置嵌入，position Embedding</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">PositionalEncoding</span>(nn.Module):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, d_model, dropout=<span class="hljs-number">0.1</span>, max_len=<span class="hljs-number">5000</span></span>):<br>        <span class="hljs-built_in">super</span>(PositionalEncoding,<span class="hljs-variable language_">self</span>).__init__()<br>        <span class="hljs-variable language_">self</span>.dropout = nn.Dropout(p=dropout)<br>        pos_table = np.array([<br>        [pos / np.power(<span class="hljs-number">10000</span>, <span class="hljs-number">2</span> * i / d_model) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(d_model)]<br>        <span class="hljs-keyword">if</span> pos != <span class="hljs-number">0</span> <span class="hljs-keyword">else</span> np.zeros(d_model) <span class="hljs-keyword">for</span> pos <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(max_len)])<br>        pos_table[<span class="hljs-number">1</span>:, <span class="hljs-number">0</span>::<span class="hljs-number">2</span>] = np.sin(pos_table[<span class="hljs-number">1</span>:, <span class="hljs-number">0</span>::<span class="hljs-number">2</span>])                  <span class="hljs-comment"># 字嵌入维度为偶数时</span><br>        pos_table[<span class="hljs-number">1</span>:, <span class="hljs-number">1</span>::<span class="hljs-number">2</span>] = np.cos(pos_table[<span class="hljs-number">1</span>:, <span class="hljs-number">1</span>::<span class="hljs-number">2</span>])                  <span class="hljs-comment"># 字嵌入维度为奇数时</span><br>        <span class="hljs-variable language_">self</span>.pos_table = torch.FloatTensor(pos_table)               <span class="hljs-comment"># enc_inputs: [seq_len, d_model]</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">forward</span>(<span class="hljs-params">self,enc_inputs</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;_summary_</span><br><span class="hljs-string"></span><br><span class="hljs-string">        Args:</span><br><span class="hljs-string">            enc_inputs (_type_): nn.embedding() [seq_len, batch_size, d_model]</span><br><span class="hljs-string"></span><br><span class="hljs-string">        Returns:</span><br><span class="hljs-string">            _type_: _description_</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        enc_inputs += <span class="hljs-variable language_">self</span>.pos_table[:enc_inputs.size(<span class="hljs-number">1</span>),:]   <span class="hljs-comment"># 两个embedding相加，参考https://www.cnblogs.com/d0main/p/10447853.html</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">self</span>.dropout(enc_inputs)<br><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">Mask句子中没有实际意义的占位符，例如’我 是 学 生 P’ ，P对应句子没有实际意义，所以需要被Mask，Encoder_input 和Decoder_input占位符</span><br><span class="hljs-string">都需要被Mask。</span><br><span class="hljs-string">这就是为了处理，句子不一样长，但是输入有需要定长，不够长的pad填充，但是计算又不需要这个pad，所以mask掉</span><br><span class="hljs-string"></span><br><span class="hljs-string">这个函数最核心的一句代码是 seq_k.data.eq(0)，这句的作用是返回一个大小和 seq_k 一样的 tensor，只不过里面的值只有 True 和 False。如</span><br><span class="hljs-string">果 seq_k 某个位置的值等于 0，那么对应位置就是 True，否则即为 False。举个例子，输入为 seq_data = [1, 2, 3, 4, 0]，</span><br><span class="hljs-string">seq_data.data.eq(0) 就会返回 [False, False, False, False, True]</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_attn_pad_mask</span>(<span class="hljs-params">seq_q, seq_k</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    此时字还没表示成嵌入向量</span><br><span class="hljs-string">    句子0填充</span><br><span class="hljs-string">    seq_q中的每个字都要“看”一次seq_k中的每个字</span><br><span class="hljs-string">    Args: 在Encoder_self_att中，seq_q，seq_k 就是enc_input</span><br><span class="hljs-string">            seq_q (_type_): [batch, enc_len] [batch, 中文句子长度]</span><br><span class="hljs-string">            seq_k (_type_): [batch, enc_len] [batch, 中文句子长度]</span><br><span class="hljs-string">          在Decoder_self_att中，seq_q，seq_k 就是dec_input, dec_input</span><br><span class="hljs-string">            seq_q (_type_): [batch, tgt_len] [batch, 英文句子长度]</span><br><span class="hljs-string">            seq_k (_type_): [batch, tgt_len] [batch, 英文句子长度]</span><br><span class="hljs-string">          在Decoder_Encoder_att中，seq_q，seq_k 就是dec_input, enc_input</span><br><span class="hljs-string">            seq_q (_type_): [batch, tgt_len] [batch, 中文句子长度]</span><br><span class="hljs-string">            seq_k (_type_): [batch, enc_len] [batch, 英文句子长度]</span><br><span class="hljs-string"></span><br><span class="hljs-string">    Returns:</span><br><span class="hljs-string">        _type_: [batch_size, len_q, len_k]  元素：T or F</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    batch_size, len_q = seq_q.size()<span class="hljs-comment"># seq_q 用于升维，为了做attention，mask score矩阵用的</span><br>    batch_size, len_k = seq_k.size()<br>    pad_attn_mask = seq_k.data.eq(<span class="hljs-number">0</span>) <span class="hljs-comment"># 判断 输入那些词index含有P(=0),用1标记 [len_k, d_model]元素全为T,F</span><br>    pad_attn_mask = pad_attn_mask.unsqueeze(<span class="hljs-number">1</span>) <span class="hljs-comment">#[batch, 1, len_k]</span><br>    pad_attn_mask = pad_attn_mask.expand(batch_size, len_q, len_k)    <span class="hljs-comment"># 扩展成多维度   [batch_size, len_q, len_k]</span><br>    <span class="hljs-keyword">return</span>  pad_attn_mask<br><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string"># Decoder输入Mask</span><br><span class="hljs-string">用来Mask未来输入信息，返回的是一个上三角矩阵。比如我们在中英文翻译时候，会先把&quot;我是学生&quot;整个句子输入到Encoder中，得到最后一层的输出</span><br><span class="hljs-string">后，才会在Decoder输入&quot;S I am a student&quot;（s表示开始）,但是&quot;S I am a student&quot;这个句子我们不会一起输入，而是在T0时刻先输入&quot;S&quot;预测，</span><br><span class="hljs-string">预测第一个词&quot;I&quot;；在下一个T1时刻，同时输入&quot;S&quot;和&quot;I&quot;到Decoder预测下一个单词&quot;am&quot;；然后在T2时刻把&quot;S,I,am&quot;同时输入到Decoder预测下一个单</span><br><span class="hljs-string">词&quot;a&quot;，依次把整个句子输入到Decoder,预测出&quot;I am a student E&quot;。</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_attn_subsequence_mask</span>(<span class="hljs-params">seq</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    生成上三角Attention矩阵</span><br><span class="hljs-string">    Args:</span><br><span class="hljs-string">        seq (_type_): [batch_size, tgt_len]</span><br><span class="hljs-string"></span><br><span class="hljs-string">    Returns:</span><br><span class="hljs-string">        _type_: _description_</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    attn_shape = [seq.size(<span class="hljs-number">0</span>), seq.size(<span class="hljs-number">1</span>), seq.size(<span class="hljs-number">1</span>)]          <span class="hljs-comment"># 生成上三角矩阵,[batch_size, tgt_len, tgt_len]</span><br>    subsequence_mask = np.triu(np.ones(attn_shape), k=<span class="hljs-number">1</span>)    <span class="hljs-comment"># 得到主对角线向上平移一个距离的对角线（下三角包括对角线全为0）</span><br>    subsequence_mask = torch.from_numpy(subsequence_mask).byte()  <span class="hljs-comment">#  [batch_size, tgt_len, tgt_len]</span><br>    <span class="hljs-keyword">return</span> subsequence_mask<br><br><span class="hljs-comment"># 计算注意力信息、残差和归一化</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ScaledDotProductAttention</span>(nn.Module):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-built_in">super</span>(ScaledDotProductAttention, <span class="hljs-variable language_">self</span>).__init__()<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">forward</span>(<span class="hljs-params">self, Q, K, V, attn_mask</span>):<br>        <span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">        注意！： d_q和d_k一定一样</span><br><span class="hljs-string">                d_v和d_q、d_k可以不一样</span><br><span class="hljs-string">                len_k和len_v的长度一定是一样的(翻译任务中，k,v要求都从中文文本生成)</span><br><span class="hljs-string">        :param Q: [batch_size, n_heads, len_q, d_k]</span><br><span class="hljs-string">        :param K: [batch_size, n_heads, len_k, d_k]  len_k和len_v的长度一定是一样的</span><br><span class="hljs-string">        :param V: [batch_size, n_heads, len_v, d_v(和d_q、d_k不一定一样，但d_q和d_k可以一样)]</span><br><span class="hljs-string">        :param attn_mask: [batch_size, n_heads, len_q, len_k] attn_mask此时还是T or F</span><br><span class="hljs-string"></span><br><span class="hljs-string">        :return: [batch_size, n_heads, len_q, d_v], [batch_size, n_heads, len_q, len_k]</span><br><span class="hljs-string">        &#x27;&#x27;&#x27;</span><br>        scores = torch.matmul(Q, K.transpose(-<span class="hljs-number">1</span>, -<span class="hljs-number">2</span>)) / np.sqrt(d_k)   <span class="hljs-comment"># scores : [batch_size, n_heads, len_q, len_k]</span><br>        scores.masked_fill_(attn_mask, -<span class="hljs-number">1e9</span>)                           <span class="hljs-comment"># 如果是停用词P就等于负无穷 在原tensor修改</span><br>        attn = nn.Softmax(dim=-<span class="hljs-number">1</span>)(scores)                              <span class="hljs-comment"># PADmask位置分数变为0</span><br>        <span class="hljs-comment"># [batch_size, n_heads, len_q, len_k] * [batch_size, n_heads, len_v, d_v] = [batch_size, n_heads, len_q, d_v]</span><br>        context = torch.matmul(attn, V)    <span class="hljs-comment"># 注意！len_k和len_v的长度一定是一样的</span><br>        <span class="hljs-keyword">return</span> context, attn<br><br><span class="hljs-comment"># 多头自注意力机制</span><br><span class="hljs-comment"># 拼接之后 输入fc层 加入残差 Norm</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">MultiHeadAttention</span>(nn.Module):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-built_in">super</span>(MultiHeadAttention, <span class="hljs-variable language_">self</span>).__init__()<br>        <span class="hljs-variable language_">self</span>.W_Q = nn.Linear(d_model, d_k * n_heads, bias=<span class="hljs-literal">False</span>)<br>        <span class="hljs-variable language_">self</span>.W_K = nn.Linear(d_model, d_k * n_heads, bias=<span class="hljs-literal">False</span>)<br>        <span class="hljs-variable language_">self</span>.W_V = nn.Linear(d_model, d_v * n_heads, bias=<span class="hljs-literal">False</span>)<br><br>        <span class="hljs-variable language_">self</span>.fc = nn.Linear(n_heads * d_v, d_model, bias=<span class="hljs-literal">False</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">forward</span>(<span class="hljs-params">self, input_Q, input_K, input_V, attn_mask</span>):<br>        <span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">        enc_self_attn_mask里 input_Q,input_K,input_V: 词嵌入、位置嵌入之后的矩阵都是 [batch_size, src_len, d_model]</span><br><span class="hljs-string">        dec_self_attn_mask里 input_Q,input_K,input_V: 词嵌入、位置嵌入之后的矩阵都是 [batch_size, tag_len, d_model]</span><br><span class="hljs-string">        dec_enc_attn_mask里 input_Q,input_K,input_V: 词嵌入、位置嵌入之后的矩阵 </span><br><span class="hljs-string">            input_Q: dec_input [batch_size, tag_len, d_model]</span><br><span class="hljs-string">            input_K: enc_output [batch_size, src_len, d_model]</span><br><span class="hljs-string">            input_V: enc_output [batch_size, src_len, d_model]</span><br><span class="hljs-string">        :param attn_mask:</span><br><span class="hljs-string">                        enc_self_attn_mask: [batch_size, src_len, src_len]元素全为T or F, T的位置是要掩码(PAD填充)的位置</span><br><span class="hljs-string">                        dec_self_attn_mask: [batch_size, tgt_len, tgt_len]元素全为T or F, T的位置是要掩码(PAD填充)的位置</span><br><span class="hljs-string">                        dec_enc_attn_mask: [batch_size, tgt_len, src_len]元素全为T or F, T的位置是要掩码(PAD填充)的位置</span><br><span class="hljs-string">        :return: [batch_size, len_q, d_model]</span><br><span class="hljs-string">        &#x27;&#x27;&#x27;</span><br>        residual, batch_size = input_Q, input_Q.size(<span class="hljs-number">0</span>)<br>        Q = <span class="hljs-variable language_">self</span>.W_Q(input_Q).view(batch_size, -<span class="hljs-number">1</span>, n_heads, d_k).transpose(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>)  <span class="hljs-comment"># Q: [batch_size, n_heads, len_q, d_k]</span><br>        K = <span class="hljs-variable language_">self</span>.W_K(input_K).view(batch_size, -<span class="hljs-number">1</span>, n_heads, d_k).transpose(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>)  <span class="hljs-comment"># K: [batch_size, n_heads, len_k, d_k]</span><br>        V = <span class="hljs-variable language_">self</span>.W_V(input_V).view(batch_size, -<span class="hljs-number">1</span>, n_heads, d_v).transpose(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>)  <span class="hljs-comment"># V: [batch_size, n_heads, len_v, d_v]</span><br>        attn_mask = attn_mask.unsqueeze(<span class="hljs-number">1</span>).repeat(<span class="hljs-number">1</span>, n_heads, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>)              <span class="hljs-comment"># attn_mask : [batch_size, n_heads, len_q, len_k]</span><br>        context, attn = ScaledDotProductAttention()(Q, K, V, attn_mask)          <span class="hljs-comment"># context: [batch_size, n_heads, len_q, d_v]</span><br>                                                                                 <span class="hljs-comment"># attn: [batch_size, n_heads, len_q, len_k]</span><br>        <span class="hljs-comment"># 拼接多头的结果</span><br>        context = context.transpose(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>).reshape(batch_size, -<span class="hljs-number">1</span>, n_heads * d_v) <span class="hljs-comment"># context: [batch_size, len_q, n_heads * d_v(d_model)]</span><br>        output = <span class="hljs-variable language_">self</span>.fc(context)                                                <span class="hljs-comment"># d_v fc之后变成d_model -&gt; [batch_size, len_q, d_model]</span><br>        <span class="hljs-keyword">return</span> nn.LayerNorm(d_model)(output + residual), attn<br><br><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">## 前馈神经网络</span><br><span class="hljs-string">输入inputs ，经过两个全连接层，得到的结果再加上 inputs （残差），再做LayerNorm归一化。LayerNorm归一化可以理解层是把Batch中每一句话</span><br><span class="hljs-string">进行归一化。</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">FF</span>(nn.Module):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-built_in">super</span>(FF, <span class="hljs-variable language_">self</span>).__init__()<br>        <span class="hljs-variable language_">self</span>.fc = nn.Sequential(<br>            nn.Linear(d_model, d_ff, bias=<span class="hljs-literal">False</span>),<br>            nn.ReLU(),<br>            nn.Linear(d_ff, d_model, bias=<span class="hljs-literal">False</span>)<br>        )<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">forward</span>(<span class="hljs-params">self, inputs</span>):    <span class="hljs-comment"># inputs: [batch_size, seq_len, d_model]</span><br>        residual = inputs<br>        output = <span class="hljs-variable language_">self</span>.fc(inputs)<br>        <span class="hljs-keyword">return</span> nn.LayerNorm(d_model)(output + residual)   <span class="hljs-comment"># [batch_size, seq_len, d_model]</span><br><br><span class="hljs-comment">## encoder layer(block)</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">EncoderLayer</span>(nn.Module):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-built_in">super</span>(EncoderLayer, <span class="hljs-variable language_">self</span>).__init__()<br>        <span class="hljs-variable language_">self</span>.enc_self_attn = MultiHeadAttention()                  <span class="hljs-comment"># 多头注意力机制</span><br>        <span class="hljs-variable language_">self</span>.pos_ffn = FF()                                        <span class="hljs-comment"># 前馈神经网络</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">forward</span>(<span class="hljs-params">self, enc_inputs, enc_self_attn_mask</span>):             <span class="hljs-comment"># enc_inputs: [batch_size, src_len, d_model]</span><br>        <span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">        :param enc_inputs: [batch_size, src_len, d_model] 词嵌入、位置嵌入之后的输入矩阵</span><br><span class="hljs-string">        :param enc_self_attn_mask: [batch_size, src_len, src_len]元素全为T or F, T的是要掩码（PAD填充）的位置</span><br><span class="hljs-string">        :return:</span><br><span class="hljs-string">        &#x27;&#x27;&#x27;</span><br>        <span class="hljs-comment">#输入3个enc_inputs分别与W_q、W_k、W_v相乘得到Q、K、V                            # enc_self_attn_mask: [batch_size, src_len, src_len]</span><br>        enc_outputs, attn = <span class="hljs-variable language_">self</span>.enc_self_attn(enc_inputs, enc_inputs, enc_inputs,    <span class="hljs-comment"># enc_outputs: [batch_size, src_len, d_model],</span><br>                                               enc_self_attn_mask)                    <span class="hljs-comment"># attn: [batch_size, n_heads, src_len, src_len]</span><br>        <span class="hljs-comment"># 多头自注意力机制之后（Add &amp; Norm之后），进行FF(Add &amp; Norm)</span><br>        enc_outputs = <span class="hljs-variable language_">self</span>.pos_ffn(enc_outputs)                                       <span class="hljs-comment"># enc_outputs: [batch_size, src_len, d_model]</span><br>        <span class="hljs-keyword">return</span> enc_outputs, attn<br><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">## Encoder</span><br><span class="hljs-string">第一步，中文字索引进行Embedding，转换成512维度的字向量。</span><br><span class="hljs-string">第二步，在子向量上面加上位置信息。</span><br><span class="hljs-string">第三步，Mask掉句子中的占位符号。</span><br><span class="hljs-string">第四步，通过6层的encoder（上一层的输出作为下一层的输入）。</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Encoder</span>(nn.Module):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-built_in">super</span>(Encoder, <span class="hljs-variable language_">self</span>).__init__()<br>        <span class="hljs-variable language_">self</span>.src_emb = nn.Embedding(src_vocab_size, d_model)<br>        <span class="hljs-variable language_">self</span>.pos_emb = PositionalEncoding(d_model)<br>        <span class="hljs-variable language_">self</span>.layers = nn.ModuleList(<br>            [EncoderLayer() <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n_layers)]<br>        )<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">forward</span>(<span class="hljs-params">self, enc_inputs</span>):<br>        <span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">        enc_inputs: [batch_size, src_len] 元素是字典词index</span><br><span class="hljs-string">        &#x27;&#x27;&#x27;</span><br>        enc_outputs = <span class="hljs-variable language_">self</span>.src_emb(enc_inputs) <span class="hljs-comment"># [batch_size, src_len, d_model]</span><br>        enc_outputs = <span class="hljs-variable language_">self</span>.pos_emb(enc_outputs.transpose(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>)).transpose(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>) <span class="hljs-comment"># [batch_size, src_len, d_model]</span><br>        enc_self_attn_mask = get_attn_pad_mask(enc_inputs, enc_inputs) <span class="hljs-comment"># [batch_size, src_len, src_len]</span><br>        enc_self_attns = []<br>        <span class="hljs-keyword">for</span> layer <span class="hljs-keyword">in</span> <span class="hljs-variable language_">self</span>.layers:<br>            <span class="hljs-comment"># enc_outputs: [batch_size, src_len, d_model], enc_self_attn: [batch_size, n_heads, src_len, src_len]</span><br>            enc_outputs, enc_self_attn = layer(enc_outputs, enc_self_attn_mask)    <span class="hljs-comment"># 一个EncoderBlock输出,注意力分数矩阵</span><br>            enc_self_attns.append(enc_self_attn)    <span class="hljs-comment"># 记录注意力分数矩阵</span><br>        <span class="hljs-comment"># enc_outputs: [batch_size, src_len, d_model]</span><br>        <span class="hljs-comment"># enc_self_attn: [batch_size, n_heads, src_len, src_len]</span><br>        <span class="hljs-keyword">return</span> enc_outputs, enc_self_attns<br><br><br><br><br><span class="hljs-comment"># 测试</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">enc_inputs:</span><br><span class="hljs-string">tensor([[1, 2, 3, 4, 0],</span><br><span class="hljs-string">        [1, 5, 6, 3, 7],</span><br><span class="hljs-string">        [1, 2, 8, 4, 0]])</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-comment">#enc_outputs, enc_self_attns = Encoder()(enc_inputs)</span><br><span class="hljs-comment">#print(enc_outputs.shape)    # torch.Size([3, 5, 512])</span><br><br><br><br><br><br><span class="hljs-comment"># decoder layer(block)</span><br><span class="hljs-comment"># decoder两次调用MultiHeadAttention时，第一次调用传入的 Q，K，V 的值是相同的，都等于dec_inputs，第二次调用 Q 矩阵是来自Decoder的</span><br><span class="hljs-comment"># 输入。K，V 两个矩阵是来自Encoder的输出，等于enc_outputs。</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">DecoderLayer</span>(nn.Module):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-built_in">super</span>(DecoderLayer, <span class="hljs-variable language_">self</span>).__init__()<br>        <span class="hljs-variable language_">self</span>.dec_self_attn = MultiHeadAttention()<br>        <span class="hljs-variable language_">self</span>.dec_enc_attn = MultiHeadAttention()<br>        <span class="hljs-variable language_">self</span>.pos_ffn = FF()<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">forward</span>(<span class="hljs-params">self, dec_inputs, enc_outputs, dec_self_attn_mask, dec_enc_attn_mask</span>):  <br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        解码器一个Block包含两个多投资注意力机制</span><br><span class="hljs-string">        Args:</span><br><span class="hljs-string">            dec_inputs (_type_): [batch_size, tgt_len, d_model]</span><br><span class="hljs-string">            enc_outputs (_type_): [batch_size, src_len, d_model]    # Encoder的输出</span><br><span class="hljs-string">            dec_self_attn_mask (_type_): [batch_size, tgt_len, tgt_len]</span><br><span class="hljs-string">            dec_enc_attn_mask (_type_): [batch_size, tgt_len, src_len]</span><br><span class="hljs-string"></span><br><span class="hljs-string">        Returns:</span><br><span class="hljs-string">            _type_: _description_</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        <span class="hljs-comment"># dec_outputs: [batch_size, tgt_len, d_model]</span><br>        <span class="hljs-comment"># dec_self_attn: [batch_size, n_heads, tgt_len, tgt_len]</span><br>        dec_outputs, dec_self_attn = <span class="hljs-variable language_">self</span>.dec_self_attn(dec_inputs, dec_inputs, dec_inputs,<br>                                                        dec_self_attn_mask)<br>        <br>        <span class="hljs-comment"># decoder自注意力之后的值作为Q值。K,V来自Encoder的输出</span><br>        <span class="hljs-comment"># dec_outputs: [batch_size, tgt_len, d_model]</span><br>        <span class="hljs-comment"># dec_enc_attn: [batch_size, h_heads, tgt_len, src_len]</span><br>        dec_outputs, dec_enc_attn = <span class="hljs-variable language_">self</span>.dec_enc_attn(dec_outputs, enc_outputs, enc_outputs,<br>                                                      dec_enc_attn_mask)<br>        <br>        dec_outputs = <span class="hljs-variable language_">self</span>.pos_ffn(dec_outputs)  <span class="hljs-comment"># dec_outputs: [batch_size, tgt_len, d_model]</span><br>        <span class="hljs-keyword">return</span> dec_outputs, dec_self_attn, dec_enc_attn<br><br><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string"># Decoder</span><br><span class="hljs-string">第一步，英文字索引进行Embedding，转换成512维度的字向量。</span><br><span class="hljs-string">第二步，在子向量上面加上位置信息。</span><br><span class="hljs-string">第三步，Mask掉句子中的占位符号和输出顺序.</span><br><span class="hljs-string">第四步，通过6层的decoder（上一层的输出作为下一层的输入）</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Decoder</span>(nn.Module):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-built_in">super</span>(Decoder, <span class="hljs-variable language_">self</span>).__init__()<br>        <span class="hljs-variable language_">self</span>.tgt_emb = nn.Embedding(tgt_vocab_size, d_model)<br>        <span class="hljs-variable language_">self</span>.pos_emb = PositionalEncoding(d_model)<br>        <span class="hljs-variable language_">self</span>.layers = nn.ModuleList([DecoderLayer() <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n_layers)])<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">forward</span>(<span class="hljs-params">self, dec_inputs, enc_inputs, enc_outputs</span>):<br>        <span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">        enc_intpus: [batch_size, src_len]</span><br><span class="hljs-string">        dec_inputs: [batch_size, tgt_len]</span><br><span class="hljs-string">        enc_outputs: [batch_size, src_len, d_model]</span><br><span class="hljs-string">        &#x27;&#x27;&#x27;</span><br>        dec_outputs = <span class="hljs-variable language_">self</span>.tgt_emb(dec_inputs)  <span class="hljs-comment"># [batch_size, tgt_len, d_model]</span><br>        dec_outputs = <span class="hljs-variable language_">self</span>.pos_emb(dec_outputs.transpose(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>)).transpose(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>)  <span class="hljs-comment"># [batch_size, tgt_len, d_model]</span><br>        <span class="hljs-comment"># PAD 0填充Mask掉 (Decoder输入序列的pad mask矩阵（这个例子中decoder是没有加pad的，实际应用中都是有pad填充的）)</span><br>        <span class="hljs-comment"># Decoder中 0填充的位置是&#x27;S&#x27;，也就是第一个位置要Mask掉，为true</span><br>        dec_self_attn_pad_mask = get_attn_pad_mask(dec_inputs, dec_inputs)  <span class="hljs-comment"># [batch_size, tgt_len, tgt_len]  T or F</span><br>        <span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">        此时的一个batch:[&#x27;S I am a student&#x27;, &#x27;S I like learning P&#x27;]</span><br><span class="hljs-string">        dec_self_attn_pad_mask： </span><br><span class="hljs-string">        tensor([[[ True, False, False, False, False],</span><br><span class="hljs-string">                 [ True, False, False, False, False],</span><br><span class="hljs-string">                 [ True, False, False, False, False],</span><br><span class="hljs-string">                 [ True, False, False, False, False],</span><br><span class="hljs-string">                 [ True, False, False, False, False]],</span><br><span class="hljs-string"></span><br><span class="hljs-string">                [[ True, False, False, False, False],</span><br><span class="hljs-string">                 [ True, False, False, False, False],</span><br><span class="hljs-string">                 [ True, False, False, False, False],</span><br><span class="hljs-string">                 [ True, False, False, False, False],</span><br><span class="hljs-string">                 [ True, False, False, False, False]]])&#x27;&#x27;&#x27;</span><br>        <span class="hljs-comment"># Masked Self_Attention：当前时刻是看不到未来的信息的</span><br>        dec_self_attn_subsequence_mask = get_attn_subsequence_mask(dec_inputs)  <span class="hljs-comment"># [batch_size, tgt_len, tgt_len] 下三角包括对角线为0，上三角为1</span><br>        <span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">        tensor([[[0, 1, 1, 1, 1],</span><br><span class="hljs-string">                 [0, 0, 1, 1, 1],</span><br><span class="hljs-string">                 [0, 0, 0, 1, 1],</span><br><span class="hljs-string">                 [0, 0, 0, 0, 1],</span><br><span class="hljs-string">                 [0, 0, 0, 0, 0]],</span><br><span class="hljs-string"></span><br><span class="hljs-string">                 [0, 1, 1, 1, 1],</span><br><span class="hljs-string">                 [0, 0, 1, 1, 1],</span><br><span class="hljs-string">                 [0, 0, 0, 1, 1],</span><br><span class="hljs-string">                 [0, 0, 0, 0, 1],</span><br><span class="hljs-string">                 [0, 0, 0, 0, 0]]], dtype=torch.uint8)&#x27;&#x27;&#x27;</span><br>        <span class="hljs-comment"># Decoder中把两种mask矩阵相加（既屏蔽了pad的信息，也屏蔽了未来时刻的信息）</span><br>        <span class="hljs-comment"># torch.gt() 比较Tensor1和Tensor2的每一个元素,并返回一个0-1值.若Tensor1中的元素大于Tensor2中的元素,则结果取1,否则取0</span><br>        dec_self_attn_mask = torch.gt((dec_self_attn_pad_mask + dec_self_attn_subsequence_mask),<br>                                      <span class="hljs-number">0</span>)  <span class="hljs-comment"># [batch_size, tgt_len, tgt_len]</span><br>        <span class="hljs-string">&#x27;&#x27;&#x27;tensor([[[ True,  True,  True,  True,  True],</span><br><span class="hljs-string">                    [ True, False,  True,  True,  True],</span><br><span class="hljs-string">                    [ True, False, False,  True,  True],    # 注意到之前的，当然不包括开始字符&#x27;S&#x27;。但是后面PAD的位置也会注意到前面PAD的位置</span><br><span class="hljs-string">                    [ True, False, False, False,  True],</span><br><span class="hljs-string">                    [ True, False, False, False, False]],</span><br><span class="hljs-string"></span><br><span class="hljs-string">                    [ True,  True,  True,  True,  True],</span><br><span class="hljs-string">                    [ True, False,  True,  True,  True],</span><br><span class="hljs-string">                    [ True, False, False,  True,  True],</span><br><span class="hljs-string">                    [ True, False, False, False,  True],</span><br><span class="hljs-string">                    [ True, False, False, False, False]]])&#x27;&#x27;&#x27;</span><br>        <span class="hljs-comment"># 这个mask主要用于encoder-decoder attention层</span><br>        <span class="hljs-comment"># get_attn_pad_mask主要是enc_inputs的pad mask矩阵(因为enc是处理K,V的，求Attention时是用v1,v2,..vm去加权的，</span><br>        <span class="hljs-comment"># 要把pad对应的v_i的相关系数设为0，这样注意力就不会关注pad向量)</span><br>        <span class="hljs-comment">#                       dec_inputs只是提供expand的size的</span><br>        dec_enc_attn_mask = get_attn_pad_mask(dec_inputs, enc_inputs)  <span class="hljs-comment"># [batc_size, tgt_len, src_len]</span><br>        <span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">        此时的一个batch: &#x27;S I am a student&#x27; &#x27;S I like learning P&#x27;</span><br><span class="hljs-string">        下面的tensor是上面两个dec_input样本对应的enc_input的掩码矩阵</span><br><span class="hljs-string">        tensor([[[False, False, False, False, False],</span><br><span class="hljs-string">                 [False, False, False, False, False],</span><br><span class="hljs-string">                 [False, False, False, False, False],</span><br><span class="hljs-string">                 [False, False, False, False, False],</span><br><span class="hljs-string">                 [False, False, False, False, False]]</span><br><span class="hljs-string">            </span><br><span class="hljs-string">                [[False, False, False, False,  True],</span><br><span class="hljs-string">                 [False, False, False, False,  True],</span><br><span class="hljs-string">                 [False, False, False, False,  True],</span><br><span class="hljs-string">                 [False, False, False, False,  True],</span><br><span class="hljs-string">                 [False, False, False, False,  True]]</span><br><span class="hljs-string">               ])&#x27;&#x27;&#x27;</span><br><br>        dec_self_attns, dec_enc_attns = [], []<br>        <span class="hljs-keyword">for</span> layer <span class="hljs-keyword">in</span> <span class="hljs-variable language_">self</span>.layers:<br>            <span class="hljs-comment"># dec_outputs: [batch_size, tgt_len, d_model], </span><br>            <span class="hljs-comment"># dec_self_attn: [batch_size, n_heads, tgt_len, tgt_len], </span><br>            <span class="hljs-comment"># dec_enc_attn: [batch_size, h_heads, tgt_len, src_len]</span><br>            dec_outputs, dec_self_attn, dec_enc_attn = layer(dec_outputs, enc_outputs, dec_self_attn_mask,<br>                                                             dec_enc_attn_mask)<br>            dec_self_attns.append(dec_self_attn)<br>            dec_enc_attns.append(dec_enc_attn)<br>        <span class="hljs-keyword">return</span> dec_outputs, dec_self_attns, dec_enc_attns<br><br><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string"># Transformer</span><br><span class="hljs-string">Trasformer的整体结构，输入数据先通过Encoder，再通过Decoder，</span><br><span class="hljs-string">最后把输出进行多分类，分类数为英文字典长度，也就是判断每一个字的概率。</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Transformer</span>(nn.Module):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-built_in">super</span>(Transformer, <span class="hljs-variable language_">self</span>).__init__()<br>        <span class="hljs-variable language_">self</span>.Encoder = Encoder()<br>        <span class="hljs-variable language_">self</span>.Decoder = Decoder()<br>        <span class="hljs-comment"># 翻译到英文词的分类</span><br>        <span class="hljs-variable language_">self</span>.projection = nn.Linear(d_model, tgt_vocab_size, bias=<span class="hljs-literal">False</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">forward</span>(<span class="hljs-params">self, enc_inputs, dec_inputs</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        transformer</span><br><span class="hljs-string">        Args:</span><br><span class="hljs-string">            enc_inputs (_type_): [batch_size, src_len]</span><br><span class="hljs-string">            dec_inputs (_type_): [batch_size, tgt_len]</span><br><span class="hljs-string"></span><br><span class="hljs-string">        Returns:</span><br><span class="hljs-string">            _type_: _description_</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        <span class="hljs-comment"># encoder部分</span><br>        <span class="hljs-comment"># enc_outputs: [batch_size, src_len, d_model],</span><br>        <span class="hljs-comment"># enc_self_attns: [n_layers, batch_size, n_heads, src_len, src_len]</span><br>        enc_outputs, enc_self_attns = <span class="hljs-variable language_">self</span>.Encoder(enc_inputs)<br><br>        <span class="hljs-comment"># decoder部分</span><br>        <span class="hljs-comment"># dec_outpus    : [batch_size, tgt_len, d_model],</span><br>        <span class="hljs-comment"># dec_self_attns: [n_layers, batch_size, n_heads, tgt_len, tgt_len],</span><br>        <span class="hljs-comment"># dec_enc_attn  : [n_layers, batch_size, tgt_len, src_len]</span><br>        dec_outputs, dec_self_attns, dec_enc_attns = <span class="hljs-variable language_">self</span>.Decoder(dec_inputs, enc_inputs, enc_outputs)<br><br>        dec_logits = <span class="hljs-variable language_">self</span>.projection(dec_outputs)  <span class="hljs-comment"># dec_logits: [batch_size, tgt_len, tgt_vocab_size]</span><br>        dec_logits = dec_logits.view(-<span class="hljs-number">1</span>, dec_logits.size(-<span class="hljs-number">1</span>))  <span class="hljs-comment"># dec_logits: [batch_size*tgt_len, tgt_vocab_size]</span><br>        <span class="hljs-keyword">return</span> dec_logits, enc_self_attns, dec_self_attns, dec_enc_attns<br><br><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string"># 定义网络</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br>model = Transformer()<br>criterion = nn.CrossEntropyLoss(ignore_index=<span class="hljs-number">0</span>)  <span class="hljs-comment"># 忽略 占位符 索引为0.</span><br>optimizer = optim.SGD(model.parameters(), lr=<span class="hljs-number">1e-3</span>, momentum=<span class="hljs-number">0.99</span>)<br><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string"># 训练Transformer</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-keyword">for</span> epoch <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">50</span>):<br>    <span class="hljs-keyword">for</span> enc_inputs, dec_inputs, dec_outputs <span class="hljs-keyword">in</span> loader:<br>        enc_inputs, dec_inputs, dec_outputs = enc_inputs, dec_inputs, dec_outputs    <span class="hljs-comment"># [2,5] [2,5] [2,5]</span><br>        outputs, enc_self_attns, dec_self_attns, dec_enc_attns = model(enc_inputs, dec_inputs)<br>        loss = criterion(outputs, dec_outputs.view(-<span class="hljs-number">1</span>))  <span class="hljs-comment"># outputs: [batch_size*tgt_len, tgt_vocab_size]</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Epoch:&#x27;</span>, <span class="hljs-string">&#x27;%04d&#x27;</span> % (epoch + <span class="hljs-number">1</span>), <span class="hljs-string">&#x27;loss =&#x27;</span>, <span class="hljs-string">&#x27;&#123;:.6f&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(loss))<br>        optimizer.zero_grad()<br>        loss.backward()<br>        optimizer.step()<br><br><br><span class="hljs-comment"># 测试</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test</span>(<span class="hljs-params">model, enc_input, start_symbol</span>):<br>    <span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">    enc_input: [1, src_len]    只取一个例子</span><br><span class="hljs-string">    &#x27;&#x27;&#x27;</span><br>    <span class="hljs-comment"># 先得到Encoder的输出</span><br>    enc_outputs, enc_self_attns = model.Encoder(enc_input)    <span class="hljs-comment"># [1,src_len, d_model] []</span><br><br>    dec_input = torch.zeros(<span class="hljs-number">1</span>, tgt_len).type_as(enc_input.data)    <span class="hljs-comment"># [1, tgt_len]</span><br><br>    next_symbol = start_symbol<br><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, tgt_len):<br>        dec_input[<span class="hljs-number">0</span>][i] = next_symbol<br><br>        <span class="hljs-comment"># 然后一个一个解码</span><br>        dec_outputs, _, _ = model.Decoder(dec_input, enc_input, enc_outputs)    <span class="hljs-comment"># [1, tgt_len, d_model]</span><br><br>        projected = model.projection(dec_outputs)    <span class="hljs-comment"># [1, tgt_len, tgt_voc_size]</span><br>        prob = projected.squeeze(<span class="hljs-number">0</span>).<span class="hljs-built_in">max</span>(dim=-<span class="hljs-number">1</span>, keepdim=<span class="hljs-literal">False</span>)[<span class="hljs-number">1</span>]    <span class="hljs-comment"># [tgt_len][索引]</span><br>        next_word = prob.data[i]    <span class="hljs-comment"># 不断地预测所有字，但是只取下一个字</span><br>        next_symbol = next_word.item()<br>    <span class="hljs-keyword">return</span> dec_input<br><br><br>enc_inputs, _, _ = <span class="hljs-built_in">next</span>(<span class="hljs-built_in">iter</span>(loader))<br><span class="hljs-comment"># enc_input只取一个例子[1]</span><br><span class="hljs-comment"># 预测dec_input</span><br><span class="hljs-comment"># dec_input全部预测出来之后，在输入Model预测 dec_output</span><br>predict_dec_input = test(model, enc_inputs[<span class="hljs-number">1</span>].view(<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>), start_symbol=tgt_vocab[<span class="hljs-string">&quot;S&quot;</span>])    <span class="hljs-comment"># [1, tgt_len]</span><br><span class="hljs-comment"># 然后走一遍完整的过程</span><br>predict, _, _, _ = model(enc_inputs[<span class="hljs-number">1</span>].view(<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>), predict_dec_input)    <span class="hljs-comment"># [tat_len, tgt_voc_size]</span><br><br>predict = predict.data.<span class="hljs-built_in">max</span>(<span class="hljs-number">1</span>, keepdim=<span class="hljs-literal">True</span>)[<span class="hljs-number">1</span>]<br><span class="hljs-built_in">print</span>([src_idx2word[<span class="hljs-built_in">int</span>(i)] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> enc_inputs[<span class="hljs-number">1</span>]], <span class="hljs-string">&#x27;-&gt;&#x27;</span>, [idx2word[n.item()] <span class="hljs-keyword">for</span> n <span class="hljs-keyword">in</span> predict.squeeze()])<br></code></pre></td></tr></table></figure></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    
    <tags>
      
      <tag>Deep Learning</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Fluid-4-添加博客加载页面</title>
    <link href="/posts/2025/01/afbbf2e3.html"/>
    <url>/posts/2025/01/afbbf2e3.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>加载动画可以缓解用户等待页面加载的不适感，给予用户一个明确的指示，告诉他们页面正在加载中。这有助于提升用户体验，减轻用户的焦虑感，让他们 <strong>感觉</strong> 页面加载速度更快。</p><h3 id=""><a href="#" class="headerlink" title=""></a></h3><h3 id="😄实现思路"><a href="#😄实现思路" class="headerlink" title="😄实现思路"></a>😄实现思路</h3><ul><li>html + css 创建动画页面</li><li>调用 js 加载 dom 事件来控制加载动画消失</li></ul><h3 id="-1"><a href="#-1" class="headerlink" title=""></a></h3><h3 id="😊实现方法"><a href="#😊实现方法" class="headerlink" title="😊实现方法"></a>😊实现方法</h3><p>动画照搬了一个<a href="https://www.zywvvd.com/pages/go.html?goUrl=https://blog.csdn.net/m0_66047725/article/details/129896812">示例</a> ~</p><p>新建一个loading样式css<br>将以下代码放进去 然后引用这个文件</p><p>在 bodyBegin 注入了元素代码：</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs applescript">&lt;<span class="hljs-keyword">div</span> <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;Loadanimation&quot;</span> style=<span class="hljs-string">&quot;z-index:999999;&quot;</span>&gt;<br>&lt;<span class="hljs-keyword">div</span> <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;Loadanimation-center&quot;</span>&gt;<br>   &lt;<span class="hljs-keyword">div</span> <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;Loadanimation-center-absolute&quot;</span>&gt;<br>       &lt;<span class="hljs-keyword">div</span> <span class="hljs-built_in">class</span>=<span class="hljs-string">&quot;xccx_object&quot;</span> <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;xccx_four&quot;</span>&gt;&lt;/<span class="hljs-keyword">div</span>&gt;<br>       &lt;<span class="hljs-keyword">div</span> <span class="hljs-built_in">class</span>=<span class="hljs-string">&quot;xccx_object&quot;</span> <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;xccx_three&quot;</span>&gt;&lt;/<span class="hljs-keyword">div</span>&gt;<br>       &lt;<span class="hljs-keyword">div</span> <span class="hljs-built_in">class</span>=<span class="hljs-string">&quot;xccx_object&quot;</span> <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;xccx_two&quot;</span>&gt;&lt;/<span class="hljs-keyword">div</span>&gt;<br>       &lt;<span class="hljs-keyword">div</span> <span class="hljs-built_in">class</span>=<span class="hljs-string">&quot;xccx_object&quot;</span> <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;xccx_one&quot;</span>&gt;&lt;/<span class="hljs-keyword">div</span>&gt;<br>   &lt;/<span class="hljs-keyword">div</span>&gt;<br>&lt;/<span class="hljs-keyword">div</span>&gt;<br>&lt;/<span class="hljs-keyword">div</span>&gt;<br></code></pre></td></tr></table></figure><h4 id="动画-CSS"><a href="#动画-CSS" class="headerlink" title="动画 CSS"></a>动画 CSS</h4><p>css 代码：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-id">#Loadanimation</span>&#123;<br>   <span class="hljs-attribute">background-color</span>:<span class="hljs-number">#fff</span>;<br>   <span class="hljs-attribute">height</span>:<span class="hljs-number">100%</span>;<br>   <span class="hljs-attribute">width</span>:<span class="hljs-number">100%</span>;<br>   <span class="hljs-attribute">position</span>:fixed;<br>   <span class="hljs-attribute">z-index</span>:<span class="hljs-number">1</span>;<br>   <span class="hljs-attribute">margin-top</span>:<span class="hljs-number">0px</span>;<span class="hljs-attribute">top</span>:<span class="hljs-number">0px</span>;<br>   <br>&#125;<br><span class="hljs-selector-id">#Loadanimation-center</span>&#123;<br>   <span class="hljs-attribute">width</span>:<span class="hljs-number">100%</span>;<br>   <span class="hljs-attribute">height</span>:<span class="hljs-number">100%</span>;<br>   <span class="hljs-attribute">position</span>:relative;<br>   <br>&#125;<br><span class="hljs-selector-id">#Loadanimation-center-absolute</span>&#123;<br>   <span class="hljs-attribute">position</span>:absolute;<br>   <span class="hljs-attribute">left</span>:<span class="hljs-number">50%</span>;<br>   <span class="hljs-attribute">top</span>:<span class="hljs-number">50%</span>;<br>   <span class="hljs-attribute">height</span>:<span class="hljs-number">200px</span>;<br>   <span class="hljs-attribute">width</span>:<span class="hljs-number">200px</span>;<br>   <span class="hljs-attribute">margin-top</span>:-<span class="hljs-number">100px</span>;<br>   <span class="hljs-attribute">margin-left</span>:-<span class="hljs-number">100px</span>;<br>   <br>&#125;<br><span class="hljs-selector-class">.xccx_object</span>&#123;<br>   -moz-<span class="hljs-attribute">border-radius</span>:<span class="hljs-number">50%</span> <span class="hljs-number">50%</span> <span class="hljs-number">50%</span> <span class="hljs-number">50%</span>;<br>   -webkit-<span class="hljs-attribute">border-radius</span>:<span class="hljs-number">50%</span> <span class="hljs-number">50%</span> <span class="hljs-number">50%</span> <span class="hljs-number">50%</span>;<br>   <span class="hljs-attribute">border-radius</span>:<span class="hljs-number">50%</span> <span class="hljs-number">50%</span> <span class="hljs-number">50%</span> <span class="hljs-number">50%</span>;<br>   <span class="hljs-attribute">position</span>:absolute;<br>   <span class="hljs-attribute">border-left</span>:<span class="hljs-number">5px</span> solid <span class="hljs-number">#87CEFA</span>;<br>   <span class="hljs-attribute">border-right</span>:<span class="hljs-number">5px</span> solid <span class="hljs-number">#FFC0CB</span>;<br>   <span class="hljs-attribute">border-top</span>:<span class="hljs-number">5px</span> solid transparent;<br>   <span class="hljs-attribute">border-bottom</span>:<span class="hljs-number">5px</span> solid transparent;<br>   -webkit-<span class="hljs-attribute">animation</span>:animate <span class="hljs-number">2.5s</span> infinite;<br>   <span class="hljs-attribute">animation</span>:animate <span class="hljs-number">2.5s</span> infinite;<br>   <br>&#125;<br><span class="hljs-selector-id">#xccx_one</span>&#123;<br>   <span class="hljs-attribute">left</span>:<span class="hljs-number">75px</span>;<br>   <span class="hljs-attribute">top</span>:<span class="hljs-number">75px</span>;<br>   <span class="hljs-attribute">width</span>:<span class="hljs-number">50px</span>;<br>   <span class="hljs-attribute">height</span>:<span class="hljs-number">50px</span>;<br>   <br>&#125;<br><span class="hljs-selector-id">#xccx_two</span>&#123;<br>   <span class="hljs-attribute">left</span>:<span class="hljs-number">65px</span>;<br>   <span class="hljs-attribute">top</span>:<span class="hljs-number">65px</span>;<br>   <span class="hljs-attribute">width</span>:<span class="hljs-number">70px</span>;<br>   <span class="hljs-attribute">height</span>:<span class="hljs-number">70px</span>;<br>   -webkit-<span class="hljs-attribute">animation-delay</span>:<span class="hljs-number">0.1s</span>;<br>   <span class="hljs-attribute">animation-delay</span>:<span class="hljs-number">0.1s</span>;<br>   <br>&#125;<br><span class="hljs-selector-id">#xccx_three</span>&#123;<br>   <span class="hljs-attribute">left</span>:<span class="hljs-number">55px</span>;<br>   <span class="hljs-attribute">top</span>:<span class="hljs-number">55px</span>;<br>   <span class="hljs-attribute">width</span>:<span class="hljs-number">90px</span>;<br>   <span class="hljs-attribute">height</span>:<span class="hljs-number">90px</span>;<br>   -webkit-<span class="hljs-attribute">animation-delay</span>:<span class="hljs-number">0.2s</span>;<span class="hljs-attribute">animation-delay</span>:<span class="hljs-number">0.2s</span>;<br>   <br>&#125;<br><span class="hljs-selector-id">#xccx_four</span>&#123;<br>   <span class="hljs-attribute">left</span>:<span class="hljs-number">45px</span>;<br>   <span class="hljs-attribute">top</span>:<span class="hljs-number">45px</span>;<br>   <span class="hljs-attribute">width</span>:<span class="hljs-number">110px</span>;<br>   <span class="hljs-attribute">height</span>:<span class="hljs-number">110px</span>;<br>   -webkit-<span class="hljs-attribute">animation-delay</span>:<span class="hljs-number">0.3s</span>;<br>   <span class="hljs-attribute">animation-delay</span>:<span class="hljs-number">0.3s</span>;<br>   <br>&#125;<br><span class="hljs-keyword">@-webkit-keyframes</span> animate&#123;<span class="hljs-number">50%</span>&#123;<br>   -ms-<span class="hljs-attribute">transform</span>:<span class="hljs-built_in">rotate</span>(<span class="hljs-number">180deg</span>);<br>   -webkit-<span class="hljs-attribute">transform</span>:<span class="hljs-built_in">rotate</span>(<span class="hljs-number">180deg</span>);<br>   <span class="hljs-attribute">transform</span>:<span class="hljs-built_in">rotate</span>(<span class="hljs-number">180deg</span>);<br>   <br>&#125;<br><span class="hljs-number">100%</span>&#123;-ms-<span class="hljs-attribute">transform</span>:<span class="hljs-built_in">rotate</span>(<span class="hljs-number">0deg</span>);<br>   -webkit-<span class="hljs-attribute">transform</span>:<span class="hljs-built_in">rotate</span>(<span class="hljs-number">0deg</span>);<br>   <span class="hljs-attribute">transform</span>:<span class="hljs-built_in">rotate</span>(<span class="hljs-number">0deg</span>);<br>   <br>&#125;<br>   <br>&#125;<br><span class="hljs-keyword">@keyframes</span> animate&#123;<span class="hljs-number">50%</span>&#123;<br>   -ms-<span class="hljs-attribute">transform</span>:<span class="hljs-built_in">rotate</span>(<span class="hljs-number">180deg</span>);<br>   -webkit-<span class="hljs-attribute">transform</span>:<span class="hljs-built_in">rotate</span>(<span class="hljs-number">180deg</span>);<br>   <span class="hljs-attribute">transform</span>:<span class="hljs-built_in">rotate</span>(<span class="hljs-number">180deg</span>);<br>   <br>&#125;<br><span class="hljs-number">100%</span>&#123;<br>   -ms-<span class="hljs-attribute">transform</span>:<span class="hljs-built_in">rotate</span>(<span class="hljs-number">0deg</span>);<br>   -webkit-<span class="hljs-attribute">transform</span>:<span class="hljs-built_in">rotate</span>(<span class="hljs-number">0deg</span>);<br>   <span class="hljs-attribute">transform</span>:<span class="hljs-built_in">rotate</span>(<span class="hljs-number">0deg</span>);<br>   <br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="js-代码"><a href="#js-代码" class="headerlink" title="js 代码"></a>js 代码</h4><p>在 js 中添加加载事件 （此处用了 jquery）</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs arcade">$(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<br>   $(<span class="hljs-string">&quot;#Loadanimation&quot;</span>).fadeOut(<span class="hljs-number">500</span>);<br>&#125;);<br></code></pre></td></tr></table></figure><p>这样就可以了 ~</p><h3 id="TODO："><a href="#TODO：" class="headerlink" title="TODO："></a>TODO：</h3><ul><li>加载页面仅显示一次</li><li>加入个人博客相关 LOGO，加入进度条等</li></ul><h3 id="-2"><a href="#-2" class="headerlink" title=""></a></h3></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>博客</category>
      
    </categories>
    
    
    <tags>
      
      <tag>hexo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Fluid-3-增加打赏功能</title>
    <link href="/posts/2025/01/8e9d17b1.html"/>
    <url>/posts/2025/01/8e9d17b1.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><h3 id="添加流程"><a href="#添加流程" class="headerlink" title="添加流程"></a>添加流程</h3><p>修改 找到主题布局文件 <code>themes/fluid/layout/post.ejs</code></p><p>将以下代码粘贴到文章模板的 <code>&lt;/div&gt;</code> 和 <code>&lt;hr&gt;</code> 之间</p><h4 id="1-增加-html"><a href="#1-增加-html" class="headerlink" title="1.增加 html"></a>1.增加 html</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- 添加打赏模块 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;reward-container&quot;</span>&gt;</span><br>&lt;% if (theme.donate.enable) &#123; %&gt;<br><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;rewardBtn&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;reward-btn&quot;</span>&gt;</span><br>&lt;% if (config.language == &#x27;zh-CN&#x27;) &#123; %&gt; <br>❤ 打赏<br>&lt;% &#125; else &#123; %&gt;<br>Donate<br>&lt;% &#125; %&gt;<br><span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;tea&quot;</span>&gt;</span>“&lt;%= theme.donate.message %&gt;”<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;rewardImgContainer&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;reward-img-container&quot;</span>&gt;</span><br>         <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;singleImgContainer&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;wechatImg&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;reward-img&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;&lt;%= theme.donate.wechatpay %&gt;&quot;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;微信二维码&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;wechatPay&quot;</span>&gt;</span>微信支付<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;singleImgContainer&quot;</span>&gt;</span><br>               <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;alipayImg&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;reward-img&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;&lt;%= theme.donate.alipay %&gt;&quot;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;支付宝二维码&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;aliPay&quot;</span>&gt;</span>支付宝支付<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>           <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>&lt;% &#125; %&gt;<br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="2-增加-css"><a href="#2-增加-css" class="headerlink" title="2.增加 css"></a>2.增加 css</h4><p>在<code>themes/fluid/source/css</code> 创建名为：<code>reward.css</code>的文件，写入以下代码：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.tea</span> &#123;<br>    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">0.8125em</span>;<br>    <span class="hljs-attribute">color</span>: <span class="hljs-number">#999999</span>;<br>    <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">10px</span>;<br>&#125;<br><br><span class="hljs-selector-class">.reward-container</span> &#123;<br>    <span class="hljs-attribute">display</span>: flex;<br>    <span class="hljs-attribute">flex-direction</span>: column;<br>    <span class="hljs-attribute">align-items</span>: center;<br>    <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">50px</span>;<br>&#125;<br><br><span class="hljs-selector-class">.reward-btn</span> &#123;<br>    <span class="hljs-attribute">padding</span>: <span class="hljs-number">8px</span> <span class="hljs-number">24px</span>;<br>    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">18px</span>;<br>    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#007bff</span>;<br>    <span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>;<br>    <span class="hljs-attribute">border</span>: none;<br>    <span class="hljs-attribute">cursor</span>: pointer;<br>    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">10px</span>;<br>&#125;<br><br><span class="hljs-selector-class">.reward-img-container</span> &#123;<br>    <span class="hljs-attribute">display</span>: none;<br>    <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">20px</span>;<br>    <span class="hljs-comment">/* 图片容器的透明度 */</span><br>    <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>;<br>    <span class="hljs-comment">/* 过渡效果,使动画更平滑 */</span><br>    <span class="hljs-attribute">transition</span>: opacity <span class="hljs-number">2s</span> ease;<br>&#125;<br><br><span class="hljs-selector-class">.reward-img</span> &#123;<br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">200px</span>;<br>    <span class="hljs-attribute">margin</span>: <span class="hljs-number">10px</span>;<br>    <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> dashed <span class="hljs-number">#ccc</span>;<br>    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;<br>    <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;<br>&#125;<br><br><span class="hljs-comment">/* 单个图片的容器 */</span><br><span class="hljs-selector-class">.singleImgContainer</span> &#123;<br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">50%</span>;<br>    <span class="hljs-attribute">height</span>: <span class="hljs-number">240px</span>;<br>&#125;<br><br><span class="hljs-comment">/* 微信支付和支付宝支付的文字样式 */</span><br><span class="hljs-selector-class">.wechatPay</span>,<span class="hljs-selector-class">.aliPay</span> &#123;<br><span class="hljs-attribute">text-align</span>: center;<br>    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">0.8125em</span>;<br>    <span class="hljs-attribute">color</span>: <span class="hljs-number">#999999</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="3-增加-js"><a href="#3-增加-js" class="headerlink" title="3.增加 js"></a>3.增加 js</h4><p>在<code>themes/fluid/source/js</code> 创建名为：<code>reward.js</code>的文件，并引入以下代码：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> rewardBtn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;rewardBtn&#x27;</span>);<br><span class="hljs-keyword">const</span> rewardImgContainer = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;rewardImgContainer&#x27;</span>);<br><br><span class="hljs-keyword">if</span>(rewardBtn)&#123;<br>rewardBtn.<span class="hljs-property">onclick</span> = <span class="hljs-function">() =&gt;</span> &#123;<br>rewardImgContainer.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = (rewardImgContainer.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> === <span class="hljs-string">&#x27;none&#x27;</span> || rewardImgContainer.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> === <span class="hljs-string">&#x27;&#x27;</span>) ? <span class="hljs-string">&#x27;inline-flex&#x27;</span> : <span class="hljs-string">&#x27;none&#x27;</span><br><span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>rewardImgContainer.<span class="hljs-property">style</span>.<span class="hljs-property">opacity</span> = (rewardImgContainer.<span class="hljs-property">style</span>.<span class="hljs-property">opacity</span> === <span class="hljs-string">&#x27;0&#x27;</span> || rewardImgContainer.<span class="hljs-property">style</span>.<span class="hljs-property">opacity</span> === <span class="hljs-string">&#x27;&#x27;</span>) ? <span class="hljs-string">&#x27;1&#x27;</span> : <span class="hljs-string">&#x27;0&#x27;</span><br>&#125;, <span class="hljs-number">10</span>);<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="4-修改主题配置"><a href="#4-修改主题配置" class="headerlink" title="4.修改主题配置"></a>4.修改主题配置</h4><ul><li>在主题配置文件的 <code>custom_js</code>和<code>custom_css</code>分别引入自定义的 <code>reward.js</code>文件和<code>reward.css</code>文件</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js"># 指定自定义 .<span class="hljs-property">js</span> 文件路径，支持列表；路径是相对 source 目录，如 /js/custom.<span class="hljs-property">js</span> 对应存放目录 source/js/custom.<span class="hljs-property">js</span><br># <span class="hljs-title class_">Specify</span> the path <span class="hljs-keyword">of</span> your custom js file, support list. <span class="hljs-title class_">The</span> path is relative to the source directory, such <span class="hljs-keyword">as</span> <span class="hljs-string">`/js/custom.js`</span> corresponding to the directory <span class="hljs-string">`source/js/custom.js`</span><br><span class="hljs-attr">custom_js</span>:<br>- <span class="hljs-comment">//cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js  #/APlayer#/APlayer依赖</span><br>- <span class="hljs-comment">//cdn.jsdelivr.net/gh/metowolf/MetingJS@1.2/dist/Meting.min.js  #/APlayer依赖</span><br>- <span class="hljs-regexp">/js/</span>reward.<span class="hljs-property">js</span><br># 指定自定义 .<span class="hljs-property">css</span> 文件路径，用法和 custom_js 相同<br># <span class="hljs-title class_">The</span> usage is the same <span class="hljs-keyword">as</span> custom_js<br><span class="hljs-attr">custom_css</span>:<br>- <span class="hljs-regexp">/css/</span>custom.<span class="hljs-property">css</span><br>- <span class="hljs-regexp">/css/</span>reward.<span class="hljs-property">css</span><br>- <span class="hljs-comment">//cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css</span><br></code></pre></td></tr></table></figure><ul><li>添加打赏配置：</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"># <span class="hljs-title class_">Donate</span> 自己为 <span class="hljs-title class_">Fluid</span> 主题增加的打赏功能<br># <span class="hljs-string">`message`</span> 是打赏提示语，可自定义<br># <span class="hljs-string">`alipay`</span> 是支付宝付款码， <span class="hljs-string">`wechatpay`</span> 是微信付款码。<br><span class="hljs-attr">donate</span>:<br>  <span class="hljs-attr">enable</span>: <span class="hljs-literal">true</span><br>  <span class="hljs-attr">message</span>: 觉得不错的话，给点打赏吧 ୧(๑•̀⌄•́๑)૭ <br>  <span class="hljs-attr">alipay</span>: <span class="hljs-regexp">/image/</span>alipay.<span class="hljs-property">png</span><br>  <span class="hljs-attr">wechatpay</span>: <span class="hljs-regexp">/image/</span>wechatpay.<span class="hljs-property">png</span><br><br></code></pre></td></tr></table></figure><h4 id="5-整理打赏二维码"><a href="#5-整理打赏二维码" class="headerlink" title="5.整理打赏二维码"></a>5.整理打赏二维码</h4><p>将微信、支付宝的收款码、赞赏码图像放到 <code>image</code> 文件夹中</p><h3 id=""><a href="#" class="headerlink" title=""></a></h3><h3 id="效果展示"><a href="#效果展示" class="headerlink" title="效果展示"></a>效果展示</h3><p><img src="https://raw.gitmirror.com/YUTING0907/PicGo/main/img20250113175824.png"></p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>博客</category>
      
    </categories>
    
    
    <tags>
      
      <tag>hexo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Fluid-2-添加 Github 贡献表</title>
    <link href="/posts/2025/01/7d8ce1b2.html"/>
    <url>/posts/2025/01/7d8ce1b2.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><blockquote><p>本文记录在 Fluid 主题中加入 Github 贡献表的方法。</p></blockquote><h3 id="1-贡献表"><a href="#1-贡献表" class="headerlink" title="1.贡献表"></a>1.贡献表</h3><ul><li>Github Chart 是什么呢？就是个人主页的那些绿块，组成了绿色日历Github 的提交记录：</li></ul><p><img src="https://raw.gitmirror.com/YUTING0907/PicGo/main/img20250113171555.png"></p><ul><li>本质上这个表格是使用了 Github API 提取数据生成的图表，我们如果想在博客里添加贡献表可以用这个思路</li></ul><h3 id="🔧ghchart"><a href="#🔧ghchart" class="headerlink" title="🔧ghchart"></a>🔧ghchart</h3><ul><li>2016rshah 大佬提供了现成的 API 可以直接生成贡献图表</li><li>官网地址：<a href="https://www.zywvvd.com/pages/go.html?goUrl=https://qq52o.me/go/aHR0cHM6Ly9naGNoYXJ0LnJzaGFoLm9yZy8=">https://ghchart.rshah.org/</a></li><li>源码在 Github 上开源，仓库地址：<a href="https://www.zywvvd.com/pages/go.html?goUrl=https://qq52o.me/go/aHR0cHM6Ly9naXRodWIuY29tLzIwMTZyc2hhaC9naXRodWJjaGFydC1hcGk=">https://github.com/2016rshah/githubchart-api</a></li></ul><h4 id=""><a href="#" class="headerlink" title=""></a></h4><h4 id="🧪使用方法"><a href="#🧪使用方法" class="headerlink" title="🧪使用方法"></a>🧪使用方法</h4><ul><li><p>访问链接：<code>https://ghchart.rshah.org/&lt;github-user-name&gt;</code> 即可获取指定用户的贡献图表，因为信息都是公开的，所以谁都可以直接拿到</p><p>例如输入网址：<a href="https://ghchart.rshah.org/YUTING0907%EF%BC%8C%E5%B0%B1%E5%8F%AF%E8%AE%BF%E9%97%AE">https://ghchart.rshah.org/YUTING0907，就可访问</a></p></li></ul><ul><li><p>修改颜色</p><p>还可以选择一个颜色作为主题颜色，比如 <code>26a397</code></p><p><img src="https://raw.gitmirror.com/YUTING0907/PicGo/main/img20250113172141.png"></p></li></ul><h3 id="2-添加到-Fluid-主题博客中"><a href="#2-添加到-Fluid-主题博客中" class="headerlink" title="2.添加到 Fluid 主题博客中"></a>2.添加到 Fluid 主题博客中</h3><ul><li><p>比如我想将 Github Chart 添加到 <code>归档页</code> 中</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>  <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;padding: 2vh 0 5vh 0&quot;</span> &gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://ghchart.rshah.org/zywvvd&quot;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;My Github Chart&quot;</span> <span class="hljs-attr">width</span>=<span class="hljs-string">100%</span> <span class="hljs-attr">position</span>=<span class="hljs-string">&#x27;relative&#x27;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>显示效果：</p></li></ul><p><img src="https://raw.gitmirror.com/YUTING0907/PicGo/main/img20250113172600.png"></p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>博客</category>
      
    </categories>
    
    
    <tags>
      
      <tag>hexo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>一文读懂大数据各组件</title>
    <link href="/posts/2024/12/63506dbf.html"/>
    <url>/posts/2024/12/63506dbf.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><p>在还没接触大数据的时候，着实被那么多技术组件和平台架构吓到了，以下列举一些</p><p>Druid、Kudu、ClickHouse、Flink、Spark 、Storm、Impala、Presto、Hive、Kafka、RabbitMQ、Canal、Doris、Apache Airflow、Oozie、Azkaban、DolphinScheduler、HDFS、YARN、MapReduce、Hive、HBase、ZooKeeper</p><p>😜是不是看着有点吓人，不过没关系通过本文可以帮你迅速建立对这些技术组件的概念性认识，分门别类出来就能知道都是干啥的了～</p><h3 id="大数据平台架构"><a href="#大数据平台架构" class="headerlink" title="大数据平台架构"></a>大数据平台架构</h3><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgwhiteboard_exported_image.png"></p><p>大数据架构平台分为：数据集成、存储与计算、分布式调度、查询分析等核心模块。我们沿着这个架构图，来剖析大数据平台的核心技术</p><h4 id="😄01数据集成"><a href="#😄01数据集成" class="headerlink" title="😄01数据集成"></a>😄01数据集成</h4><p><strong>1. 日志同步</strong></p><p>开源日志收集系统有 Sqoop、Flume、Logstash、Filebeat、Vector 等，其中 Flume 在云原生场景用的多，Vector 是一个很高效的日志同步工具，刚开源不久。</p><p><strong>2.数据抽取工具</strong></p><p>大数据分析不能直接在原始的业务数据库上直接操作，所以需要抽取想要的数据到分析数据库或者分布式存储系统（例如 HDFS）。</p><p>常见数据抽取工具包括：DataX、Canal 、Sqoop、FlinkCDC等。</p><p>1⃣️<strong>离线数据同步</strong></p><ul><li>Apache Sqoop 是一个专为 Hadoop 和关系型数据库之间的数据抽取和传输设计的工具</li></ul><p>Sqoop从关系型数据库（如 MySQL、PostgreSQL、Oracle、SQL Server 等）向 Hadoop（HDFS 或 Hive）导入数据。</p><ul><li><p>DataX 是阿里开源的一个异构数据源离线同步工具，致力于实现包括关系型数据库（MySQL、Oracle 等）、HDFS、Hive、ODPS、HBase、FTP 等各种异构数据源之间稳定高效的数据同步功能。</p></li><li><p>Canal通过模拟 MySQL 的从库协议，实时解析 MySQL 的 binlog（二进制日志），获取数据库的增量数据。</p><p>实际同步大数据量的时候容易丢数据。</p></li></ul><p>2⃣️<strong>实时数据同步</strong></p><p>FlinkCDC是目前用的比较稳定且能实时同步大数据量，实现多数据源之间的实时同步</p><p><strong>3.数据传输队列</strong></p><p>数据传输有三种：</p><ul><li><p>Kafka：流式传输</p></li><li><p>RabbitMQ：队列传输</p></li><li><p>Pulsar：流式传输+队列传输</p></li></ul><h4 id="😯02-数据处理：数据存储、计算"><a href="#😯02-数据处理：数据存储、计算" class="headerlink" title="😯02 数据处理：数据存储、计算"></a>😯02 数据处理：数据存储、计算</h4><p><strong>1. 数据存储：HDFS</strong></p><p>HDFS 特点：横向扩展，数据容错性高。</p><p><strong>2. 数据计算</strong></p><p>在众多的计算引擎中，MapReduce、Hive、Spark 等通常用于离线处理，即批计算。</p><p>Storm、Spark Steaming 等处理实时计算的场景较多，即流计算，Flink 既可以用于流计算，也可以用于批计算。</p><p>📌1）离线数据计算引擎</p><p>Hive 的用途很广，也很可靠，底层基于 MapReduce 的封装，属于 Hadoop 全家桶组件之一，缺点是只能实现离线批处理。</p><p>Spark 是非常高效的批处理工具，成熟，稳定，比 Hive 快很多，并且还能实现近实时的数据处理能力。Spark 功能全，架构新，基于 RDD，计算过程中优先利用内存，并优化中间的计算步骤。</p><p>📌2） 实时数据计算引擎</p><p>实时计算引擎大体经过了三代，依次是：storm、spark streaming、Flink。其中storm和spark streaming现在用的很少，大部分公司都在用Flink。</p><h4 id="😊03-大数据查询"><a href="#😊03-大数据查询" class="headerlink" title="😊03 大数据查询"></a>😊03 大数据查询</h4><p>常用的OLAP引擎对比：</p><table><thead><tr><th>特性</th><th>Apache Druid</th><th>Apache Kylin</th><th>ClickHouse</th><th>Doris</th><th>StarRocks</th><th>Greenplum</th></tr></thead><tbody><tr><td>架构类型</td><td>分布式</td><td>多维预计算</td><td>列式存储</td><td>列式存储</td><td>列式存储</td><td>分布式</td></tr><tr><td>查询性能</td><td>实时低延迟</td><td>Cube 高速查询</td><td>高并发快速查询</td><td>SQL 优化高效查询</td><td>SQL 优化高效查询</td><td>批处理优化</td></tr><tr><td>数据摄取</td><td>实时 + 批量</td><td>批量为主</td><td>实时为主</td><td>实时 + 批量</td><td>实时 + 批量</td><td>批量为主</td></tr><tr><td>应用场景</td><td>实时分析、监控</td><td>BI 报表生成</td><td>日志分析、实时查询</td><td>企业分析、报表生成</td><td>企业分析、报表生成</td><td>数据仓库应用</td></tr><tr><td>技术优势</td><td>时间分区、高效索引</td><td>多维分析</td><td>列式存储、索引优化</td><td>MySQL 兼容性强</td><td>MySQL 兼容性强</td><td>SQL 支持强大</td></tr></tbody></table><p>StarRocks 的性能确实很强大，速度最快，但三者对比提升相同量级的性能需要更多的 CPU、内存资源等；<br>Impala 在开启各项优化之后，效果是可以接近 StarRocks 的；<br>Presto 性能一般易用性感觉最好，而且发现跑部分 TPC-DS 测试时，调用 HMS API 的频率偶尔很高，曾经把 HMS 搞挂过。差不多就是开箱即用，配置很简单。支持多源数据（多Catalog）的接入，但是随着数据湖对底层数仓存储层的统一加上各个。其他高效分析引擎对数据湖的支持，这块的优势也会被逐步抹平。</p><h4 id="☕️04-数据调度"><a href="#☕️04-数据调度" class="headerlink" title="☕️04 数据调度"></a>☕️04 数据调度</h4><p><strong>1. 常用任务调度系统</strong></p><p>提到常用的任务调度系统，大家都会想到非常多，包括但不限于：Crontab、Apache Airflow、Oozie、Azkaban、Kettle、XXL-JOB、Apache DolphinScheduler、SeaTunnel 等，五花八门</p><p>Crontab为linux系统自带的调度</p><p>Apache Airflow 国外用的</p><p>Oozie离线hive脚本调度用的多</p><p>Apache DolphinScheduler（海豚调度）更专注于大数据场景</p><p>Kettle比较传统的定时调度</p><p><strong>2. 资源调度系统</strong></p><p>资源调度系统主要包括 Yarn 和 Azkaban。Yarn 用的广泛，上层很多组件都要支持，所以很受欢迎，对其优化很多。</p><p>Azkaban 是资源调度的小众分支，用的人不多</p><h3 id="大数据开发岗位"><a href="#大数据开发岗位" class="headerlink" title="大数据开发岗位"></a>大数据开发岗位</h3><p>1.数据开发&#x2F;数仓开发</p><p>编程语言主要是SQL、辅python，shell。</p><p>数据开发工作流程可大致总结如下：</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20241226183224.png"></p><p>2.大数据平台开发工程师</p><p>搭建数据同步、数据质量、数据服务、数据血缘、元数据管理等平台</p><p>以上使用的编程语言基本都是基于JAVA，JAVA基础是必备的。</p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>大数据</category>
      
    </categories>
    
    
    <tags>
      
      <tag>大数据</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>python爬取指定微博用户并基于微博内容生成词云图</title>
    <link href="/posts/2024/12/4f0d2a06.html"/>
    <url>/posts/2024/12/4f0d2a06.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><p>😄程序用途</p><p>该程序用来对感兴趣的微博博主进行分析，根据微博内容生成词云图,效果如下：</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20241226162349.png"></p><p>📌一.爬取指定博主的微博内容</p><p>爬虫部分主要利用Requests包爬取相应的信息，感兴趣大家可以自行阅读代码，这里主要介绍词云的生成，就不展开说爬虫程序了～</p><p>爬虫全部代码：<a href="https://github.com/YUTING0907/pythonTools/tree/main/WeiboCrawler">https://github.com/YUTING0907/pythonTools/tree/main/WeiboCrawler</a></p><p>📌二.根据微博内容生成词云图</p><h5 id="1-中文词分割"><a href="#1-中文词分割" class="headerlink" title="1.中文词分割"></a>1.中文词分割</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">stop_word_list</span>(<span class="hljs-params">filepath</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;创建停用词list&quot;&quot;&quot;</span><br>    f = codecs.<span class="hljs-built_in">open</span>(filepath, <span class="hljs-string">&#x27;r&#x27;</span>, encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span>)<br>    stopwords = [line.strip() <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> f.readlines()]<br>    f.close()<br>    <span class="hljs-keyword">return</span> stopwords<br>  <br><span class="hljs-keyword">def</span> <span class="hljs-title function_">seg_sentence</span>(<span class="hljs-params">sentence</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;中文分词&quot;&quot;&quot;</span><br>    sentence_seged = jieba.cut(sentence.strip())<br>    stopwords = stop_word_list(<span class="hljs-string">&#x27;stopword.txt&#x27;</span>)<br>    outstr = <span class="hljs-string">&#x27;&#x27;</span><br>    <span class="hljs-keyword">for</span> word <span class="hljs-keyword">in</span> sentence_seged:<br>        <span class="hljs-keyword">if</span> word <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> stopwords:<br>            <span class="hljs-keyword">if</span> word != <span class="hljs-string">&#x27;\t&#x27;</span>:<br>                outstr += word<br>                outstr += <span class="hljs-string">&quot; &quot;</span><br>    <span class="hljs-keyword">return</span> outstr<br><br></code></pre></td></tr></table></figure><p>stop_word_list函数作用是通过jieba分词库进行中文词的分割，然后加载停用词，也就是将一些语气词或者一些不想看到的词语不做统计。</p><h5 id="2-词频统计"><a href="#2-词频统计" class="headerlink" title="2.词频统计"></a>2.词频统计</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">write_word_count</span>(<span class="hljs-params">filename</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;词频统计&quot;&quot;&quot;</span><br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;seged_&#x27;</span>+filename+<span class="hljs-string">&#x27;.txt&#x27;</span>, <span class="hljs-string">&#x27;r&#x27;</span>, encoding=<span class="hljs-string">&quot;utf-8-sig&quot;</span>) <span class="hljs-keyword">as</span> fr:<br>        data = jieba.cut(fr.read())<br>    data = <span class="hljs-built_in">dict</span>(Counter(data))<br>    sorted_data = []<br>    <span class="hljs-keyword">for</span> k, v <span class="hljs-keyword">in</span> data.items():<br>        sorted_data.append([k, v])<br>    sorted_data = <span class="hljs-built_in">sorted</span>(sorted_data, key=<span class="hljs-keyword">lambda</span> x: x[<span class="hljs-number">1</span>], reverse=<span class="hljs-literal">True</span>)<br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(filename+<span class="hljs-string">&#x27;_word_count.txt&#x27;</span>, <span class="hljs-string">&#x27;w&#x27;</span>, encoding=<span class="hljs-string">&quot;utf-8-sig&quot;</span>) <span class="hljs-keyword">as</span> fw:<br>        <span class="hljs-keyword">for</span> k, v <span class="hljs-keyword">in</span> sorted_data:<br>            <span class="hljs-keyword">if</span> k != <span class="hljs-string">&#x27; &#x27;</span> <span class="hljs-keyword">and</span> k != <span class="hljs-string">&#x27;\n&#x27;</span> <span class="hljs-keyword">and</span> <span class="hljs-built_in">len</span>(k) != <span class="hljs-built_in">len</span>(<span class="hljs-string">u&quot;一&quot;</span>) <span class="hljs-keyword">and</span> k.isdigit() != <span class="hljs-literal">True</span>:<br>                fw.write(<span class="hljs-string">&quot;&#123;0:25&#125;&#123;1:&gt;25&#125;\n&quot;</span>.<span class="hljs-built_in">format</span>(k, v))<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;词频统计成功，写入路径：&quot;</span>)<br>    <span class="hljs-built_in">print</span>(filename+<span class="hljs-string">&quot;_word_count.txt&quot;</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">read_counter</span>(<span class="hljs-params">filename</span>):<br>    file = codecs.<span class="hljs-built_in">open</span>(filename+<span class="hljs-string">&quot;_word_count.txt&quot;</span>, <span class="hljs-string">&quot;r&quot;</span>, <span class="hljs-string">&quot;utf-8&quot;</span>)<br>    tmp_count = file.readlines()<br>    word_count = &#123;&#125;<br>    <span class="hljs-keyword">for</span> row <span class="hljs-keyword">in</span> tmp_count:<br>        row = re.sub(<span class="hljs-string">r&#x27;,&#123;2,&#125;&#x27;</span>, <span class="hljs-string">&#x27;,&#x27;</span>,<br>                        re.sub(<span class="hljs-string">u&quot;([^\u4e00-\u9fa5\u0030-\u0039\u0041-\u005a\u0061-\u007a])&quot;</span>,<br>                               <span class="hljs-string">&#x27;,&#x27;</span>, row), re.S)<br>        row = row.split(<span class="hljs-string">&#x27;,&#x27;</span>)<br>        <span class="hljs-built_in">print</span>(row)<br>        <span class="hljs-keyword">if</span> row[<span class="hljs-number">0</span>] == <span class="hljs-string">&#x27;&#x27;</span>:<br>            <span class="hljs-keyword">continue</span><br>            <span class="hljs-comment">#row = row[1:-1]</span><br>        <span class="hljs-keyword">else</span>:<br>            row = row[:-<span class="hljs-number">1</span>]<br><br>        word_count[row[<span class="hljs-number">0</span>]] = <span class="hljs-built_in">int</span>(row[<span class="hljs-number">1</span>])<br><br>    <span class="hljs-keyword">return</span> word_count<br></code></pre></td></tr></table></figure><p>这段代码的功能是对给定的文本文件进行词频统计并保存统计结果，然后可以读取统计结果并将其转化为字典结构</p><h5 id="3-生成图云"><a href="#3-生成图云" class="headerlink" title="3.生成图云"></a>3.生成图云</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">gen_tag_cloud</span>(<span class="hljs-params">frequencies, filename</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;生成标签云&quot;&quot;&quot;</span><br>    d = path.dirname(path.abspath(__file__))<br><br>    mask = np.array(Image.<span class="hljs-built_in">open</span>(path.join(d, <span class="hljs-string">&quot;view.jpg&quot;</span>)))<br>    stopwords = STOPWORDS.copy()<br><br>    wc = WordCloud(background_color=<span class="hljs-string">&quot;white&quot;</span>, max_words=<span class="hljs-number">2000</span>, mask=mask, stopwords=stopwords, margin=<span class="hljs-number">10</span>,<br>                   random_state=<span class="hljs-number">42</span>, font_path=<span class="hljs-string">&quot;msyh.ttf&quot;</span>, width=<span class="hljs-number">1280</span>, height=<span class="hljs-number">1024</span>).fit_words(frequencies)<br>    image_colors = ImageColorGenerator(mask)<br><br>    plt.imshow(wc)<br>    plt.axis(<span class="hljs-string">&quot;off&quot;</span>)<br>    plt.figure()<br>    wc.to_file(filename + <span class="hljs-string">&quot;_tag_cloud_default.png&quot;</span>)<br><br>    plt.imshow(wc.recolor(color_func=image_colors))<br>    plt.axis(<span class="hljs-string">&quot;off&quot;</span>)<br>    plt.figure()<br>    wc.to_file(filename+<span class="hljs-string">&quot;_tag_cloud_colored.png&quot;</span>)<br></code></pre></td></tr></table></figure><p>这段代码的作用是根据词频数据生成标签云（Tag Cloud），并保存成图片文件，可以将view.jpg背景图片替换为自己喜欢的照片，生成出来的词云形状将是背景图片的形状。</p><h5 id="4-主程序"><a href="#4-主程序" class="headerlink" title="4.主程序"></a>4.主程序</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Usage:[filename] e.g. rmrb_hot_weibo_content&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;filename: &quot;</span>, end=<span class="hljs-string">&#x27;&#x27;</span>)<br>    filename = <span class="hljs-built_in">input</span>()<br>    <span class="hljs-keyword">try</span>:<br>        inputs = codecs.<span class="hljs-built_in">open</span>(filename+<span class="hljs-string">&#x27;.txt&#x27;</span>, <span class="hljs-string">&#x27;r&#x27;</span>, <span class="hljs-string">&#x27;utf-8&#x27;</span>)<br>        outputs = codecs.<span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;seged_&#x27;</span>+filename+<span class="hljs-string">&#x27;.txt&#x27;</span>, <span class="hljs-string">&#x27;w&#x27;</span>, <span class="hljs-string">&#x27;utf-8&#x27;</span>)<br>        <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> inputs:<br>            line_seg = seg_sentence(line.replace(<span class="hljs-string">u&#x27;\u200b&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>))<br>            outputs.write(line_seg+<span class="hljs-string">&#x27;\n&#x27;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;分词成功，写入路径：&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;seged_&quot;</span>+filename+<span class="hljs-string">&#x27;.txt&#x27;</span>)<br>        outputs.close()<br>        inputs.close()<br>        write_word_count(filename)<br>        word_freq = read_counter(filename)<br>        gen_tag_cloud(word_freq, filename)<br>    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Error: &quot;</span>, e)<br>        traceback.print_exc()<br></code></pre></td></tr></table></figure><p>将以上函数合并起来就是整个词云生成程序了～</p><p>整体代码：<a href="https://github.com/YUTING0907/pythonTools/tree/main/WordCloud">https://github.com/YUTING0907/pythonTools/tree/main/WordCloud</a></p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Python解析英文电子书并提供词频统计和单词解释</title>
    <link href="/posts/2024/12/416044d.html"/>
    <url>/posts/2024/12/416044d.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><h3 id="程序用途"><a href="#程序用途" class="headerlink" title="程序用途"></a>程序用途</h3><p>最近看英文原版电子书有点苦恼，很多单词联系上下文能懂个大概意思，不影响整体的阅读，但是看完之后又想巩固学习下陌生的单词。于是乎，就想的是能不能用python写个程序把单词根据单词等级(common,advanced)统计出现的频率并解释单词的意思，所以就有了这篇文章啦～</p><h4 id="1-下载单词书"><a href="#1-下载单词书" class="headerlink" title="1.下载单词书"></a>1.下载单词书</h4><p>首先下载好英文书，这里分享一个免费下载电子书的网站<a href="https://zh.z-lib.gs/">https://zh.z-lib.gs/</a></p><p>以最近喜欢的Nicholas Sparks的《Message in a Bottle》举个🌰～</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20241226142518.png"></p><h4 id="2-从epub文件中提取内容"><a href="#2-从epub文件中提取内容" class="headerlink" title="2.从epub文件中提取内容"></a>2.从epub文件中提取内容</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 提取 epub 内容为纯文本</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">extract_text_from_epub</span>(<span class="hljs-params">file_path</span>):<br>    book = epub.read_epub(file_path)<br>    full_text = <span class="hljs-string">&quot;&quot;</span><br>    <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> book.items:  <span class="hljs-comment"># 直接迭代 book.items</span><br>        <span class="hljs-keyword">if</span> item.media_type == <span class="hljs-string">&quot;application/xhtml+xml&quot;</span>:  <span class="hljs-comment"># 检查 MIME 类型</span><br>            soup = BeautifulSoup(item.get_content(), <span class="hljs-string">&#x27;html.parser&#x27;</span>)<br>            full_text += soup.get_text() + <span class="hljs-string">&quot;\n&quot;</span><br><br>    <span class="hljs-keyword">return</span> full_text<br></code></pre></td></tr></table></figure><h4 id="3-按照级别分类单词并统计词频"><a href="#3-按照级别分类单词并统计词频" class="headerlink" title="3.按照级别分类单词并统计词频"></a>3.按照级别分类单词并统计词频</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 根据词频和常用性划分单词级别</span><br><span class="hljs-comment"># 使用 nltk 自带的词库或词频信息</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">categorize_words</span>(<span class="hljs-params">text</span>):<br>    text_tokens = nltk.word_tokenize(text.lower())<br>    lemmatized_tokens = [lemmatizer.lemmatize(word) <span class="hljs-keyword">for</span> word <span class="hljs-keyword">in</span> text_tokens <span class="hljs-keyword">if</span> word.isalpha()]<br>    word_counts = Counter(lemmatized_tokens)  <span class="hljs-comment"># 统计词频</span><br>    word_levels = defaultdict(<span class="hljs-built_in">list</span>)<br><br>    <span class="hljs-keyword">for</span> word, count <span class="hljs-keyword">in</span> word_counts.items():<br>        <span class="hljs-keyword">if</span> word <span class="hljs-keyword">in</span> nltk.corpus.words.words():<br>            word_levels[<span class="hljs-string">&quot;Common&quot;</span>].append((word, count))<br>        <span class="hljs-keyword">else</span>:<br>            word_levels[<span class="hljs-string">&quot;Advanced&quot;</span>].append((word, count))<br>    <span class="hljs-keyword">return</span> word_levels<br></code></pre></td></tr></table></figure><p>可以看到上面的函数是先将文本进行单词的切割，再利用nltk库将单词分为Common和Advanced两类，并统计单词在文本中出现的频率。</p><h4 id="4-获取单词的英文解释"><a href="#4-获取单词的英文解释" class="headerlink" title="4.获取单词的英文解释"></a>4.获取单词的英文解释</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_word_definition</span>(<span class="hljs-params">word_tuple</span>):<br>    word = word_tuple[<span class="hljs-number">0</span>]  <span class="hljs-comment"># 从元组中提取单词</span><br>    synsets = wordnet.synsets(word)<br>    <span class="hljs-keyword">if</span> synsets:<br>        <span class="hljs-keyword">return</span> synsets[<span class="hljs-number">0</span>].definition()  <span class="hljs-comment"># 返回第一个定义</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;No definition found.&quot;</span><br></code></pre></td></tr></table></figure><p>这里利用nltk.corpus库中wordnet类来进行单词的解释</p><h4 id="5-结果"><a href="#5-结果" class="headerlink" title="5.结果"></a>5.结果</h4><p>程序运行出来的结果就是这样了，分为Common和Advanced两类，英文单词（出现的频次）以及单词的英文解释。</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20241226141626.png"></p><p>完整代码链接</p><p><a href="https://github.com/YUTING0907/pythonTools/blob/main/TranslateAndCounter/extract_words_translate.py">https://github.com/YUTING0907/pythonTools/blob/main/TranslateAndCounter/extract_words_translate.py</a></p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>运用FlinkCDC的大数据量商品敏感词扫描</title>
    <link href="/posts/2024/12/890ab154.html"/>
    <url>/posts/2024/12/890ab154.html</url>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="a4c026733253524c90611d3d74d298ff0054fee65b844c8b5635b16bbdfc3213">0a7e00277d1118ebcbb3ab2eced6aaa30ecf553a34266b37d769487fc2cfe35da253122506bca9b64ebf4ebb69c9c1842fc7fc53b8695c8b6f9b72b9ad3515dafc4e356ad0177e83f4d7cf5dded40d19f849bb474663d229fdfd0eb4930568ca5a7e89b356956745be6853284aee8eefe16cb0e56cc75a8e2c0f48bd10d9aada01d45cc4998a304ad080346411c8b7ccef1c34117d80948524455ff2c3b12e6dea934ca890ef73352034f3829236f8d6c5c73fc4650112419d750443ca85440c588a2c04db1d6a87f039122d84a10d1d1b1a104759e4e1eb93bbd2ad6603e93eb78a2033f02b523b7bd7e112a265da575e3b34993082804b1b547588f797b5ab7ecbd2f1b71a56bde5b3ecbfda54cab53875dd263de60de36c2ec4668c55bd87f09e98949ba56427433ffa9a35fa90a356d076e913ad7e31fade7139eef57e15ac3f43af8c44811564d65912d090e0becea318b267c26d1061d0412ff2efda57d9a57b351276fefe98b6ff2f4ae0d63a944d5fa1e75c5178c185261bed03d3019047edc9538f7c8f3ea5fbc1476e6a30444fd5650c1e6eb8743882070e7339de02304dd3259ea9133e4d5e00fc9f00bd436fe2286856583acae3a00eb50aec0278d52761c2d339f58c776827722e278a2c8cd006524b5d50e84bbd90783dffeacafad13b4e185d3bb872c3b74da24b982728fbbd92be594e1a42c90373a6613a917c168c53c42ff502c549233e4a5cfbe2477a3ffcbfffe675785a4a1ba80f3c242ece52edc7d166c71512d1f9833b7607f15ff4f02137e96e92462c8f49870129c0e7e4b31eb7fb4a0cb8a04af6612934ff2d386dcbf334c2d6aef2a28042509603370b7e7a062a183853589e9f10ce2f960bc4230b5128ea2f30de9ab5a5308e7afe36d7b9a3112c3177c75f88beda8242b8236fff054ee90d4b1b7bbe3834dd73488f4835f9876cc212e4eb5666f93e4de7beeaa708b98b1a6529757eebddfbe0b900228d65c04e8d68f7aed83d47b18e5b78cd19ceb6e1bb63709ab302cbe8f452642324e2ae7188e891a2d3069dac7b6a9d0fc849099e7805d3103eb78ad85a8edb53164b96da9ec1da23801297107fe3592262fc850d3a49f475ce0b6a6f0adc6f8d5e66974ffca3d9ab4ef58b847e49c01019db9014321628bde35a641274f162bb4e06693299f5d5a51835cfe375cd64e7e0cfc938a7bb0db9073686e06cc09a699673a89daddcc50cf6a1e0905a4ec11b481a40aee2e634f96ee12c32562a8c68a6da845627b479be2956c8dcb0ef929632a1f167cc3152df6213810cfb30bcb66c7e630d7447f871067e84bc3d6e22f53310a0212770f4f174e8062aab98e36680e5831b2cd198e796da17f72d0e324a8d19eafcae3891bca9379179d4e0673c00c9c2fc016de97570eb14aeb11706469b3b5be6fa2eb6395372d7e9cd4725293147e8ba9478e9f189e6d64c6dfbe8fef118286f66805b2bf6c67bd826274cc71b39fca2cff8c3f6cfe1d75ec9c38f1d264bbbd69f4e3b7aae9819f11a422e29613ff698fc6bc7b18fd73bc1a1d658d1fcf1c64f3aebbeab39a0b20bdf1c5563bb8d209124820e281c916f1fd177d0624653987a8faf5b02d8b1512da5c939928fbc9ff36ce5641c36ce8a0dbf458327d4a8d2c9663faa6ee729edb60366ff5b82838258f40de1a6adc75523f5dbda1e6c722b648e02766ea248ba3fedd73dae66458d133bff81b1dd8806553ba8f9167c62bc76ee40b5233455dba4c1d207b45b228dc34b9929df291e2a5a48616592fe74abb7e780a09ab62b1ebf5368f9060d00c5f4f6d4d32aafecd4c006c116595be08ba77ba8d58fef8077ecfd700bf3f11e4a99c6a335f9633285e8913e16f4566d02906103eddc2088bb945dda315c8ed8e026bfcd09ee279e258e23d9f27315315177ff6851a63fdf9c43b172b0ec56ced35931a2df78a8763e143e3dd34ee30a2bfaf1e8473d8e9aac5e3e854daac5e0a8fded80aa1e140a3af1c6eeb8b09b01fa50e527323e25450074e8624f4ab54c9290aa06b2000f6b481e1355ec9f0f118fea17a15133b64c56b6676183d25709dade17cb25518bffc68366983d2c79a301e9b716382017e5a7c32c90b84be485a80042b4003daa4c263dd398cfe57c10be02cf1d9b875b89089ccf3acc5c96e11f1355dba2f73dd2ae397d550655722476d7625d816371937bb4cd1685d48a765c5a016f510a9c54fea035c31e0d21dff68a5084c93d9eaf773f9e7f1d943bb6799067d80d3ebcc11bb8df58dca9265dca2b0ebf929195d7e7f3932f45efbdc45600ab94b526a915059b55adf6e4a610bfaf301461d91ca370a2cbf02a3d488177085d1d224086323327186d704c0e8d36191f0d07a44c13b16531881317162c1c8621947d2d0ff88eb351e74d431a3ce80749e04eef2bf0241cc370a9e161fc78f3c54a4b92ba080db5e114c699bd29ccbbe9caca18ca80b7d2fc27998986dd943b836862210837c4bb15f8b36a8f0a8eccf31ae506e9f065abfdbc10ac1cdefcc078cda2ed6c4cf85b3082e986608f7beb5cfa99cbd0d7959cd3237422ea58c2697af6cecc77112b03e73afced8255b15c7cbfba116288c8662add32690d40be3e2cbab44319e4c57ba2efafad29c790c17b0d9b0507251c3b730d17626d3f0142e64b4a2391719fa4048d6cc72aa1219b94ece51b057aeb6e39e02842dd87d6fc6d78e3d81c0bdeefa57ce9c23ab52890aa11ea56a1be415190be9cee5f0873a57ec59cbb964a1b4ff0bd0b88d103b453c6b6cc63c4b386a911be5618fd454b460c1fc40d96ceaa918f10d822bb3f077b65491c587bc5ca5902c3614dc1038241467eddf1d5d7fbf97887b3270ab1efc9851ebdd459d7e0573bfe382b8d714b3792180c0400f856419604ab5a1e5e14989e9a38dc321187ae34767cd422dda15e63ebbc587aff584faa49aa4bb21b5f22f6acf42f75a9e5a46846fc08eae4e72029b75d752f1a38e6e24d845ac0894f4b1de9b028fd692311f7155b9fb08d5ce6acb6362695ecb25d04df63bdfc2905b30b7b4396170886f123d10c293655bc88c215be9fa57c85bcfc1017fb530d2d7b523d203952c99164e7e09e40b3f0b7aa5398aa124cdcd4e22e802e76bea3a9929987c873bbee40c46e355334b72fd0bed89dd45798f46fd4c19102824b5c7d1e9fd04ae1385310792489a5571680a2ef8a8121a4150c27f92d398144b17421ab700baa13dee0a899c904cd42ac26415c947cf43754d5231a7fff832d216bc1f545b71c23bb30989f31d19b7c39b806422d3eb0aaf119ad220a33d239bf173c79005cd73cc1743f1b77adf31962463a6465ceb63dae08321e9a463a7b1bbc089902acab155c5d99c7bae372dc247ded3ee508bb1c4e9f635ea025e9d170f567d05a4806f7961d92e4fb8ecb9c1520564e413bd2dff139e5b2790bce552b744fefea03e5f2c8b8f79fb5eb0fcf8bc22b5c3178eea207ffc8960a4d069ada9590a3e772ace564c3d694ad7502f1bc723828debf46e9ca16a824455c6c1317c84c5d6bea3a35461d68caf5fe69ab6ce673a94d900af5d47a8beb670144f6bfdfff0d744e6f5cd3fdbf5ec5b376b3a1b050d43e46c0a0b7b2e9452e6ddc308569485db312267273d2e4ce5d72d4acbeb93964beae5c91e25a2c009f4c43c49992e6c3bab2b820eda070c9c998e9d2f75257cafea42612a2d62b2ef052dc4f51f9f8f52ba78328636aeac96b8d6ce7cf7443d84b0ed92bd3d9f41af4077585bd89b2c6a24d3a3f71c88c379311da24d332ca115039127a778bbcdf1ebb9802874bea8f74da82a8e06871996da81f0280373ccf4b579919c5679b8f443befa991ba16e93fb7364f15db9c6a8aa18d472aac59fe6b36063128c2cfe705577be53f83179c871a2e85625a2a6133f76902d7796c77e17edc910f2b12953df70fe2198a9f115f84ed425a41061bce929221b9048e2c74c927aef37c31392c692be462e84dda5999e1a4ff6d9c55c11d703f22bf6387a4f0a3b486d8beec327551c62936a5b775e40f92d457a6c416dc4ddfe303bb546a4d812ffc02c768dff602d124e722d4553c52c5cd95e7ab21ef53484ebe302ce5816c523b6127d47c63895febb1aedaaec50412a81661cb1d26a35f3e799e00cfc88ba97d6ac0a212d8e5131902ae74cb50472c711b6fbf957f8ad1186105e66261db98100f0f963a66a66cf8e5b8210a36a89023a900eab1f16e7a9d16b5b0c464fd05bb1573681db02d6e124efea48b85ad6d4c6408ac60495a3290cb5df121b32a45c8921b73d62a1981516356c1a9a99e0c353c64b80e4441b5634ffdd899b1aaf1fb2756e89418627ed3ff63789e1ffa47a8d6b3e191a4edcda3884da2f89a7159b01b4c89c68744539546328ba666819bbc339b5b6254093a5d5fe828b4f7bfd43d4f17e38153afbb273b6af3c04e0e639f48df15f2c5472f937c5b6db32c58c3f483e04cb42b01f53143e5d123ab042a2b213bf611b7894dc6d28e0c6635b47590768aa6c5157b41c5ed1c233271a068e60515d444d98a752a499e41ee4a307d4d8eb21d1468e154f32e75d8516f487f12777d892ecc687f4aaacb0989daa04f24ef567b182414f80c50ae201ba3f3cfbb003d2177ce3f095eb942b27b48053c56b8f5e4957922572abd3c8548d0f54cb1cd6a16bbb62f6d4fb07343fe42332eabe62cfdc888acd46df21da071aba7645ff6e977efbe4ce0ccc98aee4eb9ba44377a86b5f8c55c19f4389097848c9cb3e902687b4c4b94053e27715b7b64ce41ff75d9fc3b2b2d13860300c0927f81ba089cb982f484209434043c3f924e2188aae5765efba686aa8aca509955de8fde8efd42ef3ba893321c9e83518ccf480f48ba44a1db6bddbd19f390dc04f2d50d260007684481da75c3088d5a69529796d0784dbd413dc071273fb2affc7b598ba6d4beb61792818b5099988453f4ca9fa452ddd361c7cb4a8eca6241db62c555c47e6d0a0a3b07b48a0632926526109702cbf7f4a782b5f7e23f7ca3688a5858f0e936caf11c2fdaab36c06ae958555f4844f6683d4b78c5e88a9010bc13b5250db60f06caba954c5ac11b81b8c62f61d819076a001451bfbc691f619b796c68b6c6b937cfbe2792173d60a918ecb308ab3bac0aeebaf08a3635ef2a6aeaff4b16526e82bb496a0c018dd8d229bc86ee88b229f6615a5e468cf62806d6507231b46f5bd3c2d3bacab5977520e9559b696d7e0f493e6d0845b7a3ba93a75e4c31cd29040fed25490fc2463c26831d4c21baa72fda2de8d244e249828cc35750fbb9cf19db91513f7f6c2d62f7e30361550145c088bd060f773d26fd4427f2ff552ef727b6bac429dfe10594f30caddfdb0c08858339176df8b95bd9852f2b10bc2120435490e2121aea53a67eeaee9805d5040ad043fc9ecd26bc4de60419a50ee83bf0a2e9c5e3bfb460d6510c25c5daea80b4e472bdd94ded0d2f61c7cd422a984f8d31ba419df522761ed23b445b9227897617a6fdff4daa9309a59f6de580ae8dd75fa4d33ce6d1cafb2d4de57ef934f6728445429f09766407c6bcca654ce5f6c4ba6601eb7ec885e01ca2ab03659d2e588ebe3ba4ccec1d6c4109f4c55550899537f72d1d29e64de5fad73c7f76bc1a0d9eb7fa279db4aa45dfa9640382cef229ea98eeb0cedaf0bff16e5cb6939148d119b062fb6fac63c8af5a2675f6b87193d6fe6dbe056344cb74503d0aabb5433f97d625f4545d1f9a49f60d230996ec1e8e363188b49f4c41dbe9bdfc81e50039e42c96685cd4ffdd6ae2e40ff9b43a91f90521188e43228e317bdf66b58674c549c12db2dc2f4a1b0bb4507b8d916a906b24014418b72d16da695e401bdff3710e195e2b05ce06cc3a0ff2ad1db808dd41508c9cc38c96318b61ab59b113ce62ef1b6bbf339082701167254534d4f7a2e5ec3266a6c7c242cb81c162142e1c524b67097ea9f64422b1c6758665db6dc14e8b52e960abcdffd32412fb743ac23bc2f34e877c8f96795a15abc21e92f0f1e8922ad3f943d80cd05517f9eb7737a0cc7b7b1c7238b0b2bf25012266d459202f8d316b4b4453a1b640f0590038e9bd7eea4e915cdc15d4f2ce7a0dabe957eed306d0743d9ec921bd13f18486e7fdf1546a314ed557493dacaec9154c12c22d01438a57995d341a9ffa1ec2cb3c5a3d5a137ac08e45e9d56c422b65f0973ba959138fa1e32b50729011c6789528abd423d59f37132a1d5a92ceaf1e766f49c58e86985747274bacfe84dbf64e925b840a1d5b401ba681c07f339c0cc0a89cb88ec931f6843b8a2d7b0dc533487e31f221af76b18069fd8bfab9bc582788a6b4eb73b9dcf1417f54bab078648629497178a5f3fb449c19eba0e82a96fafbe095256c58e751d829b987b78349182326da18c1d95c64a57499174fb209d9d6ed66cc35a45a1dc1acfa2ebcf6b82cdb08181a348226e41a56c943a891d8f38cf57c73ef48fbf3934c9598ec46647e5e5f83ecf1758da8d085b3dad353854e9b029f6aacb45b92c9da914473b78bf967b42c7e26a443a1b00c5e15adea6a4682948c894effc322ddb35eebe17b536c587a13ac21dc4b7a793851ee8c7f203b3d6e3d8da9b45589a6600f1be0b8dee348d3216eea0f1afcd210a2bbb24cb67c6fc2a39dd79e9f2ddc9e3f6b5ef9f64bebbeaa6240c16bd90c1c8f65ce0f151049b92027434444a8a8adbc2f9be55c0792525dc80b8aa2acdbe06669ef809af38ab2df3396761643dff5b14914719e303690868b6a97e19a1079cf72c8734a78cb183a2064cc942d785e7e9854e7dc4177e46e76b20caac21c26e60167dbf345c6eb9931e5ad25bb07aa3504dcf85e5dc0a8e1c17a3196bc1bad2bb154622ff4595951bc13cc0bf4ae35779d0b71951ba9e0697262cf590b8a2cbaf1b5063c9a810ed998f55bae64644d287b16a86ff6ae6022b4215847e74d77a06f20aa85d481b4db7ad758ac34caaf0c24e276775ba2f4627290a6c91fb3082e46ab797a9c2e74539fc9844b173afcd6f3ceb9de9d3c98fc2239a7beaf061591b3c998dff9643e3c2a9aa3e2cf48d8f565337f4263eadfa0a26a5a1eebcfec6c4b22ee6de4c572f628f7f730beea755b2ee37e12c8e8424c37a41f189c26964b9062d0eae43128a4f26290f9f3b3bbe2109fc6ae5bef8483432cdd42f5e4ba36a6a2e4c9d293438aa4d9c7f53e5d9916a0bde20cb2dce8ccf2c3b6474a2f1719c55322bd72335049d946f14086a81d0e5aa2f73c9c5c3b847b64f3207877b47d586abd278fb4e0f939d8be8bcc11192084caa5419253864f570f37a674b168fe5bad300dd0c36aee9b89a310ae0adaf70c2b55218c3655f79bf991614e3b0306d01f20e98c2e28f145e5955d7f435c828db3a258a3ee058211dc40359618af82f896dc8db7e3d6d37a77c62fe0f4014a1a2cd6eac6813d0b5ef8b391d62b489b369da3bdcd5469bfefa2c0defb93e7cfd2da48da300a06a5b738e1f6419b4630366acc2bf783e190699cebf452485d7fcdc3cc20ae1605d417e86a2c5f915bcc761c0d1a02302f6a99a2fe4de94bf7d3c4cb06d8a0cb2a013d8dd8687c46e7b1695490452b8878ca42eb2793301feb3973c57dba44955f19fe4fac1eb3597a265351d825f3578a4908cd5cedb8e09efe064ad56ff56504461860aa441840c6eaab83991e92cbb01a30cc1873ff239da4be1d9ad4e5938a102ad26fa790f7806375e73255b7ae900713fbbf6f29c878ab7072a0dda58a912e1c097ef26727c27ffabc94772cf2fe368db6949c8ba7a199e9a0ae55e806876e90bc35638c50d78718de3eb432b1a891da534506a1065e9ca7d1862c2c8155f3dffced93e4db857d9f00201c82f28bd68a66d817e632d162daf9a71b0b9ca33256a2a5e14bfc5f733ba3aec7d37a465698ea184bf3f32202c50e24f089d272c20654ee8d4f1297b16e56b57a9d5886ea9775a6665844f7cf13fcc5cb40d5bfc0e6e9f9f6cda53af9ba46f6b87a51c96e150f91b176c09582bb20ee41eb456f34a2bcbfc1aec99d9b8e2994650b61b76b65ee354cf05e032fc8f7eb44ed7f4cd7712d12339867e1804419f52f773b7f265ac646e00206370e72ade60b1cdda3ad392edb1fa4191099f4c9809e9381cb295c8046092532f423e7f9f99835127a0175d1762dcbb1c85adc066d15a22dacc82142b6e426c89834751dccb8b55b7a1c1d1c53e7659697c37c2574be1d5fe87b60e21f23cec75ce464968ac65c37a033552457d785b818e53d050e7f5720f36117635bf16ffec5dc50554e0d909ea4162470f1febde9be99fc28152ccf4c38da925ced46ff9f2d594a8269697e595053ea905586ae366dcd41832dcd79780789f1ba92160e53492cd268f751e359dd36c7c7fe8f6ff93ce83531d7d0c0a56aebb998b081d892d55cad2e038a88f06b1a48c0ed409f73357586174a20a6744a4b409a4471a0fbd05980b2d52539ea9df276751243f4857424230e67758a20286410deee2d19bf9ca1f74e5c5358b133737a878c2a198791b47b4b20ce9abc3f874944d0cdfc33bcb3c42c8d6a92127121c016a9107f059bf164b34f6104975315126ec0896c02c93abe83328d939fca53a2b64cf32355e1fb931e90a94eae32f01a5a938d0bb4ef10249ed2f2f5013c6647a27b94b6b5c37bd4e999f0fbc3b9e7714a7a36fab383aeacfc07e3f9f95f8a2c4ae3615661ebc8c7bfbc174a6b8db47cbd74ccc696764aae9a76dc6de50d5e2796e2bea254273e2e90a674daae458f3ead99d103445a562f89d6026af0a9557a3733b23e7b4556a12627aa2662d3fbed043a4193f211c83a260e120f7699f83eb6a6778d9535e11e9345b9c03f19023f0d0842014632a46400cd9ea4129cc1ed53274f9dfbce39c3dff5f0b898bebb9596ba174b8a53be86c588d23e05905565e25c6927971d07e6df7bce1626d412bdf22f77e4fe0eaf57e6dd8242c3ab278922f9919c24a410525f7bbc08dd64b388aca5b74a0dd42f31ccf04c9e03afe42dbbfe7b16f462c91d3e83f75a94cc46ec9e1580bcc60e68b9d72774d6188e639ac3373d4e9538324a5e4b4e4f529e18993c3be06ae8d88fc73be3331152977d926a316fe83bb1370da017611d8bbe8e1c3970484e7635dfbdd6f1503790bd658b90dd6b59c9ecbd5ec9dd5b209a02d77b42e4f3c4ede5fb8ec14040e999abfb5173e4db123f8ca8e698302cf1f7f59fcd8c776d9af489308a45f08ffbabfc7417531909315dba0cce870e79590883816e55f4e90199fc11e8fb5b512f0e15fdc321e02de4ea45e978698ae5cf1a2e7e566c68d29176c07afad586900dc78204ad61aa0a4fff86c43391a8ac29ff02263072111af1b1e4a5f032b5eba6880e9bd6395966933f44dc7eadd1bb41c1642c2114bc005232b73373bfe118f1f661b06640e6ada6b1090fda16406c881d6f4a4314fce3d42308351a8dd229fb94661a78058aa87ea07a7852086aa84515b312f8746b82917425baee41de3009d74991424d2cd8015f9c6f2489152aa13f62d8a307213a2f7c4053c8fc598153ae9eaad12f5adfd29b858710d74df9b3593abeca14ab5362dbf3888fbe44cc5f56b6c6b855242f54c4b81352f66bd8729a279891df9fc73af7f228dc81163a10bfe97b46ce8c3b40d71e03f635f50281367ef6fe4727033dd60248a4d50f54645534456285151667b84b9d4f89e8c86934fc591f0040f688349e7428a4ee02729d2107dbb4c92643b8c74131d323965a6e5649d160e5a45ee7d3a7d915e3f6e61d42e86a3e992f563cf86dd09c2cab91c712705e354c9094fef543bba6c186f990726ed29cc1141dc0a97ad4f7db99f4469d2fb3d6dbc5c70269846140b116d6c0868a990674a703f3c8dbc0f239c2d9147698c101387e084900b6e2b8317fbdae0d10acb61c8d180c4cfcd7636ec7242a48e22d8e799013637e58f4c3e483ae91e17984141b28c38c5e09820c06fcc10bc6c72e84f9811c440be9b097439f23360c3bc78dc178a374680982e1ef26df904b1f33e6b5c2fe1aafbc0b3c7f0ce2829eaeae66c54d1a9166057841bf90f3314b3142dd4aa9f0293c87f3d0300ffbc46c912edbdcafd9785cfd888bda16ff8c5c8c8f3e332bd395de027122173f6b7d94e380216215941f6274438dd774fee3ea3a2228745a50183cd1571b77f9ff976c5ddaa21d6f7813416a3b3abca5cb6e5044509f2f2268251a7aea980f0c487d25ff63dc4ed6c4f3f67c6dcbb4c86681547e95ab5f221094b9f43fa9d85685afe5a13e1f10a4bd363363f75ac32b8b7d58ec85c468341e64c8a0265502957a36bbcc6cbe73855a40edd7720cb8aa487db59b5ca9e1a5912be4b744706ae0121bf8429417c100390c77ace2fcb803c86d75d0f0436e077b725c073023b4f1357a1d889920c1bd411307ea3127557397d77a63c037e8043d83580c527acbc6b5ef4828ccf3627fc009eafaa5da03f1092b0e0731a18d2f28064aa77d0e3cf2d2b347ff6f72507c3e7eff65db57a1750e4aa8324680cf0b4a1185099bafeb1afbd94e73a020e37f156a4aae83ae37f3950b56fc3a14063faf419b603bdec0850f2b47a1ac23f261e49a8635d50bcf79de338d991a38a391dbaba15b8d6948e41d91ea990af26a7b8f9f85861a69b1ea4cf3a7cf51a35305eeb0caed462dc62bf5a16e18bf421a9f6f4cc4cb5ba17013e9d16711457066dc34eac366d50860101665d4ea24568c80cc57139ce7390518afd80de2d6335bf8db6bc267ed46ed9621a5a54381d275f8dc5609fd5ce3420b4c597d84117fe8801dea3999e99eaa4916d2080e45725a8e030a566a5255d76abef90ad64c43c1ef69707c8f4e769bc94032d8d26374e1df69f5f95ef4ce5910760a5e40a2f3aef8bd9153568fbe75a52a34c082844c1d871eb05f55335d7398180b1d68825795a2a829c68e773a268fcb18b4e7b20dca8b6d4aadadb313757d68b40bfc18dffdb968b35abc6738e1c5b500304d8d618f8327475ec452551851bfc30bc73c83f768b0349bcff7765128bd3575ef6b2a4b7daeb4365ff53b16eaca5f3b79ca0e3dc6412ec61bc952eec478dd5a771f53920915cf3e4367fb455cc06ec6885fd2ad98825ec35f64bf4851bc63ceec99a5d40b10043dcdd01d97e2419aee2f8ed44b579436a1b43a4156e4fac0615e8a5724ad9c92917203d5416fec766ae07cb80b6c1d23fc95195bb417961979e0645bfd3237b5828d0d1a46ab725a5997dcf3c2afc17e4101f96f57022d1759e014c089c6325ae30f17d703aaa8db6db92040c7e04c6d54cf86229b89feb0b9c4374273c2fc5918e9383a6487dbd45b6ea9a6badaf284c0e1c3ffc0407b4ddb1bcc09c6c1c206cb8ac7e36bbcabfd10813c1b43d64ccbfb741c4dec9b289c7a5fb63d007395600f4a1ba587ffb2f12d355bded594f03d2067455554ea8ec7c022f752d39ba4aabb50ebcf83d147cb7be2ec0cbb9f1a6fdfd96b12dd4616c15b7177c84eea02cbba3f267de28c3d01e22ddde89bc889854a627d1a71c1a86b1e7ffbe6ea18f6e0c466a5f4b52a80439712fe63736178b7da396586251fd3a8dff856025bfd28ad3c8ea45d1fed6d07611299087950a4bb022f605e07f08cffa0b93e2b276fbbb4279a3693f312d4104b593774010546c159479d5d491e4ecbd5bc170c79a8e01600b5ced13627af77528a72dd2711cc30d42ccd984a45385dce9a039bb33fc44fc4ece01303e3028d6a5f5b8b9da2fe8d3e3fe124d1694399ffad04f59982b55ff431b1f4b03fb93fbeab352561cc4f1cf691070e1de6fd3e29093b5202fbda933eb7f68c7e9bd45f663f851ad899a2fa5aea0d8f8779e4c56a21ae31cd2e31d1b555ef04d700a2e68fc26a9db306018675b1eeb8b8a43669e48b4de58f2bc7e87792972e92e4050ace49e2e1772eccf7c8d8426b889bbaea55dc4bdfd5271d1410f36b9b207d27053e43a3ffbeacd00c096c963a3acdb642ec467df73a8d92ea93e3b8b1e804d24660b1a4e37d68376cb18ed6e99e00e895fb767c1412e7c6d773ca60a35363da8718ff2242123357a9760184c48e95431c9480527d8c7e5010f41bb89955de609927967cf68267a30bcf4e20d216394dbbea122951258ccc8004e4a844c2a2a1862c8ca779f2808f610abd0801432cf4422320e4981769789d60bb9ea4638ede67f3f50a64ff9cd375ee1d810f7b574ec074d84146fa48658e306434594306909e0984e0fb3b1871ed6d0fd1c2bc9c9c817268504f2592e8a2f1a9d98132d2c65d5a6573d807f061e46ced8a0948cefdb4bed08e25ec16b68d6882fe350e2c337d9e53775947dd292e5a456b34def93526a463c310de70a547dd00a7c652a43aab5aa22b180d0da05e3dde6886c0917c698084a86ea1dc16c38e3503a91ca17171814c13fe6688cb33648cc2b3fd606f996d25e73af2bb1f57c661d6eff1363c2acf6237e37fba2d77668704c86fe052890dbd9193455f77fd34c59f68879507d6b1bfb79070f122f0bf9ef9866a5b8daa737a83e59850ceab7af7825b83c7da1c6c65e69df3bfd6d7163ec3709f29e101d684642ce39107b4862c66c6a0e73b838d6b96074141c7fcf465b3d76ee1887f7cb8d5a05cb9ec8cd91bd94e12c0c2429ca9b218d17fd9e4e7d62e830e58c1764cefeb1f9fee817c1f7ee6adfe33febfce3e52d17ac9add1f68c683f02fb6a80529c3f75e05b17a290a65ce34bf85bc30dffaaaf9955a18d8b657130de0f753f7e84c9b525eb2a889d31a0b3292182fd03c9a7c0047326fd6d419eaa2195838b941823659732cfd25092ccb74bf3406235bfc582f72fba83b7471936e7d1e61960b39ff491cb12c489dac1399bd087f138551ef8186e5661c6a8aac8ecfdb069cfdee0bd518b45109f7fdf47226f4e42fd69d9e7f0ad3eca882ccb048def11ae4bffd8afd9e66f4ccfaccd65401f3fb3e2cf8d0075c2d6505b9174ac41f8cad7fa4b7205e21a270429f74c7a0772944c6734ef1f7508dda310f56edf8bda3b700fc261f6a10bffa750edb424727ce788bb3daab99ce0216878024735ed742d40819df5c0dafa0a01bc77d51eeebfd227ed3898342d76ab8c42505b4861e080d2995c621b19a0be54ad5bc58f2f3a49c9944a1d26d35bf05103e9ca90f8a13ce00bb60ce65df2712882a438d048b9cb8e6095c264c8b781bd38e469a072c3c434bc05a0d9e58a5b63184b29067b9611a7881a7471caee3874fa87e58125449f52d4737f9c90f525dbb0aa16f08b3e31a62648f927e4f1214e76f73de27770f30193d2f99e9917504f8099f306cc93e129440d69cca04b382f41c4392faee0314c58d330d117a57e3fb06e92142c71f1d7ea5bd0d313a65ea5316b39f4d18739636015d383b45596183e7d93401b3cc662f5d1a8e832bfb8339cebc119fe43bad156ac5feb0aa487975b94b58010a52d07e445e86563363d474d8241eaf568db5dc1e935ff317900e7e4905333a6a415f98d9226c4b58cea348ea352f491d858aad146c0f7e1dc27f2c2b801c48423b778435aa1e0b1281ced3869a66581265cb111359a0dba1644953c5a21d62be7369824c2db7689b5e2d7b834b6895e6a97b62f86e642cfb7bffd343c2d7d2628de55667770dc16644c75be4fa2a9a381da11c46a8cfc8d8c8e85df14b258eb2f12495ed78e96a93b6f8298a11044095d7a43059bcc0e0c4a3a5dc7d9e90a640519cafb3a042f8d59b57dba68c26835b62a7fc4e0c600110ef042cfdd448dbd9efbad9fa6d64fdcfd673f3f1bea7596d7cf5c753040af19ffc015e18b5674d10db7a41e3b90b4ff67933006834dcdb3895d5fdf2d21885abbe5564ca8d0834b28a6a25776f451e24590172665cc5c29462e0a251a35458daea599b2c533464ef713e776c2dfe398ed73ee088cfa8e31eb8bccb7a27074ede89aed1cd80f7e53484c40703130d9e455e78f960c363e17fdd529d42dfe4adfabb1ea28b5a0e8bda66d1386b16ada870bd36c8f5a2eca790185b5152b69bcac87b700f4bafe00e0867ba8aa21901784f046760f8c50727d412c4aba51e9fd0dec747699d09c24e6fd7027b4e29037b79ebe6344966e7b7a51a9e2f380cf7fb72d705e6ace68dc89ec70b8bcbc964fcd07a97ec69b00601b671c2b872dafefd20865a978b6c0ad90bd15e2e25b12d98bed93378472108546644f314f30ab507e0262e0a9b724ad96ea5fde8940fa4d2b22a672b9d2073d376646bf680e465da6fdbefe86df29385832829d1903307c191e4cff0fafd643202b346724f276f2de326f1c4657ee48c073b2e9ca6c9d87e87fa58342bced88f8fa0e3ad8f8a255cb6c682e57a78716b13bc44f5f90eaaec12b04ba72a902357e38481e237fe679c069b1e2b8cee9c6f328c0c661d91d0dfffb2dbae1450987f5a744dde67ea4fc1541834f757f5eecf46d20e38a465494e7363f8beb1642d3dff8a9f899fdd5b4994a0367aab82293f96b53ac68811ae2eb630d3074b19b88090568e3939ec44aee64eefd2a066fa8bd79a5fa8ede2461a39a1497467fff8f6b3b523a1cb58a69dc0f29faf455dc0a788089043204f50bcd598153b85c4ef745dcef9648d0b7a452fd0eda64fbcdf75240642a28c5676f5fe78c6d5f4a87875799674b91b070b591725a20dbb7a0020ee56ab630f4e642607aa446259f05b33d7b837a1b23759de2048d1dc881e13f72bc2cd99e8691c72524dac05fc3d319f35a2b9f2be699068001407c45b9f331a9f72796a76cfa5151c42049e5f726f36fc1e10d832f40b4ac2632189f1913aa1afa4711ccd93c13ad5810c0fb1d464ce1a2e241449442b57b69eb108486faf580132aec71503684987d8d93263d1a87f5db77837cad9368603ebae88b2a4a3be96c9fac404b80a6b9af787c97139d27762ffd1809e28254414c4620bf0584a63e8bbcfe9cb057825120eaeef8afe6052dd976ef8044fddd6cca864409b0c5e9548a72401770160e56278eaa36ef4fe326774dccf53339fcfa315ceb96faf98638cda5688236638f6dbe09e373848df60bf7fcf42778f9d1f4fe1d0358ed274a6b2242f13213aab6e8e806c05c4493a016d419fb3e9150704734ca9474352541e210c668c5bbc1d7d8171f3b7cea1dfa8ea4d7042cb6f83b45be28a1c7f32e4b980ed308bb517327b3daa89ccbd82deb2a26aa08c870ffb8e06179f22207f7565f751068e1880fff59894f2bc532771d43fff3cfa169daf06b28c7df695ba860df6c00235c7ff3f61e4508c175c0412a036c86a54078aa7be4e5167676e7febde5cf252c87a663756fb8d1cb2d12df4c1d8f844174d76fdb5845dfa675a4c7365da35bb8311ba4490719e7ebf37cf4c38111fd3ea0505703ee3ae2a8eba8d0e90995717922d4c32c0272d6a747d121eaa33aabf00ade98236212b4b57cc170643b018eb069260c244e377b29f74c8299cf9849d3ec74f5b513b9031d2451787c37e6b0d96a9c2521b80b0ae9b46fd165216cfa434b05f5a0217208e68c011f2a3a905d6f0881b89e85d9a6b1c4e416088f03dd83c2f16111fa565f9bffb0b9171d9453624ea689dae9ebdaa49a1e99792d3ef6d2b1db423257db196697aa76f7d3e70b9ddf35ce55e379e5bf624abe9d12f02500808cab08aee0d0437543b47061eb7cec9d1570a437d606fd192a72c595b876e62bda2ad2a32c659c3caeca341d632bcc14b8196269c68117ea76c3fba0870ac4e9bdaed4c9ad34afdb0d4ecf09d4594ba19f5803560918dbb4a0685922ec898569658c291049af6ff956dc718aae9318db6774eefcb868c193ad9d7cf002b271bac192adf56264b63029388479e3deb5df853247e53b4b3eaee1969e6cc488ad45a53b892899ad3592c616af08b1297ed7cee1e88d43558ae2ac6c9b890ebe616436f3be40d43b4f35b74905245adc30b1addfa26efe52a92d668b336682493ac73d194852e4c872d9d888d572ee253f559451c286b0cf51ee36f222daa630c12d3d5b9e53ec8947638497e998c5b2b8623115d7f60f2af05942d81597790885372fc468d5e427d984fcc5e5cdf4cb2adfbb50edb75563fd839892a82c8dc27af039cd0d70617584f7474aa0c53bbd7b0de9c67724dfd7e8ebffd18a202bf95f0921e9e06bbef0277830e1946dc8fc29fc5aa20cec957cdafad23a70195e9da2d2932a4993e3aae201f5ba1538c6d6e0c120f3158ecfaa85c267b1345b7345a16eeeb177aa249069702e4d48ccf38c083ef8bbc6710376a7b90933cb0b6af47d9d887705c207c711c1113670a2b42a6c7dc0f8e33023fd80e78b3856c80a232c5195ca1163f9aa3428560ef211a23bf077a0f3c0e21c3bd5b0f5ba9d488e07e7ecac2397e8481daf3ecd369bca8f12338350286b4bfe8099d4178b77c7c50b2030b6e1d4b75dbb1c26536aed5a05276362557893c840abd2eb5e4044d9e5ad9f3c951c8ef7dd0c0eabca3f560b20a3581af9b85287e1d187f8c4afaf12321cd0d9f5d490522ace88590e0f795efd45c16959ae7d8c55c78b662eadb45e78836387fc74298200e6efd0914636af1e4aeb0454228ce373dc5c165267ef6064fdc442ed3af5abff64f2ca7f7a5aaba643ca15cbabab7b688bedb07974069ada0ec7754a8767563a99636093f3088ad2b28bda2efa988c00b2129ca1fbf19a26836aff905d5541f9590cadcce3315a2d09d987f8672887f430826ff1eb798c868460f57171109f3a37baaa385a65a90b52ba7155bb9269d8d959015d7d76ba1733e44a763da9782823665dd8c32a179b17504fea9ca94cc0214c182368bdb1892e98334cea6bec2f175a342094dec7fdd1b988ac37f5955f3d68337ce2429887f09340f1f24bf52b795350ef7f0a200bf699e80e75eb9892f16970ee3c176abb80ebb66eeed6ea277121c69d789c1626b948465e606bc4526edcb12cb74f30415c26b27920982120c653ba87ba03f719ab3e19ba5486a9dda1bc9e9ac7be235e4aa0bb12276b65aa4f89e80a7a4c1c8c36ccbba9af1c3284bcccd71bf08df8758720df0b83d6065b1a0f23ca425dbfbc01580667299fe4e98332e8f00a6cc93958705f3c96f828a23e7e73a5577d9498abb57aebbf7dace19f7ee8dcf35fbe3d45dbaa392622ae34446d66879ded573e857ce1aed2cc105e4e7dab8526ef0f99eee2dd5994534bfe00afbf604f4ae2f8979fca100a62c123a42b3e35decb84a81a8bfec5642f106fb3b8aea61f43e520c71f8ca44b4b5cae503a85a2df233e3dc6fde0f90caae151116f643b2fa6568ac5465ce79280b1cf3cad2b69f2f73c5e3f49e423e76bb690206a8102544c0243bc759ea4ce7f14ac75f0926f8ba170f6b0cad64544684ce16f5d8a0b20699b1cab611ea6dc8b520ae2d90bb341e6352acd61d3b8878074538745839657ff368d9f5a6d4610b79c6dbe915480277a29e5b0cfdd5ca90fec5b19b6f0a88775d0f6b8ac5fd61cc356be9f6bcbfe6bd74493d466dee28b95b461cef778c8913b8874459476b28f1a6894a342862f2e7423f826f60bd4143d2fd3f0b07e7f02fe8b5098da19e99806eb5f4a749652c7b0ab87e11a8d89989704edea5576ffef7f64533ecfe2952186606fbbec2e88845c51056c53a5bb4ff33ad06d218d7f3aeb74b588aaa0b41f617158fa9c5265126c640467357ae996ce2c9642986d5c58638a59b2b87a0515a491a6b51b71708d4356f16112f80cc862458ee64324f9191986537247e9241c3a4cb28aa776a43f09ea49c0f8d905fbd90c3f24ead22d5dfc3f4b8faaf933af924a7fc13f6ff8f75a3bfa18f6c88b4bd00929234c875fa28f671e6dcdef12c8ffb4764f5c595065e138e8d0342ed106b92c267854d4aaf003985e1a053ab7a7a9c13e10efb0171e9ab12f04ef2b4802d425d2d667fa35dfe5e232516883ab5db04465755e5bed6cb5d46aa9461cdda6b0569996eea6168096e0c8b3ae95485957a27dcd114e8219fdbb34edffb879bc5c07395ee544b6ee3729e738cd44de13d41fef2844977af1760c9de6096df5d60904813c12ba347202f5399b2eda5c9dea12c3f37fb606bc113b6101840a3e5e141a062e49293d94ffa37fbfd00368324dbc4aa0de52049333bc455c21080ee9fab480a97c6c43cc3e9550ecc65f73854f6ea3d67e3814d398247fa99133e692c2a0d9fc7af6a0247f191b9f331de64c2206adb66c73c6dea50e45d8b50b3252095bdfbd20ca6ed885ce37de49ed15dcf92b8bd78c770ec127ad69a62d1339364d9abc145cab68643cd74d1a08641f37dc5c9cc245a9a939ab1048a3fe224c28c4f23c070f3d7600bf0efa3527bc1d3257702aab645d4e81e200a82e5ed685137902d0408106fba53fa490075a90e1ec1febf96d88156bed7da8ed6403a472393015b53aaa1a0162dae6cfffd7437705a48e313ff6d81f1acf7d65a11e62ddbfb68f575c12fd206fa29e4eed5ccd5ffa2bc65b725d3e02845e4940105ee4d5b56d2fd975dc5886b35906ec8bb862c5ea42fb4ec9e0f17406544f96009b691d76bec8d2e45384e693f5b2b1f5dfbbe55396fcf5c075b4e70b19121411dabedcfea9e99e86762023674785730885b498fa0c9944c564efa38594a3178396e4c3292389998ca8d6b40cc900c048d7264e663fa5a91fbbe1b964db89a92117715bb96c9b89f139ea9550ca32c052bb43dc728cd975880cb84e3a1e31b57e561422436e1631a4b7076c16045946eb7f26dde3f3ef038d3560ffd73d32a4dacfeebb8779363cb5fa1ad192e24f6196ac915d446d57e750d21c0c9be7a4ec80b4e5786d512a6c5156237a1f3efddb57af0a9c3fbcc4506dd04e6b4ce09311c2dad39d61cf36ce4f16becb3385d2ff22a680768710dc2f80f3bee8c3c47bd5c3ead476c219f0b43c9cf8a9f3db964fd90dadfaaa69ef45c524887aa46a600369a0e741565362cb058a37d095b7bed3db5c86b4d4b86df315f4d7fd53926fa57699925c439f4a00d9759108646ecba4cdbc78a4f0193fdedfdeac1092ec4c5c3d1da64488a273f348dffe3e917da0a8ac0b06c3c219d87412ebc56820675c9ea73f9f857ccb65c7784a0ac8102243a41a5e77bdfff6161a8cff2207ea17c9cc8ee17677934143a4efd230ef513aca63a9400f39c9267b16a0115a0903d3d9d44dcb5382d2919838213d6ac51a3734f1034d65d9a04f2d8e40e541f4e5fc0c4c1703a36da191ad83e81418fc0637ace77a3b40ba09267eeade766865d274828e67415c94272a7195a975add17d2994ed83beb79f784ef628664633850ea1985edfeb9a4d76996817c675b447910b019177abf53b64fb42199a219e4d54d37a994a999cca2ecdabc0c77e9279f40e9807cb66617f18f487dbe2f26816c5c51961e5608a46e7c4fb2c6eecfa578e9c0d914338bb37fd03db25a80d6e246712b8c8ee9ecbe688ed6f87b9cb3edcf89420a3f10ed04c97801d118043e5c79d55f6bc49dbc6dd6e7a4beb885f6d760130eeec972f62ec8250e30f52c8fc5b34ed655df29bdfcca7d7a761ad7090ba16c054a2c91ea1f46c42148ce8e8864b8806006e3e34d86544309b8881f9bae4fadc4ed6f58f104d507c3f96a4df3f7e89ec45d39141fa1e695af8656e64e26b8724d89097a00b06a70ca2318d4353a3e8883727af6317ba13f5804218d6c49bc24b044f40b8583f5e735d21938c113ef0eb7153cdab1554c7f6094a9bfccf183d968f8fdeed8efd214369b0c41aab1d8e29f47c443f25be05235234e1bfa9dcfcc047d7536fedf4930286055ea9ef398bcb57a1b2205737f88c59c2c7bfa0924ff76799d93a50e19f1ade2d3ed58caaa9a8cc634b6610cedf747d37cb41bc5fb5e4db8aeb9c7030bf3aa49c9682d9d1087f58fa120325697e10c3194846d41de3783551659e8ab17213af4a53dfbd81a2821690843fcb4391bee227aaa0ead92be3366fe22ace524adfc99be980b5e730b42f3dd26544568e5e15a183a3215e9782c34bea8d7a90ac792ab19f3de5c28498d653f11912d548171d00849aac94c87b3f6d0048a5e9ae29f2100b302fa87c3747a3a046da3014446f1cf1c6ae5bbc8608b1c68091278bd377f4c9f97e40e8715818f49dd27c0292e4852c332deb8955c79d47ef58cafd0f319e00ecf917724853ad9ac8ac015ea9ea4c618a52fa711152af0b0ccef4359fce06f19597ba3b5c23f4e58c409cc318f7085e5349a7145e2cdbf88011b0a8f063005f042728e4fc2162638035f4d75202325169df9650581a946923909318f9ddbab13bf66b0f744375f316e318c4a2a4c71e8ceebc677c9ec3b4b41703437bb234aae5e503c216b3635dbcfde985e3e86f944b55cdded1dabb66ec94973bdbe5bc1f825d1a79b72f21edb5ac5a25fcfcec9a52bc27fe1d4ab0076e00ab63e9e4f6848d6d622dd5b29be099c675334aec80e3bdc02033d7624157157fca3d672d7db1476421b765c838f889a7f80fbc2c086dd1e7bdba43d7babd6dcc85a1d0d420a4931a67ed6b6b9e834da6c04d1123e688c6d49e50dfcea176b0fe294d0165c40e970d5b07101aec16e55e6f42bb0904e047bfc78c2d82625d4b3799cc7355dea2e71b1dfbef6f7414f98dbb23938d3840311f4b8216f1027f66992778f10c35865ea98f86c651a562a5b9ceacc3811ec85f85e1884b8258ee7dea5fca79bf28dc86adbb0e7a147df04505a6b1890cfe135eb3978058a9b9524b2893d1ea37b93481efc265e2a6d97fa874c3f51b1644833161a5ea333c18d1603af5aab2516d081986f97f5b6191d35430edf16963d2cd8f1f95a8892bd6a7c6de1b00370e7112f4d92e341ef40d69130b4868f667e97cbbd9f7df75b6522ff1cf513ca36e191266d0117b588e9a798bd6c376e0b201f12748f6e3922ba8dcb9cf074dce76b101d505b19a6627d4142fb651233173305c16dfca73989a969b6b79a5e180006be005e81112f29e2d1d62eb72d31c8e3a44a7d41fd12f354f17a9e94520842587b582c407b1ada67bd4b63fe4ff579b834f8a20ed6035718f95b2ca616dbfd5211dcb3ac1c0dba057d46459360a42757fd43d55ed57192918840bcaa53e7db0a494f9bef9467d4fe02a42c9d1533509a14506deb8fb589d98f24b785a63f5542954ddd2deeee7b3eab6d5e311b3d8780e2c7012524fb2955484e7f70c235922bd753771e0add8a4dcc618719f1af04d43e6d49d18039ae74af121b35f1520e4338709f00ddbf4868eb38ce41894b219aee2b2fbc81e3aeaf50643f0a9cb69a3afa81306bf5d4d71c58f23a3eb204bd8415818cceac97daa4e8f42c2f463a302c58ffb7922da2c7b685735821b922ceaf6453967e6c76acb3553220e464519cf24dacc09f469a5afba9e1a6d6caed5261fdbdc18bc6d9bc5c298f6d403b43762e527b257a756c7aa0a1475a8affc44ecef15a45f0bf7fe15f8849ae32cd5c18ea52772381678c9f54b9cf0fd3bb7d17060e5d21afa737e10d637515247744f2e8c7cd7a21036302e34680f323fead0800d0368b195d4061cb7cc902ddc5dd6205392c1c2728c95d22859f5a534639bdd2211ba2734659a00a70114f17acef147e73eec796df20f1bce9b30aff43f9df3ad76e428005323d9189a1cde09d4f82494bf32a68f48c767705339bf54c537258d9900a1943066b1d6879e13f08d45d4d2177dddca2fed1677c1b02b01cf985b4d94ea01d312ab0daa23878a25809704f70dee8585e4b5f1ee8bcc51d0dfdea9fda16b80833a4bad447832b1f150265cf10bd293b7c08825fd11c12d6ead62c61983f894a11d579d9ada43ef9eeb69e511c36bde80138445f432079342b4f2ceed2b8e1b3a1c58164ff1b9dfbf268c08fb3ac997b31010062439d27a3655a22c7055f14e73b1d00d8cc5475cc81fd436b607fae073e19c489fc490d3d051e7e0d93b8ea1abbe8eda3a804397263765f8f976657d47168c80ba523c698e4e98078bd36b64b69330206b66b69c20a7031e6571f5b0da6d5ca00e84eff042a872cea3babdc0575051362c974b20cf5348ce45e6e07bd615967684aaa32e40963cf3c779e59f7fcda4ef0000069fe989501c24e27626871c169439f02c89b23b63e81f2dbc73bec88e684b80a946b2ef3e2e5e2ce8d7d036d3bf84798870aa5891a3bbc1cc6f43ddc02f3c631d39219e7b8682f48d2629a52e78d4627ac0f5a4ec6c05a51911534e7ffd8b1155747cf6978beea75d06a072b19ae73283ecb20b35a70e642173aff793f4635f77924a5f41971ca2edaa34c875640f0582912e4648512cb8577c78d5aae419772707abd37b3fd64cf245dd8d99119506749c6410c3b88565a3b31284b6b4fea71db6e0ff769d85d579d0c10dcb572daf159b39eb91e0d698c1aa8cddd4f6d9ec9063993f9687704080c9fa5e8ae9a4a04e1396dccbe28e6a77f61c384e16fc3093d5b6dcae2aa80bcfe685a2de0c5704a453b2d024cfadd5f48c99fcc341d712060ae7f8d0105131574f8b2931677d4a7fc65e3b399ab8d9fb5a01fc2be74d09a503946e60457633651c93f86a05104f30bc3d34d16e2eacd90c49c751d421abde082c613062b80c3683b6452a06daa65c46a156de470b1e2d0aff9eb0857bf5b50e54b5f5dbb361bd97093d16a8c79792e509b21725807083ff291004c696a674994dfeffaedf7774c5985eba6f1d1f93d5f8cc0827e8dc7ab3b9927053282084478b739550aee49b1e3407023017bdd122578908bd92035b4528849ccd1a429838601293a90e8eaf872b5532053179715b81026d7f1a6cdd5f69311f43bd087757fd494ed73e59a0380c5d8992559ab3bd956e10497816598589f8d8ef7a1d20194553a64d16436931e48865efba6da7706d668d3206902bc19f86e8ab29bf1cfdf9c78b898a37878a657a6377ff84cbad716c3c9bc206ae22d843c3a2615583863945e4a9afe9f65fe014e8cbdfe76dc4a5ad6a14dd8f277a9e8d73b78b65669b985aaaac7c6a209f4c8c1266aa0f418714ef6afd8e333c1bbf67241b52cbe6c1872ac7a37f6a7e50010fe532bc0d6ee2486e8a4073ec62ea49515237b860fa358aebd3655ca3703fef8584ebfe7d165f47c110d3ea9669b9dbea49d932f3fd886bc35de44af8cf7550091449de91f4c3877e05b67ed293db855665610d5fb787f12f74fc76662598ccc943a569591af75f6cecf203113e25606e030a63cb5477d47250744032dd63ef662b2542b8e7b8563a56859505fd432afd222b627f57b704a7b78abd89d031d430763cf45af96132bef3ad95864e9c2bae802e354b81cad5bb9b7d769debf4127306b91bf91db659668e89378cceaf8e01459482372dcdf1b1c6a4aaf25befdd5be47cbd62482309d27c1a9f511f79845372c8c800dfbe9060c3214d2bffaaf02f29378255985b6a02ba78d25a8c3b19b5aa560d3fc114fd28b824036e8bdac3d42f4a1e5594bf1423e4c1b4e7882d500a4c836cd676b31689e725f2e4a0ef6c441a7ff6b111c04081b9a88d5d79bc56d91f4d573d0a853c6d6debf85951f988ffd8a08ca6040da6b40e179e9d1b02aa6ac4f299a5401b751224b8bd09f171ab74461bf067264a908f1017e7b534e0e33eb6c2ab0495e84376dc37cb8e2323d8765fdca1fd090fd5299fcd35a8329782ecec0962047d17c8918662e191733a0884d464f0d44c4732d481a6b2d86332160ecc0032fda13833a04bc10d2b5de60031a818a0607f6da6474015757ccb4e6afd0704cfc44a189c9613f28528c8cfc19fa7c9544c497bec65246a0315d1fa81b3d4ff12984bb2179fc98fd608fe5bbd7b84ac43940538f33595ab1c8e95da10e3d3348188b1ead14d5fb3c04e8d18f45b108dad18751494cdbfb9a730b41497eab41271c119b02fddceba7c347c73fbb78a814d1d9d626186fdc869c8822af73a29767b228632b8f2a0526be4b2851c200981dd00070e46af17be0470ce09ca9f43dcf5c603be413d51ca2ba446a9b5f23cc11b4e7820d82a0592b2df28d416bcf54b4c5320e6dc01d42601abf9d4af78b941fbe5a80e92f63b4a9168312bed819d7145e9873f782a9c1915ff3d6d39aecb527a5f08a2fe4e801d840803f882b62d8fa237d4cc06a23af91ffea604be114e4d1294b1136e1b35953b1de97fd0c5b260683b1c170a0bb11e5932ebea2cdf009311c090cf75db7783b52d72ff5cd86fab1d2b3bbdf67c5de0cad36d7cb5e4c5b23880552270daf0c3899e5ec3113039a9476bf7f36c32aa7c49bec7cdc8be27d49cf7baf1937be40bc5f1fe6cd75d5b3e8d042ed7915136ae7788063916c0e77cc5f66d8f76f79436847a5bc5ce415a787a9bf980b06b9d9ac1bdfec5fd35c33b081c1d8ee2c26c7ddabde2af66cc20be63638ec88783a34639913f00e0e5c937f92b370067bac831aa8a2e84120f154de18783bac4f91713cf1b9b2f30f10a5f62f92c3c6fb3f2af4860faa0145f3f0351cd7799c01e52866d75e01a3b365eaadeb820a74950646629fc754e0734bb79bd8e138564b3dbcb6afe1aa30fccaea28c6f001a70bac630663fc2c144ffe47a433bd92c9f2bdd579303bc32e9a7a3ed0b9c3c9c75c31bdb733c6c39269876ce7ec10556f848f68c5509de6044a59eaf3bcb18fb81c39bcb970d42933bcd1be82762d9bdc7ec1d02f48703c96ab30a30d3dfe04caf4bb723e7eaa0404bb0922ef97eb07da67e0b5d4c219e0dc48fd3996fc5a77cd0e1f2d575106aa79980f76e3ee43add6af1598ae56d6a03f28de9cde6d0e3e59d89b3dbc3742b76fa34fb0bc28fd69d48bd4fae8d736fe0dc6b44dde615df12fa155bc4ca62757596aed8a7e8603935a53da3c06baa029d5ff988c600c0ad702bd412050cd2f589db97b4299fe86772b1035fb5ab8b4d260a9aa8a117a8cbcae6fcfe5f452d1533fdc5042802a6d54d92465bf862e07045218bce75c35dd37a895b36a31b620f11b96c31676df76e77703c74bcc3da97757cb12e5e4c91fd682d4b234e29c13b3c6839411359d9a16928a65f3e600d84916f123514d51ac9fe5baa648e85bad16fa0a3c8f70d392485e5b8f59ba94f6044ef7c168bc92e692a52952bb2c415b96a99ee72168d6db6685779d834276c33cda05003a4e9844034800dc7468ff9b1ec53d365b8e18186d5abd5d671e0db3acf093322b65bd2f246367b18e193523d1aebf42b88ca895986f488d8527005d424a03f0af21e87b0f49ffaa2470cd4c6c98c24f64adf20a3871fb92cd63e55bb192764d4919a2e342ce2208e93124ec3067b10aafa157ee56b0a190ba2228d315fcaf0066ce8ba0a737ab90cd14791a51ecc90f851cf9fac62f36be11aae42cfa6ada7e53e7394cc84a15cd1f2678f649e6669177bd291a7223b55d3dce7017226be1d5552b758527676776a464539b46a87a065796ed82a052764b32e22fa6bc46fa180804991d43fa316edbc5e6b217cf817e0cc42e6bac5f878ae375cf030af1272bfc6c50e794a1072db1867851b7f52cc853fe9e82b32c6b7ec884b84a370863529f2f1fbd8ee9078e0a48b5a32e18461b8ec118636bd1717e27965497dd6b26ecb2bb6092bd1b3fcd482bc11f5dcc3a9ca298b340bc8db1c3ff29d135f57cf76c9055fb88056334d2e647c9e98e3c5b1ad512baab33fd1364a453619c717a25906188eb8c6adc24515da3403194a45559cbd5b1cfb89845b6f2b640c3ba61aaa6e7b224d14bbff8e173c07a7199081491c440cdb811c9bfa55cc8d8f6926800dfa3aa71c38da01efab66586012f2552e53317338fc3635d44fc7501fe8315091d65d7eb1e2470a4e7e65aac15667f780466c9cbaef880b115676f3c34ed3e3a8e366d3aa4d4a40a90cf737d1c4aa997828d9557a6b1e17e26ee8e1ff30963ff86dfc959d5ff8d0e9c335ec8d53619aecd29d25579661d01213f1d40d1080a49f4b7720a8f94d4bb0ff4968274637b2c8e8b4610fae46e496092fe71d363e8c7c58718133a13fab9679d0a17aca657c5b368941f1b41c1d86dc771c62a795e57fdea00389601605ea9b78b1e89892299186d6fe7615365d5dfd71a0f85da989fd92ad667cd221714a45a7d8f8cf9066e6b671fb7d30d53ddb37eca773d254caf26e9e13b68fcc0b637df59b485746e611f3bd9abf360a5eac2c9fee9098a9d6860dd305dfd1347b2e0261d690b53e25e156ff756fec65d6ab2d80f919d4fada6fd60160f87b6d3446c9e51340e479f6dfb271d2d0019c36dd225aaa15a99230504df5ed9090f1a9dc0a4b3921ea8d5c6a026bae1520b570f143925763940dedd8d69fa2d4f2983c55d7d486f37b9d86d6d914d3c6406e7d3c332e1c76ae8128cf69c7ef4b59b8197c9a0257782061b4cba2bbe138578c0eef1179484dc1e6e04cdfc48f9b0e646eefb4efbd96516a2fb4a42727161a38f8d2735f0eed559c599f4bb1b6fd444a4ae9b56522ba5443dccc045cc903ec97f3fa63b9588dc2146cfb3c874664007c7961035065f2baf9987475fef3ec04505acded08e88f0f42949a6620fa864e10f99df5be6011a1856d3c005e2977abe84966f9bea7d865a9f468b3cd8ff52b714e5dec3b5bc32cdc48012a7be49e63a8c58558d1caeebe9725c18be729bf00deecab1966263a49c770a47b336f491c403fb255d6c7cc0c4445a9504454d09c3928a86c1897d384c06f3032f319a418df659eeb41f60e8e0b7cf5aee61728a85f4e0e17981b6dfa1939b3af4367ce5e3547161d0adc9560d7cdbc242b632346332cd692e08f3414509a802e99b397ab0d46f11d54a9e8a1ac7e9eb0a10066ee53b1999b13f80c6e5d9aba166ae7e32bc8cedbda52ddb0897e4a71ed1ce45a9941dce5aa00dd970f60ee21048d96070d2e9368071d1182ec5314eb752dbc151e80f6fc2dbc138f63f97891fffebfce00a50b1b0a914cbf5788cba5285ed25dce88eb5cc4aa847a92703ff38b6040811ebdd8070273b10eb0c6c7b9efe89044b41674fab2c99571998094531b8c542fd925e0cef44fd736e2749147a130279b26ef4297d5c6ee417151d109dad6297d149b686d2439f709e08eb2e24e6bc49516f690be03b14482d610b0db286fc315fc0eec70a597164a4c74207d509dff0d7f4cb04313a69b576771f3724042bf76a5c965f4ff861a3af2bd57d04d6b4096355257168bb4840904b7c739d57fd80072fa234f13d6cf08bb43a25b33e3a87738db499e97dd1a019e9c527568b25b11a6ed49e1e7fcbd8f062affa45fd75935739ac1a5f2f3af3dfe76b5fea7ead379fbd9a892fd0093e3af729263d22ebfb160f303ea56f3c3b4affd073f91e079327973c7c56f268c401c0dfe5c772b7002305b9a08ab5b5bfd4ebdb3b1b323eee623b1e22b4f5a27ff3dd6ba10f803e0034ee8e93263e22ee189f4fda1d3411837ed5b58d3439afb753462e8ee8640196f1e16f6c8c94515071b81109604c7229662eb85f7ac37f34cd667d00e2311e2d17586a0b101ca3aef7b77dd04bb19a8b55ca0db75bff5b426355b90d505c88d2d8c032ea568e28ddce677aece28f0e89dd7af5587b1eac8b770666fcfb90f1bfe491901ac12352eb24d7ad725b500d85e1fd035d343bc25ad765f6666e9d4ac93e7d99271a42a257c1738248559d5b01b4c96d8b4fd18f8683a623ccca1c87cf54cf50644d36c65499fdf0e61dc3db0634c609188c4608c2779a9be3e1ec02f946cc6bafa090cc23183d6972aa11befd0b466097613e90729649121a91e9e51c03366c2fec0d8a9ab4d5776ff5f4c79d2c2abf85eb5dddbce06332053eca2b87a7068f029ffe8aa1bbfcfb8454818ab7fbc7048bb35456e82031dd8e7a39c870ff5d37841abffcadc8f05ece3de8e924864a5bd09a6d9d901b0a0420bb4999d08c0aed75737e427d263319c622a5587a2271f8f5059b0afca98d19b267269fb78f5cee151af22bddcccc608e379b933a6661d4cd8f9604786dcb3ad72252fb06837c3d63ab55ab73bd192ac6b20eba03e821a81ebb210e5d6fc5a68b8ebde41e8a3b0a0282e76a5fb2e68fce380ee8112960e0ff3e18920248b8d2d4a5d97cf7b0437bb6d8911429d3f75a0f5b95526713fce52b7ed1e6f00783985a048e697d7b768c702e5d0e2b0e9448bd919d21ef184e0b95f5f025aeccb56ccc8bd0cdcaf23829dfa854a78825a9bf5226f9be239d9908e389e1456c811ed42d0c5ec2caa703f7c4245b74841a1a269389037db7e061afaecc4011cd8ee7802dbed3ab6fc7faf7e803981740d424dfb2241e52e24706385035721916a7b94fb5b1721be7c754799ae94f2adf4fbccb931efd8693430f93e04430e1a248ac357c987c2ae75d3af5108599eda250c549b4b2258299009e68fa61afa55d4ee02a76c1fe432d24de79a351a98a6e9b0786f49f947cd6138a5fc60f772ef167ee1ddeeb057f22a261c507a3384057fcf8bcdc6d88e62c303e8c9e4159820155a53096b4fe82770151415d16dc9feec8aa901d2c382ce9262ae8a1a6199189cf3b0c8628f1e988e4be0986582120850d390ce74de19ac0f5fa76e92de39c795b3bb7a3dd5ccdc259d00ef8456c35323e942d82913e8fa53033c8b2f9978d8ca29a1b9d8249e3a9949322044f2cc46164e8f4628cb98a1f5fa5013c38fca8cf67b12e7716b75e1403251c2ab7e7aef3534cb07a259f674ea13670d4503d3c5c44dd3cf937b14fa0370750bc7d1ad343a26e3b9d44e28c705867b8cbc577782d9632430f208919c7991a35ddd1c956c926fb4184decf924a25f112120fdd08e82bbbd1fef3604f094b3cdc7265e52fe321699205e78ac3fff308116ece20e491cf837ea83e776b7583da834dc04153e6114a31eaea25277ac3f44249e6decc7ae436b16700292cb6df8820c989fcd9ac8c99b712cbfa3afbd5b3ca77650c56743e2b0bc3659905e21a67e20926ac5a5bcc6ce69b87e2fb37db9507cff8fe95a5f30a4b722435d2bf888e7c5d324195ad234b1d7368aef3f3b0ac65b9040e68ae2642bb15948aba540ea3e32df821fe03716bff2cacfb333324cda4eb009441630b8944609924fcfcb9ce98691b6072585b16cb95fba9dfb450cac4c8f5831a9a06f12fbec9f33825d1d6a001b11718232b3655ab72e6b6888bda791747d7bbf86c5614654c23b5af1c103eeac557b3bb55e1a659504426658ca51706bfcb50637ea085886cf63d415d0f656be9df0f2be8beb9b999c329283a64e16eb8c3dfb58c1ca39da0bcf44f91ade2bb4bc8c84cc7cc66732d65a748f486d3158ca918ce1ba3f07c2722b899750c363eb777b2f5f46187895b91fc8807edd971573b84ed11bbb73d1633256b0d149e692fcfef5b19d8fe5398f43772899b612317cd3b9004d0f1aa6747701d4ea05060649e8a8a5f4272856d41a76493e28e828426fe6703bf6b9d15fbd9de8fbace89fa6284729aeba9079940620feb1e27733c62f64a14a5f142995ca9d55b5e819afd13d747e16ea01451dfe63c3c1fab8f3b5cc34dcc00d27e9459c62aa6693fa317a80cf274bdbbf17f293c695dcd41f82a455638f8f338662b0bcceb0f081856536793938e883744c4d5a81b996901f67c3272faaf64ce5e601329cfe4e4e8efd72184f62989c482fff69d23480b42b1ac7f66a1dd0c6616b81ebbed784696a4548c2749117811976f81fd1b51634bd52f27e8ce00e00830373b8cbc42edbc638975105897400cc1ef29e5f6221192d58ee585640acc1725dd28cef258ac332326174eebd65a198be0ecc176676f9b0ea7d7acef2866f570f3127d1077302ac08ecda55e99342c67adfff91f0a781d5e02f27b1724fa2c277bdacd6b1cf3141cc9b7e5c373406c4c8d0475ff29697dfa703152c30a00e1f27c1657f49d180a692736669f507505f8d60b147a556d599f1aa693afe5e90179ef4097d3faa9d0fb30f5706c9b0913f0db75886b606b60a7c17d30a98d0f900979be7ef6d4e397bfe9fdb5346406f5c01fe8d1ab35570f2356d1d07d4e89a0d240d941bcfdccf11fe12c804936e85ec13e5accaf624a15c24159959ecb93771e09d607ea7d20bfc545d469adff6137722d64bb55c2835f6b304e19f0b748e36d5083c7e393118cb23e041daccdaefcbe4b4b25e73542aceeb9e4bba1a5d7add70c33ca6e89137ac4c4e739936598fd9e02700041977a8f7f0c1beb52303e6f348b7ecf7fdb11728f00db2bfa0830ccbebf2267c4ed5f06127cc6211981f4d56d3db4ace8f97e740bc69e2bba73a7a7b333ba1ed66589bc07a3c1a3a88d8b583bc570f7ea307ab233a37072c521aa3f6a45ffd32d7b40267a6db2bcb3f771d12862ce75d1cf377bc1fac05e5b6b041c6c218d62e28a98ecb7ad8419315d7c57abd9f5c3615f8990ab6f1eb5c68d12c6d6d332606eddda4ef5f5222c2645d7eb7c48f8d0b71b161e6e3f3ca07d2be4e218a171f27a8d5a00aaf219cb51afaa0b44f05541b8f7893947de960aa88a78204c51bd54e6b56305666251b8abba88f92f509c6a4e4aa1071e067bb0faff3e56da37580cc84af8cc6829e64b44713a457c66e3047728fd0561e9a47e1f061e97a8a123f2679106c6fa336a8089b191cc869a51f21f4741be09903d5ae971a673b96595e9321a7c4498f0edd19415bcdc5ca71ef96bd34e6d5e7a82f73b38baad3ba1d5d014331d06bc532b1e31785adcfe827b5fd685115ea81508f0301bbb6587f23436ffe0f3e240946de3c77b8593bb6c721df5f648195cb4a022092d5f09fd2770f6513ec2ed1ff0b0ca79a44edca1b893022146da4d172a79ea7cd34ccca2e9a7eec4ce21607c5d9df6195d66d19c21e672eca3539eee80c3bf110f33972496efbb059d0869423c69f6a535a82ead34d3e5f5c58de6de521c7d553ea24a3d668bf2e9cf27a3587fbf92a4d3d9d4bd3595a53f0321ea817407c9918254e35792bcc8aea790426bf497e8efe7b845e8b8663c9d78e9df51661b6bef8c1cfffc2610bf473a032e65fb78629de921a4ac10d6c0735f33ea6b98b2a58c1d4367e9b386212cc383a0cff7bcf78aa7c8a7a829a1dd620c2a51d0893015d43a4421fdae3a59113c8aa21ae3f45f0eace92808be343ab471398790ae652ee8c8d33d4437696e98fc438cd3a239509237b97542628b2a1829fa929cbad8bc829eca9de9eb585a11b8f5a8eb13f6579b4d81055b891cfdbb03f233cd5103fc20edc7c44c5ff44c5fb2dd13dbfac7e2798741c9bcfa59c7e6fac63b7554d442b0c37910ff729b8c30e8a12eec72034af222c763778dfc16abcaa86e8e520b0a9125771bfd50622169f7236373752c133cf70ab14af5b2064846c17602b93bafcef0089a12b2ca323beac55e60bd754afa5b1d10a728944a88cb010078a9939b0b3009d05dbaf34772db3465237279d2b035bf2b12d524277a60b7ffc4611468828c025b3fd36aa9986c415fac38d4aa29680d55e4e9e6669471702f8afe7541e7f08590e065da66147be4ef88b408dee065d7f6766308458b555531b7245d1eb971e64196134d66cf1e08fa23d2869de08c431c01a7a578af2a857939bdbf421703fee6efbf30d4956bb679d2154bf66d657ce88f5638a207c962f6c738e61495499cee8c7d0fc9d23519cec18773f22c5802520b5ef1a4108ff269c3e34dc49c0fee5326896d411fb304b24513c0a40f3f475e5ddeb3edbd6bad70fe5e4f9f47ce39a878361c1b8402dacf1612947d3f655490ad82011600294dc802f162f5239334ad3b4ee4ba08f9944f324fc3cb9eae6ec7597630541d2b0c129cfea7f7568f152f1b0ae59771b81a183987a2a95d4e0ce56bad475fb740792e00b4a78d0345c494cd3faed47a80dd99fd1f791f8ea9fdfb08fb79934d141b785c5d50dadee982ea10e0d7b5ddf7da6a9ef36083e1e1b663734ab0eb7d20bc8413df803b47042a4e083c3610688104760917a2a9e6fcd108ca39a954edc1c394a1eb157e7aa72e12194999cb2e7d92fa44036efc2f446e073ab7bacca402f162cde28cf35f29543e43d7eda75248b0c2279a989dd1ddd733ea0c8d58ab3623771023bcb79aa50e14e82394c2f8050e4a6f6a474cad30a2257e5e6afa502e8a0e778ea07f98723a2d1d2751f6050c42e8161fdb032144144e428ac47a1b4568d78bbe216b750161359830435f4860eec2c992318ce0df46563a4c3c1b5ac6bba9f2daefe6eb74e0bdcf1dcae1b0cad871d9bebcd4469acff6f695e435d72462e8d577a40c6179765af498835669d759fe40d3a4b9587ab3681c6f2a7c638853049130e0b6f96c994afb0647cbd1437e7f1271c2c45068347a0b115f7bb1d254b3cd1291675d17dab8cf3929acbfd5dd4bb004179454cbf9539e69146a54778554dc0554acdb4e417ef62301baa341433b3c5992a0523459a09d200bc24e7efb25ccfe190ab232fb5eca021278fbd7e1c1f61273daf261d01f7f869150efcddc15e4f86cfe97fccd22915ca04cb881909ea88068dd16a521efc173ccf7dda240eb2abe306a6b2ba2a554f22039c48423b3d45857b9ef5c57235563d7e3acf83fcd95f4a9365eb06218e30c842494eb67aea0526b54af84126df1fcceb65cef204ca47e3af1eb49166612a4ad99ea40f4b3c21880ee57d1ac4194cf7e7eb25ea7e659e6f140962138090835ad484ceee13187ee2303e5909eed8083aa9c2b519cc5388a011ef63ace960d9d761c264ec6489db19ed3519aeef0908a1ff266ac31d93e33d6e4a1c412e101fabe0f533e628f6f7b9d6e6716d1dcad7d25ae9e4ca8568707e97b9e6607c1b857a55778623c09140c7b4489c0adf83bf7e9b5f4bdd5d22c289e7bd86e71ef09fbbcce4019cd930c58628e326b1631c8842576981cf7d08ccc73a9241afb421121ec6eb502a18cb958df4317797c0e935f3850f5669968b09abc60db200e985953767cbf189146e1ab129caa78d9b70de737800443008dbb6570027bd2389e1c2acd02c37ba4b635b30e6ac3df4c08a8bfdfc8e82d41cae68655b3d5625c8183144dcd3f1ee729bcbce301db3e527c6df159c8273c88181ff5438d2460c7b67ec73f11784b38798d3273c55efb0bb478b803d12fb7c539181f37c4bce6ba6c507e432dc73b448a255e85c268f486451105a5a066dbe534d0e55724a6be4df864fb18ba89b616bea81d2b2b8e9da77a5d9a25e0b042e29e4513fbc78bbeda1864a86ef759a0168b1aa21b80360987eab84b49f904491dbd542b587e6d7504d04726074ea72322f45b07ca914bb3c9c96b808d0b75ba592f15695f92659433f7ead083d4f03efe067ca303540a06cc3fea51ceb23c70fbf14ff6fbee972e5b321fe17cdbd66c8abfad0eb39f9fa0210fede5d26b00d43ab5dd6fcd36f0cc30771f8dfa38d6c5907d388b4d24fd46d53bb141c8053766bb482d1de336591b5679774505f1bc00f849b9b2129b75c5acab9e5f9d5c5f7127c1d8f1dcd47cc839567a5f2adca8afd595c99ef6123ca31049d0520b9c411ab52131efeb0c369da481dfa79eee9edfc738226f04839edf12f66b5fe410f18629cd4990267e5b79345276162fe401398e5e3670040bb182959256fc2f5a997fcdc8b6c4a307f530279bd0381590ce423c6117ca465a21a9ff526d5d75d195b48dd303e113c9879dd31bdd231b1f30d0942520b7e601f8b51ef6641544b3f3311186407af928b9bf7ded899877b3172779c1c67ce20ad6be73041e95332881d7e5ba0de8aaadc284303b4bf3be85786dcb657a4620750997690b1e8b852e73286359b253b11d9f4104dae5bc2efb82439ace6553fb781b089ec87e6a0355a671a91e6efc7c536916265e67ccd5bdd8bd7d02847d9315a0c9d585aed2d66f0d9ac88bc131afd2e9a8be6d209426d79f1a986eda1c9dd0f4c316b6fd0ebfd0d4e2466c4344cb9e9b62426211e45d24abe379bf77117ddb9bd23a9077c6ade43322512c8e723af488fb2f32ceafacd26beab9f27a35650c208d52340745fffa13a7fb90aa9a8d18599a0e63f79712eb95858d2459891c752beed132c92bc1ef0fd3164cbd71ccfe09c546deaa1a402af47302e155eef22395b723b1098c262d6c76ced10808251d331f5cc00e5d236bf326d6855e81623cd18e8a3094d24724148acfa8cbc9a8558b5a5b7c66ea4f588756876a7efc51021ea38822410918334a42cb2235c84af88f89baa5b3e8a4f58653cb452a4d4cbc55cde4ad0633b318b4b5eaf717cdfa34c0a5d0dca7fe631ba09cd88e1410e6657c5d0508ee599efdbee0ad82ae3c5c469ca0125c4c53208d59994663ab02cb8d93c2290ce1ece06de7e561df68f9b23b3c4bb190d6f5f05a20318b5c82daf394102169f69a90abc6da9a732806af79f1aa63973f6a4bbdc59500216209cfef81d91d107542abab1699402e7e217d8ba74da7f88425d1675ea67110b893d3668d497c90102d86c57c1e2ec17b0f830f2c2711ad954d80f87aa32be5af15ff5213a6ba5b663c2718050ee04914440e93c40b688c97a98a6b3bc608b93c40577200889b96d6e14186e0e1831a8fba11f856a3c949aa03aff831a9e696536e3df72fa7547fe2b8cf1cf9e0c2d8795647cd352582e27c7ebda766934e6aae7fe3b50441cae6f80fc2b3ad1b456ee98dc66c4197f317ff2c677a9bd04146011de1f9ca34253bb9f08b98e0f17093ac659a728ea8bd58d9d97045affdc67468bffaf96d629333012a04ebce0b670c5a0e9fee0771b2e33310cf523ff131b555208dcb39f8fb2c71c5c3c85d6f6fcdf1eef8ed7ccb3ccc18463ef0be73d51122873085692d6455b8eb0cab05dd2daa36ed2c013cc39a2caf9956f80adebd7e5dabe6e7be8b3b504d438db0c3ada26975d22145f3edb1480af42662d4712cd7c01ffbc35f7bc8d2b4610b0fcf7e07804f7bdfc22ebcdfb531d642210895fdee25ff417758cabef9070afe85abf5dd938ee1eebdb7e110b056c6eb41939ab5d2c5b0eeb1106709be6f468e48b80b50356b2d97912136fe6588fc96e0c1e54cb97b3acf6fc4763cfa7f54519625fb3814cb57ad50ed78310971d4f5cedc8f62b8fa9dc0c77a6abced9e8268368bf0c710e9309eb13da8d0950b1c5ea8cb8fbd3895ee5469826e87386501c2b7ed65b04d3d980862e33b8d55f4e4d4309df7abf81161553be9ecbba0c9d4cc9dc9c216d7e073d5f6213dfc103d0e5403c3ed8c07c4021a06e6877142c31cb85622a5a13c2b5dee1c3820b6d5efb334b3be04de297f62f7383d72167f71f8e9ba78f553c0df07cec4309c703e774530e0c4e163f664da0dd9e599b2c54520734817b7ed21a1b34f1b809485095e93b3e7f4defa1220bc6dd939e789eda8882197c10d70a51b44d85a5ee234fe4440c103d92dc4b238ff23e200981c7c833f707fa97238f3e68fec9d71e24c780a4576ac0b8cb20319d2f77e77091cff39480ea0f2d29713c8cca88418e34067c1e9c11ae0a5e81c429fb1647e3a53cd56ab7a299cffcf10ec4faaa04e5a13aa1de3e64b4835a64892fdf94ce98416a675212c8f772954d2ad113103644248c2fd00e4fffceeae16737b0a9b6be7fcd4979ad9fa1d95e5461f693d184f65a97134aca50874e57998435bf05b192fd8b197cb1e1098396dfc3e475e4b17f79531b75203056eb4468f4a1ccfa3e811cb3b1ae1e208f31c2d5a543c57eaef06a2c14c4be9bdfa6f5b62ffd3b5c81ebdb5309e13c192eecb8c5b0a1802df002c6ab5b0fad556e39096a68528517e9ee606bf7f8d0e6cf12179f088a2f9d03776eb6068070103a83936d047ee5ea614eac01fd9a79b6b895299b4920b8858f4369c00dd5d4c6ce96e70ada087ed758b65df795afe01c8b1ffb8455626432b122c7e5ab1bbcf67d16e5283287789ec5877896df7a7465ddf93aa5f7be9aa3d4f06c8094700969f2c63bded1856cfbd5dfd3978a8b5706fbbff5bce330f061f3887fdfe14ed6836d842436bb7ed19ab1c7e95f9bf7c8429f22057054313ecb22626b4520093e43ec8d7103c1ff13fe5e6b8b9a26b48e153570de1b19f3e82b46d19c87d20f27290cc2bdbcda61bb238b0c183803612f6a02bf154f6e10bb7f5603469beb40281b5a911b609f2df5ecf59618128fd8b1997cc759c01ca5f0e9debbaff78d1740d0a55d52c10b99af41dab8b7f4f1a88f2e98e4fe3b43bebcc87d19a364e1d2d8ed29d8ddff156afda7bedc037072ffd14d7c8a4803eb21d2df4366f5439fd007c40b408e266f87fc6b1512515339fa8e5be25c6ee36c3ebcd9636a9f482d791dfbaedbeed2d5a8adc3baf36f4dfd6d6e07fe21e48c7323f1faef33b7d957d09a512da2c20a66feb8814ae5d326ba0373bba94668052772cb2efef2d5700a721ae22c065a00ef445d3810bb194f381246d545b3e3aefc130bb3a28721c75912ffde2e73ceea20061aa5217aee1996669619d85df99a56cd72cbadb86b3cfddabfd876eea0e56ad3e9de2cbd8d54ac097cd12eb2b4a51e4d96d97e73cc37be62d3858414700da2bca0090861bd5bf0f61999b5ae2768d1d76b9a27e3c23c69fbff248a33af83b3310d24717ed32dfe1c202c54dcda57b397c15d2b77b18ff4e7c2098832096c65768d4d087fa68916696b2f3ad32ba171dfaf5a3fcfa1fcf9cf60cea1be225ecfda1ea9446707ec930da0ac25abc855b8b287086fc311d54ae130c0fabe575ff3f73f33e031d183b0fd2fb5c8b59641b14c534b44c9d0c241a08ecdb5fea354c14bee5519b99acbb530683f409514076ae51ea1b3198dbdf70a5f9ddace4c06431f238d049f4b1f6ae97ac852470665f7b46c4e0d9509bd0a228fbf56d67c292e828457748b25e31dda581354fb1d5ddd9ed47405222de61cda193b91e351479aef4c9c596b4f22bb7e843f64d16202b22f6535f1a89a76226af094eaa22280d5af1951affd607fbe8ad3c1627802509fa960e888b444b6f30ca5d2a4304ed9bd64b3a86e00d4c763d1c152eb0d6a305fe72139a8aac8409e1c8005e0385b0e4b705f6c2feb3642dbbc1528b0dd651d1b4bc5fde19c035a60507d17666d0ca46fba48e43e56df4669cb4db78321791253786c9e3e57d798db15f00d9537d58b155e762da5c082cd5c37b39ccff5e33a169a67b3d1bf71d859a68e2a6c66c9616ac5d6188f7b941264fc24ae3e2c828f4b3c81542f287b392823ac08eeac0e42f76445115a0a4221c9703a0f19f2ee8798893ae054e7605e4bca78d16671553e8acbf99b0e9f09cdfbbaf72a20098d43fef39777068e5f2ca0e60c4e0bceea4e9b598cc630e8abf1e37f7fdd3c2dafa9bfd7b5886f79e3820d09cc487ce72f732d4b214f90c7bef6877daa70c1af442a3f728e2d86531ad3cb5c884a7469c3d826274dcda329574496f47196b38b8bf479f0462db16b6a0e8c537a7b6d99a0b71ffa85c4c1225b731033c7899242c92629ea2084ee5b5588a64ab1b4978e5514d4a44fc6058c04f9eaf99d5bb6b70565e9a86b4530f73eaaf757be48cd76711f410cbf7ded1117b712c47171874856f9d9b276dc1441db0c97a88cebe09bd965079a630c5c2f139edb52e4818c2f143c67c0c00b816e8deaec9d4a886c8df91dc85bcc91122c0f89faef25df7d78dfc63820fe3911bff3a9850ada770ccd021bfde817bbab8d5657c7905bb60da5ff0e1d40a7021381f32f77eee02569cbcabd7c69ce098b57e9686c849b30a54b2a6ef0cd6b89d702e24eb1225ecab4cb9eb0b47feac7004aa18ffce1d85ff5fb43a50be60767ccdc4f01b56098865f52893b9f1900d22066b00a88cbd30d2daca0eb2e697d4c2dd5bf565f4b3e43567a143214587ae0a12215959cfd5382ae8ee4089b03ae98f839fab32842dc5e54774767a307df492e1888ba5a1f2d194f9124e2d4e08379d1331bb737da229d3f7c1f1ae2591e99bb3e4a6dc7e3d20570a5076d9da58d3d95c2e9d5e8df2af9469704ca7082cb6e74d44861ea889540a79763898a95d87aede806f0c1b03a9450b9b77bfa9a6cb0d2f95c69096ffa51a30d14d053d96dc729e12d15e3a7f55ad5d9b7a12612b57953ec997cbb75f5862a5382b7b5bd97e7557cc0c1ad870a40e3f260a3898f096636178cc4fe325ca56d805cfe21c019a48e6abcf1bad3053188cd2686363febae96cbad6589a2d6b2cf46994b7628c5f827836e951ec881f9a422f4bb9c034320fd2bbcfc39a344cd7a7a60eaea1ee5150d5f272e80a167710be0aa79340f37bebbc48c668aefda73af88f34282e25585422dbdf29796b1e1bac995965fab7c87f2fcaff99850a3640a923e036fd6efdfe1576f16dc3fb6e2a1291318795aa7b4c6407eb8240323e8795ef89c15e97853907deb546fe2ab1408530577e26ffb046e2d6d73f68d8c9664a64712dd7d887876bd01d948a79cde4aed6469215ccb92ef5fd89c8494d6c59e72269c1b8d2781b47efb724e0a05a6becace0f0864b8df1aa472883e617bacc88e44f9bd8ccd6870488431f949b70858b3c81f1e810535967e3683056c6fb8b0d1b2191115f229ff2c774b0e6ed26407a44d948631ed4ffe77f50b6b8ea5d3030d8b532fa6f5c2bc91a2753ef2ad4b7b8c99baea228d99f09685a5c1b42e60c5b7c6576a9c0697b6645fcbc65e832b057061dfbc7f1b8cfb4e850d164b6d2baae8e2e045f33a8081a10d0aa2acd0ab4297c5f2669332794ef7752974d0c72e483b408bff21bfa9350e00b9680bfdf44938e2941a6b59c4df950ea42b00c5ad9d71126ce6f050dd65dbc68e61adda360ad33e76b2473e7a079a252e466213f78322bdb3af6f8d39cd6524d6313189e69af7f314fa5649e3c2041dd253248f98b80f7e9b074f260c4b92b4614115b797160ea64062496e5f7af43ddac188d035f3e96d13b0ad3cfe2ae7e85f4323e8652e1c2816d34b25d3a36982730fb13b1afedebdff27c6cb8db9c55951aa31c685ecb9503421b6370704c69206b5c120d4b3a4e77fd42be3255bb71140b446038d806e4c3523c05da108c62ecbe5119f15829f9b821641e53a1123d0d0329db87a9d4b813cf69480a4f4ea8036e1b6808fb0f1b56ce9ed01f9ba5dc0e5c65969f7dc3b9a914375aa850ce9f6210737917501d255cf3559f1bed7beb24854d82ce4b49db348322d6628a4a073b77f1856788294d00917f88d3bb4b063c3517b6f56ccd7ffcdbcbd0198970dc6dec1faff8b4718097096c017db7184083d1098f0cb33eeff30fb1c317d3459349422ca78d43dce56a7cdfb02e8458df0bde3ade56518580c09c3cc8dbacded57321d60b4648072a433c38bb0a7064a425c8543a83fca5ae7efd4538ee0efbeba4d12d6377249cd6e404989a7e2a86ec3f10a11629ee5bd6c385a3208d80f7384a5fd4eb7c3944dd3ad0d71f0e9c842e1202e33d92a1066bd964e2a79feb87e8d5521a47df06691c59fe5e76f6b1e618840ad79d53597a10137f93f25d7ce3610efbbce2829ddf68c05cb25d716c4f3a658d2669e8fa5617c73f2b615e4d87fba58bf028a8a4c3de2267cce06bf073cd8500f5eae3fc341dbcce5f142356752646d31dab736f39fa5b7f7cfc6a10d83d3b42b8df1f88bb6d286101607a9d400b4c07d94927d173c332368b6179a2ca439ef48a1bf728748818ad1e47522e952bd4f2292cec0462adf05e46ceef7bc5e7094f61c22c67cfec5ec8a18fcd58ddf5c3962a236c3d67a69f427ee28a2f02e7699b726c42fb6ca53fb8d0b5075e1cbe93bc3b029d09dc583cb9968b266f5a502d19f852c0862ab37892ee911de9e9aea90a49abc2c99ac47a7bc8f36962991919a29be8d2632280bf2db425dee0d308a7924b576bf84cb95be351923012597b1d83c71df338c0dffa99b68703207471ee2ba9ac3a7a8928113367afe6a438c54cb84df8819f63c4208ad9a58454e154d4655cdd851d7ffa35c29816def4fb0dc5366f916fff9f8065f594ee458d860bb2680e999f2392ef94a4a109cc51495bdcaced82f7f61fced34e205ffbfbfa7346c78db31183ae58ed2e6ffd695da01f77d884c3fe46d0d774e30a98ebc60a4ba0341b08ad263097fc96020914641aa8340237fdd5a89b7de8106b554ccab02c337f2dfff644caa48a4cad98e0fac5923e33b7674975163a9a524aa991de2d3448fac92e4ece124a6e727108b329327577b7582b496e65ac92bf23833a6238048e1b935cb02264f79a95358341b0975b9f232bd6bdda431c0b4457bc0bedd736d0dc0b7083670ea694cc6d401e7b92298ffed2a4f4ea31530163619d23c4db541abb58077e66151f7698fcbcb47152ee624e7dac7522c4526597c296746e9c12228d3f64b7285ba247759b6ee0eaf45888b2e66fa5f49e755c4d37fe5b6f375e73bf9496bf9bc5cf5662b20b84a09497073845a9436f8f5fb46a0477c1c836bf5287ec58dac6983c55e2b4c68b5c0019c5a7e1236bc9cd61575afce7d63600396f179708fba859591899073c06d7e56c77e6e3acc500a9d4426b13c06ca29068d80da1c1d51de119eedd588735d78de9c454e1d8e10d713cfa8167bda92ba311cc0db164b600ee72b6ff170c8e07045d69461bf11ef68d3f6cfe6182deb70de435297647c3a1517f1e642ef798caa046e3cd44ff9271b031a16f47b4e78a3038d37aede2b66b28878762f476821a238028fcb53870df0a7e2e5305f8cdc5471fa6c0d48c6a7150f8e8cfd847368183db14c7b64c59f24724169f2931dc71d3d5694c954b5b14ab6d279a60e357701fa23c9c32553e4e7ad1dae849e9438e7870cafba608b1c558e0e5b7d7c65f56f1e1b40eb4dfbe5ce615fc62bfcc21e951acbe53b752e3cb699a8098b881b5c77078c78c48187f4598ad7700551c4c1448dc9df9e747e36625d2a97044a8c1d49dac249fe23450e8abae65336a044a7f7b220f51ad47a00790ecdd6eb2dacc1d4ba2c642c31d17f9c68b2537ac618b1125c4c57d870fa773fae94f949b312818c408e9898d9ba60b9dca98292bdd302d952d4b239221bdebd2d7a6dd545d9b7bae5fee13fc994002aff5a3dbd4f99f6a50b58d1fc6773ee3861ac6c1b6e64b8fe216d08d8f03f99db2f33567f6cf9489e851935789faecf270d22ffc1f06fada0e4dc69d8f7c3ce88e7385b58896297d17b0033499c4590b99d5cfc1d1a2873b185da4f37b977d6303490f8790cc70b9332d9beecf4d20430341bafd990e6fe90452d7952420bed669b9fd1fe3beb01804de8e58f27bec075a9fc95ff6839b79440e578f67ae45bac6a8b93cf23eaf2f017de5291ec4ea587459da4df39beb89f144ec61f5a4e6178c20c819fc6d7c2f832076b5d008eda77e7ce525a8e4c6836c871b194584d6d595ef87a439af0c389f14f89ad1ca51c4d58dde1fdfa176e45ce26ffe8ebaf59d5b707344600d2bb1af5aef42976d0e4318d3cdb93433ec063fd143aa355e684b48bf97cccd44c274f0719fe63e9d0765b388eb5176251d9706e989ee56f6dc25e1a05f77f6a8c24db17beffc337f722d705ad9cfeb0fc96935ca7b67beccb2e0f077926bc9a054a5a400b4c46c0e1d618937f44320b60f010eaa1817c127dea158fa791aacadd15a2bc8ed754de198f540fd719a058a93969e97be5de8238f096877cd662ed3ea9119ffb313080b867fe280e2826e49372d2da2445d11a4ea5022babab5f3db3ab2b962a5d623f9517542f53016ed2d4ef683fac06861a9806711ca82b6646211271a21c11a6563891cf6e9065a0166b115f698a91aa1b4d9b6168022baf0d917a15ded2704238b26b0e93a7b7079b588f7fd25cba078d4d3af032114df9237d23c51f1139561811781fb31e9667e15dbd1ce513beb809cc5258d6a79cd096d608227eff6b34ac392a45304d0e70c6952f97eb69969c290f2eeed9a9d309c7e7164852a38d638ef0b8c8b257d57166b92393eb7cc8de4fcff48db30cd16abca862443df66b7d77484b24e44ab90eb28e84d7c6967247d98ef8b58630ff3c3fa6fa4f449070cc008896e1872950f3662cfaf5f17acf9cf8de06ffc67dc6d1755c744b427ee6b875f10aada7b7d4785687e377709789b8401b76965de4cce3ec7b54997ec63169e7d583ce72adf9c83ac1fb4c840836594ab9641d9b6e4236d9f7b5251ca685463b531392e3af12b2431ec6941f0d4b80a9d5ce7e2bd7096068a3f9278ea2c546e15dc4b775edd4a897ec872572ad1e3f3198dec6783838634e3cc67ca912d944765588ac1ab3950eac40102dcec1bc0f31b33f0e226b499a74627f3898faa40e3be4ad8de61dfdbba937c36f4806cfe5b998b6e4297fb59565b246ff5e28698708b448ba4dc9ed7ef4d06df621c4710165b7ac11b81b8e019f2782f2d3fc0c8797db94024aafcda36f9ac2f1a72768477d8724be6e4c434a996b4273fcf15516c7d7f572ed30fde7499f0c0f01c5d4d6f2a6152b9501b558be816de547bf950e855239d0a23da9a0571892ce21ad1cec5f20f522a1587ddc8a85447e5059085d9599e82d353c955cff98ced20f5dd36462996b50e57e98fb7cc7db684f6c8c9fd28c7ab21b136c0eec80941e1cd1be70f6d7348ea29ccb4e90704bbc0db29a4d19ed7abce059ef8ff36b1d929e73b4b491de2410c68ff12170dc35ac3436ad3cebdceea82ce1656e7bfdf6bd1aa7458e70f1b538a7c00520e08345197fcf3b6e293b8048d55be936199b9be09ec41e887915332e312e8d3acc4ed44cbe5fb3d93d0234a70c27501993ede1f576fb9cf936adb6f04f04e6d06638d136ce57384f4c71400acf82eb0546c69fd58e20e3db7879f69fae2ad026fc3a36eb225a2951e4ae6e9888e10a13faacabf58af55caa47e38f8b730783876fcfc32b9fee5eea4283da3b733c021cdc358400b09eda966d96cdb5d880e63dd79ed43df91e09f0f3b13470e11c2cbfe8fd9d3a74f989f205f1c43f0f7446270b406a0fb16056b65d80a12e6c6ef234d6c5c8cf16759fb1770f3301c705aff0aff914cf6ca3dece0a0188748f6d73ef291d1a45b32625859d02d67cfc7a0dcf7a6f703f5b0a7c280b98c308b6307986894261baa0fc9e6df10d747e69b1313b548138f5fc5d0ae1d53a8eeebb94d415563b170ca2bb96f4a71153c41d28cf9e107a3744af73b5eaea4094b800bd379d8a8eda194ea72b1e41f0479d6ffb0bb131a93cf2dd39507db390449488000df79b7d97de9782437c952d315ebaafb56cfca7b73559a570057e1c08f567a6995707d8666282d633e475a64ad426a5939c6f04a8e1eaafb6e4a8ff06e7275ed7ccd1ec8d3b5bcb3fb715cb446e1cbb5c6b5ee9c202dcfad3eb22fa836ee7d8e0bb2e7108de51c612d04c40872103c0604bd9a31e40044df9e4c2f0cf100175e4fa314741591ee88716afa98d3214c373fbb3882050f7dbbf47df69ab8e1f7361d87849660f5958413b4a9eb9b96a7dd11d3190ba940bfadc4afda2c2a3f1719755a62b3f6fa2abe91b3e72659abeb4f57e15f17f2b588fa4fef3756bb1b249af27670d2b9dfb449b5f6af966fe46aefcbccd64f274dbf0dc75a26627075750184a6e14ed98f65bc6c0090ac3e4bbaa0179340753ca6b02cba3eca10f018ddc45991c0598124e943f27a2e6508404c56f08f76ba039b27433b17beb74d6720cfa0498ea6c22caa97a7242d0619c4d1db34c32e6a8b9e60d30830b01e50182c68aafda5742f00d6fc6691962e0af5eeb6b8e41c7fb2675b27128697e17de72667cc9f6ac6c4c3173a4f12fdea8c5f905f9a077d29bd7671532eabc570aebf24c87773d47778018ee33d255aa754ea474674fae7352c53e53b6d4bd0ff9ae6cba8f515fa121d1c8e3c64d60bf1d25e58da70ed20c785cdbc93d9e11e7ce712cdd7b1f0ca7700e169afab2e84ca36ad029560e34b674051feae4affcba9bea897b876dea81df7c1e4cc53f930fd5ad69268c817a1f62fa29aa82cf31ba850aca61e23059d35c783a838045a2c483e1fc46d9af86ff589b94583830339fc2a2e7760c1512d68873eb7ea938ffa3053880ad5a0f242aeb7ddd25d67eb5b96c1f0159730434d3eb2c46e86a04b41f3085f5b33d4237829658fce0501ad71efb29a9695e9d8d25360ff2a058333c7acf8c49b4293b9b335eef6b5c0da696062e4c18ec1334f1389e436511b901c1e549f015a10cf77d81fecfa6b3bf1314340d895c21b3e73f8dbb3de46aba7b60f17d09b5b3ad585e9520d178c7409183fd83182bc8e25374dbb894e5e82629d9448d26cb43179cea942af5267cc8770b2f44dc69c83096c7e588228b958060e460e9e6aab9b7e088dc99b9ca41de69e5b7463a04999830d9e180bc9b7a78bbdfb22e7e4eb945922aad69bd308a458f28dfdbe16449ce49225eb67cbfd3d46f5640210aa030a648feba5ec98b248b04869272be9731a652c19f57a05208b2b4889ec98602f9217afb4384b204049736d9a43c1eada27f31aeff5c80b21ad18a983b4a46d0706d4ce2f3febdbf7b9599c859cf936ae68e51ec60300fc1448150ba462c03eb8caa1d1578218d40f462bcde3454dc37f6543f9e08b2fe58a378dc6f9689f089ba8754286d82d965587f02332e8d43ac8c4366741cbf3101f5c2f34443f42d9827727b7a4e8d692200258caa0ee3fdb674b884161c94796c9fdbdc095ce29223df1e89010e4f8025c7225d5eb54d6e49c42c364187726f64dd9ecb9046098289a88781687c7db53ae8e9b696eff1d1af290e7022bda4ee2d2f3ab0ea2b5ba81c4097f351462a1cafa98473ee27678bd6f3a7a02b6381bc958435cdf147a134e37cb1b85255748b13df6671f45a4a72901984a8462fb530d30ea1bc99e755e90a3fd16694c88bcccf5cff5be26865eaf4bae509687769f2b3d5b45dc925c825659cb1b7130aabc48e87bfe81e7ab1c38f8b5d17d48d5b534e5785c26d77cf188a55986d69f03152c4b1a44a8f60a97eca0ccebb5e4c20d4439c9f6038734b9d9fa713382b4c69fb640f77389c56c3e6900a962084a24f6821d95e9c9b66ed781c1bddc4c0fcbdcc5246a03e87323e2f50534efc8d5fff7ce2c2351e0ad7cf7b946683729df0a7c3df74df76e2d6a319a19f6cbe2ac9532de8fd9e9ce3455dd3a13e0542c7fd30d7641363c1c576ddf18188fb8c87c7e4946c02e63212489544ade7ff066a7040424fdd30ec23e0b2ee0e54fa13ebfb2e937d3ee35e362df15b2a83d546f1bd365495c226a501d7cca1c41dc114c697f18ba1f02e8743ca13e695eacb7178694334a0fb8f7da2cc309eb0df268ce6aa5974bca273b1e029e7b295f7c258cfadc41346341e401a06d21d4fbf6c6c02eeb77a825f71619a8eeafc5fcde2ceeea91c845de3f94b70c32d605de38e87719ed4c87701d4b759e49afa11bba7812c215952decdc6468872fd36e957bd9be827c4e5071f1b369ebe215cd76968696354b4839fa36a3f7a0b11b5f5873b977caf4f3b73ae732fe525eacecd8b9fed25ea41cc95a8a06b8b83762460d01e2f2474762fdd97f12803770a100ffbd5bc1b61bec3fe8bf2420c2cf93b57d93a57976170362e9b8b5662af077d7671b84f230a20108e15a8b44e25ab96144f5ca4d713b3a68e476f4a75ec3ad4224577533c4f7cd6fbd45bf7622d98b41d66149a3b89f0913f845e6c6e204e85d9c7340341c2c31c814b0a597397cc09a3dbfdfad173e3222cbc73d1138a7d8bedadfbaa64962059ecade7c256013c23d0b7220d86fe720ef704e1ae884a5360cd956b409416d43a1acd092e9a444ec95614c0240273d3b976bde5839645baa9262bf740524ca3a4ad2c1d80dcdfc120adc9157dc7cf17eb5860e229e0a9a1f9db4eb8e0c769d1dea6fc378e34723481544102464b33d576754ad325db87a399ec7ba9ad93f0c9861c03a3c561aeffcdd5464130def12e375879f9c08786545e7c44aef3d4e2a99dc3b5d68c108e58feb61b8c05cf4b7a2d6800861d9caf1e8823884d389028816af2271efd51c14df3fdec89849c6e1c6ec53983ae0352c1dbb8b970b4804ee2b3f23609242659fe72f45ee3dc49cd04d2425611fac30c143c5a059d3a8d1e51dc0141dee090c92227b99628cb0bbdbdb55f41250d972a001b6d61ded1860b3b385604a54095dbcaafd46707dc7a5b5a0941ac9d61e0a3c6e5688f2a971acb67e8793ad6bd795d7e684bc67f913554a8d24a1d018efb62999acb592cd40c20e5d879b4c0580423fb8ac6d0e09112862eda5c67c75cd606d5ebdb71b57aca63828c95dbbd94fbe85bd6794d6738055ef2fa78a644bc64208fce0175f2899c4117c0cf058e8a99b3c80936c9f1fa7e19bff51c8ec05fd61616faeacbaccd8dc4ef44071abf22a2619c7bfc709ba9b22689281bc913a45c27dcade1b63cc7233f7fed280047a6e903818d7f1ffcde41ba8e082aedff744fdb4d0fd8bbede61ffeade6a84f77537ec1647ae84904257dc3dc69f6da1bb9ee3739df040735fd0d303344fe416d3fbb226c1bfdb952ebdb560abad0fd36884f0556f9e4e3a59ed60887b8a51baff74a0f83132ceb4ae3c5ffd9806ab9384ea37713beae169cd78bad05546ba75a6804ea0c8a3ce66a8262f3debb93e89eb2cd3b116762eb55827404b172041b39a6380960f9900d189e4e5a7abbe25971d1cf2509b30892cf3b07e3f0eeea37b45505ba9b68e058492a8581571f85d29b81de8d0a1f3aba0c486d8d45324e057c2fa92bf2589343f6121009826ede5a1d2a3112b51f58d9663c53932862fdb712e0c94ae09dfc19cdca91683a91dec8cea88addcd98d9c1e85b6ec7866f99a302be5456653abec62073f3235c51ba8a14d629fbf74cf6c398ef4f13a26f188e2f4e1025e2eeaba902df1a67b8b1b80df4c9e86df3085ae5beb19d33efc7758d95f3d396f3304a53c8986854f8383d821f3444beaea0fb57b862a5d8343f93d22b3bdbd1c69404b8c14472dcaded8cc891725a48d2db434fb478e5f2428d04225a3daf46c82b14f00a49f02634d4f0ae2eb805a3b13a74243101d3b427958bc4767bb1d02336edf44724dc1697ffedb9c67891c7e4b9aa52643d71b7c75bbd4126462355c547d645e1d85007790b4723a6708caec91fafe2ac5e81d4a08bf54e9e09094e8f1391fa992b2373271886297737406e908601a923f6008942f76b841c0a9bcbbe5629683b1ce7a28433aacc4da0a9ec10f3671d471e3b33b0633b3bb4f3bb9bca86c3ee86fa0d70e1aaaa79c191cc2db5bb18560d1632cc9da8ea57b170fbd8871dedebaf90ecb9cef377f840e9bad337edd58ea28e1a844363dcb3e1d579432a269313f55a7bbcace4b2facc648094e84171f47be3d8b981f3fd7ad0dcfa35c49bfa1d9ef20216923a30ccd50afc1b6aecad3fcdd134e7940cfc60c3699f77eb47ee560639c7048b8d5e8b48e122e29aebf9f1d9b4ea31b76425321fffe639b375dc98d01dae484fd7e82d839f0ca0d69a58845212edf50013b8240618a12204471cdb184e39ab9c76c3b8f2cbc2ff0d9079ee1980ad129ec327c7d4aeb0409072023c55f8e3c9620d985f3734a712a889e47756c2c5abaf2514b151ae6b4998eac2f256d15ff35d078de69a94429bc24226bdca2b0ab35f72c652a093908dff1f599d334a4969b2afc368ab139e0b341c1ea252bd32c0647ab887c2537868d41de11ca7433c479e5c03f7eb63f3daa4caf873b8e7c7000f4ba90fca648d10095eea633ab6cfb98a09ba7171d5b99f31e4c8949d5cecee7223346a87ee9cfbb45a6468a30c2cc2106349b2c4de99624645ddc7b025df22d9ae898733d47ea78396db95ce5b9d8462bf4aaf6bcf72fb9cc7a59752a9c90dc3c12360f848fff282193f6d9cccf57631876130ef15483d37d077a2a9cf3aab433526b9202e72123acfd70b9f1a187df75953a24eed0d42508b0d7b738f818b2e57bf32f24bc2fc7cbde89a8c409b3544c4f25b8f0ac6ca1bb5241d8ae14a0c9718db32109ee6f7ecd88978d35e096d1db95da6c37a069a365c7b54d0b7b41adf010baffe0f96c2a710551b6dfd1f6881d41751941d7b0b8506525762be18c83b78e1c63e80cc20ad0a77f6ceeb7f8eed696b61026a63d037b096e16a9fac727a0ac46e659da5a1e39c18981d4cb54238e858c066ac804d5df9ffdb843e14e996e4cd32f37d2ead9a2f3fdf19510bfd0e39d93fcdb84dc3c0e0566222dd186c238a314ccd736de8ecbd6440def1c9974bb117c62035535a1bc8987dcae92fe98892563cbafd0d0098c4bd43464f5886823e4cf57b5bd9ab0356d31f42ca4bdfaaf20b5c4c47a36ae6cdcb643fb7e36312b43fd21b4620d470dfb5a045a82a150705f8b7fbc249b844ec6300c331ee771266dedd5bf4e1734205bdcac57a6f04f361ef083a231a032bff3717d33633af3a6acbf8c4d7f3229209dbaaba78e3c7e4ddb98c134801e6b7e06a505f2c7d4eb4718e2ecf444bba150cf328f2b2f880a714c2a8ea5f3282befb4c2a3a601874eccaa2b1134bcf9407b6726efb13262b986b6bf642535fb88f57a5c820c83bd9f84d0c97c64dc07feac2ab5913cde0277b78229c65325d25c444b15ab79dc7d20a2c91eba0b273e81fe541f7e5360f8120c5a5755597dd38282a2500d2d44cae2dab9789e61d856439331b68cbba40144599b81c4e02e3f50bfdfdd769ceab13fab35d4a53ce5a3445d6c47ea2e97fd12c3e1c6b9bd64e62dc36115bfa732e878aeccaf9d79d1490c3311111563ee2c13531f9461cf2cd4b78b27ed0b28684f1e6047c03d2c92278857b4ff3c0ced11bd37bf33f87c571a608fcd2f6c4ffec8e4f982a2771880f9a9f0e98dc041e6a1d589c9cc95fe8a1f943237afc592b160f93b067c08bc2f6f7071bf11adbd188d91af40ed820e2f42a520db5fff1c1debec0b851419558d201ee3d2f9f1abd27728802678bb7372dbecbf5aa3e371c981824c98ff7b73a6dc0c0572e925ba7b3ba71a19f93a60989b3ff19e24ebceeba101ab2217fbc4db1c2edeaf13bbe14bb58de4953942129ab69fb11847f1a4aa4e2cdcee7f64d9e5e0c0b7349c63d10e62e879d98b938c18445eb98d2af932a38f11f762d83f4d723de6ddeb3fae076c1cc6c80918bb011569162fb6aefcffd24ca454f5db161ae3965a21df235ae5565db41312199f7abfd416ff6167c8e3e311a052b620fd74c63622092ee8a1c48e1180604b419c7fbf888712249f154080febe84f3cb26ab9c35ac55c62784a3f19eac5e4870ff375958a42ca361ad51bbcc279215716e485a0a1cc564f0a3b942895b500aca6455cc63200a774ac6070d8306577f9bf194174ce5d11aee81b2f9ffbe915a8f83243d493a9aeaeb98bde52490e74c62c85628e016fe8c5f69d425f48042e2c260e4021cd7eebecd69afeb475f4c486948f67803954b4831f1541dea070f2aecd3a84fea6c909cdb49a089df28900b323e004403f0757f042f8e0c45f76a1cb2af1da61964976799a82ecb9b8ce1c8207b578fc7fa2fd74e8e677921be1111c38c2e110f897608f77ab550f92851e49de17abbc93086195b3a3ed5730359537907ed5bf34a3bb2709d2c6303550bc90a02b3362c61f264a69fe0e80c882c171481ba4f833445f369ef91595f2d2b781dbf1498a93a906b9b85631f3615e0e2420d5ee86b73129fa65ee36da8b4ba959d15450d37f425a59448f085752666f669b4cea0258d91026678b396c0e530208d5e94899c9e2959315c484869649c2a42aa443f9de7ea47ee0a397d4c7811e9ca8134944494458f7702c0a844c3e1a77cd1af1dac1fd0e5fed2ec854bbcb1e2bf3f3b008713e3f891ad6d68d5b2b70fdbe5d8e5065a6c7b9f45a5849ac42797ea229d0979f6e9e2a3896a8abda2fb3530103aed0ff80ca8e0ecf720038b2f977bb1190f7648096e0a60bd111dfe8ff7ef5f1d07fc9a6c3c7afa4ea6a3422ef829c1c57cc78a1d0e2a1cc46338b9b50650a8a0ce540540e42d3906225c5517bc15b91a6beaf32ecf01e5c4e928f8c0aa95679c41e9fc2fd658f35610d4bb78bb03bb09bd921402237dddb8d3f5be87dea3be5702d3219338e5d9aa05befea6f9d357275d092694194dd60283ca6b30f3606b10339240997115af6e0eca7de796cf5594713f4d40596ff2ab9cdd89ef4d31035b8abf73ab0300ffcb055c3827a40655b66692ab452044067c2fd90c7774cc542b79ce42ea5384c0898893f013a2f50aced9edf974cab8a9103c6ca7712264c4303d28f3e6dd7a251d98e355a055131c201648319eb23646db14b9ffa5b65845583a9757ba862580468d1151090b3f72f621160839c0df610f44cc236414bad85ab7158ccfc4d87ce0e1da1cca469ebcf6770e0eb6ba9133d1c937bde63c36df0dbada43da56c076ab29fb62a150982fd6ef2453c3a9feb0c2e86fe0db48787b610755e608c3b724f0d35bcdb294decbc8fabd75aabd62541553af82633056a17da9211d4486404fe5fef8acc9fcbe9ef2fafacb898b47fe867f911633de96aeab65d55da3774effcf488a71f877028c96687c7333ba4795c306bb6be6253779275c385f90597e7edf4b025604d3d82d41ad8ec4e6e3bd49031037185db0c196ed34fc36a1fff1129a1b4d5b9f72847c1fc19c3dfdd80140e7a3441d2141afc00a72425c68256d454a4a130f773c70d9d5f56d4894199787218791e22025d9a1e2159f6f66a3c487617ef1410bc2edff67037d9ecf283145d20becefb0d8f71264df75b0c5cf8f5e8fc663dff652eccb0a3769d300e596e5af79bc0cb012c57f3fd97ef67b6a1750e08ca897e44b54bbcd0ef60c4ef40d8ccd51d1ee110931b88309bde2a022a1375a253e86a29df73ad31a03ee0b0d551c9cb4ea12b11b133e97e87b169e35fe2c2a73f61cfa40f00e04a9537968826e0e7704cbdb942cad929d1d15397d41d5b3e4f9a6d9bd6a3b212843b1c5097d68d699220d2a726e51fa440bfafaf834ec5ef0233e1cb6b15927df754bc6852fcabff7609c624877e70c786924fe60499f25c88570e9415f073de26120c7de416cef6fade22b061198eff9d8852c8e4fda695c23ec5fbce24d0b59ca2f8679f846ee58bfb6440503c3d0591d14af4ea9ac6c559dd6b7ee9a1ff8644ece912cf71267c66ead388425472fbb6448ee50da11780e84924883fa1e1b24007a0c04ab34b06b2c408d956ad92457f4695af927cde6aefe0895b052491727c5aed1a742649f18e90304033d4a7d8c5d17347f6ad500b3fba48cd27f97d5907a660a40c7b80f3d4b8ce6113ea8c963bbea35bf4e9f1cffa261fb83277ed60d58042d7854fbda16aea8d267db5bc611a2e26d0813a3ddf0d5ad54b48e3cc550ad9c7b59d859ec68e46f86ff26e113a6c2f7f246924103c83b8818108a7544411a64ef97e89c7459741bfbbf595fc41b16d3f29962b4ccba0cca95fc0d08e8deeb7ac42ab09f4b5dbcbdc065f448cbb03a701b8f93fe388694f2c59677160352965fc3268edfe22743a1ae63d5299b809999300593e59b14ac6b59f49aebaa48d69a4c7d4b3b6d9386719a28956cb1fa61853ba41eb6e8adc9ea368fc1b7cb3df63344b60ce36ab0685fa66bed126c4515ab0ab8c382477c9f1731d42cb934727f52d9481b25ace8ee5b66a19481fb8fb5296d1762a654a3f909f59dfd6166e7e20298ef9078cc4db1f62dbe3a19bf4af622ecec773961bf1def32a471df9568347a5c59b05c1a402887519ed7cffe2db213d7e26221d68756506f7ee477b06e3b8dfa49b2cf22b88c5f3cd9872a0da6d423dcb0dca555fe96cf4d87af7c5bde647fa587ea4f3fddead60d494debb35af47f7fa65b25994eedad377fc7f283f83909b5a2ab7b6ef161500d95305ef7c5be4fb50d8a04f9774230db59de78a256ee7fe704cd4e0a1b083eedf0561eb636e854a5365aefaadc34d3ba4ff6030ed92c8822ca34416343586da302595210859de5ac7e0602f56732845613658169ca25a4f2e64d16e3ca0ce86487f392d2159980a8448533d4455c7843b7f275a65df786efaaf10e9d5c73e79eb7f5027141dd72254c7fd085e5b77d5ffbc823db1adc295a003b2b8e39e480bce95020cf5a550bfeaf19ff6396181b501486d6f96f5478b2c3a78fc2520d0503d5e3871e0b2d2701ad3e56f0e7f34b9670430bb46dcf2c0eb1ab163938bbe2300ae12f688aa043cb4f7ff3ad530465bc088184db721d9dfb781589f79b39672cf39963f57b9210fe2d9e04991a2bad4934d849d8b79ab0ebc9fe5023f0585517bec15b4d55cd847c8bb6bbbdeb2974aaa9312c259b35d5cea73f17f3bc43e9a023b302754381e1c773e92aba4a3e9f99ec6ee2ba14565337151a7f75b7c6190d2c7af22240c7b7a442324a369243e73a8c8f08af945088399b981581c82db22b972eb0d6823efc78ec9b3335358186d79bf7887a91fbfea1d3a52e6c4f194717a381d7e5429eec540d85fbb4b864001c81701b7aaaa2f1691c278cb488b713faa7e284e7b6fa623d5b5f6e0213fd74bb8239efd9897750f9f3d320d969520bcb8d079d3f4a6cb0e91beca75e971272161966236acdca0511aa992184b673deed521c5b3e97a0660177d935b75057e2f1bbea010216c18eeee1274072ee556b91676908c49fa7fe38ed91e9b146f066842611765927a84fb91d7666052557516976c8edd25cadf6ca350861285a8662400e5837f3186d5efb4b922abf99acd35769c5fbc555be273a6e5cc0e6c8db4395bef8497be30586c7c121a29e6ab06f8d1d648ef21f9ce99699ceed4e48aff510590da56a6ecf4fb6f5b235cfdb52c28fa6e9725fdb7d92357cedcd50fce38c339f1023105dfaa19c379fc722787667bf8cc23e9060c2f39c7c71091585bd6fe4a8123c334f1c7a4f59d4f43b7467e8515357dedf6ad43a94a0436a6d26efd5088cf655f2baac4398aa3523acf6bd19c877b794a8300097257a793e52026f4f6ce6df993a2d37478f9df8e8977a0719cdc1b78fb57c6a23cd5acccd7b7bb481030ec2e446b50f6914c61b004c0fe6b61151ea20e7e0990f51fdcf1c1ba558d72f10ae393721f4f68f67484cefb84c8e4b95a07c0c3cbe95f092ec1dd3303401b47d944f83358ff3902afaaa7511fafa06d512796f07f13c6eb88631caa9b5ceb3e2d394011db5b04f2c53d9f1192a77c2628ae1768b1ffdf5ae96b9fbab905a64b79999d38f96600557e87f8bb115bd22572b802d29151df5107d6eaf914972b495b2f71c0d5422f5ec962a182559726cffdfe509a5e92867643af8c4c64cc31e088c4add881f44bef6a4032cb7e915dd704ce264acffbeca2e4b02b9e2c52bce43525ea0199f44dbe7483c59c067aa68a798b52b5f89d0496eaa12fe81262d4d392453b0c47af0d0a5947f79116a43e2b67e9242f0a3b64bd41fee93e8bf4343f24c7f304f8edb82967ef3edbba31f3d2d1c3be968c85e36cb4cffeb85d9339c85b045d496254c181a46f6f056616d42207b7645b22d30235ac27e7c4150aa1f5292c7d5929349f59e9eb80b1e66f5a24e5302c0d2dd1ac6043e6562e8c7cdb272d2a4801aa5071376c5458de1daff0825120fcfd69bf8b0535d8b0230c7027870c4de93a4b39f0607e33ec49d9d057f4f25971570e8b31f595d6e57416b67de8da93382b1d6e40b0de25c5bc5a94a1fa8160cf983e917098f0ea9cd98cf460d7bd97208e42d231e34a10158c24e82db623af67aa86af7f4cc0c3e6410281a25c3cbaaab717243513e7a4151376258c935ce596ca7c0d52fa9fc4bde53f4332e7e01b5cf92050849c24277d3302463fc68648464bc92ef70415e9cf1cf94e22828809a09ee26a479e3ae50bde2e1cd021003e599c2ab51d5303be5014b564c81008f32c90e5afa5c7f6552fc55ce681673f774b58bf1f83aa257ae6becaa13bcfd0bee1ad1e7d10aa2df6df508b81bafd52d9318717f47e4167e24467e40c3560e8abccfe108dfa3959aea5d8f6a1ae6578695e10c6c6f56ac7b81e1a877e4657cddf1ba2a931ad4ae3ad1f234c103742dfbf8a073eb17a1343504ec5ece64136a2bf8968305dcb596ff4cfccae4620e39a3512dfd01ad5ef00225b44f76f64a4f396640dd19ab4cdf29df699b4d5a5b1b6cca8aae982062aa6a4cc3892c9baff6559d7d0738059de39542c90520ac7fc40395543434b783a023943c7d47c6222f9143a10e0cd3abfc96452639f965685e567743623a73b231f71ca642afb6e99e5b04620f17863a257c10cd8e83ffdc38a52c08d35bde1fad439353a7d973e80a10cc34c18e112023cfc73667db3c21f092f37c11ef8738244a1bd565bbaf8fa283a5be03b4026fd52586110d5a6e8c6fc5b09f2cb63c001bab8712a703cbcb22a61b0efbdc21e7a26157cfe8e40f91a4b6dc0b6c09bccddb5e5172550a2c4220ec98918b08f20167fc2677ffb765ab7365b6baa5cd7f81039a75e821c7e2c407ddb63bd77bb1f25287e5177ddea64e5e56994bbe3cba6f42e57c3868d764a927cfef6175ad1207eb1ffadd803efb69a56fac55e759d07a9e3c47d74bbbd389b01a10b0de6fd987f3dda62129796a03d3dea66d61aebf7b4aed651b8160e6ca0de356c74ae6e77a5c040bfc5cb953c96a84c2c55d2ae6740e961cf742b790a0b240b7f61b2689242f5b717600540141beeabffd749f61622ac40ebba240c46333fbbe2782d4b6d8808dc78b8b8756aed64066aa4c436216412875a08bd6a331b57daa894a356305bef403822ff5c9f8e97c0f155a37f9ed303d762246e5f2580d0226a468086b6006110b16f18aa500686438e7b9182189be77c62167889fb7207cec58a2aa24934dde405311a4a94cec0a7e5e2b65fc2d4ce31d4b6f2ad0239efe991bc83d54d2380ac6a470777a1d94210620cfaa9e0d039beab0e3a23f41f6fbf5fa22e5f727f52f114330eaa43cedd0f48231cedb4ae75809ac4b855b09c582f12326451cd4297ac84a9f71590c9ec99b1fa1379fc92d137504ed92f95cf5c43cb3e159d9e3b31605f63a766a653dbf3fb5b94fb6194d9ce840f3e4c5f3263be4d56e342a54723660a2beca9a844fdd419de5b2dac9ee554e1fa925fe47053b162b4dcd6e5961b4c99fa6bd51a6320fcb12d26160c6e1a2b55975f222763f8754f3544b68903f0255abbafdf2e501710b48a284ffd7f0306164d9b58ad9bef532066b8e5b7cbc0a11b655f0280beecf88a39545b6789603f9f1ff0e9707157812e77b2bb6be989e2f55b102e9ab02d4be6457054a627af4726ea60c47092a5ddb0b91af7e0603e1a9d6ff31282c4e62d19774595cb17243f52cabd66f0eab9b785742ea616ec43edf22a46593dc346c7d3cf08109da31ef2d54dd07c57018304754df905dada3005c0aafc7abcbdc1784d583439fda41b694bfb0fcbae738dd2712dcbf43e41a9ffd34548e8fc71f97006903f5a76e21606e3fdb130682deb06b4cb533e260bcc1114dadd0c22c76fe0f6b3118d607b254a385d16b1341c4d9281f272e8cce558c3ef22ce9dd8e7e1dba0ea8a8668364fa17e9fc8a7890e424d8da40f73713e9671b5629b5ee5970edcb589095971b54cb20f655dab1d6159af97b1e30243d6288a92c29a18682bd648205d611e4702c938981f2d8b499686c6f0552f47c87605163ad10bc3461e48b363e3c107296f585fda202667fac1a5cc495d04259fb341b5b91b09035c073a6afff241bdfa9b26dcb44542bd1af80e6cdf053ec4fa5580ba285a6932687ac9d4f8e8822db0901b7255686e8331f35683aca0da3410fe731388e5b4f9bae15b3a561a83106c7ae676eac78b9e1d3999fae812127ef14c3b199fca82be39db9845a89aa779bad3b5f61e44da4c100f529ec49a17117ae2fcf9d285f70b442731836f05194d332964a5484616237bd99e960127684e9ef974554d9d4726f30410b056cedf8789b8926581425e0b92ab21aa0c5f242d49fe41e1e696505453d896d4646c6b2942eb8279eeaf9937aa911604ee417949b0f4df997a18dd49f97652b1d2d3f34ab09dd77b1ba993e96152f877bb8027b5b9f913bee3d279961e3b2da4bf0f6976dd220625e097b54245dbe39846e9ea923256b1096b4223a09434bc4e7e69d38d460d52ff855fa3bc6fb5a3baa2954fbcc1a9c4086a4d541a43fdf93205232b4a321ea27e0b73abfec50be52358f411a4b1e1102ef5a725f8b5aef966b149a65ff811db98940e2156d3382ec629844ac79849052bcd620b33bffad9f889c3daf47fb0e127358a5f8463ff417dd6f65cc47907d680f0d8e885df4b90077e4cc8c8bbb1003086fee682406ab2e2f77a08fcde5692d3aaa187185a5303aa4283e9ef0e414988024dbd34a6288e78f0cb00e9254ff99dbff20503f50eca8f4e8ecd2c747e766da621916a7b825367514ea45c02663819281bbb0fd0c16eda841ede0b7346f435bc36d14ae8e78d4dac71289682ef0b8d28bcb4a8ba57bf5845b1a1eed47500c3fc7b912f9a19d9527c843704d4d5160b786784ae146222b19fa0c2cb155519c6f1e837fc1a276dc7755bcfea2b0646dbe3291c38fab02d23ded326a3778900b5bd7c357e5ea42aa3477f22e13365d6f63870a8da18ec1073dcfe48e58300e578fb31e594ec6b8bc891f7bc227dcd7804247e13dbb04c246cc09d73ad186a035ee134d52033f247b4829f1784db6dbab181cfb73e5db596b55ceb29ed0f64a43f9c22ce24d6a13421f6d39b7c9743486146c46dea4f7657cff05746eb9ad07a7ed08c19c1720b640eb38ade24fe3bc2af14df4f4e3d5f69f35a6db27c1e12cb1c6ac07143e4b7a660a2989000ac48a28c5bc61ad14edf11242da6d77ea4f01d13a107dc0434434c8fcd10d8641a9a1a6220ae9309825e06f1b82f6dac9706fbb060ceed5009d95c57c54a959c8c0f9663304b2708fe900f5c88f39932a68a57ac7f68cf82e29d0c44f82ddb54cc46f93892fa1e1c2ddf29ad71e79cb82bcba265e717398b48f4f72b599a4cb13dc162341bb9c17888c7d82e50bb69bc8fbe6d930e3935c2f105aa74c40c53f542fe99b6e5989d0b0befff51a40b38a7ee5a8b292f69bbce7e8e2159d57c4e1fd2890d54e6ef6815d643fd75eb57503e8dc77a2f968bc76bc466d983a2b687d5491a4c0d04e28fa5d3f16eb528b497ceda89fb99b931e1fba888423813efb1606d249f552ece68851984d09a1135ce56ed7e2104588ad00e05dcefbb5a8fa74fefdf2689328e887139ddbd395234a03a24f3d7aae8f9ff4cf3e3282b47c0bbbcc9e2735472b4d7a8264d050af40873d4b041d39b5b18d8092e609cd412cef2e6255f4c95d110e1e5372cefcee63d2936e48bcf75275c469f9ef87dd1501f05ab4961a323193827f67013bd062a9d326ac85f42331640da33d9ab0505c944f41f0122bd504f0e492cdad6b4f0c50a5816303ed29032a383578592a311d0d7cbd880c2b6165aa159ee0228bc46aad9645938125e195f329d4d597f53ec03369c69daadcaaed2c2f743a89dce76e467950cbd0b04ce74146aea413510e8de3c58ae2b6c24a6fc04e1eef92aefc2348bad3becad251d40278dd857df50a47dede07278b25a41d47132202d0e108d7997634c5472dcf6a9159af76b914a65b919aa811577df6d05693260ba2cbad4a63d5828e85c3c3017b449698c33dfd12239992b1737f651fcf66bc93526ba98340c9314c07e4bc9c6118738f7d3e87e9337a93c57a9544002479bee050a1144238c230ebbd8e3964e4c182f71ab3a32b8a5c5d0be9b091fcc6d0407acf223eada1d2baa12c2bb72f906c85b664902a34c36b053a3c62b98367bfc5dc391db0ddc67dddd8351b4a370a55fe350d6c6b6ecf697bfa0529d9cc95dc602d1bc5b2b2cf055a2fbe24ab7065137bcacd7390f2790310efa2052de27e1daecaac4bdd21dfa9158916187579e5ace747f6ac12e1d355a9bb91156bab409d8a73fc0154158efa043ae1244fb38b7a5f34f966ff07a7880770446bb3e3238f536c29a20d5fdba9362454392f9b75ee2381cb303dc7faf8b8d8ab190e3482b45947cf512e6d3132c65d511f6452cc8618e50c69a99a33c854be2cd386d2991eb9b9dae5beed0d63839dcce216595b474abfc17163c60f7e95c27b950a8f98920da95ad5c0e6a85b977dfe4f362353a1127d06b45a794552fb6b1e9d57d46c7d6a56e82d7bc1cb5975a79c6aaf44b6c244c59011ce7e27e2cae86a3f0566b7fbfb264ded3a5461561e44600b06ebbec7e29773362887dd1b2c9c642c031f5479ef5bf012e34f9710225abead05bb3dd5df3178ac3226afb44b630a0f5af6563f475066ec81acbffecad4641751471ffe1d4c965c68aa1abf87a1cf2334c357c5cf2641de5ecaa80fdc605ac9117a80b2b918cf152204dff4b2e3666fe19b1daa277acfcc43f4672c3f8fa166c122152264ef48747392caf4996b7c9c33d9b8d60a4077061a1ca65b20a90154d6fca83ebc097db164195f0a04d7d40aab35577b1be22502b233a0c14d3eab84a9c6f852453a0743d405c8d591399d38ed227e5d774ff61cbbd4cae39bf6a337f34c26ff3b2694742845c03401d7a10a12808ed32bb01a71026464464119d6c537f8dfd571790e24c783e93c4a34d5aab47e5f0b688e358818d8fd24c8c86e6e5a1989a137ffaac3e1a6b8bfbb5f9ba068a4260395a1d92c342707fe5a25431c9ab7ab95ca973ea1bf9964ca172175242aab4ca8c6cd63311bed8f17d5ea5020b10c2245bd14ade10e7c71907ba4d6eb32ec3739fb01cdb143ec32a0f23bda5e2c391a31048fa1341876d9664525531ae52ebf5549285902ea1a59977a907098d3478788d4e2c4f5a21d19c0a52952c0cd03bd368afbfe2c8f6a3a39b49396a1c51ce2777fdc2a81a36e5f221c6def96d9a3ee4a4fa0237032d5a84c48d2f83c6b821db623af6530e68ef8ead9ed6fa51c11f146ce29cbec36b98e31fc0142c36517ba734b3c0f22aef44cc383daa53cec65fd8d450bfd51d07364a04dc27b77fee2d13354bb8564379e8be1784c101b8976f40b97b0b864b0b05f058ad19a6657331849904b8d554c99abd6650245ce14d535784e3b7dc7542ec8aea8c0bc0efcfef9b0a7bfff89ee529634992c7b188cf22980da7029c7626f74ea371d47687ae428c047833fe73149266fb9a3e8d409cb811c56386415d66000ca8a350cba6b3bee237f0b7cbdd782983bb028437a68924e347de66ed9817f65af3a1a80fd7fa555aac32ecfc338bd4c28c1a0326a8b892aecbe7049d6a8a7bf5f2eee1fb456f072baecc46e95ea07500e23c26904278c88004e69e466649d30e7bceef9a1f644b6b642a79f44b6297ad14a6a85afb582b840d8652e4ac73f46e5b9b03873229c6dfa03e955002ffbd493e106f18ca6491a98dc8370942f2850e6eabcb5505de52b29783396c0c56f741db9d741abcaa0204bc92d12da3490118d979d7a4868b8b421efdd84f79655a502a0f66834bf1e35701ccde3af82067f61cdf2da298e0cd40556191f91822d795ad89e32a527a355335b00593508f8b37a8a4b0b6304a87611c773c635fb4493c4ab9b111cccb2c145e121ad824b1c3b9a84af84c45fe1400a62486f5ca0a9fe5af5217472bd4ae51f71f43d3829cf2984201a1facc561e61ffd47069a1a2d9a9f748940eb5833ed6ffaa6ef47748db9fb5ca515d1b81101dc6c13fdc2a1ba2782f54505eacd9232fb60f04ba3e8d8a24a3003f2421060fe198848f73b4010d7190f7810f5cd348367ea07d34e1d98400d94080837a1f67025779def133efb7783695c3b1668dd0861e491e302dc4a261d6b31edb7ae81c759caa71f959faebf53a9f8082e4e4e0234f7af57c2da3cbcaccd5acc5d559a1b1d93fe179635afed6c0379de1137cf6f3d309102770daf758b61c6ee8f894fb728e2eeb07de500a93b5593a4e01df06d40fea2677716197ce38e6903cea798d1b83653acf26326b5fe641c05f0dc8db8fa5e684b386c151f31408ec07929c02a3011e1e4f77d72d8d9faa7520c1bcf631e2cc261f6673489248b73ed386bf67525c04e151bb5ff38d81fbd88c6789d107125c5a9f8d5b322ae7e7e572a74440803c289d76610e8bde1df6cff9eb7b872802341095a21fbf84813825a112bea47f3d267157799a4d111844e142ae7c1a6f763d6bcb6297173c694a7496b7a93c6fcb6ac05b9b7b2bf54adfc8c3299dd73376a6af73e965930c8a6efda5dbf7391f756b9a5c5015fde67be5adaef79a1d0057d2ca2c3d6f9921f32eb971c1d0880a539a2a1f6ce2b028a0009040e03579ba9f90bf202536df0a982ba90d2cdb3cabb98be6a4ac159237a21835834b982f3af051cd0a52543257adc1db23ea9842e3da597bdcc06f31e4a7de8db62960490c2b3fa800d0d9566d1632e3346950bdec95588b18945872ad782bc6e1cde653cc287c2f1bf8b054d41534b9b9ed65f3a1463e054d9e6d919616570b7292a823ff3afb36d95efe42b4f69ea58cb64c1b1a22cc6d43929e63b74092f0caf2f9cf29d941a58831a167d277ff8c546367aa209e666a1ee158de9d17feca57287751c40c27db9b7d922659a499081a1517d6a7dd8b16dd5818563c2366272e86633a7e18bf67ba6013e863432bc1763f7d978e86953a58e27853117f6726805c6f07b350ddcc5512c12164a06a343bf1c7d25576ef045ca9b3abc93e8501b0a50675243d531d848676c816085dd4015824cd70c92c</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">请输入密码</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    
    <categories>
      
      <category>Flink</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Flink</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>JAVA设计模式</title>
    <link href="/posts/2024/12/b73f01b0.html"/>
    <url>/posts/2024/12/b73f01b0.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><h3 id="面向对象"><a href="#面向对象" class="headerlink" title="面向对象"></a>面向对象</h3><p><strong>特性</strong>：封装、抽象、继承、多态</p><p><strong>接口和抽象类的区别？</strong></p><p>接口是has-a，抽象类是is-a，接口倾向于丰富功能不是从属关系。</p><p><strong>实际工作中应该培养思维：</strong></p><p>基于接口而非实现编程，如函数的命名不能暴露任何实现细节，封装具体的实现细节，特殊的流程不应该暴露给调用者。</p><p>多用组合少用继承，委托和组合可以实现代码复用，委托为接口的一个实现类。</p><p><strong>面向对象编程的思考过程</strong></p><p>划分职责进而识别出有哪些类；</p><p>   根据需求的描述来识别类。</p><p>定义类及其属性和方法；</p><p>​    根据需求的描述识别动词就是方法，</p><p>定义类与类之间的交互关系；</p><p>   泛化、实现、组合、依赖</p><p>将类组装起来并提供执行入口</p><h3 id="设计原则"><a href="#设计原则" class="headerlink" title="设计原则"></a>设计原则</h3><p>1.单一职责</p><p>2.对扩展开放、修改关闭</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20241205160928.png"></p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20241205161021.png"></p><p>3.里式替换（LSP）</p><p>里式替换（LSP）跟多态有何区别</p><p>3.1子类违背父类声明要实现的功能</p><p>父类中提供的sortOrdersByAmount()订单排序函数，是按照金额从小到大来给订单排序的，而子类重写这个sortOrdersByAmount()订单排序函数之后，是按照创建日期来给订单排序的。那子类的设计就违背里式替换原则</p><p>3.2 子类违背父类对输入、输出、异常的约定</p><p>在父类中，某个函数约定：运行出错的时候返回null；获取数据为空的时候返回空集合（empty collection）。而子类重载函数之后，实现变了，运行出错返回异常（exception），获取不到数据返回null。</p><p>那子类的设计就违背里式替换原则。在父类中，某个函数约定，输入数据可以是任意整数，但子类实现的时候，只允许输入数据是正整数，负数就抛出，也就是说，子类对输入的数据的校验比父类更加严格，那子类的设计就违背了里式替换原则。</p><p>在父类中，某个函数约定，只会抛出ArgumentNullException异常，那子类的设计实现中只允许抛出ArgumentNullException异常，任何其他异常的抛出，都会导致子类违背里式替换原则</p><p>3.3 子类违背父类注释中所罗列的任何特殊说明</p><p>父类中定义的withdraw()提现函数的注释是这么写的：“用户的提现金额不得超过账户余额……”，而子类重写withdraw()函数之后，针对VIP账号实现了透支提现的功能，也就是提现金额可以大于账户余额，那这个子类的设计也是不符合里式替换原则的</p><p>4.接口隔离原则</p><p>接口隔离原则提供了一种判断接口的职责是否单一的标准：通过调用者如何使用接口来间接地判定。如果调用者只使用部分接口或接口的部分功能，那接口的设计就不够职责单一</p><p>5.控制反转、依赖反转、依赖注入</p><p>控制反转：程序需要main主函数入口才能运行，控制反转将这个控制过程交给框架，如spring框架</p><p>依赖注入：</p><p>​    依赖的类对象传递进来，这样就提高了代码的扩展性，我们可以灵活地替换依赖的类。</p><p>依赖反转：</p><p>   高层模块（high-level modules）不要依赖低层模块（low-level）。高层模块和低层模块应该通过抽象（abstractions）来互相依赖。除此之外，抽象（abstractions）不要依赖具体实现细节（details），具体实现细节（details）依赖抽象（abstractions）</p><h3 id="设计模式"><a href="#设计模式" class="headerlink" title="设计模式"></a>设计模式</h3><h3 id="编程规范"><a href="#编程规范" class="headerlink" title="编程规范"></a>编程规范</h3><h3 id="代码重构"><a href="#代码重构" class="headerlink" title="代码重构"></a>代码重构</h3></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
    </categories>
    
    
    <tags>
      
      <tag>JAVA</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>将深度学习代码同时运行在多个GPU显卡上</title>
    <link href="/posts/2024/11/dc207a7.html"/>
    <url>/posts/2024/11/dc207a7.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><h2 id="将深度学习代码同时运行在多个GPU显卡上"><a href="#将深度学习代码同时运行在多个GPU显卡上" class="headerlink" title="将深度学习代码同时运行在多个GPU显卡上"></a>将深度学习代码同时运行在多个GPU显卡上</h2><h3 id="步骤1"><a href="#步骤1" class="headerlink" title="步骤1"></a>步骤1</h3><p>设置os.environ[‘CUDA_VISIBLE_DEVICES’] 指定GPU</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 将import torch放在os.environ[&#x27;CUDA_VISIBLE_DEVICES&#x27;] = &#x27;0,1&#x27;后面</span><br><span class="hljs-keyword">import</span> os<br>os.environ[<span class="hljs-string">&#x27;CUDA_VISIBLE_DEVICES&#x27;</span>] = <span class="hljs-string">&#x27;0,1&#x27;</span><br><span class="hljs-keyword">import</span> torch<br><span class="hljs-built_in">print</span>(torch.cuda.device_count()) <span class="hljs-comment">#2说明指令生效</span><br><br><span class="hljs-comment"># 不能将import torch放在前面</span><br></code></pre></td></tr></table></figure><h3 id="步骤2-任选其一"><a href="#步骤2-任选其一" class="headerlink" title="步骤2(任选其一)"></a>步骤2(任选其一)</h3><p>1.使用DataParallel(适合PyTorch)</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> torch<br><span class="hljs-keyword">import</span> torch.nn <span class="hljs-keyword">as</span> nn<br><br><span class="hljs-comment"># 假设有个model</span><br>model = Yourmodel()<br><br><span class="hljs-comment"># 将模型放到多个GPU上(例如0，1)</span><br>model = nn.DataParallel(model,device_ids=[<span class="hljs-number">0</span>,<span class="hljs-number">1</span>])<br><span class="hljs-comment"># 将模型移到GPU上</span><br>model = model.cuda()<br><span class="hljs-comment"># 向前传播会自动在多个GPU上并行处理</span><br>output = model(input_data)<br></code></pre></td></tr></table></figure><p>2.使用DistributedDataParallel(适合分布式训练，支持多机多卡)</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> torch<br><span class="hljs-keyword">import</span> torch.distributed <span class="hljs-keyword">as</span> dist<br><span class="hljs-keyword">import</span> torch.multiprocessing <span class="hljs-keyword">as</span> mp<br><span class="hljs-keyword">from</span> torch.nn.parallel <span class="hljs-keyword">import</span> DistributedDataParallel <span class="hljs-keyword">as</span> DDP<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">train</span>(<span class="hljs-params">rank, world_size</span>):<br>    dist.init_process_group(<span class="hljs-string">&quot;nccl&quot;</span>, rank=rank, world_size=world_size)<br>    <br>    <span class="hljs-comment"># 设置 GPU 设备</span><br>    torch.cuda.set_device(rank)<br>    <br>    <span class="hljs-comment"># 假设你有一个模型</span><br>    model = YourModel().to(rank)<br>    ddp_model = DDP(model, device_ids=[rank])<br>    <br>    <span class="hljs-comment"># 模型训练等代码</span><br>    output = ddp_model(input_data)<br><br><span class="hljs-comment"># 在两个 GPU 上启动进程</span><br>world_size = <span class="hljs-number">2</span><br>mp.spawn(train, args=(world_size,), nprocs=world_size, join=<span class="hljs-literal">True</span>)<br><br></code></pre></td></tr></table></figure><ol start="3"><li><p>TensorFlow: 手动指定 GPU 并行</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> tensorflow <span class="hljs-keyword">as</span> tf<br><br><span class="hljs-comment"># 创建分布式策略</span><br>strategy = tf.distribute.MirroredStrategy(devices=[<span class="hljs-string">&quot;/gpu:0&quot;</span>, <span class="hljs-string">&quot;/gpu:1&quot;</span>])<br><br><span class="hljs-keyword">with</span> strategy.scope():<br>    model = YourModel()<br>    model.<span class="hljs-built_in">compile</span>(optimizer=<span class="hljs-string">&#x27;adam&#x27;</span>, loss=<span class="hljs-string">&#x27;sparse_categorical_crossentropy&#x27;</span>)<br><br><span class="hljs-comment"># 训练代码会自动并行运行在多个 GPU 上</span><br>model.fit(train_data, epochs=<span class="hljs-number">5</span>)<br><br></code></pre></td></tr></table></figure></li><li><p>使用 CUDA 的多 GPU 手动操作</p><p>对于更灵活的多 GPU 控制，你可以手动将模型拆分并将不同部分放在不同的 GPU 上。不过这种方法复杂度较高，适用于需要精细控制 GPU 使用的情况。</p></li></ol><h3 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h3><p>确保每个 GPU 的内存足够，特别是分布式训练时。<br>对于 DistributedDataParallel 和 MirroredStrategy，可能需要调整 batch size 以平衡每个 GPU 的负载。</p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    
    <tags>
      
      <tag>Deep Learning</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>pytorch加载模型torch.load()遇到问题ModuleNotFoundError: No module named models</title>
    <link href="/posts/2024/11/f6c7c567.html"/>
    <url>/posts/2024/11/f6c7c567.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><h2 id="问题描述："><a href="#问题描述：" class="headerlink" title="问题描述："></a>问题描述：</h2><p> 在加载自己训练的模型文件时，报错ModuleNotFoundError: No module named ‘models’。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> torch<br>model_tmp = torch.load(<span class="hljs-string">&#x27;./yolov5s.pt&#x27;</span>)<br><span class="hljs-built_in">print</span>(model_tmp)<br></code></pre></td></tr></table></figure><h2 id="问题分析："><a href="#问题分析：" class="headerlink" title="问题分析："></a>问题分析：</h2><p>写load的这个文件要放到具有yolov5工程的文件夹里运行，因为它会寻找原生yolo5工程下的models文件夹，里面还会有yolo.py等文件存在，这就是这个找不到”models”的由来。</p><h2 id="问题解决："><a href="#问题解决：" class="headerlink" title="问题解决："></a>问题解决：</h2><p>将代码加载权重文件所在的目录，新建models文件，然后把模型.py放到该目录，就没报错了。</p><p>虽然torch.save()既保存了模型又保存了权重参数文件，但是还需要将模型放到torch加载的地方。</p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    
    <tags>
      
      <tag>Deep Learning</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>数据服务实践</title>
    <link href="/posts/2024/06/70ced625.html"/>
    <url>/posts/2024/06/70ced625.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><h2 id="构建API集市，实现接口复用"><a href="#构建API集市，实现接口复用" class="headerlink" title="构建API集市，实现接口复用"></a>构建API集市，实现接口复用</h2><p>为了实现接口的复用，我们需要构建 API 的集市，应用开发者可以直接在 API 集市发现已有的数据接口，直接申请该接口的 API 权限，即可访问该数据，不需要重复开发</p><h2 id="操作流程"><a href="#操作流程" class="headerlink" title="操作流程"></a>操作流程</h2><ol><li>步骤一：创建数据源并配置网络连通性<br> 使用数据服务创建API前，需先将您的数据库或数据仓库添加为DataWorks数据源，以此作为数据服务API的数据来源。开发数据服务API时，数据服务将访问该数据源获取数据表的Schema信息，帮助您进一步设置请求和返回参数。调用数据服务API时，数据服务将访问该数据源来执行查询请求。</li><li>步骤二：创建API分组<br> 数据服务基于API网关对外提供服务。在API网关中，分组是API的管理单元，并与调用地址的域名相关联。因此，在数据服务中创建API前，需先在API网关创建API分组。</li><li>步骤三：新建业务流程<br> 数据服务基于业务流程实现以业务为单元的数据服务API开发，并通过业务流程对API及创建API所使用的函数等文件进行组织管理。因此，在数据服务创建API前，需先新建业务流程。</li><li>步骤四：生成API<br> 业务流程创建完成后，您可基于该业务流程创建相应业务的API。</li><li>步骤五：测试API<br> 已创建的API需进行测试运行，测试通过后，该API才可发布上线。</li><li>步骤六：发布API<br> 通过测试的API需发布上线，发布成功后，其他服务才可调用该API。</li><li>步骤七：调用API<br> 数据服务支持使用简单身份认证及加密身份认证调用数据服务API。</li><li>步骤八：查看与管理API<br> 发布上线的API可在服务管理页面查看，同时，数据服务支持根据业务需求进行下线、授权及查看API调用详情等管理操作。</li></ol><h2 id="技术实现"><a href="#技术实现" class="headerlink" title="技术实现"></a>技术实现</h2><ul><li>流控策略：单位时长内API调用限制(次)<br>  拦截器+redis+lua脚本实现redis操作原子性</li><li>访问策略：黑白名单<br>   拦截器</li><li>报警策略：根据告警规则触发微信或者飞书告警，告警规则如：平均响应时间，错误率，慢查询</li><li>api授权应用<br>  拦截器进行token的判断；<br>  api授权对象是应用而不是用户，可利用AppKey和AppSecret密钥对实现，AppKey需要在请求时作为参数在Header传入，AppSecret需要用于计算请求签名；</li><li>行列级权限</li></ul><ul><li><p>权限管理（权限表设计）</p></li><li><p>数据查询</p><p>拦截器+jdbc查询</p></li></ul><h2 id="开源产品"><a href="#开源产品" class="headerlink" title="开源产品"></a>开源产品</h2><p>详细Gitee链接freakchicken&#x2F;DBApi<br>优点：</p><ul><li>开箱即用，不需要编程，单机模式不需要依赖其他软件（只需要java运行环境）</li><li>支持单机模式、集群模式，支持windows Linux Mac</li><li>支持动态创建、修改API；动态创建、修改数据源。热部署全程无感。</li><li>支持API级别的访问权限控制，支持IP白名单、黑名单控制</li><li>支持所有类型数据库（JDBC协议），包括mysql&#x2F;sqlserver&#x2F;postgreSql&#x2F;hive&#x2F;oracle等等</li><li>支持动态sql，类似mybatis的动态sql，支持sql编辑、运行、调试</li><li>丰富的插件扩展，支持缓存、数据转换、失败告警</li><li>支持API配置导入导出，方便测试环境到生产环境的API迁移</li><li>支持一个接口内多条SQL执行（例如分页功能），支持事务开启关闭</li><li>支持复杂嵌套json传参</li><li>支持接口调用记录查询，接口访问信息统计<br>其主要存在以下缺陷：</li><li>DBAPI项目权限系统较简单，只能针对某一个接口进行权限进行管理，不能针对API组及用户进行权限进行管理</li><li>DBAPI在定义API过程中选择库表会进行全库全表进行扫描，过程速度慢</li><li>DBAPI没有API监控审计模块，不能直观看到API调用情况</li><li>DBAPI没有API限流，灰度发布等，集成的spring gateway功能有限</li><li>其主要是通过Sql去实现API的创建，暂时不支持向导模式及注册API</li><li>同时对于黑白名单的控制，仅能做到所有API设置黑白名单，不支持单个API控制黑白名单</li></ul><p><a href="https://gitee.com/ZhuGeZiFang/dataService">https://gitee.com/ZhuGeZiFang/dataService</a><br><a href="https://gitee.com/ecar_team/apimonitor">https://gitee.com/ecar_team/apimonitor</a></p><p><a href="https://gitee.com/freakchicken/db-api">https://gitee.com/freakchicken/db-api</a></p><p>参考链接：</p><p><a href="https://zhuanlan.zhihu.com/p/621266570?utm_id=0">SpringBoot 中使用Redis实现分布式限流</a></p><p><a href="https://juejin.cn/post/7238999185298423866">Sentinel 流量控制限流框架详解</a></p><p><a href="https://cloud.tencent.com/developer/article/2356983?from_column=20421&from=20421">微服务系列：通过Kong网关给API限流</a></p><p><a href="https://www.zhihu.com/tardis/zm/art/519873005?source_id=1005">数据服务平台产品</a></p><p><a href="https://zhuanlan.zhihu.com/p/137643229">基于开源项目动态发布Rest API的数据服务探索</a></p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>大数据</category>
      
    </categories>
    
    
    <tags>
      
      <tag>JAVA</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>基于GitLab-DolphinScheduler的SQL审核CI/CD实践</title>
    <link href="/posts/2024/06/230496ae.html"/>
    <url>/posts/2024/06/230496ae.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>数据开发在基于DolphinScheduler调度平台进行sql开发，对于需求的迭代和变更，需要在DolphinScheduler上进行sql的变更，但是在DolphinScheduler仅有的是对于sql task任务节点的修改记录的不同版本，只能进行版本的切换，对于sql文件的版本管控缺乏如git对文件变更的直观变化记录。</p><h2 id="工作流"><a href="#工作流" class="headerlink" title="工作流"></a>工作流</h2><p>Developer -&gt; 在Dolpin上创建工作流&amp;sql任务流-&gt; 保存工作流(gitlab在main分支创建对应sql文件,默认内容为select 1)</p><p>-&gt; 拉取gitlab的main分支 -&gt; gitlab创建自己的分支 -&gt; 修改gitlab文件(对应工作流) -&gt; 发起merge request</p><p> -&gt; 触发gitlab CI&#x2F;CD管道进行sql规则校验 -&gt; 飞书通知审核人审核 -&gt; 审核通过merge到主分支 -&gt; 通知成功merge并保存变更的文件内容到dolpin</p><h2 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h2><p>1.DolphinScheduler上进行sql插件编辑权限的管控，在用户上新增sql编辑功能的权限管控</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20240614231950.png"></p><p>2.DolphinScheduler工作流定时上下线通知</p><p>修改dolpin源码</p><p>ProcessDefinitionServiceImpl.releaseProcessDefinition()方法上下线新增飞书通知</p><p>SchedulerServiceImpl.setScheduleState()方法上下线新增飞书通知</p><p>3.java-gitlab api操作DolphinScheduler创建编辑工作流同步到gitlab对应的sql文件</p><p>修改dolpin源码，创建工作流&#x2F;编辑工作流&#x2F;删除工作流同步操作gitlab上的文件</p><p>(历史任务初始化到gitlab文件-shell脚本)</p><p>4.GitLab 的数据库 CI&#x2F;CD工作流</p><p>安装gitlab runner环境</p><p>编写.gitlab-ci.yml文件放在对应gitlab项目下</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">This file is a template, and might need editing before it works on your project.</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">To contribute improvements to CI/CD templates, please follow the Development guide at:</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">https://docs.gitlab.com/ee/development/cicd/templates.html</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">This specific template is located at:</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">https://gitlab.com/gitlab-org/gitlab/-/blob/master/lib/gitlab/ci/templates/Getting-Started.gitlab-ci.yml</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">This is a sample GitLab CI/CD configuration file that should run without any modifications.</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">It demonstrates a basic 3 stage CI/CD pipeline. Instead of real tests or scripts,</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">it uses <span class="hljs-built_in">echo</span> commands to simulate the pipeline execution.</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash"></span><br><span class="language-bash"><span class="hljs-comment"># A pipeline is composed of independent jobs that run scripts, grouped into stages.</span></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">Stages run <span class="hljs-keyword">in</span> sequential order, but <span class="hljs-built_in">jobs</span> within stages run <span class="hljs-keyword">in</span> parallel.</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash"></span><br><span class="language-bash"><span class="hljs-comment"># For more information, see: https://docs.gitlab.com/ee/ci/yaml/index.html#stages</span></span><br><br>stages:          # List of stages for jobs, and their order of execution<br>  - build<br>  - test<br>  - deploy<br><br>merge_request_rule_check:<br><span class="hljs-meta prompt_"># </span><span class="language-bash">指定Runner&lt;必填&gt;</span><br>  tags:<br>    - bigdata_gitlab_runner_01<br>  stage: build<br>  script:<br>    - echo $CI_MERGE_REQUEST_TARGET_BRANCH_NAME<br>    - echo $CI_MERGE_REQUEST_EVENT_TYPE<br>    - echo $CI_PIPELINE_SOURCE<br>    - echo $CI_COMMIT_BRANCH<br>    - bash /opt/gitlab-scripts/datawharehouse_pro/merge_request_rule_check.sh<br>  rules:<br>    - if: &#x27;$CI_MERGE_REQUEST_EVENT_TYPE == &quot;detached&quot; &amp;&amp; $CI_MERGE_REQUEST_TARGET_BRANCH_NAME==&quot;main&quot;&#x27;<br><br>merge_review_notification:<br>  tags:<br>    - bigdata_gitlab_runner_01  <br>  stage: build<br>  script:<br>    - echo $CI_MERGE_REQUEST_EVENT_TYPE<br>    - echo $CI_PIPELINE_SOURCE<br>    - echo $CI_COMMIT_BRANCH<br>    - bash /opt/gitlab-scripts/datawharehouse_pro/merge_review_notification.sh $CI_PROJECT_ID<br>  needs:<br>    - merge_request_rule_check<br>  rules:<br>    - if: &#x27;$CI_PIPELINE_SOURCE == &quot;merge_request_event&quot; &amp;&amp; $CI_MERGE_REQUEST_EVENT_TYPE == &quot;detached&quot;&#x27;<br><br>review_result_notification:<br>  tags:<br>    - bigdata_gitlab_runner_01  <br>  stage: build<br>  script:<br>    - echo $CI_MERGE_REQUEST_EVENT_TYPE<br>    - echo $CI_MERGE_REQUEST_TITLE<br>    - echo $CI_MERGE_REQUEST_IID<br>    - echo $CI_COMMIT_TITLE<br>    - bash /opt/gitlab-scripts/datawharehouse_pro/review_result_notification.sh $CI_PROJECT_ID<br>  rules:<br>    - if: &#x27;$CI_COMMIT_BRANCH == &quot;main&quot; &amp;&amp; $CI_PIPELINE_SOURCE == &quot;push&quot;&#x27;<br><span class="hljs-meta prompt_">  #</span><span class="language-bash">allow_failure: <span class="hljs-literal">true</span></span><br></code></pre></td></tr></table></figure><p>merge_request_rule_check.sh功能：对于提交merge request的提交变更文件的内容进行sql规则校验，校验通过才能提交merge request成功。</p><p>如下图为触发sql规则检验</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20240614233144.png"></p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20240614233317.png"></p><p>merge_review_notification.sh功能：对于提交merge request成功飞书通知到reviewer</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20240614233410.png"></p><p>review_result_notification.sh功能：更新变更内容到dolpin指定的task(修改元数据task definition和task definition log表)并进行merge成功的飞书通知。</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20240614233437.png"></p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>大数据</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
      <tag>DolphinScheduler</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Theme-Aware Aesthetic Distribution Prediction With Full-Resolution Photographs</title>
    <link href="/posts/2023/09/628d42dd.html"/>
    <url>/posts/2023/09/628d42dd.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><p>该论文发表在IEEE TRANSACTIONS ON NEURAL NETWORKS AND LEARNING SYSTEMS, VOL.XX, NO.XX, JANUARY, 2021，CCF B评级</p><h2 id="1-Introducation"><a href="#1-Introducation" class="headerlink" title="1.Introducation"></a>1.Introducation</h2><p>为了解决统一的输入尺寸约束和真实世界图像的不同尺寸之间的冲突，</p><p>本文通过在以填充图像为输入的网络中应用RoM池化，开发了一种名为PRP的新方法。</p><p>1.这种方法使我们能够利用填充来保持统一的图像大小，同时消除其副作用。这是AQA中第一个支持端到端批处理的方法。</p><p>2.提出了一种SA模块来弥补RoM池化层中形状信息丢失的问题。对原始图像纵横比进行编码，并与视觉特征进行融合，使模型适应不同的图像形状。</p><p>3.我们发现，在没有主题信息的AVA数据集中对图像进行评价是不准确的，因为存在主题准则偏差。一个主题感知模块被提出来解决这个问题。对主题进行编码，并结合视觉特征，更准确地预测美学质量。</p><p>4.我们提出了一个基于注意力机制的融合模块，将包括<strong>形状特征</strong>和<strong>主题特征</strong>在内的额外特征与图像特征进行融合。该模块有效地挖掘了不同特征之间的关系。</p><h2 id="2-Related-Work"><a href="#2-Related-Work" class="headerlink" title="2.Related Work"></a>2.Related Work</h2><p>A.Photo Aesthetic Quality Assessment</p><p>尽管这些基于DNNs的工作已经取得了很大的进展，但它们仍然受到固定输入大小问题的困扰</p><p>因此，研究人员提出了解决这一问题的方法。一些工作[ 11 ]、[ 12 ]、[ 40 ]、[ 45 ]提出从原始图像中<strong>裁剪出多个固定大小的图斑</strong>，并将这些图斑提取的特征进行聚合来预测美学质量</p><p>Ma等人[ 12 ]提出根据一些基于人类感知的标准来选择补丁；因此，<strong>斑块可以更具有代表性</strong>。Sheng等人[ 46 ]提出了一种基于注意力的方法，<strong>动态地学习不同块的权重</strong>，而不是根据预定义的标准来选择块</p><p>另一些工作则试图<strong>保持输入图像的纵横比</strong>；他们采用FCN [ 13 ]或SPP [ 14 ]从任意网络输入生成固定大小的特征[ 16 ]，[ 15 ]，[ 47 ]，[ 17 ]。为了适应更好地在固定输入上运行的深度学习工具，一些人使用多尺寸训练作为近似，但只考虑了1.0和1.5的纵横比[ 15 ]，[ 17 ]。Apostolidis等人[ 16 ]进行了<strong>批大小为1</strong>的实验，以便可以接受任何输入大小。然而，该方法的性能甚至不如图像变换方法，可能是由于训练过程不稳定造成的。Hosu等人[ 26 ]从<strong>ImageNet预训练</strong>的模型中提取特征，无需微调；因此，他们可以在一个<strong>两阶段的训练过程中使用原始照片</strong>。Chen等人[ 48 ]提出了一种不同的思想，即使用分数步幅的卷积来适应扭曲的输入。</p><p>B.Pooling Methods and Multisize Feature Extraction Methods</p><p>池化在降低计算复杂度方面起着至关重要的作用。在最初的池化方法实现中，步长和核大小都是人工固定的</p><p>即池化输入大小和输出大小之间的比例是固定的。He等人[ 14 ]指出这样的性质使得网络不灵活，因为全连接层只能接受固定大小的输入。SPP的设计目的是使池化层能够从任意输入中生成固定大小的特征，并且它还可以提取多尺度信息。这是通过使用自适应池化核和步长来实现的。具体来说，池化尺寸是手动固定的，池化步长和内核尺寸定义为输入尺寸和固定池化尺寸之间的比值。为了将SPP融入到网络中，提出了两种方法。一种使用多尺寸端到端训练策略，具有两个预定义尺寸224和180。另一种采用两阶段训练框架，不需要对主干CNN进行微调，使得图像不需要调整大小。</p><p>在传统池化和SPP中，池化都应用于整个输入特征图。也就是说，池化核的移动范围固定为整个输入。然而，在目标检测任务中，一个物体只占据图像区域的一部分。为了仅从目标区域提取特征而丢弃其他特征，RoI池化在[ 18 ]中被提出。<strong>RoI池化</strong>能够从任意大小和位置的区域中提取固定大小的特征。这意味着可以根据不同的RoI自适应地修改核的移动范围、核的大小和步长。为了校正量化误差，文献[ 52 ]将RoI池化改进为RoI对齐。这种增强显著提高了小目标的检测性能。RoI池化(对齐)变成了st模型[ 53 ]，[ 54 ]，[ 55 ] . SPP和RoI池化都可以使网络接受任意大小的输入图像。为了实现这一目标，去除全连接层和仅使用卷积层也是一种解决方案。这种网络被命名为FCN，最初被用于解决语义分割任务[ 13 ]。</p><p>SPP和RoI池化都可以使网络接受任意大小的输入图像。为了实现这一目标，去除全连接层和仅使用卷积层也是一种解决方案。这种网络被命名为FCN，最初被用于解决语义分割任务</p><h2 id="3-Method"><a href="#3-Method" class="headerlink" title="3.Method"></a>3.Method</h2><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20230925225346.png"></p><p>A. RoM Pooling on Padded Full-Resolution Images</p><p>具体来说，我们将数据集中的所有图像填充到相同的尺寸。不管图像是如何填充的，所以我们使用最直接的方法，即<strong>沿着底部和右侧边界垫零</strong>。经过填充后，输入图像变成两个区域的空间可分离的组合：一个区域被填充为0的填充值，另一个区域是原始图像。<strong>原始图像的区域称为RoM</strong>，其空间坐标范围为(0，0 )到( w , h)，其中w和h分别为原始图像宽度和高度。</p><p>然后将填充后的图像送入网络，并通过一些卷积层进行处理。将RoM对应映射到特征图上。因此，RoM池化层的输入特征图也成为填充区域和图像区域( RoM )在空间上可分离的组合。RoM池化层将RoM中的特征池化到手动定义的大小，并将RoM外的特征丢弃。因此，池化后的特征具有相同的大小，并且去除了填充引入的额外信息。形式上，RoM池化的输出位置( b , c , m , n)处的特征给出如下。</p><p>在我们的实现中，我们直接使用文献[ 23 ]中提出的多传感头注意力，并将头数设置为8。由于查询特征长度ft为1，因此不需要进行位置嵌入。注意力层将视觉特征的空间维度变为1，可以看作是一种特殊的全局池化层，根据额外的特征对不同的空间位置赋予不同的权重。该模块挖掘了额外特征与图像空间特征之间的关系。因此，更有效地利用了额外的特征。</p><p>B.Encoding Shape Information</p><p>将连续的纵横比离散化，并将离散值转化为独热码。然后使用两个全连接层从one - hot编码中提取形状特征。最后，将形状特征与视觉特征进行融合，对美学质量进行预测</p><p>C.Theme-aware AQA</p><p>我们将AVA数据集中的1，397个不同主题转化为one - hot编码，并使用两个全连接层来提取主题特征</p><p>D. Attention-Based Feature Fusion</p><p>将RoM得到的视觉特征和形状特征和主题特征融合。基于注意力机制的特征融合，利用<strong>两个注意力层</strong>分别用于处理形状特征和主题特征，另外利用<strong>全局平均池化层来直接池化视觉特征</strong>。最终得到3个特征，包括形状引导的视觉特征、主题引导的视觉特征和纯视觉特征。将这3个特征相加作为融合输出。</p><p>额外的特征被视为查询Q，扁平化的视觉特征被用作键值K和值V。注意力层的架构如图6所示，其中ft和fi分别为额外特征和扁平化的视觉特征。我们直接使用文献[ 23 ]中提出的多传感头注意力，并将头数设置为8。由于查询特征的长度ft为1，因此不需要进行位置嵌入。注意力层将视觉特征的空间维度变为1，可以看作是一种特殊的全局池化层，根据额外的特征对不同的空间位置赋予不同的权重。</p><h2 id="4-Experiment"><a href="#4-Experiment" class="headerlink" title="4.Experiment"></a>4.Experiment</h2><p>我们选择Inception-V3[ 9 ]作为我们的骨干网络，这与之前的工作[ 28 ]，[ 29 ]，[ 26 ]相同。在Inception-V3中插入RoM池化层来代替原来的第一个池化层。我们的模型以填充图像作为输入。这与最初的Inception-V3不同，它将所有的输入大小调整为299 × 299。因此，RoM池化的大小需要进行相应的修改。RoM池化大小是一个超参数，没有简单的方法来寻找最优解。</p><p>因此，我们根据一些经验线索来选择池化规模。我们的主要考虑是保持第一个池化尺寸与原始图像尺寸之间的比例与原始Inception-V3的比例相似。然而，对于不同的图像，其大小可能是不同的。因此，我们选择AVA数据集中比较常见的600大小的图像作为基准。因此，RoM池化尺寸( wout , hout)是通过将基准尺寸600与原始Inception-V3中相应的比率73&#x2F;299相乘得到的，</p><p>wout &#x3D; hout &#x3D; 600 × 73&#x2F;299 ≈ 146,</p><p>73为原始Inception-V3中第1个池化层的池化大小，299为Inception-V3的输入大小。</p><p>在训练阶段，通过对所有预定义质量分数的投票数进行归一化处理，计算训练图像xi的真实感美学分布pi。</p><p>pi k &#x3D; vi k ∑K k&#x3D;1 vi k ,</p><p>其中vi k为质量分数k的投票数，K为最大质量分数。在我们的模型得到预测的美学分布Δ pi后，我们使用分布之间的地球自转距离( EMD ) [ 28 ]作为损失函数。EMD损失基于累积分布密度，当分布有序时效果较好。</p><p><strong>Implementation Details</strong></p><p>我们的所有模型都在ImageNet上进行预训练以加速收敛，并在相应的数据集上进行微调。使用动量为0.9，权重衰减为0.0001的SGD优化器对网络进行训练。学习率每10个epoch除以2，模型训练40个epochs。我们将卷积层的初始学习率设置为4 × 10 - 3；而对于随机初始化的层，学习率要大10倍。我们测试了两种类型的填充实现，并得到了几乎相同的性能。</p><p><strong>Ablation Study</strong></p><p>第一个基线模型将图像缩放到相同大小，由于我们的方法使用了全分辨率图像，为了公平比较，我们将所有图像尺寸调整为800 × 800，这是AVA数据集中最大的图像尺寸。</p><p>第二个基线模型使用填充变换。我们将所有的图像填充到800 × 800。在缩放基线和填充基线中，为了消除其他因素的影响，我们使用与全模型实验相同的数据增强方法和特征图尺寸(第一个池化层的输出大小)。随机裁剪固定大小块的第三条基线，由于大小的原因，需要与图像缩放相结合裁剪后的图像块不能大于数据集中的最小图像尺寸。然而，AVA的最小尺寸仅为160 × 160。</p><h2 id="5-Conclusion"><a href="#5-Conclusion" class="headerlink" title="5.Conclusion"></a>5.Conclusion</h2><p>该论文工作的缺点：</p><p>1.我们的方法在偏态分布上效果很差</p><p>该模型不能预测不常见的分布。这两种分布都是非高斯的，且都有异常值。在第一幅图像中，投票得9分的人数太少。对于第二幅图像，许多用户投票得分为1。它们都是AVA数据集中的非典型分布，如Gamma分布[ 10 ]。这可能是模型不能很好地评估它们的原因。</p><p>2.首先，BERT码在不同主题之间具有较低的区分性。第二，我们的模型不能有效地利用BERT码中的语义信息。我们认为BERT码中的语义信息是有价值的。我们将在未来的工作中进一步研究这种编码方法。</p><h2 id="6-Personal-Thinking"><a href="#6-Personal-Thinking" class="headerlink" title="6.Personal Thinking"></a>6.Personal Thinking</h2><p><strong>SPP(spatial pyramid pooling)金字塔池化</strong>：</p><p>一般而言，对于一个CNN模型，可以将其分为两个部分：</p><ol><li>前面包含卷积层、激活函数层、池化层的特征提取网络，下称CNN_Pre</li><li>后面的全连接网络，下称CNN_Post</li></ol><p>许多CNN模型都对输入的图片大小有要求，实际上CNN_Pre对输入的图片没有要求，可以简单认为其将图片缩小了固定的倍数，而CNN_Post对输入的维度有要求，简而言之，限制输入CNN模型的图片尺寸是为了迁就CNN_Post。</p><p>SPP是为了解决，无论CNN_Pre输出的feature maps尺寸是怎样，都能输出固定的维度传给CNN_Post。</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20230925213516.png"></p><p><strong>Rol Pooling</strong></p><p>是一种针对于特征图的一种特殊pooling操作，特点是输入的特征图尺寸不固定，但是输出特征图尺寸固定。可以看成是特殊的SPP。</p><p>Rol Pooling最初被提出是在目标检测任务中，在目标检测中提取的候选框中，’候选框（proposal）’的大小是不一样的，所以映射到feature map上的矩阵大小也是不一样的。我们需要将‘候选框’映射到特征图上所产生的的矩阵通过一些操作产生shape相同的vector or matrix，因此使用Rol Pooling的方法。</p><p>Example：</p><p><strong>（考虑一个8*8大小的feature map，一个ROI，以及输出大小为2*2.）：</strong></p><p>1.输入的固定大小的feature map</p><p>2.region proposal 投影在feature map上的位置</p><p>3.将其划分为（2<em>2）个sections（因为输出大小为2</em>2），我们可以得到：</p><p>4.对每个section做max pooling，可以得到：</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20230925214606.png"></p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20230925214718.png"></p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20230925214755.png"></p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20230925214818.png"></p><p><strong>注意力机制(Attention mechanism)</strong></p><p>1.单头注意力</p><p>最初注意力机制的提出，是在Transformer中，参考论文Attention is All You Need。</p><p>输入是query和 key-value，注意力机制首先计算query与每个key的关联性（compatibility），每个关联性作为每个value的权重（weight），各个权重与value的乘积相加得到输出。</p><p>Example：</p><p>厨房里有苹果、青菜、西红柿、玛瑙筷子、朱砂碗，每个物品都有一个key（ dk维向量）和value（ dv维向量）。现在有一个“红色”的query（ dq维向量），注意力机制首先计算“红色”的query与苹果的key、青菜的key、西红柿的key、玛瑙筷子的key、朱砂碗的key的<strong>关联性</strong>，再计算得到<strong>每个物品对应的权重</strong>，最终输出 &#x3D;（苹果的权重x苹果的value + 青菜的权重x青菜的value + 西红柿的权重x西红柿的value + 玛瑙筷子的权重x玛瑙筷子的value + 朱砂碗的权重x朱砂碗的value）。</p><p>最终输出包含了每个物品的信息，由于苹果、西红柿的权重较大（因为与“红色”关联性更大），因此最终输出受到苹果、西红柿的value的影响更大。</p><p>2.多头注意力</p><p>上述只求一次注意力的过程可以叫做单头注意力。多头注意力就是对同样的Q, K, V求多次注意力，得到多个不同的output，再把这些不同的output连接起来得到最终的output</p><p>不同头部的output就是从不同层面（representation subspace）考虑关联性而得到的输出。</p><p>例如，以“红色”为query，第一个头部（从食物层面考虑）得到的output受到苹果、西红柿的value的影响更大；第二个头部（从餐具层面考虑）得到的output受到玛瑙筷子、朱砂碗的value的影响更大。相比单头注意力，多头注意力可以考虑到更多层面的信息。</p><p>3.自注意力（self-attention）</p><p>当注意力的query和key、value全部来自于同一堆东西时，就称为自注意力。</p><p>例如，厨房里有苹果、青菜、西红柿、玛瑙筷子、朱砂碗，每个物品都会计算得到一个query（ dq 维向量），以及一个key（ dk维向量）和value（ dv维向量）。“苹果”的query与苹果、青菜、西红柿、玛瑙筷子、朱砂碗的key和value做注意力，得到最终输出。其他物品的query也如此操作。这样，输入5个物品，有5个query，得到5个输出，相当于将这5个物品换了一种表示形式，而这新的表示形式（得到的输出）每个都是是考虑了所有物品的信息的。</p><p>reference：</p><p><a href="https://zhuanlan.zhihu.com/p/366592542">注意力机制</a></p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>论文阅读</category>
      
    </categories>
    
    
    <tags>
      
      <tag>CV - image aesthetics</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Context-aware Attention Network for Predicting Image Aesthetic Subjectivity</title>
    <link href="/posts/2023/09/e091457e.html"/>
    <url>/posts/2023/09/e091457e.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><p>论文发表在ACM Multimedia Conference 2020，ACM MM是CCF A类会议</p><h2 id="1-Introduction"><a href="#1-Introduction" class="headerlink" title="1.Introduction"></a>1.Introduction</h2><p>提出了一种有效的基于上下文感知注意力的模型来预测美学分数分布，该模型将强调局部特征与上下文信息联系起来，并捕获了美学的主观性。</p><p>提出了一个注意力模块，通过多级细节和远程感知来提供丰富的上下文依赖。它建立在<strong>层级和空间</strong>两个维度上。</p><p>引入一种新的基于<strong>Bhattacharyya距离的损失函数</strong>来衡量客观预测分布与主观真实分布之间的相似性。</p><p>实验结果表明，本文提出的方法取得了最先进的性能，在秩相关性上有大约10 %的提升。</p><h2 id="2-Related-Work"><a href="#2-Related-Work" class="headerlink" title="2.Related Work"></a>2.Related Work</h2><h2 id="3-Method"><a href="#3-Method" class="headerlink" title="3.Method"></a>3.Method</h2><p>backbone</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20230918224713.png"></p><h3 id="Hierarchical-Context"><a href="#Hierarchical-Context" class="headerlink" title="Hierarchical Context"></a>Hierarchical Context</h3><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20230918225143.png"></p><p>从网络中融合多层特征来编码图像的层次上下文。由于通道描述符中的注意力可以看作是一个选择模式因子的过程[ 1 ]，因此我们在该模块中使用通道特征。提出的融合模块来推导分层上下文如图3所示。可以概括为三个步骤。</p><p>​    首先，从网络中提取这些特征。由于每个通道的特征都是用局部感受野学习的，缺乏区域之外的上下文信息[ 11 ]，因此每个特征后面都有一个全局平均池化层( Global Average Pooling，GAP )和一个全局最大池化层( Global Max )，单独的池化( GMP )层。GAP和GMP将不同的空间信息压缩到信道载体中。然后，将这些特征沿通道轴线进行拼接。设f为提取的特征，n为特征总数，则串联后的F∈RC′× 1 × 1可写为：</p><p>F 𝜇 &#x3D; [f𝑐1 𝜇 , f𝑐2 𝜇 , …, f𝑐𝑛 𝜇 ]</p><p>其中μ∈{ GAP，GMP }，[ · , ·]表示级联操作.最后，我们在级联特征中使用一个全连接层，作为学习不同级别通道之间相关性的步骤。级联特征F被映射成一维向量Vh ( x )∈RC × 1 × 1。输出的层次上下文是GAP和GMP之后的向量之和。它将为美学评估捕获更多的信息模式因素。层次上下文Vh ( x )可以写为：</p><p>V ℎ (𝑥) &#x3D; W0 (F𝐺𝐴𝑃 ) + W1 (F𝐺𝑀𝑃 )</p><h3 id="Spatial-Context"><a href="#Spatial-Context" class="headerlink" title="Spatial Context"></a>Spatial Context</h3><p> 建立了一系列的膨胀卷积来获得对原始图像的长期感知。<strong>逐步提高扩张率</strong>，避免了感受野中只有一部分像素可以参与卷积的网格化问题。速率遵循递增规则[ 29 ]，我们将<strong>速率调整为沙漏结构</strong>以满足我们的任务。为了涉及更多的像素，<strong>速率首先增加，以获得更大的感受野。然后减小，卷积集中在最相关的部分</strong>。</p><p>最终，最后一个卷积层输出一个单通道矩阵作为空间上下文，以编码广泛的空间上下文信息。</p><h2 id="4-Experiment"><a href="#4-Experiment" class="headerlink" title="4.Experiment"></a>4.Experiment</h2><h2 id="5-Conclusion"><a href="#5-Conclusion" class="headerlink" title="5.Conclusion"></a>5.Conclusion</h2><p>在本文中，提出了一种有效的基于上下文感知注意力的方法来预测图像美学评估的分数分布。</p><p>与最近大多数使用注意力机制裁剪或聚合图斑的工作不同，本文的方法通过学习上下文感知的注意力来增强部分特征，从而保留局部视图和整体视图之间的上下文关系。</p><p>此外，采用计算复杂度较低的Bhattacharyya距离来度量与感知人类视觉相关性较好的客观预测分布和主观评分分布之间的相似性。实验结果证明了所提方法的性能。</p><h2 id="6-Personal-Thinking"><a href="#6-Personal-Thinking" class="headerlink" title="6.Personal Thinking"></a>6.Personal Thinking</h2><p>膨胀卷积Dilated convolution，中文叫做空洞卷积或者扩张卷积，起源于语义分割。</p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>论文阅读</category>
      
    </categories>
    
    
    <tags>
      
      <tag>CV - image aesthetics</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Learning image aesthetic subjectivity from attribute-aware relational reasoning network</title>
    <link href="/posts/2023/09/3cfeb7e3.html"/>
    <url>/posts/2023/09/3cfeb7e3.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><p>该论文发表在（PRL）CCF C类</p><p>Pattern Recognition Letters 155 (2022) 84–91</p><p>Hancheng Zhu a,b, Yong Zhou a,b,∗, Rui Yao a,b, Guangcheng Wang c, Yuzhe Yang d </p><p>a：School of Computer Science and Technology, China University of Mining and Technology, Xuzhou 221116, China </p><p>b：Engineering Research Center of Mine Digitization, Ministry of Education of the People’s Republic of China, Xuzhou 221116, China </p><p>c ：School of Transportation and Civil Engineering, Nantong University, Nantong 226019, China d School of Electronics and Computer Science, University of Southampton, Southampton SO17 1BJ, United Kingdom</p><h2 id="1-Introduction"><a href="#1-Introduction" class="headerlink" title="1.Introduction"></a>1.Introduction</h2><p>​    现有的方法通常利用卷积神经网络( Convolutional Neural Networks，CNNs )将图像美学映射为两个典型的任务，即<strong>二分类[ 6 ]和分数回归[ 7 ]<strong>。</strong>然而，上述方法采用的单一标签并不能完整地描述不同人在图像中的主体性</strong>，</p><p>​    为了解决上述问题，一些工作试图<strong>利用可解释的美学属性</strong>来揭示影响人们对图像[ 13、14]的美学评分的线索。这些工作认为美学属性与图像美学密切相关，并直接利用美学属性来辅助图像美学评估任务[ 15 ]。然而，<strong>不同人对图像美学属性有各种各样的偏好</strong>，直接使用美学属性来学习不同人评分的图像美学分布可能存在问题。</p><p>例如，图1显示了来自AADB数据库的三幅图像和相应的十一个美学属性[ 13 ]。每张图片下方为5人对图片评分的美学分布和平均分,对图像进行美学评分(图1 ( a )、( b ) )。相反，图像中不明显的审美属性会导致人们的审美评价存在巨大差异(图1 ( c ) )。因此，图像中审美属性的多样性是导致人们对图像的审美感知具有不确定性的关键因素。为了充分利用美学属性对图像美学分布的影响机制，一个有效的解决方法是探索图像中多样化美学属性之间的隐含关系，以建模人们审美评分的主观性。</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20230916194353.png"></p><p>本文方法的主要贡献可归纳如下：</p><p>1.讨论了图像美学评价的主观性，分析了图像中美学属性之间的隐含关系对人们审美评价的影响。鉴于此，本文提出了一种基于属性感知关系推理网络的图像美学分布预测方法。</p><p>2.引入了一个有效的分布损失函数来优化所提出的模型，这可以增强模型对具有高不确定性的图像美学的学习效率，并提高我们预测图像美学分布的方法的性能。</p><p>3.提出了一个属性感知的关系推理网络来学习不同人评价的图像美学分布。在两个IAA数据库上的实验结果表明，我们的模型在学习图像美学主观性方面比最先进的模型具有更优越的性能。</p><h2 id="2-Related-Work"><a href="#2-Related-Work" class="headerlink" title="2.Related Work"></a>2.Related Work</h2><h3 id="Binary-classification"><a href="#Binary-classification" class="headerlink" title="Binary classification"></a>Binary classification</h3><p>摄影手工特征的提取：</p><p>早期的作品一般简单地将图像美学分为两类(高审美与低审美)。Datta等人[ 18 ]提取了一些与摄影规则相关的手工特征，如景深、颜色和构图，用于训练用于美学二分类的SVM模型。在[ 19 ]中，Tang等人将图像内容分为七类，并使用不同的策略来提取区域和全局手工特征，以评估图像美学。虽然这些方法可以利用基于摄影规则的手工特征来评估图像美学，但它们无法捕获能够全面表征图像美学的高级属性特征。</p><p>深度学习提取一些风格和语义属性：</p><p>随着深度学习[ 20 ]和大规模IAA数据库[ 21 ]的提出，例如，Lu等人[ 22 ]提出了一种美学分类方法，该方法可以利用CNN提取一些风格和语义属性，以进一步提高美学分类性能。Kao等人[ 23 ]提出了一种基于单任务网络的图像美学评价方法，利用语义属性识别来辅助图像美学分类任务。尽管美学二分类取得了重大进展，但这些方法不能定量地衡量人们对图像的美学评分。</p><h3 id="Score-regression"><a href="#Score-regression" class="headerlink" title="Score regression"></a>Score regression</h3><p>为了定量地评估人们对图像的美学评分，一些工作开始利用图像的平均评分作为目标进行回归建模。例如，Kong等人[ 13 ]引入了排序网络来联合学习自适应的图像属性和内容，用于图像美学分数回归。此外，Pan等人[ 14 ]提出了一种同时学习图像美学属性的多任务回归网络和美学评分，并引入判别器来加强所提出的多任务回归网络的学习能力。上述方法已经表明，审美属性的确对人们对图像的审美判断产生了巨大的影响。然而，由于视觉审美的主观性[ 12 ]，平均审美分数很难直观地反映人们对图像的审美评分。</p><h3 id="Distribution-prediction"><a href="#Distribution-prediction" class="headerlink" title="Distribution prediction"></a>Distribution prediction</h3><p>近年来，直接学习不同人评价的图像美学分布已成为IAA的研究热点。Talebi等人[ 8 ]使用预训练的深度网络将图像美学映射为评分分布，并使用EMD (推土机的距离)损失函数来优化所提出的深度模型。在[ 10 ]中，Li等人提出了一种多任务学习网络来构建美学分布模型，利用图像的个性属性来进一步提高模型的性能。She等人[ 11 ]使用图卷积网络提取布局感知特征来预测图像美学分布。</p><p>此外，Zeng等人[ 17 ]发现图像美学评估的三个任务具有内在联系，并提出了一个统一的概率公式来联合学习这三个IAA任务。这些方法主要利用提取的特征直接预测图像美学分布，但导致不同人对图像的美学评分存在不确定性的原因尚未被探索。此外，我们发现图像中的各种美学属性是影响人们对图像进行美学评价的关键因素。因此，利用图像审美属性之间的多样性关系来学习人们审美评价的主观性是可行的。</p><h2 id="3-Method"><a href="#3-Method" class="headerlink" title="3.Method"></a>3.Method</h2><p>为了利用美学属性的相关性来建模图像美学主观性，我们使用<strong>自注意力机制构建属性关系图来推断人们对图像的美学评分的不确定性</strong>。</p><p>具体来说，首先利用卷积神经网络( Convolutional Neural Network，CNN )通过学习图像的美学属性来生成属性感知特征图。然后，通过关系推理模块可以得到图像的属性关系图。最后，利用属性关系特征和全局特征共同学习不同人评价的图像美学分布。</p><p>Backbone</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20230916200249.png"></p><h4 id="3-1-Generate-attribute-aware-feature-map"><a href="#3-1-Generate-attribute-aware-feature-map" class="headerlink" title="3.1. Generate attribute-aware feature map"></a>3.1. Generate attribute-aware feature map</h4><p>首先，使用在ImageNet [ 20 ]上预训练的CNN和一个1 × 1卷积来提取全局特征图Fg，其形式为Fg &#x3D; fθ ( x )</p><p>然后，通过以下1 × 1卷积生成11个通道的属性感知特征图Fa。这里为什么是11个通道是因为有11个美学属性。</p><p>此外，采用全局平均池化( GAP )和tanh激活函数将属性感知特征图Fa转换为图像的美学属性进行模型训练，定义为[da &#x3D; tanh ( GAP ( Fa ) )，其中，[da表示图像x的预测美学属性。</p><p>最后，我们使用Smooth l1损失来优化模型的属性预测分支,其形式为</p><p>La &#x3D; { 0.5 | ( ( da - da ))2，if | ( da | da | )</p><h4 id="3-2-Attribute-relational-reasoning"><a href="#3-2-Attribute-relational-reasoning" class="headerlink" title="3.2 Attribute relational reasoning"></a>3.2 Attribute relational reasoning</h4><p>探究审美属性对人们对图像不确定评分的影响因素，需要厘清不同审美属性之间的隐含关系。受自注意力机制[ 16 ]的启发，我们引入了关系推理模块来生成图像中各种美学属性的成对关系图。</p><p>假设D &#x3D;[ da1 , da2 , … , da11]∈R11 × L是由属性感知特征图重构而来，其中L等于W × H，W和H分别表示属性感知特征图Fa的宽度和高度。然后，我们计算每个属性感知特征da i ( i∈{ 1 , 2 , … , 11 })的成对关系，以捕获图像中不同美学属性之间的关系矩阵，可以表示为F ar &#x3D; DTD，( 4 )其中F ar∈R11 × 11表示11个美学属性的关系图。这样，通过提出的属性关系图Far可以揭示图像中审美属性的特定相关性</p><h4 id="3-3-Aesthetic-distribution-learning"><a href="#3-3-Aesthetic-distribution-learning" class="headerlink" title="3.3. Aesthetic distribution learning"></a>3.3. Aesthetic distribution learning</h4><p>我们首先利用全局平均池化(GAP)操作将全局特征图Fg转化为全局特征dg。令dar表示调整后的属性关系映射。</p><p>然后，得到映射美学分布的组合特征d, d &#x3D; [ dar , da , dg] ( 5 )</p><p>此外，使用全连接层和softmax激活函数来产生预测的美学分布( s )，定义为( s &#x3D; softmax ( Fc ( d ) )。( 6 )</p><p>假设s &#x3D; { s ( 1 )，s ( 2 )，..，s ( N ) }表示真实感美学分布，其中∑nN &#x3D; 1s ( n ) &#x3D; 1，N表示得分库的个数。对于AADB数据库[ 13 ]，N &#x3D; 5，对于AVA数据库[ 21 ]，N &#x3D; 10。类似于Talebi和Milanfar [ 8 ]，She et al [ 11 ]，我们使用EMD (推土机的距离)损失函数来优化我们的模型</p><p>LEMD &#x3D; ( 1N∑n &#x3D; 1 | CDFs ( n)-CDF ( s ( n ) | 2 ) 1 2，( 7 )</p><p>其中CDFs ( n ) &#x3D;∑nN &#x3D; 1 s ( n )表示累积分布函数.为了提高高不确定性样本的学习效率，我们进一步提出了一个融入了人们审美评分不确定性的分布损失函数，定义为Ls &#x3D; ( 1-N∑n &#x3D; 1s ( n)2 )※LEMD，( 8 )</p><p>其中1∑nN &#x3D; 1 s ( n ) 2表示图像审美分布的不确定性系数，其值越大，不确定性越高。在训练阶段，我们利用美学数据库中的训练样本，通过优化以下损失函数L &#x3D; Ls + La来训练所提出的模型。( 9 )</p><p>在测试阶段，训练好的模型可以直接预测人们对图像美学分布的评分d</p><h2 id="4-Experiment"><a href="#4-Experiment" class="headerlink" title="4.Experiment"></a>4.Experiment</h2><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20230916213309.png"></p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20230916213324.png"></p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20230916213344.png"></p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20230916213433.png"></p><h2 id="5-Conclusion"><a href="#5-Conclusion" class="headerlink" title="5.Conclusion"></a>5.Conclusion</h2><p>在本文中，我们提出了一种基于属性感知关系推理网络的图像美学分布预测方法。为了学习人们对图像美学评分的不确定性，我们利用自注意力机制来捕获图像中美学属性之间的隐含关系。通过我们的方法得到的属性关系图已经被证明是影响人们对图像的美学评分的关键因素。<strong>通过加强对具有高度不确定性的图像美学的学习（同一张图五个人评分五个人的美学评分都不一样</strong>，我们的模型可以更准确地推断不同人感知的图像美学主观性。在两个典型的IAA数据库上的大量实验a结果和视觉分析表明，该方法在学习图像美感度方面是有效的</p><h2 id="6-Personal-thinking"><a href="#6-Personal-thinking" class="headerlink" title="6.Personal thinking"></a>6.Personal thinking</h2><ul><li>ResNet网络结构：</li></ul><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20230916203359.png"></p><p><code>ResNet</code> 的各个变种，数据处理大致流程如下：</p><ul><li>输入的图片形状是 3×224×224。</li><li>图片经过 <code>conv1</code> 层，输出图片大小为 64×112×112。</li><li>图片经过 <code>max pool</code> 层，输出图片大小为 64×56×56。</li><li>图片经过 <code>conv2</code> 层，输出图片大小为 64×56×56。<strong>（注意，图片经过这个 <code>layer</code>, 大小是不变的）</strong></li><li>图片经过 <code>conv3</code> 层，输出图片大小为 128×28×28。</li><li>图片经过 <code>conv4</code> 层，输出图片大小为 256×14×14。</li><li>图片经过 <code>conv5</code> 层，输出图片大小为 512×7×7。</li><li>图片经过 <code>avg pool</code> 层，输出大小为 512×1×1。</li><li>图片经过 <code>fc</code> 层，输出维度为 num classes，表示每个分类的 <code>logits</code>。</li></ul><p>由于论文中ResNet-101输出是对ImageNet数据集进行1000分类，要对原网络进行微调：<strong>去掉原ResNet101后面的全局平均池化和全连接层，得到2048 x 1 x 1</strong></p><ul><li>1x1卷积和池化：</li></ul><p>1x1卷积和池化操作的本质是压缩feature mapping（输入层或者叫表示层），1x1卷积通过改变feature mapping（输入层或者叫表示层）的通道数量，具体操作是减少通道数量实现压缩；</p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>论文阅读</category>
      
    </categories>
    
    
    <tags>
      
      <tag>CV - image aesthetics</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Rethinking Image Aesthetics Assessment: Models, Datasets and Benchmarks</title>
    <link href="/posts/2023/09/66ac8407.html"/>
    <url>/posts/2023/09/66ac8407.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><h2 id="1-Introduction"><a href="#1-Introduction" class="headerlink" title="1. Introduction"></a>1. Introduction</h2><p>本文构建了一个名为”主题与美学数据集”的大规模数据集( TAD66K )，该数据集是专门为IAA设计的。</p><p>1 )它是一个面向主题的数据集，包含66K张图片，涵盖了47个流行主题。所有图片均根据主题手工精心挑选。</p><p>2 )除了共同的审美标准外，为47个主题提供了47个标准。每个主题的图像都是独立标注的，每个图像至少包含1200个有效标注(迄今为止最丰富的注释)。这些高质量的注释可以帮助我们更深入地了解模型的性能。</p><p>其次，提出了一个基线模型，称为主题和美学网络( TANet )，它可以保持对美学的恒定感知，以有效应对注意力分散问题。此外，TANet可以根据识别的主题自适应地学习预测美学的规则。</p><p>为了进一步提高对每个主题的感知，我们提出了一种RGB分布感知的注意力网络( RGBNet )，以帮助网络感知RGB空间中的颜色分布，并解决与标准注意力的高复杂度相关的问题。</p><p>此外，使用TAD66K和两个现有的数据集，即美学视觉分析( <strong>AVA</strong> ) [ Murray et al , 2012]和Flickr Images with Aesthetics Annotation Dataset (<strong>FLICKR-AES</strong> ) [任军等, 2017]，这两个数据集被广泛用于验证通用和个性化的美学模型，提供了17个最先进( SOTA )基准的严格评估，使这项工作成为迄今为止最完整的IAA基准。在上述所有基准上都取得了有希望的结果，清楚地表明了我们模型的有效性。</p><h2 id="2-Related-Work"><a href="#2-Related-Work" class="headerlink" title="2.Related Work"></a>2.Related Work</h2><h3 id="IAA-Datasets"><a href="#IAA-Datasets" class="headerlink" title="IAA Datasets"></a>IAA Datasets</h3><p>现有的几个数据集(表1 )，先前的研究直接从带有美学分数标注的图像中学习美学。然而，基于像素的元素不能包含任何抽象或主题信息。</p><p>​    人类潜意识给出的审美分数与主题相关，但现有的方法没有考虑或利用这一点。因此，现有的方法试图建立图像→美学映射，这违背了人类的视觉感知过程。</p><p>   这种映射方法在两个方面恶化了图像美学评价( IAA )：</p><p>1 )现有数据集的标注没有考虑不同主题具有不同的评分标准；此外，所有图像混合在一起，不加区分地进行评分，这给地面真值带来了相当大的噪声和误差。</p><p>2 )即使使用最先进的方法，直接从低级像素中学习，同时使用嘈杂的背景真值作为监督信息，使其难以有效地感知美学信息，并且这些方法对美学的理解不够强大，导致注意力分散。这些限制抑制了IAA的发育，目前尚不完全清楚。</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20230913231038.png"></p><h3 id="IAA-Model"><a href="#IAA-Model" class="headerlink" title="IAA Model"></a>IAA Model</h3><p>最近的证据表明，对美学分数的直接预测消除了人类观点[塔勒比和米兰法, 2018]的多样性(分布)。一些研究人员注意到了这一局限性，并提出使用地球移动距离( EMD )损失[塔勒比和米兰法, 2018]来训练分数分布任务，而另一些研究人员则尝试为个人偏好[任军等, 2017 ;吕越等, 2021]适配个性化美学模型。</p><p>然而，先前的工作忽略了主题信息的重要性，人类在评估美学时，显式或隐式地考虑了主题的影响；此外，仅依靠IAA数据集的弱监督信息并不足以理解美学(图2 )。在这项工作中，我们专注于寻找主题自适应的理解方法，并研究如何最好地使用它们来为IAA提供一个竞争性的模型。</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20230913232146.png"></p><h2 id="3-Method"><a href="#3-Method" class="headerlink" title="3. Method"></a>3. Method</h2><p>backbone</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20230913234849.png"></p><h3 id="Theme-Understanding-Network"><a href="#Theme-Understanding-Network" class="headerlink" title="Theme Understanding Network"></a>Theme Understanding Network</h3><p>为了通过直接监督的方式提取主题特征，我们使用ResNet18作为主干网络，并在场景数据库[ Zhou et al . , 2017]上进行训练，取得了85.03 %的top - 5准确率。该场景库是一个1000万张标注了400 +个独特主题语义类别和环境的图像资源库，几乎涵盖了TAD66K数据集和日常生活中的主题。</p><p>为了防止在IAA模型训练过程中出现感知能力逐渐下降的情况</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20230913232927.png"></p><p>我们将各个时刻的参数冻结。我们将S的输出定义为S ( x )，将其分为两个流进行处理。一个流被发送到参数生成器L1，自适应地生成θ主题(权重和偏差)：</p><p>θtheme &#x3D; L1(S(x), δ), 式中：δ表示L1的参数。</p><p>为了处理S ( x )中的噪声，另一个流被发送到特征预处理器L2，以减少潜在表示中的空间冗余。最后，我们使用一个线性层L3将两个流相乘得到最终的输出，整个过程可以表示为：</p><p>xtheme &#x3D; L3(L2(S(x)), θtheme).</p><p>因此，主题既包括基本的主题信息，也包括如何感知这些信息的规则。</p><h3 id="RGB-distribution-aware-Attention-Network"><a href="#RGB-distribution-aware-Attention-Network" class="headerlink" title="RGB-distribution-aware Attention Network"></a>RGB-distribution-aware Attention Network</h3><p>第二个模块：从RGB空间提取高层颜色特征，以提高对主题的理解，而<strong>标准的自注意力机制</strong>可以协调一个令牌和所有其他令牌的关系，故而可以借鉴用来捕捉颜色分布信息。颜色分布[ O ‘多诺万等, 2011]构成了美学的重要信息，与主题有着密切的关系。然而，对于IAA任务，颜色分布和相似性的原始信息存在于更接近原始图像的低级特征中，并且较大的特征图尺寸意味着有更多的标记；因此，全局计算复杂度为[ Liu et al , 2021]。</p><p>在我们的实现中，我们对标准的自注意力机制进行了两点改进。</p><p>我们首先将输入分割成互不重叠的块，其中每个块用一个中心点表示，并将其设置为原始像素RGB值的平均值。对于任意大小的图像，其块空间由k × k个中心点组成，这导致其对输入大小的计算复杂度为线性且较低。具体来说，我们设定k &#x3D; 12。</p><p>其次，我们只提取了块之间的关系，而没有将它们与输入相乘。设fab，fuv分别代表两个中心；那么，我们注意力的输出xrgb可以描述为：</p><p>xrgb &#x3D; ∥N l&#x3D;1  Softmax  L4( (Qlfab)T (Klfuv) √d ) </p><p>其中∥Nl &#x3D; 1是RGB通道的级联，Ql，Kl和d分别是查询，密钥和维度，由标准自注意力中的输入生成。在提取出这个关系后，我们不将其与值( V )相乘，而是将其发送到处理器L4之后的softmax层，以减少冗余信息，得到最终结果xrgb。因此，所提出的注意力机制赋予RGB空间对颜色相似性和分布的感知有意义的度量，如图6所示。</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20230913234505.png"></p><h3 id="Aesthetics-Perceiving-Network"><a href="#Aesthetics-Perceiving-Network" class="headerlink" title="Aesthetics Perceiving Network"></a>Aesthetics Perceiving Network</h3><p>第三个模块有两个功能。</p><p>首先，APNet直接从输入x中提取美学特征xaes；我们使用MobileNetV2作为主干网，输出结果由L5处理。</p><p>其次，融合三个特征预测一个美学分数，输出结果由L6处理。我们将整个过程描述为：p &#x3D; Faes( xtheme⊕xrgb⊕xaes , θ aes)，( 5 )其中，θ aes表示Faes的所有参数。</p><h2 id="4-Experiment"><a href="#4-Experiment" class="headerlink" title="4. Experiment"></a>4. Experiment</h2><p>消融实验，从APNet（Aesthetics Perceiving Network），也就是文章的第三个模块开始逐渐增加TUNet和RGBNet。</p><p>我们首先检验了TUNet的有效性(表5 )，其获得了+ 9.8 %的SRCC和+ 12.3 %的LCC，同时MSE损失降低了15.0 %。但TUNet需要提取主题特征，降低了模型的训练速度，为3.68 it &#x2F; s。</p><p>此外，加入RGBNet后，性能在SRCC和LCC上分别提升了+ 5.0 %和+ 4.6 %，MSE损失值降低了5.0 %。</p><p>此外，RGBNet模型中提出的注意力机制并没有显著降低网络的速度。我们还与标准的自注意力进行了对比测试，发现由于其过高的计算复杂度，不能以同样的方式正常工作，这表明提出的架构比传统的架构计算效率更高。</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20230913235521.png"></p><h2 id="5-Conclusion"><a href="#5-Conclusion" class="headerlink" title="5.Conclusion"></a>5.Conclusion</h2><p>本文讨论了IAA中主题变化的长期被忽视的影响。为了实现这一目标，我们创建了一个面向主题的TAD66K数据集(包含47个主题)，构建了一个完整的基准(包括排名前17位的SOTA模型)，并开发了一个名为TANet的基线模型。与现有的数据集相比，TAD66K更具有挑战性，注释更密集；此外，所提出的TANet引入自适应感知方法来提取主题特征，并在三个具有代表性的数据集上实现了SOTA性能。我们希望我们的贡献将激励社会各界重新思考IAA，并以更广阔的视角推动研究。</p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>论文阅读</category>
      
    </categories>
    
    
    <tags>
      
      <tag>CV - image aesthetics</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Lightweight Image Super-Resolution with Multi-Scale Feature Interaction Network</title>
    <link href="/posts/2023/07/983114fc.html"/>
    <url>/posts/2023/07/983114fc.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><h2 id="1-Introduction"><a href="#1-Introduction" class="headerlink" title="1.Introduction"></a>1.Introduction</h2><p>发表在2021 IEEE（ICME）</p><p>据知乎说是毕业神会，两篇保博士毕业，CCF B</p><p>regular paper 的 正文 + 引用 &#x3D; 6页</p><p>2021 IEEE International Conference on Multimedia and Expo (ICME)</p><p>以往的卷积神经网络的方法需要消耗大量的算力，难以适用于一些存储和计算资源有限的移动设备。</p><p>本文提出一个轻量级的多尺度特征交互网络( MSFIN )，通过此网络可以实现不同尺度的低分辨率观测图像的信息特征的融合，另外本文设计了一个轻量级的循环残差通道注意力块( RRCAB )，使得网络在足够轻量级的同时，也能从通道注意力机制中获益。</p><p>在一些基准测试集上的大量实验已经证实，我们提出的MSFIN能够以更轻量级的模型实现与现有技术相当的性能。  </p><h2 id="2-Related-Work"><a href="#2-Related-Work" class="headerlink" title="2.Related Work"></a>2.Related Work</h2><h4 id="2-1-SISR任务中基于深度学习的方法："><a href="#2-1-SISR任务中基于深度学习的方法：" class="headerlink" title="2.1 SISR任务中基于深度学习的方法："></a>2.1 SISR任务中基于深度学习的方法：</h4><p>   Dong等[ 1 ]首次提出了一种三层卷积神经网络( SRCNN )用于端到端的图像超分辨率重建</p><p>   此后，许多深度超分辨率网络被提出，如VDSR [ 2 ]、MemNet [ 3 ]、LapSRN [ 4 ]、MSRN [ 5 ]等</p><p>SISR任务中注意力机制的方法：</p><h4 id="2-2-SISR任务中注意力机制："><a href="#2-2-SISR任务中注意力机制：" class="headerlink" title="2.2 SISR任务中注意力机制："></a>2.2 SISR任务中注意力机制：</h4><p>如今，注意力机制在计算机视觉任务中得到了广泛的应用。</p><p>Hu等人[ 6 ]提出了压缩激励网络( SENet )，利用通道之间的关系，在图像分类任务中取得了显著的性能提升。Zhang等[ 7 ]通过使用一些残差通道注意力块( RCAB )提出了所谓的残差通道注意力网络( RCAN )用于图像SR任务。 </p><h4 id="2-3-递归网络："><a href="#2-3-递归网络：" class="headerlink" title="2.3 递归网络："></a>2.3 递归网络：</h4><p>复杂而深入的SR模型可以提供显著的性能提升，但由于参数和计算量大，它们可能难以用于实际场景。特别是对于一些移动设备，其存储和计算资源有限。许多工作表明递归网络可以有效地减少参数的数量</p><p>例如，DRCN [ 8 ]和DRRN [ 9 ]采用递归机制进行参数共享。然而，简单地使用递归可以实现参数缩减，但会以性能下降为代价。</p><h3 id="2-4-注意力机制的残差多尺度模块："><a href="#2-4-注意力机制的残差多尺度模块：" class="headerlink" title="2.4 注意力机制的残差多尺度模块："></a>2.4 注意力机制的残差多尺度模块：</h3><p>为了解决在简单使用递归实现参数缩减时模型效果下降的问题，一个可选的解决方案是设计一些轻量级且有效的SR模型。Ahn等[ 10 ]提出了一种面向移动场景的级联残差网络( CARN-M )，以PSNR降低为代价来减少计算量。Hui等[ 11 ]设计了一种信息蒸馏网络( Information Distillation Network，IDN )，该网络使用通道拆分策略来聚合具有局部保留信息的当前信息。</p><p>随后，他们在IDN的基础上，进一步提出了高效的信息多蒸馏网络和自适应裁剪策略来进一步提升性能[ 12 ]。Lan等[ 13 ]提出了基于注意力机制的残差多尺度模块( MADNet )来加强模型的特征表示能力。</p><p>类似地，Li等[ 14 ]提出了一种轻量级的超分辨率网络( s-LWSR )来实现高效的SISR。</p><h2 id="3-Method"><a href="#3-Method" class="headerlink" title="3.Method"></a>3.Method</h2><p>以上方法会存在这样的问题：</p><p>1.残差通道注意力块( RCAB )会产生大量的参数，这些参数主要来自残差模块中的卷积层。</p><p>2.此外，在基于多尺度特征的方法中，信息特征从不同的尺度分别聚合生成最终的HR特征，它们之间的相互协作没有得到充分发挥。</p><p><strong>提出Multi-Scale Feature InteractionNetwork（ MSFIN）</strong></p><p>基于这些观察，为了利用图像特征并恢复更多的细节，我们提出了一种多尺度特征交互网络( MSFIN )，</p><p>它可以在性能和参数数量之间做出更好的权衡。</p><p><strong>backbone</strong>网络框架如下：</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20230729200048.png"></p><p>RRCAB具体框架如下图：</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20230729200139.png"></p><h2 id="4-Experiment"><a href="#4-Experiment" class="headerlink" title="4.Experiment"></a>4.Experiment</h2><p>与之前的工作[ 5、7、11、17]一样，本文使用DIV2K数据集[ 18 ]来训练模型，该数据集有800张高质量的RGB训练图像。通过双三次插值对高分辨率图像进行降采样，得到低分辨率图像。</p><p>为了增加训练数据集，随机旋转和翻转来自DIV2K的800张训练图像。本文设定小批量大小为16，从低分辨率图像中随机裁剪大小为48 × 48的低分辨率图像块作为输入。通过设置β 1 &#x3D; 0.9，β1 &#x3D; 0.999，ε &#x3D; 10 - 8使用ADAM优化器训练我们的模型。</p><p>学习率初始化为1 × 10-4，通过余弦退火将学习率降低到6.25 × 10 - 6。提出的SR网络是在PyTorch框架下实现的。 </p><p>为了测试，还使用了几个广泛使用的基准测试：Set5 [ 19 ]，Set14 [ 20 ]，BSDS100 [ 21 ]和Urban100 [ 22 ]。在现有工作的基础上，采用峰值信噪比( PSNR )和结构相似度( SSIM ) [ 23 ]两个指标来验证SR的性能，计算了YCBCR颜色空间的亮度通道上的性能指标 </p><p><strong>4.1 Comparisons of different feature interaction schemes</strong>不同交互方案的对比</p><p>在通道数为20，输入LR块大小为16 × 16的前提下，进行了以下实验，包括交互连接( IC ,如图1所示)、复杂交互连接( CIC ,在IC的基础上增加从3级到1级的交互连接)和无参交互连接（NS，交互连接中的反卷积不共享参数)。</p><p>从表1中，我们可以得到以下观察结果。首先，特征交互的使用可以通过仅添加少量参数来提高SR性能。其次，CIC操作导致参数数量增加，但性能提升不大。  </p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20230729200734.png"></p><p><strong>4.2 Comparisons of different basic modules in RRCAB</strong></p><p>RRCAB中不同基础模块的比较</p><p>在这一部分，主要进行了一些实验来评估我们的基本RRCAB的有效性。</p><p>主要关注通道注意力( CA )、特征融合( FF , 1 × 1卷积后接第二组卷积,如图2所示)和通道混洗( CS )在分组卷积后的效果。</p><p>FF和CS主要用于对组卷积提取的特征进行融合和洗牌，以增强提取特征的表征能力。从表2可以看出，在参数增加不多的情况下，CA机制可以提高性能。FF机制只需要几个额外的参数就可以提高性能。这表明我们提出的RRCAB可以在一定程度上更好地平衡参数数量和性能。 </p><p><strong>4.3 Comparison with state-of-the-arts</strong></p><p>将这些方法按照参数个数小于600K和大于600K分为两组，主要在规模为4的SR任务上对这些方法进行评估。</p><p>如表3所示，本文模型在可接受的参数数量下实现了可比较的性能。</p><p>此外，图3给出了各SR模型在Set14和Urban100数据集上的可视化结果。这也证明了我们的SR模型的有效性。为了增强MSFIN的性能，参考RCAN，也采用了自集成增强机制，记为MSFIN - S +和MSFIN +。从表3可以看出，我们的MSFIN - S +和 MSFIN+在相同的参数范围内，MSFIN +几乎可以超过所有其他方法。 </p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20230729200301.png"></p><h2 id="5-Conclusion"><a href="#5-Conclusion" class="headerlink" title="5.Conclusion"></a>5.Conclusion</h2><p>为了利用图像特征并恢复更多的细节，提出了一种多尺度特征交互网络( MSFIN )，它可以在性能和参数数量之间做出更好的权衡。</p><p>主要贡献可以总结如下：</p><p>( i )基于通道注意力机制，提出了一种轻量级的循环通道注意力块( RRCAB )用于轻量级图像超分辨率任务，可以在更小的内存消耗下提高重建图像的质量。</p><p>( ii )基于这些RRCAB，我们开发了多尺度特征交互模块，该模块可以充分利用来自不同尺度的信息特征和交互连接，以更好地恢复生成图像的细节。 </p><p>模型在DIV2K数据集[ 18 ]来训练模型，该数据集有800张高质量的RGB训练图像，并在Set5 [ 19 ]，Set14 [ 20 ]，BSDS100 [ 21 ]和Urban100 [ 22 ]做了基准测试，采用峰值信噪比( PSNR )和结构相似度( SSIM ) [ 23 ]两个指标来验证SR的性能。</p><h3 id="6-个人感悟"><a href="#6-个人感悟" class="headerlink" title="6. 个人感悟"></a>6. 个人感悟</h3></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>论文阅读</category>
      
    </categories>
    
    
    <tags>
      
      <tag>CV</tag>
      
      <tag>Super-Resolution</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Designing a Practical Degradation Model for Deep Blind Image Super-Resolution</title>
    <link href="/posts/2023/07/10556baf.html"/>
    <url>/posts/2023/07/10556baf.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><h2 id="1-Introduction"><a href="#1-Introduction" class="headerlink" title="1. Introduction"></a>1. Introduction</h2><p>2021年发表在ICCV</p><p>代码：<a href="https://github.com/cszn/BSRGAN">https://github.com/cszn/BSRGAN</a></p><p>文章认为影响真实退化的主要因素有三个：模糊、降采样和噪声。</p><p>论文设计一个实用的退化模型，该模型使三个关键因素的退化空间尽可能大且符合实际，</p><p>来解决低分辨率的问题，</p><h2 id="2-Related-Work"><a href="#2-Related-Work" class="headerlink" title="2.Related Work"></a>2.Related Work</h2><p>bicubic and traditional degradation models 双三次和传统退化模型特点：</p><p>1.传统的退化模型通过采用模糊&#x2F;降采样&#x2F;加噪声来生成LR图像</p><p>2.传统退化模型的模糊核空间应该是跨尺度变化的，这使得在实际中很难确定非常大的尺度因子 </p><p>3.虽然双三次退化很少适用于真实的LR图像，但它可以用于数据增强，对于干净和尖锐的图像超分辨率确实是一个不错的选择</p><h2 id="3-Method"><a href="#3-Method" class="headerlink" title="3.Method"></a>3.Method</h2><p>退化模型：模糊、降采样、噪声和随机洗牌策略。 </p><h3 id="3-1-Blur"><a href="#3-1-Blur" class="headerlink" title="3.1 Blur"></a>3.1 Blur</h3><p>图像的模糊是一种常见的图像退化现象，对此本文提出从HR空间和LR空间对模糊进行建模。</p><p>扩展模糊的退化空间</p><p>对于高斯模糊核尺寸设置从{ 7 × 7，9 × 9，· · ·，21 × 21 }均匀采样，</p><p>各向同性高斯核分别从[ 0.1、2.4]和[ 0.1、2.8]均匀采样尺度因子2和4的核宽度，</p><p>各向异性高斯核分别从[ 0 , π]均匀采样旋转角度和从[ 0.5 , 6]和[ 0.5、8]均匀采样尺度因子2和4的各轴长度。</p><p>为了保证模糊输出的空间大小保持不变，采用反射填充。</p><p>由于宽度为0.1的各向同性高斯核对应于delta ( identity )核，因此我们始终可以应用这两种模糊操作。 </p><h3 id="3-2-Downsampling"><a href="#3-2-Downsampling" class="headerlink" title="3.2. Downsampling"></a>3.2. Downsampling</h3><p>通过二维线性网格插值法[ 28 ]将一个中心21 × 21的各向同性高斯核平移0.5 × ( s - 1)像素，并将其应用于最近邻降采样之前的卷积。高斯核宽度从[ 0.1、0.6 × s]中随机选取。我们将这样的降采样称为Dnsearest。此外，我们还采用了双三次和双线性降采样方法，分别用Ds双线性和Ds双三次表示。此外，还采用了先对图像进行尺度因子为s &#x2F; a的降采样，再进行尺度因子为a的升采样的从底向上采样方法Ds从底向上( &#x3D; Ds &#x2F; a down Duap)。这里插值方法从双线性和双三次插值中随机选取，a从[ 1 &#x2F; 2 , s]中采样。显然，上述4种降采样方法在HR空间存在模糊步长，而Ds从底向上在a小于1的情况下会在LR空间引入升尺度引起的模糊</p><h3 id="3-3-Noise"><a href="#3-3-Noise" class="headerlink" title="3.3 Noise"></a>3.3 Noise</h3><p>噪声在真实图像中普遍存在，因为它可以由不同的来源引起。</p><p>除了广泛使用的高斯噪声，本文的新退化模型还考虑了JPEG压缩噪声和相机传感器噪声。</p><p>1.高斯噪声NG。当没有关于噪声的信息时，高斯噪声假设是最保守的选择[ 40 ]。</p><p>为了合成高斯噪声，采用协方差矩阵为Σ的三维零均值高斯噪声模型N ( 0 ,∑) [ 39 ]。</p><p>这种噪声模型有两种特殊情况：当Σ &#x3D; σ2I，其中I为单位矩阵时，就变成了广泛使用的信道无关加性高斯白噪声( AWGN )模型；当Σ &#x3D; σ21，其中1是一个3 × 3矩阵，所有元素都等于1时，就变成了广泛使用的灰度AWGN模型。在我们的新退化模型中，我们总是加入高斯噪声进行数据合成。</p><p>特别地，将一般情形和两种特殊情形的概率分别设置为0.2、0.4、0.4。</p><p>对于σ，从{ 1 &#x2F; 255，2 &#x2F; 255，· · ·，25 &#x2F; 255 }中均匀采样。 </p><p>2.JPEG压缩噪声NJPEG。</p><p>JPEG是目前应用最广泛的用于降低带宽和存储的图像压缩标准。</p><p>然而，它引入了令人烦恼的8 × 8块效应&#x2F;噪声，特别是在高压缩的情况下。</p><p>压缩程度由品质因数决定，品质因数为[ 0、100]范围内的整数。</p><p>品质因数0表示低品质、高压缩，反之亦然。如果品质因数大于90，则不会引入明显的伪影。</p><p>在新的退化模型中，JPEG质量因子从[ 30,95]中统一选取。</p><p>由于JPEG是最流行的数字图像格式，因此我们采用了两个JPEG压缩步骤，概率分别为0.75和1。</p><p>特别地，后者被用作最终的退化步骤。 </p><p>3.处理后的相机传感器噪声NS</p><p>在现代数码相机中，输出图像是通过图像信号处理( Image Signal Processing，ISP )管道传递原始传感器数据得到的。</p><p>在实际应用中，如果ISP管道不执行去噪步骤，处理后的传感器噪声会通过引入非高斯噪声恶化输出图像[ 42 ]。</p><p>为了合成这种噪声，我们首先通过反向ISP管道从RGB图像中获得原始图像，然后在合成的原始图像中添加噪声后，通过正向管道重建含噪的RGB图像。原始图像噪声模型借鉴于文献[ 6 ]。</p><p>根据Adobe Digital Negative ( DNG )规范[ 1 ]，我们的正向ISP流水线包括去马赛克、曝光补偿、白平衡、相机到XYZ ( D50 )颜色空间转换、XYZ ( D50 )到线性RGB颜色空间转换、色调映射和伽马校正。 </p><h3 id="3-4-Random-Shuffle"><a href="#3-4-Random-Shuffle" class="headerlink" title="3.4 Random Shuffle"></a>3.4 Random Shuffle</h3><p>真实的低分辨率图像也可能是含噪、模糊、降采样和JPEG压缩的高分辨率图像，一幅低分辨率图像可以通过模糊、降采样和不同阶次的噪声进行退化，因此，本文提出了一种随机洗牌策略 </p><h2 id="4-Experiment"><a href="#4-Experiment" class="headerlink" title="4.Experiment"></a>4.Experiment</h2><p>LPIPS用于衡量感知质量，较低的LPIPS值意味着超分辨图像在感知上更接近于真实</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20230725220959.png"></p><p>FSSR - JPEG、RealSR - DPED和RealSR - JPEG产生了一些高频伪影，但量化结果优于BSRNet。</p><p>这种不一致性表明这些无参考的IQA指标并不总是匹配感知视觉质量[ 30 ]，IQA指标可以通过新的SISR方法进行更新[ 15 ]。我们进一步认为，SISR的IQA度量也应该随着新的图像退化类型而更新，这将是我们留给未来的工作 </p><h2 id="5-Conclusion"><a href="#5-Conclusion" class="headerlink" title="5.Conclusion"></a>5.Conclusion</h2><p>通过使每个退化因素，即模糊、降采样和噪声，更加复杂和实用，并且通过引入随机洗牌策略，新的退化模型可以覆盖现实世界场景中发现的广泛的退化。</p><p>基于新退化模型生成的合成数据，训练了一个通用图像超分辨率的深度盲模型。</p><p>在合成和真实图像数据集上的实验表明，深度盲模型在受到不同程度退化的图像上表现良好。</p><p>我们相信，现有的深度超分辨率网络可以从我们的新退化模型中受益，以增强它们在实际中的有用性。</p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>论文阅读</category>
      
    </categories>
    
    
    <tags>
      
      <tag>CV</tag>
      
      <tag>Super-Resolution</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>MAXIM Multi-Axis MLP for Image Processing</title>
    <link href="/posts/2023/07/4d22ba36.html"/>
    <url>/posts/2023/07/4d22ba36.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><h3 id="0-前言"><a href="#0-前言" class="headerlink" title="0. 前言"></a>0. 前言</h3><p>论文发表在2022CVPR</p><p>image processing tasks: including denoising, deblurring, deraining, dehazing, restoration,and enhancement </p><p>图像处理：降噪，去模糊，去雾，去雨，图像修复，图像增强。</p><p>中文视频讲解：（非常详细，有很多背景介绍，新手友好型）</p><p>youtu.be&#x2F;gpUrUJwZxRQ</p><h2 id="1-Introduction"><a href="#1-Introduction" class="headerlink" title="1. Introduction"></a>1. Introduction</h2><ul><li>MLP</li></ul><p>全连接层和激活层来构造仿神经元的架构</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20230722140522.png"></p><ul><li>Contribution<ol><li>A novel and generic architecture for image processing, named <strong>MAXIM</strong>.</li><li><strong>A multi-axis gated MLP</strong> module tailored for low-level vision tasks, which always enjoys a <strong>global receptive field with linear complexity</strong> relative to image size.</li><li><strong>A cross gating block</strong> that cross-conditions two separate features, which is also global fully convolutional.</li><li>Extensive experiments show that MAXIM achieves SOTA results on more than 10 datasets for 5 different restoration tasks.</li></ol></li></ul><h2 id="2-Related-Work"><a href="#2-Related-Work" class="headerlink" title="2.Related Work"></a>2.Related Work</h2><p>there remain challenges in adapting them for low-level vision. </p><p>ViT在high-level tasks表现很好，但是在low-level enhancement and restoration problems表现不是很好</p><p>low-level problems上前人的工作都基本引入了自注意力机制，它需要固定输入照片的大小，原始照片需要裁剪</p><p>Local-attention based Transformers基于局部注意力的变换器虽然改善了这一问题，但它们也被限制为感受野的大小有限，或者失去非局部性</p><h3 id="2-1-Why-MLP-Multi-Layer-Perceptron"><a href="#2-1-Why-MLP-Multi-Layer-Perceptron" class="headerlink" title="2.1 Why MLP(Multi-Layer Perceptron)?"></a>2.1 Why MLP(Multi-Layer Perceptron)?</h3><ul><li><p>MLP -&gt; Convolution(2012)</p><p>MLP把图像平坦化为一位向量，因为在图像块中是会有一定的关联性的，打成一维在此时就失去了位置信息，所以引入local 卷积核</p></li><li><p>Convolution-&gt; Transformer(2017)</p><p>图片要掌握全局信息，从local演化成global</p></li><li><p>Transformer-&gt; MLP?? (2021)</p><p>掌握全局信息计算复杂度太高</p></li></ul><h3 id="2-2-ViT"><a href="#2-2-ViT" class="headerlink" title="2.2 ViT"></a>2.2 ViT</h3><p>Vision transformer架构，纯self-attetion，不要卷积</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20230722142255.png"></p><h3 id="2-3-MLP-Mixer"><a href="#2-3-MLP-Mixer" class="headerlink" title="2.3 MLP-Mixer"></a>2.3 MLP-Mixer</h3><p>减少计算量，不用self-attetion，用纯MLP来计算，效果稍逊ViT</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20230722142428.png"></p><h3 id="2-4-gMLP"><a href="#2-4-gMLP" class="headerlink" title="2.4 gMLP"></a>2.4 gMLP</h3><p>在MLP-Mixer的基础上的改进，也是不用self-attetion</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20230722142546.png"></p><h3 id="2-5-Computational-complexity-of-Transformer"><a href="#2-5-Computational-complexity-of-Transformer" class="headerlink" title="2.5 Computational complexity of Transformer"></a>2.5 Computational complexity of Transformer</h3><p>全局模型允许在输入的特征图上进行全局空间交互，即每个输出像素是由输入特征的每个点加权而来，需要 O(N) 次乘法（假设 N &#x3D; HW 为空间尺寸）。因此，输出整张大小为 N 的特征图需要 O(N^2) 次乘法操作，这即为注意力机制&#x2F;Transformer高计算复杂度的由来。但本质上来说，密集感受野的全局模型如 ViT, Mixer, gMLP 都具有平方计算复杂度。</p><p>这种没法Scaling up的平方算子是很难作为通用模块来广泛使用在各大视觉任务上的，例如需要在高分辨率上训练&#x2F;推理的目标检测，语义分割等，甚至对于几乎所有的底层视觉任务如去噪、去模糊、超分、去雨、去雾、去雪、去阴影、去摩尔、去反射、去水印、去马赛克等等等等。。。</p><p>虽然但是，不妨也直接用用！华为北大等联手打造的IPT模型第一次把ViT模型应用在多个底层视觉任务，刷新了各大榜单并发表在CVPR 2021[9][10]。</p><p>虽然性能很好，但IPT使用的全局注意力机制具有一些明显的局限性：</p><p>（1）需要大量数据预训练（如ImageNet）</p><p>（2）无法直接在高分辨率图片上进行推理。在实际推理时，往往需要对输入图像进行切块，分别对每个图像块进行推理，然后再进行拼接来还原大图。这种办法往往会导致输出图片中有一些明显的“块状效应”（如下图），同时推理速度也比较慢，限制了其实际落地和部署能力。</p><h3 id="2-6-HiT"><a href="#2-6-HiT" class="headerlink" title="2.6 HiT"></a>2.6 HiT</h3><p>一个block同时涵盖local和global信息，分成channel维度，一半的部分做global，一半的部分做local，</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20230722143318.png"></p><h2 id="3-Method"><a href="#3-Method" class="headerlink" title="3. Method"></a>3. Method</h2><p>The main properties of MAXIM </p><ul><li>利用线性复杂度获得全局的感受野</li><li>解决input图像的大小是固定的</li><li>同时掌握global和local信息</li></ul><p>The backbone of MAXIM</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20230722144808.png"></p><ul><li>Multi-Axis gated MLP block</li></ul><p>Complexity analysis</p><p>The computational complexity of our proposed Multi-Axis gMLP block (MAB) is: </p><p>Ω(MAB) &#x3D; d^2 HWC(Global gMLP) + b^2 HWC(Local gMLP) + 10HW C^2(Dense layers )</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20230722145129.png"></p><ul><li>Cross-gating MLP Block</li></ul><h2 id="4-Experiment"><a href="#4-Experiment" class="headerlink" title="4. Experiment"></a>4. Experiment</h2><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20230722145803.png"></p><h2 id="5-Conclusion"><a href="#5-Conclusion" class="headerlink" title="5.Conclusion"></a>5.Conclusion</h2><p> MAXIM, inspired by recently popular MLP-based global models</p><p>1.A novel and generic architecture for image processing, dubbed MAXIM, using a stack of encoder-decoder backbones, supervised by a multi-scale, multi-stage loss. </p><p>2.A multi-axis gated MLP module tailored for low-level vision tasks, which always enjoys a global receptive field, with <strong>linear complexity</strong> relative to image size. </p><p>3.A cross gating block that cross-conditions two separate features, which is also global and fully-convolutional. </p><p>4.Extensive experiments show that MAXIM achieves SOTA results on more than 10 datasets including denoising, deblurring, deraining, dehazing, and enhancement.</p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>论文阅读</category>
      
    </categories>
    
    
    <tags>
      
      <tag>CV</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>A ConvNet for the 2020s</title>
    <link href="/posts/2023/07/e9f6c1b9.html"/>
    <url>/posts/2023/07/e9f6c1b9.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><p>论文发表在2022CVPR</p><p>代码：<a href="https://github.com/YUTING0907/SubscribePapers/blob/main/papers/cvpr/cvpr2022.md">https://github.com/YUTING0907/SubscribePapers/blob/main/papers/cvpr/cvpr2022.md</a></p><p>A ConvNet for the 2020s</p><p>ConvNeXts由传统的卷积层(ConvNets)组合成的模型，在ImageNet上得到了 top-1 accuracy，87.8% 超过了Transformers，在COCO detection and ADE20K segmentation任务上优于 Swin Transformers 。引发人们重新思考卷积在计算机视觉领域的重要性。</p><h2 id="1-ConvNeXt的进化路径"><a href="#1-ConvNeXt的进化路径" class="headerlink" title="1. ConvNeXt的进化路径"></a>1. ConvNeXt的进化路径</h2><p>图1概括了ConvNeXt的所有优化点，它从ResNet-50[4]或者ResNet-200出发，依次从宏观设计，深度可分离卷积（ResNeXt[5]），逆瓶颈层（MobileNet v2[6]），大卷积核，细节设计这五个角度依次借鉴Swin Transformer的思想，然后在ImageNet-1K上进行训练和评估，最终得到ConvNeXt的核心结构。</p><h3 id="1-1-训练方式"><a href="#1-1-训练方式" class="headerlink" title="1.1 训练方式"></a>1.1 训练方式</h3><p>在介绍ConvNeXt的结构优化之前，我们先简单介绍一下ConvNeXt的训练方法。我们知道ResNet-50在ImageNet-1k上最终的Top-1的准确率是76.1%，而图1中ResNet-50说的是78.8%，而这2.7%的准确率的提升正是依靠对训练策略的优化所达到的。</p><p>在ConvNeXt中，它的优化策略借鉴了Swin-Transformer。具体的优化策略包括：（1）将训练Epoch数从90增加到300；（2）优化器从SGD改为AdamW；（3）更复杂的数据扩充策略，包括Mixup，CutMix，RandAugment，Random Erasing等；（4）增加正则策略，例如随机深度[7]，标签平滑[8]，EMA[9]等。更具体的预训练和微调的超参数如图2。</p><h3 id="1-2-宏观设计"><a href="#1-2-宏观设计" class="headerlink" title="1.2 宏观设计"></a>1.2 宏观设计</h3><h3 id="1-2-1-每个阶段的计算占比（Stage-Ratio）"><a href="#1-2-1-每个阶段的计算占比（Stage-Ratio）" class="headerlink" title="1.2.1 每个阶段的计算占比（Stage Ratio）"></a>1.2.1 每个阶段的计算占比（Stage Ratio）</h3><p>VGG提出了把骨干网络分成若干个网络块的结构，每个网络块通过池化操作将Feature Map降采样到不同的尺寸。在VGG中，每个网络块的网络层的数量基本是相同，但在之后的很多工作中，他们指出当深层的网络块层数更多时，模型的表现更好。例如，ResNet-50中共有4个不同的网络块，每个网络块又有若干个不同的基础层，一般是由卷积，BN等操作组成，它的每个网络块的层数是 (3,4,6,3) 。</p><p>在Swin-Transformer中，每个骨干网络被分成了4个不同的Stage，每个Stage又是由若干个Block组成，在Swin-Transformer中，这个Block的比例是 1:1:3:1 ，而对于更大的模型来说，这个比例是 1:1:9:1 。ConvNeXt的改进是将ResNet-50的每个Stage的block的比例调整到 1:1:3:1 ，最终得到的block数是 (3,3,9,3) 。从图1中可以看出这个改进将ResNet-50的准确率从78.8%提升至79.4%。注意这里模型的GFLOPs从4.1增加至4.5，这0.6%的准确率的提升也有一部分功劳要归功于模型参数量的增加。此外ConvNeXt还提供了更大的block数为 (3,3,27,3) 的模型。</p><h3 id="1-2-2-Patchify-Stem"><a href="#1-2-2-Patchify-Stem" class="headerlink" title="1.2.2 Patchify Stem"></a>1.2.2 Patchify Stem</h3><p>对于ImageNet数据集，我们通常采用 224×224 的输入尺寸，这个尺寸对于ViT等基于Transformer的模型来说是非常大的，它们通常使用一个步长为4，大小也为4的卷积将其尺寸降采样到 56×56 。因为这个卷积的步长和大小是完全相同的，所以它又是一个无覆盖的卷积，或者叫Patchify（补丁化）的卷积。这一部分在Swin-Transformer中叫做stem层，它是位于输入之后的一个降采样层。</p><p>在ConvNeXt中，Stem层也是一个步长为4，大小也为4的卷积操作，这一操作将准确率从79.4%提升至79.5%，GFLOPs从4.5降到4.4%。也有人指出使用覆盖的卷积（例如步长为4，卷积核大小为7的卷积）能够获得更好的表现。</p><h3 id="1-2-3-分组卷积"><a href="#1-2-3-分组卷积" class="headerlink" title="1.2.3 分组卷积"></a>1.2.3 分组卷积</h3><p>在轻量级模型中，我们介绍了深度可分离卷积，它们将 3×3 卷积以通道为单位进行运算（深度卷积），然后再通过 1×1 卷积进行通道融合（点卷积）。而ResNeXt是一个更折中的方案，它通过分组卷积（将通道分组，然后以组为单位进行卷积）的方式来提升模型的计算速度。与之类似的是，Swin-Tranformer的Self-Attention也是以通道为单位的运算单元，不同的是可分离卷积是可学习的卷积核，Self-Attention是根据数据动态计算的权值。</p><p>在ConvNeXt中，也引入了分组卷积的思想。它将 3×3 卷积替换成了 3×3 的分组卷积，这个操作将GFLOPs从4.4降到了2.4，但是它也将准确率从79.5%降到了78.3%。为了弥补准确率的下降，它将ResNet-50的基础通道数从64增加至96。这个操作将GFLOPs增加到了5.3，但是准确率提升到了80.5%。</p><h3 id="1-2-3-逆瓶颈层"><a href="#1-2-3-逆瓶颈层" class="headerlink" title="1.2.3 逆瓶颈层"></a>1.2.3 逆瓶颈层</h3><p>瓶颈层是一个中间小，两头大的结构，最早在残差网络中被使用。而在MobileNet v2中则使用了一个中间大，两头小的结构，他们认为这个结构能够有效的避免信息流失。之后的 Transformer本质也是一个逆瓶颈层的架构，在Transformer中，Self-Attention的隐层节点数是512，而中间的全连接的隐层节点数是2048。这里的ConvNeXt也是使用了逆瓶颈层的结构，如图3.(a)和图3.(b)所示。这个策略将准确率提升至85.6%，GFLOPs降低至4.6。</p><p>在后续的工作中，作者尝试了使用更大的卷积核。为了适应更大的卷积核，作者将卷积的图3.(b)的深度卷积向上移动了一层，如图3.(c)。此操作将准确率降低到了79.9%，但是GFLOPS也下降到了4.1%。</p><p>1.3 更大卷积核</p><p>大卷积核是一个比较古老的卷积运算参数，上次看见这些大卷积核还是在AlexNet，VGG等这些上古网络中。当时使用小卷积核替代大卷积核，一个重要的原因是一个大卷积核（ 5×5 卷积）和两层的小卷积核（ 3×3 卷积）在拥有相同感受野的情况下，表现是比两层小卷积核略差的。在Swin-Transformer中，它们使用的是 7×7 自注意力窗口本质上也是一个大的计算窗口，因此这里作者也对大的卷积核重新进行了对照实验。</p><p>在ConvNeXt的实验中，它们尝试了 5×5 ， 7×7 ， 9×9 和 11×11 共4个不同尺寸的卷积操作。从图1的实验结果来看， 7×7 卷积操作的效果最好。它将模型的准确率提升至80.6%，GFLOPs些许增加至4.2。并且从这个实验结果中可以看出，大卷积核对模型速度的影响并不很大，这可能是得益于当前深度学习框架以及硬件对大卷积核的支持更友好。</p><h3 id="1-4-细节优化"><a href="#1-4-细节优化" class="headerlink" title="1.4 细节优化"></a>1.4 细节优化</h3><h3 id="1-4-1-ReLU替换为GELU"><a href="#1-4-1-ReLU替换为GELU" class="headerlink" title="1.4.1 ReLU替换为GELU"></a>1.4.1 ReLU替换为GELU</h3><p>ReLU是比较早期的激活函数，近年来更多的模型选择使用GELU[11]作为激活函数，例如ConvNeXt要对齐的Swin Transformer。在ConvNeXt的实验中，GELU并没有提升模型的准确率和效率。但是为了对齐其它指标，ConvNeXt还是选择了GELU作为激活函数。</p><h3 id="1-4-2-更少的激活函数"><a href="#1-4-2-更少的激活函数" class="headerlink" title="1.4.2 更少的激活函数"></a>1.4.2 更少的激活函数</h3><p>在以往的卷积网络中，我们倾向于为每一个卷积操作都添加一个激活函数，但Transformer使用了更少的激活函数，Transformer是由一个自注意力层和两个MLP组成，但它仅在一个MLP上使用了激活函数。</p><p>ConvNeXt也借鉴了Transformer的思想，它仅在两个 1×1 卷积之间添加了一个GELU激活函数。实验结果表明这个操作将准确率从80.6%提升至81.3%。</p><h3 id="1-4-3-更少的归一化层"><a href="#1-4-3-更少的归一化层" class="headerlink" title="1.4.3 更少的归一化层"></a>1.4.3 更少的归一化层</h3><p>Transformer也是一个归一化层使用的非常少的网络结构，因此在ConvNeXt中也使用了更少的归一化操作，它仅在第一个 1×1 卷积之前添加了一个BN，而更多的归一化操作对模型效果提升并没有帮助。通过这个操作将模型的准确率提升至81.4%。</p><h3 id="1-4-4-BN替换为LN"><a href="#1-4-4-BN替换为LN" class="headerlink" title="1.4.4 BN替换为LN"></a>1.4.4 BN替换为LN</h3><p>根据我们之前的经验，BN[12]经常被用在CNN中，而LN[13]通常是用来解决BN在样本量过少的时候归一化统计量偏差过大的问题的。也有实验结果表明，如果将残差网络中的BN直接替换为LN的话，模型的性能反而会下降。</p><p>但是在ConvNeXt中，因为之前作者做了若干个将卷积网络向Transformer的改进，因此这里也尝试了将ConvNeXt中的BN替换为LN，令人意外的是，LN在ConvNeXt中要比BN表现的好，它将模型的准确率提升至81.5%。</p><p>因为上述改进都是非常小的点的优化，对模型的速度影响并不大，因此ConvNeXt的GFLOPs维持在了4.2没变。上述的所有改进如下面代码片段所示。注意下面的代码中的 1×1 卷积使用的是线性层来实现的。</p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>论文阅读</category>
      
    </categories>
    
    
    <tags>
      
      <tag>CV</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>深度学习GPU和CUDA配置</title>
    <link href="/posts/2023/07/df09aa05.html"/>
    <url>/posts/2023/07/df09aa05.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><h3 id="预备知识"><a href="#预备知识" class="headerlink" title="预备知识"></a>预备知识</h3><h4 id="😊Anaconda"><a href="#😊Anaconda" class="headerlink" title="😊Anaconda"></a>😊Anaconda</h4><p>管理python环境，可以做到环境隔离，避免依赖冲突等问题</p><ol><li>创建一个虚拟环境（比如叫tuduipytorch)</li></ol><p>​        conda  create –n  虚拟环境名字  python&#x3D;版本</p><ol start="2"><li><p>添加镜像加速 </p><p>conda create –n 虚拟环境名字 python&#x3D;版本 –c 镜像地址</p></li><li><p>删除虚拟环境</p><p>conda  remove  –n 虚拟环境名字 –all</p></li></ol><table><thead><tr><th>镜像名</th><th>用于创建环境镜像地址</th></tr></thead><tbody><tr><td>清华镜像</td><td><a href="https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main">https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main</a></td></tr><tr><td>北京外国语大学镜像</td><td><a href="https://mirrors.bfsu.edu.cn/anaconda/pkgs/main">https://mirrors.bfsu.edu.cn/anaconda/pkgs/main</a></td></tr><tr><td>阿里巴巴镜像</td><td><a href="http://mirrors.aliyun.com/anaconda/pkgs/main">http://mirrors.aliyun.com/anaconda/pkgs/main</a></td></tr></tbody></table><p>持久添加通道：</p><p>conda config –add channels 通道地址 </p><p>删除通道：conda config –remove channels 通道地址</p><p>如何查看配置文件中有哪些通道？</p><p>conda  config –get </p><p>conda  config –show</p><h4 id="😊显卡GPU，驱动"><a href="#😊显卡GPU，驱动" class="headerlink" title="😊显卡GPU，驱动"></a>😊显卡GPU，驱动</h4><ul><li><p>GPU (Graphics Processing Unit)</p></li><li><p>显卡，主要就是用于在屏幕上显示图像。用于与视频，图像处理相关的任务。</p></li><li><p>驱动：让计算机识别特定的硬件。</p></li></ul><h4 id="😊深度学习显卡，CUDA"><a href="#😊深度学习显卡，CUDA" class="headerlink" title="😊深度学习显卡，CUDA"></a>😊深度学习显卡，CUDA</h4><ul><li>深度学习显卡，英伟达品牌的显卡。NVIDIA</li><li>有了CUDA，我们就可以操作英伟达品牌的显卡</li></ul><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20230712003441.png"></p><hr><h3 id="Windows下安装PyTorch-GPU版本-流程"><a href="#Windows下安装PyTorch-GPU版本-流程" class="headerlink" title="Windows下安装PyTorch(GPU版本)流程"></a>Windows下安装PyTorch(GPU版本)流程</h3><h4 id="1-确定自己的硬件信息–确定电脑有英伟达（NVIDIA）显卡"><a href="#1-确定自己的硬件信息–确定电脑有英伟达（NVIDIA）显卡" class="headerlink" title="1.确定自己的硬件信息–确定电脑有英伟达（NVIDIA）显卡"></a>1.确定自己的硬件信息–确定电脑有英伟达（NVIDIA）显卡</h4><ul><li>检查任务管理器–如果GPU中带有NVIDIA字眼，说明有NVIDIA GPU</li><li>你觉得你有，但任务管理器上没有–有可能是你没装驱动</li></ul><h4 id="2-下载安装Anaconda"><a href="#2-下载安装Anaconda" class="headerlink" title="2.下载安装Anaconda"></a>2.下载安装Anaconda</h4><p>   官网<a href="https://www.anaconda.com/">https://www.anaconda.com/</a></p><p>   选择Products -&gt; Anaconda Distribution</p><p>   点击Download，可以下载最新版本 </p><p>​    <a href="https://repo.anaconda.com/archive/">https://repo.anaconda.com/archive/</a> 可以下载到历史版本  </p><p>​    安装路径最好全英文</p><h4 id="3-利用conda或者pip安装PyTorch（坑最多的）"><a href="#3-利用conda或者pip安装PyTorch（坑最多的）" class="headerlink" title="3.利用conda或者pip安装PyTorch（坑最多的）"></a>3.利用conda或者pip安装PyTorch（坑最多的）</h4><ul><li><p>确定自己安装的CUDA版本与GPU关系</p><p> 首先， <strong>确定自己的显卡型号</strong>，确定自己显卡的算力，</p><p> 再，下载显卡驱动程序，确定<strong>CUDA Driver</strong>的版本 </p><p> 最后，确定自己的可选择<strong>CUDA Runtime Version</strong></p><p> PS：确保自己的<strong>CUDA Driver版本</strong>&gt;&#x3D; CUDA Runtime版本</p></li><li><p>安装GPU版本PyTorch</p></li></ul><p>简单操作</p><p>1.确定显卡型号 RTX 2060</p><p>   确定显卡算力7.5</p><p>   <a href="https://en.wikipedia.org/wiki/CUDA">https://en.wikipedia.org/wiki/CUDA</a></p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20230712000609.png"></p><p>  安装显卡驱动最新版本-<a href="https://www.nvidia.cn/Download/index.aspx?lang=cn">https://www.nvidia.cn/Download/index.aspx?lang=cn</a></p><p>2.打开命令窗口，输入nvidia-smi来确定cuda driver的版本（我的是12.0）</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20230712005227.png"></p><p>3.确定CUDA Runtime版本</p><p>  以下图来自wikipedia，假设7.5的算力，则对应的最大的CUDA SDK version为10.0 - 10.2，也可以是11.0，11.1-11.4往上包含7.5的算力即可，确保CUDA Driver版本（nvidia-smi查看的12.0）&gt;&#x3D; CUDA Runtime版本，</p><p>最终我们确定适用CUDA 10.0，11.0，—12.0</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20230712001505.png"></p><p>4.安装GPU版本PyTorch，去pytorch网站上找对应的包</p><p><a href="https://pytorch.org/get-started/previous-versions/">https://pytorch.org/get-started/previous-versions/</a></p><p>例如：</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-comment"># CUDA 11.3</span><br><span class="hljs-attribute">conda</span> install pytorch==<span class="hljs-number">1</span>.<span class="hljs-number">11</span>.<span class="hljs-number">0</span> torchvision==<span class="hljs-number">0</span>.<span class="hljs-number">12</span>.<span class="hljs-number">0</span> torchaudio==<span class="hljs-number">0</span>.<span class="hljs-number">11</span>.<span class="hljs-number">0</span> cudatoolkit=<span class="hljs-number">11</span>.<span class="hljs-number">3</span> -c pytorch<br></code></pre></td></tr></table></figure><h4 id="4-下载安装-x2F-配置PyCharm"><a href="#4-下载安装-x2F-配置PyCharm" class="headerlink" title="4.下载安装&#x2F;配置PyCharm"></a>4.下载安装&#x2F;配置PyCharm</h4><p>略</p><hr><h4 id="验证pytorch是否成功"><a href="#验证pytorch是否成功" class="headerlink" title="验证pytorch是否成功"></a>验证pytorch是否成功</h4><p>1.激活对应的虚拟环境（你安装Pytorch的虚拟环境）conda activate虚拟环境名</p><p>2.输入condalist，看有没有pytorch或者torch</p><p>3.输入python</p><p>4.输入import torch</p><p>5.输入torch.cuda.is_available()</p><p>6.如果显示True，就说明我们这个PyTorch安装成功了</p><p>参考：b站 小土堆</p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    
    <tags>
      
      <tag>Deep Learning</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>postman传入复杂参数</title>
    <link href="/posts/2023/06/29f68f02.html"/>
    <url>/posts/2023/06/29f68f02.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><h3 id="一、五种类型参数传递"><a href="#一、五种类型参数传递" class="headerlink" title="一、五种类型参数传递"></a>一、五种类型参数传递</h3><p>1.普通参数</p><p>2.POJO类型参数</p><p>3.嵌套POJO类型参数</p><p>4.数组类型参数</p><h4 id="1-1普通参数"><a href="#1-1普通参数" class="headerlink" title="1.1普通参数"></a>1.1普通参数</h4><p>普通参数:url地址传参，地址参数名与形参变量名相同，定义形参即可接收参数。</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20230625203409.png"></p><p>如果形参与地址参数名不一致该如何解决?</p><p>发送请求与参数:</p><p><code>http://localhost/commonParamDifferentName?name=张三&amp;age=18</code></p><p>后台接收参数:</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-meta">@RequestMapping(<span class="hljs-string">&quot;/commonParamDifferentName&quot;</span>)</span><br><span class="hljs-meta">@ResponseBody</span><br><span class="hljs-keyword">public</span> String commonParamDifferentName(String userName , int age)&#123;<br>    System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;普通参数传递 userName ==&gt; &quot;</span>+userName);<br>    System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;普通参数传递 age ==&gt; &quot;</span>+age);<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&#123;&#x27;module&#x27;:&#x27;common param different name&#x27;&#125;&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>解决方案:使用@RequestParam注解</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-meta">@RequestMapping(<span class="hljs-string">&quot;/commonParamDifferentName&quot;</span>)</span><br>    <span class="hljs-meta">@ResponseBody</span><br>    <span class="hljs-keyword">public</span> String commonParamDifferentName(<span class="hljs-meta">@RequestParam(<span class="hljs-string">&quot;name&quot;</span>)</span> String userName , int age)&#123;<br>        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;普通参数传递 userName ==&gt; &quot;</span>+userName);<br>        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;普通参数传递 age ==&gt; &quot;</span>+age);<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&#123;&#x27;module&#x27;:&#x27;common param different name&#x27;&#125;&quot;</span>;<br>    &#125;<br></code></pre></td></tr></table></figure><h3 id="1-2-POJO类型参数"><a href="#1-2-POJO类型参数" class="headerlink" title="1.2 POJO类型参数"></a>1.2 POJO类型参数</h3><p>简单数据类型一般处理的是参数个数比较少的请求，如果参数比较多，那么后台接收参数的时候就比较复杂，这个时候我们可以考虑使用POJO数据类型。</p><ul><li><p>POJO参数：请求参数名与形参对象属性名相同，定义POJO类型形参即可接收参数</p></li><li><p>此时需要使用前面准备好的POJO类，先来看下User</p><p>public class User {<br>private String name;<br>private int age;<br>&#x2F;&#x2F;setter…getter…略<br>}</p></li></ul><p><strong>发送请求和参数:</strong></p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20230625203725.png"></p><p><strong>后台接收参数:</strong></p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-comment">//POJO参数：请求参数与形参对象中的属性对应即可完成参数传递</span><br><span class="hljs-meta">@RequestMapping(<span class="hljs-string">&quot;/pojoParam&quot;</span>)</span><br><span class="hljs-meta">@ResponseBody</span><br><span class="hljs-keyword">public</span> String pojoParam(User user)&#123;<br>    System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;pojo参数传递 user ==&gt; &quot;</span>+user);<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&#123;&#x27;module&#x27;:&#x27;pojo param&#x27;&#125;&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>注意:</strong></p><p>POJO参数接收，前端GET和POST发送请求数据的方式不变。</p><p>请求参数key的名称要和POJO中属性的名称一致，否则无法封装。</p><h3 id="2-3-嵌套POJO类型参数"><a href="#2-3-嵌套POJO类型参数" class="headerlink" title="2.3 嵌套POJO类型参数"></a>2.3 嵌套POJO类型参数</h3><p>如果POJO对象中嵌套了其他的POJO类，如</p><figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs smali">--CDCSyncTableDto<span class="hljs-keyword"></span><br><span class="hljs-keyword">public</span> class CDCSyncTableDto  &#123;  <span class="hljs-keyword"></span><br><span class="hljs-keyword">private</span> String taskType;   <span class="hljs-keyword"></span><br><span class="hljs-keyword">private</span> CDCSyncTableDetail cdcSyncTable;   <span class="hljs-keyword"></span><br><span class="hljs-keyword">private</span> CDCSyncTableHistoryDetail cdcSyncHisTable; <span class="hljs-keyword"></span><br><span class="hljs-keyword">public</span> CDCSyncTableDto()&#123;&#125;   <br><br>&#125;<br><br>--CDCSyncTableDetail<span class="hljs-keyword"></span><br><span class="hljs-keyword">public</span> class CDCSyncTableDetail implements Serializable &#123;<br> <span class="hljs-keyword"> private</span><span class="hljs-built_in"> int </span>id;<br><span class="hljs-keyword">private</span> String sourceDb;<br><span class="hljs-keyword">private</span> String sourceTableName;<br> <span class="hljs-keyword"> private</span> String sinkDb;<br> <span class="hljs-keyword"> private</span> String sinkTableName;<br><span class="hljs-keyword">  .</span>..<br> <span class="hljs-keyword"> public</span> CDCSyncTableDetail() &#123;     &#125;<br><br>&#125;<br><br>--CDCSyncTableHistoryDetail<span class="hljs-keyword"></span><br><span class="hljs-keyword">public</span> class CDCSyncTableHistoryDetail &#123;  <br> <span class="hljs-keyword"> private</span><span class="hljs-built_in"> int </span>id;<br> <span class="hljs-keyword"> private</span> String sourceDb;  <br> <span class="hljs-keyword"> private</span> String sourceTableName;<br> <span class="hljs-keyword"> private</span> String sinkDb; <br> <span class="hljs-keyword"> private</span> String sinkTableName;    <br> <span class="hljs-keyword"> private</span> String addColumns;    <br> <span class="hljs-keyword"> private</span> String secretColumns;    <br> <span class="hljs-keyword"> private</span><span class="hljs-built_in"> int </span>checkInterval;   <br> <span class="hljs-keyword"> private</span><span class="hljs-built_in"> int </span>maxRetries;    <br> <span class="hljs-keyword"> private</span><span class="hljs-built_in"> int </span>bufferSize;    <br> <span class="hljs-keyword"> private</span><span class="hljs-built_in"> int </span>bufferCount;    <br> <span class="hljs-keyword"> private</span><span class="hljs-built_in"> int </span>sysStatus;    <br> <span class="hljs-keyword"> private</span> String jobName;    <br> <span class="hljs-keyword"> private</span> String createTime;    <br> <span class="hljs-keyword"> private</span> String updateTime;<br>&#125;<br></code></pre></td></tr></table></figure><p>嵌套POJO参数：请求参数名与形参对象属性名相同，按照对象层次结构关系即可接收嵌套POJO属性参数</p><p>发送请求和参数:</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20230625183325.png"></p><p><strong>后台接收参数:</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@ApiOperation(value = &quot;updateSyncTable&quot;, notes = &quot;UPDATE_SYNC_TABLE_NOTES&quot;)</span><br><span class="hljs-meta">@PostMapping(value = &quot;/update&quot;)</span><br><span class="hljs-meta">@ResponseBody</span><br><span class="hljs-meta">@ResponseStatus(HttpStatus.OK)</span><br><span class="hljs-meta">@ApiException(FLINK_UPDATE_SYNC_TABLE_ERROR)</span><br><span class="hljs-meta">@AccessLogAnnotation(ignoreRequestArgs = &quot;loginUser&quot;)</span><br><br><span class="hljs-keyword">public</span> Result <span class="hljs-title function_">updateTable</span><span class="hljs-params">(<span class="hljs-meta">@ApiIgnore</span> <span class="hljs-meta">@RequestAttribute(value = Constants.SESSION_USER)</span> User loginUser,                              </span><br><span class="hljs-params">CDCSyncTableDto cDCSyncTableDto )</span> &#123;    <br>Map&lt;String, Object&gt; result = <span class="hljs-literal">null</span>;  <br><span class="hljs-keyword">if</span>(cDCSyncTableDto.getTaskType().equals(<span class="hljs-string">&quot;all&quot;</span>) || cDCSyncTableDto.getTaskType().equals(<span class="hljs-string">&quot;inc&quot;</span>))&#123;  <br>result = cDCSyncTableDetailService.updateTable(loginUser,cDCSyncTableDto); <br>&#125;  <br><span class="hljs-keyword">return</span> returnDataList(result);<br>&#125;<br><br></code></pre></td></tr></table></figure><p><strong>注意:</strong></p><p>请求参数key的名称要和POJO中属性的名称一致，否则无法封装</p><h4 id="2-4-传入pojo对象，其中嵌套List-lt-对象-gt-，这种可以采用postman的body的-raw-JSON传参："><a href="#2-4-传入pojo对象，其中嵌套List-lt-对象-gt-，这种可以采用postman的body的-raw-JSON传参：" class="headerlink" title="2.4 传入pojo对象，其中嵌套List&lt;对象&gt;，这种可以采用postman的body的 raw- JSON传参："></a>2.4 传入pojo对象，其中嵌套List&lt;对象&gt;，这种可以采用postman的body的 raw- JSON传参：</h4><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20230625182110.png"></p><p>后端接口：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@ApiOperation(value = &quot;createTable&quot;, notes = &quot;CREATE_SYNCTABLE_NOTES&quot;)</span><br><span class="hljs-meta">@PostMapping(value =&quot;/create&quot;)</span><br><span class="hljs-meta">@ResponseStatus(HttpStatus.CREATED)</span><br><span class="hljs-meta">@ApiException(FLINK_CREATE_SYNC_TABLE_ERROR)</span><br><span class="hljs-meta">@AccessLogAnnotation(ignoreRequestArgs = &#123;&quot;loginUser&quot;, &quot;userPassword&quot;&#125;)</span><br><br><span class="hljs-keyword">public</span> Result <span class="hljs-title function_">createTable</span><span class="hljs-params">(<span class="hljs-meta">@ApiIgnore</span> <span class="hljs-meta">@RequestAttribute(value = Constants.SESSION_USER)</span> User loginUser                     </span><br><span class="hljs-params">                          ,<span class="hljs-meta">@RequestBody</span> CDCSyncBatchTableDto cDCSyncBatchTableDto)</span> <span class="hljs-keyword">throws</span> Exception &#123; <br>  Map&lt;String, Object&gt; result = <span class="hljs-literal">null</span>;<br>  <span class="hljs-keyword">if</span>(cDCSyncBatchTableDto.getTaskType().equals(<span class="hljs-string">&quot;all&quot;</span>) || cDCSyncBatchTableDto.getTaskType().equals(<span class="hljs-string">&quot;inc&quot;</span>))&#123;    <br>    result = cDCSyncTableDetailService.createTable(loginUser,cDCSyncBatchTableDto); <br>  &#125;   <br>  <span class="hljs-keyword">return</span> returnDataList(result);<br>&#125;<br></code></pre></td></tr></table></figure><p>实体类：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CDCSyncBatchTableDto</span> &#123;   <br><span class="hljs-keyword">private</span> String taskType;  <br><span class="hljs-keyword">private</span> List&lt;CDCSyncTableDetail&gt; cdcSyncTable;  <br><span class="hljs-keyword">private</span> List&lt;CDCSyncTableHistoryDetail&gt; cdcSyncHisTable;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="二、json传输参数"><a href="#二、json传输参数" class="headerlink" title="二、json传输参数"></a>二、json传输参数</h3><p>SpringMVC接收JSON数据的实现步骤为:</p><p>(1)导入jackson包</p><p>(2)使用PostMan发送JSON数据</p><p>(3)开启SpringMVC注解驱动，在配置类上添加@EnableWebMvc注解</p><p>(4)Controller方法的参数前添加@RequestBody注解</p><p>知识点1：@EnableWebMvc</p><table><thead><tr><th>名称</th><th>@EnableWebMvc</th></tr></thead><tbody><tr><td>类型</td><td>配置类注解</td></tr><tr><td>位置</td><td>SpringMVC配置类定义上方</td></tr><tr><td>作用</td><td>开启SpringMVC多项辅助功能</td></tr></tbody></table><p>知识点2：@RequestBody</p><table><thead><tr><th>名称</th><th>@RequestBody</th></tr></thead><tbody><tr><td>类型</td><td>形参注解</td></tr><tr><td>位置</td><td>SpringMVC控制器方法形参定义前面</td></tr><tr><td>作用</td><td>将请求中请求体所包含的数据传递给请求参数，此注解一个处理器方法只能使用一次</td></tr></tbody></table><p>知识点3: @RequestBody与@RequestParam区别</p><p>区别</p><p>@RequestParam用于接收url地址传参，表单传参【application&#x2F;x-www-form-urlencoded】</p><p>@RequestBody用于接收json数据【application&#x2F;json】</p><p>应用</p><p>后期开发中，发送json格式数据为主，@RequestBody应用较广</p><p>如果发送非json格式数据，选用@RequestParam接收请求参数</p><p>参考链接：</p><p><a href="https://blog.csdn.net/m0_73257876/article/details/126403756">https://blog.csdn.net/m0_73257876/article/details/126403756</a></p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    
    <tags>
      
      <tag>JAVA</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Flink程序从checkpoint点启动-广播流修改问题</title>
    <link href="/posts/2023/04/c490a47a.html"/>
    <url>/posts/2023/04/c490a47a.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><p>原本的processBroadcastElement函数逻辑如下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processBroadcastElement</span><span class="hljs-params">(Tuple2&lt;String, String&gt; value, Context ctx, Collector&lt;Tuple2&lt;String, String&gt;&gt; out)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>  <br><span class="hljs-type">String</span> <span class="hljs-variable">tableInfo</span> <span class="hljs-operator">=</span> JSON.parseObject(value.f1).getString(<span class="hljs-string">&quot;data&quot;</span>);<br><span class="hljs-type">FlinkCdcTableInfoBean</span> <span class="hljs-variable">flinkCdcTableInfoBean</span> <span class="hljs-operator">=</span> JSON.parseObject(tableInfo, FlinkCdcTableInfoBean.class);<br> <br><span class="hljs-type">String</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> flinkCdcTableInfoBean.getSourceDb() + <span class="hljs-string">&quot;_&quot;</span> + flinkCdcTableInfoBean.getSourceTableName() + <span class="hljs-string">&quot;_&quot;</span> + flinkCdcTableInfoBean.getId();         <br><br>BroadcastState&lt;String, FlinkCdcTableInfoBean&gt; broadcastState=ctx.getBroadcastState(mapStateDescriptor);<br><br>broadcastState.put(key, flinkCdcTableInfoBean);<br>&#125;<br>&#125;).name(<span class="hljs-string">&quot;MySQL data sync stream&quot;</span>);<br><br></code></pre></td></tr></table></figure><p>从checkpoint重启，processBroadcastElement函数被修改掉，等于是广播的状态broadcastState被修改掉了</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processBroadcastElement</span><span class="hljs-params">(Tuple2&lt;String, String&gt; value, Context ctx, Collector&lt;Tuple2&lt;String, String&gt;&gt; out)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>  <br><span class="hljs-type">String</span> <span class="hljs-variable">tableInfo</span> <span class="hljs-operator">=</span> JSON.parseObject(value.f1).getString(<span class="hljs-string">&quot;data&quot;</span>);<br>  <br><span class="hljs-type">FlinkCdcTableInfoBean</span> <span class="hljs-variable">flinkCdcTableInfoBean</span> <span class="hljs-operator">=</span> JSON.parseObject(tableInfo, FlinkCdcTableInfoBean.class);<br>  <br><span class="hljs-keyword">if</span> (StringUtils.isNotEmpty(flinkCdcTableInfoBean.getSecretColumns())) &#123;<br>List&lt;FlinkCdcTableInfoBean.SecretColumnDTO&gt; secretColumns = JSONValidator.from(flinkCdcTableInfoBean.getSecretColumns()).validate() ?<br>JSON.parseArray(flinkCdcTableInfoBean.getSecretColumns(), FlinkCdcTableInfoBean.SecretColumnDTO.class) : <span class="hljs-literal">null</span>;<br>flinkCdcTableInfoBean.setSecretColumnDTO(secretColumns);<br>&#125;<br><span class="hljs-keyword">if</span> (StringUtils.isNotEmpty(flinkCdcTableInfoBean.getAddColumns())) &#123;<br>List&lt;FlinkCdcTableInfoBean.AddColumnDTO&gt; addColumnDTO = JSONValidator.from(flinkCdcTableInfoBean.getAddColumns()).validate() ?<br>JSON.parseArray(flinkCdcTableInfoBean.getAddColumns(), FlinkCdcTableInfoBean.AddColumnDTO.class) : <span class="hljs-literal">null</span>;<br>flinkCdcTableInfoBean.setAddColumnsDTO(addColumnDTO);<br>&#125;<br>  <br><span class="hljs-type">String</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> flinkCdcTableInfoBean.getSourceDb() + <span class="hljs-string">&quot;_&quot;</span> + flinkCdcTableInfoBean.getSourceTableName() + <span class="hljs-string">&quot;_&quot;</span> + flinkCdcTableInfoBean.getId();         BroadcastState&lt;String, FlinkCdcTableInfoBean&gt; broadcastState = ctx.getBroadcastState(mapStateDescriptor);<br>broadcastState.put(key, flinkCdcTableInfoBean);<br>&#125;<br>&#125;).name(<span class="hljs-string">&quot;MySQL data sync stream&quot;</span>);<br><br></code></pre></td></tr></table></figure><p><strong>修改办法：</strong></p><p>在使用 BroadcastState 时，需要注意广播状态数据的一致性。如果广播状态中的数据在 checkpoint 之前发生了修改，那么在从 checkpoint 恢复状态时，可能会导致状态不一致。</p><p>为了保证广播状态数据的一致性，在使用 BroadcastState 时，可以考虑使用以下两种方法：</p><p>对广播状态的修改进行同步：在对广播状态进行修改时，需要确保只有一个线程进行修改，避免并发修改导致数据不一致。可以使用锁或者线程安全的数据结构来实现。</p><p>使用版本号控制状态的变更：在广播状态中加入版本号，每次更新状态时，都更新版本号。在从 checkpoint 恢复状态时，通过比较版本号来判断状态是否一致。如果版本号不一致，说明状态已经被修改，需要重新更新状态。可以使用 ValueState 来存储版本号。</p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    
    <tags>
      
      <tag>Flink</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Flinkcdc同步mysql数据到Doris-streamload出错跳过数据问题</title>
    <link href="/posts/2023/04/491294c5.html"/>
    <url>/posts/2023/04/491294c5.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><h3 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h3><p>Flinkcdc实时同步mysql数据到doris，原始修改表结构需要停任务，自己手工同步修改更新表结构，再重启任务，比较麻烦，基于此自定义Dorissink，刚开始没implements CheckpointedFunction类，会出现，这个checkpoint失败的时候，直接跳过这个checkpoint的数据，这样就会导致漏数据。</p><p>引起checkpoint失败的原因举例：Doris表字段设置了not null，会导致streamload失败，正常来说这一批streamload的数据需要等在那儿，不被丢失。但实际测试情况是如果没有implements CheckpointedFunction类，这批数据就会丢了</p><h3 id="相关知识"><a href="#相关知识" class="headerlink" title="相关知识"></a>相关知识</h3><p>DorisSink 是 Flink 的一个 Sink Function，其在实现从最近的检查点重启的过程中，主要依赖于 Flink 的 Checkpointing 机制和 Flink 的状态恢复功能。</p><p>具体来说，DorisSink 首先需要在实现中启用 Flink 的 Checkpointing 机制，以便在任务失败时，能够将所有状态数据写入到检查点中。这可以通过在 Flink 的执行环境中设置相关参数来实现，例如：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java">env.enableCheckpointing(<span class="hljs-number">60000</span>);<br>env.getCheckpointConfig().setCheckpointingMode(CheckpointingMode.EXACTLY_ONCE);<br>env.getCheckpointConfig().setMinPauseBetweenCheckpoints(<span class="hljs-number">5000</span>);<br>env.getCheckpointConfig().setCheckpointTimeout(<span class="hljs-number">60000</span>);<br>env.getCheckpointConfig().setMaxConcurrentCheckpoints(<span class="hljs-number">1</span>);<br></code></pre></td></tr></table></figure><p>这里设置了 Checkpointing 的间隔为 60 秒，模式为精确一次，最短间隔为 5 秒，超时时间为 60 秒，同时最多同时进行一个检查点。</p><p>接下来，在任务失败后，DorisSink 会在重启时使用 Flink 的状态恢复功能，从最近的检查点中恢复所有状态数据。这可以通过在 DorisSink 的实现中实现 restoreState() 方法来实现，例如：</p><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs aspectj"><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">restoreState</span><span class="hljs-params">(FinalizedState finalizedState)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;<br>    <span class="hljs-comment">// 从最近的检查点中恢复状态数据</span><br>    state.restore(finalizedState.getMetadata());<br>&#125;<br><br></code></pre></td></tr></table></figure><p>在 Apache Flink 中，实现 CheckpointedFunction 接口可以让函数自动支持检查点和恢复。DorisSink 实现了 CheckpointedFunction 接口中的 snapshotState() 和 initializeState() 方法来支持检查点。</p><p>snapshotState() 方法用于将函数的状态保存到状态后端，即将所有正在处理的数据的状态（如正在缓存的数据、已完成但未提交的数据）写入到状态后端。在发生故障时，Flink 将使用这个检查点来恢复状态。在 DorisSink 中，snapshotState() 方法的实现会将所有 DorisDynamicOutputFormatForJson 实例中已缓存但未提交的数据写入到 Doris 中。</p><p>initializeState() 方法用于将状态从状态后端中恢复。在 DorisSink 中，initializeState() 方法的实现是空的，因为 DorisDynamicOutputFormatForJson 已经自带了状态的恢复逻辑，不需要再手动实现。</p><p>综上，DorisSink 中的 snapshotState() 和 initializeState() 方法是用于支持检查点和状态的恢复。snapshotState() 方法将数据缓存到状态后端，而 initializeState() 方法则在任务启动时从状态后端恢复数据。</p><h3 id="问题解决"><a href="#问题解决" class="headerlink" title="问题解决"></a>问题解决</h3><p>代码如下：</p><p>值得注意的是需要继承implements CheckpointedFunction类，并且重写一下两个方法</p><p>@Override<br>    public void snapshotState(FunctionSnapshotContext functionSnapshotContext) throws Exception {<br>        for (DorisDynamicOutputFormatForJson<String> outputFormat : outputFormatList.values()) {<br>            outputFormat.flush();<br>        }<br>    }</p><p>@Override<br>public void initializeState(FunctionInitializationContext functionInitializationContext) throws Exception {</p><p>}</p><p>完整的Doris sink.java代码如下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itiaoling.sink;<br><br><span class="hljs-keyword">import</span> com.alibaba.fastjson.JSON;<br><span class="hljs-keyword">import</span> com.alibaba.fastjson.JSONObject;<br><span class="hljs-keyword">import</span> com.itiaoling.bean.FlinkCdcTableInfoBean;<br><span class="hljs-keyword">import</span> com.itiaoling.bean.FlinkConfTableInfoBean;<br><span class="hljs-keyword">import</span> com.itiaoling.bean.FlinkHostInfoBean;<br><span class="hljs-keyword">import</span> com.itiaoling.function.DorisDynamicOutputFormatForJson;<br><span class="hljs-keyword">import</span> com.itiaoling.utils.JdbcUtils;<br><span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;<br><span class="hljs-keyword">import</span> org.apache.commons.lang3.StringUtils;<br><span class="hljs-keyword">import</span> org.apache.doris.flink.cfg.DorisExecutionOptions;<br><span class="hljs-keyword">import</span> org.apache.doris.flink.cfg.DorisOptions;<br><span class="hljs-keyword">import</span> org.apache.doris.flink.cfg.DorisReadOptions;<br><span class="hljs-keyword">import</span> org.apache.flink.api.common.functions.RuntimeContext;<br><span class="hljs-keyword">import</span> org.apache.flink.api.java.tuple.Tuple2;<br><span class="hljs-keyword">import</span> org.apache.flink.configuration.Configuration;<br><span class="hljs-keyword">import</span> org.apache.flink.runtime.state.FunctionInitializationContext;<br><span class="hljs-keyword">import</span> org.apache.flink.runtime.state.FunctionSnapshotContext;<br><span class="hljs-keyword">import</span> org.apache.flink.streaming.api.checkpoint.CheckpointedFunction;<br><span class="hljs-keyword">import</span> org.apache.flink.streaming.api.functions.sink.RichSinkFunction;<br><span class="hljs-keyword">import</span> org.apache.flink.table.types.logical.LogicalType;<br><br><span class="hljs-keyword">import</span> java.sql.Connection;<br><span class="hljs-keyword">import</span> java.util.HashMap;<br><span class="hljs-keyword">import</span> java.util.List;<br><span class="hljs-keyword">import</span> java.util.Map;<br><span class="hljs-keyword">import</span> java.util.Properties;<br><span class="hljs-keyword">import</span> java.util.stream.Collectors;<br><br><span class="hljs-keyword">import</span> <span class="hljs-keyword">static</span> com.itiaoling.sink.DorisSink.Builder.getProperties;<br><br><span class="hljs-meta">@Slf4j</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DorisSink</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">RichSinkFunction</span>&lt;Tuple2&lt;String, String&gt;&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title class_">CheckpointedFunction</span> &#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;String, DorisDynamicOutputFormatForJson&lt;String&gt;&gt; outputFormatList;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">DorisSink</span><span class="hljs-params">(</span><br><span class="hljs-params">            Map&lt;String, DorisDynamicOutputFormatForJson&lt;String&gt;&gt; outputFormatList)</span> &#123;<br>        <span class="hljs-built_in">this</span>.outputFormatList = outputFormatList;<br>    &#125;<br><br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">open</span><span class="hljs-params">(Configuration parameters)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-built_in">super</span>.open(parameters);<br>        <span class="hljs-type">RuntimeContext</span> <span class="hljs-variable">ctx</span> <span class="hljs-operator">=</span> getRuntimeContext();<br>        <span class="hljs-keyword">for</span> (DorisDynamicOutputFormatForJson&lt;String&gt; outputFormat : outputFormatList.values()) &#123;<br>            outputFormat.setRuntimeContext(ctx);<br>            outputFormat.open(ctx.getIndexOfThisSubtask(), ctx.getNumberOfParallelSubtasks());<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">invoke</span><span class="hljs-params">(Tuple2&lt;String, String&gt; value, Context context)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-type">JSONObject</span> <span class="hljs-variable">rowJson</span> <span class="hljs-operator">=</span> JSON.parseObject(value.f1);<br>        <span class="hljs-type">FlinkHostInfoBean</span> <span class="hljs-variable">flinkHostInfo</span> <span class="hljs-operator">=</span> JSON.parseObject(rowJson.getString(<span class="hljs-string">&quot;flinkHostInfo&quot;</span>), FlinkHostInfoBean.class);<br>        <span class="hljs-type">FlinkConfTableInfoBean</span> <span class="hljs-variable">flinkConfTableInfo</span> <span class="hljs-operator">=</span> JSON.parseObject(rowJson.getString(<span class="hljs-string">&quot;flinkConfTableInfo&quot;</span>), FlinkConfTableInfoBean.class);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">id</span> <span class="hljs-operator">=</span> flinkHostInfo.getId();<br>        <span class="hljs-type">String</span> <span class="hljs-variable">sinkFe</span> <span class="hljs-operator">=</span> flinkHostInfo.getSinkHostPort();<br>        <span class="hljs-type">String</span> <span class="hljs-variable">sinkUsername</span> <span class="hljs-operator">=</span> flinkHostInfo.getSinkUserName();<br>        <span class="hljs-type">String</span> <span class="hljs-variable">sinkPassword</span> <span class="hljs-operator">=</span> flinkHostInfo.getSinkPassword();<br>        <span class="hljs-keyword">if</span> (rowJson.containsKey(<span class="hljs-string">&quot;isNewAdd&quot;</span>)) &#123;<br>            <span class="hljs-type">String</span> <span class="hljs-variable">isNewAdd</span> <span class="hljs-operator">=</span> rowJson.getString(<span class="hljs-string">&quot;isNewAdd&quot;</span>);<br>            <span class="hljs-type">FlinkCdcTableInfoBean</span> <span class="hljs-variable">flinkCdcTableInfo</span> <span class="hljs-operator">=</span> JSON.parseObject(rowJson.getString(<span class="hljs-string">&quot;data&quot;</span>), FlinkCdcTableInfoBean.class);<br>            <span class="hljs-type">String</span> <span class="hljs-variable">dorisTable</span> <span class="hljs-operator">=</span> flinkHostInfo.getSinkDb() + <span class="hljs-string">&quot;.&quot;</span> + flinkCdcTableInfo.getSinkTableName();<br>            <span class="hljs-type">String</span> <span class="hljs-variable">dbName</span> <span class="hljs-operator">=</span> flinkCdcTableInfo.getSourceDb();<br>            <span class="hljs-type">String</span> <span class="hljs-variable">mysqlTable</span> <span class="hljs-operator">=</span> flinkCdcTableInfo.getSourceTableName();<br>            <span class="hljs-keyword">if</span> (<span class="hljs-string">&quot;1&quot;</span>.equals(isNewAdd)) &#123;<br>                log.info(<span class="hljs-string">&quot;have no sink for new table,to create a sink&quot;</span>);<br>                LogicalType[] types = &#123;&#125;;<br>                String[] field = &#123;&#125;;<br>                <span class="hljs-type">Properties</span> <span class="hljs-variable">sinkPro</span> <span class="hljs-operator">=</span> getProperties();<br>                <span class="hljs-keyword">if</span> (StringUtils.isNotEmpty(flinkCdcTableInfo.getStrictMode())&amp;&amp;flinkCdcTableInfo.getStrictMode().equals(<span class="hljs-string">&quot;false&quot;</span>))&#123;<br>                    sinkPro.setProperty(<span class="hljs-string">&quot;strict_mode&quot;</span>, <span class="hljs-string">&quot;false&quot;</span>);<br>                    sinkPro.setProperty(<span class="hljs-string">&quot;max_filter_ratio&quot;</span>, <span class="hljs-string">&quot;1&quot;</span>);<br>                &#125;<br>                DorisOptions.<span class="hljs-type">Builder</span> <span class="hljs-variable">option</span> <span class="hljs-operator">=</span> Builder.getBuilder(sinkFe, sinkUsername, sinkPassword);<br>                DorisExecutionOptions.<span class="hljs-type">Builder</span> <span class="hljs-variable">execution</span> <span class="hljs-operator">=</span> Builder.getBuilder();<br>                <span class="hljs-type">Boolean</span> <span class="hljs-variable">exists</span> <span class="hljs-operator">=</span> JdbcUtils.checkDorisExists(dorisTable, flinkHostInfo);<br>                <span class="hljs-keyword">if</span> (exists) &#123;<br>                    DorisDynamicOutputFormatForJson&lt;String&gt; newFormat =<br>                            <span class="hljs-keyword">new</span> <span class="hljs-title class_">DorisDynamicOutputFormatForJson</span>&lt;&gt;(<br>                                    option.setTableIdentifier(dorisTable).build(),<br>                                    DorisReadOptions.defaults(),<br>                                    execution.setStreamLoadProp(sinkPro).build(),<br>                                    types,<br>                                    field);<br>                    <span class="hljs-keyword">if</span> (outputFormatList.containsKey(dbName + <span class="hljs-string">&quot;.&quot;</span> + mysqlTable)) &#123;<br>                        outputFormatList.get(dbName + <span class="hljs-string">&quot;.&quot;</span> + mysqlTable).close();<br>                    &#125;<br>                    outputFormatList.put(dbName + <span class="hljs-string">&quot;.&quot;</span> + mysqlTable, newFormat);<br>                    <span class="hljs-type">RuntimeContext</span> <span class="hljs-variable">ctx</span> <span class="hljs-operator">=</span> getRuntimeContext();<br>                    newFormat.setRuntimeContext(ctx);<br>                    newFormat.open(ctx.getIndexOfThisSubtask(), ctx.getNumberOfParallelSubtasks());<br>                    log.info(<span class="hljs-string">&quot;create new sink format successfully&quot;</span>);<br>                &#125; <span class="hljs-keyword">else</span> &#123;<br>                    log.error(<span class="hljs-string">&quot;not found doris table:&quot;</span> + dorisTable);<br>                &#125;<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                <span class="hljs-comment">//动态关闭StreamLoad</span><br>                <span class="hljs-keyword">if</span> (outputFormatList.containsKey(dbName + <span class="hljs-string">&quot;.&quot;</span> + mysqlTable)) &#123;<br>                    outputFormatList.get(dbName + <span class="hljs-string">&quot;.&quot;</span> + mysqlTable).close();<br>                &#125;<br>                outputFormatList.remove(dbName + <span class="hljs-string">&quot;.&quot;</span> + mysqlTable);<br>            &#125;<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (rowJson.containsKey(<span class="hljs-string">&quot;data&quot;</span>) &amp;&amp; !rowJson.containsKey(<span class="hljs-string">&quot;isNewAdd&quot;</span>)) &#123;<br>            <span class="hljs-type">JSONObject</span> <span class="hljs-variable">data</span> <span class="hljs-operator">=</span> (JSONObject) JSON.parseObject(value.f1).get(<span class="hljs-string">&quot;data&quot;</span>);<br>            <span class="hljs-keyword">if</span> (outputFormatList.get(value.f0) != <span class="hljs-literal">null</span>) &#123;<br>                outputFormatList.get(value.f0).writeRecord(data.toJSONString());<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                <span class="hljs-type">String</span> <span class="hljs-variable">queryDb</span> <span class="hljs-operator">=</span> value.f0.split(<span class="hljs-string">&quot;\\.&quot;</span>)[<span class="hljs-number">0</span>];<br>                <span class="hljs-type">String</span> <span class="hljs-variable">queryTable</span> <span class="hljs-operator">=</span> value.f0.split(<span class="hljs-string">&quot;\\.&quot;</span>)[<span class="hljs-number">1</span>];<br>                <span class="hljs-type">Connection</span> <span class="hljs-variable">jdbcConn</span> <span class="hljs-operator">=</span> JdbcUtils.createJdbcConn(flinkConfTableInfo.getHostname(), flinkConfTableInfo.getPort(), flinkConfTableInfo.getUsername()<br>                        , flinkConfTableInfo.getPassword(), flinkConfTableInfo.getMysqlDb());<br>                <span class="hljs-type">String</span> <span class="hljs-variable">cdcTable</span> <span class="hljs-operator">=</span> flinkConfTableInfo.getMysqlDb() + <span class="hljs-string">&quot;.&quot;</span> + flinkConfTableInfo.getTableInfoTableName();<br>                <span class="hljs-type">FlinkCdcTableInfoBean</span> <span class="hljs-variable">flinkCDCTable</span> <span class="hljs-operator">=</span> JdbcUtils.queryTableByTableName(jdbcConn, cdcTable, id, queryDb, queryTable);<br>                <span class="hljs-keyword">if</span> (flinkCDCTable == <span class="hljs-literal">null</span>) &#123;<br>                    log.error(<span class="hljs-string">&quot;no found table in config cdc table:&quot;</span> + flinkConfTableInfo.getHostname() + <span class="hljs-string">&quot; &quot;</span> + cdcTable);<br>                &#125; <span class="hljs-keyword">else</span> &#123;<br>                    log.info(<span class="hljs-string">&quot;this table found in cdc table , renew sink format!&quot;</span>);<br>                    <span class="hljs-type">String</span> <span class="hljs-variable">dorisTableName</span> <span class="hljs-operator">=</span> flinkHostInfo.getSinkDb() + <span class="hljs-string">&quot;.&quot;</span> + flinkCDCTable.getSinkTableName();<br>                    LogicalType[] types = &#123;&#125;;<br>                    String[] field = &#123;&#125;;<br>                    <span class="hljs-type">Properties</span> <span class="hljs-variable">sinkPro</span> <span class="hljs-operator">=</span> getProperties();<br>                    <span class="hljs-keyword">if</span> (StringUtils.isNotEmpty(flinkCDCTable.getStrictMode())&amp;&amp;flinkCDCTable.getStrictMode().equals(<span class="hljs-string">&quot;false&quot;</span>))&#123;<br>                        sinkPro.setProperty(<span class="hljs-string">&quot;strict_mode&quot;</span>, <span class="hljs-string">&quot;false&quot;</span>);<br>                        sinkPro.setProperty(<span class="hljs-string">&quot;max_filter_ratio&quot;</span>, <span class="hljs-string">&quot;1&quot;</span>);<br>                    &#125;<br>                    DorisOptions.<span class="hljs-type">Builder</span> <span class="hljs-variable">option</span> <span class="hljs-operator">=</span> Builder.getBuilder(sinkFe, sinkUsername, sinkPassword);<br>                    DorisExecutionOptions.<span class="hljs-type">Builder</span> <span class="hljs-variable">execution</span> <span class="hljs-operator">=</span> Builder.getBuilder();<br>                    <span class="hljs-type">Boolean</span> <span class="hljs-variable">exists</span> <span class="hljs-operator">=</span> JdbcUtils.checkDorisExists(dorisTableName, flinkHostInfo);<br>                    <span class="hljs-keyword">if</span> (exists) &#123;<br>                        DorisDynamicOutputFormatForJson&lt;String&gt; newFormat =<br>                                <span class="hljs-keyword">new</span> <span class="hljs-title class_">DorisDynamicOutputFormatForJson</span>&lt;&gt;(<br>                                        option.setTableIdentifier(dorisTableName).build(),<br>                                        DorisReadOptions.defaults(),<br>                                        execution.setStreamLoadProp(sinkPro).build(),<br>                                        types,<br>                                        field);<br>                        outputFormatList.put(queryDb + <span class="hljs-string">&quot;.&quot;</span> + queryTable, newFormat);<br>                        <span class="hljs-type">RuntimeContext</span> <span class="hljs-variable">ctx</span> <span class="hljs-operator">=</span> getRuntimeContext();<br><br>                        newFormat.setRuntimeContext(ctx);<br>                        newFormat.open(ctx.getIndexOfThisSubtask(), ctx.getNumberOfParallelSubtasks());<br>                        log.info(<span class="hljs-string">&quot;create after renew sink format successfully&quot;</span>);<br>                        outputFormatList.get(value.f0).writeRecord(data.toJSONString());<br>                    &#125; <span class="hljs-keyword">else</span> &#123;<br>                        log.error(<span class="hljs-string">&quot;not found doris table:&quot;</span> + dorisTableName);<br>                    &#125;<br>                &#125;<br>            &#125;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            outputFormatList.get(value.f0).writeRecord(value.f1);<br>        &#125;<br><br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">close</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-built_in">super</span>.close();<br>        <span class="hljs-keyword">for</span> (DorisDynamicOutputFormatForJson&lt;String&gt; outputFormat : outputFormatList.values()) &#123;<br>            outputFormat.close();<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">snapshotState</span><span class="hljs-params">(FunctionSnapshotContext functionSnapshotContext)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-keyword">for</span> (DorisDynamicOutputFormatForJson&lt;String&gt; outputFormat : outputFormatList.values()) &#123;<br>            outputFormat.flush();<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">initializeState</span><span class="hljs-params">(FunctionInitializationContext functionInitializationContext)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br><br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Builder</span> &#123;<br><br>        <span class="hljs-keyword">private</span> <span class="hljs-title function_">Builder</span><span class="hljs-params">()</span> &#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalStateException</span>(<span class="hljs-string">&quot;DorisSink Builder class&quot;</span>);<br>        &#125;<br><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> DorisSink <span class="hljs-title function_">build</span><span class="hljs-params">( FlinkHostInfoBean flinkHostInfoBean, List&lt;FlinkCdcTableInfoBean&gt; listCDCTables)</span> &#123;<br>            <span class="hljs-comment">// 配置</span><br>            <span class="hljs-type">String</span> <span class="hljs-variable">sinkFe</span> <span class="hljs-operator">=</span> flinkHostInfoBean.getSinkHostPort();<br>            <span class="hljs-type">String</span> <span class="hljs-variable">sinkUsername</span> <span class="hljs-operator">=</span> flinkHostInfoBean.getSinkUserName();<br>            <span class="hljs-type">String</span> <span class="hljs-variable">sinkPassword</span> <span class="hljs-operator">=</span> flinkHostInfoBean.getSinkPassword();<br><br>            <span class="hljs-comment">// 统一的配置</span><br>            <span class="hljs-type">Properties</span> <span class="hljs-variable">sinkPro</span> <span class="hljs-operator">=</span> getProperties();<br><br>            DorisOptions.<span class="hljs-type">Builder</span> <span class="hljs-variable">option</span> <span class="hljs-operator">=</span> getBuilder(sinkFe, sinkUsername, sinkPassword);<br>            DorisExecutionOptions.<span class="hljs-type">Builder</span> <span class="hljs-variable">execution</span> <span class="hljs-operator">=</span> getBuilder();<br>            LogicalType[] types = &#123;&#125;;<br>            String[] field = &#123;&#125;;<br><br>            HashMap&lt;String, DorisDynamicOutputFormatForJson&lt;String&gt;&gt; outputMaps =<br>                    <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br><br>            <span class="hljs-keyword">for</span> (FlinkCdcTableInfoBean listCDCTable : listCDCTables) &#123;<br>                String dorisTable= listCDCTable.getSinkTableName();<br>                <span class="hljs-keyword">if</span> (StringUtils.isNotEmpty(listCDCTable.getStrictMode())&amp;&amp;listCDCTable.getStrictMode().equals(<span class="hljs-string">&quot;false&quot;</span>))&#123;<br>                    sinkPro.setProperty(<span class="hljs-string">&quot;strict_mode&quot;</span>, <span class="hljs-string">&quot;false&quot;</span>);<br>                    sinkPro.setProperty(<span class="hljs-string">&quot;max_filter_ratio&quot;</span>, <span class="hljs-string">&quot;1&quot;</span>);<br>                &#125;<br>                <span class="hljs-type">Boolean</span> <span class="hljs-variable">exists</span> <span class="hljs-operator">=</span> JdbcUtils.checkDorisExists(flinkHostInfoBean.getSinkDb() + <span class="hljs-string">&quot;.&quot;</span> + dorisTable, flinkHostInfoBean);<br>                <span class="hljs-keyword">if</span> (exists) &#123;<br>                    outputMaps.put(<br>                            listCDCTable.getSourceDb() + <span class="hljs-string">&quot;.&quot;</span> + listCDCTable.getSourceTableName(),<br>                            <span class="hljs-keyword">new</span> <span class="hljs-title class_">DorisDynamicOutputFormatForJson</span>&lt;&gt;(<br>                                    option.setTableIdentifier(flinkHostInfoBean.getSinkDb() + <span class="hljs-string">&quot;.&quot;</span> + dorisTable).build(),<br>                                    DorisReadOptions.defaults(),<br>                                    execution.setStreamLoadProp(sinkPro).build(),<br>                                    types,<br>                                    field));<br>                &#125; <span class="hljs-keyword">else</span> &#123;<br>                    log.error(<span class="hljs-string">&quot;not found doris table:&quot;</span> + flinkHostInfoBean.getSinkDb() + <span class="hljs-string">&quot;.&quot;</span> + dorisTable);<br>                &#125;<br>            &#125;<br>            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DorisSink</span>(outputMaps);<br>        &#125;<br><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> DorisExecutionOptions.Builder <span class="hljs-title function_">getBuilder</span><span class="hljs-params">()</span> &#123;<br>            <span class="hljs-keyword">return</span> DorisExecutionOptions.builder().setMaxRetries(<span class="hljs-number">5</span>).setBatchSize(<span class="hljs-number">50000</span>).setBatchIntervalMs(<span class="hljs-number">20000L</span>);<br>        &#125;<br><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> DorisOptions.Builder <span class="hljs-title function_">getBuilder</span><span class="hljs-params">(</span><br><span class="hljs-params">                String sinkFe, String sinkUsername, String sinkPassword)</span> &#123;<br>            <span class="hljs-keyword">return</span> DorisOptions.builder()<br>                    .setFenodes(sinkFe)<br>                    .setUsername(sinkUsername)<br>                    .setPassword(sinkPassword);<br>        &#125;<br><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Properties <span class="hljs-title function_">getProperties</span><span class="hljs-params">()</span> &#123;<br>            <span class="hljs-type">Properties</span> <span class="hljs-variable">sinkPro</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();<br>            sinkPro.setProperty(<span class="hljs-string">&quot;format&quot;</span>, <span class="hljs-string">&quot;json&quot;</span>);<br>            sinkPro.setProperty(<span class="hljs-string">&quot;strip_outer_array&quot;</span>, <span class="hljs-string">&quot;true&quot;</span>);<br>            sinkPro.setProperty(<span class="hljs-string">&quot;function_column.sequence_col&quot;</span>, <span class="hljs-string">&quot;seq_col&quot;</span>);<br><br>            <span class="hljs-keyword">return</span> sinkPro;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>Flink</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Flink</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>构建大数据知识网络</title>
    <link href="/posts/2023/04/d96898fc.html"/>
    <url>/posts/2023/04/d96898fc.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><h1 id="01-学习方法：建立你的大数据知识网络"><a href="#01-学习方法：建立你的大数据知识网络" class="headerlink" title="01|学习方法：建立你的大数据知识网络"></a>01|学习方法：建立你的大数据知识网络</h1><p>在了解了大数据论文之间的脉络后，接下来，我们就要进入精读论文的学习当中了。不过，在具体解读一篇篇的论文之前，我想先带你来一起看一看，这些大数据论文到底涵盖了哪些知识点，这些知识点又是来自于大数据系统中的哪一个组件。通过梳理这些组件涵盖了什么知识点，你就能更好地理解和掌握大数据领域相关的知识全貌。</p><p>毕竟，相比于某一门计算机课程、某一门编程语言或者某一个开源框架，“大数据”涉及到的知识点多而繁杂。所以这里，我就整理了一份知识地图，好让涉及到的知识点有迹可循。</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20230402224203.png"></p><p>从这张图可以看出，要想了解和学习“大数据”领域的相关知识，我们可以从三个维度来切入。</p><h2 id="1分布式系统"><a href="#1分布式系统" class="headerlink" title="1分布式系统"></a>1分布式系统</h2><p>所有的大数据系统都是分布式系统。我们需要大数据系统，就是因为普通的单机已经无法满足我们期望的性能了。那么作为一个分布式的数据系统，它就需要满足三个特性，也就是可靠性、可扩展性和可维护性。</p><p>第一个，作为一个数据系统，我们需要可靠性。如果只记录一份数据，那么当硬件故障的时候就会遇到丢数据的问题，所以我们需要对数据做复制。而数据复制之后，以哪一份数据为准，又给我们带来了主从架构、多主架构以及无主架构的选择。</p><p>然后，在最常见的主从架构里，我们根据复制过程，可以有同步复制和异步复制之分。同步复制的节点可以作为高可用切换的 Backup Master，而异步复制的节点只适合作为只读的 Shadow Master。</p><p>第二个重要的特性是可扩展性。在“大数据”的场景下，单个节点存不下所有数据，于是就有了数据分区。常见的分区方式有两种，第一种是通过区间进行分片，典型的代表就是 Bigtable，第二种是通过哈希进行分区，在大型分布式系统中常用的是一致性 Hash，典型的代表是 Cassandra。</p><p>最后一点就是整个系统的可维护性。我们需要考虑容错，在硬件出现故障的时候系统仍然能够运作。我们还需要考虑恢复，也就是当系统出现故障的时候，仍能快速恢复到可以使用的状态。而为了确保我们不会因为部分网络的中断导致作出错误的判断，我们就需要利用共识算法，来确保系统中能够对哪个节点正在正常服务作出判断。这也就引出了 CAP 这个所谓的“不可能三角”。</p><p>而分布式系统的核心问题就是 CAP 这个不可能三角，我们需要在一致性、可用性和分区容错性之间做权衡和选择。因此，我们选择的主从架构、复制策略、分片策略，以及容错和恢复方案，都是根据我们实际的应用场景下对于 CAP 进行的权衡和选择。</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20230402224655.png"></p><h2 id="2单节点的存储引擎"><a href="#2单节点的存储引擎" class="headerlink" title="2单节点的存储引擎"></a>2单节点的存储引擎</h2><p>然而，即使是上万台的分布式集群，最终还是要落到每一台单个服务器上完成数据的读写。那么在存储引擎上，关键的技术点主要包括三个部分。</p><p>第一个是事务。在写入数据的时候，我们需要保障写入的数据是原子的、完整的。在传统的数据库领域，我们有 ACID 这样的事务特性，也就是原子性（Atomic）、一致性（Consistency）、隔离性（Isolation）以及持久性（Durability）。而在大数据领域，很多时候因为分布式的存在，我们常常会退化到一个叫做 BASE 的模型。BASE 代表着基本可用（Basically Available）、软状态（Soft State）以及最终一致性（Eventually Consistent）</p><p>不过无论是 ACID 还是 BASE，在单机上，我们都会使用预写日志（WAL）、快照（Snapshot）和检查点（Checkpoints）以及写时复制（Copy-on-Write）这些技术，来保障数据在单个节点的写入是原子的。而只要写入的数据记录是在单个分片上，我们就可以保障数据写入的事务性，所以我们很容易可以做到单行事务，或者是进一步的实体组（Entity Group）层面的事务。</p><p>第二个是底层的数据是如何写入和存储的。这个既要考虑到计算机硬件的特性，比如数据的顺序读写比随机读写快，在内存上读写比硬盘上快；也要考虑到我们在算法和数据结构中的时空复杂度，比如 Hash 表的时间复杂度是 O(1)，B+ 树的时间复杂度是 O(logN)。</p><p>这样，通过结合硬件性能、数据结构和算法特性，我们会看到分布式数据库最常使用的，其实是基于 LSM 树（Log-Structured Merge Tree）的 MemTable+SSTable 的解决方案。</p><p>第三个则是数据的序列化问题。出于存储空间和兼容性的考虑，我们会选用 Thrift 这样的二进制序列化方案。而为了在分析数据的时候尽量减少硬盘吞吐量，我们则要研究 Parquet 或者 ORCFile 这样的列存储格式。然后，为了在 CPU、网络和硬盘的使用上取得平衡，我们又会选择 Snappy 或者 LZO 这样的快速压缩算法。</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20230402224814.png"></p><h2 id="3计算引擎"><a href="#3计算引擎" class="headerlink" title="3计算引擎"></a>3计算引擎</h2><p>这个维度实际上也是大数据领域本身进化和迭代最快的一部分。为什么会这么说呢？让我们来一起捋一下大数据处理引擎的进化过程：</p><ul><li>我们先有了最原始粗糙的 MapReduce 来进行批数据处理，然后围绕它不断迭代出了让数据处理更快的 Spark 和让数据处理更容易的各种 DSL（比如 Sawzall&#x2F;Pig 和 Hive）。</li><li>然后我们围绕着实时数据处理，有了“最少一次”的 S4&#x2F;Storm，并把它和批处理综合到一起，产生了著名的 Lambda 架构。</li><li>紧接着有了“以批为流”，通过 Mini-Batch 来进行实时数据处理的 Spark Streaming，以及“流批一体”，能够做到“正好一次”的 Kafka 和 Kappa 结构</li><li>最后，还是 Google 一锤定音，给出了统一的 Dataflow 模型，并伴随着有了 Apache Flink 和 Apache Beam 这两个开源项目。</li></ul><p>分布式问题，往往脱胎于少量经典论文的算法证明；单节点的存储引擎，也是一个自计算机诞生起就被反复研究的问题，这两者其实往往是经典论文的再现。但是在上千个服务器上的计算引擎应该怎么做，则是一个巨大的工程实践问题，我们没有太多可以借鉴的经验。这也是为什么计算引擎的迭代和变化是最大的。</p><p>不过随着 Dataflow 论文的发表，我们可以看到整个大数据的处理引擎，逐渐收敛成了一个统一的模型，大数据领域发展也算有了一个里程碑。</p><h2 id="4调度系统和综合应用"><a href="#4调度系统和综合应用" class="headerlink" title="4调度系统和综合应用"></a>4调度系统和综合应用</h2><p>总结来说，分布式系统、存储引擎和计算引擎就共同构成了大数据的核心技术。更进一步，随着多种分布式系统的混排，又产生了 Kubernetes 这样的资源管理和调度系统。而所有的这些技术之间，都不是各自独立，而是相互关联的。</p><p>大数据技术其实是计算机科学中很多科目的综合应用。在上面的知识地图里，我们可以看到在单节点上的存储引擎，就是要综合考虑组成原理、算法和数据结构以及数据库原理相关的知识。而序列化和压缩，前者是组成原理里的二进制编码问题，后者则脱胎于算法和数据结构中的赫夫曼树和赫夫曼编码。</p><p>另外，最终选择什么算法做压缩，又要回到组成原理中，对于 CPU、网络以及硬盘的硬件性能进行平衡和考量。而针对分布式事务，我们一方面需要理解单机下的数据库事务，另一方面需要理解分布式环境下的 CAP 不可能三角。只有这样，我们才能对于 Paxos 以及 Raft 这些共识算法有深入的理解。</p><p>而当我们要优化海量数据的分析效率，需要修改的反而是单节点存储引擎，因为只有通过列式存储，我们才能优化海量数据分析中的瓶颈：读取硬盘数据的 IO</p><p>因此，从我的认知来看，大数据系统的知识点不是一棵树，而是一张网。当你学明白了整个大数据系统的知识点和原理之后，自然就有了深厚的计算机科学和工程的功底。它能给你一种，“天下虽大，何处去不得”的信心。</p><h2 id="精读论文学知识，诀窍在哪里？"><a href="#精读论文学知识，诀窍在哪里？" class="headerlink" title="精读论文学知识，诀窍在哪里？"></a>精读论文学知识，诀窍在哪里？</h2><p>不过，即使有了这张大数据知识地图之后，你或许还会遇到一些难题，比如说，面对这些相对分散和全面的知识点，是学习大数据论文的第一层挑战。而论文本身往往也很精炼，则是学习过程中的第二层挑战。</p><p><strong>首先，是从第一性原理出发，尝试自己去设计系统和解决问题。</strong></p><p>一篇篇的大数据论文，并不是教科书里的一个章节或者一个知识点，而是对于一个重要的系统问题的解决方案。在读论文之前，先尝试自己去思考和解决对应的问题，有助于你更深刻地理解问题和解决方案的重点。</p><p>比如，在学习 Megastore 的论文之前，你可以问一问自己下面这两个问题：</p><ul><li>如果要在 Bigtable 上为数据表加上 Schema，我该怎么做？</li><li>如果我希望能够在 Bigtable 上，支持跨行事务，可以从哪里起步？</li></ul><p>无论你自己的思考和答案是否正确，带着你对问题的思考和方案去读论文，你的收获一定比囫囵吞枣地读一遍要多得多。</p><p><strong>其次，是多做交叉阅读和扩展阅读。</strong></p><p>论文本身往往只有 10 来页，非常精炼，对于很多知识点，往往就只有一个小片段，甚至只有一两句话，所以交叉阅读和扩展阅读少不了。根据你需要深入了解的知识点，你可能要回顾之前已经解读过的论文，也可能需要去阅读一些开源项目的代码，或者是一些计算机经典书籍中相关的章节，帮你彻底理解对应的问题。</p><p>比如，学习 Bigtable 论文的时候，论文里只告诉你底层的数据存储是 SSTable。而通过学习 LSM 树，或者是去读一下 LevelDB 的源码，你不仅可以理解 SSTable 的底层实现。还能帮助你深入理解针对硬件性能去设计数据结构，乃至系统中特定的组件。当然，我在课程的讲解中，也会给你推荐一系列的扩展阅读资料，帮助你找到更多的学习线索。</p><p><strong>最后，是给自己制定一个明确的学习目标，然后围绕学习目标，进行泛读和精读、理论和实践的结合。</strong></p><p>如果你的工作就是开发和维护大数据系统中的某个项目，比如 HBase、Flink，那么你就精读对应的论文，泛读其他的相关论文，并对于你所关心的项目源码进行深入挖掘。搞清楚每一个设计背后选择的根本原因，搞清楚它为什么这么设计。</p><p>如果你原先是做后端应用开发，想要学习大数据知识，转向大数据领域的开发。那么，搞清楚每篇论文和每个系统的应用场景，尝试通过 Google Cloud 或者其他的云系统，多尝试用一用这些大数据系统，会更有帮助。</p><p>如果你就是想要提升自己的理论知识和架构能力，那么我建议你放慢节奏。搞清楚论文里每一个关键设计点的原理，尽量多阅读我给到的推荐阅读材料。甚至你不妨可以动手试一试，去实现其中的一些算法和组件，这是最有效的办法。</p><h1 id="02-｜什么是大数据：从GFS到Dataflow，12年大数据生态演化图"><a href="#02-｜什么是大数据：从GFS到Dataflow，12年大数据生态演化图" class="headerlink" title="02 ｜什么是大数据：从GFS到Dataflow，12年大数据生态演化图"></a>02 ｜什么是大数据：从GFS到Dataflow，12年大数据生态演化图</h1><p>论文的前后之间的脉络联系</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20230402225547.png"></p><p>论文索引</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20230402225725.png"></p><p>还有许许多多值得一读的论文，比如针对 Bigtable，你就可以还去读一下 Cassandra 和 Dynamo，这样思路略有不同的分布式数据的论文；针对 Borg 和 Kubernetes，你可以去看看 Mesos 这个调度系统的论文又是什么样的。网上更有“开源大数据架构的 100 篇论文”这样的文章，如果你想深耕大数据领域，也可以有选择地多读一些其中的论文。</p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>大数据</category>
      
    </categories>
    
    
    <tags>
      
      <tag>大数据</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hive编写UDF函数</title>
    <link href="/posts/2023/03/20ebace3.html"/>
    <url>/posts/2023/03/20ebace3.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><p>Hive的内置函数无法满足业务需求时，就可以考虑使用用户自定义函数（UDF：user-defined function）</p><p>根据用户自定义的函数类别可以分为以下三种：</p><p><strong>1.UDF(User-Defined-Function) 一进一出</strong></p><p>UDF操作作用于单个数据行，并且产生一个数据行作为输出。大多数函数都属于这一类（比如数学函数和字符串函数）。</p><p><strong>2.UDAF（User-Defined Aggregation Function） 聚集函数，多进一出 类似于:count&#x2F;max&#x2F;min</strong></p><p>UDAF 接受多个输入数据行，并产生一个输出数据行。像COUNT和MAX这样的函数就是聚集函数。</p><p><strong>3.UDTF（User-Defined Table-Generating Functions） 一进多出</strong></p><p>UDTF 操作作用于单个数据行，并且产生多个数据行——-一个表作为输出。lateral view explore()</p><p>简单来说：</p><p>UDF:返回对应值，一对一</p><p>UDAF：返回聚类值，多对一</p><p>UDTF：返回拆分值，一对多</p><h3 id="UDF"><a href="#UDF" class="headerlink" title="UDF"></a>UDF</h3><p>1、UDF函数可以直接应用于select语句，对查询结构做格式化处理后，再输出内容。</p><p>2、编写UDF函数的时候需要注意一下几点：</p><p>　　a）自定义UDF需要继承org.apache.hadoop.hive.ql.UDF。</p><p>　　b）需要实现evaluate函数，evaluate函数支持重载。</p><p>　　例：写一个返回字符串长度的Demo:</p><pre><code class="hljs">  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> org.apache.hadoop.hive.ql.exec.UDF;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GetLength</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">UDF</span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">evaluate</span><span class="hljs-params">(String str)</span> &#123;<br>        <span class="hljs-keyword">try</span>&#123;<br>            <span class="hljs-keyword">return</span> str.length();<br>        &#125;<span class="hljs-keyword">catch</span>(Exception e)&#123;<br>            <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></code></pre><p>3、步骤</p><p>a）把程序打包放到目标机器上去；</p><p>将打包好的jar包拖到hive安装目录下的lib目录当中</p><p>b）进入hive客户端，添加jar包：</p><p><code>hive&gt; add jar /root/hive_udf.jar</code></p><p>c）创建临时函数：</p><p><code>hive&gt; create temporary function getLen as &#39;com.raphael.len.GetLength&#39;;</code></p><p>d）查询HQL语句：</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">hive&gt; <span class="hljs-keyword">select</span> getLen(<span class="hljs-keyword">info</span>) <span class="hljs-keyword">from</span> apachelog;<br>OK<br><span class="hljs-number">60</span><br><span class="hljs-number">29</span><br><span class="hljs-number">87</span><br><span class="hljs-number">102</span><br><span class="hljs-number">69</span><br><span class="hljs-number">60</span><br><span class="hljs-number">67</span><br><span class="hljs-number">79</span><br><span class="hljs-number">66</span><br><span class="hljs-type">Time</span> taken: <span class="hljs-number">0.072</span> seconds, Fetched: <span class="hljs-number">9</span> <span class="hljs-keyword">row</span>(s)<br></code></pre></td></tr></table></figure><p>e）销毁临时函数：</p><p><code>hive&gt; DROP TEMPORARY FUNCTION getLen;</code></p><h3 id="UDAF"><a href="#UDAF" class="headerlink" title="UDAF"></a>UDAF</h3><p>多行进一行出，如sum()、min()，用在group by时</p><p>1.必须继承</p><p>org.apache.hadoop.hive.ql.exec.UDAF(函数类继承)</p><p>org.apache.hadoop.hive.ql.exec.UDAFEvaluator(内部类Evaluator实现UDAFEvaluator接口)</p><p>2.Evaluator需要实现 init、iterate、terminatePartial、merge、terminate这几个函数</p><p>　　init():类似于构造函数，用于UDAF的初始化,实现接口UDAFEvaluator的init函数</p><p>　　iterate():接收传入的参数，并进行内部的轮转，返回boolean</p><p>　　terminatePartial():无参数，其为iterate函数轮转结束后，返回轮转数据，类似于hadoop的Combiner</p><p>　　merge():接收terminatePartial的返回结果，进行数据merge操作，其返回类型为boolean</p><p>　　terminate():返回最终的聚集函数结果</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> hive.udaf;<br><span class="hljs-keyword">import</span> org.apache.hadoop.hive.ql.exec.UDAF;<br><span class="hljs-keyword">import</span> org.apache.hadoop.hive.ql.exec.UDAFEvaluator;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Avg</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">UDAF</span> &#123;<br>         <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AvgState</span> &#123;<br>         <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> mCount;<br>         <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> mSum;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AvgEvaluator</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UDAFEvaluator</span> &#123;<br>         AvgState state;<br>         <span class="hljs-keyword">public</span> <span class="hljs-title function_">AvgEvaluator</span><span class="hljs-params">()</span> &#123;<br>                   <span class="hljs-built_in">super</span>();<br>                   state = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AvgState</span>();<br>                   init();<br>&#125;<br><span class="hljs-comment">/** * init函数类似于构造函数，用于UDAF的初始化 */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">()</span> &#123;<br>         state.mSum = <span class="hljs-number">0</span>;<br>         state.mCount = <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-comment">/** * iterate接收传入的参数，并进行内部的轮转。其返回类型为boolean * * <span class="hljs-doctag">@param</span> o * <span class="hljs-doctag">@return</span> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">iterate</span><span class="hljs-params">(Double o)</span> &#123;<br>         <span class="hljs-keyword">if</span> (o != <span class="hljs-literal">null</span>) &#123;<br>                   state.mSum += o;<br>                   state.mCount++;<br>         &#125; <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>&#125;<br><br><span class="hljs-comment">/** * terminatePartial无参数，其为iterate函数轮转结束后，返回轮转数据， * terminatePartial类似于hadoop的Combiner * * <span class="hljs-doctag">@return</span> */</span><br><span class="hljs-keyword">public</span> AvgState <span class="hljs-title function_">terminatePartial</span><span class="hljs-params">()</span> &#123;<br>         <span class="hljs-comment">// combiner</span><br>         <span class="hljs-keyword">return</span> state.mCount == <span class="hljs-number">0</span> ? <span class="hljs-literal">null</span> : state;<br><br>&#125;<br><br><span class="hljs-comment">/** * merge接收terminatePartial的返回结果，进行数据merge操作，其返回类型为boolean * * <span class="hljs-doctag">@param</span> o * <span class="hljs-doctag">@return</span> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">terminatePartial</span><span class="hljs-params">(Double o)</span> &#123;                <br>         <span class="hljs-keyword">if</span> (o != <span class="hljs-literal">null</span>) &#123;<br>                   state.mCount += o.mCount;<br>                   state.mSum += o.mSum;<br>         &#125;<br>         <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>&#125;<br><span class="hljs-comment">/** * terminate返回最终的聚集函数结果 * * <span class="hljs-doctag">@return</span> */</span><br><span class="hljs-keyword">public</span> Double <span class="hljs-title function_">terminate</span><span class="hljs-params">()</span> &#123;<br>         <span class="hljs-keyword">return</span> state.mCount == <span class="hljs-number">0</span> ? <span class="hljs-literal">null</span> : Double.valueOf(state.mSum / state.mCount);<br><br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>3.执行求平均数函数的步骤</p><p>a）将java文件编译成Avg_test.jar。</p><p>b）进入hive客户端添加jar包：</p><p><code>hive&gt;add jar /run/jar/Avg_test.jar</code></p><p>c）创建临时函数：</p><p><code>hive&gt;create temporary function avg_test &#39;hive.udaf.Avg&#39;;</code></p><p>d）查询语句：</p><p><code>hive&gt;select avg_test(scores.math) from scores;</code></p><p>e）销毁临时函数：</p><p><code>hive&gt;drop temporary function avg_test;</code></p><p>4.总结</p><p>1、重载evaluate函数。<br>2、UDF函数中参数类型可以为Writable，也可为java中的基本数据对象。<br>3、UDF支持变长的参数。<br>4、Hive支持隐式类型转换。<br>5、客户端退出时，创建的临时函数自动销毁。<br>6、evaluate函数必须要返回类型值，空的话返回null，不能为void类型。<br>7、UDF是基于单条记录的列进行的计算操作，而UDFA则是用户自定义的聚类函数，是基于表的所有记录进行的计算操作。<br>8、UDF和UDAF都可以重载。<br>9、查看函数<br>SHOW FUNCTIONS;</p><h3 id="UDTF"><a href="#UDTF" class="headerlink" title="UDTF"></a>UDTF</h3><p>UDTF(User-Defined Table-Generating Functions) 用来解决 输入一行输出多行(On-to-many maping) 的需求</p><p>1.继承org.apache.hadoop.hive.ql.udf.generic.GenericUDTF,实现initialize, process, close三个方法。</p><p>UDTF首先会调用initialize方法，此方法返回UDTF的返回行的信息（返回个数，类型）。</p><p>初始化完成后，会调用process方法,真正的处理过程在process函数中，在process中，每一次forward()调用产生一行；如果产生多列可以将多个列的值放在一个数组中，然后将该数组传入到forward()函数。</p><p>最后close()方法调用，对需要清理的方法进行清理。</p><p>2.下面是一个用来切分”key:value;key:value;”这种字符串，返回结果为key, value两个字段。供参考：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.ArrayList;<br><br> <span class="hljs-keyword">import</span> org.apache.hadoop.hive.ql.udf.generic.GenericUDTF;<br> <span class="hljs-keyword">import</span> org.apache.hadoop.hive.ql.exec.UDFArgumentException;<br> <span class="hljs-keyword">import</span> org.apache.hadoop.hive.ql.exec.UDFArgumentLengthException;<br> <span class="hljs-keyword">import</span> org.apache.hadoop.hive.ql.metadata.HiveException;<br> <span class="hljs-keyword">import</span> org.apache.hadoop.hive.serde2.objectinspector.ObjectInspector;<br> <span class="hljs-keyword">import</span> org.apache.hadoop.hive.serde2.objectinspector.ObjectInspectorFactory;<br> <span class="hljs-keyword">import</span> org.apache.hadoop.hive.serde2.objectinspector.StructObjectInspector;<br> <span class="hljs-keyword">import</span> org.apache.hadoop.hive.serde2.objectinspector.primitive.PrimitiveObjectInspectorFactory;<br><br> <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ExplodeMap</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">GenericUDTF</span>&#123;<br><br>     <span class="hljs-meta">@Override</span><br>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">close</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> HiveException &#123;<br>         <span class="hljs-comment">// TODO Auto-generated method stub    </span><br>     &#125;<br><br>     <span class="hljs-meta">@Override</span><br>     <span class="hljs-keyword">public</span> StructObjectInspector <span class="hljs-title function_">initialize</span><span class="hljs-params">(ObjectInspector[] args)</span><br>             <span class="hljs-keyword">throws</span> UDFArgumentException &#123;<br>         <span class="hljs-keyword">if</span> (args.length != <span class="hljs-number">1</span>) &#123;<br>             <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UDFArgumentLengthException</span>(<span class="hljs-string">&quot;ExplodeMap takes only one argument&quot;</span>);<br>         &#125;<br>         <span class="hljs-keyword">if</span> (args[<span class="hljs-number">0</span>].getCategory() != ObjectInspector.Category.PRIMITIVE) &#123;<br>             <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UDFArgumentException</span>(<span class="hljs-string">&quot;ExplodeMap takes string as a parameter&quot;</span>);<br>         &#125;<br><br>         ArrayList&lt;String&gt; fieldNames = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;String&gt;();<br>         ArrayList&lt;ObjectInspector&gt; fieldOIs = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;ObjectInspector&gt;();<br>         fieldNames.add(<span class="hljs-string">&quot;col1&quot;</span>);<br>         fieldOIs.add(PrimitiveObjectInspectorFactory.javaStringObjectInspector);<br>         fieldNames.add(<span class="hljs-string">&quot;col2&quot;</span>);<br>         fieldOIs.add(PrimitiveObjectInspectorFactory.javaStringObjectInspector);<br><br>         <span class="hljs-keyword">return</span> ObjectInspectorFactory.getStandardStructObjectInspector(fieldNames,fieldOIs);<br>     &#125;<br><br>     <span class="hljs-meta">@Override</span><br>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">process</span><span class="hljs-params">(Object[] args)</span> <span class="hljs-keyword">throws</span> HiveException &#123;<br>         <span class="hljs-type">String</span> <span class="hljs-variable">input</span> <span class="hljs-operator">=</span> args[<span class="hljs-number">0</span>].toString();<br>         String[] test = input.split(<span class="hljs-string">&quot;;&quot;</span>);<br>         <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>; i&lt;test.length; i++) &#123;<br>             <span class="hljs-keyword">try</span> &#123;<br>                 String[] result = test[i].split(<span class="hljs-string">&quot;:&quot;</span>);<br>                 forward(result);<br>             &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>                 <span class="hljs-keyword">continue</span>;<br>             &#125;<br>         &#125;<br>     &#125;<br> &#125;<br></code></pre></td></tr></table></figure><p>3.使用方法</p><p>UDTF有两种使用方法，一种直接放到select后面，一种和lateral view一起使用。</p><p>(1)直接select中使用</p><p><code>select explode_map(properties) as (col1,col2) from src;</code></p><p>不可以添加其他字段使用</p><p><code>select a, explode_map(properties) as (col1,col2) from src</code></p><p>不可以嵌套调用</p><p><code>select explode_map(explode_map(properties)) from src</code></p><p>不可以和group by&#x2F;cluster by&#x2F;distribute by&#x2F;sort by一起使用</p><p><code>select explode_map(properties) as (col1,col2) from src group by col1, col2</code></p><p>(2)和lateral view一起使用</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">select</span> src.id, mytable.col1, mytable.col2 <span class="hljs-keyword">from</span> src <span class="hljs-keyword">lateral</span> <span class="hljs-keyword">view</span> explode_map(properties) mytable <span class="hljs-keyword">as</span> col1, col2;<br></code></pre></td></tr></table></figure><p>此方法更为方便日常使用。执行过程相当于单独执行了两次抽取，然后union到一个表里。</p><p>参考：</p><p><a href="https://blog.csdn.net/weixin_43586713/article/details/120830699">https://blog.csdn.net/weixin_43586713/article/details/120830699</a></p><p><a href="https://cxymm.net/article/hzp666/117901418">https://cxymm.net/article/hzp666/117901418</a></p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>大数据</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Hive</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>基于Doris的数据血缘设计方案和实现</title>
    <link href="/posts/2023/03/c301f6b6.html"/>
    <url>/posts/2023/03/c301f6b6.html</url>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="8b863a7cf5c7f44deb0b1e5fa84cc563d5bbf61d365698f1d6cc402421157576">0a7e00277d1118ebcbb3ab2eced6aaa30ecf553a34266b37d769487fc2cfe35da253122506bca9b64ebf4ebb69c9c1848024d2f63b4f97d70c679d2d4dfefda061c11378a2f78901e357e205208962b748060a44ddb703c72a0f4bf14a976f91eba21d6a0bb5ecb52f5c05a7ae3bac477c318e5244ddb09ee6c0a200df9f65784bda4a91017ef27dd5d6fbc1271640f29636f6f01e2732e1cc09c50a026966fcbab0089d3b5ad2e1bc9093a7df1c72ef24144cc6df888cccdac9667f8c5184e5f845a93b33c676f661ed0b95d1b2bcebc6c09d91c10b2a91e3242878eb15ae3125b4a80ba5ce54fcc597afacafb858a227eb04b1560786014496b7b4e242dc61ff899cf43e37138c31e592f12879f9782daa6ad804be4d733037740c1dbb71a03fe1a7ed3fcfe1f1b8116243cd2d2ce4ad53c0515d3ca1203e8b7c4f72f68dfa1b40eb1e10e6da31d8bdfb582d2e211ea7b4f2637262497e260d9dbb5a04685a5a99110f5bd43773125924057dc34d0f0908c11e47053976ad53fb011972de9e01a0d0c1fa0f551119b5cbefaf4990902c05543bc1258c33f7b9caa244a728972789996f78c9b76b9027badcff1e294c8e08291674086324662964a88447af39e7604c870ad255ec8c7813e326ea8c1115e6bb5e1e6df4fcf35b14ead119aa6675e222f1726341bcec199cfe39445b73d6f30a7a463944977b2e3aaca04f7552f6fe0abab096677ceb255032e8f9f5fcfde0b7a4350d3a79223345ee1096c739c3f3578df94bbd962fcb2fe422d3565d8ccfb68b1ac700e0623708216074019b9c6fc66b35a0089aa6c707407adb7662dcae13adb99efa5dad89b4f70985570aaddcb68de1025195f0e5cc50b617a729c97e19133606c420421f518f6772d79d804ae4db17fcda45735e0cf22e74630668101f9333cae35f754bd2c7ef0d82e363c3970062a62c4160b0610369e395016a42792dfb7dba95aaecf7f7c68e848bbc8df54346e96a407f790b186d702a82b43797c4ddf9efb3e868d0d01b98cccecc593797f3db41e525325ace11db0a127f147ffa16129505c7869b3bfe50858a3fd724c7a9ffe9d6bc94d0d26b521a0b64819eef64883dd35ba6ad2fcff2c204b227ac113bc3da5d8fcd93abbed8db10152f56bf07df47dc9930a1ce3afd95f962b9a3868e31369432d6adf29a37fce0fe16b8492dc2a94c9e0b824ddde2a57c14ef377be941d9bfb27ba63c7933c2190e0c9280bc0c4f50a233ae51855d5e6c86d49c2d8ad13fbbe506c42021082e16241950df572cdda53066505ab5a88725a3ef0e66255eba04d9e7083620e63716d6afd1802d465bc7ae6f41339f47c3cbfe90d5ab3809226a2f8891f17a6b994c51085aa57c0210a31442497b1d46aeab87686bd00f1c69eeb0d4a8598b0c21c8164cb2d00498ff7ffca8d8a19e56585d70d74f7dff3c606dc9ea504fe11e12b7f92eed31a9fc32475ae6f3f3f4e7c165bafbec9bb3b51b71322248257327dabd37fcb2a297858ae78a6a930d1511684f4e285b1a0acf0c43ade5928f953a28eff3cb74afd2e7fe1ad71dd7763c3a88b6b38b49838238259f6460ac9ec89c997b22649e46a2ebb3f505262d07cf6b8a889ac5bf6a3039a41ed06c2529c09c7ccf190be779632b0084329a926a87a814a3d478be5a2d959abbd3087f7fad7b302721f20601c2d6354ffb20cebbb77587fc97847850b0aeb19f49dd6c514964f6b1e024726e786c602ffaa44f687df39dbc53a20e7e20919594e54108f611062813ca411b692a3e4d18bbbe452cd125360573b7cd6ef525fac5ab92bcbc6b5da09044d5affc5fd934dc68418558f02ed28df85df55bf6eae086946d2cd459ee1acae67fd96a9ccc3a20da4f0e962a0d02bb8bc265ef49e26a9980e511f66855802ab8991e4ca2c9d6bf4fd33b10dc9e58eb085f0196a963aefcdfe5ddee07659cd125228821145b15d7e85873990dee88a3b9063f27fa8b3d732a25317ff7420551932bb7febcc562c7d3babe1c4812c2f2f7acd93f87a2ddeeeece167dc4b4e9f2bbca4ab071e705bceb8b4b92eb8832d41a928672fb1ba7bd17ae513b02f7c30262916617e20fba34ac5a3d157ff984e5dd4219af425cd55d723f90fc43c8a4c893b9ef3df5e47b1031a503fc0299a27d13af88c3930c707eef29e7ebff0b2d7c2340bfe9125687aee0491820e8bc404be52c39fe75ffffa801bb84100e9a0a7acd066c7aae3dcaf77704de1a14e56e2850005c60458f493b403e1af96ff28befdf5672940b1ee7cd06bf93a976e8daa6b7f6fcbe84c5c413d7b8d1bdc8f430b44b5ec38d59b6b499fd7ea4d9c42658ff24a4ab35541a2abaceecd97f2d6250a45d5caade2ff22eeabd167ca8c306a1271d223a90c12bbcae1ff4826fe9acd351d722a8df44d82628bf9317dd24906da4596e3aff3e7558825a4d445a2ae5db3eb1c62c6871d9c51358ba51cf00c883bd58d9e8ee4d2f452082dceb78e88d20af0caa7a07a3295f304ed575d41c6704d5e92021783b8a41eeda74633b2ab767e107ebd1f2cfdf5c31347a2fcd9fc6a9778c7c80f8c93c6e73ac6ae6eb5f69f38a55dbcf23818dad55f88addf4b5270c1d423464da05e493e61f4630f056a98ea8302e38f455b37281a1c7e0bf8e0a948d11444e4ce66295f142565b738e9caef254c14bd48030a751b36601598a28ffd245d4b5d907a6cfc92dfe5f63703d74362523f68f3d4f344b7df35ce71fdb576fae5ed983040c7b44d34c09d0a0d25b3691a070874458ecf9cc880b9dd65fd4abcdc0b68bc4539ed31b74dab6e9ff7f8dc71cb38652b859cbdd08a7472b420b90fcd1b3f0c5c36fe984911edda9537d50b77e97b04a0072c4bdc8898998e604b0ee4d537177f190ce1d2cda7e692f7873163146f4e52b3f2584f18cd73bfdf192ed5884a3a326e65b1ef7e9d0b4232417dc6d71dbfb2deaa1763801cc36697ff75f8b4fc17557caac84c9f0eaea065d0d8351f88a9e414bd8bc6ff7af6f962e6b75ed2d91729a3d16675cbd05051f3a2963fe93411fc3afb2fff93300a3cd79f2924ecfa4584a154d13b0430090afa2db4bdcfce3fc18e035bf8f6c3717abe03da5252faeba972863b6e656910a3da1b995a959aaa95b00c8d2dde1bb1ccba6fc4c7456e8a76b0a613bf50cb1ea719c561014c5fb534484bfe04adb0e44b8f0c1058abb40253ec4ab2027ca484dd59c926f69f163438e17b363b8d739dd68df688540175d8c5111b9129e804d02d73f042f0d4ab142c7ece9239ac0c9f303ad94e3811fc51f31e306cd3e4f8401ead5f5a0e9443df98c90e418e46b438d5e2f3c715971877a9d6061324feeb395c8ac6c2612b38c10b802141c093556ee68d785e6d4ac29b27698da6713d949fbec9f5daf267c3ae6846bbf2fd2292515d1a1fd4b488ff7964bdc47bc663298f8a8df6ba0db0c30a8b258e4ee78a1586cf5b36eb7e03a42cb4c730a19bb6246826c718eba434cfce23a939eefb5cc151b9a2d2d64c0df2f83cacdf6f1949b6db73792981d734a08442f754e6372f016eba241e6359a990475e95fbacfb7faa1ff6b9bc3fcda802b505e405822bf2fbee720f0a3211f4ef7656182362396da705dedafb8edbc5c4f37c55abd3902b3e55471641c21397f2034fa8f20e521b4b41fc5d005dfd6133bff46a46393b62e61a3f6f8adb4c26daca58eb5ecdafba519eb890373e37c42bb8c9cfefd1ab1319591cc3582ceac10670a9ba2ff9cc80b38b7ca636554c6d5dbd2c5651c4e915e8f0a543b1f21b146d54d11cc2dea8cd1efa72b808e6937d4e02305610946461875c1f0a5a78c7aba33ed884b2719e66fe8ee9cbb78b9c4d55d64bf67bebf8726ad902c4f48d49c30bc2705770de8d8e270c90d9b53968864b9a3c8a13a904b77d805d69676b766219b4d85d62fd33d24282e3d71e1007ef08ede1630a6b4540722425af370d653a6d99509d21820915ea5615b406a899d484e930f24e925257fa8411119ab7047f16784d26d5ad427478543646de491cac74a5b4ab21d7aa124d613dfc8f77d2e4ac2caf9670498608a11c78d7803cb1323d66985f6ceaed82e6b9c36e26e67c8226a8ca248d7468e3cbf800e7935b590573fcebbbd9e9fb6f3c3e3c0dae4fd17a6fa95e6a831c005d2b18f01c1e6f634a95b48df0a38fda608d172bb662ebf3a8a9172ce94897e34fada9a41f3a35d9a8d19aab141fd9b862197d7f4e22c40f13a2f4d29ab831355ae8750085c2e3bd646717cd21c0df6d817ccc0bf22455031d5a7f2ac31eefe940453777b9ed45e3aa0bfde077cb11e494ebf33a05dae29af9ea539577be24d7d1d8a75ae5d065d2658aa3000ad282a20e086122486c5e6af13a9ed61859bf41994595ff58996f440bcfe15414b2b5af1dc9e70b98d98f18b9d95a332d6214675550e41f696cf4f533662c792501febf4bd39e375a341e5db0462827ee647e148496ea2292960179d05d180364a1aef5cf3e4704e496fc8ee6406875921943b3b6398d90aa2f09ca5e35da94802cc888d0332081af1db2e0a5374adb13fe8eea8587320bd13fba140e4426b2597aa7180af97964cea3f6ee4496a3a000b4fe9dc86e4cc0bdbc3621600be36365b405b82d0140b837a866fec139a327fda6f42ddab0ab1ca6af5f8664513b054a8a91a23913d9a38d1ac72cf98dceca66355bd9dadb174f4bf7383083ce24cdcf12edee8382eed8f487566348292dc9986b70c3dd928e8e090f2bfbe1d5a0b3dcc37183b5036b3e08552b633d1d403d4d85526d691d1e7ab26237b74114a73afa70730f08c7ded2af7e32d1907ed29d3628f1706391b277533e4503e2f489a8af0046a2dfb022bf3e11023cc608be41cda2eb8ba9078e4e4bbe642424508faf8f2ce8cd11f0edcd38d870f0779e14c8904459e1f8528df6a622e80c2d99a966c3eec5a0f4d5d683ab11cc5b74c345b49385bb8e98a545a4b231d2319793ef88a166bfd43b0b5d16b3a324bace2b0af7f434f2962807b42c7ac378289f4e563abbf56c6a4df6d4f4035d945a3cdc4e35bb668548b5af6fa362c73d77298848e9fa7f4f81d1435bc73765ba499cf157c29408a224aae048426ef903ff7bee08c9df19d7afb9498b245dbd9f93fed1b4b589ce4230f56e913a8b2f1bdff5026ca38be17c5ac6b64d4d4697578ba7dcb4bd8b84de190fb84b5f0a7fd53002c02fd17b465323f736f7a03f8b0e9ed9d55c7833b6cf49f8501014a8480f2cb9b029bf5b6f1a5fd72365e9dbe09bfc74337d87a1e9b40f37ab731a3b89542d2e9c01fa382d6035f0e45ea9ec542786b7baab90e51e5d10ccba989fa30233d67161427dec9839545d2458492232952ef9b4e9559be08bc8a6b6a0b1cc1537e81ab06d6e03f82d0bc0fdb4e756eab5bd01655050b6dd2ec6130f0a3090ffa032f67cd361276257943557235ab25da7446f616551081ebaf8a544ec23e4700202d2f308ae01b95ead1d29618b4418aaa24cc05b3ba5a9d0291c6bedcc643fa6b90051d264ffbc6a0e85c883543682f9497ad26ec25cfaefa2b7fc1e05e09047bd551b2f9b003fcbb97346f59e0566c7a418fc1382d4f6ee60add172065cb17b24f6ce3f49436439a81694147feb9ba15b7426ec2b23290d7538fad7b3d5b125f096568075c5388ae20e69299f313cbef8170036c9eb519c9026c772466433799bbb1ee2066d97e6c3fd907c44f54da142f2aed015073695cbdf6b6e0b0d2ae3ba433fdf0e0b863971a664d28c6abf72ad23b8b12ce0088aefc790b25f9d3fb6c549eab9b7b659a76251d870dfe7e03537201ef997c1396dadbf355ee64e27b8434143b8648d276807f5b1a35a19ff8e34bb25a74d3eba7ff31258b59e1e33acf412f2c1be79878174ed6b2ea597c8df35374d43a357795b39f7f9629158ce012106d8c4305fd8c03e19b25f2d63e68e794e0e4a4fe6265aea577b77402cf0521fe8743942c0df865a5982d219d2be30505d889c98caa9138738e0e8c2ee111f0692bd254efa7e9afd29fcfc57b9a757217bb6704aad34d868d5bcb7918715a663cba685cc590b4563ccef7b282f68e5792b4725c6b52a67dc31d67d9477be7f32de1d108d4ba021a003fb9c9bb6bd551d2e50496a5edc7d0b9417ef80475c420912b172025216e76915944b3ff3aa23544a03d1fc4d1c93efd889413b7ce7ee769a96136904e8d44cb91e390f59af5d314502837aae1b20ddb177039481785f76ae08130b539f2d24ac3b6cb46218e37c652dd83c0414b0b3aaa09d61cd12b6cfffda1696fd076daa4e908dc976281c1bfbd451c3b3ce31d9a1d19ec1d62f06ed2cc5070a51e0f614ae7389d3e984eab04afd3110e3afad2dd8b4701a063a6cf477d43e7b13ed1857f81c7d49dc154ebca74e8de6d4759bddb72e8b8e21f77b8932779b70e7e626872dd55c898d881ebf8f7bdec53ddac9b3ba0e4741ef2301030e290f5011c5f5310a9649c087e00fc67cdc3f033d6be6ed2be8cc279b9c54cd7b49941df10e6339b27eaef5276cc73ea9cb3eb369513a686bfcbe02d894d7070584150f086747f5d784def640b1dc500322703bc6957dbbf898b363c43350db45d5a7ecd8ae788647234c8a450465bc4eed54ef28620bde2c7082fbe37cb2538a96c59702a1bcf0328c1cc87c6267fdb928d439fbde5994d77aada847649ce003cf3008ec9ca7f6d8117c58a5f0187cfe8f2195869f6d1629527aecaa0537ce8f854f8e4ff15dc74406983650964bfeb3c9fc24544ce59204a97909dae727366450f671ba5404e63ca29e9de1ccadf41b2260ca76b41a90ebe8244a60c5ca0221907ad28b86ba6a1c8c642291e508786bcc613637a8d1a0b3558f8c1fe96330d023b4b4f7b8f186230bdedef3e659c4fe0f92067a6890fd4a3ff8777d7b418edff48e8d15f508bbb05a52e266bc8abda49ac1f34d5705e862f20803b59c8372dba432d84b9fa70b922d3003e4466bb4de25186b1bf51ff0de4e6634aabbe52697471868417d08bfb5737f45c2bd339556ea20e100afc1fd43debb8ddd218a572198472ae0882f0e431be9a8defa5e1d5e8dde8b5da4df8948caf0c625a19570d1a9a8a08279fc4bea4df2ae19b0f4f33e42e05c67527ba009a87344e9174df39a9b93243c695287e27c1dd616a85d9e8320f7603b857ff79b88603ee6c2a208f982f4d2ec0d6c4bed7751bc42ae7b6c182d359c5bed77b34f3772ecfa022cadb2f72ae4955fd0cbe37846bf47f103436ef802324ae14cefc6485aff8d52e4048ebe9e3e7eba9289e710b3fa17da8a9023ad4c1637bd9b5584e53dc960698b5459aa795c2db7d67f465ea138f1e158ad2ef7de5669e1ff271f5ec9a013e501414156b0afaa783a8b5a403c3c20584ffe64e4d25309beffc13b7e4075794505dd36f4892fc87b1b9df36525bc406407560aebf3f1568d6c23c39af3e0d5f9d706dd0e65a9191f82489e3a2f22ad0173a9e644c8439946d719200117aee3c535d9f845f1e6067294f5501fd923e7a7dd06514a0c2a231a7fe10dedd5694df17b30e7a088287a255921d9b75ba195f07bcf035d1249abdc7a8048f0a158363bd4d5390300b5e6afedbea25a52532cd817720c8cd15547007e5f44c1dbde76854f5554bf7177b6a7c568599931021fc6a34d5e80d190368b043374cf2b27e6f3feef1fea8671fabd21b2be2d02da68439712c2624c9ac2aa2638477f0d2cfc12f78953c316fd96a2f99b3206378bfc27b6343a2184cf374ef417d2022b34f68e57397430842d9e2d4f20de1d5c0a8a80b7ca66b2c5bc87d51cdf34ec0f51744e8c184299b848e9e28a0ba822b34888d57078d1a2b72f8817c4fc36159ed4f6df9b5a105b1ae759b2f4cb4c0bccc62aff3ebd3fa6b6f8867b5ac00b5833213b38b4140cc48f57349ed426747a1d92849ce3be85e713ab28bde81973b0b1de7158a83634870e882b59e761a45573253b884b5c1cd5a38d089a66e3dabad0ce824b8d2451a6317c92aae2f6ca7f1181aebd2ede2a9ca0fa4cb6840b7c58067c38a2fd887ff1bba723c078d3ef9466fcfc39716313fdf48cd65adfaaa89799db701294b09dc33de985579d72c8fcfba31e7b19d770ba3e8a3e41cb2d92adba9210ee4ad01f40059a7668003f63b90039ddafd7fdedc580d58029751e10dfe802e645eb1de2721597d21ce0091fc139d0efd7448e291a6e6f3fa4a923c924aff0d33ffc652df3798a799849f56b27ba86c56684a8513db10012e6e14e7d650fa73916f888f513fad16cd2a3f273d396bb818662db35e504725739d96036c7f38c62f72a3d8b2ce361c655cef6ac1e6a859bfd251b240acf7dde2fae8f208ad1adab4a5bd2ab4a2b05de4224959421cd5426e3c8beea4f7d797f24e0e9e0c7b8cc7b329cf6d34d4dd0b5f600f58a34d11084b9dd608ccbc5bed67bdc19bd576905a02abb193493baf72cb5362805806b9d0e3759b37fb6109866549ee0423e96e662ee4696002e7656934cd558a261a5138fa7867f5c274d34a89d046214e0b7763ec69056c9244a8abb420c3bcb8f9764dbfc9d5768d361b63f7d9d65411e3b05e18bb7086f088e1cdb967a586781cc54ea25548fa07657cc27bb2dea04045b1bb482d6fa1623db8fa1177bb93ad830841cf115bf56495ae654658aec4e150522ba32a0aa26609a275cb8aca303c15a18897133e799acd0c2653f07439ea4f6fd50b45f4a23027984a21512d58afbadf15f5e98ada80332ff8afa707686c8a76d38efba1b754104cc3465aeb78bd6fd805a833fa5841e553d6b5e1dbaccf5c4e5be40f5b80de923d301dca8bae74f96ac0478d2a3bbefe184a03521d96f4d9f99509a63f2ac515b92b32ef84f6cbee1b176862276f534eeed87a5db98b9c27f16788ae0e36ab2859f830a7eaad47fcf025b1fcca075702fb45fe1c368a8a7c5320d79f54272d7c245acc252cb4cea4acd0d7674e984c45660178964a4303f92d3c8b72b2cbdc85fd91e0ad311c139f5be55da473966a8dbe5a9a9ad3a099971cf37cce92224c931eacbc2a4cef6702ce0f7cea021e71a74ce103c1cec920ede38ab5cfad3bc8cf747bc097c4220a259cfd165cb393fd5a03549fea8a34989842ff9461d69d9fce73bcdb3fd1232352fd37c569d1cb048fa72b1d1e806313c3e1fc6d146ad6c1257b2606e9acfdbd50fe7b24aec4edfb827cfb6243873e08468c4dbf44869666de419e82fa417c80d4e240e6c42b76eafece6f1a949cc1571ffed87e94668392cde7e53f03c1565c76c8b570ac1912a77a743e87f94314581861d85726fd30df9795f10f98fcde56caa1691eee4448d4d52fb284be07321a71ddf993b0818e15137ae0490941b139794fc45fc70512426358f9c21e4687900800e3513a6131fbba6cd66b4f8a64c28549afdeeec42496514377faaaaeaa3d14de8b2a68e1de8842acf84193b4367664870879724f911feed0c09bba90660273d1442564b11e992c07ca865eb4b7bfe8f2e87009abcb98e38185518820f87a145d618bb10867b96001657190558ed067fd135c264cab0ed7b295e20371c5233923d33f3a018cc5b28df85315ec7438d8d5d9fda1889015c22b3c9da183760028fc9952b91157f7ecc9bf4ebcdbd023a04a304936f18ed315c874d1d4d97591b61f931e6be97c502df19d5b6914832960c881135d41745522f4c7cc157abcbacb21e04fcd46f2ccda8565f496428ab5cfb779d6525e106f6ad8ebda43a99308ac3ff92e50a925b3c1ae19b0c0be00b1318ec62e801452fb8114d21373c357d049f2c350817998dfd43775ebf322848a10104a7b374226f3f60204157011eca06efec804420205c2e60523ee1807f61ab19c7ebec26a83a72efd4a2bb65074a60a4a05ec50c9b412105a2c0e1dd10b17a26055992c970eb36fec4e456fd559da6cd9363bab686a5a0d6a500dee3f1edfada9fa113fbbfa71d736a100c8acfeacd2f7877e0f4a101368aca7fccd1e382e483d70e13b227beedcdabaa2e71f6558038f3187e9ea816c4dc5b117fad0b0097ada47dc5323d0ac4df1b4954413c82e78921d6cc999d08d9ca3d339ca7f320df6263975c9de7035de0598c88999d56e70b474fec51734e9deed35a095b52cf4760a7e1b727d81a8eb1f71b3b4622b8c97183a39a227aeb010bde556bd15bc76afecab3c2b64ecf25aee75a33b123742f9c4a2b315d6ef0a89797f9527bf398d043009daded8f7182c3718300655aa8ef3e5c305172a4664d3f4ab4f1af799a12f700a3cb1938835f23fc3d5b43e1bc7cbcd486b57c06f0ece883052a31cb4679ba39aa7ea26de2499afa5732ca64a65c9b52b71c2af1c9e80de896a8f655fd4f17c5a9eb9694b6321ca82b09f185dea5bff76d670e23a8f53dd9d7dec227763b2abcb4542361e912c2b9dbfe4fd04fddc04e9a41661fcb03f05d491283ee00a7b025d12466ee994dba94cbb9030e32130ee7eb4b7ea06efa04b75f701c06564a977da97fa90a8024bac2d7fe49c75a880d6ce5a40263c99cd8b544ca294511818c874b65f348758f3680958ed03cac46ad31df32aefbae0003eb95f60df38085594a20f422809a557a0961a9a5a7976a7b483b0297990bb10901c222bf9c0179006c3e33ec70086118378b33bf103b5d7ff3d2cbcd33dd0f8459ae54e53a158862db357a2045fa0cd4c888f947de9487c1634a981b8a9a17cd0d79bee8f40badce62193c84c7a998ba47f8c0f8c5ae4a13e1daf126798a1f06007292e511a68996587011ab845f4b507c919a46a896a6682f6d1eaafcaf01c722e646882571a792b734e07a5a8549ed62cca716fbce5154bd66f0bf9fda2b574c6a3f5a1993029d55588f46d3a9d326f336e92488a558740a0199e88fbc651e5d674bbfa850ee310bb1e1c81fb2fa7835b026548ac60ec9eaa47b8ef78b183855848970ebaa15bcbddb54ababac88faf4ffc8a7c05771be640f5fe4f9fc137f89f71931059e4bf690e1056d44c9826a77f6ddda7e1a913ba1f58b7f6d8ee5491f10dc0a3599f724f0f6015e2737d3f26982bef316e8e7d4c503f68f4823c6fb297d1442bb6af0c2b301f90391ac0443b04af8c2749da1acb373264d811d8f24f56142698450b778a77dc2f14330fd6078ccde127e7f0c15972f05795bae4d6401214c18e9d03d276bebf433938ff8fb71fdce4c5974f5423ff7da095664ede603a1ac9ee41dae0189e687d84c4d7cc81131a7f64eaa9ccddf041a6391049822192dd562f981b53ea20c7f86a3abe868103444ceb2939e46082fc9fdce03dd25cb3094d49311bd64335d59f07ac807ee37b4a0f8473977959d36eec68ab24f0e3f3f985ddbd0e2f3579d83ccaf0d8b24e1a7c36503fe4018a20e419ab5ac6e2961581f51ede5608b33bdec84ce38237f9b3d35c17a84984b4d2b34bca090671cb64d44d87dafea2ac803fa7d146a5d016c71931c854b147e658b58fca4f13cce38454100c9ffdeb304a0f332e0b9037b8389bceefda1879569b44c5b1ff37658cfb2553578e215b4b0583e4730aae4c623c0ce9bf332552e080c9895b4abad180dbb135322bc5bd1b43ca81d37491059b39c69f49d68e51cd68dc2c8fb743dce72cbc37672cf3a4fcbe6f6a7a679ec4a3fef21e194104d2515533e1a0e4c9827aa3168a0694a043b4151fa6239f3462471c757c43fca75dd27695448048764aaadfa67d8296dfb620276105de1e08cbf2a5b84cc05ada017115652524c59f0f6aebc3b415f234420c6a6afbcc1e6b6cf7f8a0498de63f40bca01819d6d7562cff34d837df080dedc0ad4104687bcb6c203dfe47eb56492b4cce4f0d7a4708e2c79676a6d3cf9803074575f908c1e092e59b36570070599c3e01a21020233a95e8e56eb9969959d3ed3e58dc62eebb4785ec21a357dbe9a176e9ea98780bfb39a74cec7e3bcd5051d54971b48c989d77bea199476f06f927b272f90a666179699c4043aeea7901a249cf2ee22cbc75a611569e93fa2046d5708a0c0ec9b7ac7ce127c594b79db85c00d94e07580d755b39184583787a56db973243abb6c42d646b590e112a73891b8fa4f7c243a23172286b3a60102041f4ff3342ee06c8c4fa25111ff952948eb9f7ad6a448253c10fed6c22ed715c7a65b2be884adc27ca784e906cbeed6e8a788aa00ff1f57c9eb5cf2d9c47fa17464653995d286c3f2e576f7e0639943fb22f53e6dc18963d22a7ebc50e7c480787f4bd8d6621b5ace991bad7f99107106b701d4695dc0046f062219f3c5fcffcfc92e129d556df2b869ee6ddf917fcb9793e710a9a347504f05b07df6d073a38518e723ac51e5c7692d1a2de06f187ab00c3eb9cde903e5ae0fe541d227e76362ac92502a96f8558aa96ab20908b6f4c7d340761086bf34a4715b88f179bd42d5410857b319ea1ac84f7b0cdaa833457aff36f26e7f0897db3b2d0537a4d0a1086f83c133592be78c882d7999cbf4d12503b3015e9fc24aed213895b0c6daebb681ac54f7c31b2d5f4c2069aa6860d6c0df04665a882213606c71f81db7b71861d2a8960d03faa8a7e6cdf925ee455b8bfd74131e042962437dbc7e40618147f333b101c4c199026ec2c81ee3011b577af8602e2c1fcdb7b24eafc0266eb4e4cac452ca6e10a109e5ca95e921e24373c85000095084b3e7f2c6c235088f7a098c5e3e045c0f9de99af2573c55ea2b0409eb7b50971372c3c8097260dee6498f6eea3a6f3cc7c0630e19d8bfc8311008835a64b14171262c533303af82026c3ec812ced4773b9eedf96d8247537f77b4ff98df02a9efd8f012467f9b6a01e1d174a0b676e766936018e6a4857ee2cc1c5bcb9d7ea26d374892bbd721d0d4a77660f8033098c67809dbda4ba44e337b363f7d1045b70ca4767f81f4a5ebc8991b6513ff4f4f4f4283ba401076d791e8d1845387fb36a24c576e185f9cd4177867834c1b80724e17f543b276afc74668efb363fa7151b079559864c6afd7daaf94fd0835990557e92b4903a427b27ea8f23dc688f1694b797d977a3799268da67d485dbddf973bd5a2661e74e087058755955b4e7d6530f708a53ade38145ab516710bbfb4e2fcda8498d9a619806ce0b19f1434bc507150498607db79209c13c1884e980e6e3f0514414dc8eb460d5756a74eaadcdc453f18e111471ade91bd39928b3e7200d64c7dc555056e808dec8c9cab23cdfc2d8d14ac52ae1415ee9c2e8916935960a77037a287ba38f6f2b9d6550375c4579361731e447851c772604b08b551cc1b0fc0567185800fef1217883669acdc24878b833bd0b28d5e4e70bb14602cfd60bd19cd667487c56e71a9e91cf7f3c0eedf8fd75cc280e9a2f23cb8a732e692361a63361ccf6a27d53d54ee7e6075be6c94c80de6a6edc086ff5c2487f3705a1aeab821cb6e254d98f40dd713f9acfef5bef9ae96920d6306d2a95bd54e16c5fd4eb83ca395a8efb11402e69de033184e19e7a9378a27dd77d1edaffbb40cd6b555c48c1bf90032e5f4608c0c1f94b68defc936f7b5fb6e23c0bdfe1ff2af57469d2349d877650653dfae710cc11b499b00b8c158fae79fe8bc01ce7093f2a180e26cfe91287859324182ed03407f5848b4e770c36bf86d61e81f3c014a2ab96c86231b3a76456b14307148f9783ef31c9d93a3070574a5d8d9a3eaf39e9e09b459a6d7bc15bac320c1f2940c8cc2a3a8144bb6845decb06177236a0e2071ea042c116f05a9b039cf3b2f4222dc08c7675f888483acf8a9218b4e2f66a691ecf70487d52e28688bc002be0accc10d45664d52ddc58ff1e4685f4e08b54ad67e6aff019b22f63ea72ee0fac4aa89fc271dbb32bb3221a5e24a220a3d042e7f53dd2fc15b434eb54dcb5094a9a07998c95ee95689c063be62305a841f2efb35e3d5e874ca859de18bb6e7ee02a74d7b5163cd717d50c0d78fe63c9f97a82038df396e4ea1a0aaf98e358cfd5c3d17e273973e97170568d85633966fa3e1ebd051710c389602ff03ad251af78ae1186a91d5ce43500d405efe644af623059a1d63486a2b95298ba5974286022b9a196205e2a01877400ee64d4fe3d8dd2246de5073e08aa8b8b695418982accf664433145e98a149722791aa68f563db273001d5d1b99cfc9afdd119c89f8fd5a4dcaa4ef21a5ab4b770e987e3b44b4eef9dd1d95cc06e4d6a4d3c5d1a6a0da3589fed53dda73b2740316c1cfa3ddf53211ade0263972877f5a1860aaaedbf7638e2d984dded66d22aa3a589b0f7cd2be967f8ea6dc1aea0b1ac5651d72dd86103b5759306fd3bbcf18a0570267f49fc7b5b2e5fe03c209e8c5187aec6f265bbd0917fadfa0e65d9565750bceeba75d4162ce203c5f8b960a5600a2223977c9dddd5c01d587e81ec15be1e8f7f6c17fc37b6d088d6f41275c23c28b24bb4121cae4d70db7ca7a0213b79974a5025af5c3d940784752cafefba4d742b671cf59913075bbb1aea1f013ee6bde156ee2c647d2f002073b18eec3389fff149b982446e20f83d10be1bce5b5515aa1915062fb0e9d03f87388e927d0d8e306de87c7dcdd8e18831dc473cbe789fd661a0e2ae558b07d42a2802234703093b23f15990cab6ab8e880dd5510171d6f69644801946957ac6a0d1e0b4f5ef55dcf0c679ba272ac7f072ff093994b377e4f10f77e395c16dfbf8a19b86fcedf61e1af3b7b5a4dcfbf2cf2c59b9ba2e445dd9dfc022237b5f34675013d1904345c9d368720ec317c0cff88d5b9ebd1df4e8e3efa3f4b55b9242f5266a172451ef86a7b67abca907f1b28131f93569ba4c685676113e552b2d9a59a5825a545c8d401984c8f7deca429c8817d78a67bfc13c63f596cba230f8dbd6c7e3f6736809b99c74e820a5ecd9211867979fbf935d3420548cbef0c79889d878f8782aa5c8a16d43e75f07d9163f1732de3b933cc84cc60d6ae54173d75f071a944befa2385333640e983ae8b8c96508c67eaa6389f0cb8f69eee20071e7845e953abc8bd1562af400f736cec091598c521b64c1e0752d32d7ed3b42c933d66c9caebd8b2a52a93ca6da2422e15dd3b4bff8ed8cc431afc341c317947b16ee04c0e29c4c235302ada645591f3227bf52a668f473cb6d66481b4aab528d4a0f20141267f46fdb8702213ebf5fbde5a8d8e654ebe5fefcf06edb77e1f773df9d09e2f153e5e09805c05820d8b979f39281286237a474833f60bc2ef0f71ce2101be46d5cfae75e6ea30f7c93dc5ab6d04bca26111818db13f9e255915d7830ef753e1b9ac5a368bc8f32633485d8452ffd64a4f908c6422d4b819ce700e50f694eac2fecc4ccc96bca8a98d710d8a81b0e2f271a5bf6a214aaccf532eea7b5eb71bedca11c194be1995b2492723aaf3ad73cc6010e2a319e2502728638bb858e3fc46a95c6c1115acc7ea4c1afd14e7da0e21d98d46648d52208948cb23b66b86b8862629055901f29fdcd6396e6ac2f170237ea6b6f929d6a999ebd468a7a3af349834e01d152954bce74c60cc54bbc159415b0171dd46a820e96cd5bd16be245b189d418f32a694c97733459ec4d94404a7bcab6e5dd9e66fa0621f4ef75f05f301acab087ad3f84a1c2dd82fb8fb92536947742c9c297b7b9f5bfa08c6be43b0d1e51d21f3740b4f48de9f72daaea98d1ed01c0f7d7facd059e0a20e7cc4fed09b90a41c50aa017d877d7197dcdc9610453088adffe5b6e26329465c2af1cba48d6d8e15f0d460aba5fc352b9b975bec291e61d9d7bec0b0f705bbc5b417dcd03fbc0c4c299ca1737747ad7180c99205fad12213632720feb19153710af32ae9f87a1dc8083ffbaef73e9fc57842e9c004e6775e0b976eca1cd22dc8cc6c187120a45872b8ab1fc3315ca41f9defe04585758e92c9522a68db8e811580185ae45372016b5b685724cabd1e7229e6f12960cda8a534b474d544ebbb6c181a30f8f5fc3046d47e431b8997e9c3d8347f4267ebe11d20a29192a4dd55732f8cefc1ff6b44d1fbae3073264c5a8acf5ab05c89c75aaabd0cd6fabf1f7f082e8a40f98598d46242cbc6492c3a56efd83cdc2ee47be706d7501a165613c6132ffd6d6a51c5cf1709410a7b7ffadab8cb7e05d33d0d366f8c99175439df7f8d3b8b9dcd2abaa0cc58f067dca0fc4ed26c91893a89751198cba65d72868dd34435f581e76e6439bd112a16d3416ecaa69248d72704ccf30bf475a41dcc7de29d148e6f32b122e7d92e2d15f8a1e9f8cd9ab2cb7d3822a58af5694f7effe4eec2143328a30b82b4891f1bfb04db022c5c97c7cb7f2cd8155ab1b77cfe5dbffd37cef946bcd406636355295feda047771a4d34dde1cde1bbe310b3c887055d3cd78ed2d8b17fa38a85abc37bbf8c35c73d43a8df0aa097a38fcfe7e4f7fa1df50e52e9af172a7cbd78f6093915fb39de8ffe35dd83817e17cf6432b4a556057adaa8af8f38626a94200e6c4ef36c35a15c7883e83f090022b489acc24d698659886bc840f0b81a157d00b909771143de66c0a9c6f928e12b5e2d8dfbdd9befba57430a79597030f02cac8b8e95899e912a88c011f57e9ab032706dc1b47516ed963efaa06044ccd894c56218e9a6def280c55dcb8419ce3da1201d690170e7d210f49f65028b6685efd4f836fb264cbec660abf0f761bf85eba9acfb2432cbe5346f11f689b3e3e064ffd608d5b9ac38e101e5af7d8c4e763d49c92edf29abc5b79cb200506f488e4cd8a696f20937414306390768a63ac1d48f44a8581b821249215ca361d336128b9ad4e3f099e96e73192b2b47956e312e937e9bf3961bfaddad0beeedbcea3c3f39d3d3f4fa00b46906b23706f522da9f5f1b452abd02cc0a6842d14cd5c5bf9bdb2b7fc6760018f54c823aab2480e83918e8fc526ada8a7511e750e2eac74edc12ed5bf429145c4e3ac176ae52aadc08ab1203350f99008535c7959c998a8c66f4d87fc152413ac5a0b2a9cd80d91aa36abf928e320d72b3266408a9574b981b9c7dbf300b7e9f87beea7a1ec38b25056c81459cba95d892954a19c25d95090811c2e66df8b3fbf50b1af648838a5f65f0152667d8436bf31904b748a2de457470d716a67fed65366d4c6d1a14548260adcf96b2e881091365b85565880ab521ae1673f5f7966535f0fe21a4c93387cfe4cd627cf19fb95308c6dcb95d8d23b0a796476fcf30ee3b4ba3fefc22d4d36f3f0a6a0325cd326f6bdbf59fc8833ed26639ae75200847d11b631820a9fce8865f564149e066532fe8372ce14a85aeb15c07a204e2e9e6337ca28f4494ee9717cbb7da82aec330d2470161501999c39f99dacc3b34f312c96f7586e31f8f94876eaee9ccf86b6eac127bb8922399c523d082ad9add636f858cc5478286ff62f04284dccefb36e1699a03192d27a14234c75679aef0ccb1538f5a2e65aa8a31c40bee9bf4b4209ff5d966c0e00cbc04094852f34496e9f7e010b4758f1725f878b2b2544cab8a31a4a667c49fcc448fef5a3a95d003958d943aa87243fd6f87a500f3afccb5eeae20e06630c772b63cd21a1830071ec75693c123a415a8497fae4040d0b7296cd45f69715341948210cd8a56b4559597f2871a32b9e60cb5b8db4e0275e01bef8edba29077cb2b8df64fbedfe866880bc0ef716c300404e2f8b44910ef68680a7f608950036f2ec7b66eca0d5eefac03a541f8567296c35a096aab52e666ef3f1f57c8a6145322d1279b52c7c61f9df73ca25e63e69ea61daa5d98377d250b2318785e31e25af1b4c0742e441785ecbcfa9412b982c53b7f2b7e3a96a85ee5573b3153894902266977534e3c1bea8b0039a32691d350af160fbb5fabb88c87c8bf3b932c7d95fc5bfb7e3f1badf4291ce002b146758b91638cc7bf33315d149b2029593128ead8ef4b780c9726fa30f4071f4cd947e933560bdafae338ec01ca65f1a0f3493681257e284719f981a7d299cc2e3bae416343573e840dc3d76abf5047405b58f0af437dadfd61be6d8c0fb166da06b71674f597f5709f4b781404778188e7c316a00acac4ee901e9c75eba579551e4846f51a44cb416e51fd81310a6f0fda23932dd947d5fff7803230b60dd1bf306185064f67195513571917b753c1b85f012f0e7895d40d139f747ce6a2f38f2d7f94b76f4886f97b17b6ba631933a09faea61e5691b9c3b535eab5feabc9b2f67d0f4d2c3509e8e0d6717d877828fd173eddf4fcab48b148063d075bc9063913ded96ed36d447e3be3cd40ff1f42c208a72fed70c728db266ae409c681c19d8b6db8fea16a1ae38b92ac9425941fe550d4e7816ab308cfd3c3afb2e2285186b501ec937a332d3ab5cc0512f8dd108bb061d36f7fec774bf6d95aa19a22b382d497245080a281fa72591155981ceb19b84dcb1c9ad49a370cf14c436d5fee0fd19ef34ab3936021741e75da9cf86809ed04bb2c27a2333bc0cd7b3f904dc1c98fdc3a82ee3e36a723d0daf0f53e4203216eef3c0467afd5f261c8ac0c4449f38a9665573297efdc01ff308f605db566b34ef91877bb3c52b47ebbc34227dd2594c4fa485775d501ccfd2be2bb672aaaae9477037993dd3161cd849e831b1a1f77a355545a0b8320aaa1741ae7e1005dcf1306df8d1e0cbcfb49a1310b3edb0a5b3242771bf1709f96aa2a91e88a7fe43364998b9d9a82496676be26c5e0296eec8f66eba91b6ca90ceffc1cd33e6aa7eb3ac47c6ad72fe01d54f9cf2565cfeab627c5c9385416dc9b154513eb2840a1f9a120e57354a368319670b6e03d609b260be5fc108be2824e4fb08789a9e1bb336a1192716a05e309c74cb3b6b7517d5f2dd480e413f01f3c64fca57c04bd8195412c45bca2169806ba760aa70c184e8194d6e2ab1848fa852eec7c229fe1ae06554969f7996b342499278cf440e7bc05e878f43f1ec16f44f7cce5f9384bb8c6b8af70017040d1bd18998202c2d85bcbde5186cf1816592d848de16e35add5e060074026f67c5023d5517110d4f559a079e4559759ca72e5c1e9cbbd0f789b36d5160392fa55f3aa37b160835e61ba3a7042c760382b55e6c487b92c5ae098757fb282238d5e441cf8d6022c45932830d9916c2a60b11819891f9337e568443b7cd57c0853fb369cfe5ecc8f73c55638e52ee24e540720241fcefd0dbecd28d6b62882dafc5c764976142a1619d938ea1f316abfec738705caea40f17f46123c0d70e66e1b22222bf3a6fc6dea27bdd736dcbc10e112e2a8eea5d73f4ca9a16c02823d8d9465f00edd7dbbf96ae56bc40299bf5f3d0de381f6b2e6f34514d149bccd681c4dc2660129d280c3b74f21f623c4232a119d6eccd50776d2ea7c02dd6e07aa3616c6f2cd09441535ca67fe6a091ca61bc893189f3ae77e14b4dfaee5fa5d54e59c1e1ff7c832480db1f795a21cadf9619bdac1ed779614ce160748e2ad15d207f3eda4a95e5e83d486f985e1722e52dd90e977c3d0c15729784a828fe6c1a25f4baffcffa96d55e2a2b616cf2f1f05590abb23528085b64ab56af571bef0215055800a4545195e323a8270a04101d2af25edb0f5dfa58a5695c6118589e3b99c319ad59fb4fab1661226f04d8a147d33cbaae51aadce08ab7370da6a3f7aea96cc7d549a5837d2a532b48adee3b5eaaa74dcae69f6ba920f74a423c2922330750337d2e178caae6394866cef625e30ccdd44a313aaf9802795ca2d5234f75657e8ecb8dcbbca201aff698444ea2f8b2f8d02e451232871ecab6f38115aa5bf2c5bbf20200fe0fd1927e4cf20a63c3ed2a3c2dc800fa7dabeb6375e31f6b287a25ea69c28677eb0939d86eb3f9e27e3ed30eea7f3e389f809d0deb800af5c5d5c61f9c326c7601cdad60096aa583a113ea362bb9e492f9363e16ab1b69dc59387949d7aa7fd98ae563f44cc4f02570b69e96c7e7d03e805a875bd4fa32db28654f58e0b4178d85d36b8f2b3676fe8ccd85dd73a55e32dfabe978fa121e6682f483155e1244dca08c3f3862849c51f52294f88c999cf9627b936799e0d1ac973339f82868b07a4b576505c773432f9cfa68005de73df6bc682d7f1a714b70a0580a0893e02ce5f260fe615f74a0b88bb39717e1b31a4793feb462605a68955d794b79e1c0113eccb519af6613fd8220b17e40cf2707cc2a08e0bed83e9d4c81e190172f064d0ae700b4e9c6b592b85ddef5543443e28292548f37de4f95d53f7305c1e8027ac2da184232e60fdf20ae5a15902ef4b0885d2c4e16d6b3f3cee156835b4d1005c0ee096461c0cea34e0ccffa704b39ada90f5680a7a80f9fcb17b442780e72e48b6cce7be7d725043cb87c353c5468c8c1324c7e50b6159daec441e40d1b434755a87af22e170390368cd71680c4bbacc0d1210d81a04bfc63d21bfe065ce6a7580294e0b15fdd6b0e1e38dcfb8235cf2e0a6fd4c145cbab265908997479f421401f7895ba51680b1e9fc17d6e25cc17c423f1458902753affb04af708020b3743b4d140708f47491ec6a34cd47d47fc8389366eae5c93c77d0a6042e8d3c39c081a432220484ed46b4381e0d866bbc1c3b7b1ad87c13de4a7ece431a1d6698330162fac8ed86570c0a0e8a5421602a8f074604a8ec5ce5f2cb7153409b411b13f7935d49bd3502d853a8144cd7dff4775a0668c10925db125b6cc6cf3c00d6ccc67b203dd020eaa95bb9d2b28c5db179a9d837e46f3150143982cc5f2258f9725a4bddf197dfe074ec611ee9980f2c57696cf7d018b5e58a02bc0d21aa2df83f17ff16dea03b8b8d4edf2796214acb909af67f5b5a2105364e67252005d9451532ddb88db2df71f844813815546acb75de1a106cf731b1d6e5d126a13cd1dd0b3386a48207e65338f89ec3da0d3f754aa995fe0089bf4725c1bf0f041ba688ce586725d2b05684ffeff6f232c88640cbfd917ddd2334e0c7251370e82a9fdd189f734ca69fad162ac2b43c0f522d76b51b3d365033c839cd4d7e98d1a6b302b3764102d49da32c31b6df4a312bcae92ed084253397793b1aaf6c39a09771ab50125136da4ba64f955586cd93e28c10d6027a885fb18da0337256657f2e0f5d30bf42c7dc7ba9fef1d0b92ce8e8610e04b2e61839d93edd27486cab915c9a31a94e76cb786ad30cae9b62369ea3e1f36b62ea935b63497942a104955ae0cfa5f24a3dce010af963381a160c02679f24b05111ad673d9e53943c4a90578aa1458922ed4dd3ac21fe8c57a592996ab6b660ea7ee10e6d2ca027c9509df814683805c1323da450e0bc2a91a51c0b90b222137c8934ce7ec3df5c741f4f2fb02fcb859cf1bde80534b16604b45b39cd756c1f9182b72370f43248a86e17def7a82590020616af80514bfb95021803329651bfdcdf2b75fd5e4bd3819f0e11260376b15d983cab76d847b2352a0ac3dd467d53d2ff8a27125afa5fb107110ab1c9bb84b2f367ec1af3b99010657466c7065df8c6bd71a99221688790ed09a4745ebd0a9bc98b53dde88d87c2c8172638bbc81b1dcd1425100e7d431963756d1db71de6ab8b921c4ec9e3369f0f6a82eb4929ef9e616b89a11f3811c2c6d8e06906571087952b37d9793d22629030e6f4c55dbc23ac2fecbf5fb7540110ae88eccfce9fab5fbc250381a9fb4c4fc04c5f406d27bf3992fd5f53f8292dbdd0040182051aca55dd26825a7861590ad53b5d4114f7bcb66168ce5f1d58b429f56c736c3fbee29259c2628f43f284a3ff2fc30b3955c01581a5d880d77b939e3e1b4167b57ee927d227bff36723c979344370fff8a1d6507e69a1d0b57f252ac19fc5d7b7d34f05e80c97ad222fd75ff50fa010b936f143a3249db09f3767fa58b1c1b569a1a93306a4c6ba1d1fb9150471208d28ec117dabf329d8f0fe5de9309779c3cb798a5118b5c61e6ee7883fe8c5b7709b75278be2a52e2247531727244890faf76ed8608705cf5e9151f2bad75b5ab2f70bdcf4a4751ed60d234bd1ad30e00b5de96e203006e1408b283498386a64e183ba5ba57205c6edaad5411275286c0a964d3ca639ded6240f579190f9e27f6a1ccbecd9edf59878d6a9e34b77d563c4baef99605f52daf50766dc7c2e7e2acf853c356631e905ba4ffc25f2e4e1c6a7b74c872cb1df4a7a977523fae6a428b730d7db946d0143f76b78a99144de9660eb4a59f23e9aa68a685354f1975aa1da85a22fcfd0b23dc31a364365cfa2de79c4221c33bd29d9e0b647781057c7e699e6c5f36390210819bcbcd79a51bb84240ea880ab02e0f3b7377b423f42ca46c1636b65dd2f73f89abef69dba324ad4cf9d1aacc02207cda5484b828c060f6a032bd0b285863bb74e8c5c831807c2a31dd186730d8936ed33bd244632df4c145ee04201434cc991033a7ed443502053501caa9918eddd404f182b0dc99cdf66e970ae2a8cbd3c3ef1302834e82f3f92b331f7f80daa89896839f8d73ff0c27e0674116efcd7662633d0e1ae72e671e7f0464d43719ccb14504173deb5e037b2a562d5106915c16b4436e1058a2d64765ac96c23fe47fff5d2644186c14afe13a74899f28713e471179c0e80f86ec36187e656f7b12b3c341f827f1c42197b4d27ac6754b06d3adfd7be19aed7fa0c626b34a5149358644ddea441d45ac614d6c82a65db040e0b25c28c8c40249ba58c1c8a53b46395e0e43bff7defe869c5ae99fb37ec2ae4d1e564b3c3722b45f00208fda76931fd5e8d90f42ea8c7d67fec1b1335ff2db0af37985f464058d91e63998596fdaec79b26a85d0e41a7280ef23e30f7590b9e75183a17eb42ce97f520720641ae96aa808fcceabc89194b42ef7b968aabb6caa1b7ae82f082aa32b092bab837b3f406378e0dfb73bd6398db7d6215c7f22c702834ea25929e8b88c651957a3af113aefc9e5cbb95c3d414380a3817e0833ca9f9895ba84a2b04407bcb579f21359339a17301019fedea27540f72f23312a0d861af324143b8142bc5d9a840af64f43de4b9b68333451698d9d5bfcaa8f4b15166b03b7ad3100f119d0204ef6060a1440c1463154b48634cb3362606ac48e207add7765bd546cb0e04e3f7c48b7309e9726a882831902b506e05d59c1064fe034fed4d955a6ed721429b09b5dad41894bc74168e0e3c922f0cfe1198c9698104437789444b7bf0e9ef30994f7b8864b8f320217cddf3b3da666d833c75058f725a72f0c547b6e756dc03e75d1ff2e5d28b7295fd8c6b7d82e79acb57c9984b4e141c2d2930f6a591e1edd65756f46591171bd5366d580d99b7539e23f6315c67069b67d98f867d2694462f2a0c60e5c27cb7150f4a4afadb96fa727fa87c1b20459ee20e00d088608bd6aa0c56a670a1d73e25ebed7bba1e01b416fefbeac60751ee0391df8dd66d091f26e3f19dd69c0561b4a2ba109c23f17f24acab570e6d5659ed99af547158ce6f37d01bfd60f0c5bd20ad25a098a5b67b5b4bfea6563796955c60b1ed7b072e960cee57cfb2955ab41ec4ee66e6ca4bf7bdc90431fe6523f8af161da70b576874b9068a6fac5366e005a6d9a31f7ade49d698a41c1daaf64f950584a8ee2586e4c81ec937c92675ed8a2a874d66870de15c40fc883be16bbf160fd8cb5591873d3b336d03b2784fe8e3ffb3b658751881fe0becb17d660736e63f56a1897b81e9a88abe559059c4288182c8e17ae7457f4768110f79ce8d2796db1342c53b802af0bc928864a8a7cdff990d2e8df3ee14692b76a0c66b1c46d32c3d0c7e3afaaf77f0df9517e765700d6ab7d07c110addc72deab7ffcc74d3c9622614b4bfe538c9cf7c921bded102413578628cb0b16703e06beed2b96c10f91d4744dd583fa6b0c15e6430343f2fa46cfd4a4f8066cd8f985cdbd7d2f6a47e014bc64ca4cd2c70a5ea942f8bf94fc8421839d140336c0999ed2d5696ec3ea322a82646ed65d61b29aad0184b97afab8e71e9c0356916f0e7e1f7e9dbfebe6bcbee6d5cae6049a8aae02582746b0ccd9f3bc8acba9ea11b56dfe4085fa542cdb424856c3bca15aeb88ec6174180cc971d2489f432dfdc2f218b9fa267e5ceed938f51a5213a1bd20b8f40832f55d15daa1dd034b5efa282388a3d3419218dce6a5c8b5be4d52d516c9580264d091a2dfd8f905d88c0b7ec694d2aa03f317d3b0eaa157b3cb419e48a7290995b5cedb12d9fa25afff3c3bc87a4aa64c487080dc5da239b3448537556ae86076455f84b42600fa818162a8664795b823324f54bc171c5957e57b3ed7ca3f5670752b1eef2a40faf4e2d61c3a8a5d41de94ddf783a32df3abd39227d4f7cc52983d14beb9b45c3691d27a0ac0087e96d7ff49cba26c1a776df0eeed66000e04c48f2de35468ff8d0fc064db7e3ccb67e7da581710451aa2102d4c5974dff38c479ae343ac02c1b01583e5d37fd480c478860642956278ce30f1a47d1ac341d739f4d55d77dc4e5a7280700c86ee0cbc22b3686f59cbc725a86701eb3e683bf8dc9a13567e8033be85a432e2026956de5dd2af6c8ae59760f2acd12d5f79b5f59bd4df9789ecab0b75e761fcfe6dd7fad48ca0bbbaf8a560282825d989874fe1bfaaed78f06435d1ae7177cd63e13542eeeafd85c7d648441a1c2cb88768a0146b4235e158c91d87d4b53f2346ca06fe1000d85086733e79e68b9ca079c5a533585cc496cf6edb5ce4c7347563653c2cf4f9df629e2dc379e2e4153d599b394d7e71092e4308425174978c8a0e3c688ef64ce03c586a5c56d02f8d08ca0f25882d41c6db9a3efea788db3a5442790e5b485b47b570c8d077bf2509de8320e21cba76e111da2ec6f3ad7bc2a8d445de280c039367fe17ce2c56558094e65283370151cfea420f0b7f6061d66c6c3c091e31591b054caa3f3ec155aa187bd31c37488e972fde483db9f60a0e0a563727ef9eb79b5fdf4fd7c93d93e3beed48bc64c53ef7ae932befc88e9587ed8686ce59beb6e7e3a3a16f9f06fb45930f1653ac062499e986ec0ae4a8d4e799d5d19e9db8a5de3cd20895974db47df7bbed230ff06fe44c977dd1b2f1fb7f9e2608731e0aec599f8475d00f3c16c5338d9602c7655e1e4c4c46b3b51197ccc9e8a65d55e94e1ffb332c31e2de378978f7c2d20a9ade741a4ef73675eecbf1bba8d8f2436f4459ec68fa7ba83e09b7064760802073685867c055e6ed2b0b1ac142fc3bc79eb277bb2c1f59c664df3d0539e6e4cc406bff4df38613bd0adf95f2b091ac8e3409bdb5f7e52a07b0ac7c14ff30656560f1a6bf27f032bee940351c7ce673de78f1e38a3ba26fb65b5b3091ee72fa0b4405fe217ecff9ce3fc2ff60e40a2f05e8699db8a97c00c5784923e0a1d4a5c725cf7f6ac672525ff983401d6f863850d360e3187b88e856f09e85cc61127dfd60868d1a901e7dc7ec96088150b0a1f09309b09c788cf731d84025c9072076517ba2bb60538876155701346662cc85f987d8078db5d61b43fc038b209b2fd96a00a94b6a48aa95587f01582c043219b494985cde4778ca2b8af6a457aecca9a43ae3cda5ca9f6f55b7b40a466bc7c24922d4f877085abe0d44ba07646aa727e0d6f0788bdecdb1293a9690ce2b9f13400f4ed0c2aab8e44d61953b6a553491bf53f065e8219262bed5371376250d7a8748b46d01e16340a8e38f743729f90678c30f6b0f3e2ffd6271381d971edb280d5f924baa94c7e0dbbb3dc95f043a4f0bb952f38c883ff5da3762f51f2cf5e060bd2eb950c12694ae119892747b8af4e5204cd6847cf3423690a3d5d835dc56eae146bc3c65196c4f72a0abcc54f086344ee47f72b2b284773a46c3a0974632855a4e0d3a07c6fb305e8845395c57011bef7bf27086bdc6e4464b80964894d85b074231fa0ec6e2cf84c0aa9cd2c7e0193e15af1172041395b7cfba437dcadf5ae4a0edfa1d916f4e94c20d11ea76e3e6e9494b0f95127ac8d7eddca5dd9dfee9f44569ab80b2305847e2f22d910a39fefc30b05132291ae0511a1e9fee7ceae2b30f098e18df22d5a44141072ae16dbadb15112e7ad562ff495098e6b2e5327261c8ab880221bc77d65d64e95d308ed8ae825abfb69a5d2eff5f9b39256fa09cd81cf2d3361f9f1f56fde5afecb05131adfe97340e87b47087d307054123a6e0b089a41dbd88b255171b5112f201b90deecdccefa11e2ca5f7c4d010a6013570aa3df514e2c86571f19211825a039401e93aadce7ee454941d57106e63110c3ab4fcc4550e2ce04eba8c4565903065c9d2d4f73b76aae6d784cccb0853be142a791120ccb450a8044645688fd2e46c7522a191eef145070a1844042a41b2cc1e15f7225c5d9aea2dc77efc66e613808e43a60e1486049b39443429764151e2a135a421372ab4c4d49e599a5317dc1ef9ed815aaac605480e6d79a38c46a8a08bfa370af907887dec8ef1f0775262df32110dc29e42f5c14ab25b109a7a3fe8aa91c610184013c8dc2c7201369c6b3a6b9f14fcfb410485233d80eec5f00b94c3f3202c2c2e9a4753a47c1bf58bda4adfb3e1d978180310d66b494519afc57ff46c818789b4683bf83093f1f97157f44091252812350ab36f4a08fadfd20efd23780c0419eb35576f06f126b37719ee2b673c96209da4c150ccbf394614c72aa50d58814554d74664ebd8c5336d98712c2d070f2f1a61e182fa59c6e05bbafa1ad17bdeec2f6b2d6edf8e0a9a9626cc18d017863fefa4ea275f650c5347ce620bcb8de795362509b2924c63d2224cfcc481ae7a3f82deb03faeff55fc08841923bae571552b82fa86d2a9059b240a4967f823e44d966a0aa7338c52278af79ad13f8c0358e5de4cd8c08a78d1e35b56880602580e5da7827aa4bb80bd9872f2e33a00ebc263ecc2498713a808e293776791f71dd456790cb0a9fb880cc11f650f5189713522ae2c6586a5e976b434b00e31bf6c64d1671312b82c25daf500f4bba1643f9194a093f24deddd968aa5fd0a0c7d157ef80c011aff512b4896fb182a602c38d40f5c4ba124c9003a775a18c58b61d887b0324572ce34c5c2e5d8eca807cb17460a350f6168170805c29f233057352e31eb96089c739dd25034d4007580685769950b1858d96989cc815556d4227d5d91e8388127104d083da341d5163b2df64c93e2d76cf5b737dff695b3e0c41be0a15e54763c9bba5ec38057b992097db6b6394962f94c87b482bc81b1d96a3de114790b1a2bf1b450771433c09cc2ebbc52cb808b3e4b2dbe16bbcd271b9c6efdaaebefa984947778d54a8fcf578e84868ac4238c8fe461ebdae529df966d3b6ef1770b068360e20471c6f7887d0081dd308f4f65394deca3e4f8d3ae0eb30192417b5294d80342f828572d5eb2aa86df4a20d085f18666b56ab138663fbd8ba652a402c924c8cf42642de92941b5deb75da1f8abfab7803b620ced3537e02c9b044f4d6c55607ac0acf9564a671179c544d21def82a6b442045e1c4a649ee97ef6740dbf8fb027b9a1187d62f34fcce487d4f4d25abbc1a218d15e214407adc44f7753001bc410c777c0836bdb99d5f92cecdb1099af2f58e19e71c0601577203965611256ab32d655f9c04c71b9b5cf4551d76e4db5f64454b363d42a7f7daa4c4702987f9c6130a8a4b4c16eb2182710d073bf70013b6ed02ed18c21692f0cb2f25081f3a64dbbcff3990741437bfeea1c128b5998e5fc07224c707d2aaad6d637b04b7e6c343db6aaa714d1eb40ba76f33be34245223127ab0e97eed8d5073d59c673e41c4eadeddb3b14fe4626b256ad53c0b87008375a850c185310eca673277426bb1085e9c7470b0271c929e01e165986450aa3d9630bde47241c85114c0e9255ee233612bd3fb97048737f48f5baac02ca4b05b9e6292a4ce34dc83d8da7f1dc5aa0822d0f4e1b130ad87c331bbdaa54c86684b71d0632aaddad77706662f203f86a48c8f4aa3611a62c95575e5ee2719f92749ec8e53d447f0231b8ff688f8941e314888a2ad1f3a2a444659534ecbc41f93986995b743b09e31f59b1d11cf82e24a14360926ac4ccc2efbeb0a5ae97f6042ff13822e096e8cd1f7dc3710ef5f44ccbcd6ee239785525e1b14dcddbf48a91b407ea4675da702e78676ed3bdf7b139b4dd6ab7c4e859eb4594d5d68750bbb1e460ae5287ffb689dd8a342525707ffc8a2e1ea9f69e3921d6a5297dfe2f974a3214310962cf433c1ca03de77d8af5feeb50e4c0186ff7dc8872a0382b586c55a605d4a5e4666ab6340870023cdeed48196bf4520cd6ee33f87a5cd4eb0aa95459c56c201c5073e5abc9cd1087b1963fb5b870a7039b06575e5b2e9abc701eb2d0008203530cef341af65e96c37eeffe80f4ffa2c471e96a6c4b4b8510259b0fd0a64a05a018f6eb6ba87e8e5016546487542b3f4d90692f3e7bef2e89e3cccf5c72f8d8ca9e8866b6d73ab9ae1cdc1a6c82da68bcafaf7c92eae6df36370826b01936dd6dc23a57c926da095195eecb90b2ea140410325e7a1f6aba77f56a91b938b6be1055e323fa9fee0d1a26023f49b7e5085048dcc0a72f7cc62ca5a51acfb5235c123fd98ca81ec9308d91e7fa145e0ec9e802269c251fafcd8cf2cf3bedfe90cbd5a0067bcc0d708d91488bf6ad7b9397edf1eef78b1530c4179ad9dfae293a18476f6d5fbc46a868af883dc53280669bac11486d8bc87232f44aeefd135965b46ea6fac0eca6af2ce3c3403673210a7941ce5fb4ba1bddcaa7439147eac43dc3b96e9ac4a6f24e5e5528b74d9b281b89de4cdbd6053b594f32132da836075b1e15e2bb950a71ac55edcbd7b92e1e42c6bffee213ac6107a2e68120c66930a4f8078299d4ef5a6b9e52d62dbeb33b86a88289ec46890b5fb89bc7af0b9ffcf5d2d98990d04640399f0be86fa2a968d67f2f28dffc2d58560b05e59e5aaac62fd408e8c9345be3103a94ec71c52625e10a37db41edd5cd920c2ab90a9e33472e73bfe64b91b226f9fb818e03a3c542070b51b28c413a397b24027f3eac607fdd172d6907145d5f8ba06b4e2c8d5e1d54a2127957fddaff04cfd25243da65c53f80417aa8aa9645a03f07ec0b959ea0af518a7c56d197bd4cc1fd1162e6896241424583a8fbcd3dc0057bc206e7ab51a8565ea3e5f8989dd3c4d494e4db017f59908416bab12800b87a925229ea5c0fffd815a5a18d9773b8769d93dc3210a93c6b2d828d455f04bbbe544e7178367a3a036ce326b5ee53fdf8cad44feb0a9f98c4635bb34c8b007081681d4af4ca9483aa55fe161dbc2993a060e7045b7b1071000a75412e28b20816ed6840bde25e7a38728b91e1ac19aea50d28f020f40686c47e605ab7af2710ad2c599754d0f1490e67bc0ff1d870e6030d4a4b68b9562996aa9b0e3f0b9edc2f9b76e98791ee1235e76d01aef65ddcbde7d1e4a9178fc219f3bffb0864a05187e2a81a9b695d0d8a91582339f670e73f533f8204e9287d7caa55d37e382b53a53769d84592505965a0284bd8eb7343bff6dcf8d0a26ac069a91cb1ab22a2c73439610489fa3dc53cc7e64baa57539796263f9210331246a82c578153eeff3d32ae92c407368656f9acb0cafb5448e4b20d5f57f2c649bdaa2f54247f2f71bd33e8b3cfed93fc76a42fb76e1d726b6899caf74af7bbf83cc0696ab4853ad00b63fa62d5dcb6003ef69ccf6a916963911a572dafd8d5700995c34338cfc0154538ac193c9870eedbbfed8892e2548600e3d493a45a3dec46584f581bdd11bbd8d12ed659849c97482a890559d9f8f5610242d54793ae16a1369780b8e4429690917d9fe5a28ea9e00b1d2c2a826ef9557795e6810b8207b3609c85af73f26b19ed7b0cabb8e0f124dd4c73ff52e0ad12e4b7dc1ae4f148604655bf7dd0ed803db834f082a05da38e48b0b2ac9cabadb9b1191af6fa99cb9d1e0832e55b61c42ca4e9138204197633a838da798ae00bc27eba91200a39d625c0bc21565a25051c1039ee2978cc652fd78facc256f64b95bf26257a15ebec2d355f1e5dcbba0614264095e598e87c2bc4d781cfa354cb8f9307931fae6095578dfb276664d3aa622148c11113e56298f5454e5f6a63ccd74ad9979c562792928af6a024538d9de57c4c6405fc759b71ba8083981544ee7ebdc7d56899da793beeb62b80aa99523a0e8c643e65327b27de6ab334461d72f1665248209a08dad0b93d4ecd713bd32e7422de18165b0b58b62fe02a7b4bd3d18b277895f0aa5182a95b7c7cb2edf47b4c976c55eb6d0ed0fcb1b98001dbb80e019da03817be06ad9b3c9db841236d0cc460684f7647eb671c5c5919adff00487defda7e39c1faa32aa2004d78e6b638709a9f582f14ae3b1d52f4537c87117781dfe996215f56940f1d754581616a788f67c4f0f763432109d0d406e226926e3fee5e8690e326c3a5d2a6ee976d5c296a604b436c3cfbc6df8ddb828345ae6bf22d11106007657f403cc943e7de4e63683925f7b70cedc6899ff56cb0e1fa30606bf292683eb4301f8b135a2804ebe3fdaf322076184f2fd532d6a10ed43063469a7905b7af593cab25dac0a4af88e63d6b77dc207341ef4e570af17629aac5e671f7e63ed2b2d55942133ca1780eb115953b5389b852be98efe2185d663e1610f676263e6f0e3b1065f4059e0dbd09c1bbdc1a67449ac798f0d72e331756309b2be12484a4185a46fb4a2b6d0f49a7f250e007cdfcdaf65868421d07f4ede7dcc225e0e728d678dea72645f8ecd93e35f8696be7409bbcd3ba95afba3c2822a35d2395e272dfe7e2eb72c173076e4f1841c50ab8e19d96a81d0a20daadd4708c27297450ef9064d870575a25283ebcb4b696016a515d84fd04f2882afd0bd9deb325f454b81c39ad537d7799447579be4dba645719eedff468d5133264d1c54920be18428a9433799c2570dc17cba74beaec67ba00cde73d0b0722a2493a941a0b74289919d28f24641c0ee930375b2c41382780c38c909715facddc04fd8e449415e46b9554c57388cf64dae8f81158cf4ca4192898ab3bf284d7823330849e312888e3751a311f2949bf6f111f90761d7498bb57df54fe480feb1ac9454606e43f586eb666110a8af42e1e370eaeb6d903210226549bc99957a304090a2eb7818fa256dfc8d4bfd33595bd92df1c1e4a32651035de4fd0e63eec259dc76cd06729476d895393d93d542bca1876745356b4fc4a6dca3b1b65cb0745a07fd36c8568c0f9dcfb108f1cca7a2dd54dcd59ae181f9cccc0ab7d6f13f15b88bd99ad6e40162e537c6618bdbbff7bae97afd6ab702ac24a6382aec1c13bb75d098c123ecda47883cedbe7614e82a163a4fbba6e329ed63375f555634f09d6c937a968b022b1d63164ff3e5a8ac2cfad1df02275b60b0614b5b456c3ac014b687ede926505a75f7a6ad89f7a808ab95b21c38e4dc5f60f06c911a9f95eaba3284979a1f4d49517aed79289fa87d76333bf76c63013809363d6bee2b172a04ccb1bb32bf3278e7b2082e5e2cef939e3387e2f33ebe2f86dd31881f846c4a5cfc2921a147471a3d581ad18ed909bfce2a54276dff60fd110a745b2aa274c0a22cfce8fc6838f1ec0f932ca82fa09cfe62c51d9548cd67dce34d5e4a8d2c7eb020c250936e9a47a3e9e2a50a94b36a9d3d6f6d4e135333ac6448265cf41972e3bff628c0fe4ad45b05bcca81b3867c6be70079c4685e3591145b28bb2655d84cf5d2c68d7236823b03af35624bbe04a76fb82fbc5ef47ea4f49516bf608689109e96b6b32f92233fe7b81647caa0288ec067d27e60db884abaa8b807e421977fe96246e7cf0da877f2a59154f970abf3fd5de417a394f9b7835763fb0fc631d09a232363525d38fe61b119c5e0978b23e192f5cc89b346ca0b38d3337b8f8356d8e5ae7f843f56b16b257d23a8fca1fd37f1ac6e90fbfa6e124150515bc863a95fe8b726faa46f0c0af9e3225b03715531f8a8f106ca40da3bbfed6f7421f7e0f7cf7bacbd42cd69f4ccb740acdcde24fb51735d8a864fdf673bfefaa3df05354387952b66f35c381b7784ee0e807dadee1a1930e40ee880e8aef37355c68e01d5f59534b296e4b448c4b8bd70bc9152513c19d34a2785e02bbb898511e317d846ce2827b76556763fc426eb71255622613d48aaa1ab788ac3fc2bf08c067e3d7910af02249959ce8562a0dfe70f0c4608c1ee00e90a0e60e9b71a990ff631a126c6a20f662d3bb319bc60404453240421d34247e1e8ad738e045ebf49f14269b3edeed3880d99dea28c43128ef89b94a74db6ed77910ce7e6c930395f9ce781be4d5b0cf89609bd8d57fa72b2ee8ea07e979aaa5cc8ae4bf6d2983bc08e825e023f85867b276fba53e6ab99a86561db89cb2e254e16168db3d15f56357e3efa7b937b9bd45484d65edd4c4ef74df6eb93aaaafbc8a556d681f4184c372624c00b9f89babc7158affd359ececc56b4b6b250b9dc9b2d6c7695c9f4221d05c8a4d07c330f433175948c4662c002398a353e91de9d511858f6e38e1530e07b9bc5bdb15cbe922819eb4577c24da2ec6c027603934e1ab9aa7e18cbca3d0408b2386fce21e4b7a99aee5d53f7e4f79548af6d8572bcb656aa29224e8293a9784c9f3260a60bda1bc61674006d7b26f44dc7e4a481381226352628f011b9e02e7505b2f5669592f5f96d0dfc94142555126dea3057d1313bbb80333897c801aa73f736d7b15cde0b64f201382802b94cc8980a5cd4d5ec8c030fbcafc903c6b664ebfa4732dcd5b4cdd6f6ded78f4a000e759757f7f52b09fa7a658d8cda728663d8ad45b6508d3c0ccab591b1b2254145e4e84e980ff2d54ec029a70b74ebd71a19a147d1003e8da50e4d6fe98cd96f156a2235f36c068604e5aa0019de8aa616adc2cd010caa1a69e04fbcd3a0e923ba63e71986b659a4b8fca8f684253db7d2d89f4922466695f78be70cc711b45aee34ca2e6c0c67ad8dcfad59e8bd58b267efb3b83835b3f81b1f37e54de016c6f3973c50dbc7982084f00d7895430be00234a502c4dc7a943bbe22359a684163fc4774b9eac300db43e3be203a2ee30c2596d070801df15f6050ed24bf94c79b4a35717715dae2c01b66fece78561e9bcd1b59007b2e1076f2026c2d18ae5e90480732bbb30c02aa63bc90157a35a9b5be7b8147899d4f87e6a093c463bafe25dd60dbdb9aae94ca6f6a43e689c9c1b05ebc60f537de07d9d5a1e8dc2a31b25ca210d77d4dd3875017996c68546583c6685c6c9188abe7e565faa3e9a0274063f8f2b67e1173d4158224607a742e38d36a637108841d98c9964352aa451dba3e1719564dde1dbaabde3884a5332d7a013d75288282e2c334694c71b5200a1131557dc9bd3598ec6f61c213eeb9e96937110904988cd8c42d10267c31b9d1a24c191aa1e0bb6c10a257636067f9496fb273631d309ea81172d8b6932b7aa07f4cc05d68055c00128ea98a7f4a907f669636db3a4ef09e0fd6272be85f6adc031413424df2ba5c01ed3a77123dca3a2f87be40506d10701e485b446595df26d8ad08b21559f9262e9467fea13f3665a4099563fa67ff84fc84b45a899abdde05e8a06ce261d6617228c9c8fe2c0c32afb599d44b368177454283a87522d7edb2995a29b30077bbaf2adbb24e6569627fe2a5ffbc7f82f2a1f3f7aaa969e9143baaa968cd46c10943744084f3b0bc40eb73eb2cc563b148265b35a5635603112bc6f769a69ad4d84977cc19071a1c466579d18655ff2517efc45302980fb9fb1ef6720184129325599b3f5238cee17d8fcc52b35ef6d06a69c2ea7749c40db833cd953413d0eca353be0179fa88d3b7c316a451dfdbba261afd1ed74b3938c89284b54054e5410170017d02b04a1b149b0b662dc991f7c08ffb738a254eb73d594a7abd6244a68a4c5ae6b4d2fc127298f5f24280db4dcaff070d72d5a9f696f420256dce91fa133d91a2da4705e3b6052a7b3d8b5649ce5966a6a3f8d7fdbc52d2adb7839c4f3938ab4e744790e1c7f8f9fcde5f8f829f75364f450bcccdb5a742640ef7ad9b5b8ba1b1ce0eb1826dc5dade2b9e5cb7713eb8bc57408d878cd3d36b71364830087a0b48162af69e8e9a74d53120b90b87ad382f47f98e583030c9debaf97b9a3f1130d33247532601892d201b1551d14f7e5462af435d2d8b40cd266a4e315fa8156e572ce02842c61dc49485648f9fb9436e885b957a6da9f9d948c62b13c8d1a77c7aa81ed6ee5e4cda92454b362afe579df00aadb2c9b4d043989b90f8862d5c076fb919587515bdd2c8207a4f8dc40e8705885ed07852dc44ee3564c340cdc729833b1f14676547f3759d47ca0ddef1a96d188f25cae7166cb3cfd1be333ed369370d08b97209be83a53778323f707aef91b57bd20bfaba33b33b725d1e1e8c460faaae7bfe30169833a7ede8b63ffec96e26848df032c80f26e514ef63280fae46a174447fd5f9636918c79564d452524e6b0d1ce3f5f7b4cdb03d6fdc63288580b7bf885e9c4cc0bd2dee3b71f9c161780ad516c2bdcff4e491e8872c7ba78176d20d63fe28d7165e385cc63aa57c67e23768bad31ec10e93b6bb5b66cb2214159f05679a61d31b2e84bef3b9c348deaac5f1766f9c5a0b3aae46a79721c2398d2b1e3f64ec786b4c15bc9fecc8cb8c43401655feaa4eded8d0503e188ab8688bf935dd7872e1a1673672fb13d921a17decbebeb71341a3f8ab1454eec405e982deae0840a567d3fa2a844284b82c7aff9827e3ba6c521c95e76990f8b39ce7a5a5d77b9c654006a01f78b732dedf1ae320a054640a8a896d3822e0929338bf5a0ba095ef0fa91cb5c24a9c24a6c1d8fa801a2b6d7ae586e592a2a08c8afb2417ba3643b63ad8d08fc7906de4cb6e1dc97593a15d99691c4ba9aeb310d7ddbc90976701d8b84e6ad7f5d400faa9ba38df1693d45100f45ff2c78c6bf361cf030078837d764def7d483acce39e3d7926d14765a3b1b17ccce3f431e57907ed2e0d11f1e121e09a1344f31d10415a9668757eb7bef8a320c342ec67af00f64f45a73dd436a9b41e707049dc238be222f6a06dc7b2d57bed02ae2d9cd872b145e86f93952b9c8657f93ca0cb4e6c93aa4c9671b8422652c7f8f891a168c949ab54e1303c9d41f89d22daafa5de164846f00c8148d5a6d1b226697f155bcb83fca4249b83f87f21e6dbed65b9cc6e49d88784859bfb7b720f37bce63882eab8f596d02e85ac1bad33c6fb6f972ab2346aac65866cbef6cf728a518664a0a71d02ac5e5cdcd60f44ebd409f66aabd7bfc02ddde6721d9414cee0062ca98cf9b29294fd4fd4c8a53da42e2edca523c4e3eac96fea7080799cf6c6ae64025051762481b54d1828bc01ff0c1a4ec30487296cfe333c29e42850d7667ef8e22a9f37335a92ab90cf32dabcd6a909e93f3286f15d76956d6b22a1897f899452364bd2fa08d51ebcb7f2d77f57890c84c57d0a13075854a974aafd468945864512a9494eed361516f518a2ca2b321ad74ede1e37eab537e103de8a6e5e28d6dfa6831a6c5cde4c816eb6583ab75b46529d888d7bb026da628a33a177f962d3de11f90104032adc083c6387e652e4d78811695a67a0419ef724ed6b313451937283aba06ec590a833fbbc407daffc559daf1daa751cb217c29dc6ce4526666cec7c3a267fa9b71af8b3e6e4c38a6566bd2d8e04545a9241a031cf0da945f237f1f12d1f78ed19174f6ae1b6de0adfa84bd32731438faff91facdc1b4104cf0990317c15fb9ffe77bd6b706e3f3a0c1522c3b1edc9b8d4c5e81c28206d34bf8d02287b53d88fbe166f341d4f072f1425de50894427abf3dcce2c032b3b80223b45ae1292a18c2b2b0d3ea1ff2123d2f2e96d3ace47d9e34a2685fc67aa7f21c22a498e0e21c9677cc6255e5c1f9da9ba7f0d73b096a2ef1e4e6992ee090f12c03b268f5102708724018b44cf3931c13d6e480da5fd28dd557709dc5405db1eb0ba530184f23fc5b9a2976eac815010834643401acf4610db1a3f58698d2f31df3e6d33b9cd43b5b60548ebcc6e35878d9023a69b25fa7d4944bc7d1ce60f2961b2c32f5be7e0bf7b788a5e84dd56899cbd6bf40c2c857b4f5bc59ac037d3437137b54c396535d8bdde7469527bd7b2d7912c38ed34dfc7ef021af471f7ef9ca33dfd8ced06139506aef1f88f7896e19994d458d282b2ad69c04773d365c24af262a2e885434b41ca7d9394ffe4b7374f1ae964f54c8482b903f068325ff0b0b1d11b79bd88d4edf997c1745851eaf2ea434fc58ca2dc443f0007fc144272633f7e4ceb06e13ca71fa754102e329d149ad81016f58ca32af91f2889f86694ee823e3b9482abc8b8c2263c3efb29c35bc61bd69ff81444ea721e14c1d32b8fc009eda0bbf85d0db5676dec032f11ae9d50606f0545faae69a5561c9ad8f1833bcc4c76163d4b1309edebbd5f0440b7258a002e53238f3f52a9d9391eecaa155f611e46881cf244be7ded61b2b6c3eb8630034577b95b537d9de4227758fbefde33c89348f91e6fd69b07b6baf6b14d3d2ad55672aa358ecf65b7f35d61ace25154bb4b6b6e645bb065fe5b86f9098f21a6e52c4f76114cb49863ff013af49ffb815b364e36bbd6caf5eac2991d8a8c8708bf138fff8954d45b5a39b19e0eca161c8da57509adfd6fadc4d8e2a7e7f715c7df6db4a741493358817e380ca463f1164e43dacbaa6c4bb3b1e1c6c7a60b20b2b43c213947e4f32bca46c88b7b3d03c4baf07711c4f57978464eef3780f6c6eeda421397f34d801dac462b3200ab0098daf085bcd9771fac906e7eda208fb3c070780f2dd07f5ab3e18c748d6071d615605bafd82a545eaeac9c4179c11e262b253002af246e6d694189d78a148f528f59b36abe762cf699f01a31206938f276905733510bb2323ea86eb1b3b4545d9be1b47735f2fa9773aadc77680c38b96d150b7065881d2ef71a0a2136ecbbf72a85d8067dc4caf40b265fd0e3511a1187d3ecde60d32f3f1bc499ead8cee831fd0446e7f4e300f271f5c8625c5d4c546ee4dc9cd04be3d97a9dd7850be8c11f8efcf773196c6cce936b693bcee7d09c7a18fe55004e658a0fab2cfcf9e0264e159fbc56a8887206420471b36df97217e4f0940b54d8eeebe99868c16c37f0030075f11c68e4d3bcdf5447da5c85287ec502ace3ad5fe4b86a56db951d0b5796559a054085d2d22c8a2e7f28e9b2eaea0cca54810cf4a996e48bc91b0cb8a69f22e5eaa910134f8a450bc09cfac75541413da4d95a9a8522731414bbcc533c56afc0eee82161e61136710b56d02de95c1e6a7f5b674126df0147840b89eb1ee2a344857c71011841440c9dc676b64b3952752f57525ecd517197f339db5f012e8c807cf5f9095cb20e527f1a0113bf7636d1ee5dcd71b2e64885f905d040064b847e47b55dd9ef61f37354870409b15d550ce925e02532e2fb65bf77310e48676b61e6efd745d18f33a95eb21754989459864f69031e071f4205e122b9a830bb0980ce90965c3ee0eba7838122f14ec7dfc8eb49f2f5801d4d277256642bb5f1f6a30bc98861674e853fdc31924a80789229dc9075514b8616cf7c78185742b4c31aecc8b9fbb13e702dec4ff69649356ffb2a4aad75faa5914b57046642704bd07a9d742bbc28c9666d349b2e1bc794046941a2bb536ad381980abab517c7f17a40da6623197071e35a18ec5cf82c2a74eb9390a66a3d89955c6f5c57e364cdd30cf1789c8e882cc1fd24fc10062a9af91769ded8df2b1ed2c21c716e0d5a4436912dc480ea85313519be08864d1fc544cab1ae203ef2d18b8df0c1ad2ac86f357c6ccfb4442328ce16cebaeac4a26ab273f3722cb4b8b789875512684c5caecbb8672bf0258104c2c39aaaf52b967f0ad8b368c7b9cbde5a33fd0c9bc2cf7e1ef6708f154b3e5763069d33d6ebc81092aaaf6dd1f4b48b8429d9c7d6597f516e0bf32ab977ce5f9aed25f6ef8b546246be7232cea85a4ec4fd9b52c85d909905c89aa130befd72135ee86ed4385a481195d6c57b8c3e6c358c9a9a9e08135afb64a438bef0e0210eb93a70f1956f96be858f1358152e3b215bbb5aa9ceab93518171ad56033fe88cd6f968f8dcad82e0f97d92d167dcdcab324a19f040f1143e899fb34a47ba51be791f8ef3c31c7273f5f3965379b5506666c1f406d8ed69263e7b0cbfb16cb674c88de6b52fd03fc65d6c915b7552c5356c175f761054527f56a2791af6f8fcefb454945baf68e0308dd985dde6e932f364448de4305272ee8ff310c0a5a0a46b9753c24fc7b3d9c45a340f3d573719b19ca63d727f66dcc5f272441630b27bafb6aa07e4fdcfd1e13cff0927309c2cae12d50f6e2854319d71745ac96c3f716372cd66fad3e3ef19f81001a56af6911c25281c4ab250576d2e107f8c4a939dcb2fbf997ff329ed57662f4f26b0754e93a0e99230e5d2615e5eb5fa135b7790a43bd8ee38b0276769adccb9036bd6ca7d2e5f41541e245b1a95c6c858e69df07f562081b6387193d0378f3cabab752ca71e2690d750fab1996f8708a2dda36b831d1242fcc7cfa43d3545ff03125e147090fcf99e82e6ee215971ca27eda27dc571cccf4359dc5f436bab23669d7519f08964bd1a7ad628d6b19a74844556de1ed2010d28f6554aa91523a0b15d1ac3ec9a60eaa4053db395dab3f3a66e9bf921414e95109d9692f5cf992c4e47e8616f96cc9e26f63bee9162cad67b6cdcd8b06cf1ed2f251cc9fa88c1cf2cbbb3418136e5590d70e3080aa6f470aec57893ad0b5503071b6a1a176472f3876e086e385b293858a90ef4fda7bbc2763a7ad2300f212457d21fe0e59fef1a25f413d22c591a8730958279602e0f0d017bced69c9fde96ea397e56bbf3eedbe16bb40b771094251fedc45b401260b4bb8f8e8c196158bda16cec45bdfe9a4c095d9ddf4681fb7b56fa64959b901f00ba20a23d2ebe30dea078fcf332d11079a2a7db3472739f00a8e853dcd2a8baaadf21139e64e75f6444678e970b95ea50ac063514bcc4989efc3a25bd12efdda2c3e9f2946722c016aded861397ac85d1ba482dd4a2e275fb9b0982e642bb668e21166132af5cfa68eb8c339c723b0448fd5bb63815ac1bef53cbb656d26166f3e80cfee852b0f019fb1722201c7e6cb69ad5fde0f7f78a093e3bdd7f4843e03f7fecf5dcaeec7df422628469320cc76e86d3c414f1de5031069d8e8b2e29064272cfa0bae2875bf1cdcd50cf08b6e7017ef01bc5369e298975a5cac4c96385fe2ae823a30694a258676617321e02147f851589ce73c1a452ed9377cb77ca540f829cfd2f7547b61bbd33bccf968a05584ba155cd7ce86e85725812f807860492db3448b932dad5d90924dcb3006ba57b5878789ac481d00dd1bbb8dcd92e808569dfc34217e9f416f706a8465a0e592d4b0f692be41bf7e64dbb24067f30a3c28aacd06b17675c20eedb73a14be1fd24e7d3db2810530648a15f00d17dd74aaf9a4c3a3e1d7b25dd9ae60b8efc1e2684dd165c6c8ee69b614a4a2bffbdd410ac6a2c3397e89c80ff81b4faa78c680b88a5e549d2e1620c34d00821322fe98982f6fc2dca656b5d0735f114707803bc6249572bc4221fbc28059dd7307f3db183887fe03754c2658a92a4d342bcac8306a28d20101396dd3197897d1f8f847c02af71e8d9d7f68dc15a3687d8daf69815ceac839856af78bd3a880d5cd2bd01eed9940f03c4523685a6710d397600cd3bc8ed6f52890594a73a443e67cfce526456e106259fc562487bba36009942ce00e181823e756818240e0cd492c75bde6aa024a44391b4b912728dd6a980beecb49e91b51d5e0a2b5a1baa28096ab2f29a496de962fb34c5a04220bf09c4f9b60c7464f7807a5b5bd2a343b5af5d344cbb36ea97fb470f4dac81099cf7222c1ce79d78236c42b422b1191b6366d5e98487e810686caa08038d2c59672b28d10fabc40976bcfff242971f16db4d1a8b347f4a2849be0eae9052335b039e38c00a88144df263075e3ec8aa4cd77f4ffcfed5d3ddd02a4fbe553474d72531be3dabafce69ef4c631b538046a76dd7bb15a98cbb5edfa8332efe3cbe9aa66e324ef672fc94e91a0472639e20d58a5b1d07c97c89a17378c625072f6187c8c1ca56983017111e3ec4f25b0d0bc82d84377902b4636fde3a1bd35f47868714891f50c386882293d88b1f763e86ec6693a8e7c5790e0bf4d3b2a6ac554f071a059d10f2c002ab85660fa368fb78713d907af86b013840aa6f2cf883bc99e5178da87d15e8678623472c9b9d7e87fc9e296fd4827dfd9f75447217fdb55a419639b6ec731269975e39c24e14fc2133dc15c185184ef5f349bb3840464b15dffc31e50428a84c43737cd72a51a3c99d91bf69947da647c73fe98634bf1e4b5b59ac1f89cce1adbc02b31b66439278a211bcd2d9f538d8a7dcdf55caece1a98b51da3e8029b1e3646770dfe9ffaf9eb1c07b2d10a234e6e07a0a6ff3b416298dd8a8caea61707cba8acda396410e4aa509e940722f572bcce00d073e7ac6bf261e121c993ab573e0c72a7049199227cc5169a3c23fb0042d3dad92740f4f319be8c73984d2ae3af231420a2d477185737e33f2ddd51e45cba2fc3752403395937da296889a72ce449a6e3bfc4f50b1457b7e7ad356f58c2b5d2c32c26b9ff7232fa35afa27cac96ceec1de6e0da1c086a88133c12bf6b3cf6dbc9137779ba1675c74c8ac6ba38a1a8063372d6d1270c74b888896ffa300557591eec2d3abced1d6ee1ad83d31054c68bdd5883b538a432d98e7ad80c7e6bcf18f4512662d3d1a585a88c2979217246bdf27477d85da4ccfc819bb643887ba0bccb9d81b670fb67ae1a9717f2854dbcc8cb6dd552e9129fbc27a339c4ed946277813241770fedf6ab4c6e9560aed4b6bfe1b29354003eaf4b6245d963c27787aafcbf9ee629ace8954b3bde8ba7927071bf16c3d169bcc8c1f7f12a7fed18480c0f947d90790e073df45878998385ca0b9a3668efbba6c3eeca17e20a9bb35f36c7596f20d16713c43637b56e0b944b4a5ef361e7ae9416b627735232017242f96176f4c04d7048ed305c9a3ccc189bc0f6341bba63ae1dfe5da50bc66f64453e6d5dbf04d4cabee8454a337296dba584e7c00130b407d195dae2163fc0a0b747690add562950a3a097fb401b224ea6256e74babf83aff276b1e825c9dd78f333b0f41a080ff59096b2a003925f818e7ae351989faa6d0edb93e4b10d2f0c70dae4b731ce110accf7441cbf8757a94df4777d1128214698e4ed8d618edbde729c05495bc578d4992b7bb2581c0a6b23b9fbbbec08fdebefa98d645385234b672b6a2c4cf05b36a0a037ce4a133fa7011fb5e2d93d1e8c2d64848acf8ee0f1657d7390ee9c94c3e4d7641b43439252256aa789d27e6b88bbeff6cb1a6dfff3afeb6ce8f165d41fafc0047e341a9697d860ac0764bcb51475b5ebe694d554bbab651382d08349dd723e367e0b5fee53c5a4c0b434ad7eafe60f66a69d7f5b83ab0ff6f42579af67bd7c3f272b72cee9bb3a3f651be393d665986b453da87816b103f176bec377dcf1a9c4146b673d939e4059d2ea124da9efe5693d96f8b7491b41c1b14034b4bbaaf0b2477474a7ceaa6127fb47e59585b60e828ec731645779b4465a342f57541dbd03693e277373ee9af4242531a07bcb8791157e962f65a110689fb72b5848cdc0702d5a2d239b7d0a6f7016b5db6f3868b9f58ea95f8a34745bdde3bb46ac411cd3fcd1403555013230d504793c43c08d412fcba235408c97bb1fa249991f2aacc38841b603fd2552a13a4c34d31a57ffe060829c328de6c360c0359b4c642ea0042ff1a7c8514af8a72a2d3e919613ab4628aed8f2af637aceffa996a1f7665290863e34dec258b547e528d1d3ac7692bb95477765363f15b7fe4bc5caa53639e16637e6ebb235fcbd6d877303290f20b8d7e178204537242f0323b6730c73cb48133ce01b8554974786b4b18324a8a54258e52be2edff62dbbeb5107bfe9591c9ea13d9d8c1bc0fe6b1da8d493c50ac115489dec94bf887df23397d28e1e980471a6ed4350a4cdd33516e2dc13f46d23b4a61680d2690659381988c2d04b27cb7b100cd4ef264e9c449d5a6bb2ff0a768bab41882d361792c67ee7354ba1cf15023b575770f4af9d617ff29d75f842e408da64e7f0eb1a84b871cc3496197f53049e78ccd472bef3b06e2771fd932c96521548b1e22f0f4285a81c958ca17edfddf3d39ee391820090569d2e4b963ab1a2c32347dbd86d6eb9e2333e0a60b408e988a19e0210f51a684f84a25f7dbca4ddd2491203669a41e773c05671e53f6b2a80a024d85fd3ff3281dd5a1fd020a57b62c51048fe491007f19eb74c6750aeb491ffb0dfad76712350fa553d9e20624f6cd92a1827d45e738eecdc7123b80f94be4533daa96eae8de0c9489c760fd4a941defd5367deb5092e572e97c824b8925a3ae037edc95e130e4e83071640cc5c9dc29b991a6d2a22b7fd107432e55b244ae695b15106cbf8c13dfd100f3991535f378f0ee93c1e67ae2de3f14e7c2d805ab11024bdabc4a962c17592379482b46ce2f213da31e1354fe28f0d55a218a824b90be7751c9ee9b0e172208192af1c769d238d668d33f3b958233d78dd71f4edea629a94f9c59010babe8d616d5af672325ceabec431f425f4af3f5029f47fd3e035860a21506d995870c60fc2b83f544ae33b3ea59869a76c7c7b02640132e6c52499af7bde6a232859b966ce421112f302ee8f850f36e3202f686889caba90202c662f63b7df085cb83f184525d7059a270f73c28dbf67af2801c8535ba191d06b1903f3d5255ca1f215980e02329d15ae39c9da888725c92b2c7192f2e77ab44598f3aca4078cc52df94a783f7bd27f71539e05bffa5a30752e3efdc26047eba94d7d288d8921fe05f74893c6caec6d9d9ea6cb77428920d98ef74ef5469379291ab3d2e0c8ef4d19acf23f330df6d7a0547f734deff1a3fc53176a50504c3146933f34c1741b1e357e9b0e90e8fb463c119d24a4dca28c8e110a1d5bea9dd13746d81160b3e7bde6d50c5ec6c7a65c94f85b735eda11139e91ab915e3b1c0c42d69a193b9675699b356b838a3408da4c2488ebd18e000d7ddd4c871ea0ca1c26d6d95c4f4e70b12369d1df4701425b0f5f448bc0b387a10bcccb9ba7fbdf2c409911bcfed3740f8f9cceaea100765d025b01c7f1410bc3981ddd742cc50bb7c374efc364906feffe35f3f4bae57dfec8d65828b530b6dd1385950db1488070cb25df952f9bacd8ac0e604e15cf093ae04285ff5ff5b0798ac8e3cd46215d840c9cbfba8eefc98325524e76da85d0b3151624255534f7ac52ff6ead1c93b446975b13bb45337de78db0615dfbe5d289d7d669678b52322be156f6fdfaf0b5544c7cd75a6604694231645af8c791db1071d9e67313d6c02fbf56ef31e9b3caaa2b57b09612dab5260a49fa6d3b4b549660cce82a7b6d016e6c0f0e268a97f785af058f5f924979ed7d19a5f99c395c070418b0e06c50dbcc8e919b88deb0acb692f87cbe64c587099c8bea7fae8832893debb100d083f0ed6470cd10486aa264fc090bb484e845a3e027ecacbb6853c2bfb7d95062822664e20c7311d11ae902cbd9efe0a00dbf161ab18be37b9ba63e1850cc501e85273999b8a8a746026a211b976d455b25d150498e08777f94e5fac7420fd2852273efd7c9ffcbf95aa63376284beb2e598a0c8c0e7f625928bde6e8d0f7c46749fbf83f13b28ee4b39e4cfb87e38ed4bb15aad72417ef2a628c7ce5de21ff5d5d8f9717dd500eb1f155f2e646ad77a98e19ef8deee06fd1811736984dee6391aa5ecbb5f05b6b7cc6f47f02c6c5df199cf376ccd81579bd80db9b3cdb676f487a70227229ea68099eea2be4d8c033a7d4deb27e1b40b68d2b56bc102e314de12961b3f38cd2674382ff1262a12c43bd458865b8716ee87a329d3aa561a9d8b156e2c2f9417f4061a352ac9709acd62d620e4c4822d6cad65258e1674799deb8aa6a42062ddfdc889f9551f6016edbebd072ced1ef4c88d92a61229c7a980d0183aabb80e111e2a5514844132578ed89e9e6caa90b198ee05d8067a5a4ff033b42c603c1f318b1a1ed9567c55296917f712a80b0beb4d951daa47e8bc6827b252870595f87565221d8713729fe37970dc45f238bce314eb964f0f6f7bfcbc8e5be8aea4044e2660dd371bfc084dbd628fa8fb1495db692d3cee5877f08200b63dccaa01f988b6d7caa08292b50d5f0b050299cddf29b35722a13bfe3c932327421eb071557f47fee9e708be3bf681a6e8aefdcef76fd9ecc6a5f9e026107f5a8e05865b03f414c18430bbeadb02ba93cec5671b452f45a917e6511f3194acc174f0205023ce6e95945ff24e171f0f356470caf17a09d29bfc3a1d652977aca0bc1d58cbc7a2029a6626a90e5d6a618902ba9fbc917b72661131b13de8183ee5376265b3dc5b8b554a9ddc87517286e78f31045b98f11d887dede5da81e108a0eea167a1b0651c2c8deddf117c7f3933663b242b52cb786ca84e642d30a9cd2b018be377c2f8d19772a9a24e0c3c825ef0f1405db1dccbdeb8efa08e5169b079d0275160bb985a23408e3a6fbd2f2ca342f40a26eb32ef632d639d8b939584fb54d0d47272e46e8dddbc401a9e9324fbd8d060be7d0af4ba639d283748ebdc87b14db29fe937e94f666312403f2635b38a803f66d372ffcada99f8267f0eaa2b26a9f29367c014afc6474f0a963168029ee8e8d75a5149449b18fa9f1d18c8bc956361d6e14ec5a2281ebb895077407e49142c32549a3336d6369a43ea170aa5b48802c101c0dee5e07380495526b37df6dd5accc8677720415b55483c43b5984b27c07361901decb9a28b888781fe1548f4f7320384817776f51732b25322b3e91a04dd2e9b523a47cde2fb73d4bb7d67f1c4553d158c51542e934ea01660a7fb19d8cd0e85c981da3f93a31dea48363d85863e4f3ceec59ca663da9146b3df12dedfd2dcaea5403b3cb2eeb30605624e68147ffda769d899849f6c5bc2e0c62d84363fc2109d1bd838642667a94c64f5532627539d4c693bd5e676ccf7c7b99b0a94edb1fa7c2aaf2630a996f6246cd5be65fcb30924b77fbb3be27f4b62c976447fdc0e580b07e64baec972cbba742c75576a964d629df3ca73679c42ee510d21580472e63e6d24ad7c4d1574bc3e3b4c9191351cf787b2e3e6649442833642c36e6a605b666e9ffee4b1106be46255e0a003a4600369c0fbbf3fbc8921acd6e4230fea2a956d499aa5a409f14a5f306c50a41da6c244b71cf2167c01da7b16d2aaa530b9ad8051395a8a659e5d10c50488d7c1a0e1ce2199126f35b2fe392627f2376c5891380d360b4d7d47e4711660c01c2b974b697d7a8df9a741b4b3b4bc3ef40e307c1417e3da40064600a7f109b1590e89e4fc22246d4e58d3f47071f84047aec94370f6a49a58e09e017ce189a7ba19fb9bd476b238e9b449eb334d472304498a40ae5e158396e7defc5e69fca2e6142d50ef97fd5321eb5cecb35d6a1cca9fd49b03be661a9c88691ff55b1dfb2c7f0f10828729ce59d54f13e3852a553450160b99096a844784d5206422533e50c23e7afad7d5baac25ce412d972713288db78c68fd7708a765279af482b18ec2233aa1502b0860b093725e633fdd6b119f63b84b8bd2126d0e57d016fb0d49e7643d600634ad003a5b3112f89400043145579798f90ff37030be9192a79b94cc90bddb3fccade0fda099cbc98c1099cfac7c56077e24e3e305cc30993772db922f8069ccff0a55fae9235ef733dd091c3f2cbc4c30af88aa944ac8ec94177c63d802cc2a8243f1b222c57a14e69084e66a90123a5f2eaeb860f918460256f1000ba207e5b5a48a010df1ff3fe458df110f41f240f71bb12248cc80e6bca97cf38867170b4da66250006f56be35c7f15028ccdb606b87ea52166bade921a4b17da6f961e10afdc310fb6ab396009d0fe9f433a3ee81c843d5fcfceaf85d753b88e2960ee796fa3a7a0be2e95f1cf04ef7c9c42660991762a776b010197fedef9a143bae9f022e39bca706c858a803ae3e01193f2cfdbea29704701e649fa3a7569df21a427c1928d5f255c7ef36ba09c6f0c66edc83bf4bd9f4914d467a9cfdb5046d528a8c33a59b01ba5ea5da25c88b2f4abf7ce3786aee985d5a7731afaf37142fe16226fbfa73bf77def0af532dee15da7ab9690fa4617bea8a9f8232519966b3a061f3342d78e6de6db53687a71137135f001cf5c37d90d1408fe664c1e393961f594b516c4f6c2d0013ccca858e151499675bb7dfb9f1e72b13a7125978e37258a104c72278ef545ec4a2e12c6dbfe4f6796fcd172f5720af67bfad84c720187f088043c4a527c477ffe1de77e47c44b230a1ea32115462932bc6454c0616e9848516576ad41e1a658febe8e8dada94aea73a6701e87f09ebfada9c69fe7d8f1a484b4e71380d1d157df55882a4bc770945a03855cbb6a5edddb28de0df501048cb9dfcfa5759f8d7ab8983794326dfd1160b1f946918342e6ad7f4852e3fa761d00c80b988e0455402379d02b6a65989f83cf7e744678a6d69c82f8b07e995a3a4b9ef40100fca862da40c7b52399da80a06e6ad8e13d7f229b1fcc429e18760819de77ae030f4a8c8e7fc5476983354408c8f8dcd0e12e9636599542a4ce0d3140b4543a35e918a7fcf3d2c5af2aaa317f013b113a0ed635d4c6937edb36939ecfe86d999c921248291e76598baa07f8ae6b4c15eb9a175de0338d426feb3654e3d4f6ae5a61cab3c3f5e202830b02b91193ed089baedd90fff944f41e9e7ff4ece4536c2937ad85631d1f1e92859bda683e9518639360054a1fb6dc8e0fcaa553ba5b36b45552a353ffbf47db5e00eddb3815bf9836c68deabaffde8455041f31d13d56c6fd536342aa48fc9168bade189db28a8553f22584247df756da0d932fd6c3d1ce8acd9958d602dee8e0e5ba145d8d4090bea2171857d8be81092b8cdbfce34c0ce65b58c32cf7bf1e29ba1ae7cbfc57b4db85d05be53124b5ed8d7caf18ea918542df6476f2540d3be5c689d90985b68c14cd186d752788b30e4a46bfdba2a004c7cd20504a59c99c92c41f86a746c392d5100f173612369432d907cbd33bab56328a53f3bc1169bd39e8f2a9795476906c2105244c2f7057e74baa41b5764340ea4d7fbfc721475650397222f5706a9da1825a503b17739669f11e618d06aa7301f9e7778bad1eee6a1e90caccdee598431c19d5f028c874e316e940c6344883cb526f9099ab5226ccf152513e813cc47c0134c2147dadcc39058bd2f721d2a6502926f0968892b32691bdcd2793540d14da45dce785e5a8aa01e55d4b8c2b6cc373d698558437f38fca30dbc59f6906a579cf4dfbb778e70737c81b80758ab649b07c093451c0b530eddcd638074e7ea75fa465d7efc4efa3d4de82a8db752541878abb890f0bd441886e65c71a13b98d230b0cd823fd1310365c6659fd644dd04b62b9c1f731e13c790df8b6353604ef9f2dfa31c7e5f5c7be18e614634e8eb0cbee38ccb789b8990544a96498e855d1108b20ff73e5fe46509d7005c67205e03f9ee5303c695aa0c390f848d32f61d165ea09d5d72c1c7b911fab6b9deacc2d1215e39ed4c75cf66330e22278d6b797784786cd4cc64073e7ca9912ced4bb3602252406539ab9454748b1294ebec8e98a49f87ea3e8f96f783767f4fa12455cdc1819bd2ac0197943eb16939ebc2c9d2a63b48086b36cf162b69f4e617850449f18c45ba15ccda62c5d03313edb2bdddc46ec20bdd51d0a44c1a660b6de7c87bb3d2acd4bc827c44262aeb7a2db8688f78487a21136f0586ee6feb1d1699127393440eaf1625f64c306bf6c55fcc4c17aca92194c0b027a44111aa8cc7d4252d0094187b703241719a7780472c018ba5a394f058aa4abc49bf56551faa89aa71ee4cd398f352ab2beb2745a45d79110a00b71cd55e51112b5d1d07cbaf9d9731b70ff53ffaae18750ecd542931b30a343dbeddf307acb00245915adb8404727788528fc21b569d18d13f8602be5e65fd0b9f021df7dc88ec12342c76e9730953526abac66ce34657bb0fcfb738d6f6ed415958af40ac245edd2fa9c47f70a450efd869a13e36af80cd60ab7d2dc72dea44ca9822eb285b1fc5f251b362f99f5494a801e1e481e260f7537d09936f1c73e29cb49afecadbcf627d2d86c8e06a1ab6fd004ef846004d677125e3f4082ed53f986232f510610a4a3fc432a0280af2e3f0df599471b24f31498f8dee511c2bfb5ca53daf885fbde90192d5f2c4e443b362bab3e3b127e34222b660dee477f83a6dc2f60416dcf3cf4a1eef4b204dbffd258bf14c161ff6d02e33131039957eed2b8d7fabd7cbe48ea1ae1d13543c668d12890ec25c72d49c5007a1e7e6593d207c3e65402993901862b335e2c4db206bc682ea96e0f615d174d7ee63c943ce17bee268feb6aea9f8874b6874a4b9e32e2c2c384a1f08e0f17d86cc91573e2f58bb23a12c5041080cdd8faea350eb400208344fce71bfb895efd08c683889e73a5beb3a11201c78a8fa3a310149529a8f2832df16edc464c687bb03f8ba54c3f98bb1657e5f245080eeadd03568e14b263a074455471cac8703fd61158672f6fa8e696746cd63be611d772556adf315666194f312964ec562dec55c98dd1c78739deb31a657d13c17a438633313b20e75af4998267976388d0b2f52645847154c132ac1c84b75ba5fc7b4e00533a47943987d65713dd1c3c26b6e3d7ea3bd39047b847d0d06236a3af93a2623004ca665cc0a3d6c1980dfba7a8ba1274f81a27940a9baf9f0368288e5d08c9eca60bb47a866c7b85ee082c25a25c82c23969ab49828484e755990dfa2e4670ce05b406b4fc32162dc7fe5eaf5a3c63963ad8a9a9bd47d519ea978c0f734d074483e0c13b2c17f1bde99a155c132caf3b69ba017ff592ee4d9b41c19c879d8ab0ff4759c4114f8b1b21ea64818c940265cce395ff7e90a72e4cce433567974b931a0be563b58b18158831b5e99b42c8c1e44e9df1a4ceb513bf80973b60a696e5e53df6ae4aa548bf9bb54123d4596fa2ffb37619fea7970a7e84217b19c39fa9bd80727bd19eea82ba36bb7284253b761caee9aa16287e6abca94d7f92c3374d9491e7b7e8cc3fe08d6dd6e578959dbc4e556700a1a5c64b63f0c6643166a66470eac024867836d8297fa5d4f9b8474d3ae7ab7507d9424e3118511d4a27cf5758de17a291c221bc4deb3ceeebc3974cad2af4643a0f8e2019a2bcb567a3c90a8029fe9e5d2687bfd0fc8c098525abc7faf904e15b236eb5f6f7861537d83e7cefadcdf6b3504fc8a79d8b41cc74992b9b565aba814f6859579357fde7307f9717cb22d3df8124b0ac919103d5b115cd62c49791e8d9293c24e372f2291b37e9e3c9b85dbb1352bd2c3910d2e9ef8dcfec6dc7f0dc957234e3192468014d9631961d0855cb15470730318714a02041a61ac62ce9b23cda0e5d0845b9e1794de7b6d61580989dc9cc3b7daab2157902ef3b0d82fec5c34244a043cdc4207d2d4a4f6a9be0c4edec5cb895694012c1447e35498270307974c3048bce90872952ba2c60c997fcd24c77c0facfb4228a98daf1353d112922dafadd89b5ea102b1b9b2d29176f11b1ebb8860562aa7656ae1a3796e27b4f96aa61e34289cb3afdee853928340d56278aa91878c5bae7f11b3cb629c9ad175e45aaf3a253f9303307e4636944dfe28874e9238ae0b003cd934647acdbefe6486249dc3e16a0e7e830a231cf61599703c9d649e6ef1bf0046022c4b45b76d5b53b2a481bb98d827b1c45d9ab529b3e593443ec4a07e2dc5d032357c585fb87cbe23572bed9ad159619bb4e2af124685a603b61e097a14e528ab3f3ebbf5d69b804a50f74b6e8988493391768d7eb06b78d4eb6f561b7830f55bbb63b211e63d3226605b3a9580149939f2691016aa30620e7d39faddc317e7504f064e5ed33da88bae695e1cfd9b4818353f2c71f90482afeb40de6d359f6a23ab8132408fb7f5b6a084762419d0e2d9a03d04350aaedf80bf9941a848678d18e67b3913a41f7847a8950e0c9c32d3ac03115b47b9e071a5671a5a129555e7dd54f5f5ed43ec98fd73ff24acedb29ef2d92d656c7b91b8d9db275f88442ceeb4d71e55ecbee2ffbfa46ff007a3e35cf90ab1cd0c72cf36eaed4303fb1b90a8f06e8c2b02706f50eba99da82079bc08bd8208ef46f0a73093662dba5c307eab207a26726bec867c92830eaf96c3425e669d3b5bfa82508218a4553d804206f7f3b8968fe801922abc3c422513fad2f69f947c469aed9c3c7362f2c35e60288857662fb540c31abd0e3a926fa623e0617f8cddf06be7eedf99817bc461908472eb0d5aceca7c047994fb0147fb7519e9f8a4494c3d3a2a0535ebb1261e4ae9ed661a29a71c79bfd70f0884d05f7f3739933c71d2b03b48c43231585cc2d4f6d19c82ca1ab63518cbe9e611d35d99734f982c7668a62ce847fbf6548d5f16c1c76125e1046ba5f293bda1e565167f2a34f96979290c77faf10cce24aeaf55639191ff2005abfc6a7c59f539acb1c735c5ce6ef03627cda67804c94e11d80cf5c8f7e3be01ab037843da394af32e3928cb37b48060556f326394ce640c6cb768723a228b68814dea42eb45d9469ae39015eddab373ba74ac7254121d6be98328fc868b6478cb85f81f418d9775706bcb2149541c14d372a0493166308210b442bd2a38a314081e123a1461655e9691ffd75eb452c9bb56b38794f8d40111d8f21fe330f2c1c9627a6496774a1749d154a7b0fed1c9ffedd89de700381350c07b74d58b7ff57478e5c69eefaeab06dcd8f0fd176657903f5c7eb3e0904f661101ae6be58c9404edb623be664fb851c335e919a7d488867036b296443f0df8cd10da6006469509bf07f16e4b6b449bcdab3620f825044ac26dbac159bb0fd26a742c8404a95509f00d4b902edc0d20217003e6efada33e595c457418234eb8bceee0c7bab667dad07a2749e44bc7c5db811f72741db0425e03ec38e7c9564ce52affb09748d4d08d656f506f54a0e14a893130571d5f5c8048b99ba94fb74baa5ac436553f3c5d14018d204bb86a0e6ad47e24a6fe15c115b89eaa8f08e678f8f3f28563a3d5a5cec07db05faaefb4ca146fd10482230dda40132de5495144500b7c021d8962a694eebaece2d39ca713f01d7c28d1e6ffb2f0a4e7e5bd16d1853882c9934d465ace1ee9cd9f035d3d11d0e99b92236ac14b6ca2fc8cc103885ed0efc180593bb185107812994dd19d5ae760ea8da8b6b974f143660e7f487af478c6fdb09c0d978f3fbcca84f3c02916045465db2860eb20abda31faa1216247ab4f26e900d242c25f99ba9c8dc9bc9af15be8b42899fb7dcfade10426aa6b5fd7d60eb18aa13af41ad905ef346671d6b12c0dbbf9b4df4a6aa392aacd512a8b0303d64c469a263f03d142eaf50ad5df64b3d0c8aab424136b38c41725e565dbe6217f60e19d7564f500228a70dc56ec433a9353d202a34f4f9455224c5d0aa018fc303717cf0c2f31b8c423aa216a06836a5bdba987c327b81db6348cb668375c8ca9d6d7cf14776d153b254d7dcf7e257afb7f9afec7319db81a902357969ef57da482270fa543731dc18711323bcf780287b6110e11b0273293547d8178849b67be061f53499fa1650fafd9597659b3947ba52e413970b718374000b5db66d8bdf531927356a377181e544f75bfd7f96c5b88572e32f17a3ed8761ca1e7f066beb14fa98671201791e617f956fb89dba3ff4228d8331ef0bcc08d13ebcb3bc13ddd80cdeab84acb219472b0ba6135537a451699734d6b4b8f9f737bc003610651bead4217f6d3df47b34ce2d16de3f0d6dac618d5496557c4d45bfb7d93696cf1e247ab1f728326b33d8009225ad431bba7547f7a4e1f565066c84b7197173592a8a4d3645cb53f64c6c7111a08a8a60d7ac2d9e2b127aaccb148418490aa325ddbe874db87a5711bbac01d92c90a56f0900b3149538d9ad32f4823bd717f85ecf15f49538a69cb61961a2f48cde4c889291d67959188cfc976292f62d4b6dbc668fdf7b7cb42d713dd81207688c78e8169889804cc0140ca1fcef36f0dc93623355ab22e07a2d44afde5528fac5b8ea017f5668de07152b4550c31fac03ce0aa4273713186d702bc7a4007907b8910861e1c3ac2ed3c12aea68e8387903c1fa843a928dbe7456a1de74acafe8fdd7c869fbd04e2547476ad68930b49e9e738d0e0d1e6ee561fc07089ecb463099b5f9c7be74d3f83321bbcc61cdcc02b0c8279354af36a32e850c205ba1b2d7daadf8c6714886ff4b9e620d7aab3d41c9cd7e840e58f10bf25df64ef861537782a3b4c2949ec7047e55420c76d386bf4281285311d5b7a03aab247ff34dcd8e3918283a02c40943b63d3de2b317a1948f57a12a52b27bb07676d64aeaac19868a4e32016578d8103f66f20c161112c9c511da4b77f8e5dd33d89ae5a0e727cce58d6427d0fac416f724dcac97b3b519b4954a957b5473a0566951ceb63d518a796b30d2a905b8c1c086a47fcd43c7c9db89738e4b7c930c93e3fea56ca685712b558405036ef6770ba6eca4b8fcf038c5a9ad5bd2699d5db0a8198a7253a4d47493e616de11903ac2e6873349ccb41f399ded48d57030afb280e04cff10731f5c3b751a28df05de458bc2cb9399d0e18dfabac1d7092fdf09dd056992f5fca03125abf54b3650538f3ae91fbd2d15106d2b3f2ff6f5433276c07b9ccb737d57d64f2fe05b28ac067b2fd2b25e42b47c11a604fd0c1ff5a8ea0afbeb6f69c790a99aab58f9b836b21bc763c08863483e3f3e39222ecd095ecd2bea3f0d8df71a0f7f0a152659462191f5c6ca367b01e0893e4bf87e6a0310bb197774d41a97f8883f0c848e1e2a3edb0dd4a1cc0900fe1717370bac370462368bf5dd6065c7b48e109a310bea54b8f5eebd995c858d118bb1359caa486276e0ddce675f7216af9df6873e30f6ea8fe9cccc655d6c7aa59932c70af76650de79c4e133760d86e7dfc529fb311d440796abff43a0dd2929776af9b9607c28d199c818e8555b91c9c0cfb5940ecc057704cb3aec309bc604190a7d3c72cf2f1931636830e812470bbb7df8b8f23f98f2b59162c918507e923d93662f3b45df79093cb24233d84c98e5d0faae5befdca78ef48242f504dd9425757193b249faea5646a85c83a2072f54071a5aa9374e9b537408c583e6b8cac6914a5aef6f5ef3a361d659e2e5d95f3cbc31116be29599c2af799a3de5486a581935b27b08f725530d3f654bf5351327d992f40aaeef86dad6a307f4c4a42c39f1b479330e5d8396dc74a1dca14c3ed226bf473956443e7bbe074baae63a34cc6bcc4cbeddcf642bc0f40ce8050da10572456a423056016bfc0d9964b60d64cc9e936f24aecffb1103b0e6dfb4c736dd5a9269d26a3f78b29ba76877ba7e35b402c47597599f9594c77e69ab0e63ca4a2085f98448529948ced29fa0ee9b09aa21726260f9436a8b958746b4d71aed3946cc4842e28e6ba0e1f098878792b775df380c3928b888a28abf1bcacc1614216de2947afd21fbe48a87b6e42c165613aca8c2f043c2a84e3e3b18dadfcdbd6149b95630c8651fa8dcd2af29f69f9d6a41474a909efebb94bf50b40a11a7f20d22ff9806f195d847ad282a97bffb3de2396e389ed04c4b7e8cd1a3c5ec82a7f7a16ba8c09ea993ff4b2e6d7a2285c7ccaac103052d0baa1cb5abafcffb75186483be63165a1e8272221fa9d0a789d0921f3ea9f42065265118e57fb479ca5450b6d476c199477c3f437cb6e50fa4a5ed07728c739d500a41e44f784e1ca4080332b977d86205d849d69abd68b6c656070a4b82aa878bca81a2e3bcd689df7108b1a13946c21af5d6e2465f1326d3fcf1159f7aa1be511ff38f6fadb93c9176c289675234169d4eebb7a1465d2194fe21e84c7bda89599cee885a9e08caf58ba4206482210f44224f9e26af0fd8ae77c159721ef19b5a68093645f5835174d4899f2109e26df5954d59f2c85a6f780214384126cbff0aa78000e6df0666859dc552f2c8916518d033dcfb8f6feb336451aded1f68fa8deee48a161e45dfc20c3b5d5fd02c3c00b33a132016b6d5323eee5176d020a02e2a6f675272cf0b508fa175a209f52912370e7f88db5d54adf0440238726b7f7218eb4b941e14e53476e25a0118a5d0cc36342199aa5f687eaf895812ac5989990c7b0f3d9ca9bc4645fa0081577b3beb0c77d938be95483f0a7805a5e2d1abcf298891392ba7aeb07d1370dc1a37c53dc6f2297c99458d14120a64c05237c3c7b19642348690ae8c9b9714f9190e00420c670c6f9214915a230167aa61ee676ea6d26d966d2955a2c248cf8f144a52550ab26217f9e0395a5322aa168ae688cdec0ebc0cc5714bdd3ad039a71e4e4cd06a6e48bfaead555218635bdb9cbea932e73f074666ec4c4c92a06b61fa19aec09da7786a1e6c106af9c898f312897e8a399fb82709504d872e9e691068b6492e8766e98c9ec4363dde95a2111898466f8cdaf335da7581e1cba3d2c80fd707d344a69aef6cef55ee71af7202bc4aad5ec94a0278729d21e38311a0eb02900e5d09d39d588e5cb9020ece020fb9fa04ba17380345f60be7bddbb56dfd298b5b43f9edb1d5c9c3fad7858db4e233c1b49224ad94810339c56e25fb8ccc956177abccfcd18119f8473e33353b31b27adae5d23807516901beefa0f2d3dcaeded3e3e5284633737194363b876cc30cd890315329f6d77b2bb227963d39eb32de5c72b019fdbc11ee488d32617fbfaee06e5c1252b31bfedc78d089094709a466066a261d86910faa3db436dee920c16ecea3fbe02ff624282741d22befaf19fe8d21410ca1bf1b00d5d8a2b6a0347da08b9e7574bfce0965b4d366df6be332762277a8f5941214c18f29f5a8c9e516aae37d10419888f5f59060e39393b5846ffaf44c037beecf3c140b09b5dd2c8a0b5c8ccf1a67528aa5c27df364b8939b891e8658c4efc242d76f7a237daebdf14d8f756ac511e9341bb7fce09c98868dea5de87f9ae4a162884cfe2bb9fd180c7be68f741a079a7dfa128eb5a7012e36e0cfbee1f45b39f6f79e23fc76184b1aacf2c6102bbb1a8bc3f08017d946e1a7c8f907d4bd48f99f2ef6159226b9749c2a71a3e8e7690b3b3b8743b35cead725606a75ee096836a83280ac1315510344994a357e7f957e69e734156ca4ecca16a92829d2f7f548f76c0d17947847352cddbb865793a9010464824275b0da7baf0b3c3bcdc8b584b14c2ff7d1cf489bef19b948f1095d80bac20b7221eaf3f36a5f34d23b24515d79930e0a43e00c6b8c426f76cb66b666fc0b6fe2acb50036027c656dc697c615a254e799cbfe2cc1bdaefdce9d170da284379c1b16a99ab767da92146b83716aad33e9a74fe6fbc17dbf2ba609f1142ffd11dc1749c7d2bdcfac1197cb9256dc82d3281dcaf569128dc6a9dbe81e21116fa4d7cf169b58bb348281316b19c1d1065d72de8bbd3da913078115577282c6b839a0e5991a8aefd7eb63872d41be5e61b8e26fb36df207ede536453956e5c8413bf4886cc7fe20676680639681cbdbb9d646cbd11dd0ac36c0e69482f16098a3d816673969fb6075aa927f12e9e812292209af2ca3c790d0e359a1e94433f3b4a22efed3c667d29f99b44485393a165ec7c78fcf92d90a7c15cd575062e92ef10ac7912b043264d4809d1c542c5e5a4d3f888be64cfe54341a6dd6175f09c6b0710349b3cfcedb50e6ea7180a0a285e2c6a522bce8a64093df47f7c1b70fc409f5d8ad37034696c52671ac7b683df56ed77d0847b66d3dfe64a7f9df1e451d9b982c0e7413dcf8a7a28fa30e6420ce3915adf22f6113310545063c0f3cd14dd808a5b619c7266a96576194826b9fd8f874f6d6d3712c70ba6cb4a0d5ae657050aa274adb8c334baf500459657122067d2a9920ca602c12b916c47d3a4d710ae321a50a074c28aaf37af99110c0dbb12095f979cd1009d09d299b691b74901efea9e4d61de47c688324b60101881a546c79f512c4ef35ef93192639bb5ab039a10ba111aa3cdfa6320a13f81adc79522f074676b352a86822b113e6148682a4885a7198cdec90623677aa4e8d121b939fd32e39a81e1f0de9716e74da00aa95190b396a001abeceb19a9dd80b42d4d9f2e1a67a761be20e6f2d6abb5daf5a30c825b516e40dfb463c60ce76557d20be04dc0271d02fe5c5ddb03966e74fc3012d1670528bd13fa17b0d03f77d278ffc76ba672a6e16a206087f25ea53805728552a9c61ec1b70616092ca2464eacc914e30e34daaaf780af39565ee95cc9bfc777c7b940d9c3d5372e92da525304da9f0111fe2551bb491556b8f624e8aecf008e646e482cd5449305036d6cf083276aa3c11744972f19e1829dfdf12eba5df23058a05b5d03517559e48808b76494af2ac47dc9ba2c30036ce0843ac0ccd7a20ca8c90158239dc464695a0362c0bb3e5930779e08307ec53a9c0bd81af347abef0c1f6ddef7342b479e9f1c339454c597e93103210939e60de92028282347211b1641df950d29da51173b6520172d05f35637d1ccb8ff5b532f19da59684a65371c4bbdfd5c07927e01fa25bc45c2031d4d74172b29ac45422f0ed98fce006299d96a18b031f395d1417225bc7408c12845cfe3f0942f2c756d85730b2e7860ca26dcc6c2c39177f6bba97e6cdd2d0001e24656b458b3d6aa6a65a77d8e6a632877f19779d5abf1aa83f064a21e83412a2cf77022f0d36a0924809a55c4fe04dfca7797ce1b29d43520fa6bf88c68b3eeab46bf3bdb5e8fe7eb9a5b39b7ed70dc06f5a26d1be3589a04de5b41c87ba66821f8cd6ff24f12599156d1f0d067930794215800ab5f9895a997e1350cff71fd31cb9166c9d80d5460c0cce3c0fbf8ffb689f20e6f9028c7c495e89237b344ecfa4eaefe9a663f54e8f7e7d7cb37cab07f8def0a430e756d4369d85f2ad8f68e6ad0dff79477ef12c3b7c9eb4a242c4ef9d312cb6350f8ae16ded8636994cb591149ee2a690829693b34bd0fa3c320b5e03a04a89eb4421da8004aeb31c03433fd28ba21e7263baa58aa693c93b1c02e43c2d7c5615260389290724819ea1a8e1d3ffa670a1717cb55c423bbb2901d2add96113d9e76ec0c91d868bb1dc67140e081cabb17e2ba22422bc03689ae6e9339de1fdd7f2894eaecc5c62d1e9dc70c287e6bc44dc5751328d60f5dc6a5f4b122d73300e15b299c9d2069b8c9fa57a9167a3b94d361c2383e815c98dbdef25b42c499338fec78a07ad80109347297273d1e6ba8123f1f4e545ffc375771220618c91c4a56fc05f1844b27c5a41a4259a79aac90b04791f56bfb9a5b1d25e13ef078b8e5418aff3e9e26f5e1f8a4ad96893c5db95b5cbd8ee22cb7fd0ac6d4639df1522017f1a8c46291d5eac5cf303a30e91b7bc229021392e1402d7e84f8439e35b75db9bc3feaf1da3457d313bf81ecfe0e6aea3379a52b342f452c4ae376c40df3d965a88998019287396b1ad62997f88cbeb26a15f6777b4ae04a265e6880f90eb716a920aa810aa46a29bd9cb523bff8ea5a42b864c6db78724dae3c179a561cfe3d50e833f39de35b8dc3070a642376b12257a0f133ad9f4fbd3fd819e17fd0656b0f5a3c3cb8d8de14174b5adffebbefa54cffeb9653fd71e334f955b5655b524b132d95c49e5fcff0eecd2c7346e3bf402b8bd42bfb072285667f3eea5e518260839820b21ed59cb761437c7b2ed2dc1b30810e9f166963c24a5f1bbcb58100e26cded6480887cb2da61616d5731dfad710e34b440638c30b7650393a2fdf2e35def169234bf3e033b0ed3e7564bd844430d8eca9f7b5d0cce390bf83d7fcfd190494e651acace81ce9110d3422c9c6e9ce637ab1cbda19ee21cea2b3266b0968d152715dec2ca4fbd71ba8830b2aaefefc7e3200cdf1ffdb342c798c89d209bc4beda25128485090bc9f82f42fd83b757be2fd709ec09ec600f7fb3f85a1b6f3484a972d2d94ba95434b147428257ad043910008ee1af75cda18e7078ac607a6ff80edaa9316b165e372079d91ff5b80fc5461862f5718b75084dbcf9914e1b18ecd77b7ba416d066c13a6fb4c108a4cbfab2dd236b3da26331177549912dcc0f557f975afbc998dda048dba9cbe3fe3c1eedc1f00628d8747606db49dd14729f7e21bba705bc1f0b0d32c0e4fce7607630540fd1a31a4766a6f505e53e30717a52183fcd92913e9d34ec4045e3935c0527cdf1bc816b319ac0680e26745166c580eca1a89f6214a7fe8bf5ff39bce007ef53a529422d13d40f287434e0449803914934a4b45df78af117e9636edf369865220430bca077863523a01b927fb8a931639e8779ba010725958fc0bc5b5fb722acc495e1bcf6bbce69c719484ae8499e18f1df7e6d8f63260a3f6abc0ed35a6c149916c46fa12abfaf0a1a0a4b6d3d342c35a12800bce4f9aa048fad0feef4349447af9b5a1f0aab7168ecec83e29bb7ad9255f8583c0c262c03a3904069b1de4ebfff93e899797e6665d9ec78596fb34c23f976d4038192a38577e51106d61fa01ba0dc94a4e46bad6dcd4303d431c82ba562effc68d3cbf5891bdf42d9385f0183f41db91a67161e308d031a2745f28d765961f7c914655929154cc744d6c3f97dcd857f5bba41f99d1df6514db761c62eb39a21c9bd6142dc0b011e94c1d2de483a2a1f27ed475a89fd90a0a5f9dc9674a552bcaba9217350328a56d3cd3b3c8d32a90d0b64473396a8d4e080704241e2bef0e04861678547690812332020383cb5b641985528e197cd8c5c3ef6410687ad3556419b51964203a1e954abb5785dce6f9e01a909167346122e54a791ef3e6fda131deb83a5f47b2f99cf394460b3f3beb489db2ded2e9e1995e7916931e8a6c243304ea46a51f5102209885ad74f7e820ddbe9961ce342c0535df9a3f0c1d844ba7c560063623c9ee7c2722721cecb96c4e681fc6f77dd4c466c63a9260f887564d24bd6cde5cb6d3710da8b71e39002b6f7723195953b2ec67b86b4400f9715bcd0788a8c610b8d9154685238fcd17c34fd7a63210c1f7436143d6fba59eb772c5989c8ad11c3e4eaffdf4545b744c194c5b94d25f8b37edaa73676d922ad2a64d003e34d45cea80b11ffc2546f6e0d5f48fd9f38c34efdf6bd109c56015bf3669ba55b5c4274f7690d01692967ca3f670021b6cc3bd12ccfc56956e38958b317f61b9df9d1e2bc000982b6c39a0799f4e950fc5a45c9481c099d33f3e4683572138e18dd6eecba09153f2b60c036af01255d5d73f0495edb929d49f84daf15f8a5ea4b44d9688fc9cfa428cf270f8d92b7db5e36235b4778229221fb721d2f02d2a2a14eef34e6efbe272a441cbe9eabeed6dfb184a110ba14b6b8807453b0ad8dbc93210e449615a6118b1fb9baf8798e076dd9db05bb0f6e7693bdc80dd534eac5d1dcbea33efa2cc99e67e6b9a771b904c1cf79689b507d17ef39fdf8f8bcfc8d43afdf211c7624cb57f908715faf7ece4ac341fa25bc8f128367e913e468bf6bd6ef530b4bb7e54f58738ef68f763fec486cedd6e6515edd7c7c6bc45fc92e49ec210488f4cd52594b93b0496d7507ff8d924c7ba41e9ad419177f015d4e80284602a99e747f69352f3b2b2c6f37a2fc6fdb5e4854ae66daef921dd301eb1487167fd32c5150ddd4a10003efe4b21e192a0ce44fd61379396958b1df8d1835bec0c02ce746df12db275d249a584e4e0440789c4c3fd3307c1d7d17b58e52daed82d7eaa5ec14bb7da53b676f01b063f9b57d665a62644261d9215b23c535e53876f7730dbe66b014fd6b425c64ad16e9a8b052ddfecc2f07e84686f902465a4c08f9137b424454d4c53dd967c4293c903204b81d8e823b61fa61bb9f36ac6df478f122e28a9d6654f32cc7bf0f3d7ba9044c740fb38af7190128d9177fbd836c120fa6ead3da392f58e9faee53a00ce1d2b3cfa70586ed4867f50a29eef623ce0f6221dc8d7579d6e387f26f9aa7211375c36bfb8105ee65a619943ce255615758d454ec8e125132b754e65456839fe44fad703cad7fd98232a5f9f793adf559ae98e00ce49cef2df4966db513099cb9c5aac52c37c57429ddb2db42d355bae55cefcbefa42c515497ce8058cd759701b96e1234b48dd8f56f524a0edaf58817d26738b6f12cbdd62c5cd6ea8fe63927b3bf2a2004af728cb848f50127856087df9eb772d7cb63969c0fbd418f98eaec6a0f112b53e0a0b4ea2452029810896e042c4e1600dfad4cf18fb024b045184bed3ebde542fb20e0f9733b9cd24865f5119426a57c1f09c796938a5c01d4dc4fa880b41001f66041c92411b48ae8da03509db8b63ff449f801de77c7637f246ebc31d8179538f2e8c4ed67564fa75bfdfda9e95979fbac7ecfe65193d95482b1e2e5632b3c01125cbc863c6db1630b6ba3cd89a8421a87d6caee5527d5d5226ac1d8727beadfb527725e8e99f913b1b8bd29348c694f3604bb4265c7d45a56c302a8c8895e80d4ee1636ccf1b90cbc3c8e9d428c88ea0b33713d2923a1355b0d5ae32a5a9495322e1c64dc1eb81cfefc403328ee499cadf9028031a9c203c5c99334c69ac40ee99dfeb4026ff0076e88552946d62192f3eb0b86b33773c4b19e72161d3670cc0c23a4c8bcced1fbf5136d3761298e222e674fd313d23efe87bf08eafd499c7776a096780eabac8d70d7fe9b4b780373014f14a837cf96081429b7d716e05e6ddbf923ec4339f120e945af85ef8ca4c0daa5c8ded6707a508c7fc0bc4f2e4213d502a947105c5363101220698efd206b80275c52bb5b738d1a667120c5d9bf75193371279f2b08df9a0e6430e052dd6f40ebebc60b1d06bf144f47e02bdff04231d54f4c88174696f2b82e69e23a806da282fd01c1d643dc4b1165a2c06c9d4bf7dd2faff037caa70713d77879a63657056fc00ab7004b48b346eeaa9fb8946ccb8447ea67e38ef5cc8c2edfb84c5fa2e18af344053c5e32afcb8e1ceaa63057ce19f5b518fd028c24733e1eb7b57f00b096981527c7dcae7a9dbf8e4bed9ebaef3ff3282bf781c225e25fb5bfc1c5dabf17348d93fa995ca7ecf4fc066de119244823278905da751e305cdd8160ece676dd340a52ded21acb2ebb8c56cb46cde3f47a5dd758baa76d0fcd77e16188ce7be47ec8cc9796f65dbf23d9f89e0748cd865a12f3ac5cd3112c546f60eca07c76d164e45b00500de1c170a3fe21883bc14d1d29fbb65b39315c18952477e07f58d80322fea097cec5686658260af6e16575854d78be2001e1a570cf105fa0ae2afd94b88d6854faf6ebf42780e605fb134f9341a8405eee3e72d52240b66db83358656c85b9aa6c2282c5b6f15b8041d856c2797a205b0b10b97a3ffbf7590e4a0ccf23b871ff3ecd6fa57e04576d39c01c75ebc0f375aef1839f5c2234af7f64140f7309bad6110d93d4711f31c1f9a97429a7987b100c8989707a487a6dc11d344ddc96cba3d99c8946b185e8f1b581db415f625b3d54b475a11692d0a43e2ef0f4432f5d4fa76129dd98e0940d874b496550372298b88c4feef60f58b52ecf91116cd3a9e3353d27829f05aca39e9b3d1ecaf9f1306c5af21aad5800491c81f7125f6fd7cf787630e8cfcd50e4b71fff2ca33fddb9365e74689b50fe9f467fc086842e81b8e3f7e4bf16c83b4329137c5eaa06d909a5cf4f69d7798b98e37719919db181891d400b2c952ee0bbe17d323f4fddf134b707deedc0ec43fa6c99cb404b3e89090e4fb112d4b4ecb3a5685dc6de983edbe657fd807cd85fb5b89418a4de77441ae43f9fc72f8043d5c917a4ca774fa9477886984c1870899d7dbc735dee5d16205b3e2544d2a57007ef7cc7a1b8b28bc4151a01c0980d139574c652c7e0d1320135449aa686ca80201924912a137051dfbc88d49f908cb7cffa6b520dad9b4cb4bd6bc5bceaed94189871f6c7c5db827a0f87f04ffa83b4ca0f20a1b9b23d3ad759f5621bb4b8928f08912ac4e1814e3b1c87118a96087a8d6ac0693e45b0b85ba9938ecfa9d53fc7016b79806aa121761d4d83f512810cb2564378780e7fee11c35a542f9150f918736dd30bdd0dfdd1ab16b81024fd1d622bcea96d63914b64f06920c4d868042e830ced6c69283f63d8cb3fe1f9f596989600a6139812a94ae7cba584fda7f5ccd0f3197eb14d6a16dce544c0fc7f968d00e87878651d5acf71edab9df75f5cb86600a51052604e43a0db4b9cdfd27766cd29629f47b864228af23a90b917da10d1dbbe739ad83f25619d210f143ec71abcf1c33e60a285f9afc2b461102694ebd897619237133c17d7561b31fb965ff89c7c6335e27d98f2ee059de6a1632a3b29997cbf3e29825985d1ae98802c4e89e4ab85531a60aeae9e32f59a3d47ae6b475553c75dc1a1e392cdaf6fbb9ec96f6efda93cd235033625d0f88e9445e629fa548e7851445a91bc9d33b152f8ea720d6e7d8cb818038c55cbdf72981fd9ceb245a149fd411e87448ced8ee0843f86418c1c8995097739e072c2fa38441eb9fb8dd21225b4d6155fff49070fcc74709759f82be868dbe3869878bf08c69f6b530c57819b9ddeb18bbaea096817d1339d13b7c8a20c39688589b03dac4617215c49a199ca28b7f5962be471e64553ee61a33d9a95f62397266a0ace0a7dab1d82bbc83f6924579bae70585c8d0ad619cdae900faf99bcfba4c0e4590ecad10762390d9ff81c87f57e414086166509369a499d89fac156b7734fa76ed8919d89af3f4331064db153b2caf1ff0458ae12a8b339cd036fe2d3acb6af4e3ff6a96f107f54243a95c9aa32e1cf13d13943d104e1fb3316163aac35390d594e3ffb46bc2e8f8feefed6f3c5f692032b4117acaeb153ca23848edcb5dfdd479904c15c232de099030c31d3bdad1e5b0d940565cfcc661c0f8d83dbffb565a4606b87d91898fe38f9c2cc8f2176f5a50519352a06257f926374dbcbe6b0d851a604cc81e37b8f989db5838fd4abbf131663f8be8a8b60ba798ca529df3db324f7b056ae897abcd62ecbb0d4b98bd4d5079c241575e1649233d90c2e02139f5f7a1d3d1dca7d5fddb4d055179d7afa7a27ae87a21631caf7379520f0ce70dba5f21cd429da60b49660cddd3b3cbb6ff73cf48206735297f730957b2c7451dfdb649cad6f82b0a7e6242e7f3a80d4f3402d5d18c582b238fb5255f852a9facab3c80ff7e1b661aa85f7d74c074b4e131d0659e9f3dd0f139d40486ae512980dfb0a755589e05cf1382ed147d6bede093696f35c0c20d09f56b0077844c022241cd693889c08708586b137485911e78c49b0f3a55de90441d2050067f1a0eb918cf5cda36016a7abf44bb4c760f301bf9a5d62246b669f38fc2ebddcbcadbd1f00ef63bb6aee6015146a4109d7361f0486e86c3fd98afe82ace2f8f135c871c3ed8aae4eab309cc3aa5cc8f8bd7e524f9b96a301656e501a665cc998cc7b3f26b19135d7e050b8ab600740c023c28f2110d67a53e7e9d234af27fe2358a0f4e199cf9214266be05552c003aac27bb6c9e8c143e710039e4ac2f50d46b4e762a74ec004d6708d88b69f2fb9f7778f238a352c358838fad9226760c93b1808599dbc2ee0a95b6168726730dd5a264281ac6d0c011473b85cc2b198c82af9717c0f9962fa69693de4f3cc9a4b09a67c1fefa7e71b12365d4251fb5f47ba313ae7d4438d26d72cab7ace1d06293e92ffc43f0237c1d07c7d3c6563026570c6fd6fdba16867133e0b136281af65abf4295a887f206ddc38e71e9aa0c8406b8c1a4695f8d1a6eb642b11e3a9b139a9a6a4552e3df886fabc6ce8608a7d823c2a942ae8744ccdc074e61db048ba86b46d0c22309ac97a45340eb0af4d8113cee669dab14075dc74e3143affbd2dfe7b3ab216a6fcae65d84906b78b85a122bab7d7aef87f9e9fdf4e3f00b0342f73ca06d58f7a538ddf0308acbb92c6f104cf561d549dbc676402b4ba34fd195826cc2cb20d0321e737b77f41db1d69de17f2bfd5bd0219431b4cae8b4ba16a2bc283e8e2b07b93219354f1f09d636c6a8c5af1b775493b133641204105cfddfa751a1ea0043736e0a0aa3b7697523196421749615ddc209adc990b40a970900d44cf792160802df72f64c0b01942f9d97346181d36a607ce0c1b164859cf0f687c7bdb5610dc0f01d20d4707412659db6c403624ce31c2cfb0ff6d6b5b5318bd6ad59e76e43d0dee3328ddad739a1c606aecb27c1f708d6d99de5b7c5ffd303815943553592e118f5c0885794b9e71509ca68c131c93742303db2a216f0c999c27b9f13e9beb683d8b4c2012d86fc6b95e95e6f7a0df9aae156713e1cdfe563ddce7dc1abd58feae23a667119740feb9795f16dd37e01194b65d4f4464f74128596c8151b3bef731f08ada3c2ab27a527ec95452c96d9d7155fed7eab4e102c546ab9822de7118685cd1ad8be53d4aa7f264fe561f68ae1ff3d130de0c72379e31d987e8ce7fe7f4b0c90756e6d481b6775b895d437306d76318d7499b9ea8bd4994c9d91d330f6b6b1f7cca2841c0f63129455b36711e42f2c3371aff509487aeb91093218bb43e85dc4ce4ad877f9cc217e6f6a697c5040fcb7c3d81339082327645e1d9f1fd96891c4bbdf89b2cf719c9077e83a5f9cec19ab79052cd9d95b7ab6e20eed367a2352704e4a157f67b3ef09321d4a967c70a02e6d9d5235364de23b9518a3f917c2705bd8ddd7cbf548f4966e86ff5aad99c05a66bf67d706e0a2e9527bcc1988fd1724e088b875802581465fecd604596bcbf69fe1c27a1597a62c6d037c103c31befb119ff7a202a388993f8133cc69bcac58287faedf091183b535d806dbde57f1843162fbf89bf047e2ba4872dd7c40b513718497c64ba53dc7961df7ac416db96bb4328d89e64931fe780f0f3416661795456fa2752202647d217bbc659ac943e32289ae11dc9dca26d52b8a794377a888da931b0191bec6e6811059cdf8172236a3949371338552ee34f1faaba3762a97e73322d75ed66085346fb545ef694010a728edecae2b19308809beade086512d8f4faa9ef3a3bd8cecdf634ac8ef3846d714f75cedca48fffee85bbe05528ece093188d8eb4c8b2ab60d4209dedf19bd410a5153c72ffafd3c8cb3d9997ff78b9dad1935806c524b2103e47d6a5cb07b69447c50cc13df5fc0855ebacbc297bff4708a74d945447ff1a302a3668614981447815d8c7a28588cdb232cb16fa98dfb9d8afe1bc9262fcd2d4b45b9c2d9dc35758f33c0f4abce02bcb0eceffe7fed07f918960a3154768e47f94eff84b5e5228bc69f94caf0420f73b94ce4bd5e49d335daeda16f7a315213d70ff5d9213dea0b1da7ceb1145db9f0d6156b68902c87b70fa8f9a446e2ae12c90cf467498adb8e33a9225562c0d5a5635f59f68856c3763c958a4b9e5af5fdd0dcd60e5bf1090bf456ac36b54d90c701d25001f2935c4d4a9cf14363ce97bccfd27692aed39bc8a7ffe830b8f79770163ddea1a0c0f69c70df048ce0ab844ed625b5c785c75a1f3a7dcf2d0431e11197cb1f7b94f99809a87f390b2930743654d03a6da9552835dc709d6f7a06bf0d9fc600e31e4dbc947aeee09046500531d842160eb83b00b41fc729517b66004866aab2701474ec2dd011eddef194daf893d1ed78685754161bb6e1e54409c9a299a8c2791d6584b00a720fc00cae28aa2854a1212d672d27b2398f0b0f66ff1f6f2f51e0cbf60ef4e9dea70ef1684cd02e26b75af5b21b2416e231390889b9382968e05b4a716dafd43aa2169deaa5acd5c041d187480a2c11628ecb132ec95b7f4531dc8b48d5943b7b7713765d125fadbef6f57624b75064f6551dbb73c8b02584ffd0e43aef8f45ae93778e875d8fe4af5c225eb112678019bc306eb0673da0496d8451c5c19a85b071c445812b3a4db3159ea5a4da694f230274f5780af05f29e2c74bf90ccc18fcfc5fbce79c1e0490e8ca2d8373472bcd8d95ba367865e1a1670c2f534e31677175cf48fe69072189662942fe140cc7c4d34a172d8bc9e2829747fcf8797dc16ce07aa608c6475cef1e236c39f79e6a7df8b302dda18f13588b232cda01a66d56aeffe4d5694598459cf5f91ce89710a12891fe08dab8bd56bfbea96b51dfab93c3a2bdebda35c405213fdbb9e96a22d78837a342cdc839069af57532bc8aa74f8a09759a0953024f4e37b88ffd333f83a684c10aaaeca43d151700e1c3a62f27010018ebb2f2b13ddfad02356dee295c916d88055750fde7389f84aa470b803ebe087a746a30bcdcf6a72cf1c72808412656b48d75627c0f9e79d8e25be294aa81d44e966c645f7ec44c0fc33b0b6b703afcd233883edde0d7022ac89cbc7deed8d3627047591759a0f5a1d4a3cbb25db825f506605dd9974a0eb6f064640590ac07fa87c8189045fb827f1ff0e6a4b86cdea2a526519b3f6809b241c1d233919aab1e74df049d31cce0cf12550bb356d8ce79d371e522caf81d66a6e156df1731b5ac10f3c1b0c5383639cb5511b73a9773ecf3435f02658582191084d58a2d182bf58024944b87a563c4cbfbdc2ba7189bfc3dc585daaa00ae98a6837b9da097c9a37404a95d04089a963cae5e3cc44f58453048678a501f48b686eb8bbae7677d2f8d0dc30cb204b5fee43553072c8574ab4dfe756035cf28203f80e4e3089bb7cb7c9b4a06006025525adef6a6e273a3d0307c56d00a2647169d074cdb3b9e81a378d38f2f6ce2ff7e63c3f7f715bca47bc9611a68f317cd9c9fa3d90f7d2c98e7d772b9b387ff8e7d89bf4b03f0104f0eace7f68313cda36d86a652225c9802f8e87dcbea229d6d76df11ba020c750767cd64a575cf190bd93b5fe4797dbef3bfce0b57f9b092696037a8fea2171e6c0d9253f8dd0cbb7112a060f771afce52bf23727dbff642709fddfdcddb4f5ab7a35bc6aa4b7f8f67a0f0eb5e87d6f634f7bef14ef2056c99cb6ef5d8eb86a3e316f1ab4f42398fccd5ee102e1656bcf78ec548cf803010b093a2f261421afd23b3f205a2d9f78b607be9b5ce0ad0ad52984961f1d94a38872a1da1996a06429af8c1d1bb432ba15ddab10d1d3a25c67782cfa18ffdaeaef40d88dae243668a5a098fb20781b79daaac6ad1e3ad5ccf9d35cccdd2f3e91bca2c8cfd0441128878093b3903aa6450a59db0e8a954a214f4c917fbb0cdef23f5a68ce3366b6f9706db100058c5589baba3515380296d4162df1ce02eee4ad69a330ff4cd20780651882f70ce8ff329835a03146e416b930cfea3a865d216ef18b80909c23a8ae667278b7f39ef072d041615faf87e98d194a2e6092e88f6b6c28d7e0268f14030483979baf660b33a8e20ab77d029001f75e317cbe3f0b4a0f1263f54225ef9b957378812b9c4706a363983223deba9764fde4a6398470a3032e9711d3bbf4ecc8baf6587338baef8642b0b870f37f35e1cb1a84a057a19a0659274198cfa5486ad2740258bf1cb0fa9d50e8051453547ac7b0466a92921bb7b585adfdf8c67dfb3def0c3684b33f5614ab7983f0ec6824c2ccecfc0455fbb258d494419b1cc09cf575d4795178d02a971b639e06761b3d3c44e29a796de58bacf443c0e8435c6ead7f3ccd29ca077c3e25870e5b8dff9485279aefc78708abb49d004eeb925f237ea7f17d6a51fc7038e37cfe9c2fca708df88210d1a5471eb8367dc87223b4bd290974587b831794e3370b7585f76b0b43360cb901e71d2c6f3544d2c926a3b4bfa830e2604537a00e98559e32d1daca700e97b834510e16040a810acf4a5ddccd9640993d9787a69d3975a2d8c5cab8fef8e40d30a095835a3f139dd563469d8a1cf237d94bc1efcdc4ea82feee180e3145824da6e549e3ee22ed42ba35efabb3334424f300875b872936d8c1cc9f782306cf814e3d4dc423f5102e131a7a9cd7c5ab4164c3856d5b690d23078097820e22893990c5a77c86a9df6e52ff06436bc67376e48d45a49923a6aa4863c52a75c96a10f1661276006730431b42b4003af27521da3eb6b88811c9e23450b4524d41819d5d4f5e4967486dfeb6d94216965098a540511701f7f6b74e31434e7f635943de645ad67f51da9f4bcb797499bcae0117ab295926ea36b43bc223f10f32c52b20ee642baa7f07394ded9acfd7291b54ffea290d92c60bd9d4510101a9957e7eedacd841135be2851c6b5c6c4c8a9a49192e17937d621ad4e0a4061aae7946998ab57466026e44033154d7162e221164082852e73dcd140ad319ba27f566c2f40e7514ee6e26692e14e9df93335072fa91135ad86d7ccf7c2f76aac25d2041168b101312e3c7332f1d13e6f8a56eb9be72f5a8cb78c7fc6b63814b6cc15de4aba83b278aa0d399e18d4c0b813d6b899ec0fd65be2fce222010d7deb572bc59f6232d72e7ababa6915b94fad2236fb1bf5a26bbcc3a84ba6e33512f3c83ea3bef58fb6941c1e59824865e5687c6895bd72abdd4a49e2d210af9f1be762e03a7fa55a56f667fd707b976b9012617a96cb257f9b0cbc82096343e9fe5f5d4c652a9c827cc41db7202d170767ac4c3e78441853bf7ff807806094c1ccda0ccfa3bf1bfe8b946a4824d88af159e48e6a98f6190e5b1162d83fcefda1f5f6c06b226d6a4f5f01ebeb06ae30a0db35f6398c87e928041cdeb28127b02b445fc02d6cbb57fbe01219c59d0398953b1914f7ebfff264a28dc961b5bcb68129fee1118e1a04494c349904f8d0056a60f87b17f768b39fb345c589e9ce8d83ad99fec36d967d5b612d98903f0c76713f2ad99c3ce4b02ee6f641474f6b7fcc7bba94f2dc0a8fa35c4795153da23b4be4fe677a484a77e68461ca676179e9be4a41666e17aaff067d7207dec5e584f00d3db720253e23c3754ac041ea3d3032bca1e9fa552715999a9b4b4d60366d32ef416c925e31c23cb4d74b62d7bd64677f9f9d28f9ee3007fb7cc65019da8a03ac97994f51a27296005548d496185c406f0fe4ebdf67cfffcf08ae1024c567764c9b2e413c95091281b54558492fdfc93f954f82fdb9e67f8569e5d6617ed22e3b93fa086e1d4d218cfc9566ca554ff5e1af77a926782004f82ae351db67bf3b02fdcd6a19733a3c36e39ef20fdedb6050abeef2f9994bc1b1814743c2ca5ef1b9c757f116677d162ab5f5dd4fe264f506aafbb3c9553cc6f9d89424e54da3e32a1daa4a6833b53de1512338e282bbcec3dca49a7b9e1212621c9f68532412f6dfac54add8ac98673ce21c05c4cc223cb587e5118b05244d2a917fcf31942ab0287a393ada601e6a7a67e9b7d0f08f0c7c9a870d850bc58df4e73e87eaeeda141513a971426ba544f05db2960a81f0bd5aa61f60fd0b1eac3378c103db25593c93aad0cb43ab84a3fb403d676e9d37990fe3c9dee86231fec3e2daf3dc12bc16cac04815366767c9a02d344783138a8dde50760525496b810874ae20571c21a4a90472b3284fbe3833d7a2bca535a61d46fd6fcf90d89372836b2ce5bcfb3cb11b8767728477160115c309d28b3e370afc998c9b07e5173da89631910857c28ddd13712c135961d598a098320ef08e2621b6ad19646fbff7f4f53157fe8cff8ca31298c99001e567e038216b93d150a105a7f2487c73255f53c59ce86309dbd9e7606ce31ca82be5abfe0db7ce3cdf425c2d1ba0699680093f422479d5e23d1f57a1cb707b20771246fff69623dfc12c2f5e3aab8221ff4e597b733ae04e35c44e8b148d1a0c302a86beb99c64b1db301ea520760658643145fcd032d51a28df02b852e2a15318886af80b44b127966cbd1f4c4fee41edddf55235b51b74d65727401e65b5af6e09f72770b63b54f840dd97d82a15bcc45d26b344b476fc1ae67d7a3f299540fdcb08b7a1961772cbf4fcbcfe7bdc825a48b32c50dfb4dd254d3eb1b43ad69704d9dbede224a847b52878bf957609aae932dca8cbaf44ff5a6423bba7a35d16594c833fb7a77ff2f3e817205e47e1857d6336022450d1541facb5db067b9e7c2c879fa67fbb755d0a4fcdecae6a205ec160d9a6c90a6986673e06f06a1cd9ea3a727c0794a9227bd9d6c731ea88b2f51af8decc92d520132041f93ba46952b2637ff9e570ea2ca703849ecedebba89bb4012b08fb96de53121facca373fa8579858ad5c27f047939bbe5573854fe22eb0cc5396d110800123a21320093de260d2d23f7f0684e6e8371d16aa914ad683e895308ff6706f0ea26ed3eeb6deac9ea57eb05d1b4ea1a56c4302522e3ef99b3020757ce6f77256b22c2bd5971f114be5625ea362341f2b9b3e493256fb141f523ad48a741416cb8e1af6697aad456665b04e3c4a82fdc6b0449a5cded19288694d968424712b765e1230c8837f0d4224f22dc8752bfc6f9d15bf1b0f7b3c00e0aae9990266c0907c91bec03ab361dcdb3b9485375c13d7489d90f9be8ec923602e6bb29cdba8c7c4e931ff8c41b960aa90bc8bfb0c44b0857f87d86644f6d64fa2a0e8346a5ce4f0d248aba0ad4a6daad009539281d6c2f91462834a7dabf0cdd5eefae6aef0e56b8a542898e7aaddd5cdcb29542e7b2e9aef6c19e7d0ad7162892b57a4a40b44a6d12eff5eabb3ceec25906135350ffe458af13063b5ed7be842f547f53e3950b27b025079bf769700e4dd68241019fb64ef0bc731368ad2e6f56782b17e57b03396f74d2c0aef4e703ac6a454bbb1a7758b835b77216c36cc97cf57e0a8d026c682a0966d95e17cf2f699fe42401e0853ee7e8aaec880eabaa5be4bc6d8c6e93f823020e5c6637fa75f818528d4d9d641f8d54d5e2f037e2c1f084f1c93f11a850fd58a9f70575505d43cd5f4af1d08f7ecaf1f44c72a7601c749c62a7bd19d98c4a29cfd4ac0fa56dcf272a678a4ef4ac6d7f390022a2dc01de6089abe2f2aec3ecbf67a8cdeb01abdd62c4dd83f87665d4a0ba0e1f3d12fb08f6f260125b0e215bec37d0f545c4c1126cb08cefff03345348a6cbf4046b6c13075581db637ac8e703d598d46c5a7de5a4fc87fae0e339d12bcddc6140e8f5fe12245f292e2e0d28a32520cb8e04a568a5c88609e03cb2dc179c01c41e529873eb03ac48a4786e3f412b9aeca2e296111bde20128d7679351d5abd6f0a1d9410367eadad1137054dd3fa5b0013a9b28f67b136c809955ee20fd3b41318da09f05fadeb101180ea050e85c206229cad734cc258cee3296465b0c32a8c3a44f9a1bf8b8a4b5edcf96560f6595bf076184d861e7149f875e14b7faca240f0a417fc1c9d6d615955f5132ae5547fa4776fceb3ef7e31bde4ff60bb6686af9a7f81c5b1181b87e348300fc79b8a3f7562186c75d1aef911cd340bc004d9086eaf56ec58839b08c921aa7bd380ee0f99e305cd38e6767c36f738fa4e43f6a57013053c623f8e332375182b1e2580146e22352e4dea952736d602c6cd9a69aa5bcf12e54438401dd17cbd2141450bd0f7dc02a4d4fbc70eb70241db916cf1024351b5d0e23c4bc033e18b8845507eb64cd7db76f807cb7ce2e0dfb2d8546adb07f564cbae77f6414563c14cd3e141c0f5d3cd6f7df1118e145ba05c14bb715fa613e9307205e1d967bb1807643c75e74bd55662ebd7e710b1f23e9800c9f7d414bc58892d30f3123fb7eb13fd575ba8da30a4adc7c5edc990f897fb5dd9623dc458c51ead0ab8e127e16681e16c6a868825898743d0600c3481fd143c9e7007f56e16c583355fe4b2eba5514d3ba637de1542f4e77b65f1148b5d1b32494311404c001315f6fa60b32fe1da6b80d16fc48f2974ff4653f1f9a53471c85d097cbf3d6587965ef61265ff2d1009069942901ffaa8d5cef4cf8fd52429608465f8d7ee4f90be9a8d5a84f14319feccf0b0658e5b4873f720c9b90399064c347d114cf59209c1a00e2d13c1011f50c5a2f29657c9d6d2184689433911ce91eb721ea336bcc18824a4c8fc6d0da5d94f05aad2384ed9afed5f83988f8c9927c301bed2ffc94b67a371213464111bbbe1b71dd76f5c0579151bd7a5ee283b991cb0b796bd824dbbb1638c9cff3ecc167e91bc0dedec30c80ace093d09c25a09159d3efe5ede317f181a3a879935f3ab17d2f0cf8d7c8775caa58b520641c90f0b0f2a1e079aaa7a2b7a5a0038748fd9b37d32cf4d5bd40d8dd37b198be14df7fb54f22ff3860090d20606f80b342a43f33ecae817d1ca32a66ecf45d4532c4c4c99145057cabc2d55b870df94d25be9cb11dbb9868c2b3031651e83f5f83df0fd73cb3dd141497e4999a263da406d763069d978e01b37767a7eda80dbef837078db98243923dda656952bd18979549b19964320754d54f680bf2ff7a2482243c008d4a08dccff8c0ceda8b370991fb27d09842c1e7c964ba81926607de6809d475065a3f8c671c3cec57bfff8248b5a621be344582351c5f45e9f7cda5f8990eddc4160f77cc8fee878604175501476f80f557c3c4a6f124f5ebd28b02452e26d0dc6e83e0fb1d67ebf6271eb49cb94678780a94ee9267e3870beb3f4222be48212c3ea39da5eb9667cfecd1b205f1910a54e1abffe6e7f033aa1940c064b20b776fedfb775f8b1e1060d61d52d2c8dba9480ea3c7f1f122b8a6a055c4c97a19dbaec1aea4766da6afba41c3790ecb0c9bd0ce37b4b79b7d0b556b624289d0c9a501654a94278c03d870f6f70ff09374e4daa4f6c87c7262ee5c4fcdcb609c5affe7c33ad6d1a2c8364a9b2713a3549b676fa44919b958ccfdbe04e3895104a62b1de32fdbbd11599f00893b27ea7431703f48b1a2d0c59a2f9ce3f1086eb2fac553e34ff2c44e8f186cbec526ea4ef087b66c744800520ccec0277e71157f29e518d4f92c4ec96d64322dd7ebdf736bbdb6f81afa15f0aa9bc2e996f275194d4b00151f9408d5f8a1a083b03f61c1c1859cb47e8593dee1d272413e63f37452ca0201b4dab4f413489b12499d991776f5519a7bef60fca1df2539d20252deb058b68bce27d5a9fdc6c8fb79ee4b4231a01e579e649ca2bf4da5ee1d0cc84f6a56aeb41890f365c1b27efd8b7a83206cabad272ba13e136e037fbb1b5561f7651b60b269d151dbe3e1135cf582e92c0b0fdc75dc94426e91315012d0cd1f7e1f1dd38f0b6cf38985e710e6d9c22344ecb8e4b9559ed1705b28e7a117819111ca974b3b7e401235ffe5b02544c5b8e74a6125ece228935645510302fdfebdd309726c28468cf652f358a9412b994103eb90b804f1f44d3c372fc15f2e12e24e2ab5c700379998fd54e5b328a590b867027ff437f15c16da66f1db76b3bfb8d82704f2bcac62cd1bbaca7b72ca0c078f5a25d372b4c24083cfbd0c45d1606335270d4e83fcf0984b444970f259359cf5444fd9b0b32fad46495e34aebb3dc2896d74b7276d4e7e1e5ca152d322972760411ffd88eb4cab9729215a46a547b5f1ce46948520b5c50ad8342ac0ebec030269b1d62c59090a00f73477581a0c5d585e89fdeaecb93c4e30322150cd28505365c15d2693fdc46d40bebe1c26c792e08927b3301052191309c8a298cbef771ebcb98af3e0b1ed1582e33392f0b6a6989528036d1e713e958323a53b28eae0dabd8e0fffad562c80a2cb3b434904d1eaaa7adb1bfc5374dbcd05ca6fb55b47054541de86ec73433af1b616aa6d46fde29c8e1b1174643f1299c447b61639dd091401e759e591b806cd1180027aa3fb7cc3f3ff967f7b2f992036ee1dd4cdb3f4f986a3c45099de536b20af102b8f594dd34dee2c4ef2efc77972c69a468fba2f9124d04728ffd4bbc40401551bc826a06819e7668ed1691d8560428e731ad3ad7b28629c2d9bf856074d80ba0e4a1d26f95eb451d2ed29b424543483a6c8792904aa3b7ae033e86603884b89495931a64891901f14dd1c0da89dda8da063ffe53aad09c84b7b419cb354eccb6b124dd00eca9756cdd647e5d123e0148ee35d8543b54489dd1b984118120511206a16a143e9255f7887d49f07a3db34f8265790f9463692d5bdf7cdebdf3f1d54e1b8f6647c4512461c23b9dc34f657d7cce8ce1077a3acffa3d105f492e2fd9c40fcfbce53fd8ff97f823172b313180fbaf197652b08509145ad3a73a55675eac04b22e3671e1f3d178c1f8b6ee50599e49759172554020074125f1783550e914c9e2db4f382e869d3ae09a44114a8d3f46c769600242e28118b00bf73d6453dc1d31d84be0a66086cf9b8671bf57afc5954e43091b81d2933fc0a8e11b16fa99a0b4fea9d8fb2626ed8377d2419d985616bab4ed5b3dca96c08c1917a1205859537fb41a843b9fe2654347aa21a207afdda7d3096f286d798a1f249e550fbcbd8903ab94f387ff2c4d5f8a3e6d4434a9aa419379c31bcb7cc96611e74a8b712bbf8cfa4cd713b5bb969f9ee92c142b998e1bb51ff79af23d35d6a26d624bb3f5899ef61e1b5c5f7ec246a61e002695da3ba517f236b0e805578ddf71556085c698733b97fd42593b5783955a8ee405cf3c25cfcf881212ad7432ac99d9d08a4f4c5c812d50eeb13cad4a141ed088deb60f0477bd361ce88685c26a3bf5f1ae8d8a733a2794ac718fd0fe2a03df9c7b6e86016d7ec674672a0225c12b3bc39f802ebfd804f9c10d310fae0d4e8966c2c70a3d1d0769e886fb08c3981fd35bb33f93529970faa5b0ff72cde14de0f1000e94455b9a8fdab59d16438aaa732fa1fccfb94e2e9187f7e7beb51a937b40872d41f7f5eb81704b2d880303221949687fdf4dfb9cf900ebfa13d14e1d14bd2f165d52a10cf5cbef51832fa98a1f246567ab2140070049f0181751fe921a5691a4a8341ed930f08011bbeacd743ec33af16dda34143ac64f773dd662073d4a92506611f906de1902d2d447a86e6854a2a588731c139d8c544efed895f4f4625191e2965e390f94fa3633243fb515f7c88f5f2b2d0d4e81ad555ead08af33a39683928ede0df367b1af5262241d8d27c12997c46241e20dbe1df4e2d27df69e6af4ae89599388f8880aabd5bd5115ed9632fbfd9cdf95b3177c755abc41947ac24d68d8ff9bc8be362e88290a7660d608350d010a8c02670b6a7d1821e78eda41104283f2707d5124a3a702cd6f9d100185dd687743b15185653faeee5ac6b49a9cc88a99ff5376c1824a25455c82d019845be6902df656e2fc1941b85e4b1921fc97d749bdf0424da7af5552ad99448ba353544c180f67d1325b462af49f9bf7216ab9b5c294c5ef77721b781231608d53440f3ea33f31044079082ccec671b1f3998156c62cf219b02dacbe51123d3d3ec20bc35676a430385f2ee14b03a5365e01905a9dcee5f7f57924e5966ac48facce7a36795dc70ec28358e77affd95c2208ca483bd24cdf58d0b50f8cc4c283ff994c32882f6d3d5e07860fa60ff2a27eeb0a2fd112eba41fcc7d7d71d999787534202c04e464b035be8b40aa8bc662b2c4839f7bd387eea8f8dc287eae366b2113cc1cf70b3b33fb3a13cd60c6de3be34144ff80949da7d5fdf44f305e6040af55192be8b355405d4af365a245404afac10c6cf5c670cc16fb09f8b75ac56a78aff4ea54926c9082f5af7aea18db2ebbb77772480601078e1f59bebb9e38321c097535ab2e595b4839e4c99eee4aeb38b8bf8bbb3a6b24d5b13457cf9ea794fa4b31a11e0e3449fbde2487157b43f020f7e84f070ea16179ed98414641e542c86be3cdc76dec3394c101e463404014a68b8da984f8c6436aa5de5cdd838ce1648013b35d90eb2911f1e8dce29155d7f972f61470c8fda78704bbf0c7d195e0eba303cbce8aa1010c900357e845e72ef45aa96a0298aec36e455e8849e4c42beb124df40d25112d5948078d7a9331dc8c5a6eb682c699a839e90508c1b253dbb0be8c089f97bf070e1467810652590d65d3a3ea56bf94e06a341cb766ef84b051ef13d1abdbd224a641155d63f8a470f9bf838c957713bdf2cac7191c274f7460bdb018355128e895384b8bef94412e5f744fda222f84209ff4295f323f0908e650848a4fdde18bdbc84b7f65eb19600066c44bcb280db66e817595c8e878bdd8ba0d04878f6ff60039057e84f9c107b181b23e0861a822ef2bdf2ca5d62880e172e81a2f41342ddf215fdf0baca5cfc333720bf3c8d04ce9e60aca234570ca1dc16bbd8c652c4370231d2f418d299af3d1917cf30a37f2d6611ed29ca24577413180914ded08b7e9d25a4c9035c1667e748229c5459933973d1be67edbae4a8c09720d9b115de8f13107a431c3be76ba2e9f91a5b8dad16465236c2215331c8f8c7f7641acd72b8e70b8934b3bb0dcb5e563f0732218087e29f20715c41064cf61e4880ff4ee4ae060cbac3327c7ae6393ffbaabfcdcaadf08a63b02940b4ae7c2cf35ed51415812fd7f6d0d238fb66a85c386627ab8ded2947803a5a5121f5c00cb8164931823ed08a98ece5601eb3c4a7222af92d6f133ed03ce107ce7a8da71d6d28344d3df123e8b00ef06041acbc746abe40294b7a17cc5bcc2ccb9ff58a438d591baf8fc78ff65bc4bca7f95013ee7c853f6a0bbc2490eca6f6d6d017f614efc5a4e880b1c5407d2f4594c13316e371d30c326ac463a0caa5a5fa448f0a1238549fd99552e67dbbea2d2f069ae96f0f6132ded05fa7276a243668abdfbfc7527fa6b78b3798dc20921b8debd349b2def67fcf12ad0da91399eed0220b7795bc2a63a792a6074b33f486a5181d6df6ab292b9bd47c43bb1ee9a877501483e6280f3a5809c291063fcb02ae6d1b137e08399316e02f582aa185b6d31b66429c02a48217e1ff8d755c95e4b6ad940da6e52e84f0e26f6c64526650c23c06419379eeb24ce46a6f040054b9267fce3f66dc5a824c1e83e860fb92fe017c7b22889e94c8801557fa7f18356d9469d2f38fbc35b1fe5acc6e2b810cd1c9ee301271cc3a15cd1f83d8150d2c3721f6ddd9516c0cace0088c110969c65c025c7ec51007ca8e20917c9303915e39c5c353af0f58398b1dc6076db473ede12d0870acbf05075ec33b8ede6a08a14cea3e1cc07fb1a2ed73a83622dd0b6d5296e92e31efd81cc4819f5483be7d79585e78bf7083e392aacb4ce00e61687d062d95291bdd4f126ff3bcb078ab11b6d48441e886b316bce8502d2fa20bede74367a824fa54343c4fe00cef6aadb6dca564f99c8ff8590944f5c4ed875d0c8eea84f6f5af414d8c22e9e824931625bbc5dac1427f75536ee49cf4430df62389114e0bc31bc723ed9bf4910e396e91f3021b08b5f96f429d95b7504ad6f3d20ef33a2ec16d9eaa802c265635246e26cb9274355bcf8c2494c5b3a9f60499b468ae9d4c923f3a41afb690b599da272125459bb37817cfc596003a4b0912d2903b0fe0a720c9c0bd6845c7f6c6cc6083faf8f10f339048720fad2524edaf005b5be2697173a9921aefdfd6c80fadd9d58685cd69cbe5199fe38d2491999ab2d41925aa5dc18a168322ccb3996b9f87ab7e303597d6722778e506d96e29188bc1441b0b4e202ff7814750f590fe1dfc995df0df43dcbc14a3d2fba50e8c680134ee482de591b29b1de49d98d82d862644d03aee7889a095bb6deb2e6b28adb44d0c4be735b0e43f8f4885d3614ff33803eccd30437c11418e82d3abf1d416ce1b59ef6c7aa303c4c0009fa3325df02da0de244d348d9d180dc61965cc81bbbb4b2eb3191548273279c8091da9cf13abfadf3bb152b37751e56e20edd72e47ecac70ae0e912ac2920a863d52c422c37dcaeec6a4529c9255ce6f90b59f6dbcb34323f8bfa107af319c67fe9a25a02be0d0ef4f66c0e8337035feea24dec2d8a7457657197151b69dcaf726bf75b5946855fbce55012effb4bdbcd76e1de18a4e329b7d2e24f56698911d4a54a8ddc60e6597f97b232263be3a646119cafa191c61c9f74eef5a0eb8fae378de4de7b88c84550f74f887b1c785a76100f0dc199735d40f83d2ec40f862695345abc39fb765d45d6b23d5f4de09700d67f079433b823dc28d4f5867cf33450a46b9efa5d8a3790d08929e06c2d2b2a3d786786bee3e257f34f33a6f9d0fb4d4f44fb884609d38d239ed0a39d1ac3c63b542e1328631bc5e64804a3afd3bbaa278c38557a82a83f4b21b870ac2b2aca8d3ede9303291c33c61fd1d7d3979848b5daab4e3fae5a52e9dbf329d7e81e81a8bceb5d256de092a70956a9aa2736c97917ad7352a151fa2600562f517bcef74aae34b90e774d384db1cab93d5e3a68cdcb3f2bf2dcdea34ebe8c3dae40985462bbce9a7cf48577feaa1d6ddd63b2afc98b346db5b0e140b6438c5e66811dd37cb33ce76cecfd250a9990aa36062df1c7e3254ad4b6564ff5a28aa82dee80484fcb7da6d4f05aa1a21d2436920d92a886663e428b4001f3c246aabe3a4ec623684fffe4615defca4b9a3451db4c7c2cf8bdcbba5b24283f817a985094e702fddb0bcc5cfd23f25a7ae1a9d39c6361c146cfb8248a0401333dfcf39fb28c06963f5cb21ce2a2059cb1c470b059375970dccbcf470aeafaa05460211a7547d2e99d6e7afebca952dda62c28f973c1a453574544457c7e1cbe67ceb02f6aebe063f892197e26733ffb4e36baad649b2695f87e038907d76a4260262e3d2808d72fdbe74660730a30883665e815ed95a7d2b24993fc071b8eed248e6424146c73decc7c4266a503516e8207b3c2f2aea8fac4d698b230ac9810f8850db2b2f3de2b63fb5af56e63633183c65d6b5c5068f6703f07db800f1fc1b5bd31a9c78a51848780a737cc07f5b2171bca66ea3e5137a1fc3869a677f2b77d1845e372e60685a882c5036dd50571c54208c14c336b3729e8c1c9abf73fbe8d5d9666efa8d16392c3721dea828f32fe076fb46c6888740a901848089804c71a2be46b484873bdccb1757a32df3cc3a2ed2f645ece42a3b24f1feaa3282c996acfb0b87b0a0097ea1349b203f71aeadbe5a674a05099195396908ae3c5c32151f926d610180cadfa471c5f6e5f271d5dfafe6024c422e0f25e33deaaf4ada9131c005b2e9ba352da327dc12376039ea911dd89d92f2efa46c6a59edd172a5c22cee252e74659778f00137dd769981bbc72fbd1dfcd131ad0d6a3afebe2002a4e95d0dc2a741755e3196eb62ae37ec9db428ced4fc5ed2fc89d30ae69c13c210ab61b9dda517fe8c4b2842b2f6425d250c4ece69127a22aa82b0f9f4992d56ea1ad64078a4fd614102d1fbc472916afca4cb78c1be030f82716e7974f1dc9a25769b4783efa82582c96919f482712449ee3892cecb14a8cad4cb81837b32ba1fbf28108cf3e73ca5ae1779f1b762b00b178e532be1ecc06bb5c4c3a2c9ceacbe5387338312d7dae0170aadbd50d945f48fc0de95c77194613933b7ae8441148375690ad75006d57bd625e785313b4e53a7378e626a3ddef89fc686dbe9550c6c8a0476d4421fed59bf41a9f9e087ac44b0640699cc17b53fec6c6125aaccb87a77f1ef54bd61440c4823bcc1ea92b3fc4fdac82f23f93ee04faff56d2b3b0644d882cf9069a33e0377c638208c5e8d6bb4a224e16076c7980f6f175c278c044966ee1e93ad45cbc89082220cb608beadd4df4006fe578b3e916cd02884e745acf2a6c299a53ce81c605248db2b9b11044470c8d9399375f0397c1bea66412d9f77e7d0c5a809095740d2b57236fc3d26aa640dbea8389de9fba57f1b809ef0bd2370a4f37ea672dc50184884259a6f530ebf7f71616eee9d2a0d00141d646bb1e878ee896e9cc46064f33076c16b0abc1f2568382cb2e7fc22ad720bf754c37e848d1d13a78763c087af187b39a5b4eb7e01cdaffdc7fecd06a94f95c095fbe8a3130a76255877c1a42cc6e0175c81c8244f38d48a6fbc25e756a674e6c5a905b8db5e86bea8c6418318380180202952ed008f995e7961cfd576864c077e69f633446053cc6ec133db2e03767d0bb6d6f96d1684e9ea5c25421a7ac361b6af8ce39535ad8fb906b41cf8469651e02a713891f813f18ef1a9157e7986112d5aa6d9d1ac305bea73f0c53bf93f2afdf84bbb4ae31b6c02f0c794b9561546dc2bc1fff56a051dc46e028d63f7759b2192d5f5ca7e22d605a161be26eb6c655aa974282283512ef0c30adebcf5bfb975e5804051b86f7b2ce42dffa5d5ef1f447f2741502251e065b7d70017bd962d54c1ffbfc617174e9e1dab9f41341ac538fe3e749e0ba9fbb0ca905ba72b0db56581511f887155a177e7777685cf653aa780b4c5fd43778b6b54383495e86048dbf62965476740af938b8700864454b6e0cff31a9acd1df685b71723417cbdf3ede7953c64e9bd9118174210071a1f1e7c1de1e9394f4e1a1c67bea4e5569b44c4dcc8165c00dd8cc1d4650dfd8473e5c94e5fbf7d24425d98adf1ea2736ae1d14e507c1c970d41ce56feb4daa223b2f64a043320c49fcc1ce56d24e9fa286cc8f803a31f438546b062e1f64a9a1fe97121d1e63c76490966b887f75dd8976e20dace59186e664fdefa876cbd633a53876633ab4c6b02a11fcbc96a31277fb76b7f7694df79b72fec5d691b938b992882c4a0bba76c4d676963aefef33818948b4b99e5d333cc308fee1b72801f75f3f6284fe991844fc01ecc279f4eccbe520ad8114f0b4d2bff748145262782912b66ac676c3fb25786c0806d3338a7c618874909d5c16f5b25b4e8b9cf3efd2ec3bb91e6ebdbe6c26f9032c05bc9020a923b7b0c230cfa10bceba282a8ece6aff43cc726c38aefbb870f1420bab4a67d223da1ef204e71c1bace8bbf0b00b227e278c88ccb9a9864cb102db3f74f361df447f69da394557149a389c6a0e85391eba95dc45e3b3e8cd63d513d736d90baf41434174109d98ec906573a98002e807545f0de2d6469057feed367266352e9e95ae207684c27fa7c0c9e6b151790e44a3c651d09344cd950062e55e1adec6092e2473e219bd72f233cd3cd4ec9adf608822ac4e920a07627102ade67af820dc10c8c875d864fdba0ee11b161113336d746bd2c5a19b2f9cb8e941980a44a929572756bb9c9ed220b08589787d2f467ba7694b666b7dfd4f2eec0be1a4dfa767fd532d60a3222f9501c8d5675764a2d4a7fb4045da1397c9e02eb9db372367d70dc74e26dbf288d8d0117b5f7eaf4757e572ccb6c78ce8da40c856492cc786123147e77bd758b61e99c3052e2430915afe23df9acdb4cabd165cc84e176d18ef68cf5e3cc7ce17c6b8c109d25e6ec1e82446a4171ccb8526d8a2d93ac80e40872eb7cb388ad40e29864a620ad0a9a2d796ea13fee74c6363e9261b52fac016bfe43e83726051ddc237b52e50ee13643090bfec7252c76273d0dd27de9f56d3e14fa9a4432c9b35ec80cb63e16d5894e1b9dc3415dd9e24c368dd286b3d1f68ed95416f9bbf61db2b4c59d8ee1cc2d0b137b353fdb9cdc02ef9ecd53f794205291ee3cb0c40a8d0f9db0b44e80ce837531dfe05f26bfde4d3785bbc84043516c357d22b99357887892cea9762f49c1919ccd5b452872390ab6a9bdb0c19fa672d885cbb3ee1a6f9e5a85deeaeca371b0fc6f618d3b9830926f05f95e1df332842774b17b891ac0d57bf254c030ca6b7d8594e04f68c6b561d7a0b56265441056c92dbfeae127987c49a8714016afe2e8eaca3e91e00d447c4fbb4c3997355b90916bca8ae9ca25e67ecc604dcd8f04b4bfa9d4643cf3e04d0503eaf5a87c59d692cc1eec19693237d8f6c00689e267e942cdc25eb9fddea0afaff8543738a9dca7147a5b00284085071bccd28404ef0ca4a590acb9885c0dc2f074550027070a0dd3a196d50e41a0ee32373c8e7fcff32967168149ffb91136bce8f10cac78de5531e4aca0e87a8a74e147aa91e949f7b5aefcdd01f4643c8b2384ed75e13f759c3b442c81ebe7f2f42f1b03d535fce6f3079b9d2a067c1acbfaa9db1e030edc3830e87ae9e3b706569b5f678af53950374cff25cea6888ed18bb11a4271a65df157070a20143b37cdad401cca51063ca60dba892ba43bc6e048d6373c57b9f8cfa65c2379c5cb2bf0608ed1cc920856c8e55ffdcbdccdd086ab1711466b90d34ab19f635db024c5b0cc13b002af8da2807226e3b4b11b5ba39616b069a973838f5d065600d809fc5b714e073d71c8684686bc13c6f325edc1d22a7bec9bf9e6f5750acc6d9e3bec37531c8d78620a4cce589bf52d39c9a29b00a05c803c5c3e2736998e3010c36892169ac51d2fcab7fbc9e2debaa3fb7921f38e35edbe2cde5effcd51988a4ab5b8b285ef953a36bda2a0f4ba0d2980e0b1e0c711e0f8f01a7066abc5a8215330023175470bbefeb1c7134cc40b8ec5613a44ed058f7b57316649305420b485e302f30a22013f28fa31f41c0cd0e31667cc0782cd3d3e53adf82455a56543bbf839e2c59bc6c34472f7967723c0d15b53542f69017e8489cbd021fac3bcaa9240447f87f3f267f200f2b0a23160f95b34a4466d19227a801a55d63f4a77314c0451370cd04375617d93cb2dd1adceb76b2572aced30dedac411ace21a650b678c0538c1e8d8e732bba7b7fb10072219f583da270db31d4868b87ac58853708b1ddca924299c95351848badeb56ae3fd07d4f880ec26c432b3f89a3243052327a7fe3dd784d0084f07c6c86eecc15116a2dc8bbe7a82c16c4ca41d11fcd8aaada63f72b1c639170a2a2d02e944127de0870670979063028c3c8ff768e38b4c29ee52dc0da77c75ed3fca79dc0c245f238a4ba6e5e4631e14ff4d9e883ec4234c4031439087b1eb6b903b8b4868feb96851059a0600c748c2c5aaa1b772d16de9db4207645e503ae346418af97459c3a0b235e9aec1ad360f029b80d4f825e491c481f1cd0d2fe3d8cfec5fd6a6a60c50271d51c3fe3accabb9e615ae6150164ba64a790bd02ca33e95cb4492688f6bf0658d0db691f7ee46d067f53889a7ed866e683f85c38d46dfa927e4a58c6bf8ddd16842972eb15dc29436b2289cdc587bc7968b00d65b0c04c98f56063cf36c753678c5a2d822430e2c52bbaebaae07ba06a4f6a5a27ee5db5437996a29d5c27dd4de8cff121257c9b9eeb262ee27ac6bb206dc8b0e33818ab6fc4aa631f46520e7d737f322cad2645a7c6a23af9069d40b12bc42626f725cc39ddfaa57eeb2a9713c30c1d9595eecdc1233d13c47a7a129f3537c90b21dde3075bce01f2f5cfa5c47faeb840263b950f4a60ab7bed855ed65e7ca67ffd6c57d470363081987013944097424804851758de2dee83ed67a35625a9cc088256067d2dd2ebd3c630dffdf24475a81f1c929e2593f8fea2c58ca127ab658b727e734df7b7b74ed48f5caab4f87ab00edd3f9e367848460599174a8849b7f4aee5874c45bd48afae93c7549437823462a9bba8e3a98008332ff92ce9d2b1df85d2d1a1764c85216156ab7fd5e5e8d8bafad8ebb47cbfc726cd6f945e02b81ea9ee708e1b0d72a92b0652d784acbabbca749719e076264c354a64a0d79b73bb5c83578006d46269238dd18d260c713fdfd950ca5839635fd5a8cfc3e92c4750e1d94723c7274640eb0320f5e9b190afbfc0f780180370e7361fefe03cb8311bb977cf189cf27934cac322b51f14858024ba83677fed8ae6fd7527fee7ef2d80fcd69c8495341ea3f5dada31e4316275618947578a4a9b359ca1b76bf320af58f6f05be423a65d3a8e07ce7d2ca9ed0540557c6d68337a44fbc2cc0012a86614e26a3bf6e6b4b1d64e40d4b87d5051ccd4da60da0a7db521a4d7777aabe26e8fcbaf4736ffec6d310a689d47e1adc0596f081525e8730dff6f29227bb93e52e1758ab264a66d7496e59d82c704eadea2ed9a8353afff7a8496d1664c8ba1e67b584bdd9a2cb6e8f7e750fc185b44f11c2d8034baf9169295aaf9b40e144e20d94a9a2e3c63800aeb9fc63ad407c14027276919e551387c48bed0729b4d1f935ccb769d91794ff25bac5bacb79cbac7b221c02ddb2584ea5b9e9c41d91eaa4ba7dc629b4004a4a44339b87f178898df52b995c4b815ea336147c6d62575a6f410892ced30e435fd6ffecd1e8216e19a120faf5d2a35d3598ba322f9b1158250d756aec491794cbc30b775454e34a7f3a3152be856148b872a4ba94d0c5afa5a31d72912d4582ee7f01a8f44e6ec9bded7f1a4ef6f1a0bbdb80290e3748a2e0d957bdcf975cae0c542130fb0b4e8f451704ed9c08adb4a893304069c8fbee8471e6ef0923831d515c66c7d6466d782d82c12c452f64be5b19bc61f58348ff376dbe82fd8fff7ef98ef329184b1ebe64dfbf6ebb6eb5ea35e6b091ba10d773e72c961f6b552a0dae091315af87950ceac29dcc75bc03f941f4decc1425eddaf10d34929fe1d6a90a3a56574bb9a98080d6f478349e1eb6cb7f485542a8217684bdb13142b9104ab915cfc6de3d8d4052e874ae7478864bada2ee3fc3b9b12a36523e4f38014e10dcf79bb38317d4c95628de31119c3e84b88cd79361c2caac05954aad788168da4fee1de424bc68871d6ecdc8b62cfc65f9a900687fc37fd863ecee6c53b259ba05e76c67b6e2a5ddade2ff0bb8c4a1bdb6cbf57a1984a245d372183fd71624ffbb7f95fcc835084d7e4fc16e00593b91a0279a16f9a19c9a72c634dcbc2d4aa78004e3918bc8a23e86a8f75c515b804de58fbfe51cc82ee44a87b19bdf5d781b991fbabfbddf89b08232661d9c63eb3394603ae5e7ce225708be6639b60df17161043846783accb70a96b3d152e0648d971ddcf66137e127c15e95204fe06f58bf95db8ad70ad4b900eb4e63e66521e79ca094e0af30075afe1a0c21e5841f707a29e78eb7d522d53dcbbfe85470148517002a6df0d8260a94d5fbb770726a38972bccf8c2f73acf875af210ed4c67720bab9c0c7b25f10864a00a28cda417d8842299c6d41369ce5295edf7bd6f4e4abe189e402257d4f11643527d6a4f7c50cfd05d16281b11bb336bd69b98174783a7e465c726c83266a74735762d540a13ebd6c7dbc8545c6ddd15f7962de856924b6e94325904a5728fb78653fbaecad11d8a0fa7db15674d59f29171a43e72c58c3bd329ec8f2a7c74437f8ecd94a313e73bc7436ab4b3eb3fd3063f6c08a86021708cc5a59a6076bffede042e9a640dd8a2dd51d6ee2dcfd7feffb2d469d9a5987c9c52ff3aeb0b1c2cdbbbf1326d61a4bf3366427b306aef1add1fe19a6d904dd8301c2693a10d6b2bfb7bedfdfa443027723e3c980923155586af0cae801085fbbe86727ff23318e2953fe7a117b151a354c33ea639ebe198a642b0f0eb01fbb4dc87cc103df3dee3d0f51f97bf9a8438f15d56927be9367fc13daeb45cd7a305445daca5ffc5be28cb5d108eec67c94c9633520179e7b5ea6a7af7cf28c83ffc4126f7132d123243b45ada986adc6e427da41b83fb3bbeb2f72604d358967aa4c2891dfb7b2515c6da27b5ca7efc24cac5109eeaf2247fcc09e8a968827b89b6c6901051201d41a9a0d6b2619a0208e948f28a05345d15d9deb4f949245e68d4263a61112286bd8aa12e4c6266b0306439e7e64dca5d9a0365e97357bc4472c5766150c7f3f9d93dace49fe57de8c7c8a0de87d9027ceea48a82ea09c517ec1f53e62390bb142e9f5a66c2e4feaf9df96e449319647ddb1d42cf59bf8c8bfb17c7a04a0965db2043fc7db2a7bce608648978c26481b508878f4dcfda983488f064fc524300be73eaabbc8929199916022cc0b6238737c4ae545407844eeb0d9b8b63b244779b5c1fc3d6e7bbce0ddc40011fce33685ca18cf9ffed103aa42c8743b39c34c298a8cd6c3c01db2f072db61f23ffe62248565c56c80ad62b390917fad3fe139716dea7eed4215383601f75a144978a1a283b53277743b681d03ec178755c4df6a7c37ce4ca54284b8b65f0358623b32c13024bb32d0d28a8e3a8056c98dfac5a6a2431ce4212458bb4ee513b96c35ed36bfe0d5577af53a7fdf4f1af693c1314002c47d2a571949f5acef3bca4196f07515c204c280fc63f98b74f87c969b5f0796a7e80047b029daf7d98f80475be2787796c21ca623cb3ac775b0e571fc424e31bc71bec652e077c0f9128ea80fadfee8906c1188069800184fa936d5d63a2836e9ba398ff42ad4305b88ff344d9d3419fd176766ba66c5fe6923b0d644b7509edc235697f32912d119c530b79de4309dc4decaf9615027cc94855865a4b2af4d1542ab3a5deb48f0edcc93b63e4f88ee11a55b79c71af0fadc70821e0f023df46f921a22e3dab4ef2df657872b0b59476c654009b5a7cc8d50feaf8fa6f793599b6a467a2ea95f6a176177ec8e37224dfbc42b8c2ff7777330f481fadeb71d6b9ac83bd4c049d21133ccc5ec1adcbd41105deba4037248ba63394da20146f98c8f996b48f64c6cfb5a0a7319ae6c4a577cc8bc0ddb241d53128e8369a0fe9bc0bb2bcd00bae50c8e034e38c4bf86a63dbc7a43fbad239a22e66244c7179c8b060ea03df26dacb6997124727efe3b7ca2e2880d7736092413b0a8ddfe1b253be7ba0954e668da19f1746af732711c225d514a9734496e2d6219375a68f60d626d06bf89ecd2105ca9786e8869be68d2eb6602bc0268cc4e287145191f4f09d438f27ea8af4081b65a11345a8ff572a0fa79c3cca47657b01ae1536b8de449f6b206d299f155e8a8540000f59148f2884619fa5c7dc06a1d48adac8d09964f3f950b739243a8328e5ff11884d11dbe7fe9808da6240a96130d47cf7ad06c4decec37413b07ab03830e62330507e9ae3c9a77a4bbaab8dcc05e8b9f9ce6e4ef5a8d7a396bd633e1351c5f04ada00181f9381fdaccbe0843a8a4cb8db3b9c213d5e470b99c63139d3c3cbc89baef0e1b4b174fdc870e6da6262d93a465763b17710f3a93d47b18d6e4061fb8e1d87fd4e6ebc1cfac3f901427c371ff5a64e5bef79ce2144ad5debfc76096a0313e9d73a0eb0a7eff2589819ecaf1f49af0657d97ad8882e5cb5da7bd77375d6a4297303d56ddc5519656497d6dd6d96e7e55554d47814a020d85cec90825e12f5bfa866bb9859bf6fd856e52e76037db6adee1d0c942fb967968fdbf97abf34be8a559ae63e0a44f9147a48716bc03df3a49e05f2b86efbf8205f7e7e3a09918b7569859d1c03d2d6fbccc0437eff34e2f65c7935e176dc4f08b0a82d3835bd9059ff21fbc42d58f9c3e8e1de7bd59eef23eafbce52ddb61af4e8472789174ebc00ffa1b272d43cf9d7444f2199a8c17d12a1abaa7dda987dfb94fc0ad0ed2d447e71e38c523974c77c627f256454b72c0d702db9bd70d3c92f68f70949a4a3529177825a07f03b8b0834ddc39e5b68df36c3655e901f9dbcfb74ba18714e9aac1e612d20dec2830217e78aed87b57883120d85cd6884b93936a05376b464680b55dbad4553e36572ced61ac04274937821ab0c9352dc9a3cb7a3e1d0f722bc8a5dace3d376b7e117808065a95abc2208af6fc0e34b76ec681cbb8bc351dcdfc958eec9d72eb45c1ff386a1028641f61afd6cb0eea414521ca48e129bec2f77ad5a77e869496bd9838ad0c10856c57e12452ed912b7f3bc3a4c3477b017a75490b5f5cb1f2cb16a12267b25b45540e1910adc2a1dd3718a4f1d0e44a210115e00988e9fb98b5aff4315c20c1cd90b5a3734f7d2689602543f4170f7de7f7b31ee62b7e7d9871cbfefecd9b0a2aea47bc8c91ac66500503cefeef13ff47a2f860cf77bdcbed3c0437aabfdea28c5113147b4700d372e6e721440df400bfdddacaf80b9c7f4d2f0e309324fbacea0f2e29dac7538eed17dd93e35b5785bd8a221ae76b22c35d2d845a1ab42478c31a261d2b3aaec20ae83f93cdc9a59b80c4e618085dbae3a20c01b6def609b2e69609863e83608ab3037dc3fb5b801e79f4e238f3bf8d9b927d70ef5a3e8e9f5e5520d09eb53ec6c15e9cec0a6dcde3475ac4bf5a02121219036e13ec332a1d58bd32d2246e33e65cf9ed1ee4fb7ac7568586ffa441197b5b1143aabeed95a78d9c3f32a99ddc8f738b7490e778511a77ac90f3572146057bdd621559a0369c6f258bc040fa6773ae26a928818c2b67876ce24f2a0561811812b4ba56edb3aa0c5171f6b1e33219175b293de9d45faa48be53a0827fba05986d8b0c942bd1cbaa17aaa1366142f7d4e5268fd1f319c73b2bbc07552c3991955a09c4d67b4386318760cf54da16f8b6dd560ad036cb8f534893786ba88ff7c29014d6193e6ffd7d3c94dc1173b87842bbd9f9daafb7e830acf26004fec65faf268f3ae230ebf4a69da2be48a5fa5ca52904c81fc7192672c8bb557740763c7aa1d2bebe3b63f56546b238bbf73e939f4d7d1f83f77021c725d0a4e8fabd245d68ce1042e5205ca93b8f0a83f340f8f36a7ac279af0a75aafc061377bbf29325bd795f17e043c23de3a6424907377c42028ec0436f6018ce10654f4a48eacffea18a89fed8945ddf1fbacde53d57f13e98d6fb8d9f585f4164a4ea7b19f035ed19cc2489a29b3065eebcc80debc1c862e5a93443ae2ce5ef2b931dd2c346f6e30f0267f59d9f43b6219faf3db6aadcb2dec5562a93dc321b4a68dcb31d6f503372b4efc9f02e7780826af4170d8a8e14e891122870c9f465f048fae3bdf44f2ef69728ad9985b02e5a0100778dbe524e09b12ee4525ecad03d8493cc4cc6bf2245c1812ef8525710761bf62c81cb08e39fe0e22d9a5ffa9e631d4e94a22ff66098b768b041deddca5285d346dbe59d56998928d2981a176d391f50cbedfc66894c6618f1c3994730b12f698913eaf5a69f88fd8918919fe0a6daa68d03520b100bbcaad8940651495ddc4fd730d82dc4292616ae7bf44b329774230874e915b33d75aa95ea21fac335253556946c50b4d310d8e2a166b11347e3614c9229efc8284c67bc64b0668439cb7eef271e26ca2f6909fddc1a85a2a70a583c116d3318e28a2d26dba03d3b24d346629621019a2c82aa59d9ca3e5665cb30d3f64ed445e1af72b82362c6012f13627f7244d7290cfc4d820272756a3675dd3bf48f20d3e2c1707b2d3bc897125bde1dc3050ecbf3b7b6ae97c7ecf4b2182d872d651ae41f1a03761d1ba2b58b938ff1e0af034f4a59da04ff4c627c11422e3aec99e1b8433fecaad85472f2243b09c7b14d19636a4d6bdb05af7a6dafa5916907656e38679755a4b74f972cb92e460d33646d9b008577b7ba5b2e908e9616230b80998142b09769a95e453f31ea17df9ced6923464bab2c108f91ff5d4728b9baf3711a7e4ee3f597316514efcb7c15b4f0c1a3a2fcd25b885f3a1ea827989379857846f3420431b491b4a3b3ff91ef3b4788774e2624f26d9a5db22f2f8a81083a3b78b0ee6944b5a52a7321038feec1221bbd9a75b1ffdac0cccc0eb22d9e5c1f3a8ff4b5e0c0c0a858dee11c03e2a27282b92d9c396f90ca0c811912c6f754d544f4865127570318c14c4ff01e02ebaddd2f2df2cb4a860481430733b8f4b622d8796b910b59e4748869108e9136de11b2ee0a3826fefe60a62953341f71d2e2f587acbddaac3f6f670466788658153e674576966e7aa8397868f90a884cd1d7ad885471d556580e4a7579f7cc69127017e788cdbc8e974ac9675718ef480d95d8a3ae8d88d5c16fd164d1429156412e2bdf17789def4a0fe343a901b91b23687a3d01e305c4d165f0a654dfd1f0126d0d8d07d88d8eb0c37dfdcc18f27afe92eab84c9b96fb53f3c5a2a40c2b247b402735e81a9549125dfc45711a604d472a9b68c45200615911514f1c08a9c50571cdac579056a1b8f65895e183ad00c0a4fa49a1a6e2afe1a9a2572f71703209bb76e7037421e5028a884aa815fff9bb81c92cf47c7c2b70c4331de91218e3d1f892dc8e197a573e6938ab8114240480bf11b2b60323caa21aa9455ab9d3c422a3661eeff9c7ed837175fcc214af4343d9d82752a9cc5796d40fa0f9875785397965b442a5a3d7c26f1d9b5bd18302a43ec3f358356add8dcf55521e20a822217d89115877d0736d037d831219a05f25260c91e85649c16db0568211dfe15188a8bb187c8e0627b83be5b33b8b5686ee3033a517450b4347c8b06d4c2d4d823ee0aac1b630b655739cc7fd50a5fc556d23d8258bac933ae5a4db05a9ab055ee9cf91343af9611973f32e07e38e81642e26e98ad2ea6457627db01c527aacf838753bb37cf8d492662cf873c2b28ecbd40c5464a128b001e21b8898e0663ea7f6f4e9e179d134867b21ebcf7a7127361ccc1c945e2463dc11e1b648f4aa6eca7af605d2d57ce3f979f312c7af58d09ffc3520f8bd5cb50ded367a9b73608e0ad5979166bd8ac9f33b453160a0f33da936fe1314eacabcb6bf3890019a349e0fa9dae46a6fa510cc3e4f22b1dedcc4489f7208fd995a50fb1f15a8c44a3ac86fd27cf7e364acda0e4db7d66c32c409d5318a58f60fabf63cd7e6e62ce08888317e576ca38c73e5fcf819e8424563047635100bf5f05509b2f2d89ac6575ee1a374393fc4490d4625c602d103da1840bf278cc9127c943dfe2ce9bfb38ec565cdb5dbb9c277881a579d80667dde0ed853a736d748938628fdfacefea16a057cd4daa88fceb078174366e87fb92467f4bb42d089dc2fbb7bafd07bda84651ec1ea06ed011998fbbbe109c658c832dc938bff2bf029171b3332dba42d0c6022556cded6d56c6d1fac28e6d0bd1c7dd50eafcade2e455bf24cc3f4703ee9ed3681fc518d5f515326e7ac3f499f462ca8cd8f788ca57ac22844703f15ef304bfa10a380846613084ecb60d5920d1a4c82a9948f758d1059e37ebed4c740aeeaa9e3e61cc3a477abfe1459a52b3a892e53bf1a069bbd7181d015cb69fbb5566454c45c7c4f4e4cc4a3aa9fcef5dead838b3235158e5e04f6058a0c4f7c4576d7b72c8470b56e62c771f90eeb6af0d4a0c1dbfeea525965f10d3ad95c35369337c4ae7901ae49a11ea1971c7db50e119a443b106d88209f5074165ffc0aef0ceb83d27cba47b64f2c17e235f6e5e25fd3604805f98de8b6d35119d7705b029c3813efc38706b5307a109e24f23dc139a75c41af2e7942b2a724c260aa8f4b93972342f8226c59148029720ca4f02dee1c9cfb9b0c982661184d16e19ec0e66fcd2a6ba8ab76a63e2513281e408b370f102c4e30c956be1d3f0e94785826c5d577d7cb16c6aa8c7a5605ab341d444432aed98ff46925dc013500b4c217203488a114e795454b3b200c1aab3f90fa4e0e9ec788615835033a7767c2dbf5a1eda17928c31439a7ae4ee7e96c3d6d5b41e5da37af61ecd6a03d19e3fd5e1bfe1b07a6e330444ed0cdb976e8e60b3c70a67d71c6c4dc1d0a470ef9eb2e06136b8943519b9b4d041704eff6b0cc3ea3e2707d0338cc192fed500e1da2b58def68637279d0f54f330ab9e66e1bb308808d0055f18e77e2504a83547b7b2415523fc196cffaca32f3fa9bf2369ec09b339da63df73b0e509507649dfa4a33d5493f040bdc556bbb9eb0b06ca37ef7727a5e9fc804ee0fe6e6f3bef4aad2496a754fab1699c184e34dc9e3e1c6503492216255584cbfabcd106b75c43d8389d7be734161d7226b77c70027c780370084332430aa12d148b2a469f00ec25418eec91b9e44e461332afa0510157a8e8cf9a8f002aee6bc48ac3a8bd2b83eee47162a63d05de9da6db8c59272d3f9782403ff2c7a728c01210c391072586ea994be001925e474c8b6453f774ee56dd352d5ea542b337e04ee4dce63d1281e754a2d417d3a3bed633eadb8d5c50d9a63e722afc1aa2757d399260c73cf5bbf823f69475902681f383bf82448457b040404729295f59a73b1208b9e7bf50252e20af795a806402ba9ac7a034f682115de54032f04155bd56481920475e130b3984daa54659502d84f7fbb3f797419f7714d4006e1e18cc0fd56d9b1306ccf55d63d3614435f0e14e32f82585c5323098155f1c2cfa03a0d432ea4a8e0d8bc8716c3d398ef6a14d34ecc6c35acd7d6d3488e703cc17aae1084c527de9e12c697a843190eed032af677f0b8113613840ca0bff9dc79a5996c7fbf85e3cce5952d2dcc61e4660fd2c1c4f6baa8bf5e9c2dd7e941e9ec328a4273b31be8eeea8111cee823aa6e6ebc6cb75e0e965211a1a6314ab5f358d5fbf197df285409c54d8610a4393f2e8751dbdba304dd326b61af572953c43ca2f7fc5ffaac3f284cd181776e9072235fd5bcd7934fa2cb619cd1787ebc42a46fc7b959ac30262d3a87c0f4dafe9027813ca7b34227a147df8fc4298b043173a0f21ff8a64dcd2435ad3b801ff99136bb68c443b4c7d653a3550e394a3ed4e0838c4d5a35b20cce39b4a5d1af4d074c1e28b6116a619661a6165c4ed8c91b77d18ba5c6a2dd60f9310fbdf06e173da7d11abde6ed4da40c460cc6311015054f900b6fb3a180bcbbfc6c9cd037c7cfc977b3e5d71f30f40a3d53a390e8677675768c11e43d45e10e625e249a8d7dc44610a8ecbc2c7cc4d9a4b7bbff6beba4a4737f95946128e5e3515acf712ac80e3226138d100043434d2c816de75e052f1557727a42c3d11151adc99147ac40beb1177c884013e69dffff1496f64f8c7ce78e505cff06063a8e4089bd725f827f1b438adf8ff3255d78034166a616de3121f6ad43e65aee59bf40c35e868fb7c77f9e0b341351d9abc359da4e7e1b84825d62d0f09afbe06b57a00a5a2c99f15775c2ca2dd7a35c94df25a97af798d402f1100c40d5fc229708478ce98ef1a340084404437d885b3ed1564b98b40947821a07ca2309931c62ac7d50c6d821fb808e6e649da6a7ae511b35706a1a5ce42c070487bbf08ae94cd5cb9be8c482555ae717e5c3beaef0481036b5b85edb9c3761791de220e0af5ec54d40a692fd93cccfb74ed338ab435890b1c074009bc2b287a57870dbd8e870fb0569705e6413f82a9a5bee551cedf497b3a29f614b6cec7d19afb19a5d00519a51ded857572a846e6af9bc21dd2157a56e2844fe2661a5e22a35f7a023c16c05ce5a8f950dc56a928303d7732d61b14a6973b648d3099f217aeb37a185e62c002e9884fbdcf1cd48de2e945723836372ff3a854bc5fc99dc183eac6d4484438d94628dec07a214b6dc98635ff9cce677d8c53a23a0e9e6d301c070a6d90f0408d1ddf71ce31c59a6a5f049a3b8d6424e82744b9adb730939f1b5aa8144c58441a777a91998ea5453ea2b0cdc4938e9b0ba4ef842713df1871b38e13b63157f5c846d0eb72f16939f0aeafde3675d26b260cdc443699db9cbd9da5af10eb4569666c0b87dc66e93f632cff00de35efd2f9b65990da40c4a24b47cc3cd2446caa41cf7a10219300fe116d6f73015731fbb1a6336c2d064c5723b51eafc834add7b1bfb77b3a04e9b3cb4bc92ba3d11e8ad28e5c8f2cd12d75c1eea2e3e9784dfb18d82246d1250166bb4f060750ab228e1f7d9cb3cd4512da15de2bbb6ce3c228d29479bab7d3120146ebf9023ba27f2ff893ad9d4d483ccdfba8e9dd26e5fe529241f4aa23e72b85a03fbcde60b36e964d3d3bcd5daf1efff9c603b50016c4193566b4593cbcb60a3c37f9cf0e77f23417dca0352753483ce701a5bccac45fd5a07c58b36715532d4a2a87924a52e3335e6149fb1b338e6dbd737d61d093b7a2309aa73c2639e9ecea1ec9a0f4a652ce96f1602097448664538644b66a86b3a658fde20926c982fecfde060fa6a5cde29887b7f490a222cd37c8fbeb95f0d97c3cf415f71b458884cfd9d2f33ad95966b45abc8f3c9d03b67c9461a93d946b9ce58e8a20f473381d9d8784ea989584d82e0531535378237daaf003ab825171bf85bbc1a7a6acaad8fd0c2bd1df2a4b0633b306212f6a05d9d3573b49844ab93aa5a20aff8616d8a83d6d47453fbce4bbda2b7239a4b8c4e87d2d549ba7fe57a15dae64460b9012aeaf9c3e566543d634e10f9768420878d11d63a95e72f646718aecdea433f83983fd4a34f8b1ae882654a13ba463c6b914e8bb4108ef32ed8c45e9300c588568f2f25cbd07c408433e1f05b7bdebb94c8b133c72a3387b4a78c127aed577abf470d31c5a83cbac74a09e00954b6b69750e32f155efe31da6f92c0cd091ca988be23bf886392b8414bee04a7811a5732bce824ad024209d8be99c2f95e7de8f7fdacd7e3be39c9c2d7fdd8942a02712ebff0e29fea56a8ae4fa7e5398b7cf0047f09d7b69a2509efde389546cc05f4bbc0a47b46e7f1090a8cd407707fbbcac0945edd457c98439b5840da23d1ad94e2131bb3837511a8c8e6967a9149cdd2c5606e4ba4b7455e8af419c3c4c91c3cb41504040a4ffaca5978dbe8cf09693cdef4edc2564fe3c9c746d58d71408edad4efa6a778436594b47b314d7d66b144b21608ea88bc1b5ffcade99562c71f6597299f3bd5aeba76400dbea033fd4346bccad9094ed7a2b2ae9b06245a52363b43e5bef347c0d4218cfc14915c2e11ad413bdc304d9a3f14e407b3e2c1a177b1e1ee8318c0c7c0304f8022c538c294f10d97d3260c218ff58c4df47863b6af51e1717e28903e1f5e3fecdb4e85a3e5c3dd3d557038ba2ee6ad5e6dfb286f2cc0a1ba241e317fd715164378bf3a1214507f24b76b4b3f2e571909d4d1473e3a4da58b3049482d1f6410a8d37ac1d5149a04566ff15dd98a01b936ea33df44486bdb6b12e802983db630d9870e67e44ff6a448876d1c54e1975c29c7e30ba61d420174bc151ae1390c795580a325f8298a35846e15fb44ae4f76d62b335b8c7391f8cb241c614ac93f173587162eb7fc074e5ddfed924ed811bc99621bdb026edf6f635e1a459bc4645eaeeb54af93d85b407f19a55ae91b8fa15be31cf0706fcb3de47d81800ef88c757c67f5474a7e0c4d7e945f29011b0bba2e18176024d2d6ecbb03b88239a8d638c1b228fc8ce391d78eb84f6b33f5b70386d3b734cac3e888c3476e39ac8bd78ee9a4919329073602d4ffb32f9e9f45e9872be4befa2d5f702aa3a1c5b170647359c58ebb04a61520ca6c69268722ecbdef9ac3752814a7af9918aee8649efb2219e97c1c3c77836be4dbdb3338dc68e5f8001239d9d2a707416ecd0f8e92081eaacbdc72466f4f3cf2c48251974839f9e6eb74e5b35971b0794a6ef811a80a23040f0cd3654cc8d113faa6b6f9d977768474da2f83435deff7b441c1e40704702f61de7af6db535460108c4f098e47d6b2aa255a57c6f2a02300e0e49c5de38e977e02060911596f039f8422bdfd6759ede44720d781b9774199a33a786bf6ba8bcdf5f63a56b17c719563e880ec26d538afd5864513a173567af4a6534aa8289d8bcc33b64ed2ddd823b094877a1f06faf985696dc576dc415c587a9d8506ecbec14e66a227ae937f3bdc54623e7889f40ae8110d301225d4f3c0c6d5ed6ea4ecf22923ac1293a9a9d548042401f0b46ece4694802d1709c738d9671155e2ff7454280cf8138370acdeb0b3f0ce6572217a175f1d37982a3e0d3130b2e7a28861ce1e7e9d982da4b5ec0edb31b406cf3c0f24bdf5d0e00f8126bd5ea0fb8d7d81cdb41902d7753b4ec7db330350bd5863b2e6d5e9896b8d9a54866e96c4201a2344248ec0f62ea3cdbd344f13e098a9420d862abf0fdd18ff6fe9ed69b8f74ddeb554969ae7a70aad8ddcdd5b80f7fd9bb1f69fd96b82b99b169f615e45c5d9090816d7788cc1aaf6591f568e73af8069fe7d2cc25bb2dc5e88a4c0498882aa2dcc9bc8c60a5bf72bde9c8b89bdf4db75ecb36ba1ef6c4c2a00c46393ec7fa1472f7d7c80d4404e89f35111cb7624b2d5479a003b6ce638a25aa6a45cb731baa8f31eee45ce93022bf61619da9cfeb54ee0552b9fc57a1f9cb576d63e8db4857ba653091e3b2fb3776ebb995c5391391cfe466d6b7a88f75a8141ce6f4782e0274af6462a6ee2d81e73f9d6221c246b8bb9639e2c3a3b1ef3d4df6a6de4066be298fa2aaecbfc1a9b54ab3e37fd97b029391b50f3a147ea16ba09f372eb6e071172480996fe197a9668b0d74894df3644374b1c3fa955da618ba00f49a1c364ed4939f47d65bf9acec185106036f727c4da50928ce9bb69dcd58b3da7c60490db646a329704f8332b644b4321709d9474acb121572f6d94e74cf52191124e42436dc4a70784f29e207f228ef144b0f496cb245594a9f9a3c82a6a9a911f2cef9639bc6ee17cb9ee7a2ea426946797b38f1b8f4224eb84489d91879a6afd487ef14b11ad408993689d90e80e05f0920dff3db3e69c0fbf3b3fe95b20b5f81f24dc7967c7e801603ec9661046566ae69bcacb1b115342b6fd9d83e9b1bfef29abfe623000a2199b7830a6f6e7f456b03db05c6e6891a097ca26afee4df4a3fc1296776823519ae7d463e4beaac7b4d7e8c43cb94a40a708fb1401818e36be6c20cf37640c455e30be8d183641bbdc956fdcc27930dfbc1eaa18cafa1ea251ab17ef44fb77a31f77a595979faf962e3e0bd3049b1058a3375fcb5160ef1444dbd898f39d3ee41cc05fbccf7903b58aad5da770dc43302ad289694d5c7be0af4b6e42d7fa785392dac1ac2ec28ff4fa11b6d8b8d16f0db14170de92fbd7268b28c1a7d2d8e47422b0bb7a66d881f8e9a7f3d4ce816d63d8872f99451eae816d4991278be734b17831860173ad716d4a00bba053e4e26ce78cfa4ebe121082f4325cb419fccda2c0c05579141ef0e26fe48bacbcf76cdcef160cd35355d3b5911811259ddaa567504775ce979889e029624df3c5f1470a352dac8393dbb3015f0dda8d7bd3fc7b3c78780d43bf7fa274d73e60b06fd58cdbe9e1b0ad97542279d2329c611f335dcf73f348a48c2e2a8be0e97daadcee1c33237ae52f7532bdcbdabe47dd4d8227c56cff5a6a0a05d55f70379354f82770402427bb07bbd1994ed79b49ffb23b2af2189f08dc8a44b1dbd84d009075828226c1463fd737b16e1fdd07f8857c5ccd7ccb4a2e370331073b215ab96b7f14e29e532d0b8cf89a8f354b4d925445f2738f9b0c34bd001bbed728c202a3e2482ac9da7f865f73807e4211324bd8e1415c2bdbfa6b5fbad0c0681942775c4cebda9afd8a9e3ad2e89dd57957a0756cf5911048645abf30970300deec6d9d75f465a883e52fbba9c2709040d7ea5a9acd6294ef4369ebe27c438b00164f92fdfe1eaf2abd1f784ddd8118980150a261e1f5f56c8bb1ac0abf61d1f12caaa7e5ed0260f4c400c25cc7bbbdff19638c5169495dd5cf33e9bc990fff5394940d8a9f929068f49d8d8143b86e43c9fd8dce067552038164982301e8fe3a37f9c59a843535d4b56c05d725eeed60a65531f390c69f1edd1aa25881bf00a7295f182974bf4f575ae751e6b05e5a1cd6b0ecdc009c0d0f119e7a2b4bba9a476a39288dab20656f919767927bd78f18ca8b18bce24e6bcea0aa02ad8c78080bd0a6529e947f398790e33b6338fa5a20a79c1c0d38cbb18dd18b3d2f0b7a7fe9fd7223a843e43e8440e43ab6fd15bdbeaafb2db343f74c20a290bc4ecf1a2adf5579fdacefd60663eee7ea8385e6482d2c83f0d1c0c06c44c818950c305d60e3193bd52e9f947f0e2544316142d793172220237e8cefcedb700eb7532652fe32423a8c020bcac80b53eab7aa57f624e45c5beeefff0cb093c45f943809429022c4af635a7172eaf95677e13ce9df88d42828db517b7a16692c9218fe0a065ad52189201b7779092c767b9d8894edb4dacd696d9addf3c6cd37a974bd47fa9ea82f5740a3169a62528a8caf2f6007dc45874611971963ccb52cfe266861009ff3c388ccfec619fd44deaeddd75b612721de783b2dde884a518f5b12cfe00be8fe7cfc61ac654d65e26e3435e9c3c6b27411ebd8cc97469fd6a9a888713258791b9e3a09796afd468a356f84b187cd8e51533be849d2def771f5ef10b1ba31ad3c381216ca5af0f10b3bd8bb7f39169892873dc5a1576a16c99948a85028a3e036c4a221918ea1e69f5962ad166437a1c58b266925d699174beee60d414298587b95bf3c68bd60764cf785553ef3e055dbc06069473e562b3420744d8cfd87ba5e1a1b3cac20ae9a671754c348a34bb03acc2cc487c6cdf393b8678e270aeb9505375429f9363fc5d9710e16167379014a6ca46bdd0f95f6dedc83b42dd280caf6d94eda3cbe8125b41c85ee1297a09b4b84b3582a928ddc113e83c8e7eb8835bc1154b55febf9692a5cf22d5ba5052a1a3c7197304cc9f0fb03861521c2b7ee1a431e94b382ceb836e886c13c3878a9056f70697f655f19298830b3c69169ae7fb61471c18bce38a1990909d25fdccc4fcc9dedacc0693545911d580e501856ca78cff28525c6292012a6c7bcaa8c1d9285b83d5e42b72561546c383832d0f0ccedbe13393d978fff83f33b473b5ee3e13a1fff2ba394365bcaf683e4b99c316c0c43fc44e2a290cc632c3d6cc7e7a652f1d088b38f8c3d9d3bc3f19dd9f1bca376d8685252b43ee5810cee191580889d50fd5ff03d3e11c3770d882d0cdba93285b69e159843c7aab8252249e64b5596a236a168f884d75d1c79d79f43d07c706b13824d6194f69bc303b0d083f78946789d68a58a295e77f13ebe40dbe828baa45a0b52243732cb612cfd1d5d8e1598410b776d972635592af60f9b6df35e788bb4ba561d041c079586cba066348ae8885705a2543fed148506480ef3d94ce7a9511dadf37ff98410f177db5055e2cbaa3417166783979317bf7b08eefc797c726530aec7d160100bbc0e97fff3e97776ab2328bbaa8212491258a7909592b099a529e3f078a6408a31deb40b1fb4d5d3c0d4e95ef19da3fb236609bde1a23bbd05606be56ff815d58ea13ea1bebe6128092fa24025dedc18e8300d2578039010f140394f502903b810ba1a9542bf6c35ab1545918938262e708599a84473ff245847c8c18d473129d050844dffce43742ffe1042ef4424d88eb0348162d3663e588d2675955eb0aceb7f3f71af2e355d86383817f824a82ea973152e95042262a48c570139d7902c440aca71f592710feb1dc146685a20e8247d6f2e8c576bf918d6f95dff451ade859b1b682296146ab12ea3c4b21dfb44b44dfbb2df7a15137bc277d7c14c731d2dfbb7207206b4841b485b99b537439bfd17c26b8de0df3045489a694b7d6c38680f364a351115204a5849a253b6af9db45d2aa2f2cca386b4008790447480a3d8786dd593a71b31af27f785a40ac71561df951ad3326952e86fe2e68db14555711b5bdbd9fa17f36b199daec6bcdb414f65597bbe5e93163b76af903873ff33656d4e9d53f39c06ce01671fd9de1b8ac63b59a3284d4a666d341dd69e0fdb297c0a8df6c2bfded52543575424ebc1271ccb1438cf3b46e07f2fad54676082e0d8c1e3d56deaedcdbe76d73880def6d53ca8a3ee95f422973437f770b5eece87f302b5b777f520f55c7217367570e6c17917c317eeb9a84723b89c3b3573cc92b0d00952915165aafc47e51e9f269fe202b3c43c427ec57f9ed8f3df76d2677f3ae369c6a0be83d029e574ce48b524167cd1b9be31115995b5f5e1c91b12dc9e5a6b77bbf3d18390f0d5bfdda7bfa91f51346e05f386a6ab79557f2b7a8bec4ef4a37c75f4961784724a96385fbcad3a89dd958aeaa11f6cbdbaf6c5329e1d6b63b1dea76a31440a64fb8b8e164bfb432ec7412fb75a3b2b0ae74a23e335d08358b0dc04cb6a483ae65e872cc93ed95cf7777ccb5962921082f6aca392b9e9aad869abe4e7e5a764f200ebbf06f51622c0831abe9f680645699535432538923469c35f7fde77f8ee6e9387683677105f6a8462efdc91dd55f3df0922647547f642c8c9bbdc747422dd3866538a5d3b723d9c140f71c2299825c2d801b62c9a61c34bbf62ccd0caa1f3ceb656e1f0ef433c150e86384f4656f07835233ee9a1c6cd6e1e4d0014fd5ac005d20633bbb086a931ba9c5c8e57496f379f0fdf24d26e951072ce197812400e6dac66936206639f7f603c51fcec358397347e5f73c8d398a2888438551f5533600849774856a25c2418f9c7d3f044109938d629f453332cd9a54b4224b01f5b0dd5988bbad4e7a1577af9ed65eff70ac2c75ad3d386941e50dce57eb22f6454b0f959384e1882fab617fce8df32fb07245eefe3d67df5966756b1e6306fb39b65dd48f00dc50b9506615be252f611b4bf0d439752c7ac3d3362a59dcc05923bcd85bf4644e2df3c8058da216dfe8d38e96c0681058782ace42ff5c120b7bd3fd8bb27478a7bc38a754df39d71342a5845c12334966a76515d131d379df10362fb4439385f42b0a4b1bdcf3de9497a7ba12dad754f3053bd790f496dc45c824b30832f805d4af61179bffa42b03a426a2ef51b4bdf24d482c6d88dbe6deef01bd59b0efcfb76ea61671e16f061ee6b3c2cdf85bd1a3045b1141e611829e9f52e1f2d29faa2a95aa890a71f5d22bbb07bc3d20eb27d91c9a0fbae43d7c3d623d6395d2b0a5601647ab2498a0632545be5cfde48c331835d12d531773b0a16962577af5d7284ff77ea25af22ff0c6244aa0ee71c7d3826b97288a124f20a0dd1217cf7f1c035cfdde801899dfe27c096a87b601b916bfa2007485fd1e69ce3d88096f3b7e0f04683bdfa6d382e697e706378caba858feaa519fd92bb92ed97d1f091aca5db7163d85606427ae2bc54fa206b75e8ba36cef5e0924301d3c27421c39b41e988d37e35a53524141</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">请输入密码</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    
    <categories>
      
      <category>大数据</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Doris</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>调度平台dolphinscheduler</title>
    <link href="/posts/2023/03/be95ec5b.html"/>
    <url>/posts/2023/03/be95ec5b.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><p>dolphinscheduler的内部可分为四个模块：</p><p>MasterServer、WorkerServer、AlertServer、ApiServer</p><h3 id="1-架构说明"><a href="#1-架构说明" class="headerlink" title="1.架构说明"></a>1.架构说明</h3><h4 id="MasterServer"><a href="#MasterServer" class="headerlink" title="MasterServer"></a><strong>MasterServer</strong></h4><p>MasterServer采用分布式无中心设计理念，MasterServer主要负责 DAG 任务切分、任务提交监控，并同时监听其它MasterServer和WorkerServer的健康状态。</p><p>MasterServer服务启动时向Zookeeper注册临时节点，通过监听Zookeeper临时节点变化来进行容错处理。 MasterServer基于netty提供监听服务。</p><h5 id="该服务内主要包含"><a href="#该服务内主要包含" class="headerlink" title="该服务内主要包含:"></a>该服务内主要包含:</h5><ul><li><strong>DistributedQuartz</strong>分布式调度组件，主要负责定时任务的启停操作，当quartz调起任务后，Master内部会有线程池具体负责处理任务的后续操作；</li><li><strong>MasterSchedulerService</strong>是一个扫描线程，定时扫描数据库中的<code>t_ds_command</code>表，根据不同的命令类型进行不同的业务操作；()</li><li><strong>WorkflowExecuteRunnable</strong>主要是负责DAG任务切分、任务提交监控、各种不同事件类型的逻辑处理；</li><li><strong>TaskExecuteRunnable</strong>主要负责任务的处理和持久化，并生成任务事件提交到工作流的事件队列；</li><li><strong>EventExecuteService</strong>主要负责工作流实例的事件队列的轮询；</li><li><strong>StateWheelExecuteThread</strong>主要负责工作流和任务超时、任务重试、任务依赖的轮询，并生成对应的工作流或任务事件提交到工作流的事件队列；</li><li><strong>FailoverExecuteThread</strong>主要负责Master容错和Worker容错的相关逻辑；</li></ul><h5 id="启动步骤"><a href="#启动步骤" class="headerlink" title="启动步骤:"></a>启动步骤:</h5><p>1.启动RPC服务（启动Netty 服务端服务）</p><p>2.导入Plugin</p><p>3.注册到Zookeeper</p><p>4.启动scheduler定时任务</p><p>5.启动Event处理器</p><p>6.启动StateWheel处理器</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs xml">1.对应路径里面存放了MasterServer.java的类，里面有对应的main方法<br>https://github.com/apache/dolphinscheduler/blob/dev/dolphinscheduler-master/src/main/java/org/apache/dolphinscheduler/server/master/MasterServer.java<br><br>public static void main(String[] args) &#123;<br>        Thread.currentThread().setName(Constants.THREAD_NAME_MASTER_SERVER);<br>        SpringApplication.run(MasterServer.class);<br>    &#125;<br><br>2.执行完构造函数后，会启动run方法及其各个组件<br>    /**<br>     * run master server<br>     * 通常我们会是在Spring框架中使用到@PostConstruct注解 <br>     * 该注解的方法在整个Bean初始化中的执行顺序：<br>     * Constructor(构造方法) -&gt; @Autowired(依赖注入) -&gt; @PostConstruct(注释的方法)<br>     */<br>    @PostConstruct<br>    public void run() throws SchedulerException &#123;<br>        // 1.init rpc server<br>        this.masterRPCServer.start();<br><br>        // 2.install task plugin<br>        this.taskPluginManager.loadPlugin();<br><br>        // 2.self tolerant<br>        this.masterRegistryClient.start();<br>        this.masterRegistryClient.setRegistryStoppable(this);<br>        <br>        // 4.MasterSchedulerService启动scheduler定时任务<br>        this.masterSchedulerBootstrap.init();<br>        this.masterSchedulerBootstrap.start();<br>        <br>        // 5.启动Event处理器<br>        this.eventExecuteService.start();<br>        this.failoverExecuteThread.start();<br><br>        // CRUD操作<br>        this.schedulerApi.start();<br><br>        Runtime.getRuntime().addShutdownHook(new Thread(() -&gt; &#123;<br>            if (!ServerLifeCycleManager.isStopped()) &#123;<br>                close(&quot;MasterServer shutdownHook&quot;);<br>            &#125;<br>        &#125;));<br>    &#125;<br><br>3.注册元数据信息到Zookeeper上面，值得一提的是这里采用的是临时路径，比如说在过程中服务断开了或者session过期，临时路径过一段时间会自己去Delete掉。<br></code></pre></td></tr></table></figure><h4 id="WorkerServer"><a href="#WorkerServer" class="headerlink" title="WorkerServer"></a><strong>WorkerServer</strong></h4><p>WorkerServer也采用分布式无中心设计理念，WorkerServer主要负责任务的执行和提供日志服务。 WorkerServer服务启动时向Zookeeper注册临时节点，并维持心跳。 WorkerServer基于netty提供监听服务。</p><h5 id="该服务包含："><a href="#该服务包含：" class="headerlink" title="该服务包含："></a>该服务包含：</h5><ul><li><strong>WorkerManagerThread</strong>主要负责任务队列的提交，不断从任务队列中领取任务，提交到线程池处理；</li><li><strong>TaskExecuteThread</strong>主要负责任务执行的流程，根据不同的任务类型进行任务的实际处理；</li><li><strong>RetryReportTaskStatusThread</strong>主要负责定时轮询向Master汇报任务的状态，直到Master回复状态的ack，避免任务状态丢失；</li></ul><h5 id="启动步骤-1"><a href="#启动步骤-1" class="headerlink" title="启动步骤:"></a>启动步骤:</h5><p>1.启动RPC服务（启动Netty 服务端服务）</p><p>2.注册到Zookeeper</p><p>3.维护workserver节点状态</p><p>4.启动TaskExecuteThread</p><p>5.启动RetryReportTaskStatusThread</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-meta">@PostConstruct</span><br>    <span class="hljs-keyword">public</span> void run() &#123;<br>        <span class="hljs-comment">//启动Netty服务，过程中也会提供一些端口，以便和其他进程交互</span><br>        <span class="hljs-keyword">this</span>.workerRpcServer.start();<br>        <span class="hljs-keyword">this</span>.workerRpcClient.start();<br>        <span class="hljs-keyword">this</span>.taskPluginManager.loadPlugin();<br><br>        <span class="hljs-comment">//向Zookeeper注册信息，其中WorkerregistryClient调用了Zookeeper的代码</span><br>        <span class="hljs-keyword">this</span>.workerRegistryClient.setRegistryStoppable(<span class="hljs-keyword">this</span>);<br>        <span class="hljs-keyword">this</span>.workerRegistryClient.start();<br><br>        <span class="hljs-comment">//启动组件，WorkerManagerThread主要是管理Master发过来的任务</span><br>        <span class="hljs-keyword">this</span>.workerManagerThread.start();<br>        <br>        <span class="hljs-comment">// 启动组件，messageRetryRunner主要是给Master反馈信息</span><br>        <span class="hljs-keyword">this</span>.messageRetryRunner.start();<br><br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">         * registry hooks, which are called before the process exits</span><br><span class="hljs-comment">         */</span><br>        Runtime.getRuntime().addShutdownHook(new Thread(() -&gt; &#123;<br>            <span class="hljs-keyword">if</span> (!ServerLifeCycleManager.isStopped()) &#123;<br>                close(<span class="hljs-string">&quot;WorkerServer shutdown hook&quot;</span>);<br>            &#125;<br>        &#125;));<br>    &#125;<br></code></pre></td></tr></table></figure><h4 id="ZooKeeper"><a href="#ZooKeeper" class="headerlink" title="ZooKeeper"></a><strong>ZooKeeper</strong></h4><p>ZooKeeper服务，系统中的MasterServer和WorkerServer节点都通过ZooKeeper来进行集群管理和容错。另外系统还基于ZooKeeper进行事件监听和分布式锁。 我们也曾经基于Redis实现过队列，不过我们希望DolphinScheduler依赖到的组件尽量地少，所以最后还是去掉了Redis实现。</p><h4 id="AlertServer"><a href="#AlertServer" class="headerlink" title="AlertServer"></a><strong>AlertServer</strong></h4><p>提供告警服务，通过告警插件的方式实现丰富的告警手段。</p><h4 id="ApiServer"><a href="#ApiServer" class="headerlink" title="ApiServer"></a><strong>ApiServer</strong></h4><p>API接口层，主要负责处理前端UI层的请求。该服务统一提供RESTful api向外部提供请求服务。</p><h4 id="UI"><a href="#UI" class="headerlink" title="UI"></a><strong>UI</strong></h4><p>系统的前端页面，提供系统的各种可视化操作界面。</p><hr><h3 id="2-任务执行流程"><a href="#2-任务执行流程" class="headerlink" title="2.任务执行流程"></a>2.任务执行流程</h3><p>首先我们可以从UI界面具体分析一些工作流是如何运行的？</p><p>1.<strong>通过一系列的执行，最终会解析一些参数，解析完之后会生成一条记录（Create Command）</strong></p><p>在UI界面工作流界面点击某个工作流运行后会执行以下代码：</p><p>DolphinScheduler-api : ExecutorController.java → startProcessInstance(execService.execProcessInstance()) → createCommand() →写入表 t_ds_command</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><code class="hljs java">--------------DolphinScheduler-API模块下/controller/ExecutorController.java------------------<br>--------------------------------------------------------------------------------------------<br>---ExecutorController.java的startProcessInstance()方法中-------------------------------------<br>--------------------------------------------调用execService.execProcessInstance()的方法------<br><br><span class="hljs-keyword">public</span> Result <span class="hljs-title function_">startProcessInstance</span><span class="hljs-params">(<span class="hljs-meta">@Parameter(hidden = true)</span> <span class="hljs-meta">@RequestAttribute(value = Constants.SESSION_USER)</span> User loginUser,</span><br><span class="hljs-params">                                       <span class="hljs-meta">@Parameter(name = &quot;projectCode&quot;, description = &quot;PROJECT_CODE&quot;, required = true)</span> <span class="hljs-meta">@PathVariable</span> <span class="hljs-type">long</span> projectCode,</span><br><span class="hljs-params">                                       <span class="hljs-meta">@RequestParam(value = &quot;processDefinitionCode&quot;)</span> <span class="hljs-type">long</span> processDefinitionCode,</span><br><span class="hljs-params">                                       <span class="hljs-meta">@RequestParam(value = &quot;scheduleTime&quot;)</span> String scheduleTime,</span><br><span class="hljs-params">                                       <span class="hljs-meta">@RequestParam(value = &quot;failureStrategy&quot;)</span> FailureStrategy failureStrategy,</span><br><span class="hljs-params">                                       <span class="hljs-meta">@RequestParam(value = &quot;startNodeList&quot;, required = false)</span> String startNodeList,</span><br><span class="hljs-params">                                       <span class="hljs-meta">@RequestParam(value = &quot;taskDependType&quot;, required = false)</span> TaskDependType taskDependType,</span><br><span class="hljs-params">                                       <span class="hljs-meta">@RequestParam(value = &quot;execType&quot;, required = false)</span> CommandType execType,</span><br><span class="hljs-params">                                       <span class="hljs-meta">@RequestParam(value = &quot;warningType&quot;)</span> WarningType warningType,</span><br><span class="hljs-params">                                       <span class="hljs-meta">@RequestParam(value = &quot;warningGroupId&quot;, required = false)</span> Integer warningGroupId,</span><br><span class="hljs-params">                                       <span class="hljs-meta">@RequestParam(value = &quot;runMode&quot;, required = false)</span> RunMode runMode,</span><br><span class="hljs-params">                                       <span class="hljs-meta">@RequestParam(value = &quot;processInstancePriority&quot;, required = false)</span> Priority processInstancePriority,</span><br><span class="hljs-params">                                       <span class="hljs-meta">@RequestParam(value = &quot;workerGroup&quot;, required = false, defaultValue = &quot;default&quot;)</span> String workerGroup,</span><br><span class="hljs-params">                                       <span class="hljs-meta">@RequestParam(value = &quot;environmentCode&quot;, required = false, defaultValue = &quot;-1&quot;)</span> Long environmentCode,</span><br><span class="hljs-params">                                       <span class="hljs-meta">@RequestParam(value = &quot;timeout&quot;, required = false)</span> Integer timeout,</span><br><span class="hljs-params">                                       <span class="hljs-meta">@RequestParam(value = &quot;startParams&quot;, required = false)</span> String startParams,</span><br><span class="hljs-params">                                       <span class="hljs-meta">@RequestParam(value = &quot;expectedParallelismNumber&quot;, required = false)</span> Integer expectedParallelismNumber,</span><br><span class="hljs-params">                                       <span class="hljs-meta">@RequestParam(value = &quot;dryRun&quot;, defaultValue = &quot;0&quot;, required = false)</span> <span class="hljs-type">int</span> dryRun,</span><br><span class="hljs-params">                                       <span class="hljs-meta">@RequestParam(value = &quot;testFlag&quot;, defaultValue = &quot;0&quot;)</span> <span class="hljs-type">int</span> testFlag,</span><br><span class="hljs-params">                                       <span class="hljs-meta">@RequestParam(value = &quot;complementDependentMode&quot;, required = false)</span> ComplementDependentMode complementDependentMode,</span><br><span class="hljs-params">                                       <span class="hljs-meta">@RequestParam(value = &quot;version&quot;, required = false)</span> Integer version)</span> &#123;<br><br>        <span class="hljs-keyword">if</span> (timeout == <span class="hljs-literal">null</span>) &#123;<br>            timeout = Constants.MAX_TASK_TIMEOUT;<br>        &#125;<br>        Map&lt;String, String&gt; startParamMap = <span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">if</span> (startParams != <span class="hljs-literal">null</span>) &#123;<br>            startParamMap = JSONUtils.toMap(startParams);<br>        &#125;<br><br>        <span class="hljs-keyword">if</span> (complementDependentMode == <span class="hljs-literal">null</span>) &#123;<br>            complementDependentMode = ComplementDependentMode.OFF_MODE;<br>        &#125;<br><br>        Map&lt;String, Object&gt; result = execService.execProcessInstance(loginUser, projectCode, processDefinitionCode,<br>                scheduleTime, execType, failureStrategy,<br>                startNodeList, taskDependType, warningType, warningGroupId, runMode, processInstancePriority,<br>                workerGroup, environmentCode, timeout, startParamMap, expectedParallelismNumber, dryRun, testFlag,<br>                complementDependentMode, version);<br>        <span class="hljs-keyword">return</span> returnDataList(result);<br>    &#125;<br><br><br>--------------------------------------------------------------------------------------------<br>-----------ExecutorServiceImpl.java的execProcessInstance()方法中调用createCommand()的方法------<br>--------------------------------------------------------------------------------------------<br><span class="hljs-meta">@Override</span><br>    <span class="hljs-meta">@Transactional(rollbackFor = Exception.class)</span><br>    <span class="hljs-keyword">public</span> Map&lt;String, Object&gt; <span class="hljs-title function_">execProcessInstance</span><span class="hljs-params">(User loginUser, <span class="hljs-type">long</span> projectCode, <span class="hljs-type">long</span> processDefinitionCode,</span><br><span class="hljs-params">                                                   String cronTime, CommandType commandType,</span><br><span class="hljs-params">                                                   FailureStrategy failureStrategy, String startNodeList,</span><br><span class="hljs-params">                                                   TaskDependType taskDependType, WarningType warningType,</span><br><span class="hljs-params">                                                   Integer warningGroupId, RunMode runMode,</span><br><span class="hljs-params">                                                   Priority processInstancePriority, String workerGroup,</span><br><span class="hljs-params">                                                   Long environmentCode, Integer timeout,</span><br><span class="hljs-params">                                                   Map&lt;String, String&gt; startParams, Integer expectedParallelismNumber,</span><br><span class="hljs-params">                                                   <span class="hljs-type">int</span> dryRun, <span class="hljs-type">int</span> testFlag,</span><br><span class="hljs-params">                                                   ComplementDependentMode complementDependentMode, Integer version)</span> &#123;<br>        <span class="hljs-type">Project</span> <span class="hljs-variable">project</span> <span class="hljs-operator">=</span> projectMapper.queryByCode(projectCode);<br>        <span class="hljs-comment">// check user access for project</span><br>        Map&lt;String, Object&gt; result =<br>                projectService.checkProjectAndAuth(loginUser, project, projectCode, WORKFLOW_START);<br>        <span class="hljs-keyword">if</span> (result.get(Constants.STATUS) != Status.SUCCESS) &#123;<br>            <span class="hljs-keyword">return</span> result;<br>        &#125;<br>        <span class="hljs-comment">// timeout is invalid</span><br>        <span class="hljs-keyword">if</span> (timeout &lt;= <span class="hljs-number">0</span> || timeout &gt; MAX_TASK_TIMEOUT) &#123;<br>            log.warn(<span class="hljs-string">&quot;Parameter timeout is invalid, timeout:&#123;&#125;.&quot;</span>, timeout);<br>            putMsg(result, Status.TASK_TIMEOUT_PARAMS_ERROR);<br>            <span class="hljs-keyword">return</span> result;<br>        &#125;<br>        ProcessDefinition processDefinition;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-literal">null</span> != version) &#123;<br>            processDefinition = processService.findProcessDefinition(processDefinitionCode, version);<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            processDefinition = processDefinitionMapper.queryByCode(processDefinitionCode);<br>        &#125;<br>        <span class="hljs-comment">// check process define release state</span><br>        <span class="hljs-built_in">this</span>.checkProcessDefinitionValid(projectCode, processDefinition, processDefinitionCode,<br>                processDefinition.getVersion());<br>        <span class="hljs-comment">// check current version whether include startNodeList</span><br>        checkStartNodeList(startNodeList, processDefinitionCode, processDefinition.getVersion());<br>        <span class="hljs-keyword">if</span> (!checkTenantSuitable(processDefinition)) &#123;<br>            log.error(<br>                    <span class="hljs-string">&quot;There is not any valid tenant for the process definition, processDefinitionCode:&#123;&#125;, processDefinitionName:&#123;&#125;.&quot;</span>,<br>                    processDefinition.getCode(), processDefinition.getName());<br>            putMsg(result, Status.TENANT_NOT_SUITABLE);<br>            <span class="hljs-keyword">return</span> result;<br>        &#125;<br><br>        checkScheduleTimeNumExceed(commandType, cronTime);<br>        checkMasterExists();<br><br>        <span class="hljs-type">long</span> <span class="hljs-variable">triggerCode</span> <span class="hljs-operator">=</span> CodeGenerateUtils.getInstance().genCode();<br><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * create command</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">create</span> <span class="hljs-operator">=</span><br>                <span class="hljs-built_in">this</span>.createCommand(triggerCode, commandType, processDefinition.getCode(), taskDependType,<br>                        failureStrategy,<br>                        startNodeList,<br>                        cronTime, warningType, loginUser.getId(), warningGroupId, runMode, processInstancePriority,<br>                        workerGroup,<br>                        environmentCode, startParams, expectedParallelismNumber, dryRun, testFlag,<br>                        complementDependentMode);<br></code></pre></td></tr></table></figure><p>2.<strong>定时任务轮询获取</strong></p><p>MasterServer会不定时扫描表里面的记录，然后拉取出来，最后构建流程的实例</p><p>Master scheduler thread, this thread will consume the commands from database and trigger processInstance executed.</p><p>Dolphinscheduler-server: MasterSchedulerBootstrap.java → scheduleProcess() → findCommands() → command2ProcessInstance()→ 创建ProcessInstance（processService.handleCommand(）</p><p><strong>构建DAG并分发到worker</strong></p><p>this.masterSchedulerBootstrap.start(),Master启动完之后会不停拉取命令，然后解析完之后分发给Worker</p><p>可以看一下它的run方法,Scheduleprocess方法去找一条命令→Findonecommand，找到之后对它进行解析，创建工作流实例,交给WorkflowExecuteThread线程执行,</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-title class_">MasterSchedulerBootstrap</span>.<span class="hljs-property">java</span>类<br><br><span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">init</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">masterPrepareExecService</span> = (<span class="hljs-title class_">ThreadPoolExecutor</span>) <span class="hljs-title class_">ThreadUtils</span><br>                .<span class="hljs-title function_">newDaemonFixedThreadExecutor</span>(<span class="hljs-string">&quot;MasterPreExecThread&quot;</span>, masterConfig.<span class="hljs-title function_">getPreExecThreads</span>());<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">masterAddress</span> = <span class="hljs-title class_">NetUtils</span>.<span class="hljs-title function_">getAddr</span>(masterConfig.<span class="hljs-title function_">getListenPort</span>());<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> synchronized <span class="hljs-built_in">void</span> <span class="hljs-title function_">start</span>(<span class="hljs-params"></span>) &#123;<br>        log.<span class="hljs-title function_">info</span>(<span class="hljs-string">&quot;Master schedule bootstrap starting..&quot;</span>);<br>        <span class="hljs-variable language_">super</span>.<span class="hljs-title function_">start</span>();<br>        workflowEventLooper.<span class="hljs-title function_">start</span>();<br>        log.<span class="hljs-title function_">info</span>(<span class="hljs-string">&quot;Master schedule bootstrap started...&quot;</span>);<br>    &#125;<br>    <br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">run</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">while</span> (!<span class="hljs-title class_">ServerLifeCycleManager</span>.<span class="hljs-title function_">isStopped</span>()) &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                <span class="hljs-keyword">if</span> (!<span class="hljs-title class_">ServerLifeCycleManager</span>.<span class="hljs-title function_">isRunning</span>()) &#123;<br>                    <span class="hljs-comment">// the current server is not at running status, cannot consume command.</span><br>                    log.<span class="hljs-title function_">warn</span>(<span class="hljs-string">&quot;The current server &#123;&#125; is not at running status, cannot consumes commands.&quot;</span>,<br>                            <span class="hljs-variable language_">this</span>.<span class="hljs-property">masterAddress</span>);<br>                    <span class="hljs-title class_">Thread</span>.<span class="hljs-title function_">sleep</span>(<span class="hljs-title class_">Constants</span>.<span class="hljs-property">SLEEP_TIME_MILLIS</span>);<br>                &#125;<br>                <span class="hljs-comment">// todo: if the workflow event queue is much, we need to handle the back pressure</span><br>                <span class="hljs-built_in">boolean</span> isOverload =<br>                        <span class="hljs-title class_">OSUtils</span>.<span class="hljs-title function_">isOverload</span>(masterConfig.<span class="hljs-title function_">getMaxCpuLoadAvg</span>(), masterConfig.<span class="hljs-title function_">getReservedMemory</span>());<br>                <span class="hljs-keyword">if</span> (isOverload) &#123;<br>                    log.<span class="hljs-title function_">warn</span>(<span class="hljs-string">&quot;The current server &#123;&#125; is overload, cannot consumes commands.&quot;</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">masterAddress</span>);<br>                    <span class="hljs-title class_">MasterServerMetrics</span>.<span class="hljs-title function_">incMasterOverload</span>();<br>                    <span class="hljs-title class_">Thread</span>.<span class="hljs-title function_">sleep</span>(<span class="hljs-title class_">Constants</span>.<span class="hljs-property">SLEEP_TIME_MILLIS</span>);<br>                    <span class="hljs-keyword">continue</span>;<br>                &#125;<br>                <span class="hljs-title class_">List</span>&lt;<span class="hljs-title class_">Command</span>&gt; commands = <span class="hljs-title function_">findCommands</span>();<br>                <span class="hljs-keyword">if</span> (<span class="hljs-title class_">CollectionUtils</span>.<span class="hljs-title function_">isEmpty</span>(commands)) &#123;<br>                    <span class="hljs-comment">// indicate that no command ,sleep for 1s</span><br>                    <span class="hljs-title class_">Thread</span>.<span class="hljs-title function_">sleep</span>(<span class="hljs-title class_">Constants</span>.<span class="hljs-property">SLEEP_TIME_MILLIS</span>);<br>                    <span class="hljs-keyword">continue</span>;<br>                &#125;<br><br>                <span class="hljs-title class_">List</span>&lt;<span class="hljs-title class_">ProcessInstance</span>&gt; processInstances = <span class="hljs-title function_">command2ProcessInstance</span>(commands);<br>                <span class="hljs-keyword">if</span> (<span class="hljs-title class_">CollectionUtils</span>.<span class="hljs-title function_">isEmpty</span>(processInstances)) &#123;<br>                    <span class="hljs-comment">// indicate that the command transform to processInstance error, sleep for 1s</span><br>                    <span class="hljs-title class_">Thread</span>.<span class="hljs-title function_">sleep</span>(<span class="hljs-title class_">Constants</span>.<span class="hljs-property">SLEEP_TIME_MILLIS</span>);<br>                    <span class="hljs-keyword">continue</span>;<br>                &#125;<br><br></code></pre></td></tr></table></figure><p>WorkflowExecuteThread run方法启动之后提交一个节点</p><p>放到优先级队列里面，构造处理的一些参数，通过Netty分发</p><ul><li>WorkflowExecuteThread.java → startProcess() → buildFlowDag() → submitPostNode() → submitStandByTask() → submitTaskExec()</li><li>TaskProcessor.java → dispatchTask() → 放入TaskPriorityQueue</li><li>TaskPriorityQueueConsumer.java: → dispatch()</li><li>ExecutorDispatcher.java → dispatch()</li><li>NettyExecutorManager.java → execute() →build command → doExecute() → ettyRemotingClient.send()</li></ul><h3 id="3-调度问题排查"><a href="#3-调度问题排查" class="headerlink" title="3.调度问题排查"></a>3.调度问题排查</h3><p>1.问题描述：工作流实例显示运行，任务实例没有任务</p><p>解决方法：</p><p>检查日志</p><p>查看master日志<br>tail -f &#x2F;opt&#x2F;dolphinscheduler&#x2F;logs&#x2F;dolphinscheduler-master.log</p><p>查看worker 日志<br>tail -f &#x2F;opt&#x2F;dolphinscheduler&#x2F;logs&#x2F;dolphinscheduler-worker.log</p><p>查看api 日志</p><p>tail -f &#x2F;opt&#x2F;dolphinscheduler&#x2F;logs&#x2F;dolphinscheduler-api-server.log</p><p>查看告警alert日志</p><p>tail -f &#x2F;opt&#x2F;dolphinscheduler&#x2F;logs&#x2F;dolphinscheduler-alert.log</p><p>确认服务启动情况：</p><p>确认服务启动情况：</p><p> ps -aux |grep</p><p># master服务</p><p>ps -aux |grep MasterServer </p><p> # worker服务</p><p>ps -aux |grep WorkerServer</p><p># logger服务<br>ps -aux |grep LoggerServer </p><p> # alert服务<br>ps -aux |grep AlertServer</p><p>重启服务：</p><p>重启集群所有服务</p><p>&#x2F;opt&#x2F;dolphinscheduler&#x2F;bin&#x2F;stop-all.sh</p><p>&#x2F;opt&#x2F;dolphinscheduler&#x2F;bin&#x2F;start-all.sh</p><p>单独启动workerServer服务</p><p>&#x2F;opt&#x2F;dolphinscheduler&#x2F;bin&#x2F;dolphinscheduler-daemon.sh stop worker-server</p><p>&#x2F;opt&#x2F;dolphinscheduler&#x2F;bin&#x2F;dolphinscheduler-daemon.sh start worker-server</p><p>2.工作流实例准备停止，导致工作流无法删除</p><p>进入dolph数据库</p><p>– 工作流<br>SELECT * FROM t_ds_process_definition<br>where name &#x3D;’ads_spk_t_customer_analyze_recharge’ ;</p><p>– 工作流实例（工作流执行list）<br>– 查看准备停止的list 流程实例状态：0提交成功1运行2准备暂停3暂停4准备停止5停止6失败7成功8需要容错9杀死10等待线程11等待依赖关系完成</p><p>SELECT t.* FROM t_ds_process_instance t<br>LEFT JOIN t_ds_process_definition t1<br>ON t1.code &#x3D;t.process_definition_code<br>where <a href="http://t1.name/">t1.name</a> &#x3D;’ads_spk_t_customer_analyze_recharge’<br>AND t.state &#x3D;’4’;</p><p>– 删除准备停止的实例<br>delete from t_ds_process_instance<br>where state &#x3D;’4’<br>AND name like ‘ads_spk_t_customer_analyze_recharge%’ ;</p><h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><p>github：<a href="https://github.com/apache/dolphinscheduler/blob/dev/docs/docs/zh/architecture/design.md">https://github.com/apache/dolphinscheduler/blob/dev/docs/docs/zh/architecture/design.md</a></p><p><a href="https://zhuanlan.zhihu.com/p/512387735">https://zhuanlan.zhihu.com/p/512387735</a></p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>大数据</category>
      
    </categories>
    
    
    <tags>
      
      <tag>DolphinScheduler</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Flink MULTI JDBC CONNECTOR</title>
    <link href="/posts/2023/01/3f914a6b.html"/>
    <url>/posts/2023/01/3f914a6b.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><p>提供分库分表的jdbc链接方法，目前只提供批模式。</p><h3 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h3><table><thead><tr><th>参数名称</th><th>是否必填</th><th>说明</th></tr></thead><tbody><tr><td>connector</td><td>是</td><td>填写multi-jdbc</td></tr><tr><td>url</td><td>是</td><td>jdbc的链接串，用分号分割。jdbc:mysql:&#x2F;&#x2F;${connection1};jdbc:mysql:&#x2F;&#x2F;${connection2}</td></tr><tr><td>table-name</td><td>是</td><td>可用正则匹配</td></tr><tr><td>schema-name</td><td>是</td><td>可用正则匹配</td></tr><tr><td>username</td><td>否</td><td>用户名</td></tr><tr><td>password</td><td>否</td><td>密码</td></tr><tr><td>driver</td><td>否</td><td></td></tr><tr><td>scan.partition.column</td><td>是</td><td>分片的字段，最好是自增id主键</td></tr><tr><td>scan.batch.size</td><td>否</td><td>scan.batch.size 和 scan.partition.num必填写一个。每个batch的大小，每个表会多一个select count（1）的查询去获取表的数据量进行计算</td></tr><tr><td>scan.partition.num</td><td>否</td><td>scan.batch.size 和 scan.partition.num必填写一个。每张表分多少个片。</td></tr></tbody></table><h3 id="设计"><a href="#设计" class="headerlink" title="设计"></a>设计</h3><p>基于flip-27设计的flink接口，实现的分库分表jdbc的链接器。 enumerator(在jobmanager内)负责</p><ol><li>把符合条件的库名找出来。</li><li>把符合表名称的表明拿出来。</li><li>取这张表的最大值以及最小值。</li><li>获取一个批次的步长。<ol><li>若填写了batch size。则通过select count 获取表行数计算，在使用 批次大小&#x2F;总行数 * （max id - min id）计算出步长。</li><li>拖填写了partition num。 则使用 （max id - min id） &#x2F; 分片数量 计算出步长。</li></ol></li><li>根据步长来生成对应的sql（select * from xxxx where column between xxxx and xxxx）</li></ol><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itiaoling.app.ods;<br><br><span class="hljs-keyword">import</span> com.alibaba.fastjson.JSONObject;<br><span class="hljs-keyword">import</span> com.itiaoling.bean.batch.GoodsEbayCompatibilityModel;<br><span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;<br><span class="hljs-keyword">import</span> org.apache.doris.flink.cfg.DorisExecutionOptions;<br><span class="hljs-keyword">import</span> org.apache.doris.flink.cfg.DorisOptions;<br><span class="hljs-keyword">import</span> org.apache.doris.flink.cfg.DorisReadOptions;<br><span class="hljs-keyword">import</span> org.apache.doris.flink.cfg.DorisSink;<br><span class="hljs-keyword">import</span> org.apache.flink.api.common.functions.MapFunction;<br><span class="hljs-keyword">import</span> org.apache.flink.configuration.Configuration;<br><span class="hljs-keyword">import</span> org.apache.flink.streaming.api.datastream.DataStream;<br><span class="hljs-keyword">import</span> org.apache.flink.streaming.api.datastream.SingleOutputStreamOperator;<br><span class="hljs-keyword">import</span> org.apache.flink.streaming.api.environment.StreamExecutionEnvironment;<br><span class="hljs-keyword">import</span> org.apache.flink.table.api.EnvironmentSettings;<br><span class="hljs-keyword">import</span> org.apache.flink.table.api.SqlDialect;<br><span class="hljs-keyword">import</span> org.apache.flink.table.api.Table;<br><span class="hljs-keyword">import</span> org.apache.flink.table.api.bridge.java.StreamTableEnvironment;<br><span class="hljs-keyword">import</span> java.util.Properties;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EscMysql2DorisBatch</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br><br>        <span class="hljs-type">Configuration</span> <span class="hljs-variable">conf</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Configuration</span>();<br>        conf.setString(<span class="hljs-string">&quot;execution.checkpointing.interval&quot;</span>, <span class="hljs-string">&quot;10000&quot;</span>);<br>        conf.setString(<span class="hljs-string">&quot;execution.checkpointing.mode&quot;</span>, <span class="hljs-string">&quot;EXACTLY_ONCE&quot;</span>);<br>        conf.setString(<span class="hljs-string">&quot;state.checkpoints.num-retained&quot;</span>, <span class="hljs-string">&quot;2&quot;</span>);<br>        conf.setString(<span class="hljs-string">&quot;state.checkpoints.dir&quot;</span>, <span class="hljs-string">&quot;hdfs:/ns/flink/checkpoints/esc_buyer1_batch&quot;</span>);<br>        <span class="hljs-type">StreamExecutionEnvironment</span> <span class="hljs-variable">env</span> <span class="hljs-operator">=</span> StreamExecutionEnvironment.getExecutionEnvironment(conf);<br>        env.setParallelism(<span class="hljs-number">10</span>);<br>        <span class="hljs-type">EnvironmentSettings</span> <span class="hljs-variable">Settings</span> <span class="hljs-operator">=</span> EnvironmentSettings.newInstance().inStreamingMode().build();<br><br>        <span class="hljs-type">StreamTableEnvironment</span> <span class="hljs-variable">tEnv</span> <span class="hljs-operator">=</span> StreamTableEnvironment.create(env, Settings);<br>        tEnv.getConfig().setSqlDialect(SqlDialect.DEFAULT);<br><br>        tEnv.executeSql(<br>                <span class="hljs-string">&quot;CREATE TABLE `goods_ebay_compatibility_model` (\n&quot;</span> +<br>                        <span class="hljs-string">&quot;  `id` Integer,\n&quot;</span> +<br>                        <span class="hljs-string">&quot;  `site` STRING,\n&quot;</span> +<br>                        <span class="hljs-string">&quot;  `category_id` STRING,\n&quot;</span> +<br>                        <span class="hljs-string">&quot;  `esc_category_id` STRING,\n&quot;</span> +<br>                        <span class="hljs-string">&quot;  `model_id` STRING,\n&quot;</span> +<br>                        <span class="hljs-string">&quot;  `version` STRING,\n&quot;</span> +<br>                        <span class="hljs-string">&quot;  `update_type` Integer,\n&quot;</span> +<br>                        <span class="hljs-string">&quot;  `create_time` Timestamp,\n&quot;</span> +<br>                        <span class="hljs-string">&quot;  `update_time` Timestamp,\n&quot;</span> +<br>                        <span class="hljs-string">&quot;  `deleted` Integer\n&quot;</span> +<br>                        <span class="hljs-string">&quot;)&quot;</span> +<br>                        <span class="hljs-string">&quot;WITH (\n&quot;</span> +<br>                        <span class="hljs-string">&quot;\t&#x27;connector&#x27; = &#x27;multi-jdbc&#x27;,\n&quot;</span> +<br>                        <span class="hljs-string">&quot;\t&#x27;table-name&#x27; = &#x27;XXXXX&#x27;,\n&quot;</span> +<br>                        <span class="hljs-string">&quot;\t&#x27;schema-name&#x27; = &#x27;isc_buyer&#x27;,\n&quot;</span> +<br>                        <span class="hljs-string">&quot;\t&#x27;username&#x27; = &#x27;XXXXX&#x27;,\n&quot;</span> +<br>                        <span class="hljs-string">&quot;\t&#x27;password&#x27; = &#x27;XXXXX&#x27;,\n&quot;</span> +<br>                        <span class="hljs-string">&quot;\t&#x27;scan.partition.column&#x27; = &#x27;id&#x27;,\n&quot;</span> +<br><span class="hljs-comment">//                        &quot;\t&#x27;scan.batch.size&#x27; = &#x27;5000&#x27;,\n&quot; +</span><br>                        <span class="hljs-string">&quot;\t&#x27;scan.partition.num&#x27; = &#x27;10000&#x27;,\n&quot;</span> +<br>                        <span class="hljs-string">&quot;\t&#x27;url&#x27; = &#x27;jdbc:mysql://XXX:3306?useSSL=false&#x27;\n&quot;</span> +<br>                        <span class="hljs-string">&quot;)&quot;</span>);<br><br>        <span class="hljs-type">Table</span> <span class="hljs-variable">table</span> <span class="hljs-operator">=</span> tEnv.sqlQuery(<span class="hljs-string">&quot;select t.id,&quot;</span> +<br>                                              <span class="hljs-string">&quot;t.site,&quot;</span> +<br>                                              <span class="hljs-string">&quot;t.category_id,&quot;</span> +<br>                                              <span class="hljs-string">&quot;t.esc_category_id,&quot;</span> +<br>                                              <span class="hljs-string">&quot;t.model_id,&quot;</span> +<br>                                              <span class="hljs-string">&quot;t.version,&quot;</span> +<br>                                              <span class="hljs-string">&quot;t.update_type,&quot;</span> +<br>                                              <span class="hljs-string">&quot;DATE_FORMAT(t.create_time, &#x27;yyyy-MM-dd HH:mm:ss&#x27;) as create_time,&quot;</span> +<br>                                              <span class="hljs-string">&quot;DATE_FORMAT(t.update_time, &#x27;yyyy-MM-dd HH:mm:ss&#x27;) as update_time,&quot;</span> +<br>                                              <span class="hljs-string">&quot;t.deleted,&quot;</span> +<br>                                              <span class="hljs-string">&quot;0 as is_deleted_flg, &quot;</span> +<br>                                              <span class="hljs-string">&quot;1673853468700 as ts_ms &quot;</span> +<br>                                              <span class="hljs-string">&quot;from XXXX t &quot;</span><br><span class="hljs-comment">//                                              &quot;where t.version = &#x27;202211-0002&#x27;&quot;</span><br>                                    );<br><br><span class="hljs-comment">//        table.printSchema();</span><br><br>        DataStream&lt;GoodsEbayCompatibilityModel&gt; ordersDataStream = tEnv.toDataStream(table, GoodsEbayCompatibilityModel.class);<br>        SingleOutputStreamOperator&lt;Object&gt; map = ordersDataStream.map(<span class="hljs-keyword">new</span> <span class="hljs-title class_">MapFunction</span>&lt;GoodsEbayCompatibilityModel, Object&gt;() &#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">map</span><span class="hljs-params">(GoodsEbayCompatibilityModel goodsEbayCompatibilityModel)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>                <span class="hljs-keyword">return</span> JSONObject.toJSON(goodsEbayCompatibilityModel).toString();<br>            &#125;<br>        &#125;);<br><br><span class="hljs-comment">//        map.print();</span><br><br>        <span class="hljs-type">Properties</span> <span class="hljs-variable">sinkPproperties</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();<br>        sinkPproperties.setProperty(<span class="hljs-string">&quot;format&quot;</span>, <span class="hljs-string">&quot;json&quot;</span>);<br>        sinkPproperties.setProperty(<span class="hljs-string">&quot;strip_outer_array&quot;</span>, <span class="hljs-string">&quot;true&quot;</span>);<br><br>        map.addSink(<br>                DorisSink.sink(<br>                        DorisReadOptions.builder().build(),<br>                        DorisExecutionOptions.builder()<br>                                .setBatchSize(<span class="hljs-number">100000</span>)<br>                                .setBatchIntervalMs(<span class="hljs-number">20000l</span>)<br>                                .setMaxRetries(<span class="hljs-number">3</span>)<br>                                .setStreamLoadProp(sinkPproperties).build(),<br>                        DorisOptions.builder()<br>                                .setFenodes(<span class="hljs-string">&quot;XXX:8030,XXX:8030,XXX:8030&quot;</span>)<br>                                .setTableIdentifier(<span class="hljs-string">&quot;ods.ods_bak&quot;</span>)<br>                                .setUsername(<span class="hljs-string">&quot;XXX&quot;</span>)<br>                                .setPassword(<span class="hljs-string">&quot;XXXX&quot;</span>)<br>                                .build()<br>                ));<br><br>        env.execute(<span class="hljs-string">&quot;mysql-sink-doris-batch&quot;</span>);<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>参考：<a href="https://github.com/peng128/flink-connector-multi-jdbc">https://github.com/peng128/flink-connector-multi-jdbc</a></p><h3 id="使用方式"><a href="#使用方式" class="headerlink" title="使用方式"></a>使用方式</h3><p>1.pom文件引入依赖</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs pom">&lt;dependency&gt;<br>    &lt;groupId&gt;org.apache.flink&lt;/groupId&gt;<br>    &lt;artifactId&gt;FlinkMultiJdbcConnector&lt;/artifactId&gt;<br>    &lt;version&gt;1.0&lt;/version&gt;<br>&lt;/dependency&gt;<br></code></pre></td></tr></table></figure><p>2.将<a href="https://github.com/peng128/flink-connector-multi-jdbc%E6%89%93%E6%88%90jar%E5%8C%85">https://github.com/peng128/flink-connector-multi-jdbc打成jar包</a></p><p>3.mvn install手动引入FlinkMultiJdbcConnector的jar包</p><p>4.编写EscMysql2DorisBatch类和GoodsEbayCompatibilityModel类</p><p>​    GoodsEbayCompatibilityModel：同步的mysql表字段的映射bean类</p><p>​    EscMysql2DorisBatch：批量同步类</p><p>5.启动代码</p><p>flink run -m yarn-cluster -ys 5 -ynm esc-multi-lang-test -yD taskmanager.memory.managed.fraction&#x3D;0.2 -yjm 2048 -ytm 4096 -c com.itiaoling.app.ods.EscMultiLangMysql2DorisBatch -z mysql2doris_multi-lang-test -d &#x2F;home&#x2F;appman&#x2F;realtime_warehouse&#x2F;jar&#x2F;esc_batch&#x2F;PrdGoodsMultiLang.jar</p><h3 id="不足"><a href="#不足" class="headerlink" title="不足"></a>不足</h3><p>1.需要自增主健同步才快</p><p>2.暂时不支持datatime格式作为分割的列，指定的分割字段</p><p>会根据分割字段转换成select where xxx between 0 and 1000 的查询sql，如果xxx为string类型，会存在隐式转换的问题</p><p>3.原理是使用JDBC的方式select查询数据库，可以对比和datax的同步方式，本质是一样的</p><p>   datax的切分策略，参考网页：<a href="https://cloud.tencent.com/developer/article/1694188">https://cloud.tencent.com/developer/article/1694188</a></p><p>   1）计算并发量（即 needChannelNumber 大小）</p><p>   DataX有流控模式，其中，可以设置 bps 限速，tps 限速：</p><ul><li><p>bps 限速：needChannelNumber &#x3D; 总 byteLimit &#x2F; 单个 Channel byteLimit</p></li><li><p>tps 限速：needChannelNumber &#x3D; 总 recordLimit &#x2F; 单个 Channel recordLimit</p><p>如果以上都没有设置，则会根据用户在 <code>job.setting.speed.channel</code> 配置的并发数量设置     needChannelNumber。</p></li></ul><p>​    2）根据 needChannelNumber 将 Job 切分成多个 Task</p><p>这个步骤的具体切分逻辑交由相关插件去完成，例如 Rdb 对数据的拆分主要分成两类：</p><ul><li><p>如果用户配置了具体的 Table 数量，那么就按照 Table 为最小单元进行拆分（即一个 Table 对应一个 Task），并生成对应的 querySql；</p></li><li><p>如果用户还配置了 splitPk，则会根据 splitPk 进行切分，具体逻辑是根据 splitPk 区间对 Table 进行拆分，并生成对应的 querySql。</p></li></ul></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>Flink</category>
      
    </categories>
    
    
    <tags>
      
      <tag>FlinkCDC</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>hexo d部署网站时出现错误Error: Spawn failed(生成失败)</title>
    <link href="/posts/2023/01/95d03201.html"/>
    <url>/posts/2023/01/95d03201.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><p>关于博客使用过程中，进行远端部署时使用hexo d指令后可能会遇到的错误有很多，其中最常见的就是类似于下面Error: Spawn failed的错误。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java">ssh: connect to host github.com port <span class="hljs-number">22</span>: Connection refused<br>fatal: Could not read from remote repository.<br><br>Please make sure you have the correct access rights<br>and the repository exists.<br>FATAL &#123;<br>  err: Error: Spawn failed<br>      at ChildProcess.&lt;anonymous&gt; (/Users/tingyu/blog/node_modules/hexo-util/lib/spawn.js:<span class="hljs-number">51</span>:<span class="hljs-number">21</span>)<br>      at ChildProcess.emit (node:events:<span class="hljs-number">527</span>:<span class="hljs-number">28</span>)<br>      at ChildProcess._handle.onexit (node:internal/child_process:<span class="hljs-number">291</span>:<span class="hljs-number">12</span>) &#123;<br>    code: <span class="hljs-number">128</span><br>  &#125;<br>&#125; Something<span class="hljs-string">&#x27;s wrong. Maybe you can find the solution here: %s https://hexo.io/docs/troubleshooting.html</span><br></code></pre></td></tr></table></figure><h2 id="解决方案-一"><a href="#解决方案-一" class="headerlink" title="解决方案(一)"></a>解决方案(一)</h2><p>1.在博客文件夹下删除 <strong>.deploy_git</strong> 文件</p><p><code>rm -rf .deploy_git/</code></p><p>2.<code>git config --global core.autocrlf false</code> 把git加入系统环境变量</p><p>3.重新执行<code>hexo c</code> <code>hexo g</code> <code>hexo d</code></p><h2 id="解决方案-二"><a href="#解决方案-二" class="headerlink" title="解决方案(二)"></a>解决方案(二)</h2><p>更换网络，用稳定的网络，避免因网络不流畅而导致部署超时。</p><p>这里我是连接了ECNU的VPN然后再提交就好了（hexo提交不需要连接VPN提交的，这次不知道怎么报错了）</p><p><code>hexo c</code> <code>hexo g</code> <code>hexo d</code></p><h2 id="解决方案-三"><a href="#解决方案-三" class="headerlink" title="解决方案(三)"></a>解决方案(三)</h2><p>有可能是你的git repo配置地址不正确,可以将http方式变更为ssh方式</p><p>如果之前hexo d部署都没问题，就不是git repo配置的地址不对了，去解决方案（二）看看</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs nix"><span class="hljs-comment">##进入站点根目录</span><br>cd <span class="hljs-operator">/</span>Users<span class="hljs-operator">/</span>tingyu<span class="hljs-operator">/</span>blog<span class="hljs-symbol">/</span><br><br><span class="hljs-comment">##删除git提交内容文件夹</span><br>vim _config.yml<br><br><span class="hljs-comment">##修改</span><br><span class="hljs-params">deploy:</span><br><br><span class="hljs-params">type:</span> git<br><br><span class="hljs-params">repo:</span> https:<span class="hljs-symbol">//github.com/yourname/yourname.github.io.git</span> <span class="hljs-operator">-&gt;</span> git@github.com:a956551943<span class="hljs-symbol">/weixiaohui.github.io.git</span><br><br><span class="hljs-params">branch:</span> master<br><br><span class="hljs-comment">##最后</span><br>hexo clean <span class="hljs-operator">&amp;&amp;</span> hexo g <span class="hljs-operator">&amp;&amp;</span> hexo d<br></code></pre></td></tr></table></figure></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>博客</category>
      
    </categories>
    
    
    <tags>
      
      <tag>hexo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Mac系统安装vue教程</title>
    <link href="/posts/2022/12/5df9e45b.html"/>
    <url>/posts/2022/12/5df9e45b.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><h3 id="准备工作：安装node，npm"><a href="#准备工作：安装node，npm" class="headerlink" title="准备工作：安装node，npm"></a>准备工作：安装node，npm</h3><p>Vue依托nodejs，在安装Vue之前，先保证有装node,npm。通过如下命令检查是否有安装</p><p><code>node -v</code></p><p><code>npm -v</code></p><p>若没有安装，可选择手动安装or自动安装</p><p><strong>手动安装</strong>需要自己去官网下载安装包，下载之后，直接点击运行，一路默认就行，直到安装完成。</p><p>node下载地址：<a href="https://nodejs.org/en/download/">https://nodejs.org/en/download/</a> （选择mac os） </p><p><strong>自动安装</strong>终端执行<code>brew install nodejs</code></p><h3 id="安装Vue"><a href="#安装Vue" class="headerlink" title="安装Vue"></a>安装Vue</h3><ul><li>终端输入安装vue</li></ul><p><code>npm i -g vue</code></p><ul><li>安装vue-cli</li></ul><p><code>npm install -g vue-cli</code></p><ul><li><p>安装webpack</p><p>(可检查自己电脑有没，我是安装的时候发现已经有webpack，通过执行 <code>vue list</code> 查看可以用的模板，如果有webpack，可自行跳过)</p></li></ul><p><code>npm install -g webpack </code></p><ul><li>检查vue是否安装</li></ul><p><code>vue -V</code></p><h3 id="创建vue项目"><a href="#创建vue项目" class="headerlink" title="创建vue项目"></a>创建vue项目</h3><p><code>vue init webpack myvue</code> 该命令会在执行命令目录处创建myvue的文件夹</p><p>然后输入命令<code>cd myvue</code></p><p>输入命令<code>sudo npm install</code></p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221219121541.png"></p><p>发现如下爆错</p><p>网上search了一些解决方案，</p><ul><li>尝试将镜像设置成淘宝的，在执行发现同样的报错</li></ul><p><code>npm config set registry http://registry.npm.taobao.org/</code></p><ul><li><p>尝试删除<code>node_modules </code>，再执行 <code>npm install</code>也还是不行</p></li><li><p>尝试安装cnpm，<code>npm install -g cnpm --registry=https://registry.npm.taobao.org</code></p></li></ul><p>​        cnpm install也还是报错</p><ul><li><p>最后搜到是mac m1的问题</p><p>首先将node_modules文件夹删掉</p><p><code>sudo cnpm i chromedriver --chromedriver_cdnurl=http://cdn.npm.taobao.org/dist/chromedriver</code></p></li></ul><p>​       <img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221219123036.png"></p><p>​        最后sudo cnpm i </p><p>​         <img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221219122909.png"></p><p>​     运行vue，<code>npm run dev</code>  <img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221219123128.png"></p><h3 id="安装axios组件"><a href="#安装axios组件" class="headerlink" title="安装axios组件"></a>安装axios组件</h3><p><code>npm install axios</code></p><p>安装axios组件报以下错误</p><p>npm ERR! Cannot read properties of null (reading ‘isDescendantOf’)</p><p>改用cnpm下载成功</p><p><code>sudo cnpm install axios</code></p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221220143432.png"></p><p>参考：</p><p><a href="http://t.zoukankan.com/amujoe-p-8586178.html">http://t.zoukankan.com/amujoe-p-8586178.html</a></p><p><a href="https://segmentfault.com/q/1010000011773453">https://segmentfault.com/q/1010000011773453</a></p><p><a href="https://toscode.gitee.com/wkeyuan/dwsurvey-vue/issues/I4YJWP">mac m1 初始化vue项目失败</a></p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    
    <tags>
      
      <tag>Vue</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>chrome浏览器安装elasticsearch的head可视化插件</title>
    <link href="/posts/2022/12/8bd7ea1d.html"/>
    <url>/posts/2022/12/8bd7ea1d.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><h2 id="head插件简介"><a href="#head插件简介" class="headerlink" title="head插件简介"></a>head插件简介</h2><p>elasticsearch-head被称为是弹性搜索集群的web前端，head插件主要是用来和elastic Cluster交互的Web前端<img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221218150033.png"></p><h2 id="chrome浏览器下的head插件安装"><a href="#chrome浏览器下的head插件安装" class="headerlink" title="chrome浏览器下的head插件安装"></a>chrome浏览器下的head插件安装</h2><p>用chrome浏览器集成head插件,操作比较简单, 可再不用单独运行服务, 简化了head插件的安装.</p><h3 id="安装步骤"><a href="#安装步骤" class="headerlink" title="安装步骤"></a>安装步骤</h3><p>1.下载es-head.crx文件<br>插件下载地址: <a href="https://github.com/mikewuhao/es-head">https://github.com/mikewuhao/es-head</a></p><p>2.把下载好的es-head.crx文件扩展名改为.zip的压缩包文件, 如:es-head.zip</p><p>3.解压缩es-head.zip文件到es-head文件夹</p><p>4.到chrome的扩展程序里–打开开发者模式—加载已解压的扩展程序–上传刚才的es-head文件夹, 打开浏览器看右上角的es-head图标插件, 即安装成功</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221218150430.png"></p><p>打开head插件连接好es路径即可</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221218150033.png"></p><p>基本可以在浏览器中使用的API：</p><p>1.查询健康状态：<br><code>http://192.168.23.10:9201/_cat/health?v</code><br>2.查询所有节点<br><code>http://192.168.23.10:9201/_cat/nodes?v</code><br>3.查询所有索引<br><code>http://192.168.23.10:9201/_cat/indices?v</code><br>4.查询单个索引的 mapping 和 设置详情<br><code>http://192.168.23.10:9201/索引名称/</code><br>5.根据数据的ID查询数据详情<br><code>http://192.168.23.10:9201/索引名称/类型/id号</code><br>6.查询索引的所有数据</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">http</span>://<span class="hljs-number">192.168.23.10:9201</span>/索引名称/_search<br><span class="hljs-attribute">http</span>://<span class="hljs-number">192.168.23.10:9201</span>/索引名称/_search?from=<span class="hljs-number">1</span>&amp;size=<span class="hljs-number">10</span><br><span class="hljs-attribute">http</span>://<span class="hljs-number">192.168.23.10:9201</span>/索引名称/_search?from=<span class="hljs-number">1</span>&amp;size=<span class="hljs-number">10</span>&amp;_source=mobile,user_id<br><span class="hljs-attribute">http</span>://<span class="hljs-number">192.168.23.10:9201</span>/索引名称/_search?q=city:%E6%B7%B1<br></code></pre></td></tr></table></figure></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    
    <tags>
      
      <tag>elasticsearch</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>MyBatis与Mysql字段映射的三种方式</title>
    <link href="/posts/2022/12/392160de.html"/>
    <url>/posts/2022/12/392160de.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><p>Java中属性命名一般使用驼峰命名法，mysql中的字段一般使用“_”来连接两个单词。这样就需要中间有一层转换，使两边能够对应起来。下面是三种不同的实现方式，根据情况做出合理的选择。</p><h3 id="场景"><a href="#场景" class="headerlink" title="场景"></a>场景</h3><p>数据库中表结构：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs mysql">CREATE TABLE `t_user` (<br>  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,<br>  `user_name` varchar(20) DEFAULT NULL,<br>  `user_age` tinyint(3) unsigned DEFAULT NULL,<br>  PRIMARY KEY (`id`)<br>) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8<br><br></code></pre></td></tr></table></figure><p>项目中的Model，使用了lombok，省去了属性的get、set：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> lombok.AllArgsConstructor;<br><span class="hljs-keyword">import</span> lombok.Data;<br><span class="hljs-keyword">import</span> lombok.NoArgsConstructor;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@Description</span>:</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@Author</span>: ZhOu</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@Date</span>: 2017/2/14</span><br><span class="hljs-comment"> */</span><br><br><span class="hljs-meta">@Data</span><br><span class="hljs-meta">@NoArgsConstructor</span><br><span class="hljs-meta">@AllArgsConstructor</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> id;<br>    <span class="hljs-keyword">private</span> String userName;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> userAge;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="解决方式"><a href="#解决方式" class="headerlink" title="解决方式"></a><strong>解决方式</strong></h3><p>1、方式一：设置resultMap，使返回列和Model中的属性匹配</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span> ?&gt;</span><br><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">mapper</span> <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span> <span class="hljs-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span> &gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;com.mapper.UserMapper&quot;</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;userMap&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;com.model.User&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;id&quot;</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;id&quot;</span> /&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;userName&quot;</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;user_name&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;userAge&quot;</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;user_age&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">resultMap</span>&gt;</span><br><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getOne&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;Integer&quot;</span> <span class="hljs-attr">resultMap</span>=<span class="hljs-string">&quot;userMap&quot;</span>&gt;</span><br>        select id,user_name,user_age from t_user where id=#&#123;id&#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span><br></code></pre></td></tr></table></figure><p>2、方式二：设置别名，返回列的别名和Model中的属性一致，所以可以映射。</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getTwo&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;Integer&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;User&quot;</span>&gt;</span><br>     select id,user_name userName,user_age userAge from t_user where id=#&#123;id&#125;<br> <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br></code></pre></td></tr></table></figure><p>3、方式三：设置MybatisProperties ——&gt;Configuration——&gt;mapUnderscoreToCamelCase的属性值，这个属性的含义就是自动转换mysql中的字段，去掉下划线并转换成驼峰命名字段。源码中默认设置为false，所以想要MyBatis自动转换就需要配置一下，只需要在mybatis配置文件中加上如下代码即可。</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">settings</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">setting</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;mapUnderscoreToCamelCase&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;true&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">settings</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br></code></pre></td></tr></table></figure><p>mapUnderscoreToCamelCase字面意思是转换下划线为驼峰命名，实际上真的如此吗？实验得出的结论是，被忽悠了。假如Model在的属性名不便，把mysql中的user_name改为use_rname、use_r_name，把user_age改为userag_e、uSerAge，实验的结果得出依然自动映射了。所以mapUnderscoreToCamelCase实际的操作是去掉了下划线，并把大写字母转换成小写字母。</p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>FlinkCDC-2.0-原理与实践</title>
    <link href="/posts/2022/12/c592299b.html"/>
    <url>/posts/2022/12/c592299b.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><h1 id="Flinkcdc原理"><a href="#Flinkcdc原理" class="headerlink" title="Flinkcdc原理"></a>Flinkcdc原理</h1><h2 id="一、CDC-概述"><a href="#一、CDC-概述" class="headerlink" title="一、CDC 概述"></a>一、CDC 概述</h2><p>CDC 的全称是 Change Data Capture ，在广义的概念上，只要是能捕获数据变更的技术，我们都可以称之为 CDC 。目前通常描述的 CDC 技术主要面向数据库的变更，是一种用于捕获数据库中数据变更的技术。CDC 技术的应用场景非常广泛：</p><ul><li><strong>数据同步：</strong>用于备份，容灾；</li><li><strong>数据分发：</strong>一个数据源分发给多个下游系统；</li><li><strong>数据采集：</strong>面向数据仓库 &#x2F; 数据湖的 ETL 数据集成，是非常重要的数据源。</li></ul><p>CDC 的技术方案非常多，目前业界主流的实现机制可以分为两种：</p><ul><li><strong>基于查询的 CDC：</strong><ul><li>离线调度查询作业，批处理。把一张表同步到其他系统，每次通过查询去获取表中最新的数据；</li><li>无法保障数据一致性，查的过程中有可能数据已经发生了多次变更；</li><li>不保障实时性，基于离线调度存在天然的延迟。</li></ul></li><li><strong>基于日志的 CDC：</strong><ul><li>实时消费日志，流处理，例如 MySQL 的 binlog 日志完整记录了数据库中的变更，可以把 binlog 文件当作流的数据源；</li><li>保障数据一致性，因为 binlog 文件包含了所有历史变更明细；</li><li>保障实时性，因为类似 binlog 的日志文件是可以流式消费的，提供的是实时数据。</li></ul></li></ul><p>对比常见的开源 CDC 方案，我们可以发现：</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221206155512.png"></p><ul><li>对比增量同步能力，<ul><li>基于日志的方式，可以很好的做到增量同步；</li><li>而基于查询的方式是很难做到增量同步的。</li></ul></li><li>对比全量同步能力，基于查询或者日志的 CDC 方案基本都支持，除了 Canal。</li><li>而对比全量 + 增量同步的能力，只有 Flink CDC、Debezium、Oracle Goldengate 支持较好。</li><li>从架构角度去看，该表将架构分为单机和分布式，这里的分布式架构不单纯体现在数据读取能力的水平扩展上，更重要的是在大数据场景下分布式系统接入能力。例如 Flink CDC 的数据入湖或者入仓的时候，下游通常是分布式的系统，如 Hive、HDFS、Iceberg、Hudi 等，那么从对接入分布式系统能力上看，Flink CDC 的架构能够很好地接入此类系统。</li><li>在数据转换 &#x2F; 数据清洗能力上，当数据进入到 CDC 工具的时候是否能较方便的对数据做一些过滤或者清洗，甚至聚合？<ul><li>在 Flink CDC 上操作相当简单，可以通过 Flink SQL 去操作这些数据；</li><li>但是像 DataX、Debezium 等则需要通过脚本或者模板去做，所以用户的使用门槛会比较高。</li></ul></li><li>另外，在生态方面，这里指的是下游的一些数据库或者数据源的支持。Flink CDC 下游有丰富的 Connector，例如写入到 TiDB、MySQL、Pg、HBase、Kafka、ClickHouse 等常见的一些系统，也支持各种自定义 connector。</li></ul><h2 id="二、Flink-CDC-项目"><a href="#二、Flink-CDC-项目" class="headerlink" title="二、Flink CDC 项目"></a>二、Flink CDC 项目</h2><h3 id="Dynamic-Table-amp-ChangeLog-Stream"><a href="#Dynamic-Table-amp-ChangeLog-Stream" class="headerlink" title="Dynamic Table &amp; ChangeLog Stream"></a>Dynamic Table &amp; ChangeLog Stream</h3><ul><li>Dynamic Table 就是 Flink SQL 定义的动态表，动态表和流的概念是对等的。参照上图，流可以转换成动态表，动态表也可以转换成流。</li><li>在 Flink SQL中，数据在从一个算子流向另外一个算子时都是以 Changelog Stream 的形式，任意时刻的 Changelog Stream 可以翻译为一个表，也可以翻译为一个流。</li></ul><p>联想下 MySQL 中的表和 binlog 日志，就会发现：MySQL 数据库的一张表所有的变更都记录在 binlog 日志中，如果一直对表进行更新，binlog 日志流也一直会追加，数据库中的表就相当于 binlog 日志流在某个时刻点物化的结果；</p><p>日志流就是将表的变更数据持续捕获的结果。这说明 Flink SQL 的 Dynamic Table 是可以非常自然地表示一张不断变化的 MySQL 数据库表。</p><h2 id="三、Flink-CDC-2-0-详解"><a href="#三、Flink-CDC-2-0-详解" class="headerlink" title="三、Flink CDC 2.0 详解"></a>三、Flink CDC 2.0 详解</h2><p>Flink CDC 1.x 可以不加锁，能够满足大部分场景，但牺牲了一定的数据准确性。Flink CDC 1.x 默认加全局锁，虽然能保证数据一致性，但存在上述 hang 住数据的风险。</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221206160007.png"></p><p>通过上面的分析，可以知道 2.0 的设计方案，核心要解决上述的三个问题，即支持无锁、水平扩展、checkpoint。</p><h3 id="单个chunk无锁一致性读"><a href="#单个chunk无锁一致性读" class="headerlink" title="单个chunk无锁一致性读"></a>单个chunk无锁一致性读</h3><p>Flinkcdc2.0借鉴了DBlog 这篇论文里描述的无锁算法，利用Chunk 的切分算法可以实现数据同步任务多并发执行，和很多数据库的分库分表原理类似，Chunk切分算法通过表的主键对表中的数据进行分片。假设每个 Chunk 的步长为 10，按照这个规则进行切分，只需要把这些 Chunk 的区间做成左开右闭或者左闭右开的区间，保证衔接后的区间能够等于表的主键区间即可。</p><p>对于每个 Chunk 的无锁读算法，该算法的核心思想是在划分了 Chunk 后，对于每个 Chunk 的全量读取和增量读取，在不用锁的条件下完成一致性的合并。Chunk 的切分如下图所示：</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221206160435.png"></p><p>因为每个 chunk 只负责自己主键范围内的数据，不难推导，只要能够保证每个 Chunk 读取的一致性，就能保证整张表读取的一致性，这便是无锁算法的基本原理。</p><p>Netflix 的 DBLog 论文中 Chunk 读取算法是通过在 DB 维护一张信号表，再通过信号表在 binlog 文件中打点，记录每个 chunk 读取前的 Low Position (低位点) 和读取结束之后 High Position (高位点) ，首先在低位点去查询该 Chunk 的全量数据。在读取出这一部分 Chunk 的数据之后，再将这 2 个位点之间的 binlog 增量数据合并到 chunk 所属的全量数据，从而得到高位点时刻chunk 对应的全量数据。</p><p>Flink CDC 结合自身的情况，在 Chunk 读取算法上做了去信号表的改进，不需要额外维护信号表，通过直接读取 binlog 位点替代在 binlog 中做标记的功能，整体的 chunk 读算法描述如下图所示：</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221206160722.png"></p><p>比如正在读取 Chunk-1，Chunk 的区间是 [K1, K10]，首先直接将该区间内的数据 select 出来并把它存在 buffer 中，在**select 之前记录 binlog 的一个位点 (低位点)<strong>，</strong>select 完成后记录 binlog 的一个位点 (高位点)**。然后开始增量部分，消费从低位点到高位点的 binlog。</p><ul><li>图中的 - ( k2,100 ) + ( k2,108 ) 记录表示这条数据的值从 100 更新到 108；</li><li>第二条记录是删除 k3；</li><li>第三条记录是更新 k2 为 119；</li><li>第四条记录是 k5 的数据由原来的 77 变更为 100。</li></ul><p>观察图片中右下角最终的输出，会发现在消费该 chunk 的 binlog 时，出现的 key 是k2、k3、k5，我们前往 buffer 将这些 key 做标记。</p><ul><li>对于 k1、k4、k6、k7 来说，在高位点读取完毕之后，这些记录没有变化过，所以这些数据是可以直接输出的；</li><li>对于改变过的数据，则需要将增量的数据合并到全量的数据中，只保留合并后的最终数据。例如，k2 最终的结果是 119 ，那么只需要输出 +(k2,119)，而不需要中间发生过改变的数据。</li></ul><p>通过这种方式，Chunk 最终的输出就是在高位点是 chunk 中最新的数据。</p><h3 id="多个Chunk一致性读"><a href="#多个Chunk一致性读" class="headerlink" title="多个Chunk一致性读"></a>多个Chunk一致性读</h3><p>上图描述的是单个 Chunk 的一致性读，但是如果有多个表分了很多不同的 Chunk，且这些 Chunk 分发到了不同的 task 中，那么如何分发 Chunk 并保证全局一致性读呢？</p><p>这个就是基于 FLIP-27 来优雅地实现的，通过下图可以看到有 SourceEnumerator 的组件，这个组件主要用于 Chunk 的划分，划分好的 Chunk 会提供给下游的 SourceReader 去读取，通过把 chunk 分发给不同的 SourceReader 便实现了并发读取 Snapshot Chunk 的过程，同时基于 FLIP-27 我们能较为方便地做到 chunk 粒度的 checkpoint。</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221206161620.png"></p><p>当 Snapshot Chunk 读取完成之后，需要有一个汇报的流程，如下图中橘色的汇报信息，将 Snapshot Chunk 完成信息汇报给 SourceEnumerator。</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221206161646.png"></p><p>汇报的主要目的是为了后续分发 binlog chunk (如下图)。因为 Flink CDC 支持全量 + 增量同步，所以当所有 Snapshot Chunk 读取完成之后，还需要消费增量的 binlog，这是通过下发一个 binlog chunk 给任意一个 Source Reader 进行单并发读取实现的。</p><h1 id="Flinkcdc实践"><a href="#Flinkcdc实践" class="headerlink" title="Flinkcdc实践"></a>Flinkcdc实践</h1><p>Flink 版本是 1.14，customer 表的数据量是 6500 万条，Source 并发为 8，全量读取阶段: MySQL CDC 2.0 用时 <strong>13</strong> 分钟；1亿数据量的表，Source并发为1，全量读取阶段MySQL CDC 2.0 用时<strong>2小时</strong>。</p><p>flinkcdc多库多表同步代码：(Mysql-&gt;Kafka-&gt;Doris)</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br></pre></td><td class="code"><pre><code class="hljs scala">## <span class="hljs-type">Mysql2Kafka</span><br><span class="hljs-keyword">package</span> com.itiaoling.app.ods<br><br><span class="hljs-keyword">import</span> com.itiaoling.bean.config.&#123;<span class="hljs-type">KafkaSinkConf</span>, <span class="hljs-type">MySqlSourceConf</span>, <span class="hljs-type">MySqlToKafkaConf</span>&#125;<br><span class="hljs-keyword">import</span> com.itiaoling.source.<span class="hljs-type">MySqlSourceFunction</span><br><span class="hljs-keyword">import</span> com.itiaoling.util.<span class="hljs-type">ExecutionEnvUtil</span><br><span class="hljs-keyword">import</span> com.ververica.cdc.connectors.mysql.source.<span class="hljs-type">MySqlSource</span><br><span class="hljs-keyword">import</span> org.apache.flink.api.common.eventtime.<span class="hljs-type">WatermarkStrategy</span><br><span class="hljs-keyword">import</span> org.apache.flink.api.common.serialization.<span class="hljs-type">SimpleStringSchema</span><br><span class="hljs-keyword">import</span> org.apache.flink.api.java.utils.<span class="hljs-type">ParameterTool</span><br><span class="hljs-keyword">import</span> org.apache.flink.configuration.<span class="hljs-type">Configuration</span><br><span class="hljs-keyword">import</span> org.apache.flink.connector.kafka.sink.&#123;<span class="hljs-type">KafkaRecordSerializationSchema</span>, <span class="hljs-type">KafkaSink</span>&#125;<br><span class="hljs-keyword">import</span> org.apache.flink.streaming.api.environment.<span class="hljs-type">StreamExecutionEnvironment</span><br><span class="hljs-keyword">import</span> java.util<br><span class="hljs-keyword">import</span> java.util.<span class="hljs-type">Map</span><br><br><span class="hljs-keyword">import</span> com.itiaoling.sink.<span class="hljs-type">KafkaSinkFunction</span><br><br><span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">MySqlToKafka</span> </span>&#123;<br><br>  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span></span>(args: <span class="hljs-type">Array</span>[<span class="hljs-type">String</span>]): <span class="hljs-type">Unit</span> = &#123;<br>    <span class="hljs-keyword">val</span> parameterTool = <span class="hljs-type">ParameterTool</span>.fromArgs(args)<br>    <span class="hljs-keyword">val</span> active = parameterTool.get(<span class="hljs-string">&quot;spring.profiles.active&quot;</span>)<br>    <span class="hljs-keyword">val</span> sourceSinkType = <span class="hljs-type">Integer</span>.valueOf(parameterTool.get(<span class="hljs-string">&quot;sourceSinkType&quot;</span>))<br>    <span class="hljs-keyword">val</span> businessType = <span class="hljs-type">Integer</span>.valueOf(parameterTool.get(<span class="hljs-string">&quot;businessType&quot;</span>))<br>    <span class="hljs-keyword">val</span> tableName = parameterTool.get(<span class="hljs-string">&quot;tableName&quot;</span>)<br>    <span class="hljs-comment">//mysql2kafka配置信息</span><br>    <span class="hljs-keyword">val</span> mySqlToKafkaConf: <span class="hljs-type">MySqlToKafkaConf</span> = <span class="hljs-type">ExecutionEnvUtil</span>.getSourceSink(active, sourceSinkType, businessType, tableName).asInstanceOf[<span class="hljs-type">MySqlToKafkaConf</span>]<br><br>    <span class="hljs-keyword">val</span> flinkEnv: util.<span class="hljs-type">Map</span>[<span class="hljs-type">String</span>, <span class="hljs-type">String</span>] = mySqlToKafkaConf.flinkEnv<br>    <span class="hljs-keyword">val</span> mysqlConf: <span class="hljs-type">MySqlSourceConf</span> = mySqlToKafkaConf.mysqlSourceConf<br>    <span class="hljs-keyword">val</span> sinkConfig: <span class="hljs-type">KafkaSinkConf</span> = mySqlToKafkaConf.kafkaSinkConf<br><br><br>    <span class="hljs-keyword">val</span> conf = <span class="hljs-keyword">new</span> <span class="hljs-type">Configuration</span><br>    <span class="hljs-keyword">val</span> it: util.<span class="hljs-type">Iterator</span>[<span class="hljs-type">Map</span>.<span class="hljs-type">Entry</span>[<span class="hljs-type">String</span>, <span class="hljs-type">String</span>]] = flinkEnv.entrySet().iterator()<br>    <span class="hljs-keyword">while</span> (it.hasNext) &#123;<br>      <span class="hljs-keyword">val</span> kv: <span class="hljs-type">Map</span>.<span class="hljs-type">Entry</span>[<span class="hljs-type">String</span>, <span class="hljs-type">String</span>] = it.next()<br>      conf.setString(kv.getKey, kv.getValue)<br>    &#125;<br><br>    <span class="hljs-keyword">val</span> env: <span class="hljs-type">StreamExecutionEnvironment</span> = <span class="hljs-type">StreamExecutionEnvironment</span>.getExecutionEnvironment(conf)<br><br>    <span class="hljs-keyword">val</span> mySqlSource: <span class="hljs-type">MySqlSource</span>[<span class="hljs-type">String</span>] = <span class="hljs-type">MySqlSourceFunction</span>.createSourceFunction(mysqlConf)<br><span class="hljs-comment">//    val prefix = sinkConfig.getKafkaTopicPrefix</span><br><span class="hljs-comment">//    val suffix = sinkConfig.getKafkaTopicSuffix</span><br><span class="hljs-comment">//    val topic: String = prefix + &quot;_&quot; + tableName + &quot;_&quot; + suffix</span><br><span class="hljs-comment">//    val sink: KafkaSink[String] = KafkaSink.builder[String].setBootstrapServers(sinkConfig.getBootstrapServers)</span><br><span class="hljs-comment">//      .setRecordSerializer(KafkaRecordSerializationSchema.builder().setTopic(topic).setValueSerializationSchema(new SimpleStringSchema()).build)</span><br><span class="hljs-comment">//      .build</span><br>    <span class="hljs-comment">//使用此方法，可以将配置文件中同步所有表分别同步到不同的kafka的topic中</span><br>    env.fromSource(mySqlSource,<span class="hljs-type">WatermarkStrategy</span>.noWatermarks[<span class="hljs-type">String</span>],<span class="hljs-string">&quot;MySQL Source&quot;</span>)<br>        .addSink(<span class="hljs-type">KafkaSinkFunction</span>.createSinkFunction2(sinkConfig)).name(tableName)<br><br><span class="hljs-comment">//    env.fromSource(mySqlSource, WatermarkStrategy.noWatermarks[String], &quot;MySQL Source&quot;).sinkTo(sink).setParallelism(2)</span><br><br>    env.execute(mySqlToKafkaConf.getAppName)<br><br>  &#125;<br><br>&#125;<br><br><br><br><span class="hljs-keyword">package</span> com.itiaoling.source<br><br><span class="hljs-keyword">import</span> com.itiaoling.bean.config.<span class="hljs-type">MySqlSourceConf</span><br><span class="hljs-keyword">import</span> java.util<br><span class="hljs-keyword">import</span> java.util.&#123;<span class="hljs-type">Map</span>, <span class="hljs-type">Properties</span>&#125;<br><br><span class="hljs-keyword">import</span> com.itiaoling.app.function.<span class="hljs-type">JsonDebeziumDeserializeSchema</span><br><span class="hljs-keyword">import</span> com.ververica.cdc.connectors.mysql.source.<span class="hljs-type">MySqlSource</span><br><br><span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">MySqlSourceFunction</span> </span>&#123;<br><br>  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">createSourceFunction</span></span>(mysqlConf: <span class="hljs-type">MySqlSourceConf</span>) = &#123;<br>    validateParameter(mysqlConf)<br>    <span class="hljs-keyword">val</span> debeziumProperties = <span class="hljs-keyword">new</span> <span class="hljs-type">Properties</span>()<br><br>    <span class="hljs-keyword">val</span> it: util.<span class="hljs-type">Iterator</span>[<span class="hljs-type">Map</span>.<span class="hljs-type">Entry</span>[<span class="hljs-type">String</span>, <span class="hljs-type">String</span>]] = mysqlConf.debeziumProperties.entrySet().iterator()<br>    <span class="hljs-keyword">while</span> (it.hasNext) &#123;<br>      <span class="hljs-keyword">val</span> kv: <span class="hljs-type">Map</span>.<span class="hljs-type">Entry</span>[<span class="hljs-type">String</span>, <span class="hljs-type">String</span>] = it.next()<br>      debeziumProperties.setProperty(kv.getKey, kv.getValue)<br>    &#125;<br>    <span class="hljs-type">MySqlSource</span>.builder()<br>      .hostname(mysqlConf.hostname)<br>      .port(mysqlConf.port)<br>      .scanNewlyAddedTableEnabled(<span class="hljs-literal">true</span>)<br>      .databaseList(mysqlConf.mysqlDb)<br>      .username(mysqlConf.username)<br>      .password(mysqlConf.password)<br>      .tableList(mysqlConf.tableName)<br>      .serverTimeZone(debeziumProperties.getOrDefault(<span class="hljs-string">&quot;server-time-zone&quot;</span>, <span class="hljs-string">&quot;UTC&quot;</span>).toString)<br>      .deserializer(<span class="hljs-keyword">new</span> <span class="hljs-type">JsonDebeziumDeserializeSchema</span>(debeziumProperties.getOrDefault(<span class="hljs-string">&quot;server-time-zone&quot;</span>, <span class="hljs-string">&quot;UTC&quot;</span>).toString, mysqlConf.addColumns))<br>      .debeziumProperties(debeziumProperties)<br>      .build()<br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">validateParameter</span></span>(mysqlConf: <span class="hljs-type">MySqlSourceConf</span>) = &#123;<br>    <span class="hljs-comment">//    Validater.NullValidate(&quot;hostname&quot;,mysqlConf.hostname)</span><br>  &#125;<br><br>&#125;<br><br><br><span class="hljs-keyword">package</span> com.itiaoling.app.function<br><br><span class="hljs-keyword">import</span> java.time.<span class="hljs-type">ZoneId</span><br><span class="hljs-keyword">import</span> java.util.<span class="hljs-type">Map</span><br><span class="hljs-keyword">import</span> java.&#123;sql, util&#125;<br><br><span class="hljs-keyword">import</span> com.alibaba.fastjson.<span class="hljs-type">JSONObject</span><br><span class="hljs-keyword">import</span> com.itiaoling.util.<span class="hljs-type">DateUtils</span><br><span class="hljs-keyword">import</span> com.ververica.cdc.debezium.<span class="hljs-type">DebeziumDeserializationSchema</span><br><span class="hljs-keyword">import</span> com.ververica.cdc.debezium.utils.<span class="hljs-type">TemporalConversions</span><br><span class="hljs-keyword">import</span> io.debezium.data.<span class="hljs-type">Envelope</span><br><span class="hljs-keyword">import</span> io.debezium.data.<span class="hljs-type">Envelope</span>.<span class="hljs-type">Operation</span><br><span class="hljs-keyword">import</span> io.debezium.time._<br><span class="hljs-keyword">import</span> org.apache.flink.api.common.typeinfo.&#123;<span class="hljs-type">BasicTypeInfo</span>, <span class="hljs-type">TypeInformation</span>&#125;<br><span class="hljs-keyword">import</span> org.apache.flink.types.<span class="hljs-type">RowKind</span><br><span class="hljs-keyword">import</span> org.apache.flink.util.<span class="hljs-type">Collector</span><br><span class="hljs-keyword">import</span> org.apache.kafka.connect.data.&#123;<span class="hljs-type">Field</span>, <span class="hljs-type">SchemaBuilder</span>, <span class="hljs-type">Struct</span>&#125;<br><span class="hljs-keyword">import</span> org.apache.kafka.connect.source.<span class="hljs-type">SourceRecord</span><br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">JsonDebeziumDeserializeSchema</span>(<span class="hljs-params">serverTimeZone: <span class="hljs-type">String</span>, addColumns: java.util.<span class="hljs-type">Map</span>[<span class="hljs-type">String</span>, <span class="hljs-type">String</span>]</span>) <span class="hljs-keyword">extends</span> <span class="hljs-title">DebeziumDeserializationSchema</span>[<span class="hljs-type">String</span>] </span>&#123;<br><br>  <span class="hljs-keyword">var</span> ts_ms: <span class="hljs-type">AnyRef</span> = _<br><br>  <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">deserialize</span></span>(sourceRecord: <span class="hljs-type">SourceRecord</span>, collector: <span class="hljs-type">Collector</span>[<span class="hljs-type">String</span>]): <span class="hljs-type">Unit</span> = &#123;<br>    <span class="hljs-keyword">val</span> operation: <span class="hljs-type">Envelope</span>.<span class="hljs-type">Operation</span> = <span class="hljs-type">Envelope</span>.operationFor(sourceRecord)<br>    <span class="hljs-keyword">val</span> value: <span class="hljs-type">Struct</span> = sourceRecord.value().asInstanceOf[<span class="hljs-type">Struct</span>]<br>    <span class="hljs-keyword">val</span> sourceStruct: <span class="hljs-type">Struct</span> = value.getStruct(<span class="hljs-string">&quot;source&quot;</span>)<br>    <span class="hljs-keyword">val</span> db: <span class="hljs-type">String</span> = sourceStruct.get(<span class="hljs-string">&quot;db&quot;</span>).asInstanceOf[<span class="hljs-type">String</span>]<br>    <span class="hljs-keyword">val</span> table: <span class="hljs-type">String</span> = sourceStruct.get(<span class="hljs-string">&quot;table&quot;</span>).asInstanceOf[<span class="hljs-type">String</span>]<br>    <span class="hljs-keyword">val</span> source: <span class="hljs-type">String</span> = db.replaceAll(<span class="hljs-string">&quot;^*\\d$&quot;</span>, <span class="hljs-string">&quot;&quot;</span>) + <span class="hljs-string">&quot;.&quot;</span> +<br>      table.replaceAll(<span class="hljs-string">&quot;^*_\\d$&quot;</span>, <span class="hljs-string">&quot;&quot;</span>)<br><br>    ts_ms = value.get(<span class="hljs-string">&quot;ts_ms&quot;</span>)<br><br>    <span class="hljs-keyword">if</span> (operation != <span class="hljs-type">Operation</span>.<span class="hljs-type">CREATE</span> &amp;&amp; operation != <span class="hljs-type">Operation</span>.<span class="hljs-type">READ</span>) &#123;<br>      <span class="hljs-keyword">if</span> (operation == <span class="hljs-type">Operation</span>.<span class="hljs-type">DELETE</span>) &#123;<br>        <span class="hljs-keyword">val</span> data: <span class="hljs-type">JSONObject</span> = extractData(value, <span class="hljs-string">&quot;before&quot;</span>)<br>        data.put(<span class="hljs-string">&quot;is_deleted_flg&quot;</span>,<span class="hljs-number">1</span>)<br><br>        <span class="hljs-keyword">val</span> record: <span class="hljs-type">String</span> = <span class="hljs-keyword">new</span> <span class="hljs-type">JSONObject</span>()<br>          .fluentPut(<span class="hljs-string">&quot;op&quot;</span>, <span class="hljs-type">RowKind</span>.<span class="hljs-type">DELETE</span>.shortString())<br>          .fluentPut(<span class="hljs-string">&quot;data&quot;</span>, addColumns(data))<br>          .fluentPut(<span class="hljs-string">&quot;source&quot;</span>, source)<br>          .toJSONString<br>        collector.collect(record)<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">val</span> beforeData: <span class="hljs-type">JSONObject</span> = extractData(value, <span class="hljs-string">&quot;before&quot;</span>)<br>        <span class="hljs-keyword">val</span> afterData: <span class="hljs-type">JSONObject</span> = extractData(value, <span class="hljs-string">&quot;after&quot;</span>)<br>        afterData.put(<span class="hljs-string">&quot;is_deleted_flg&quot;</span>,<span class="hljs-number">0</span>)<br><br>        <span class="hljs-keyword">val</span> map: util.<span class="hljs-type">Map</span>[<span class="hljs-type">String</span>, <span class="hljs-type">AnyRef</span>] = beforeData.getInnerMap<br>        <span class="hljs-keyword">val</span> map1 = afterData.getInnerMap<br><br>        map.putAll(map1)<br><br>        <span class="hljs-keyword">val</span> afterRecord: <span class="hljs-type">String</span> = <span class="hljs-keyword">new</span> <span class="hljs-type">JSONObject</span>()<br>          .fluentPut(<span class="hljs-string">&quot;source&quot;</span>, source)<br>          .fluentPut(<span class="hljs-string">&quot;op&quot;</span>, <span class="hljs-type">RowKind</span>.<span class="hljs-type">UPDATE_AFTER</span>.shortString())<br>          .fluentPut(<span class="hljs-string">&quot;data&quot;</span>, addColumns(<span class="hljs-keyword">new</span> <span class="hljs-type">JSONObject</span>(map)))<br>          .toJSONString<br>        collector.collect(afterRecord)<br>      &#125;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      <span class="hljs-keyword">val</span> data: <span class="hljs-type">JSONObject</span> = extractData(value, <span class="hljs-string">&quot;after&quot;</span>)<br>      data.put(<span class="hljs-string">&quot;is_deleted_flg&quot;</span>,<span class="hljs-number">0</span>)<br>      <span class="hljs-keyword">val</span> record: <span class="hljs-type">String</span> = <span class="hljs-keyword">new</span> <span class="hljs-type">JSONObject</span>()<br>        .fluentPut(<span class="hljs-string">&quot;source&quot;</span>, source)<br>        .fluentPut(<span class="hljs-string">&quot;data&quot;</span>, addColumns(data))<br>        .fluentPut(<span class="hljs-string">&quot;op&quot;</span>, <span class="hljs-type">RowKind</span>.<span class="hljs-type">INSERT</span>.shortString())<br>        .toJSONString<br>      collector.collect(record)<br>    &#125;<br><br>  &#125;<br><br>  <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">getProducedType</span></span>: <span class="hljs-type">TypeInformation</span>[<span class="hljs-type">String</span>] = <span class="hljs-type">BasicTypeInfo</span>.<span class="hljs-type">STRING_TYPE_INFO</span><br><br><br>  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">extractData</span></span>(struct: <span class="hljs-type">Struct</span>, structType: <span class="hljs-type">String</span>): <span class="hljs-type">JSONObject</span> = &#123;<br>    <span class="hljs-keyword">import</span> scala.collection.<span class="hljs-type">JavaConversions</span>._<br>    <span class="hljs-keyword">val</span> valueStruct: <span class="hljs-type">Struct</span> = struct.getStruct(structType)<br>    <span class="hljs-keyword">val</span> data = <span class="hljs-keyword">new</span> <span class="hljs-type">JSONObject</span>()<br><br>    <span class="hljs-keyword">val</span> fields: util.<span class="hljs-type">List</span>[<span class="hljs-type">Field</span>] = valueStruct.schema().fields()<br>    <span class="hljs-keyword">val</span> timestamp_schema = <span class="hljs-type">SchemaBuilder</span>.int64().name(<span class="hljs-string">&quot;org.apache.kafka.connect.data.Timestamp&quot;</span>)<br>    fields.foreach(field =&gt; &#123;<br>      <span class="hljs-keyword">val</span> v: <span class="hljs-type">AnyRef</span> = valueStruct.get(field)<br>      <span class="hljs-keyword">val</span> typ: <span class="hljs-type">String</span> = field.schema().name()<br>      <span class="hljs-keyword">val</span> value: <span class="hljs-type">AnyRef</span> = typ <span class="hljs-keyword">match</span> &#123;<br>          <span class="hljs-comment">//转成当地时区，本项目中的当地时间就是中国时间，所以直接写死</span><br>        <span class="hljs-keyword">case</span> <span class="hljs-type">Timestamp</span>.<span class="hljs-type">SCHEMA_NAME</span> =&gt; <span class="hljs-keyword">if</span> (v == <span class="hljs-literal">null</span>) <span class="hljs-literal">null</span> <span class="hljs-keyword">else</span>  <span class="hljs-type">DateUtils</span>.format(v.toString.toLong,<span class="hljs-type">ZoneId</span>.of(<span class="hljs-string">&quot;UTC&quot;</span>))<br><br>        <span class="hljs-keyword">case</span> <span class="hljs-type">ZonedTimestamp</span>.<span class="hljs-type">SCHEMA_NAME</span> =&gt; <span class="hljs-keyword">if</span> (v == <span class="hljs-literal">null</span>) <span class="hljs-literal">null</span> <span class="hljs-keyword">else</span> sql.<span class="hljs-type">Timestamp</span>.valueOf(<span class="hljs-type">TemporalConversions</span>.toLocalDateTime(v, <span class="hljs-type">ZoneId</span>.of(<span class="hljs-string">&quot;Asia/Shanghai&quot;</span>))).toString<br><br>        <span class="hljs-keyword">case</span> <span class="hljs-type">Date</span>.<span class="hljs-type">SCHEMA_NAME</span> =&gt;<span class="hljs-keyword">if</span> (v == <span class="hljs-literal">null</span>) <span class="hljs-literal">null</span> <span class="hljs-keyword">else</span> <span class="hljs-type">DateUtils</span>.format2(v.toString.toLong * <span class="hljs-number">24</span> * <span class="hljs-number">60</span> * <span class="hljs-number">60</span> *<span class="hljs-number">1000</span>L)<br>        <span class="hljs-keyword">case</span> _ =&gt; v<br>      &#125;<br>      data.put(field.name(), value)<br>    &#125;)<br><br>    data<br>  &#125;<br><br><br>  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">addColumns</span></span>(data: <span class="hljs-type">JSONObject</span>): <span class="hljs-type">JSONObject</span> = &#123;<br>    <span class="hljs-keyword">val</span> it: util.<span class="hljs-type">Iterator</span>[<span class="hljs-type">Map</span>.<span class="hljs-type">Entry</span>[<span class="hljs-type">String</span>, <span class="hljs-type">String</span>]] = addColumns.entrySet().iterator()<br>    <span class="hljs-keyword">while</span> (it.hasNext) &#123;<br>      <span class="hljs-keyword">val</span> kv: <span class="hljs-type">Map</span>.<span class="hljs-type">Entry</span>[<span class="hljs-type">String</span>, <span class="hljs-type">String</span>] = it.next()<br>      data.put(kv.getKey, kv.getValue)<br>    &#125;<br>    data.put(<span class="hljs-string">&quot;ts_ms&quot;</span>,ts_ms)<br>    data<br>  &#125;<br><br><br>&#125;<br></code></pre></td></tr></table></figure><p>kafka2doris</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itiaoling.app.ods;<br><br><span class="hljs-keyword">import</span> com.alibaba.fastjson.JSONObject;<br><span class="hljs-keyword">import</span> com.itiaoling.bean.Kafka2DorisConf;<br><span class="hljs-keyword">import</span> com.itiaoling.bean.config.DorisSinkConf;<br><span class="hljs-keyword">import</span> com.itiaoling.bean.config.KafkaSourceConf;<br><span class="hljs-keyword">import</span> com.itiaoling.bean.config.Synchronization;<br><span class="hljs-keyword">import</span> com.itiaoling.common.OffsetStrategyEnum;<br><span class="hljs-keyword">import</span> com.itiaoling.util.ExecutionEnvUtil;<br><span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;<br><span class="hljs-keyword">import</span> org.apache.doris.flink.cfg.DorisExecutionOptions;<br><span class="hljs-keyword">import</span> org.apache.doris.flink.cfg.DorisOptions;<br><span class="hljs-keyword">import</span> org.apache.doris.flink.cfg.DorisReadOptions;<br><span class="hljs-keyword">import</span> org.apache.doris.flink.cfg.DorisSink;<br><span class="hljs-keyword">import</span> org.apache.flink.api.common.eventtime.WatermarkStrategy;<br><span class="hljs-keyword">import</span> org.apache.flink.api.common.functions.FilterFunction;<br><span class="hljs-keyword">import</span> org.apache.flink.api.common.functions.FlatMapFunction;<br><span class="hljs-keyword">import</span> org.apache.flink.api.common.serialization.SimpleStringSchema;<br><span class="hljs-keyword">import</span> org.apache.flink.api.java.utils.ParameterTool;<br><span class="hljs-keyword">import</span> org.apache.flink.configuration.Configuration;<br><span class="hljs-keyword">import</span> org.apache.flink.connector.kafka.source.KafkaSource;<br><span class="hljs-keyword">import</span> org.apache.flink.streaming.api.datastream.DataStreamSource;<br><span class="hljs-keyword">import</span> org.apache.flink.streaming.api.datastream.SingleOutputStreamOperator;<br><span class="hljs-keyword">import</span> org.apache.flink.streaming.api.environment.StreamExecutionEnvironment;<br><span class="hljs-keyword">import</span> org.apache.flink.util.Collector;<br><span class="hljs-keyword">import</span> org.apache.kafka.clients.consumer.ConsumerConfig;<br><br><span class="hljs-keyword">import</span> java.util.Iterator;<br><span class="hljs-keyword">import</span> java.util.List;<br><span class="hljs-keyword">import</span> java.util.Map;<br><span class="hljs-keyword">import</span> java.util.Properties;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Description: Kafka Sink Doris程序</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span>: liu chao</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@date</span>: 2022-03-04 17:03</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@Slf4j</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Kafka2Doris</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-type">ParameterTool</span> <span class="hljs-variable">parameterTool</span> <span class="hljs-operator">=</span> ParameterTool.fromArgs(args);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">active</span> <span class="hljs-operator">=</span> parameterTool.get(<span class="hljs-string">&quot;spring.profiles.active&quot;</span>);<br>        <span class="hljs-type">Integer</span> <span class="hljs-variable">sourceSinkType</span> <span class="hljs-operator">=</span> Integer.valueOf(parameterTool.get(<span class="hljs-string">&quot;sourceSinkType&quot;</span>));<br>        <span class="hljs-type">Integer</span> <span class="hljs-variable">businessType</span> <span class="hljs-operator">=</span> Integer.valueOf(parameterTool.get(<span class="hljs-string">&quot;businessType&quot;</span>));<br>        <span class="hljs-type">String</span> <span class="hljs-variable">tableName</span> <span class="hljs-operator">=</span> parameterTool.get(<span class="hljs-string">&quot;tableName&quot;</span>);<br>        <span class="hljs-comment">//kafka2doris配置信息</span><br>        <span class="hljs-type">Kafka2DorisConf</span> <span class="hljs-variable">kafka2DorisConf</span> <span class="hljs-operator">=</span> (Kafka2DorisConf) ExecutionEnvUtil.getYamlSourceSink(active, sourceSinkType, businessType, tableName);<br>        <span class="hljs-comment">//Flink环境配置信息</span><br>        Map&lt;String, String&gt; flinkEnv = kafka2DorisConf.getFlinkEnv();<br>        <span class="hljs-comment">//kafka配置信息</span><br>        <span class="hljs-type">KafkaSourceConf</span> <span class="hljs-variable">kafkaSourceConf</span> <span class="hljs-operator">=</span> kafka2DorisConf.getKafkaSourceConf();<br>        <span class="hljs-comment">//Doris Sink信息</span><br>        <span class="hljs-type">DorisSinkConf</span> <span class="hljs-variable">dorisSinkConf</span> <span class="hljs-operator">=</span> kafka2DorisConf.getDorisSinkConf();<br>        <span class="hljs-comment">//同步配置信息</span><br>        List&lt;Synchronization&gt; synchronizations = kafka2DorisConf.getSynchronizations();<br><br>        <span class="hljs-type">Properties</span> <span class="hljs-variable">kafkaProp</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();<br>        kafkaProp.setProperty(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, kafkaSourceConf.getBootstrapServers());<br>        kafkaProp.setProperty(ConsumerConfig.GROUP_ID_CONFIG, kafkaSourceConf.getGroupId());<br>        kafkaProp.setProperty(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG, kafkaSourceConf.getOffsetConfig());<br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">dorisUrlWithPort</span> <span class="hljs-operator">=</span> dorisSinkConf.getDorisUrlWithPort();<br>        <span class="hljs-type">String</span> <span class="hljs-variable">dorisUser</span> <span class="hljs-operator">=</span> dorisSinkConf.getDorisUser();<br>        <span class="hljs-type">String</span> <span class="hljs-variable">dorisPassword</span> <span class="hljs-operator">=</span> dorisSinkConf.getDorisPassword();<br><br><br>        <span class="hljs-type">Configuration</span> <span class="hljs-variable">conf</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Configuration</span>();<br>        Iterator&lt;Map.Entry&lt;String, String&gt;&gt; it = flinkEnv.entrySet().iterator();<br>        <span class="hljs-keyword">while</span> (it.hasNext()) &#123;<br>            Map.Entry&lt;String, String&gt; kv = it.next();<br>            conf.setString(kv.getKey(), kv.getValue());<br>        &#125;<br>        <span class="hljs-type">StreamExecutionEnvironment</span> <span class="hljs-variable">env</span> <span class="hljs-operator">=</span> StreamExecutionEnvironment.getExecutionEnvironment(conf);<br>        <span class="hljs-keyword">for</span> (Synchronization synchronization : synchronizations) &#123;<br>            <span class="hljs-type">String</span> <span class="hljs-variable">sequenceCol</span> <span class="hljs-operator">=</span> synchronization.getSequenceCol();<br><br>            <span class="hljs-type">String</span> <span class="hljs-variable">kafkaTopic</span> <span class="hljs-operator">=</span> synchronization.getKafkaTopic();<br>            <span class="hljs-type">String</span> <span class="hljs-variable">dorisDb</span> <span class="hljs-operator">=</span> synchronization.getDorisDb();<br>            <span class="hljs-type">String</span> <span class="hljs-variable">dorisTable</span> <span class="hljs-operator">=</span> synchronization.getDorisTable();<br>            log.info(<span class="hljs-string">&quot;kafkaTopic: &quot;</span> + kafkaTopic + <span class="hljs-string">&quot;\n&quot;</span> + <span class="hljs-string">&quot;dorisDb:&quot;</span> + dorisDb + <span class="hljs-string">&quot;\n&quot;</span> + <span class="hljs-string">&quot;dorisTable:&quot;</span> + dorisTable+<span class="hljs-string">&quot;\n&quot;</span>);<br><br>            <span class="hljs-type">Properties</span> <span class="hljs-variable">dorisProp</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();<br>            dorisProp.setProperty(<span class="hljs-string">&quot;format&quot;</span>, <span class="hljs-string">&quot;json&quot;</span>);<br>            dorisProp.setProperty(<span class="hljs-string">&quot;strip_outer_array&quot;</span>, <span class="hljs-string">&quot;true&quot;</span>);<br>            dorisProp.setProperty(<span class="hljs-string">&quot;function_column.sequence_col&quot;</span>, sequenceCol);<br><br>            KafkaSource&lt;String&gt; source = KafkaSource.&lt;String&gt;builder()<br>                    .setBootstrapServers(kafkaSourceConf.getBootstrapServers())<br>                    .setTopics(kafkaTopic)<br>                    .setGroupId(kafkaSourceConf.getGroupId())<br>                    .setStartingOffsets(OffsetStrategyEnum.getStrategyByConfig(kafkaSourceConf.getOffsetConfig()))<br>                    .setValueOnlyDeserializer(<span class="hljs-keyword">new</span> <span class="hljs-title class_">SimpleStringSchema</span>())<br>                    .build();<br>            DataStreamSource&lt;String&gt; json = env.fromSource(source, WatermarkStrategy.noWatermarks(), kafkaTopic);<br><br>            <span class="hljs-comment">//将非正常的json数据剔除</span><br>            SingleOutputStreamOperator&lt;String&gt; filter = json.filter(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FilterFunction</span>&lt;String&gt;() &#123;<br>                <span class="hljs-meta">@Override</span><br>                <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">filter</span><span class="hljs-params">(String value)</span> &#123;<br>                    <span class="hljs-type">Boolean</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>;<br>                    <span class="hljs-keyword">try</span> &#123;<br>                        <span class="hljs-type">JSONObject</span> <span class="hljs-variable">jsonObject</span> <span class="hljs-operator">=</span> (JSONObject) JSONObject.parse(value);<br>                        <span class="hljs-type">Object</span> <span class="hljs-variable">data</span> <span class="hljs-operator">=</span> jsonObject.get(<span class="hljs-string">&quot;data&quot;</span>);<br>                        <span class="hljs-keyword">if</span> (data == <span class="hljs-literal">null</span> || <span class="hljs-string">&quot;null&quot;</span>.equals(data))&#123;<br>                            result = <span class="hljs-literal">false</span>;<br>                        &#125;<br>                    &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>                        result = <span class="hljs-literal">false</span>;<br>                        log.error(<span class="hljs-string">&quot;json 格式化异常: &quot;</span> + value, e);<br>                    &#125;<br>                    <span class="hljs-keyword">return</span> result;<br>                &#125;<br>            &#125;);<br><br>            SingleOutputStreamOperator&lt;String&gt; rowData = filter.flatMap(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FlatMapFunction</span>&lt;String, String&gt;() &#123;<br>                <span class="hljs-meta">@Override</span><br>                <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">flatMap</span><span class="hljs-params">(String value, Collector&lt;String&gt; out)</span> &#123;<br>                    <span class="hljs-type">JSONObject</span> <span class="hljs-variable">jsonObject</span> <span class="hljs-operator">=</span> (JSONObject) JSONObject.parse(value);<br>                    <span class="hljs-type">JSONObject</span> <span class="hljs-variable">data</span> <span class="hljs-operator">=</span> (JSONObject) jsonObject.get(<span class="hljs-string">&quot;data&quot;</span>);<br><br>                    <span class="hljs-keyword">if</span> (data.get(<span class="hljs-string">&quot;create_time&quot;</span>) == <span class="hljs-literal">null</span> || <span class="hljs-string">&quot;null&quot;</span>.equals(data.get(<span class="hljs-string">&quot;create_time&quot;</span>))) &#123;<br>                        data.put(<span class="hljs-string">&quot;create_time&quot;</span>, <span class="hljs-string">&quot;2020-01-01 00:00:00&quot;</span>);<br>                    &#125;<br><br>                    out.collect(data.toJSONString());<br><br>                &#125;<br>            &#125;);<br><br>            rowData.addSink(DorisSink.sink(<br>                    DorisReadOptions.builder().build(),<br>                    DorisExecutionOptions.builder()<br>                            .setBatchSize(synchronization.getDorisBatchSize())<br>                            .setBatchIntervalMs(synchronization.getDorisBatchIntervalMs())<br>                            .setMaxRetries(synchronization.getMaxRetries())<br>                            .setStreamLoadProp(dorisProp).build(),<br>                    DorisOptions.builder()<br>                            .setFenodes(dorisUrlWithPort)<br>                            .setTableIdentifier(dorisDb + <span class="hljs-string">&quot;.&quot;</span> + dorisTable)<br>                            .setUsername(dorisUser)<br>                            .setPassword(dorisPassword).build()<br>            )).name(dorisDb + <span class="hljs-string">&quot;.&quot;</span> + dorisTable);<br><br>        &#125;<br><br>        env.execute(kafka2DorisConf.getAppName());<br>    &#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure><p>1.当yarn per job模式下一个flinkcdc作业同步多库多表数据时候, 如果该作业同步的表中有一个数据量比较大的表，建议将该表单独拎出来作为一个作业同步，内存调大。不然会影响同批次别的表的同步。</p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>Flink</category>
      
    </categories>
    
    
    <tags>
      
      <tag>FlinkCDC</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>数据治理实践</title>
    <link href="/posts/2022/12/85e82fc.html"/>
    <url>/posts/2022/12/85e82fc.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><p>数据质量治理</p><p>数据质量是数据治理的核心，也是基础工作。数据质量通常会从及时性、真实性、唯一性、完整性、有效性、一致性等六个维度来衡量。</p><p>对于数据质量的监控，主要包括三个环节：</p><p>第一，结合数据质量衡量的六个维度以及日常工作中发现的数据质量问题，配置相关规则。</p><p>第二，在数据加工的各个环节设置检查点，比如从ODS到DW，从DW到DM等环节。如在ODS检查点设置中，可能会包括数据源抽取记录的检查；在基础层会有空值、编码值、一致性、重复性等问题的检查</p><p>第三，输出异常结果，进行告警处理。</p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>大数据</category>
      
    </categories>
    
    
    <tags>
      
      <tag>数据治理</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>flink上线异常日记</title>
    <link href="/posts/2022/12/f77448ef.html"/>
    <url>/posts/2022/12/f77448ef.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><h3 id="问题1-Exceeded-checkpoint-tolerable-failure-threshold"><a href="#问题1-Exceeded-checkpoint-tolerable-failure-threshold" class="headerlink" title="问题1:Exceeded checkpoint tolerable failure threshold"></a>问题1:Exceeded checkpoint tolerable failure threshold</h3><p>Flink任务失败，检查点失效：Exceeded checkpoint tolerable failure threshold.</p><p>最近实时平台flink任务频繁失败，报检查点方面的错误，初步排查是因为flinkcdc在同步mysql数据的时候，mysql表存有大json的数据，并且数据量达到2千万，所以导致flink作业在checkpoint的时候会变得异常缓慢。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-number">2022</span>-<span class="hljs-number">12</span>-<span class="hljs-number">04</span> <span class="hljs-number">16</span>:<span class="hljs-number">26</span>:<span class="hljs-number">46</span>,<span class="hljs-number">566</span> INFO  org.apache.flink.runtime.checkpoint.CheckpointCoordinator    [] - Checkpoint <span class="hljs-number">670223</span> of job 61103d713243c4a71befb436fa3f32ee expired before completing.<br><span class="hljs-number">2022</span>-<span class="hljs-number">07</span>-<span class="hljs-number">16</span> <span class="hljs-number">06</span>:<span class="hljs-number">26</span>:<span class="hljs-number">46</span>,<span class="hljs-number">571</span> INFO  org.apache.flink.runtime.jobmaster.JobMaster                 [] - Trying to recover from a global failure.<br>org.apache.flink.util.FlinkRuntimeException: Exceeded checkpoint tolerable failure threshold.<br>at org.apache.flink.runtime.checkpoint.CheckpointFailureManager.handleCheckpointException(CheckpointFailureManager.java:<span class="hljs-number">98</span>) ~[flink-dist_2<span class="hljs-number">.11</span>-<span class="hljs-number">1.13</span><span class="hljs-number">.1</span>.jar:<span class="hljs-number">1.13</span><span class="hljs-number">.1</span>]<br>at org.apache.flink.runtime.checkpoint.CheckpointFailureManager.handleJobLevelCheckpointException(CheckpointFailureManager.java:<span class="hljs-number">67</span>) ~[flink-dist_2<span class="hljs-number">.11</span>-<span class="hljs-number">1.13</span><span class="hljs-number">.1</span>.jar:<span class="hljs-number">1.13</span><span class="hljs-number">.1</span>]<br>at org.apache.flink.runtime.checkpoint.CheckpointCoordinator.abortPendingCheckpoint(CheckpointCoordinator.java:<span class="hljs-number">1934</span>) ~[flink-dist_2<span class="hljs-number">.11</span>-<span class="hljs-number">1.13</span><span class="hljs-number">.1</span>.jar:<span class="hljs-number">1.13</span><span class="hljs-number">.1</span>]<br>at org.apache.flink.runtime.checkpoint.CheckpointCoordinator.abortPendingCheckpoint(CheckpointCoordinator.java:<span class="hljs-number">1906</span>) ~[flink-dist_2<span class="hljs-number">.11</span>-<span class="hljs-number">1.13</span><span class="hljs-number">.1</span>.jar:<span class="hljs-number">1.13</span><span class="hljs-number">.1</span>]<br>at org.apache.flink.runtime.checkpoint.CheckpointCoordinator.access$<span class="hljs-number">600</span>(CheckpointCoordinator.java:<span class="hljs-number">96</span>) ~[flink-dist_2<span class="hljs-number">.11</span>-<span class="hljs-number">1.13</span><span class="hljs-number">.1</span>.jar:<span class="hljs-number">1.13</span><span class="hljs-number">.1</span>]<br>at org.apache.flink.runtime.checkpoint.CheckpointCoordinator$CheckpointCanceller.run(CheckpointCoordinator.java:<span class="hljs-number">1990</span>) ~[flink-dist_2<span class="hljs-number">.11</span>-<span class="hljs-number">1.13</span><span class="hljs-number">.1</span>.jar:<span class="hljs-number">1.13</span><span class="hljs-number">.1</span>]<br>at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:<span class="hljs-number">511</span>) ~[?:<span class="hljs-number">1.8</span><span class="hljs-number">.0_201</span>]<br>at java.util.concurrent.FutureTask.run(FutureTask.java:<span class="hljs-number">266</span>) ~[?:<span class="hljs-number">1.8</span><span class="hljs-number">.0_201</span>]<br>at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$<span class="hljs-number">201</span>(ScheduledThreadPoolExecutor.java:<span class="hljs-number">180</span>) ~[?:<span class="hljs-number">1.8</span><span class="hljs-number">.0_201</span>]<br>at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:<span class="hljs-number">293</span>) ~[?:<span class="hljs-number">1.8</span><span class="hljs-number">.0_201</span>]<br>at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:<span class="hljs-number">1149</span>) ~[?:<span class="hljs-number">1.8</span><span class="hljs-number">.0_201</span>]<br>at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:<span class="hljs-number">624</span>) ~[?:<span class="hljs-number">1.8</span><span class="hljs-number">.0_201</span>]<br>at java.lang.Thread.run(Thread.java:<span class="hljs-number">748</span>) ~[?:<span class="hljs-number">1.8</span><span class="hljs-number">.0_201</span>]<br><br></code></pre></td></tr></table></figure><p>在报<code>Exceeded checkpoint tolerable failure threshold.</code>错误的之前，是先报的是<code>Checkpoint expired before completing.</code>大概意思是检查点在完成前过期了。</p><h3 id="原因："><a href="#原因：" class="headerlink" title="原因："></a>原因：</h3><p>checkpointTimeout 设置的checkpoint超时时间内未完成任务 导致的超时异常</p><h3 id="解决方案I："><a href="#解决方案I：" class="headerlink" title="解决方案I："></a>解决方案I：</h3><p>1.增加超时时间</p><p>2.增加机器性能</p><p>3.较少数据处理量：source并行度和窗口数据量减少，sink并行度增加</p><p>4.优化耗时的算子（数据倾斜）</p><p>5.设置可容忍检查点失败次数配置</p><p>execution.checkpointing.tolerable-failed-checkpoints 默认是(none)</p><p>最后翻看flink官网，通过设置execution.checkpointing.tolerable-failed-checkpoints允许容忍检查点失败个数，解决问题。例如将execution.checkpointing.tolerable-failed-checkpoints设置为3，连续失败3次，continuousFailureCounter会累计到3，作业就会尝试重启。如果中间有一个checkpoint成功了，continuousFailureCounter就会重置为0.</p><p>通常是该flink程序运行10min钟后就会报超时异常的错误，导致数据同步不成功。10min钟后查看flink任务web界面，任务正常，但检查点确实失败过一次，也同样是任务启动后10min钟失败的，失败原因和之前一样<code>Checkpoint expired before completing.</code></p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221205172744.png"></p><h3 id="解决方案II："><a href="#解决方案II：" class="headerlink" title="解决方案II："></a>解决方案II：</h3><p>flinkcdc2.2版本，读mysql数据到doris报错</p><p>设置execution.checkpointing.tolerable-failed-checkpoints &#x3D; 3没用，flinkcdc程序在第一个checkpoint点位会一直in-progress，此时可以尝试增大jobmanager内存（-Djobmanager.memory.process.size&#x3D;1024mb），在增大jobmanager内存后，checkpoint正常，但发现数据还是没有同步到对应的表。</p><p>后来同事在cdc的github上找到类似的issue，mysql表会突然insert上亿的数据，flinkcdc同步不进去。</p><p><a href="https://github.com/ververica/flink-cdc-connectors/issues/460">https://github.com/ververica/flink-cdc-connectors/issues/460</a></p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20230116201558.png"></p><p>后来通过离线batch的方式解决</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itiaoling.app.ods;<br><br><span class="hljs-keyword">import</span> com.alibaba.fastjson.JSONObject;<br><span class="hljs-keyword">import</span> com.itiaoling.bean.batch.GoodsEbayCompatibilityModel;<br><span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;<br><span class="hljs-keyword">import</span> org.apache.doris.flink.cfg.DorisExecutionOptions;<br><span class="hljs-keyword">import</span> org.apache.doris.flink.cfg.DorisOptions;<br><span class="hljs-keyword">import</span> org.apache.doris.flink.cfg.DorisReadOptions;<br><span class="hljs-keyword">import</span> org.apache.doris.flink.cfg.DorisSink;<br><span class="hljs-keyword">import</span> org.apache.flink.api.common.functions.MapFunction;<br><span class="hljs-keyword">import</span> org.apache.flink.configuration.Configuration;<br><span class="hljs-keyword">import</span> org.apache.flink.streaming.api.datastream.DataStream;<br><span class="hljs-keyword">import</span> org.apache.flink.streaming.api.datastream.SingleOutputStreamOperator;<br><span class="hljs-keyword">import</span> org.apache.flink.streaming.api.environment.StreamExecutionEnvironment;<br><span class="hljs-keyword">import</span> org.apache.flink.table.api.EnvironmentSettings;<br><span class="hljs-keyword">import</span> org.apache.flink.table.api.SqlDialect;<br><span class="hljs-keyword">import</span> org.apache.flink.table.api.Table;<br><span class="hljs-keyword">import</span> org.apache.flink.table.api.bridge.java.StreamTableEnvironment;<br><span class="hljs-keyword">import</span> java.util.Properties;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EscMysql2DorisBatch</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br><br>        <span class="hljs-type">Configuration</span> <span class="hljs-variable">conf</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Configuration</span>();<br>        conf.setString(<span class="hljs-string">&quot;execution.checkpointing.interval&quot;</span>, <span class="hljs-string">&quot;10000&quot;</span>);<br>        conf.setString(<span class="hljs-string">&quot;execution.checkpointing.mode&quot;</span>, <span class="hljs-string">&quot;EXACTLY_ONCE&quot;</span>);<br>        conf.setString(<span class="hljs-string">&quot;state.checkpoints.num-retained&quot;</span>, <span class="hljs-string">&quot;2&quot;</span>);<br>        conf.setString(<span class="hljs-string">&quot;state.checkpoints.dir&quot;</span>, <span class="hljs-string">&quot;hdfs:/ns/flink/checkpoints/esc_buyer1_batch&quot;</span>);<br>        <span class="hljs-type">StreamExecutionEnvironment</span> <span class="hljs-variable">env</span> <span class="hljs-operator">=</span> StreamExecutionEnvironment.getExecutionEnvironment(conf);<br><br>StreamExecutionEnvironment.createLocalEnvironmentWithWebUI(conf);<br><br>        env.setParallelism(<span class="hljs-number">10</span>);<br><br>        <span class="hljs-type">EnvironmentSettings</span> <span class="hljs-variable">Settings</span> <span class="hljs-operator">=</span> EnvironmentSettings.newInstance().inStreamingMode().build();<br><br>        <span class="hljs-type">StreamTableEnvironment</span> <span class="hljs-variable">tEnv</span> <span class="hljs-operator">=</span> StreamTableEnvironment.create(env, Settings);<br>        tEnv.getConfig().setSqlDialect(SqlDialect.DEFAULT);<br><br>        tEnv.executeSql(                   <br>                        <span class="hljs-string">&quot;CREATE TABLE test_multi_jdbc(</span><br><span class="hljs-string">                        `id` BIGINT COMMENT &#x27;&#x27;,</span><br><span class="hljs-string">                        `dbctime` TIMESTAMP(3) COMMENT &#x27;&#x27;,</span><br><span class="hljs-string">                        `dbutime` TIMESTAMP(3) COMMENT &#x27;&#x27;,</span><br><span class="hljs-string">                        `extension` STRING COMMENT &#x27;&#x27;) COMMENT &#x27;null&#x27;</span><br><span class="hljs-string">                        WITH (</span><br><span class="hljs-string">                          &#x27;connector&#x27; = &#x27;multi-jdbc&#x27;,</span><br><span class="hljs-string">                          &#x27;table-name&#x27; = &#x27;test_table.*&#x27;,</span><br><span class="hljs-string">                          &#x27;schema-name&#x27; = &#x27;test_database.*&#x27;,</span><br><span class="hljs-string">                          &#x27;username&#x27; = &#x27;$&#123;username&#125;&#x27;,</span><br><span class="hljs-string">                          &#x27;password&#x27; = &#x27;$&#123;password&#125;&#x27;,</span><br><span class="hljs-string">                          &#x27;scan.partition.column&#x27; = &#x27;id&#x27;,</span><br><span class="hljs-string">                          &#x27;scan.batch.size&#x27; = &#x27;100000&#x27;,</span><br><span class="hljs-string">                          &#x27;url&#x27; = &#x27;jdbc:mysql://$&#123;connection1&#125;;jdbc:mysql://$&#123;connection2&#125;&#x27;</span><br><span class="hljs-string">                        )</span><br><span class="hljs-string"></span><br><span class="hljs-string">        Table table = tEnv.sqlQuery(&quot;</span>select t.id,<span class="hljs-string">&quot; +</span><br><span class="hljs-string">                                              &quot;</span>t.site,<span class="hljs-string">&quot; +</span><br><span class="hljs-string">                                              &quot;</span>t.category_id,<span class="hljs-string">&quot; +</span><br><span class="hljs-string">                                              &quot;</span>t.esc_category_id,<span class="hljs-string">&quot; +</span><br><span class="hljs-string">                                              &quot;</span>t.model_id,<span class="hljs-string">&quot; +</span><br><span class="hljs-string">                                              &quot;</span>t.version,<span class="hljs-string">&quot; +</span><br><span class="hljs-string">                                              &quot;</span>t.update_type,<span class="hljs-string">&quot; +</span><br><span class="hljs-string">                                              &quot;</span>DATE_FORMAT(t.create_time, <span class="hljs-string">&#x27;yyyy-MM-dd HH:mm:ss&#x27;</span>) as create_time,<span class="hljs-string">&quot; +</span><br><span class="hljs-string">                                              &quot;</span>DATE_FORMAT(t.update_time, <span class="hljs-string">&#x27;yyyy-MM-dd HH:mm:ss&#x27;</span>) as update_time,<span class="hljs-string">&quot; +</span><br><span class="hljs-string">                                              &quot;</span>t.deleted,<span class="hljs-string">&quot; +</span><br><span class="hljs-string">                                              &quot;</span><span class="hljs-number">0</span> as is_deleted_flg, <span class="hljs-string">&quot; +</span><br><span class="hljs-string">                                              &quot;</span><span class="hljs-number">1673853468700</span> as ts_ms <span class="hljs-string">&quot; +</span><br><span class="hljs-string">                                              &quot;</span>from goods_ebay_compatibility_model t <span class="hljs-string">&quot;</span><br><span class="hljs-string">                                    );</span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string">        DataStream&lt;GoodsEbayCompatibilityModel&gt; ordersDataStream = tEnv.toDataStream(table, GoodsEbayCompatibilityModel.class);</span><br><span class="hljs-string">        SingleOutputStreamOperator&lt;Object&gt; map = ordersDataStream.map(new MapFunction&lt;GoodsEbayCompatibilityModel, Object&gt;() &#123;</span><br><span class="hljs-string">            @Override</span><br><span class="hljs-string">            public Object map(GoodsEbayCompatibilityModel goodsEbayCompatibilityModel) throws Exception &#123;</span><br><span class="hljs-string">                return JSONObject.toJSON(goodsEbayCompatibilityModel).toString();</span><br><span class="hljs-string">            &#125;</span><br><span class="hljs-string">        &#125;);</span><br><span class="hljs-string"></span><br><span class="hljs-string">//        map.print();</span><br><span class="hljs-string"></span><br><span class="hljs-string">        Properties sinkPproperties = new Properties();</span><br><span class="hljs-string">        sinkPproperties.setProperty(&quot;</span>format<span class="hljs-string">&quot;, &quot;</span>json<span class="hljs-string">&quot;);</span><br><span class="hljs-string">        sinkPproperties.setProperty(&quot;</span>strip_outer_array<span class="hljs-string">&quot;, &quot;</span><span class="hljs-literal">true</span><span class="hljs-string">&quot;);</span><br><span class="hljs-string"></span><br><span class="hljs-string">        map.addSink(</span><br><span class="hljs-string">                DorisSink.sink(</span><br><span class="hljs-string">                        DorisReadOptions.builder().build(),</span><br><span class="hljs-string">                        DorisExecutionOptions.builder()</span><br><span class="hljs-string">                                .setBatchSize(100000)</span><br><span class="hljs-string">                                .setBatchIntervalMs(20000l)</span><br><span class="hljs-string">                                .setMaxRetries(3)</span><br><span class="hljs-string">                                .setStreamLoadProp(sinkPproperties).build(),</span><br><span class="hljs-string">                        DorisOptions.builder()</span><br><span class="hljs-string">                                .setFenodes(&quot;</span>XXX:<span class="hljs-number">8030</span>,XXX:<span class="hljs-number">8030</span>,XXX:<span class="hljs-number">8030</span><span class="hljs-string">&quot;)</span><br><span class="hljs-string">                                .setTableIdentifier(&quot;</span>ods.ods_esc_buyer_goods_ebay_compatibility_model_bak<span class="hljs-string">&quot;)</span><br><span class="hljs-string">                                .setUsername(&quot;</span>XXX<span class="hljs-string">&quot;)</span><br><span class="hljs-string">                                .setPassword(&quot;</span>XXX<span class="hljs-string">&quot;)</span><br><span class="hljs-string">                                .build()</span><br><span class="hljs-string">                ));</span><br><span class="hljs-string"></span><br><span class="hljs-string">        env.execute(&quot;</span>mysql-sink-doris-batch<span class="hljs-string">&quot;);</span><br><span class="hljs-string">    &#125;</span><br><span class="hljs-string">&#125;</span><br><span class="hljs-string"></span><br></code></pre></td></tr></table></figure><h3 id="问题2-同步的上游表有DDL变更会导致flinkcdc作业同步任务出问题"><a href="#问题2-同步的上游表有DDL变更会导致flinkcdc作业同步任务出问题" class="headerlink" title="问题2: 同步的上游表有DDL变更会导致flinkcdc作业同步任务出问题"></a>问题2: 同步的上游表有DDL变更会导致flinkcdc作业同步任务出问题</h3><p>flinkcdc在同步mysql表时是通过读取binlog日志来同步数据，在mysql表的ddl变更后，flinkcdc读取不到binlog的点位导致数据同步出问题。</p><h3 id="解决方案："><a href="#解决方案：" class="headerlink" title="解决方案："></a>解决方案：</h3><p>同步修改ods表结构，重启flink同步任务</p><h3 id="问题3-The-heartbeat…timed-out"><a href="#问题3-The-heartbeat…timed-out" class="headerlink" title="问题3: The heartbeat…timed out"></a>问题3: The heartbeat…timed out</h3><p>flink程序报错如下：</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs stylus">Caused by: java<span class="hljs-selector-class">.util</span><span class="hljs-selector-class">.concurrent</span><span class="hljs-selector-class">.TimeoutException</span>: The heartbeat of TaskManager with id container_e06_1627962873638_5732_01_000003  timed out.<br> at org<span class="hljs-selector-class">.apache</span><span class="hljs-selector-class">.flink</span><span class="hljs-selector-class">.runtime</span><span class="hljs-selector-class">.resourcemanager</span>.ResourceManager<span class="hljs-variable">$TaskManagerHeartbeatListener</span><span class="hljs-selector-class">.notifyHeartbeatTimeout</span>(ResourceManager<span class="hljs-selector-class">.java</span>:<span class="hljs-number">1125</span>)<br> at org<span class="hljs-selector-class">.apache</span><span class="hljs-selector-class">.flink</span><span class="hljs-selector-class">.runtime</span><span class="hljs-selector-class">.heartbeat</span><span class="hljs-selector-class">.HeartbeatMonitorImpl</span><span class="hljs-selector-class">.run</span>(HeartbeatMonitorImpl<span class="hljs-selector-class">.java</span>:<span class="hljs-number">109</span>)<br> at java<span class="hljs-selector-class">.util</span><span class="hljs-selector-class">.concurrent</span>.Executors<span class="hljs-variable">$RunnableAdapter</span><span class="hljs-selector-class">.call</span>(Executors<span class="hljs-selector-class">.java</span>:<span class="hljs-number">511</span>)<br> at java<span class="hljs-selector-class">.util</span><span class="hljs-selector-class">.concurrent</span><span class="hljs-selector-class">.FutureTask</span><span class="hljs-selector-class">.run</span>(FutureTask<span class="hljs-selector-class">.java</span>:<span class="hljs-number">266</span>)<br> at org<span class="hljs-selector-class">.apache</span><span class="hljs-selector-class">.flink</span><span class="hljs-selector-class">.runtime</span><span class="hljs-selector-class">.rpc</span><span class="hljs-selector-class">.akka</span><span class="hljs-selector-class">.AkkaRpcActor</span><span class="hljs-selector-class">.handleRunAsync</span>(AkkaRpcActor<span class="hljs-selector-class">.java</span>:<span class="hljs-number">397</span>)<br> at org<span class="hljs-selector-class">.apache</span><span class="hljs-selector-class">.flink</span><span class="hljs-selector-class">.runtime</span><span class="hljs-selector-class">.rpc</span><span class="hljs-selector-class">.akka</span><span class="hljs-selector-class">.AkkaRpcActor</span><span class="hljs-selector-class">.handleRpcMessage</span>(AkkaRpcActor<span class="hljs-selector-class">.java</span>:<span class="hljs-number">190</span>)<br> ... <span class="hljs-number">20</span> more<br></code></pre></td></tr></table></figure><p>原因：此错误是container心跳超时，出现此种错误一般有两种可能：</p><p>1、分布式物理机网络失联，这种原因一般情况下failover后作业能正常恢复，如果出现的不频繁可以不用关注；</p><p>2、failover的节点对应TM的内存设置太小，GC严重导致心跳超时，建议调大对应节点的内存值</p><h3 id="解决方案：-1"><a href="#解决方案：-1" class="headerlink" title="解决方案："></a>解决方案：</h3><p>加大flink程序的运行内存</p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>Flink</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Flink</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>python代码-linux系统读取excel模版转化成图片</title>
    <link href="/posts/2022/12/f1574eb6.html"/>
    <url>/posts/2022/12/f1574eb6.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><h3 id="windows系统excel转换成图片"><a href="#windows系统excel转换成图片" class="headerlink" title="windows系统excel转换成图片"></a>windows系统excel转换成图片</h3><p>用python仅仅限于windows平台的包</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> win32com.client<br><span class="hljs-keyword">from</span> PIL <span class="hljs-keyword">import</span> ImageGrab<br><span class="hljs-keyword">import</span> logging<br><br>logging.basicConfig(level=logging.DEBUG,<span class="hljs-built_in">format</span>=LOG_FORMAT,datefmt=DATE_FORMAT,filename=<span class="hljs-string">&#x27;/py_pj/esc_hour.log&#x27;</span>,filemode=<span class="hljs-string">&#x27;a&#x27;</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">save_pic</span>(<span class="hljs-params">excel_file,sheet_name,pic_file,excel_rg</span>):<br>    w = win32com.client.Dispatch(<span class="hljs-string">&#x27;Excel.Application&#x27;</span>)<br>    wb = w.Workbooks.Open(excel_file)<br>    ws = wb.Worksheets(sheet_name)<br>    ws.Range(excel_rg).CopyPicture(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>)<br>    im = ImageGrab.grabclipboard()<br>    im.save(pic_file,<span class="hljs-string">&quot;png&quot;</span>)<br>    wb.Save()<br>    wb.Close()<br>    logging.info(<span class="hljs-string">&quot;====图片保存成功&quot;</span>)    <br></code></pre></td></tr></table></figure><p>后面需要在linux服务器上调度，继而需要找等替代win32com的包</p><p>win32com, xlwings,xlsxwriter,DataNitro,pandas,openpyxl,xlutils都只能在windows或者Mac系统</p><h3 id="linux上实现excel转换成图片"><a href="#linux上实现excel转换成图片" class="headerlink" title="linux上实现excel转换成图片"></a>linux上实现excel转换成图片</h3><p>后来发现aspose的产品，不依赖操作系统能够在linux上运行且不需要安装Excel程序就能够将excel转换成图片，它不仅能够将excel转换成图片，各种文件类型之间都能够想换转换，官方文档链接如下：</p><p><a href="https://reference.aspose.com/">https://reference.aspose.com/</a></p><p>如下为linux下读取excel模版转换成图片的代码</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#coding=utf-8</span><br><span class="hljs-keyword">import</span> time<br><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd<br><span class="hljs-keyword">import</span> datetime<br><span class="hljs-keyword">import</span> pymysql<br><span class="hljs-keyword">import</span> openpyxl<br><span class="hljs-keyword">from</span> openpyxl.utils.dataframe <span class="hljs-keyword">import</span> dataframe_to_rows<br><span class="hljs-keyword">import</span> shutil<br><span class="hljs-keyword">import</span> requests<br><span class="hljs-keyword">import</span> json<br><span class="hljs-keyword">import</span> logging<br><span class="hljs-keyword">import</span> jpype<br><span class="hljs-keyword">import</span> asposecells<br>jpype.startJVM()<br><span class="hljs-keyword">from</span> asposecells.api <span class="hljs-keyword">import</span> LoadOptions,IndividualFontConfigs,Workbook,ImageOrPrintOptions,SheetRender,ImageType<br><span class="hljs-keyword">from</span> PIL <span class="hljs-keyword">import</span> Image<br><span class="hljs-keyword">from</span> come.util <span class="hljs-keyword">import</span> DBUtilN, SendMessageInWetchat, FileDeal<br><br><br>LOG_FORMAT = <span class="hljs-string">&quot;%(asctime)s - %(levelname)s - %(message)s&quot;</span><br>DATE_FORMAT = <span class="hljs-string">&quot;%Y-%m-%d %A %H:%M:%S&quot;</span><br><br><span class="hljs-comment"># logging.basicConfig(level=logging.DEBUG,format=LOG_FORMAT,datefmt=DATE_FORMAT)</span><br><br><span class="hljs-comment"># logging.basicConfig(level=logging.DEBUG,format=LOG_FORMAT,datefmt=DATE_FORMAT,filename= r&#x27;D:\auto_file\EF\EF-DAILY\moban\efdaily.log&#x27;, filemode = &#x27;a&#x27;)</span><br><br>logging.basicConfig(level=logging.DEBUG,<span class="hljs-built_in">format</span>=LOG_FORMAT,datefmt=DATE_FORMAT,filename= <span class="hljs-string">r&#x27;./py_pj/USED_SYS_MAIL/log/esc_hour.log&#x27;</span>, filemode = <span class="hljs-string">&#x27;a&#x27;</span>)<br><br>day_date = (datetime.datetime.now()).strftime(<span class="hljs-string">&#x27;%Y%m%d&#x27;</span>)<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">daily_report</span>():<br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self,con</span>):<br>                <span class="hljs-variable language_">self</span>.con=con<br>                <span class="hljs-comment">#ef应用配置</span><br><br><br>                <span class="hljs-variable language_">self</span>.Secret = <span class="hljs-string">&#x27;XXXXXX&#x27;</span><br>                <span class="hljs-variable language_">self</span>.agentid = XXXXX  <span class="hljs-comment"># esc 应用ID</span><br>                <span class="hljs-variable language_">self</span>.toparty = <span class="hljs-string">&quot;1&quot;</span>  <span class="hljs-comment"># esc 信息接收用户组  9</span><br><br>                <span class="hljs-variable language_">self</span>.path_moban = <span class="hljs-string">r&#x27;./auto_file/eSC/eSC-DAILY-DAY/moban&#x27;</span> <span class="hljs-comment">#模板模块路径</span><br>                <span class="hljs-variable language_">self</span>.path_l = <span class="hljs-string">r&#x27;./auto_file/eSC/eSC-DAILY-DAY/use&#x27;</span>   <span class="hljs-comment">#应用操作模块</span><br>                <span class="hljs-variable language_">self</span>.path_bak = <span class="hljs-string">r&#x27;./auto_file/eSC/eSC-DAILY-DAY/bak&#x27;</span> <span class="hljs-comment">#备份模块</span><br>                <span class="hljs-variable language_">self</span>.excel_name=<span class="hljs-string">&quot;daily_report_esc_byday&quot;</span>        <span class="hljs-comment">#生成excel文件名称</span><br>                <span class="hljs-variable language_">self</span>.exel_moban=<span class="hljs-variable language_">self</span>.path_moban +<span class="hljs-string">&quot;/&quot;</span>+<span class="hljs-variable language_">self</span>.excel_name + <span class="hljs-string">&quot;.xlsx&quot;</span>  <span class="hljs-comment">#模板文件名称</span><br>                <span class="hljs-variable language_">self</span>.filename_today = <span class="hljs-variable language_">self</span>.path_l +<span class="hljs-string">&quot;/&quot;</span>+ <span class="hljs-variable language_">self</span>.excel_name + <span class="hljs-string">&quot;_&quot;</span> + day_date + <span class="hljs-string">&quot;.xlsx&quot;</span>   <span class="hljs-comment">#应用文件</span><br>                <span class="hljs-comment">#pic1</span><br>                <span class="hljs-comment"># self.picname = self.path_l + &quot;\\&quot; + &#x27;order.png&#x27;  # 保存图片名称</span><br>                <span class="hljs-variable language_">self</span>.picname = <span class="hljs-variable language_">self</span>.path_l + <span class="hljs-string">&quot;/&quot;</span> + <span class="hljs-string">&#x27;pic1.jpeg&#x27;</span>  <span class="hljs-comment"># 保存图片名称</span><br>                <span class="hljs-variable language_">self</span>.sheet_name = <span class="hljs-string">&#x27;Summary&#x27;</span>  <span class="hljs-comment"># 截图Excel sheet名称 数据页sheet</span><br>                <span class="hljs-comment"># self.range_excel_tab = &#x27;F1:O46&#x27;  # 定位截图位置</span><br>                <span class="hljs-variable language_">self</span>.range_excel_tab = <span class="hljs-string">&#x27;F1:L47&#x27;</span>  <span class="hljs-comment"># 定位截图位置</span><br><br>                <span class="hljs-variable language_">self</span>.sheet_detail = <span class="hljs-string">&#x27;eSC_RawDATA&#x27;</span>  <span class="hljs-comment"># 截图Excel sheet名称 明细页sheet名称</span><br><br>                <span class="hljs-comment">#pic2</span><br>                <span class="hljs-comment"># self.picname1 = self.path_l + &quot;\\&quot; + &#x27;pic2.png&#x27;  # 保存图片名称</span><br>                <span class="hljs-comment"># self.sheet_name1 = &#x27;outbound_seller&#x27;  # 截图Excel sheet名称 数据页sheet</span><br>                <span class="hljs-comment"># self.range_excel_tab1 = &#x27;D1:Z59&#x27;  # 定位截图位置</span><br>                <span class="hljs-comment"># self.sheet_detail1 = &#x27;data2&#x27;  # 截图Excel sheet名称 明细页sheet名称</span><br><br>                <span class="hljs-comment"># self.sql_str=&quot;select time_solt,warehouse_code,cnt,flag,etl_time  from  t_outbound_wecom&quot;  # 查询sql</span><br>                <span class="hljs-comment"># self.pd_sql = &quot;&quot;&quot;select count(1) num  from t_outbound_wecom where etl_time&gt;=date_format(now(),&#x27;%Y-%m-%d %H:00:00&#x27;);&quot;&quot;&quot;  #判断底层etl 是否延迟sql</span><br><br>                <span class="hljs-variable language_">self</span>.sql_str = <span class="hljs-string">&quot;SELECT `platform_code`,`on_offshore`,`type`,`country`,`hour`,`so_date`,`so_qty`,`total_cost`,`etl_time` FROM ads.ads_esc_t_push_so_tracking_revenue&quot;</span>  <span class="hljs-comment"># 查询sql</span><br>                <span class="hljs-comment"># self.pd_sql = &quot;&quot;&quot;select count(1) num  from datamart.t_isc_push_OneSales_order&quot;&quot;&quot;  # 判断底层etl 是否延迟sql</span><br>                <span class="hljs-variable language_">self</span>.pd_sql = <span class="hljs-string">&quot;&quot;&quot;select count(1) num  from ads.ads_esc_t_push_so_tracking_revenue where etl_time&gt;=date_format(now(),&#x27;%Y-%m-%d %H:00:00&#x27;);&quot;&quot;&quot;</span>  <span class="hljs-comment"># 判断底层etl 是否延迟sql</span><br>                <span class="hljs-variable language_">self</span>.times=<span class="hljs-number">1</span>  <span class="hljs-comment">#重复扫描15次 预估15分钟</span><br><br>                <span class="hljs-comment">#pic2</span><br>                <span class="hljs-comment"># self.sql_str1 = &quot;select time_solt,warehouse_code,seller_ocid,cnt,flag,etl_time from t_outbound_wecom_vip&quot;  # 查询sql</span><br><br>        <span class="hljs-comment">#复制模板  从原始位置到新位置</span><br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">copyfile</span>(<span class="hljs-params">self</span>):<br>                <span class="hljs-comment"># logging.info(&quot;copyfile&quot;+&quot;  &quot;+self.excel_moban+&quot;  &quot;+self.filename_today)</span><br>                shutil.copyfile(<span class="hljs-variable language_">self</span>.exel_moban, <span class="hljs-variable language_">self</span>.filename_today)<br>                logging.info(<span class="hljs-string">&quot;===模板备份完成===&quot;</span>)<br><br>        <span class="hljs-comment"># 将文件移到其他文件夹</span><br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">move_file</span>(<span class="hljs-params">self</span>):<br>                FileDeal.fileDeal(<span class="hljs-variable language_">self</span>.path_l).remove_file(<span class="hljs-variable language_">self</span>.path_bak)<br>                logging.info(<span class="hljs-string">&quot;====文件移动成功====&quot;</span>)<br><br><br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_token</span>(<span class="hljs-params">self,Secret,CorpID=<span class="hljs-string">&#x27;XXXXX&#x27;</span></span>):<br>                tagurl = <span class="hljs-string">&#x27;https://qyapi.weixin.qq.com/cgi-bin/gettoken?corpid=&#x27;</span> + CorpID + <span class="hljs-string">&#x27;&amp;corpsecret=&#x27;</span> + Secret<br>                f = requests.get(tagurl)<br>                resultJson = json.loads(f.text)  <span class="hljs-comment"># 加载口令json</span><br>                token = resultJson[<span class="hljs-string">&#x27;access_token&#x27;</span>]  <span class="hljs-comment"># 获取口令</span><br>                <span class="hljs-keyword">return</span> token<br><br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">send_message</span>(<span class="hljs-params">self,token,data</span>):<br>                send_url = <span class="hljs-string">&quot;https://qyapi.weixin.qq.com/cgi-bin/message/send?access_token=&quot;</span> + token<br>                requests.post(url=send_url, data=json.dumps(data))  <span class="hljs-comment"># 提交请求</span><br>                logging.info(<span class="hljs-string">&quot;====信息推送成功====&quot;</span>)<br>                <span class="hljs-comment"># data = &#123;&quot;toparty&quot;: &quot;5&quot;, &quot;msgtype&quot;: &quot;image&quot;, &quot;agentid&quot;: 1000003, &quot;image&quot;: &#123;&quot;media_id&quot;: mediaid&#125;, &quot;safe&quot;: 0&#125;</span><br><br><br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_pic_media</span>(<span class="hljs-params">self,token,file_name,file_type=<span class="hljs-string">&#x27;image&#x27;</span></span>):<br>                upload_url = <span class="hljs-string">&#x27;https://qyapi.weixin.qq.com/cgi-bin/media/upload?access_token=&#x27;</span> + token + <span class="hljs-string">&#x27;&amp;type=&#x27;</span> + file_type +<span class="hljs-string">&#x27;&amp;debug=1&#x27;</span><br>                <span class="hljs-built_in">print</span>(upload_url)<br>                data = &#123;<span class="hljs-string">&quot;media&quot;</span>: <span class="hljs-built_in">open</span>(file_name, <span class="hljs-string">&#x27;rb&#x27;</span>)&#125;<br>                <span class="hljs-built_in">print</span>(file_name)<br>                <span class="hljs-built_in">print</span>(data)<br>                r = requests.post(url=upload_url, files=data)<br>                <span class="hljs-built_in">print</span>(r.text)<br>                resp = json.loads(r.text)  <span class="hljs-comment"># 加载json</span><br>                <span class="hljs-keyword">return</span> resp[<span class="hljs-string">&#x27;media_id&#x27;</span>]<br><br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">excel_to_pic</span>(<span class="hljs-params">self,excel_file,pic_file,excel_rg</span>):<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;excel_file:&#x27;</span>+excel_file+<span class="hljs-string">&#x27;\n&#x27;</span>+<span class="hljs-string">&#x27;pic_file:&#x27;</span>+pic_file+<span class="hljs-string">&#x27;\n&#x27;</span>+<span class="hljs-string">&#x27;excel_rg:&#x27;</span>+excel_rg+<span class="hljs-string">&#x27;\n&#x27;</span>)<br>                loadOptions = LoadOptions()<br>                configs = IndividualFontConfigs()<br>                configs.setFontFolder(<span class="hljs-string">&quot;/data/fonts/chinese&quot;</span>, <span class="hljs-literal">True</span>)<br>                loadOptions.setFontConfigs(configs)<br>                workbook = Workbook(excel_file, loadOptions)<br>                workbook.calculateFormula()<br>                imgOptions = ImageOrPrintOptions()<br>                <span class="hljs-comment"># imgOptions.setDesiredSize(desiredWidth, desiredHeight)</span><br>                imgOptions.setImageType(ImageType.JPEG)<br>                worksheet = workbook.getWorksheets().get(<span class="hljs-number">0</span>)<br>                worksheet.getPageSetup().setPrintArea(excel_rg)<br>                worksheet.getPageSetup().setLeftMargin(<span class="hljs-number">0</span>)<br>                worksheet.getPageSetup().setRightMargin(<span class="hljs-number">0</span>)<br>                worksheet.getPageSetup().setTopMargin(<span class="hljs-number">1</span>)<br>                worksheet.getPageSetup().setBottomMargin(<span class="hljs-number">0</span>)<br>                <span class="hljs-built_in">print</span>(worksheet)<br>                sheetRender = SheetRender(worksheet, imgOptions)<br>                <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(pic_file, <span class="hljs-string">&quot;wb&quot;</span>) <span class="hljs-keyword">as</span> w:<br>                        content = sheetRender.toImageBytes(<span class="hljs-number">0</span>)<br>                        w.write(content)<br>                jpype.shutdownJVM()<br><br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">edit_pic</span>(<span class="hljs-params">self,pic_file</span>):<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;图片保存路径为&gt;&gt;&gt;&#x27;</span>+pic_file)<br>                img = Image.<span class="hljs-built_in">open</span>(pic_file)<br>                width, height = img.size<br>                <span class="hljs-built_in">print</span>(width, height)<br>                box = (<span class="hljs-number">0</span>, <span class="hljs-number">28</span>, <span class="hljs-number">800</span>, <span class="hljs-number">980</span>)<br>                region = img.crop(box)<br>                region.save(pic_file)<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;图片处理成功&#x27;</span>)<br><br><br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">push_data</span>(<span class="hljs-params">self,ws, df, r_x, c_x</span>):<br>                rows = dataframe_to_rows(df, index=<span class="hljs-literal">False</span>)<br>                <span class="hljs-keyword">for</span> r_idx, row <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(rows, <span class="hljs-number">1</span>):<br>                        <span class="hljs-keyword">for</span> c_idx, value <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(row, <span class="hljs-number">1</span>):<br>                                ws.cell(row=r_idx + r_x, column=c_idx + c_x, value=value)<br><br><br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">insert_date_excel</span>(<span class="hljs-params">self,sql,sheet_name,startx=<span class="hljs-number">0</span>,starty=<span class="hljs-number">0</span></span>):<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;insert_date_excel&gt;&gt;&gt;&#x27;</span>+sql+<span class="hljs-string">&#x27;\n&#x27;</span>+<span class="hljs-string">&#x27;sheet_name&gt;&gt;&gt;&#x27;</span>+sheet_name)<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;filename_today&gt;&gt;&gt;&#x27;</span>+<span class="hljs-variable language_">self</span>.filename_today)<br>                df = pd.read_sql(sql, <span class="hljs-variable language_">self</span>.con)<br>                <span class="hljs-built_in">print</span>(df)<br>                wb = openpyxl.load_workbook(<span class="hljs-variable language_">self</span>.filename_today)<br>                ws2 = wb[sheet_name]<br>                <span class="hljs-variable language_">self</span>.push_data(ws2, df, startx, starty)<br>                wb.save(<span class="hljs-variable language_">self</span>.filename_today)<br><br>        <span class="hljs-comment">#重复刷新考虑etl是否运行完成</span><br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_sub_condition</span>(<span class="hljs-params">self</span>):<br>                res=<span class="hljs-number">0</span><br>                <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-variable language_">self</span>.times):<br>                        ss = DBUtilN.exeSelectSql(<span class="hljs-variable language_">self</span>.pd_sql, <span class="hljs-variable language_">self</span>.con)<br>                        <span class="hljs-comment"># print(ss)</span><br>                        <span class="hljs-keyword">if</span> ss[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] !=<span class="hljs-number">0</span>:<br>                                res=<span class="hljs-number">1</span><br>                                <span class="hljs-keyword">break</span><br>                        <span class="hljs-keyword">else</span>:<br>                                time.sleep(<span class="hljs-number">1</span>)<br>                                <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;====等待===&quot;</span>)<br>                <span class="hljs-keyword">return</span> res<br><br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">cal_process</span>(<span class="hljs-params">self</span>):<br>                <span class="hljs-comment">#判断底层etl是否处理完成</span><br>                res=<span class="hljs-variable language_">self</span>.get_sub_condition()<br>                <span class="hljs-comment"># print(&quot;res=&#123;&#125;&quot;.format(res))  0-1</span><br>                <span class="hljs-keyword">if</span> res==<span class="hljs-number">1</span>:<br>                        <span class="hljs-comment"># 移动文件到备份文件夹</span><br>                        <span class="hljs-variable language_">self</span>.move_file()<br>                        <span class="hljs-comment"># 删除备份文件夹之前文件及文件夹</span><br>                        FileDeal.fileDeal(<span class="hljs-variable language_">self</span>.path_bak).deletefile()<br>                        <span class="hljs-comment"># step0 复制Excel模板</span><br>                        <span class="hljs-variable language_">self</span>.copyfile()<br>                        <span class="hljs-variable language_">self</span>.tuisong(<span class="hljs-variable language_">self</span>.sql_str,<span class="hljs-variable language_">self</span>.sheet_detail,<span class="hljs-variable language_">self</span>.sheet_name,<span class="hljs-variable language_">self</span>.picname,<span class="hljs-variable language_">self</span>.range_excel_tab)<br>                        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;最终推送图片路径为&gt;&gt;&gt;&#x27;</span>+<span class="hljs-variable language_">self</span>.picname)<br>                        logging.info(<span class="hljs-string">&quot;===按esc数据发送完成===&quot;</span>)<br>                        <span class="hljs-comment"># self.tuisong(self.sql_str1, self.sheet_detail1, self.sheet_name1, self.picname1, self.range_excel_tab1)</span><br>                        <span class="hljs-comment"># logging.info(&quot;===按seller分析数据发送完成===&quot;)</span><br><br>                        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;===推送完成===&quot;</span>)<br><br>                <span class="hljs-keyword">else</span>:<br>                        logging.info(<span class="hljs-string">&quot;===day数据，底层etl 同步数据延迟，未推送===&quot;</span>)<br>                        <span class="hljs-variable language_">self</span>.errorts(<span class="hljs-string">&quot;测试消息：==day数据，esc底层etl同步延迟，请上线查看&quot;</span>)<br><br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">errorts</span>(<span class="hljs-params">self,msg</span>):<br>                <span class="hljs-comment"># 报警应用</span><br>                SendMessageInWetchat.send_txt_msg(msg,toparty=<span class="hljs-variable language_">self</span>.toparty1,agentid=<span class="hljs-variable language_">self</span>.agentid1,Secret=<span class="hljs-variable language_">self</span>.Secret1)<br><br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">tuisong</span>(<span class="hljs-params">self,sql,sheet_detail,sheet_name,picname,range_excel_tab</span>):<br>                <span class="hljs-comment"># step1 将数据插入Excel</span><br>                <span class="hljs-variable language_">self</span>.insert_date_excel(sql, sheet_detail)<br><br>                <span class="hljs-comment"># sep2 将Excel数据保存为图片</span><br>                <span class="hljs-variable language_">self</span>.excel_to_pic(<span class="hljs-variable language_">self</span>.filename_today, picname, range_excel_tab)<br><br>                <span class="hljs-comment"># sep3 保存图片并裁剪</span><br>                <span class="hljs-variable language_">self</span>.edit_pic(<span class="hljs-variable language_">self</span>.picname)<br><br>                <span class="hljs-comment"># 获取token</span><br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;开始获取token&#x27;</span>)<br>                token = <span class="hljs-variable language_">self</span>.get_token(<span class="hljs-variable language_">self</span>.Secret)<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;获取token成功&#x27;</span>)<br>                <span class="hljs-comment"># 获取mediaid</span><br>                mediaid = <span class="hljs-variable language_">self</span>.get_pic_media(token, picname)<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;获取mediaid成功&#x27;</span>)<br>                <span class="hljs-comment"># 组装data</span><br>                data = &#123;<span class="hljs-string">&quot;toparty&quot;</span>: <span class="hljs-variable language_">self</span>.toparty, <span class="hljs-string">&quot;msgtype&quot;</span>: <span class="hljs-string">&quot;image&quot;</span>, <span class="hljs-string">&quot;agentid&quot;</span>: <span class="hljs-variable language_">self</span>.agentid, <span class="hljs-string">&quot;image&quot;</span>: &#123;<span class="hljs-string">&quot;media_id&quot;</span>: mediaid&#125;,<span class="hljs-string">&quot;safe&quot;</span>: <span class="hljs-number">0</span>&#125;<br>                <span class="hljs-comment"># step3 发送内容</span><br>                <span class="hljs-variable language_">self</span>.send_message(token, data)<br>                 <span class="hljs-comment"># 移动文���到备份文件夹</span><br>                 <span class="hljs-comment"># self.move_file()</span><br>                 <span class="hljs-comment"># logging.info(&quot;===单次推送完成===&quot;)</span><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br><br>        mysqlCon =  pymysql.connect(database=<span class="hljs-string">&#x27;XXX&#x27;</span>,<br>                        host=<span class="hljs-string">&#x27;XXXX&#x27;</span>,<br>                        user=<span class="hljs-string">&#x27;XXX&#x27;</span>,<br>                        password=<span class="hljs-string">&#x27;XXXX&#x27;</span>,<br>                        port=<span class="hljs-number">9030</span>,<br>                        charset=<span class="hljs-string">&#x27;utf8mb4&#x27;</span>,<br>                        connect_timeout=<span class="hljs-number">120</span>)<br>        tt = daily_report(mysqlCon)<br>        <span class="hljs-keyword">try</span>:<br>                tt.cal_process()<br>        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>                error = <span class="hljs-built_in">str</span>(e)<br>                tt.errorts(<span class="hljs-string">&quot;测试消息：esc每日数据异常，请上线查看:&quot;</span> + error)<br>                logging.info(<span class="hljs-string">&quot;esc每日数据异常：&#123;&#125;&quot;</span>.<span class="hljs-built_in">format</span>(e))<br><br>        mysqlCon.close()<br></code></pre></td></tr></table></figure><h3 id="Aspose-Cells-Excel模板转换PDF-x2F-图片Linux中文乱码解决"><a href="#Aspose-Cells-Excel模板转换PDF-x2F-图片Linux中文乱码解决" class="headerlink" title="Aspose Cells Excel模板转换PDF&#x2F;图片Linux中文乱码解决"></a>Aspose Cells Excel模板转换PDF&#x2F;图片Linux中文乱码解决</h3><p> 第一步：把 C:\Windows\Fonts目录下字体拷贝到Linux( &#x2F;usr&#x2F;share&#x2F;fonts&#x2F;chinese)目录下，Linux目录可随意指定</p><p>第二步：在Aspose加载WorkBook时配置字体路径</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java">##Java <br><span class="hljs-type">IndividualFontConfigs</span> <span class="hljs-variable">configs</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IndividualFontConfigs</span>();<br>     configs.setFontFolder(<span class="hljs-string">&quot;/usr/share/fonts/chinese&quot;</span>, <span class="hljs-literal">true</span>);<br>     <span class="hljs-type">LoadOptions</span> <span class="hljs-variable">loadOptions</span>  <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">LoadOptions</span>();<br>     loadOptions.setFontConfigs(configs);<br> <span class="hljs-type">FileInputStream</span> <span class="hljs-variable">fi</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(<span class="hljs-string">&quot;D://MOBAN.xlsx&quot;</span>);<br> <span class="hljs-type">Workbook</span> <span class="hljs-variable">wb</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Workbook</span>(fi, loadOptions);<br><br>##<span class="hljs-type">Python</span><br><span class="hljs-variable">loadOptions</span> <span class="hljs-operator">=</span> LoadOptions()<br>             configs = IndividualFontConfigs()<br>             configs.setFontFolder(<span class="hljs-string">&quot;/data/fonts/chinese&quot;</span>, True)<br>             loadOptions.setFontConfigs(configs)<br>             workbook = Workbook(excel_file, loadOptions)<br><br></code></pre></td></tr></table></figure><h3 id="Aspose-Cells-读取不到Excel模板包含公式的数据"><a href="#Aspose-Cells-读取不到Excel模板包含公式的数据" class="headerlink" title="Aspose Cells 读取不到Excel模板包含公式的数据"></a>Aspose Cells 读取不到Excel模板包含公式的数据</h3><p>workbook.calculateFormula()</p><p>增加这一行代码即可</p><h3 id="Aspose-Cells-设置PDF或图片边框大小"><a href="#Aspose-Cells-设置PDF或图片边框大小" class="headerlink" title="Aspose Cells 设置PDF或图片边框大小"></a>Aspose Cells 设置PDF或图片边框大小</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs stylus">worksheet = workbook<span class="hljs-selector-class">.getWorksheets</span>()<span class="hljs-selector-class">.get</span>(<span class="hljs-number">0</span>)<br>worksheet<span class="hljs-selector-class">.getPageSetup</span>()<span class="hljs-selector-class">.setPrintArea</span>(excel_rg)<br>worksheet<span class="hljs-selector-class">.getPageSetup</span>()<span class="hljs-selector-class">.setLeftMargin</span>(<span class="hljs-number">0</span>)<br>worksheet<span class="hljs-selector-class">.getPageSetup</span>()<span class="hljs-selector-class">.setRightMargin</span>(<span class="hljs-number">0</span>)<br>worksheet<span class="hljs-selector-class">.getPageSetup</span>()<span class="hljs-selector-class">.setTopMargin</span>(<span class="hljs-number">1</span>)<br>worksheet<span class="hljs-selector-class">.getPageSetup</span>()<span class="hljs-selector-class">.setBottomMargin</span>(<span class="hljs-number">0</span>)<br></code></pre></td></tr></table></figure><h3 id="Aspose-Cells-读取指定excel位置的数据"><a href="#Aspose-Cells-读取指定excel位置的数据" class="headerlink" title="Aspose Cells 读取指定excel位置的数据"></a>Aspose Cells 读取指定excel位置的数据</h3><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs scss">worksheet<span class="hljs-selector-class">.getPageSetup</span>()<span class="hljs-selector-class">.setPrintArea</span>(excel_rg)<br></code></pre></td></tr></table></figure></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>计算机视觉-kalmanFilter</title>
    <link href="/posts/2022/10/9dcdd96b.html"/>
    <url>/posts/2022/10/9dcdd96b.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><h2 id="1-卡尔曼滤波入门"><a href="#1-卡尔曼滤波入门" class="headerlink" title="1.卡尔曼滤波入门"></a>1.卡尔曼滤波入门</h2><p><strong>卡尔曼滤波的引入：</strong></p><p>滤波就是将测量得到的波形中的的噪声过滤掉，使得到的数据更趋于真实情况，也更加平滑，方便使用。</p><p><strong>卡尔曼滤波适用的系统：</strong></p><p>卡尔曼滤波适用<strong>线性高斯系统</strong></p><p><strong>1.线性系统</strong>：满足<strong>叠加性</strong>和<strong>齐次性</strong></p><p>叠加性：</p><p>齐次性： </p><p><strong>2.高斯系统</strong></p><p>高斯：噪声满足正态分布</p><h2 id="2-卡尔曼滤波"><a href="#2-卡尔曼滤波" class="headerlink" title="2.卡尔曼滤波"></a>2.卡尔曼滤波</h2><h4 id="2-1-卡尔曼公式理解"><a href="#2-1-卡尔曼公式理解" class="headerlink" title="2.1.卡尔曼公式理解"></a>2.1.卡尔曼公式理解</h4><p><strong>实现过程：</strong>使用上一时刻的最优结果预测这一时刻的预测值，同时使用这一时刻观测值（传感器测得的数据）修正这一时刻预测值，得到这一时刻的最优结果</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221030224221.png"></p><p><strong>预测：</strong></p><p><strong>1.上一时刻的最优估计值，推出这一时刻的预测值：</strong></p><p>$x^-<em>t &#x3D; Fx</em>{t-1} + BU_{t-1}$ </p><p><strong>2.上一时刻最优估计值方差&#x2F;协方差和超参数Q推出这一时刻预测值方差&#x2F;协方差</strong></p><p>$P^-<em>t &#x3D; FP</em>{t-1}F^T + Q$</p><p>深入理解，Q其实对应的是过程噪声的方差</p><p><strong>更新：</strong></p><p><strong>1.这一时刻预测值方差&#x2F;协方差和超参数R推出卡尔曼增益</strong></p><p>$K_t &#x3D; P^-_tH^T{(HP^-_tH^T+R)}^{-1}$</p><p>$K_t$为卡尔曼增益</p><p>因为$P_t$是和Q有关的，所以将$P_t^-$的公式带入可以推出卡尔曼增益$K_t$是和Q和R都有关的</p><p>深入理解，R其实对应的是观测噪声的方差</p><p><strong>2.这一时刻预测值、这一时刻观测值、卡尔曼增益推出这一时刻最优估计值</strong></p><p>$x_t &#x3D; x^-_t + K_t(Z_t - Hx_t^-)$</p><p>$Z_t$为这一时刻观测值</p><p><strong>3.这一时刻预测值方差&#x2F;协方差、卡尔曼增益推出这一时刻最优估计值方差&#x2F;协方差</strong></p><p>$P_t &#x3D; (1-K_tH)P^-_t$</p><p><strong>预测更新循环往复，就能得到每一时刻的最优估计值</strong></p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221030225844.png"></p><h4 id="2-2-举例："><a href="#2-2-举例：" class="headerlink" title="2.2 举例："></a>2.2 <strong>举例：</strong></h4><p>小车有两个状态值，p代表位置，v代表速度。小车处于匀加速直线运动</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221030230131.png"></p><p><strong>预测模型：</strong></p><p><strong>1.上一时刻的最优估计值，推出这一时刻的预测值：</strong></p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221030230453.png"></p><p><strong>2.上一时刻最优估计值方差&#x2F;协方差和超参数Q推出这一时刻预测值方差&#x2F;协方差</strong></p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221030230531.png"></p><p><strong>推导：因为</strong></p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221030230558.png"></p><p>所以</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221030230617.png"></p><p>其实第一步中这一时刻预测值后面应该还有一个过程噪声Wt要加上（前面省略了），如下图所示，这里面Q是前面省略的过程噪声Wt的方差</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221030230713.png"></p><p><strong>测量模型：</strong></p><p>GPS测量只能测量小车的位置，不能测量小车的速度，所以</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221030230804.png"></p><p>Zp是小车此时的真实位置</p><p>Zv是小车此时的真实速度</p><p>Pt是测量得到的小车此时的位置</p><p>$\Delta$Pt是GPS测量位置的误差</p><p><strong>更新模型：</strong></p><p><strong>1.这一时刻预测值方差&#x2F;协方差和超参数R推出卡尔曼增益</strong>$K_t$</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221030230904.png"></p><p>前面测量模型中，因为无法测速度，测量相当于是一维的，一维时H看作为1</p><p><strong>2.这一时刻预测值、这一时刻观测值、卡尔曼增益推出这一时刻最优估计值</strong></p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221030230937.png"></p><p><strong>3.这一时刻预测值方差&#x2F;协方差、卡尔曼增益推出这一时刻最优估计值方差&#x2F;协方差</strong></p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221030230957.png"></p><p><strong>预测更新循环往复，就能得到每一时刻的最优估计值</strong></p><h4 id="2-3调节超参数"><a href="#2-3调节超参数" class="headerlink" title="2.3调节超参数"></a>2.3调节超参数</h4><p>Q和R的取值</p><p>当F&#x3D;1且一维的情况H&#x3D;1，可以得出：</p><p>当我们更信任观测值时，那么应该让卡尔曼增益K增大；从K的公式中可以看出，R越小K越大，Q越大K越大</p><p>当我们更信任模型估计值时，那么应该让卡尔曼增益K减小；从K的公式中可以看出，R越大K越小，Q越小K越小</p><p><strong>结论：</strong></p><p>当我们更信任模型估计值时（模型估计基本没有误差），那么应该让K小一点，我们应该将R取大一点，Q取小点</p><p>当我们更信任观测值时（模型估计误差较大），那么应该让K大一点，我们应该将R取小一点，Q取大一点</p><h2 id="3-卡尔曼滤波的代码解读"><a href="#3-卡尔曼滤波的代码解读" class="headerlink" title="3.卡尔曼滤波的代码解读"></a>3.卡尔曼滤波的代码解读</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">KalmanFilter</span>(<span class="hljs-title class_ inherited__">object</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, F = <span class="hljs-literal">None</span>, B = <span class="hljs-literal">None</span>, H = <span class="hljs-literal">None</span>, Q = <span class="hljs-literal">None</span>, R = <span class="hljs-literal">None</span>, P = <span class="hljs-literal">None</span>, x0 = <span class="hljs-literal">None</span></span>):<br>      <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">      卡尔曼滤波可以认为是中庸算法，将measurements和线性预测值进行综合考虑</span><br><span class="hljs-string">      怎么综合考虑呢？卡尔曼滤波算法要动态的调这个比例</span><br><span class="hljs-string">      &#x27;&#x27;&#x27;</span><br><span class="hljs-string">      设状态量有xn个</span><br><span class="hljs-string">      - X0为前一时刻状态量，shape=(xn,1)</span><br><span class="hljs-string">      - P0为初始状态不确定度， shape=(xn,xn)</span><br><span class="hljs-string">      - A为状态转移矩阵，shape=(xn,xn)</span><br><span class="hljs-string">      - Q为递推噪声协方差矩阵，shape=(xn,xn)</span><br><span class="hljs-string">      - B是外部输入部分</span><br><span class="hljs-string">      返回的结果为</span><br><span class="hljs-string">      &quot;&quot;&quot;</span><br>        <span class="hljs-keyword">if</span>(F <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span> <span class="hljs-keyword">or</span> H <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>):<br>            <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">&quot;Set proper system dynamics.&quot;</span>)<br><br>        <span class="hljs-variable language_">self</span>.n = F.shape[<span class="hljs-number">1</span>] <span class="hljs-comment"># self.n = 3</span><br>        <span class="hljs-variable language_">self</span>.m = H.shape[<span class="hljs-number">1</span>] <span class="hljs-comment"># self.m = 1</span><br><br>        <span class="hljs-variable language_">self</span>.F = F<br>        <span class="hljs-variable language_">self</span>.H = H<br>        <span class="hljs-variable language_">self</span>.B = <span class="hljs-number">0</span> <span class="hljs-keyword">if</span> B <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span> <span class="hljs-keyword">else</span> B<br>        <span class="hljs-variable language_">self</span>.Q = np.eye(<span class="hljs-variable language_">self</span>.n) <span class="hljs-keyword">if</span> Q <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span> <span class="hljs-keyword">else</span> Q<br>        <span class="hljs-variable language_">self</span>.R = np.eye(<span class="hljs-variable language_">self</span>.n) <span class="hljs-keyword">if</span> R <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span> <span class="hljs-keyword">else</span> R<br>        <span class="hljs-variable language_">self</span>.P = np.eye(<span class="hljs-variable language_">self</span>.n) <span class="hljs-keyword">if</span> P <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span> <span class="hljs-keyword">else</span> P<br>        <span class="hljs-variable language_">self</span>.x = np.zeros((<span class="hljs-variable language_">self</span>.n, <span class="hljs-number">1</span>)) <span class="hljs-keyword">if</span> x0 <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span> <span class="hljs-keyword">else</span> x0<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">predict</span>(<span class="hljs-params">self, u = <span class="hljs-number">0</span></span>):<br>        <span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">        使用上一时刻的最优结果预测这一时刻的预测值</span><br><span class="hljs-string">        &#x27;&#x27;&#x27;</span><br>        <span class="hljs-comment">#上一时刻的最优估计值，推出这一时刻的预测值：</span><br>        <span class="hljs-comment">#   状态方程x = F * x(t-1) + B*U(t-1)</span><br>        <span class="hljs-comment">#   F：状态转移矩阵，代表当前状态上一时刻的值乘上A这种关系，作用在该系统</span><br>        <span class="hljs-comment">#   x(t-1)：上一个时刻该状态的值；</span><br>        <span class="hljs-comment">#   B：控制矩阵，输入乘上B这种关系，作用在该系统</span><br>        <span class="hljs-comment">#   U:输入，即给到x_&#123;k&#125;的一个输入；</span><br>        <span class="hljs-variable language_">self</span>.x = np.dot(<span class="hljs-variable language_">self</span>.F, <span class="hljs-variable language_">self</span>.x) + np.dot(<span class="hljs-variable language_">self</span>.B, u)<br>        <br>        <span class="hljs-comment"># P就是协方差矩阵</span><br>        <span class="hljs-comment"># 深入理解，Q其实对应的是过程噪声的方差</span><br>        <span class="hljs-comment"># P = F * P(t-1) * F^T + Q</span><br>        <span class="hljs-variable language_">self</span>.P = np.dot(np.dot(<span class="hljs-variable language_">self</span>.F, <span class="hljs-variable language_">self</span>.P), <span class="hljs-variable language_">self</span>.F.T) + <span class="hljs-variable language_">self</span>.Q<br>        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">self</span>.x<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">update</span>(<span class="hljs-params">self, z</span>):<br>        <span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">        使用这一时刻观测值measurement（传感器测得的数据）修正这一时刻预测值，得到这一时刻的最优结果</span><br><span class="hljs-string">        &#x27;&#x27;&#x27;</span><br>        <span class="hljs-comment"># y = z - H * x 先验估计值</span><br>        y = z - np.dot(<span class="hljs-variable language_">self</span>.H, <span class="hljs-variable language_">self</span>.x)<br>        <span class="hljs-comment"># S = H * P * H^T + R</span><br>        S = <span class="hljs-variable language_">self</span>.R + np.dot(<span class="hljs-variable language_">self</span>.H, np.dot(<span class="hljs-variable language_">self</span>.P, <span class="hljs-variable language_">self</span>.H.T))<br>        <br>        <span class="hljs-comment"># 1.这一时刻预测值方差或者协方差和超参数R推出卡尔曼增益K_&#123;t&#125;</span><br>        <span class="hljs-comment"># K = P * H^T * S^(-1)</span><br>        K = np.dot(np.dot(<span class="hljs-variable language_">self</span>.P, <span class="hljs-variable language_">self</span>.H.T), np.linalg.inv(S))<br>        <br>        <span class="hljs-comment"># 2.这一时刻预测值、这一时刻观测值、卡尔曼增益推出这一时刻最优估计值</span><br>        <span class="hljs-comment"># x(t) = x + K(t) * y ：预测估计+卡尔曼增益*(观测值-先验估计值y)</span><br>        <span class="hljs-variable language_">self</span>.x = <span class="hljs-variable language_">self</span>.x + np.dot(K, y)<br>        <br>        <span class="hljs-comment"># 3.这一时刻预测值方差/协方差、卡尔曼增益推出这一时刻最优估计值方差/协方差</span><br>        <span class="hljs-comment"># P(t) = (I-K*H)*P * (I - K * H^T) + K * R * K^T</span><br>        I = np.eye(<span class="hljs-variable language_">self</span>.n)<br>        <span class="hljs-variable language_">self</span>.P = np.dot(np.dot(I - np.dot(K, <span class="hljs-variable language_">self</span>.H), <span class="hljs-variable language_">self</span>.P), <br>        (I - np.dot(K, <span class="hljs-variable language_">self</span>.H)).T) + np.dot(np.dot(K, <span class="hljs-variable language_">self</span>.R), K.T)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">example</span>():<br>dt = <span class="hljs-number">1.0</span>/<span class="hljs-number">60</span><br>  <span class="hljs-comment"># F为3 x 3 的矩阵</span><br>F = np.array([[<span class="hljs-number">1</span>, dt, <span class="hljs-number">0</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, dt], [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>]])<br>  <span class="hljs-comment"># H为1 x 3 的矩阵 [1,0,0]</span><br>H = np.array([<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>]).reshape(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>)<br>  <span class="hljs-comment"># Q为3 x 3 的矩阵</span><br>Q = np.array([[<span class="hljs-number">0.05</span>, <span class="hljs-number">0.05</span>, <span class="hljs-number">0.0</span>], [<span class="hljs-number">0.05</span>, <span class="hljs-number">0.05</span>, <span class="hljs-number">0.0</span>], [<span class="hljs-number">0.0</span>, <span class="hljs-number">0.0</span>, <span class="hljs-number">0.0</span>]])<br>  <span class="hljs-comment"># R为1 x 1 的矩阵</span><br>R = np.array([<span class="hljs-number">0.5</span>]).reshape(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>)<br>  <br>  <span class="hljs-comment"># 随机生成-10-10之间的100个随机数字</span><br>x = np.linspace(-<span class="hljs-number">10</span>, <span class="hljs-number">10</span>, <span class="hljs-number">100</span>)<br>  <span class="hljs-comment"># 观测的值</span><br>  <span class="hljs-comment"># -(x平方 + 2*x - 2) + 创建一个均值为0，方差为2的高斯噪声，共有100个samples</span><br>measurements = - (x**<span class="hljs-number">2</span> + <span class="hljs-number">2</span>*x - <span class="hljs-number">2</span>)  + np.random.normal(<span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">100</span>)<br><br>kf = KalmanFilter(F = F, H = H, Q = Q, R = R)<br>predictions = []<br><br><span class="hljs-keyword">for</span> z <span class="hljs-keyword">in</span> measurements:<br>predictions.append(np.dot(H,  kf.predict())[<span class="hljs-number">0</span>])<br>kf.update(z)<br><br><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br>plt.plot(<span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(measurements)), measurements, label = <span class="hljs-string">&#x27;Measurements&#x27;</span>)<br>plt.plot(<span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(predictions)), np.array(predictions), label = <span class="hljs-string">&#x27;Kalman Filter Prediction&#x27;</span>)<br>plt.legend()<br>plt.show()<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    example()<br><br></code></pre></td></tr></table></figure><p>Reference:</p><p><a href="https://www.bilibili.com/video/BV1Rh41117MT?p=4&vd_source=8d15835c175037a4297a46dc4a23d4f9">卡尔曼滤波从理论到实践~</a></p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    
    <tags>
      
      <tag>CV</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Spring Cloud狂神说</title>
    <link href="/posts/2022/10/6009bd1b.html"/>
    <url>/posts/2022/10/6009bd1b.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><h2 id="🥦-1-学习前言"><a href="#🥦-1-学习前言" class="headerlink" title="🥦 1.学习前言"></a>🥦 1.学习前言</h2><h3 id="🍑-1-1-学习前提"><a href="#🍑-1-1-学习前提" class="headerlink" title="🍑 1.1 学习前提"></a>🍑 <strong>1.1 学习前提</strong></h3><ul><li>熟练使用SpringBoot 微服务快速开发框架</li><li>了解过Dubbo + Zookeeper 分布式基础</li></ul><h3 id="🍑-1-2-文章大纲"><a href="#🍑-1-2-文章大纲" class="headerlink" title="🍑 1.2 文章大纲"></a>🍑 <strong>1.2 文章大纲</strong></h3><p>|  Spring Cloud 五大组件</p><ul><li>服务注册与发现——<strong>Netflix Eureka</strong></li><li>负载均衡：</li></ul><p>​       客户端负载均衡——<strong>Netflix Ribbon</strong></p><p>​        服务端负载均衡：——<strong>Feign</strong>(其也是依赖于Ribbon，只是将调用方式RestTemplete 更改成Service 接口)</p><ul><li>断路器——<strong>Netflix Hystrix</strong></li><li>服务网关——<strong>Netflix Zuul</strong></li><li>分布式配置——<strong>Spring Cloud Config</strong></li></ul><h3 id="🍑-1-3常见面试题"><a href="#🍑-1-3常见面试题" class="headerlink" title="🍑 1.3常见面试题"></a>🍑 <strong>1.3常见面试题</strong></h3><p>1.1 什么是微服务？</p><p>1.2 微服务之间是如何独立通讯的？</p><p>1.3 SpringCloud 和 Dubbo有那些区别？</p><p>1.4 SpringBoot 和 SpringCloud，请谈谈你对他们的理解</p><p>1.5 什么是服务熔断？什么是服务降级？</p><p>1.6 微服务的优缺点分别是什么？说下你在项目开发中遇到的坑</p><p>1.7 你所知道的微服务技术栈有哪些？列举一二</p><p>1.8 Eureka和Zookeeper都可以提供服务注册与发现的功能，请说说两者的区别</p><p>…..</p><h2 id="🥦-2-微服务概述"><a href="#🥦-2-微服务概述" class="headerlink" title="🥦 2.微服务概述"></a>🥦 2.微服务概述</h2><h3 id="🍑-2-1-什么是微服务？"><a href="#🍑-2-1-什么是微服务？" class="headerlink" title="🍑 2.1 什么是微服务？"></a>🍑 <strong>2.1 什么是微服务？</strong></h3><h3 id="🍑-2-2-微服务与微服务架构"><a href="#🍑-2-2-微服务与微服务架构" class="headerlink" title="🍑 2.2 微服务与微服务架构"></a>🍑 <strong>2.2 微服务与微服务架构</strong></h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">微服务<br></code></pre></td></tr></table></figure><p>强调的是服务的大小，它关注的是某一个点，是具体解决某一个问题&#x2F;提供落地对应服务的一个服务应用，狭义的看，可以看作是IDEA中的一个个微服务工程，或者Moudel。IDEA 工具里面使用Maven开发的一个个独立的小Moudel，它具体是使用SpringBoot开发的一个小模块，专业的事情交给专业的模块来做，一个模块就做着一件事情。强调的是一个个的个体，每个个体完成一个具体的任务或者功能。</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">微服务架构<br></code></pre></td></tr></table></figure><p>一种新的架构形式，Martin Fowler 于2014年提出。</p><p>微服务架构是一种架构模式，它体长将单一应用程序划分成一组小的服务，服务之间相互协调，互相配合，为用户提供最终价值。每个服务运行在其独立的进程中，服务与服务之间采用轻量级的通信机制**(如HTTP)<strong>互相协作，每个服务都围绕着具体的业务进行构建，并且能够被独立的部署到生产环境中，另外，应尽量避免统一的，集中式的服务管理机制，对具体的一个服务而言，应根据业务上下文，选择合适的语言、工具</strong>(如Maven)**对其进行构建。</p><h3 id="🍑-2-3-微服务优缺点"><a href="#🍑-2-3-微服务优缺点" class="headerlink" title="🍑 2.3 微服务优缺点"></a>🍑 <strong>2.3 微服务优缺点</strong></h3><p><code>优点</code></p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs abnf">单一职责原则；<br>每个服务足够内聚，足够小，代码容易理解，这样能聚焦一个指定的业务功能或业务需求；<br>开发简单，开发效率高，一个服务可能就是专一的只干一件事；<br>微服务能够被小团队单独开发，这个团队只需<span class="hljs-number">2</span>-<span class="hljs-number">5</span>个开发人员组成；<br>微服务是松耦合的，是有功能意义的服务，无论是在开发阶段或部署阶段都是独立的；<br>微服务能使用不同的语言开发；<br>易于和第三方集成，微服务允许容易且灵活的方式集成自动部署，通过持续集成工具，如jenkins，Hudson，bamboo；<br>微服务易于被一个开发人员理解，修改和维护，这样小团队能够更关注自己的工作成果，无需通过合作才能体现价值；<br>微服务允许利用和融合最新技术；<br>微服务只是业务逻辑的代码，不会和HTML，CSS，或其他的界面混合<span class="hljs-comment">;</span><br>每个微服务都有自己的存储能力，可以有自己的数据库，也可以有统一的数据库；<br></code></pre></td></tr></table></figure><p><code>缺点</code></p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc"><span class="hljs-bullet">- </span>开发人员要处理分布式系统的复杂性；<br><span class="hljs-bullet">- </span>多服务运维难度，随着服务的增加，运维的压力也在增大；<br><span class="hljs-bullet">- </span>系统部署依赖问题；<br><span class="hljs-bullet">- </span>服务间通信成本问题；<br><span class="hljs-bullet">- </span>数据一致性问题；<br><span class="hljs-bullet">- </span>系统集成测试问题；<br><span class="hljs-bullet">- </span>性能和监控问题；<br></code></pre></td></tr></table></figure><h3 id="🍑-2-4-微服务技术栈有那些？"><a href="#🍑-2-4-微服务技术栈有那些？" class="headerlink" title="🍑 2.4 微服务技术栈有那些？"></a>🍑 <strong>2.4 微服务技术栈有那些？</strong></h3><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">|<span class="hljs-string"> **微服务技术条目**          </span>|<span class="hljs-string"> 落地技术                                             </span>|<br>|<span class="hljs-string"> -------------------- </span>|<span class="hljs-string"> ------------------------------------------------ </span>|<br>|<span class="hljs-string"> 服务开发                 </span>|<span class="hljs-string"> SpringBoot、Spring、SpringMVC等                     </span>|<br>|<span class="hljs-string"> 服务配置与管理              </span>|<span class="hljs-string"> Netfix公司的Archaius、阿里的Diamond等                    </span>|<br>|<span class="hljs-string"> 服务注册与发现              </span>|<span class="hljs-string"> Eureka、Consul、Zookeeper等                         </span>|<br>|<span class="hljs-string"> 服务调用                 </span>|<span class="hljs-string"> Rest、PRC、gRPC                                    </span>|<br>|<span class="hljs-string"> 服务熔断器                </span>|<span class="hljs-string"> Hystrix、Envoy等                                   </span>|<br>|<span class="hljs-string"> 负载均衡                 </span>|<span class="hljs-string"> Ribbon、Nginx等                                    </span>|<br>|<span class="hljs-string"> 服务接口调用(客户端调用服务的简化工具) </span>|<span class="hljs-string"> Fegin等                                           </span>|<br>|<span class="hljs-string"> 消息队列                 </span>|<span class="hljs-string"> Kafka、RabbitMQ、ActiveMQ等                         </span>|<br>|<span class="hljs-string"> 服务配置中心管理             </span>|<span class="hljs-string"> SpringCloudConfig、Chef等                          </span>|<br>|<span class="hljs-string"> 服务路由(API网关)          </span>|<span class="hljs-string"> Zuul等                                            </span>|<br>|<span class="hljs-string"> 服务监控                 </span>|<span class="hljs-string"> Zabbix、Nagios、Metrics、Specatator等                </span>|<br>|<span class="hljs-string"> 全链路追踪                </span>|<span class="hljs-string"> Zipkin、Brave、Dapper等                             </span>|<br>|<span class="hljs-string"> 数据流操作开发包             </span>|<span class="hljs-string"> SpringCloud Stream(封装与Redis，Rabbit，Kafka等发送接收消息) </span>|<br>|<span class="hljs-string"> 时间消息总栈               </span>|<span class="hljs-string"> SpringCloud Bus                                  </span>|<br>|<span class="hljs-string"> 服务部署                 </span>|<span class="hljs-string"> Docker、OpenStack、Kubernetes等                     </span>|<br></code></pre></td></tr></table></figure><h3 id="🍑-2-5-为什么选择SpringCloud作为微服务架构？"><a href="#🍑-2-5-为什么选择SpringCloud作为微服务架构？" class="headerlink" title="🍑 2.5 为什么选择SpringCloud作为微服务架构？"></a>🍑 <strong>2.5 为什么选择SpringCloud作为微服务架构？</strong></h3><ol><li>选型依据<ul><li>整体解决方案和框架成熟度</li><li>社区热度</li><li>可维护性</li><li>学习曲线</li></ul></li><li>当前各大IT公司用的微服务架构有那些？<ul><li>阿里：dubbo+HFS</li><li>京东：JFS</li><li>新浪：Motan</li><li>当当网：DubboX</li></ul></li><li>各微服务框架对比</li></ol><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">|<span class="hljs-string"> **功能点/服务框架** </span>|<span class="hljs-string"> Netflix/SpringCloud </span>|<span class="hljs-string"> Motan </span>|<span class="hljs-string"> gRPC </span>|<span class="hljs-string"> Thri t </span>|<span class="hljs-string"> Dubbo/DubboX </span>|<br>|<span class="hljs-string">—————————————————- </span>|<span class="hljs-string"> ————————— </span>|<span class="hljs-string"> ———— </span>|<span class="hljs-string"> —————————— </span>|<br>|<span class="hljs-string"> 功能定位 </span>|<span class="hljs-string"> 完整的微服务框架 </span>|<span class="hljs-string"> RPC框架，但整合了ZK或Consul，实现集群环境的基本服务注册发现 </span>|<span class="hljs-string"> RPC框架 </span>|<span class="hljs-string"> RPC框架 </span>|<span class="hljs-string"> 服务框架 </span>|<br>|<span class="hljs-string"> 支持Rest </span>|<span class="hljs-string"> 是，Ribbon支持多种可拔插的序列号选择 </span>|<span class="hljs-string"> 否 </span>|<span class="hljs-string"> 否 </span>|<span class="hljs-string"> 否 </span>|<span class="hljs-string"> 否 </span>|<br>|<span class="hljs-string"> 支持RPC </span>|<span class="hljs-string"> 否 </span>|<span class="hljs-string"> 是(Hession2) </span>|<span class="hljs-string"> 是 </span>|<span class="hljs-string"> 是 </span>|<span class="hljs-string"> 是 </span>|<br>|<span class="hljs-string"> 支持多语言 </span>|<span class="hljs-string"> 是(Rest形式) </span>|<span class="hljs-string"> 否 </span>|<span class="hljs-string"> 是 </span>|<span class="hljs-string"> 是 </span>|<span class="hljs-string"> 否 </span>|<br>|<span class="hljs-string"> 负载均衡 </span>|<span class="hljs-string"> 是(服务端zuul+客户端Ribbon)，zuul-服务，动态路由，云端负载均衡Eureka（针对中间层服务器） </span>|<span class="hljs-string"> 是(客户端) </span>|<span class="hljs-string"> 否 </span>|<span class="hljs-string"> 否 </span>|<span class="hljs-string"> 是(客户端) </span>|<br>|<span class="hljs-string"> 配置服务 </span>|<span class="hljs-string"> Netfix Archaius，Spring Cloud Config Server 集中配置 </span>|<span class="hljs-string"> 是(Zookeeper提供) </span>|<span class="hljs-string"> 否 </span>|<span class="hljs-string"> 否 </span>|<span class="hljs-string"> 否 </span>|<br>|<span class="hljs-string"> 服务调用链监控 </span>|<span class="hljs-string"> 是(zuul)，zuul提供边缘服务，API网关 </span>|<span class="hljs-string"> 否 </span>|<span class="hljs-string"> 否 </span>|<span class="hljs-string"> 否 </span>|<span class="hljs-string"> 否 </span>|<br>|<span class="hljs-string"> 高可用/容错 </span>|<span class="hljs-string"> 是(服务端Hystrix+客户端Ribbon) </span>|<span class="hljs-string"> 是(客户端) </span>|<span class="hljs-string"> 否 </span>|<span class="hljs-string"> 否 </span>|<span class="hljs-string"> 是(客户端) </span>|<br>|<span class="hljs-string"> 典型应用案例 </span>|<span class="hljs-string"> Netflix </span>|<span class="hljs-string"> Sina </span>|<span class="hljs-string"> Google </span>|<span class="hljs-string"> Facebook </span>|<span class="hljs-string"> </span>|<br>|<span class="hljs-string"> 社区活跃程度 </span>|<span class="hljs-string"> 高 </span>|<span class="hljs-string"> 一般 </span>|<span class="hljs-string"> 高 </span>|<span class="hljs-string"> 一般 </span>|<span class="hljs-string"> 2017年后重新开始维护，之前中断了5年 </span>|<br>|<span class="hljs-string"> 学习难度 </span>|<span class="hljs-string"> 中等 </span>|<span class="hljs-string"> 低 </span>|<span class="hljs-string"> 高 </span>|<span class="hljs-string"> 高 </span>|<span class="hljs-string"> 低 </span>|<br>|<span class="hljs-string"> 文档丰富程度 </span>|<span class="hljs-string"> 高 </span>|<span class="hljs-string"> 一般 </span>|<span class="hljs-string"> 一般 </span>|<span class="hljs-string"> 一般 </span>|<span class="hljs-string"> 高 </span>|<br>|<span class="hljs-string"> 其他 </span>|<span class="hljs-string"> Spring Cloud Bus为我们的应用程序带来了更多管理端点 </span>|<span class="hljs-string"> 支持降级 </span>|<span class="hljs-string"> Netflix内部在开发集成gRPC </span>|<span class="hljs-string"> IDL定义 </span>|<span class="hljs-string"> 实践的公司比较多 </span>|<br></code></pre></td></tr></table></figure><h2 id="🥦-3-SpringCloud入门概述"><a href="#🥦-3-SpringCloud入门概述" class="headerlink" title="🥦 3.SpringCloud入门概述"></a>🥦 3.SpringCloud入门概述</h2><h3 id="🍑-3-1-SpringCloud是什么？"><a href="#🍑-3-1-SpringCloud是什么？" class="headerlink" title="🍑 3.1 SpringCloud是什么？"></a>🍑 <strong>3.1 SpringCloud是什么？</strong></h3><p>Spring官网：<a href="https://spring.io/">https://spring.io/</a></p><h3 id="🍑-3-2-SpringCloud和SpringBoot的关系"><a href="#🍑-3-2-SpringCloud和SpringBoot的关系" class="headerlink" title="🍑 3.2 SpringCloud和SpringBoot的关系"></a>🍑 <strong>3.2 SpringCloud和SpringBoot的关系</strong></h3><ul><li>SpringBoot专注于开苏方便的开发单个个体微服务；</li><li>SpringCloud是关注全局的微服务协调整理治理框架，它将SpringBoot开发的一个个单体微服务，整合并管理起来，为各个微服务之间提供：配置管理、服务发现、断路器、路由、为代理、事件总栈、全局锁、决策竞选、分布式会话等等集成服务；</li><li>SpringBoot可以离开SpringCloud独立使用，开发项目，但SpringCloud离不开SpringBoot，属于依赖关系；</li><li>SpringBoot专注于快速、方便的开发单个个体微服务，SpringCloud关注全局的服务治理框架；</li></ul><h3 id="🍑-3-3-Dubbo-和-SpringCloud技术选型"><a href="#🍑-3-3-Dubbo-和-SpringCloud技术选型" class="headerlink" title="🍑 3.3 Dubbo 和 SpringCloud技术选型"></a>🍑 <strong>3.3 Dubbo 和 SpringCloud技术选型</strong></h3><p>   🍓分布式+服务治理Dubb</p><p>   目前成熟的互联网架构，应用服务化拆分 + 消息中间件</p><p>   🍓Dubbo 和 SpringCloud对比</p><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">        |<span class="hljs-string"> Dubbo         </span>|<span class="hljs-string"> SpringCloud                  </span>|<br>|<span class="hljs-string"> ------ </span>|<span class="hljs-string"> ------------- </span>|<span class="hljs-string"> ---------------------------- </span>|<br>|<span class="hljs-string"> 服务注册中心 </span>|<span class="hljs-string"> Zookeeper     </span>|<span class="hljs-string"> Spring Cloud Netfilx Eureka  </span>|<br>|<span class="hljs-string"> 服务调用方式 </span>|<span class="hljs-string"> RPC           </span>|<span class="hljs-string"> REST API                     </span>|<br>|<span class="hljs-string"> 服务监控   </span>|<span class="hljs-string"> Dubbo-monitor </span>|<span class="hljs-string"> Spring Boot Admin            </span>|<br>|<span class="hljs-string"> 断路器    </span>|<span class="hljs-string"> 不完善           </span>|<span class="hljs-string"> Spring Cloud Netfilx Hystrix </span>|<br>|<span class="hljs-string"> 服务网关   </span>|<span class="hljs-string"> 无             </span>|<span class="hljs-string"> Spring Cloud Netfilx Zuul    </span>|<br>|<span class="hljs-string"> 分布式配置  </span>|<span class="hljs-string"> 无             </span>|<span class="hljs-string"> Spring Cloud Config          </span>|<br>|<span class="hljs-string"> 服务跟踪   </span>|<span class="hljs-string"> 无             </span>|<span class="hljs-string"> Spring Cloud Sleuth          </span>|<br>|<span class="hljs-string"> 消息总栈   </span>|<span class="hljs-string"> 无             </span>|<span class="hljs-string"> Spring Cloud Bus             </span>|<br>|<span class="hljs-string"> 数据流    </span>|<span class="hljs-string"> 无             </span>|<span class="hljs-string"> Spring Cloud Stream          </span>|<br>|<span class="hljs-string"> 批量任务   </span>|<span class="hljs-string"> 无             </span>|<span class="hljs-string"> Spring Cloud Task            </span>|<br><br></code></pre></td></tr></table></figure><p><strong>最大区别：Spring Cloud 抛弃了Dubbo的RPC通信，采用的是基于HTTP的REST方式</strong></p><p>严格来说，这两种方式各有优劣。虽然从一定程度上来说，后者牺牲了服务调用的性能，但也避免了上面提到的原生RPC带来的问题。而且REST相比RPC更为灵活，服务提供方和调用方的依赖只依靠一纸契约，不存在代码级别的强依赖，这个优点在当下强调快速演化的微服务环境下，显得更加合适。</p><p><strong>总结：</strong>二者解决的问题域不一样：Dubbo的定位是一款RPC框架，而SpringCloud的目标是微服务架构下的一站式解决方案。</p><h3 id="🍑-3-4-SpringCloud能干嘛？"><a href="#🍑-3-4-SpringCloud能干嘛？" class="headerlink" title="🍑 3.4 SpringCloud能干嘛？"></a>🍑 <strong>3.4 SpringCloud能干嘛？</strong></h3><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">Distributed/versioned <span class="hljs-keyword">configuration</span> 分布式/版本控制配置<br>Service registration <span class="hljs-keyword">and</span> discovery 服务注册与发现<br>Routing 路由<br>Service-<span class="hljs-keyword">to</span>-service calls 服务到服务的调用<br><span class="hljs-keyword">Load</span> balancing 负载均衡配置<br>Circuit Breakers 断路器<br>Distributed messaging 分布式消息管理<br>…<br></code></pre></td></tr></table></figure><h3 id="🍑-3-5-SpringCloud下载"><a href="#🍑-3-5-SpringCloud下载" class="headerlink" title="🍑 3.5 SpringCloud下载"></a>🍑 <strong>3.5 SpringCloud下载</strong></h3><p>官网：<a href="http://projects.spring.io/spring-cloud/">http://projects.spring.io/spring-cloud/</a></p><p>版本号有点特别：</p><p>SpringCloud没有采用数字编号的方式命名版本号，而是采用了伦敦地铁站的名称，<strong>同时根据字母表的顺序来对应版本时间顺序</strong>，比如最早的Realse版本：Angel，第二个Realse版本：Brixton，然后是Camden、Dalston、Edgware，目前最新的是Hoxton SR4 CURRENT GA通用稳定版。</p><p><strong>自学参考书：</strong></p><ul><li><p>SpringCloud Netflix 中文文档：<a href="https://springcloud.cc/spring-cloud-netflix.html">https://springcloud.cc/spring-cloud-netflix.html</a></p></li><li><p>SpringCloud 中文API文档(官方文档翻译版)：<a href="https://springcloud.cc/spring-cloud-dalston.html">https://springcloud.cc/spring-cloud-dalston.html</a></p></li><li><p>SpringCloud中国社区：<a href="http://springcloud.cn/">http://springcloud.cn/</a></p></li><li><p>SpringCloud中文网：<a href="https://springcloud.cc/">https://springcloud.cc</a></p></li></ul><h2 id="🥦-4-SpringCloud-Rest学习环境搭建：服务提供者"><a href="#🥦-4-SpringCloud-Rest学习环境搭建：服务提供者" class="headerlink" title="🥦 4.SpringCloud Rest学习环境搭建：服务提供者"></a>🥦 4.SpringCloud Rest学习环境搭建：服务提供者</h2><h3 id="🍑-4-1-介绍"><a href="#🍑-4-1-介绍" class="headerlink" title="🍑 4.1 介绍"></a>🍑 <strong>4.1 介绍</strong></h3><ul><li>我们会使用一个Dept部门模块做一个微服务通用案例<strong>Consumer</strong>消费者(<strong>Client</strong>)通过REST调用<strong>Provider</strong>提供者(<strong>Server</strong>)提供的服务。</li><li>回顾Spring，SpringMVC，Mybatis等以往学习的知识。</li><li>Maven的分包分模块架构复习。</li></ul><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs gradle">一个父工程带着多个Moudule子模块<br><br>MicroServiceCloud父工程(<span class="hljs-keyword">Project</span>)下初次带着<span class="hljs-number">3</span>个子模块(Module)<br><br>microservicecloud-api 【封装的整体entity<span class="hljs-regexp">/接口/</span>公共配置等】<br>microservicecloud-consumer-dept-<span class="hljs-number">80</span> 【服务提供者】<br>microservicecloud-provider-dept-<span class="hljs-number">8001</span> 【服务消费者】<br></code></pre></td></tr></table></figure><h3 id="🍑-4-2-SpringCloud版本选择"><a href="#🍑-4-2-SpringCloud版本选择" class="headerlink" title="🍑 4.2 SpringCloud版本选择"></a>🍑 <strong>4.2 SpringCloud版本选择</strong></h3><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">大版本说明<br>|<span class="hljs-string"> SpringBoot </span>|<span class="hljs-string"> SpringCloud       </span>|<span class="hljs-string"> 关系                                 </span>|<br>|<span class="hljs-string"> ---------- </span>|<span class="hljs-string"> ----------------- </span>|<span class="hljs-string"> ---------------------------------- </span>|<br>|<span class="hljs-string"> 1.2.x      </span>|<span class="hljs-string"> Angel版本(天使)       </span>|<span class="hljs-string"> 兼容SpringBoot1.2x                   </span>|<br>|<span class="hljs-string"> 1.3.x      </span>|<span class="hljs-string"> Brixton版本(布里克斯顿)  </span>|<span class="hljs-string"> 兼容SpringBoot1.3x，也兼容SpringBoot1.4x </span>|<br>|<span class="hljs-string"> 1.4.x      </span>|<span class="hljs-string"> Camden版本(卡姆登)     </span>|<span class="hljs-string"> 兼容SpringBoot1.4x，也兼容SpringBoot1.5x </span>|<br>|<span class="hljs-string"> 1.5.x      </span>|<span class="hljs-string"> Dalston版本(多尔斯顿)   </span>|<span class="hljs-string"> 兼容SpringBoot1.5x，不兼容SpringBoot2.0x </span>|<br>|<span class="hljs-string"> 1.5.x      </span>|<span class="hljs-string"> Edgware版本(埃奇韦尔)   </span>|<span class="hljs-string"> 兼容SpringBoot1.5x，不兼容SpringBoot2.0x </span>|<br>|<span class="hljs-string"> 2.0.x      </span>|<span class="hljs-string"> Finchley版本(芬奇利)   </span>|<span class="hljs-string"> 兼容SpringBoot2.0x，不兼容SpringBoot1.5x </span>|<br>|<span class="hljs-string"> 2.1.x      </span>|<span class="hljs-string"> Greenwich版本(格林威治) </span>|<span class="hljs-string">   </span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string">实际开发版本关系</span><br><span class="hljs-string"></span><br><span class="hljs-string"></span>|<span class="hljs-string"> spring-boot-starter-parent </span>|<span class="hljs-string">          </span>|<span class="hljs-string"> spring-cloud-dependencles </span>|<span class="hljs-string">          </span>|<br>|<span class="hljs-string"> -------------------------- </span>|<span class="hljs-string"> -------- </span>|<span class="hljs-string"> ------------------------- </span>|<span class="hljs-string"> -------- </span>|<br>|<span class="hljs-string">          **版本号**         </span>|<span class="hljs-string"> 发布日期  </span>|<span class="hljs-string">          **版本号**        </span>|<span class="hljs-string">   发布日期 </span>|<br>|<span class="hljs-string">       1.5.2.RELEASE        </span>|<span class="hljs-string">  2017-03 </span>|<span class="hljs-string">        Dalston.RC1        </span>|<span class="hljs-string">  2017-x  </span>|<br>|<span class="hljs-string">       1.5.9.RELEASE        </span>|<span class="hljs-string">  2017-11 </span>|<span class="hljs-string">      Edgware.RELEASE      </span>|<span class="hljs-string"> 2017-11  </span>|<br>|<span class="hljs-string">       1.5.16.RELEASE       </span>|<span class="hljs-string">  2018-04 </span>|<span class="hljs-string">        Edgware.SR5        </span>|<span class="hljs-string"> 2018-10  </span>|<br>|<span class="hljs-string">       1.5.20.RELEASE       </span>|<span class="hljs-string">  2018-09 </span>|<span class="hljs-string">        Edgware.SR5        </span>|<span class="hljs-string"> 2018-10  </span>|<br>|<span class="hljs-string">       2.0.2.RELEASE        </span>|<span class="hljs-string">  2018-05 </span>|<span class="hljs-string">  Fomchiey.BULD-SNAPSHOT   </span>|<span class="hljs-string">  2018-x  </span>|<br>|<span class="hljs-string">       2.0.6.RELEASE        </span>|<span class="hljs-string">  2018-10 </span>|<span class="hljs-string">       Fomchiey-SR2        </span>|<span class="hljs-string"> 2018-10  </span>|<br>|<span class="hljs-string">       2.1.4.RELEASE        </span>|<span class="hljs-string">  2019-04 </span>|<span class="hljs-string">       Greenwich.SR1       </span>|<span class="hljs-string"> 2019-03  </span>|<br></code></pre></td></tr></table></figure><p>可以根据使用人数来选择版本，一般使用Green多一点</p><h3 id="🍑-4-3-创建父工程"><a href="#🍑-4-3-创建父工程" class="headerlink" title="🍑 4.3 创建父工程"></a>🍑 <strong>4.3 创建父工程</strong></h3><p>～新建一个maven项目</p><p>～编辑pom.xml文件<strong>Packageing是pom模式</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.haust<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>springcloud<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">modules</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>springcloud-api<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>springcloud-provider-dept-8001<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>springcloud-consumer-dept-80<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>springcloud-eureka-7001<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>springcloud-eureka-7002<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>springcloud-eureka-7003<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>springcloud-provider-dept-8002<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>springcloud-provider-dept-8003<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>springcloud-consumer-dept-feign<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>springcloud-provider-dept-hystrix-8001<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>springcloud-consumer-hystrix-dashboard<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>springcloud-zuul-9527<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>springcloud-config-server-3344<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>springcloud-config-client-3355<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>springcloud-config-eureka-7001<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>springcloud-config-dept-8001<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">modules</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--打包方式  pom--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">packaging</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">packaging</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="hljs-tag">&lt;/<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.source</span>&gt;</span>1.8<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.source</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.target</span>&gt;</span>1.8<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.target</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">junit.version</span>&gt;</span>4.12<span class="hljs-tag">&lt;/<span class="hljs-name">junit.version</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">log4j.version</span>&gt;</span>1.2.17<span class="hljs-tag">&lt;/<span class="hljs-name">log4j.version</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">lombok.version</span>&gt;</span>1.16.18<span class="hljs-tag">&lt;/<span class="hljs-name">lombok.version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependencyManagement</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-alibaba-dependencies<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.2.0.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">type</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-comment">&lt;!--springCloud的依赖--&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-dependencies<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>Greenwich.SR1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">type</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-comment">&lt;!--SpringBoot--&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-dependencies<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.1.4.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">type</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-comment">&lt;!--数据库--&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.1.47<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>druid<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.1.10<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-comment">&lt;!--SpringBoot 启动器--&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.3.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-comment">&lt;!--日志测试~--&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>ch.qos.logback<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>logback-core<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.2.3<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$&#123;junit.version&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>log4j<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>log4j<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$&#123;log4j.version&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.projectlombok<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>lombok<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$&#123;lombok.version&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencyManagement</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="🍑-4-4-创建子模块"><a href="#🍑-4-4-创建子模块" class="headerlink" title="🍑 4.4 创建子模块"></a>🍑 <strong>4.4 创建子模块</strong></h3><h3 id="🍑-4-5-踩坑记录"><a href="#🍑-4-5-踩坑记录" class="headerlink" title="🍑 4.5 踩坑记录"></a>🍑 <strong>4.5 踩坑记录</strong></h3><ul><li><p>在springboot运行主类中的代码</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.yuting.springcloud;<br><br><span class="hljs-keyword">import</span> org.springframework.boot.SpringApplication;<br><span class="hljs-keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> yuting</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@version</span> 1.0</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@date</span> 2022/10/18 1:54 AM</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DeptProvider</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span>&#123;<br>        <br>        SpringApplication.run(DeptProvider.class,args);<br>      # ❌ SpringBootApplication.run(DeptProvider.class,args); 这里的run直接飘红<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221018231142.png"></p></li></ul><p><a href="https://blog.csdn.net/GTWZeus/article/details/116305390?spm=1001.2101.3001.6650.4&utm_medium=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~Rate-4-116305390-blog-82683368.pc_relevant_default&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~Rate-4-116305390-blog-82683368.pc_relevant_default&utm_relevant_index=5">CSDN上同样的错误</a></p><ul><li>在使用springboot连接数据库启动项目出现错误：Failed to configure a DataSource: ‘url’ attribute is not specified and no embedded datasource could</li></ul><p>完整错误信息：</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">***************************<br>APPLICATION FAILED TO START<br>***************************<br> <br>Description:<br> <br>Failed <span class="hljs-built_in">to</span> configure <span class="hljs-keyword">a</span> DataSource: <span class="hljs-string">&#x27;url&#x27;</span> attribute is <span class="hljs-keyword">not</span> specified <span class="hljs-keyword">and</span> no embedded datasource could be configured.<br> <br>Reason: Failed <span class="hljs-built_in">to</span> determine <span class="hljs-keyword">a</span> suitable driver class<br> <br> <br>Action:<br> <br>Consider <span class="hljs-keyword">the</span> following:<br>    If you want <span class="hljs-keyword">an</span> embedded database (H2, HSQL <span class="hljs-keyword">or</span> Derby), please <span class="hljs-built_in">put</span> <span class="hljs-keyword">it</span> <span class="hljs-keyword">on</span> <span class="hljs-title">the</span> <span class="hljs-title">classpath</span>.<br>    If you have database settings <span class="hljs-built_in">to</span> be loaded <span class="hljs-built_in">from</span> <span class="hljs-keyword">a</span> particular profile you may need <span class="hljs-built_in">to</span> activate <span class="hljs-keyword">it</span> (no profiles are currently active).<br></code></pre></td></tr></table></figure><p>查询一圈发现是springboot没有识别到配置的application.yml文件，类似识别不到yml文件的情况可以用以下方法解决。</p><p>在父类工程中的pom文件中加入以下内容，解决了maven打包有时只识别java代码，而不会打包配置文件的问题</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">fork</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">fork</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">addResources</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">addResources</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--将mapper文件打包进去--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">resources</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">resource</span>&gt;</span><br>            <span class="hljs-comment">&lt;!--指定根目录 到源文件夹 一般如下--&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>src/main/java<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">includes</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.yml<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.yaml<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.xml<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.properties<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">includes</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">filtering</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">filtering</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">resource</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">resource</span>&gt;</span> <span class="hljs-comment">&lt;!--指定根目录 到源文件夹 一般如下--&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>src/main/resources<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">includes</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.yml<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.yaml<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.xml<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.properties<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">includes</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">filtering</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">filtering</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">resource</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">resources</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li>Invalid bound statement (not found): com.yuting.springcloud.dao.DeptDao.queryById</li></ul><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221018232135.png"></p><p>最坑的是这个问题，尝试遍了网上的各种解决办法</p><p>1.检查xml文件的namespace是不是指向了Dao类(这两个东西可以不用放在一个包下)</p><p><code>&lt;mapper namespace=&quot;com.yuting.springcloud.dao.DeptDao&quot;&gt;</code></p><p>2.检查DeptDao.xml文件的id在DeptDao是否有对应的方法</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs csharp"> &lt;<span class="hljs-keyword">select</span> id=<span class="hljs-string">&quot;queryById&quot;</span> resultType=<span class="hljs-string">&quot;Dept&quot;</span> parameterType=<span class="hljs-string">&quot;Long&quot;</span>&gt;<br>   <span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> dept <span class="hljs-keyword">where</span> deptno = <span class="hljs-meta">#&#123;deptno&#125;;</span><br> &lt;/<span class="hljs-keyword">select</span>&gt;<br>    <br>    <br>@Mapper<br>@Repository<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">DeptDao</span> &#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> boolean <span class="hljs-title">addDept</span>(<span class="hljs-params">Dept dept</span>)</span>;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Dept <span class="hljs-title">queryById</span>(<span class="hljs-params">Long id</span>)</span>;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;Dept&gt; <span class="hljs-title">queryAll</span>()</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>3.DeptDao.xml方法返回值是否和DeptDao保持一致</p><p>4.mapper的xml配置路径是否正确</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221018233249.png"></p><p>可以看到这里显示有问题，结果发现是少写一个s. </p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle">mapper-locations: <span class="hljs-keyword">classpath</span>:mybatis<span class="hljs-regexp">/mapper/</span>*.xml<br></code></pre></td></tr></table></figure><ul><li>端口号占用</li></ul><p>Mac系统使用查看端口是否被占用</p><p><code>sudo lsof -i tcp:8081</code></p><p>强制杀掉进程</p><p><code>sudo kill -9 6076</code></p><h2 id="🥦-5-Eureka服务注册中心"><a href="#🥦-5-Eureka服务注册中心" class="headerlink" title="🥦 5. Eureka服务注册中心"></a>🥦 5. Eureka服务注册中心</h2><h3 id="🍑-5-1-什么是Eureka"><a href="#🍑-5-1-什么是Eureka" class="headerlink" title="🍑 5.1 什么是Eureka"></a>🍑 <strong>5.1 什么是Eureka</strong></h3><ul><li>Netflix在涉及Eureka时，遵循的就是API原则.</li><li>Eureka是Netflix的有个子模块，也是核心模块之一。Eureka是基于REST的服务，用于定位服务，以实现云端中间件层服务发现和故障转移，服务注册与发现对于微服务来说是非常重要的，有了服务注册与发现，只需要使用服务的标识符，就可以访问到服务，而不需要修改服务调用的配置文件了，功能类似于Dubbo的注册中心，比如Zookeeper.</li></ul><h3 id="🍑-5-2-原理理解"><a href="#🍑-5-2-原理理解" class="headerlink" title="🍑 5.2 原理理解"></a>🍑 <strong>5.2 原理理解</strong></h3><ul><li><p><strong>Eureka基本的架构</strong></p><ul><li>Springcloud 封装了Netflix公司开发的Eureka模块来实现服务注册与发现 (对比Zookeeper).</li><li>Eureka采用了C-S的架构设计，EurekaServer作为服务注册功能的服务器，他是服务注册中心.</li><li>而系统中的其他微服务，使用Eureka的客户端连接到EurekaServer并维持心跳连接。这样系统的维护人员就可以通过EurekaServer来监控系统中各个微服务是否正常运行，Springcloud 的一些其他模块 (比如Zuul) 就可以通过EurekaServer来发现系统中的其他微服务，并执行相关的逻辑.</li><li>Eureka 包含两个组件：<strong>Eureka Server</strong> 和 <strong>Eureka Client</strong>.</li><li>Eureka Server 提供服务注册，各个节点启动后，回在EurekaServer中进行注册，这样Eureka Server中的服务注册表中将会储存所有课用服务节点的信息，服务节点的信息可以在界面中直观的看到.</li><li>Eureka Client 是一个Java客户端，用于简化EurekaServer的交互，客户端同时也具备一个内置的，使用轮询负载算法的负载均衡器。在应用启动后，将会向EurekaServer发送心跳 (默认周期为30秒) 。如果Eureka Server在多个心跳周期内没有接收到某个节点的心跳，EurekaServer将会从服务注册表中把这个服务节点移除掉 (默认周期为90s).</li></ul><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221026232621.png"></p></li><li><p><strong>三大角色</strong></p><ul><li>Eureka Server：提供服务的注册与发现</li><li>Service Provider：服务生产方，将自身服务注册到Eureka中，从而使服务消费方能够找到</li><li>Service Consumer：服务消费方，从Eureka中获取注册服务列表，从而找到消费服务</li></ul></li><li><p>目前工程状况</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">PREFIX</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;eureka.client&quot;</span>;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">DEFAULT_URL</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;http://localhost:8761&quot;</span> + PREFIX + <span class="hljs-string">&quot;/&quot;</span>;<br></code></pre></td></tr></table></figure><h3 id="🍑-5-3-构建步骤"><a href="#🍑-5-3-构建步骤" class="headerlink" title="🍑 5.3 构建步骤"></a>🍑 <strong>5.3 构建步骤</strong></h3><p>🍓1. eureka-server</p><p>​     01.springcloud-eureka-7001 模块建立</p><p>​     02.pom.xml 配置</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">&lt;!--导包~--&gt;</span><br><span class="hljs-string">&lt;dependencies&gt;</span><br>    <span class="hljs-string">&lt;!--</span> <span class="hljs-string">https://mvnrepository.com/artifact/org.springframework.cloud/spring-cloud-starter-eureka-server</span> <span class="hljs-string">--&gt;</span><br>    <span class="hljs-string">&lt;!--导入Eureka</span> <span class="hljs-string">Server依赖--&gt;</span><br>    <span class="hljs-string">&lt;dependency&gt;</span><br>        <span class="hljs-string">&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span><br>        <span class="hljs-string">&lt;artifactId&gt;spring-cloud-starter-eureka-server&lt;/artifactId&gt;</span><br>        <span class="hljs-string">&lt;version&gt;1.4.6.RELEASE&lt;/version&gt;</span><br>    <span class="hljs-string">&lt;/dependency&gt;</span><br>    <span class="hljs-string">&lt;!--热部署工具--&gt;</span><br>    <span class="hljs-string">&lt;dependency&gt;</span><br>        <span class="hljs-string">&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br>        <span class="hljs-string">&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;</span><br>    <span class="hljs-string">&lt;/dependency&gt;</span><br><span class="hljs-string">&lt;/dependencies&gt;</span><br></code></pre></td></tr></table></figure><p>  03.application.yml</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">server:</span><br>  <span class="hljs-attr">port:</span> <span class="hljs-number">7001</span><br><span class="hljs-comment"># Eureka配置</span><br><span class="hljs-attr">eureka:</span><br>  <span class="hljs-attr">instance:</span><br>    <span class="hljs-comment"># Eureka服务端的实例名字</span><br>    <span class="hljs-attr">hostname:</span> <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span><br>  <span class="hljs-attr">client:</span><br>    <span class="hljs-comment"># 表示是否向 Eureka 注册中心注册自己(这个模块本身是服务器,所以不需要)</span><br>    <span class="hljs-attr">register-with-eureka:</span> <span class="hljs-literal">false</span><br>    <span class="hljs-comment"># fetch-registry如果为false,则表示自己为注册中心,客户端的化为 ture</span><br>    <span class="hljs-attr">fetch-registry:</span> <span class="hljs-literal">false</span><br>    <span class="hljs-comment"># Eureka监控页面~</span><br>    <span class="hljs-attr">service-url:</span><br>      <span class="hljs-attr">defaultZone:</span> <span class="hljs-string">http://$&#123;eureka.instance.hostname&#125;:$&#123;server.port&#125;/eureka/</span><br></code></pre></td></tr></table></figure><p>04.主启动类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@Auther</span>: csp1999</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@Date</span>: 2020/05/18/10:26</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@Description</span>: 启动之后，访问 http://127.0.0.1:7001/</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-comment">// @EnableEurekaServer 服务端的启动类，可以接受别人注册进来~</span><br><span class="hljs-meta">@EnableEurekaServer</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EurekaServer_7001</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        SpringApplication.run(EurekaServer_7001.class,args);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>05.启动成功后访问 <a href="http://localhost:7001/">http://localhost:7001/</a> 得到以下页面</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221026233534.png"></p><p> 🍓2. eureka-client</p><p><strong>调整之前创建的springlouc-provider-dept-8001</strong></p><p> 01.导入Eureka依赖</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">&lt;!--Eureka依赖--&gt;</span><br><span class="hljs-string">&lt;!--</span> <span class="hljs-string">https://mvnrepository.com/artifact/org.springframework.cloud/spring-cloud-starter-eureka</span> <span class="hljs-string">--&gt;</span><br><span class="hljs-string">&lt;dependency&gt;</span><br>    <span class="hljs-string">&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span><br>    <span class="hljs-string">&lt;artifactId&gt;spring-cloud-starter-eureka&lt;/artifactId&gt;</span><br>    <span class="hljs-string">&lt;version&gt;1.4.6.RELEASE&lt;/version&gt;</span><br><span class="hljs-string">&lt;/dependency&gt;</span><br></code></pre></td></tr></table></figure><p>02.application中新增Eureca配置</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-meta"># Eureka配置：配置服务注册中心地址</span><br><span class="hljs-symbol">eureka:</span><br><span class="hljs-symbol">  client:</span><br>    service-url:<br><span class="hljs-symbol">      defaultZone:</span> http:<span class="hljs-comment">//localhost:7001/eureka/</span><br></code></pre></td></tr></table></figure><p>03.为主启动类添加<a href="https://github.com/EnableEurekaClient">@EnableEurekaClient</a>注解</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * @Auther: csp1999</span><br><span class="hljs-comment"> * @Date: 2020/05/17/22:09</span><br><span class="hljs-comment"> * @Description: 启动类</span><br><span class="hljs-comment"> */</span><br><span class="hljs-variable">@SpringBootApplication</span><br><span class="hljs-comment">// @EnableEurekaClient 开启Eureka客户端注解，在服务启动后自动向注册中心注册服务</span><br><span class="hljs-variable">@EnableEurekaClient</span><br>public class DeptProvider_8001 &#123;<br>    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">static</span> <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">main</span>(String[] args) &#123;<br>        <span class="hljs-selector-tag">SpringApplication</span><span class="hljs-selector-class">.run</span>(DeptProvider_8001.class,args);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>04.先启动7001服务端后启动8001客户端进行测试，然后访问监控页<a href="http://localhost:7001/">http://localhost:7001/</a> 产看结果如图，成功</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221026233758.png"></p><p>05.修改Eureka上的默认描述信息</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs nix"><span class="hljs-comment"># Eureka配置：配置服务注册中心地址</span><br><span class="hljs-params">eureka:</span><br>  <span class="hljs-params">client:</span><br>    <span class="hljs-params">service-url:</span><br>      <span class="hljs-params">defaultZone:</span> http:<span class="hljs-operator">//</span>localhost:<span class="hljs-number">7001</span><span class="hljs-operator">/</span>eureka<span class="hljs-symbol">/</span><br>  <span class="hljs-params">instance:</span><br>    <span class="hljs-params">instance-id:</span> springcloud-provider-dept-<span class="hljs-number">8001</span> <span class="hljs-comment">#修改Eureka上的默认描述信息</span><br></code></pre></td></tr></table></figure><p>结果如图：</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221026233859.png"></p><p>如果此时停掉springcloud-provider-dept-8001 等<strong>30s</strong>后 监控会开启保护机制：</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221026233924.png"></p><p> 06.配置关于服务加载的监控信息</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221026234114.png"></p><p>pom.xml中添加依赖</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--actuator完善监控信息--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br> <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br> <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-actuator<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>application.yml中添加配置</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment"># info配置</span><br><span class="hljs-attr">info:</span><br><span class="hljs-comment"># 项目的名称</span><br><span class="hljs-attr">app.name:</span> <span class="hljs-string">yuting-springcloud</span><br><span class="hljs-comment"># 公司的名称</span><br><span class="hljs-attr">company.name:</span> <span class="hljs-string">华东师范大学计算机科学学院</span><br></code></pre></td></tr></table></figure><p>此时刷新监控页，点击进入<img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221031230902.png" style="zoom:50%;" />跳转新页面显示如下内容：</p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221031231024.png" style="zoom:67%;" /><p>🍓3. Eureka自我保护机制：好死不如赖活着</p><p>一句话总结就是：<strong>某时刻某一个微服务不可用，eureka不会立即清理，依旧会对该微服务的信息进行保存！</strong></p><ul><li>默认情况下，当eureka server在一定时间内没有收到实例的心跳，便会把该实例从注册表中删除（<strong>默认是90秒</strong>），但是，如果短时间内丢失大量的实例心跳，便会触发eureka server的自我保护机制，比如在开发测试时，需要频繁地重启微服务实例，但是我们很少会把eureka server一起重启（因为在开发过程中不会修改eureka注册中心），<strong>当一分钟内收到的心跳数大量减少时，会触发该保护机制</strong>。可以在eureka管理界面看到Renews threshold和Renews(last min)，当后者（最后一分钟收到的心跳数）小于前者（心跳阈值）的时候，触发保护机制，会出现红色的警告：<code>EMERGENCY!EUREKA MAY BE INCORRECTLY CLAIMING INSTANCES ARE UP WHEN THEY&#39;RE NOT.RENEWALS ARE LESSER THAN THRESHOLD AND HENCE THE INSTANCES ARE NOT BEGING EXPIRED JUST TO BE SAFE.</code>从警告中可以看到，eureka认为虽然收不到实例的心跳，但它认为实例还是健康的，eureka会保护这些实例，不会把它们从注册表中删掉。</li><li>该保护机制的目的是避免网络连接故障，在发生网络故障时，微服务和注册中心之间无法正常通信，但服务本身是健康的，不应该注销该服务，如果eureka因网络故障而把微服务误删了，那即使网络恢复了，该微服务也不会重新注册到eureka server了，因为只有在微服务启动的时候才会发起注册请求，后面只会发送心跳和服务列表请求，这样的话，该实例虽然是运行着，但永远不会被其它服务所感知。所以，eureka server在短时间内丢失过多的客户端心跳时，会进入自我保护模式，该模式下，eureka会保护注册表中的信息，不在注销任何微服务，当网络故障恢复后，eureka会自动退出保护模式。自我保护模式可以让集群更加健壮。</li><li>但是我们在开发测试阶段，需要频繁地重启发布，如果触发了保护机制，则旧的服务实例没有被删除，这时请求有可能跑到旧的实例中，而该实例已经关闭了，这就导致请求错误，影响开发测试。所以，在开发测试阶段，我们可以把自我保护模式关闭，只需在eureka server配置文件中加上如下配置即可：<code>eureka.server.enable-self-preservation=false</code>【不推荐关闭自我保护机制】</li></ul><p>详细内容可以参考下这篇博客内容：<a href="https://blog.csdn.net/wudiyong22/article/details/80827594">https://blog.csdn.net/wudiyong22/article/details/80827594</a></p><p> 🍓4. 注册进来的微服务，获取一些消息（团队开发会用到）</p><p><strong>DeptController.java</strong>新增方法</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * DiscoveryClient 可以用来获取一些配置的信息，得到具体的微服务！</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@Autowired</span><br><span class="hljs-keyword">private</span> DiscoveryClient client;<br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 获取一些注册进来的微服务的信息~，</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@GetMapping(&quot;/dept/discovery&quot;)</span><br><span class="hljs-keyword">public</span> Object <span class="hljs-title function_">discovery</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-comment">// 获取微服务列表的清单</span><br>    List&lt;String&gt; services = client.getServices();<br>    System.out.println(<span class="hljs-string">&quot;discovery=&gt;services:&quot;</span> + services);<br>    <span class="hljs-comment">// 得到一个具体的微服务信息,通过具体的微服务id，applicaioinName；</span><br>    List&lt;ServiceInstance&gt; instances = client.getInstances(<span class="hljs-string">&quot;SPRINGCLOUD-PROVIDER-DEPT&quot;</span>);<br>    <span class="hljs-keyword">for</span> (ServiceInstance instance : instances) &#123;<br>        System.out.println(<br>                instance.getHost() + <span class="hljs-string">&quot;\t&quot;</span> + <span class="hljs-comment">// 主机名称</span><br>                        instance.getPort() + <span class="hljs-string">&quot;\t&quot;</span> + <span class="hljs-comment">// 端口号</span><br>                        instance.getUri() + <span class="hljs-string">&quot;\t&quot;</span> + <span class="hljs-comment">// uri</span><br>                        instance.getServiceId() <span class="hljs-comment">// 服务id</span><br>        );<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.client;<br>&#125;<br></code></pre></td></tr></table></figure><p>主启动类中加入<a href="https://github.com/EnableDiscoveryClient">@EnableDiscoveryClient</a> 注解</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-comment">// @EnableEurekaClient 开启Eureka客户端注解，在服务启动后自动向注册中心注册服务</span><br><span class="hljs-meta">@EnableEurekaClient</span><br><span class="hljs-comment">// @EnableEurekaClient 开启服务发现客户端的注解，可以用来获取一些配置的信息，得到具体的微服务</span><br><span class="hljs-meta">@EnableDiscoveryClient</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DeptProvider_8001</span> &#123;<br>    ...<br>&#125;<br></code></pre></td></tr></table></figure><p>结果如图：</p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221101000801.png" style="zoom: 50%;" /><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221101000849.png"></p><h3 id="🍑-5-4-Eureka：集群环境配置"><a href="#🍑-5-4-Eureka：集群环境配置" class="headerlink" title="🍑 5.4  Eureka：集群环境配置"></a>🍑 <strong>5.4  Eureka：集群环境配置</strong></h3><p>🍓1.初始化</p><p>新建springcloud-eureka-7002、springcloud-eureka-7003 模块</p><p>1.为pom.xml添加依赖 (与springcloud-eureka-7001相同)</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--导包~--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework.cloud/spring-cloud-starter-eureka-server --&gt;</span><br>    <span class="hljs-comment">&lt;!--导入Eureka Server依赖--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-eureka-server<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.4.6.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--热部署工具--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-devtools<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br></code></pre></td></tr></table></figure><p>2.application.yml配置(与springcloud-eureka-7001相同)</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">server:</span><br>  <span class="hljs-attr">port:</span> <span class="hljs-number">7003</span><br><span class="hljs-comment"># Eureka配置</span><br><span class="hljs-attr">eureka:</span><br>  <span class="hljs-attr">instance:</span><br>    <span class="hljs-attr">hostname:</span> <span class="hljs-string">localhost</span> <span class="hljs-comment"># Eureka服务端的实例名字</span><br>  <span class="hljs-attr">client:</span><br>    <span class="hljs-attr">register-with-eureka:</span> <span class="hljs-literal">false</span> <span class="hljs-comment"># 表示是否向 Eureka 注册中心注册自己(这个模块本身是服务器,所以不需要)</span><br>    <span class="hljs-attr">fetch-registry:</span> <span class="hljs-literal">false</span> <span class="hljs-comment"># fetch-registry如果为false,则表示自己为注册中心</span><br>    <span class="hljs-attr">service-url:</span> <span class="hljs-comment"># 监控页面~</span><br>      <span class="hljs-comment"># 重写Eureka的默认端口以及访问路径 ---&gt;http://localhost:7001/eureka/</span><br>      <span class="hljs-attr">defaultZone:</span> <span class="hljs-string">http://$&#123;</span><br>    <span class="hljs-string">eureka.instance.hostname&#125;:$&#123;</span><br>    <span class="hljs-string">server.port&#125;/eureka/</span><br></code></pre></td></tr></table></figure><p>3.主启动类(与springcloud-eureka-7001相同)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@Auther</span>: yuting</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@Date</span>: 2022/11/02/10:26</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@Description</span>: 启动之后，访问 http://127.0.0.1:7003/</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-comment">// @EnableEurekaServer 服务端的启动类，可以接受别人注册进来~</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EurekaServer_7003</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        SpringApplication.run(EurekaServer_7003.class,args);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>🍓2.集群成员相互关联</p><p>配置一些自定义本机名字，找到本机hosts文件并打开</p><p>在hosts文件最后加上，要访问的本机名称，默认是localhost</p><p>127.0.0.1    eureka7001</p><p>127.0.0.1    eureka7002</p><p>127.0.0.1    eureka7003</p><p>修改application.yml的配置，如图为springcloud-eureka-7001配置，springcloud-eureka-7002&#x2F;springcloud-eureka-7003同样分别修改为其对应的名称即可</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221102234722.png"></p><p>在集群中使springcloud-eureka-7001关联springcloud-eureka-7002、springcloud-eureka-7003</p><p>完整的springcloud-eureka-7001下的application.yml如下</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">server:</span><br>  <span class="hljs-attr">port:</span> <span class="hljs-number">7001</span><br><span class="hljs-comment">#Eureka配置</span><br><span class="hljs-attr">eureka:</span><br>  <span class="hljs-attr">instance:</span><br>    <span class="hljs-attr">hostname:</span> <span class="hljs-string">eureka7001.com</span> <span class="hljs-comment">#Eureka服务端的实例名字</span><br>  <span class="hljs-attr">client:</span><br>    <span class="hljs-attr">register-with-eureka:</span> <span class="hljs-literal">false</span> <span class="hljs-comment">#表示是否向 Eureka 注册中心注册自己(这个模块本身是服务器,所以不需要)</span><br>    <span class="hljs-attr">fetch-registry:</span> <span class="hljs-literal">false</span> <span class="hljs-comment">#fetch-registry如果为false,则表示自己为注册中心</span><br>    <span class="hljs-attr">service-url:</span> <span class="hljs-comment">#监控页面~</span><br>      <span class="hljs-comment">#重写Eureka的默认端口以及访问路径 ---&gt;http://localhost:7001/eureka/</span><br>      <span class="hljs-comment"># 单机： defaultZone: http://$&#123;eureka.instance.hostname&#125;:$&#123;server.port&#125;/eureka/</span><br>      <span class="hljs-comment"># 集群（关联）：7001关联7002、7003</span><br>      <span class="hljs-attr">defaultZone:</span> <span class="hljs-string">http://eureka7002.com:7002/eureka/,http://eureka7003.com:7003/eureka/</span><br></code></pre></td></tr></table></figure><p>同时在集群中使springcloud-eureka-7002关联springcloud-eureka-7001、springcloud-eureka-7003</p><p>完整的springcloud-eureka-7002下的application.yml如下</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">server:</span><br>  <span class="hljs-attr">port:</span> <span class="hljs-number">7002</span><br><span class="hljs-comment">#Eureka配置</span><br><span class="hljs-attr">eureka:</span><br>  <span class="hljs-attr">instance:</span><br>    <span class="hljs-attr">hostname:</span> <span class="hljs-string">eureka7002.com</span> <span class="hljs-comment">#Eureka服务端的实例名字</span><br>  <span class="hljs-attr">client:</span><br>    <span class="hljs-attr">register-with-eureka:</span> <span class="hljs-literal">false</span> <span class="hljs-comment">#表示是否向 Eureka 注册中心注册自己(这个模块本身是服务器,所以不需要)</span><br>    <span class="hljs-attr">fetch-registry:</span> <span class="hljs-literal">false</span> <span class="hljs-comment">#fetch-registry如果为false,则表示自己为注册中心</span><br>    <span class="hljs-attr">service-url:</span> <span class="hljs-comment">#监控页面~</span><br>      <span class="hljs-comment">#重写Eureka的默认端口以及访问路径 ---&gt;http://localhost:7001/eureka/</span><br>      <span class="hljs-comment"># 单机： defaultZone: http://$&#123;eureka.instance.hostname&#125;:$&#123;server.port&#125;/eureka/</span><br>      <span class="hljs-comment"># 集群（关联）：7002关联7001、7003</span><br>      <span class="hljs-attr">defaultZone:</span> <span class="hljs-string">http://eureka7001.com:7001/eureka/,http://eureka7003.com:7003/eureka/</span><br></code></pre></td></tr></table></figure><p>springcloud-eureka-7003配置方式同理可得.</p><p>通过springcloud-provider-dept-8001下的yml配置文件，修改<strong>Eureka配置：配置服务注册中心地址</strong></p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs nix"><span class="hljs-comment"># Eureka配置：配置服务注册中心地址</span><br><span class="hljs-params">eureka:</span><br>  <span class="hljs-params">client:</span><br>    <span class="hljs-params">service-url:</span><br>      <span class="hljs-comment"># 注册中心地址7001-7003</span><br>      <span class="hljs-params">defaultZone:</span> http:<span class="hljs-operator">//</span>eureka7001.com:<span class="hljs-number">7001</span><span class="hljs-operator">/</span>eureka<span class="hljs-operator">/</span>,http:<span class="hljs-operator">//</span>eureka7002.com:<span class="hljs-number">7002</span><span class="hljs-operator">/</span>eureka<span class="hljs-operator">/</span>,http:<span class="hljs-operator">//</span>eureka7003.com:<span class="hljs-number">7003</span><span class="hljs-operator">/</span>eureka<span class="hljs-symbol">/</span><br>  <span class="hljs-params">instance:</span><br>    <span class="hljs-params">instance-id:</span> springcloud-provider-dept-<span class="hljs-number">8001</span> <span class="hljs-comment">#修改Eureka上的默认描述信息</span><br></code></pre></td></tr></table></figure><p>这样模拟集群就搭建号了，就可以把一个项目挂载到三个服务器上了</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221102234941.png"></p><h3 id="🍑5-5-对比和Zookeeper区别"><a href="#🍑5-5-对比和Zookeeper区别" class="headerlink" title="🍑5.5 对比和Zookeeper区别"></a>🍑<strong>5.5 对比和Zookeeper区别</strong></h3><p>🍐<strong>1. 回顾CAP原则</strong></p><p>RDBMS (MySQL\Oracle\sqlServer) &#x3D;&#x3D;&#x3D;&gt; ACID</p><p>NoSQL (Redis\MongoDB) &#x3D;&#x3D;&#x3D;&gt; CAP</p><p>🍐<strong>2. ACID是什么？</strong></p><ul><li>A (Atomicity) 原子性</li><li>C (Consistency) 一致性</li><li>I (Isolation) 隔离性</li><li>D (Durability) 持久性</li></ul><p>🍐<strong>3. CAP是什么?</strong></p><ul><li>C (Consistency) 强一致性</li><li>A (Availability) 可用性</li><li>P (Partition tolerance) 分区容错性</li></ul><p>CAP的三进二：CA、AP、CP</p><p>🍐<strong>4. CAP理论的核心</strong></p><ul><li>一个分布式系统不可能同时很好的满足一致性，可用性和分区容错性这三个需求</li><li>根据CAP原理，将NoSQL数据库分成了满足CA原则，满足CP原则和满足AP原则三大类<ul><li>CA：单点集群，满足一致性，可用性的系统，通常可扩展性较差</li><li>CP：满足一致性，分区容错的系统，通常性能不是特别高</li><li>AP：满足可用性，分区容错的系统，通常可能对一致性要求低一些</li></ul></li></ul><p>🍐<strong>5. 作为分布式服务注册中心，Eureka比Zookeeper好在哪里？</strong></p><p>著名的CAP理论指出，一个分布式系统不可能同时满足C (一致性) 、A (可用性) 、P (容错性)，由于分区容错性P再分布式系统中是必须要保证的，因此我们只能再A和C之间进行权衡。</p><ul><li>Zookeeper 保证的是 CP —&gt; 满足一致性，分区容错的系统，通常性能不是特别高</li><li>Eureka 保证的是 AP —&gt; 满足可用性，分区容错的系统，通常可能对一致性要求低一些</li></ul><p><strong>Zookeeper保证的是CP</strong></p><p>当向注册中心查询服务列表时，我们可以容忍注册中心返回的是几分钟以前的注册信息，但不能接收服务直接down掉不可用。也就是说，<strong>服务注册功能对可用性的要求要高于一致性</strong>。但zookeeper会出现这样一种情况，当master节点因为网络故障与其他节点失去联系时，剩余节点会重新进行leader选举。问题在于，选举leader的时间太长，30-120s，且选举期间整个zookeeper集群是不可用的，这就导致在选举期间注册服务瘫痪。在云部署的环境下，因为网络问题使得zookeeper集群失去master节点是较大概率发生的事件，虽然服务最终能够恢复，但是，漫长的选举时间导致注册长期不可用，是不可容忍的。</p><p><strong>Eureka保证的是AP</strong></p><p>Eureka看明白了这一点，因此在设计时就优先保证可用性。<strong>Eureka各个节点都是平等的</strong>，几个节点挂掉不会影响正常节点的工作，剩余的节点依然可以提供注册和查询服务。而Eureka的客户端在向某个Eureka注册时，如果发现连接失败，则会自动切换至其他节点，只要有一台Eureka还在，就能保住注册服务的可用性，只不过查到的信息可能不是最新的，除此之外，Eureka还有之中自我保护机制，如果在15分钟内超过85%的节点都没有正常的心跳，那么Eureka就认为客户端与注册中心出现了网络故障，此时会出现以下几种情况：</p><ul><li>Eureka不在从注册列表中移除因为长时间没收到心跳而应该过期的服务</li><li>Eureka仍然能够接受新服务的注册和查询请求，但是不会被同步到其他节点上 (即保证当前节点依然可用)</li><li>当网络稳定时，当前实例新的注册信息会被同步到其他节点中</li></ul><p>因此，Eureka可以很好的应对因网络故障导致部分节点失去联系的情况，而不会像zookeeper那样使整个注册服务瘫痪</p><p>⚠️注意：在使用spingcloud的微服务的时候，要记住不能使用下划线，用横线去代替。</p><p>(1)问题描述：</p><p>在进行使用springcloud微服务的时候，在eureka注册中心，注册完多个服务提供者在eureka注册中心，使用负载均衡Ribbon，在spingboot启动器运行时曝出这个错误的，抛出这个异常，<br>java.lang.IllegalStateException: Request URI does not contain a valid hostname: <a href="http://user_service/user/">http://user_service/user/</a></p><p>(2)问题分析：</p><p><code>java.lang.IllegalStateException: Request URI does not contain a valid hostname: http://user_service/user/</code></p><p>这个异常是找不到指定的url，在eureka的client端，通过restTemple向eureka的server获取微服务的时候，没有连接上主机名，所以需要检查url服务名字的错误，最后是发现负载均衡Ribbon是不支持下划线的，只支持横线。在将服务提供者的名字重新命名，将下划线改为横线，重新启动服务，这个异常就解决了。</p><p>参考：<a href="https://blog.csdn.net/weixin_42614080/article/details/88982043">https://blog.csdn.net/weixin_42614080/article/details/88982043</a></p><h2 id="🥦-6-Ribbon：负载均衡-基于客户端"><a href="#🥦-6-Ribbon：负载均衡-基于客户端" class="headerlink" title="🥦 6. Ribbon：负载均衡(基于客户端)"></a>🥦 6. Ribbon：负载均衡(基于客户端)</h2><h3 id="🍑6-1-负载均衡以及Ribbon"><a href="#🍑6-1-负载均衡以及Ribbon" class="headerlink" title="🍑6.1 负载均衡以及Ribbon"></a>🍑6.1 负载均衡以及Ribbon</h3><p>Ribbon是什么？</p><ul><li>Spring Cloud Ribbon 是基于Netflix Ribbon 实现的一套<strong>客户端负载均衡的工具</strong>。</li><li>简单的说，Ribbon 是 Netflix 发布的开源项目，主要功能是提供客户端的软件负载均衡算法，将 Netflix 的中间层服务连接在一起。Ribbon 的客户端组件提供一系列完整的配置项，如：连接超时、重试等。简单的说，就是在配置文件中列出 LoadBalancer (简称LB：负载均衡) 后面所有的及其，Ribbon 会自动的帮助你基于某种规则 (如简单轮询，随机连接等等) 去连接这些机器。我们也容易使用 Ribbon 实现自定义的负载均衡算法！</li></ul><p>Ribbon能干嘛？</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221103224258.png"></p><ul><li><p>LB，即负载均衡 (LoadBalancer) ，在微服务或分布式集群中经常用的一种应用。</p></li><li><p>负载均衡简单的说就是将用户的请求平摊的分配到多个服务上，从而达到系统的HA (高用)。</p></li><li><p>常见的负载均衡软件有 Nginx、Lvs 等等。</p></li><li><p>Dubbo、SpringCloud 中均给我们提供了负载均衡，<strong>SpringCloud 的负载均衡算法可以自定义</strong>。</p></li><li><p>负载均衡简单分类：</p><ul><li>集中式LB<ul><li>即在服务的提供方和消费方之间使用独立的LB设施，如**Nginx(反向代理服务器)**，由该设施负责把访问请求通过某种策略转发至服务的提供方！</li></ul></li><li>进程式 LB<ul><li>将LB逻辑集成到消费方，消费方从服务注册中心获知有哪些地址可用，然后自己再从这些地址中选出一个合适的服务器。</li><li><strong>Ribbon 就属于进程内LB</strong>，它只是一个类库，集成于消费方进程，消费方通过它来获取到服务提供方的地址！</li></ul></li></ul></li></ul><h3 id="🍑6-2-集成Ribbon"><a href="#🍑6-2-集成Ribbon" class="headerlink" title="🍑6.2 集成Ribbon"></a>🍑6.2 集成Ribbon</h3><p><strong>springcloud-consumer-dept-80</strong>向pom.xml中添加Ribbon和Eureka依赖</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--Ribbon--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-ribbon<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.4.6.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-comment">&lt;!--Eureka: Ribbon需要从Eureka服务中心获取要拿什么--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-eureka<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.4.6.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>在application.yml文件中配置Eureka</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># Eureka配置</span><br>eureka:<br>  client:<br>    register-with-eureka: <span class="hljs-literal">false</span> <span class="hljs-comment"># 不向 Eureka注册自己</span><br>    service-url: <span class="hljs-comment"># 从三个注册中心中随机取一个去访问</span><br>      defaultZone: http://eureka7001.com:7001/eureka/,http://eureka7002.com:7002/eureka/,http://eureka7003.com:7003/eureka/<br></code></pre></td></tr></table></figure><p>主启动类加上@EnableEurekaClient注解，开启Eureka注解</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-comment">//Ribbon 和 Eureka 整合以后，客户端可以直接调用，不用关心IP地址和端口号</span><br><span class="hljs-variable">@SpringBootApplication</span><br><span class="hljs-variable">@EnableEurekaClient</span> <span class="hljs-comment">//开启Eureka 客户端</span><br>public class DeptConsumer_80 &#123;<br>    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">static</span> <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">main</span>(String[] args) &#123;<br>        <span class="hljs-selector-tag">SpringApplication</span><span class="hljs-selector-class">.run</span>(DeptConsumer_80.class, args);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>自定义Spring配置类：ConfigBean.java 配置负载均衡实现RestTemplate</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-variable">@Configuration</span><br>public class ConfigBean &#123;<br>    <span class="hljs-comment">//@Configuration -- spring  applicationContext.xml</span><br>    <span class="hljs-variable">@LoadBalanced</span> <span class="hljs-comment">//配置负载均衡实现RestTemplate</span><br>    <span class="hljs-variable">@Bean</span><br>    public RestTemplate <span class="hljs-built_in">getRestTemplate</span>() &#123;<br>        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">new</span> <span class="hljs-selector-tag">RestTemplate</span>();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>修改conroller：DeptConsumerController.java</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-comment">//Ribbon:我们这里的地址，应该是一个变量，通过服务名来访问</span><br><span class="hljs-comment">//private static final String REST_URL_PREFIX = &quot;http://localhost:8001&quot;;</span><br><span class="hljs-keyword">private</span> <span class="hljs-type">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> REST_URL_PREFIX = <span class="hljs-string">&quot;http://SPRINGCLOUD-PROVIDER-DEPT&quot;</span>;<br></code></pre></td></tr></table></figure><h3 id="🍑6-3-使用Ribbon实现负载均衡"><a href="#🍑6-3-使用Ribbon实现负载均衡" class="headerlink" title="🍑6.3 使用Ribbon实现负载均衡"></a>🍑6.3 使用Ribbon实现负载均衡</h3><p>流程图：</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221103224800.png"></p><p>1.新建两个服务提供者Moudle：springcloud-provider-dept-8003、springcloud-provider-dept-8002</p><p>2.参照springcloud-provider-dept-8001 依次为另外两个Moudle添加pom.xml依赖 、resourece下的mybatis和application.yml配置，Java代码</p><p>3.启动所有服务测试(根据自身电脑配置决定启动服务的个数)，访问<a href="http://eureka7001.com:7002/%E6%9F%A5%E7%9C%8B%E7%BB%93%E6%9E%9C">http://eureka7001.com:7002/查看结果</a></p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221105175026.png"></p><p>测试访问<a href="http://localhost/consumer/dept/list">http://localhost/consumer/dept/list</a> 这时候随机访问的是服务提供者8003</p><p>再次访问<a href="http://localhost/consumer/dept/list%E8%BF%99%E6%97%B6%E5%80%99%E9%9A%8F%E6%9C%BA%E7%9A%84%E6%98%AF%E6%9C%8D%E5%8A%A1%E6%8F%90%E4%BE%9B%E8%80%858001">http://localhost/consumer/dept/list这时候随机的是服务提供者8001</a></p><p>以上这种<strong>每次访问<a href="http://localhost/consumer/dept/list%E9%9A%8F%E6%9C%BA%E8%AE%BF%E9%97%AE%E9%9B%86%E7%BE%A4%E4%B8%AD%E6%9F%90%E4%B8%AA%E6%9C%8D%E5%8A%A1%E6%8F%90%E4%BE%9B%E8%80%85%EF%BC%8C%E8%BF%99%E7%A7%8D%E6%83%85%E5%86%B5%E5%8F%AB%E5%81%9A%E8%BD%AE%E8%AF%A2">http://localhost/consumer/dept/list随机访问集群中某个服务提供者，这种情况叫做轮询</a></strong>，轮询算法在SpringCloud中可以自定义。</p><p><strong>如何切换或者自定义规则呢？</strong></p><p>在springcloud-provider-dept-80模块下的ConfigBean中进行配置，切换使用不同的规则</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ConfigBean</span> &#123;<br>    <span class="hljs-comment">//@Configuration -- spring  applicationContext.xml</span><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * IRule:</span><br><span class="hljs-comment">     * RoundRobinRule 轮询策略</span><br><span class="hljs-comment">     * RandomRule 随机策略</span><br><span class="hljs-comment">     * AvailabilityFilteringRule ： 会先过滤掉，跳闸，访问故障的服务~，对剩下的进行轮询~</span><br><span class="hljs-comment">     * RetryRule ： 会先按照轮询获取服务~，如果服务获取失败，则会在指定的时间内进行，重试</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> IRule <span class="hljs-title function_">myRule</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RandomRule</span>();<span class="hljs-comment">//使用随机策略</span><br>        <span class="hljs-comment">//return new RoundRobinRule();//使用轮询策略</span><br>        <span class="hljs-comment">//return new AvailabilityFilteringRule();//使用轮询策略</span><br>        <span class="hljs-comment">//return new RetryRule();//使用轮询策略</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>也可以自定义规则，在myRule包下自定义一个配置类MyRule.java，注意：<strong>该包不要和主启动类所在的包同级，要跟启动类所在包同级</strong>：</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221105175159.png"></p><p>MyRule.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyRule</span> &#123;<br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> IRule <span class="hljs-title function_">myRule</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyRandomRule</span>();<span class="hljs-comment">//默认是轮询RandomRule,现在自定义为自己的</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>主启动类开启负载均衡并指定自定义的MyRule配置类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//Ribbon 和 Eureka 整合以后，客户端可以直接调用，不用关心IP地址和端口号</span><br><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-meta">@EnableEurekaClient</span><br><span class="hljs-comment">//在微服务启动的时候就能加载自定义的Ribbon类(自定义的规则会覆盖原有默认的规则)</span><br><span class="hljs-meta">@RibbonClient(name = &quot;SPRINGCLOUD-PROVIDER-DEPT&quot;,configuration = MyRule.class)</span><span class="hljs-comment">//开启负载均衡,并指定自定义的规则</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DeptConsumer_80</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        SpringApplication.run(DeptConsumer_80.class, args);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>自定义的规则(这里我们参考Ribbon中默认的规则代码自己稍微改动)：MyRandomRule.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyRandomRule</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractLoadBalancerRule</span> &#123;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 每个服务访问5次则换下一个服务(总共3个服务)</span><br><span class="hljs-comment">     * &lt;p&gt;</span><br><span class="hljs-comment">     * total=0,默认=0,如果=5,指向下一个服务节点</span><br><span class="hljs-comment">     * index=0,默认=0,如果total=5,index+1</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">total</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<span class="hljs-comment">//被调用的次数</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">currentIndex</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<span class="hljs-comment">//当前是谁在提供服务</span><br>    <span class="hljs-comment">//@edu.umd.cs.findbugs.annotations.SuppressWarnings(value = &quot;RCN_REDUNDANT_NULLCHECK_OF_NULL_VALUE&quot;)</span><br>    <span class="hljs-keyword">public</span> Server <span class="hljs-title function_">choose</span><span class="hljs-params">(ILoadBalancer lb, Object key)</span> &#123;<br>        <span class="hljs-keyword">if</span> (lb == <span class="hljs-literal">null</span>) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>        &#125;<br>        <span class="hljs-type">Server</span> <span class="hljs-variable">server</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">while</span> (server == <span class="hljs-literal">null</span>) &#123;<br>            <span class="hljs-keyword">if</span> (Thread.interrupted()) &#123;<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>            &#125;<br>            List&lt;Server&gt; upList = lb.getReachableServers();<span class="hljs-comment">//获得当前活着的服务</span><br>            List&lt;Server&gt; allList = lb.getAllServers();<span class="hljs-comment">//获取所有的服务</span><br>            <span class="hljs-type">int</span> <span class="hljs-variable">serverCount</span> <span class="hljs-operator">=</span> allList.size();<br>            <span class="hljs-keyword">if</span> (serverCount == <span class="hljs-number">0</span>) &#123;<br>                <span class="hljs-comment">/*</span><br><span class="hljs-comment">                 * No servers. End regardless of pass, because subsequent passes</span><br><span class="hljs-comment">                 * only get more restrictive.</span><br><span class="hljs-comment">                 */</span><br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>            &#125;<br>            <span class="hljs-comment">//int index = chooseRandomInt(serverCount);//生成区间随机数</span><br>            <span class="hljs-comment">//server = upList.get(index);//从或活着的服务中,随机获取一个</span><br>            <span class="hljs-comment">//=====================自定义代码=========================</span><br>            <span class="hljs-keyword">if</span> (total &lt; <span class="hljs-number">5</span>) &#123;<br>                server = upList.get(currentIndex);<br>                total++;<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                total = <span class="hljs-number">0</span>;<br>                currentIndex++;<br>                <span class="hljs-keyword">if</span> (currentIndex &gt; upList.size()) &#123;<br>                    currentIndex = <span class="hljs-number">0</span>;<br>                &#125;<br>                server = upList.get(currentIndex);<span class="hljs-comment">//从活着的服务中,获取指定的服务来进行操作</span><br>            &#125;<br>            <span class="hljs-comment">//======================================================</span><br>            <span class="hljs-keyword">if</span> (server == <span class="hljs-literal">null</span>) &#123;<br>                <span class="hljs-comment">/*</span><br><span class="hljs-comment">                 * The only time this should happen is if the server list were</span><br><span class="hljs-comment">                 * somehow trimmed. This is a transient condition. Retry after</span><br><span class="hljs-comment">                 * yielding.</span><br><span class="hljs-comment">                 */</span><br>                Thread.<span class="hljs-keyword">yield</span>();<br>                <span class="hljs-keyword">continue</span>;<br>            &#125;<br>            <span class="hljs-keyword">if</span> (server.isAlive()) &#123;<br>                <span class="hljs-keyword">return</span> (server);<br>            &#125;<br>            <span class="hljs-comment">// Shouldn&#x27;t actually happen.. but must be transient or a bug.</span><br>            server = <span class="hljs-literal">null</span>;<br>            Thread.<span class="hljs-keyword">yield</span>();<br>        &#125;<br>        <span class="hljs-keyword">return</span> server;<br>    &#125;<br>    <span class="hljs-keyword">protected</span> <span class="hljs-type">int</span> <span class="hljs-title function_">chooseRandomInt</span><span class="hljs-params">(<span class="hljs-type">int</span> serverCount)</span> &#123;<br>        <span class="hljs-keyword">return</span> ThreadLocalRandom.current().nextInt(serverCount);<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Server <span class="hljs-title function_">choose</span><span class="hljs-params">(Object key)</span> &#123;<br>        <span class="hljs-keyword">return</span> choose(getLoadBalancer(), key);<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">initWithNiwsConfig</span><span class="hljs-params">(IClientConfig clientConfig)</span> &#123;<br>        <span class="hljs-comment">// TODO Auto-generated method stub</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="🥦-7-Feign：负载均衡-基于服务端"><a href="#🥦-7-Feign：负载均衡-基于服务端" class="headerlink" title="🥦 7. Feign：负载均衡(基于服务端)"></a>🥦 7. Feign：负载均衡(基于服务端)</h2><h3 id="🍑-7-1-Feign简介"><a href="#🍑-7-1-Feign简介" class="headerlink" title="🍑 7.1 Feign简介"></a>🍑 7.1 Feign简介</h3><p>Feign是声明式Web Service客户端，它让微服务之间的调用变得更简单，类似controller调用service。SpringCloud集成了Ribbon和Eureka，可以使用Feigin提供负载均衡的http客户端</p><p><strong>只需要创建一个接口，然后添加注解即可~</strong></p><p>Feign，主要是社区版，大家都习惯面向接口编程。这个是很多开发人员的规范。调用微服务访问两种方法</p><ol><li>微服务名字 【ribbon】</li><li>接口和注解 【feign】</li></ol><p><strong>Feign能干什么？</strong></p><ul><li>Feign旨在使编写Java Http客户端变得更容易</li><li>前面在使用<strong>Ribbon</strong> + <strong>RestTemplate</strong>时，利用<strong>RestTemplate</strong>对Http请求的封装处理，形成了一套模板化的调用方法。但是在实际开发中，由于对服务依赖的调用可能不止一处，往往一个接口会被多处调用，所以通常都会针对每个微服务自行封装一个客户端类来包装这些依赖服务的调用。所以，<strong>Feign</strong>在此基础上做了进一步的封装，由他来帮助我们定义和实现依赖服务接口的定义，在Feign的实现下，我们只需要创建一个接口并使用注解的方式来配置它 (类似以前Dao接口上标注Mapper注解，现在是一个微服务接口上面标注一个Feign注解)，即可完成对服务提供方的接口绑定，简化了使用Spring Cloud Ribbon 时，自动封装服务调用客户端的开发量。</li></ul><p><strong>Feign默认集成了Ribbon</strong></p><ul><li>利用<strong>Ribbon</strong>维护了MicroServiceCloud-Dept的服务列表信息，并且通过轮询实现了客户端的负载均衡，而与<strong>Ribbon</strong>不同的是，通过<strong>Feign</strong>只需要定义服务绑定接口且以声明式的方法，优雅而简单的实现了服务调用。</li></ul><h3 id="🍑-7-2-Feign的使用步骤"><a href="#🍑-7-2-Feign的使用步骤" class="headerlink" title="🍑 7.2 Feign的使用步骤"></a>🍑 7.2 Feign的使用步骤</h3><p>创建springcloud-consumer-fdept-feign模块</p><p>拷贝springcloud-consumer-dept-80模块下的pom.xml，resource，以及java代码到springcloud-consumer-feign模块，并添加feign依赖。</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--Feign的依赖--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-feign<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.4.6.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><code class="hljs java">``````````<br>通过Ribbon实现：原来的controller：DeptConsumerController.java<br>``````````  <br><span class="hljs-meta">@RestController</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DeptConsumerController</span> &#123;<br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 理解：消费者，不应该有service层~</span><br><span class="hljs-comment">     * RestTemplate .... 供我们直接调用就可以了！ 注册到Spring中</span><br><span class="hljs-comment">     * (地址：url, 实体：Map ,Class&lt;T&gt; responseType)</span><br><span class="hljs-comment">     * &lt;p&gt;</span><br><span class="hljs-comment">     * 提供多种便捷访问远程http服务的方法，简单的Restful服务模板~</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> RestTemplate restTemplate;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 服务提供方地址前缀</span><br><span class="hljs-comment">     * &lt;p&gt;</span><br><span class="hljs-comment">     * Ribbon:我们这里的地址，应该是一个变量，通过服务名来访问</span><br><span class="hljs-comment">     */</span><br><span class="hljs-comment">//    private static final String REST_URL_PREFIX = &quot;http://localhost:8001&quot;;</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">REST_URL_PREFIX</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;http://SPRINGCLOUD-PROVIDER-DEPT&quot;</span>;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 消费方添加部门信息</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> dept</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@RequestMapping(&quot;/consumer/dept/add&quot;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">add</span><span class="hljs-params">(Dept dept)</span> &#123;<br>        <span class="hljs-comment">// postForObject(服务提供方地址(接口),参数实体,返回类型.class)</span><br>        <span class="hljs-keyword">return</span> restTemplate.postForObject(REST_URL_PREFIX + <span class="hljs-string">&quot;/dept/add&quot;</span>, dept, Boolean.class);<br>    &#125;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 消费方根据id查询部门信息</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> id</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@RequestMapping(&quot;/consumer/dept/get/&#123;id&#125;&quot;)</span><br>    <span class="hljs-keyword">public</span> Dept <span class="hljs-title function_">get</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable(&quot;id&quot;)</span> Long id)</span> &#123;<br>        <span class="hljs-comment">// getForObject(服务提供方地址(接口),返回类型.class)</span><br>        <span class="hljs-keyword">return</span> restTemplate.getForObject(REST_URL_PREFIX + <span class="hljs-string">&quot;/dept/get/&quot;</span> + id, Dept.class);<br>    &#125;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 消费方查询部门信息列表</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@RequestMapping(&quot;/consumer/dept/list&quot;)</span><br>    <span class="hljs-keyword">public</span> List&lt;Dept&gt; <span class="hljs-title function_">list</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> restTemplate.getForObject(REST_URL_PREFIX + <span class="hljs-string">&quot;/dept/list&quot;</span>, List.class);<br>    &#125;<br>&#125;<br>``````````<br>通过**Feign**实现：—改造后controller：**DeptConsumerController.java**<br>``````````<br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@Auther</span>: yuting</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@Date</span>: 2022/11/05/22:47</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@Description</span>:</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@RestController</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DeptConsumerController</span> &#123;<br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> DeptClientService deptClientService;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 消费方添加部门信息</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> dept</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@RequestMapping(&quot;/consumer/dept/add&quot;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">add</span><span class="hljs-params">(Dept dept)</span> &#123;<br>        <span class="hljs-keyword">return</span> deptClientService.addDept(dept);<br>    &#125;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 消费方根据id查询部门信息</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> id</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@RequestMapping(&quot;/consumer/dept/get/&#123;id&#125;&quot;)</span><br>    <span class="hljs-keyword">public</span> Dept <span class="hljs-title function_">get</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable(&quot;id&quot;)</span> Long id)</span> &#123;<br>       <span class="hljs-keyword">return</span> deptClientService.queryById(id);<br>    &#125;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 消费方查询部门信息列表</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@RequestMapping(&quot;/consumer/dept/list&quot;)</span><br>    <span class="hljs-keyword">public</span> List&lt;Dept&gt; <span class="hljs-title function_">list</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> deptClientService.queryAll();<br>    &#125;<br>&#125;<br>``````````<br>Feign和Ribbon二者对比，前者显现出面向接口编程特点，代码看起来更清爽，而且Feign调用方式更符合我们之前在做SSM或者SprngBoot项目时，Controller层调用Service层的编程习惯！<br>**主配置类**：<br>``````````<br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@Auther</span>: yuting</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@Date</span>: 2022/11/05/22:47</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@Description</span>:</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-meta">@EnableEurekaClient</span><br><span class="hljs-comment">// feign客户端注解,并指定要扫描的包以及配置接口DeptClientService</span><br><span class="hljs-meta">@EnableFeignClients(basePackages = &#123;</span><br><span class="hljs-meta">      &quot;com.haust.springcloud&quot;&#125;)</span><br><span class="hljs-comment">// 切记不要加这个注解，不然会出现404访问不到</span><br><span class="hljs-comment">//@ComponentScan(&quot;com.haust.springcloud&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FeignDeptConsumer_80</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        SpringApplication.run(FeignDeptConsumer_80.class, args);<br>    &#125;<br>&#125;<br>``````````<br>  <br></code></pre></td></tr></table></figure><p>01.改造springcloud-api模块</p><p>pom.xml添加feign依赖</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">&lt;!--Feign的依赖--&gt;</span><br><span class="hljs-string">&lt;dependency&gt;</span><br>    <span class="hljs-string">&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span><br>    <span class="hljs-string">&lt;artifactId&gt;spring-cloud-starter-feign&lt;/artifactId&gt;</span><br>    <span class="hljs-string">&lt;version&gt;1.4.6.RELEASE&lt;/version&gt;</span><br><span class="hljs-string">&lt;/dependency&gt;</span><br></code></pre></td></tr></table></figure><p>新建service包，并新建DeptClientService.java接口，</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// @FeignClient:微服务客户端注解,value:指定微服务的名字,这样就可以使Feign客户端直接找到对应的微服务</span><br>``````````<br><span class="hljs-meta">@FeignClient(value = “SPRINGCLOUD-PROVIDER-DEPT”)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">DeptClientService</span> &#123;<br>    <span class="hljs-meta">@GetMapping(&quot;/dept/get/&#123;id&#125;&quot;)</span><br>    <span class="hljs-keyword">public</span> Dept <span class="hljs-title function_">queryById</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable(&quot;id&quot;)</span> Long id)</span>;<br>    <span class="hljs-meta">@GetMapping(&quot;/dept/list&quot;)</span><br>    <span class="hljs-keyword">public</span> Dept <span class="hljs-title function_">queryAll</span><span class="hljs-params">()</span>;<br>    <span class="hljs-meta">@GetMapping(&quot;/dept/add&quot;)</span><br>    <span class="hljs-keyword">public</span> Dept <span class="hljs-title function_">addDept</span><span class="hljs-params">(Dept dept)</span>;<br>&#125;<br>``````````<br></code></pre></td></tr></table></figure><h3 id="🍑7-3-Feign和Ribbon如何选择？"><a href="#🍑7-3-Feign和Ribbon如何选择？" class="headerlink" title="🍑7.3 Feign和Ribbon如何选择？"></a>🍑7.3 Feign和Ribbon如何选择？</h3><p><strong>根据个人习惯而定，如果喜欢REST风格使用Ribbon；如果喜欢社区版的面向接口风格使用Feign.</strong></p><p>Feign 本质上也是实现了 Ribbon，只不过后者是在调用方式上，为了满足一些开发者习惯的接口调用习惯！</p><h2 id="🥦-8-Hystrix：服务熔断"><a href="#🥦-8-Hystrix：服务熔断" class="headerlink" title="🥦 8. Hystrix：服务熔断"></a>🥦 8. Hystrix：服务熔断</h2><blockquote><p>分布式系统面临的问题</p></blockquote><p>复杂分布式体系结构中的应用程序有数十个依赖关系，每个依赖关系在某些时候将不可避免失败！</p><h3 id="🍑8-1-服务雪崩"><a href="#🍑8-1-服务雪崩" class="headerlink" title="🍑8.1 服务雪崩"></a>🍑8.1 服务雪崩</h3><p>多个微服务之间调用的时候，假设微服务A调用微服务B和微服务C，微服务B和微服务C又调用其他的微服务，这就是所谓的“扇出”，如果扇出的链路上<strong>某个微服务的调用响应时间过长，或者不可用</strong>，对微服务A的调用就会占用越来越多的系统资源，进而引起系统崩溃，所谓的“雪崩效应”。</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221105223716.png"></p><p>对于高流量的应用来说，单一的后端依赖可能会导致所有服务器上的所有资源都在几十秒内饱和。比失败更糟糕的是，这些应用程序还可能导致服务之间的延迟增加，备份队列，线程和其他系统资源紧张，导致整个系统发生更多的级联故障，<strong>这些都表示需要对故障和延迟进行隔离和管理，以达到单个依赖关系的失败而不影响整个应用程序或系统运行</strong>。</p><p>我们需要，<strong>弃车保帅</strong>！</p><h3 id="🍑8-2-什么是Hystrix？"><a href="#🍑8-2-什么是Hystrix？" class="headerlink" title="🍑8.2 什么是Hystrix？"></a>🍑8.2 什么是Hystrix？</h3><p><strong>Hystrix</strong>是一个应用于处理分布式系统的延迟和容错的开源库，在分布式系统里，许多依赖不可避免的会调用失败，比如超时，异常等，<strong>Hystrix</strong> 能够保证在一个依赖出问题的情况下，不会导致整个体系服务失败，避免级联故障，以提高分布式系统的弹性。</p><p>“<strong>断路器</strong>”本身是一种开关装置，当某个服务单元发生故障之后，通过断路器的故障监控 (类似熔断保险丝) ，<strong>向调用方返回一个服务预期的，可处理的备选响应 (FallBack) ，而不是长时间的等待或者抛出调用方法无法处理的异常，这样就可以保证了服务调用方的线程不会被长时间，不必要的占用</strong>，从而避免了故障在分布式系统中的蔓延，乃至雪崩。</p><h3 id="🍑8-3-Hystrix能干嘛？"><a href="#🍑8-3-Hystrix能干嘛？" class="headerlink" title="🍑8.3 Hystrix能干嘛？"></a>🍑8.3 Hystrix能干嘛？</h3><ul><li>服务降级</li><li>服务熔断</li><li>服务限流</li><li>接近实时的监控</li><li>…</li></ul></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
      <tag>spring cloud</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>如何分析开源项目</title>
    <link href="/posts/2022/10/f3d93e9f.html"/>
    <url>/posts/2022/10/f3d93e9f.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><h3 id="JAVA前后端分离开源项目"><a href="#JAVA前后端分离开源项目" class="headerlink" title="JAVA前后端分离开源项目"></a>JAVA前后端分离开源项目</h3><h4 id="1-开源项目下载"><a href="#1-开源项目下载" class="headerlink" title="1.开源项目下载"></a>1.开源项目下载</h4><p>github上clone或者码云上下载</p><p>加载完解压，先不要急着运行！</p><p><strong>观察：</strong></p><p>1.用到了哪些技术（SpringBoot，Vue等）</p><p>2.是否有数据库</p><p>3.你的环境是否匹配（Java，Maven，npm，nodejs，redis….）</p><p>然后再想办法运行</p><h4 id="2-跑起来是第一步"><a href="#2-跑起来是第一步" class="headerlink" title="2.跑起来是第一步"></a>2.跑起来是第一步</h4><p>1.安装数据库，执行SQL</p><p>2.后端项目导入跑起来！</p><p>​    1）后端需要的数据库需要先装</p><p>​    2）是否有swagger，有swagger就是先进入swagger，因为这里面都是接口，通过这个就可以分析了</p><p>​          swagger的标准页面为：localhost:8000&#x2F;swagger-ui.html (这里的默认端口号需要查看后端项目的配置文件)</p><p>​    3）查看配置文件！默认端口号，需要修改为自己的项目和环境地址</p><p>3.前端需要跑起来！</p><p>  前端就是安装依赖（npm…）,启动测试运行，看接口是否正常！</p><h4 id="3-前后端分离项目固定套路"><a href="#3-前后端分离项目固定套路" class="headerlink" title="3.前后端分离项目固定套路"></a>3.前后端分离项目固定套路</h4><p>1.从前段开始分析，打开控制台，点开一个接口，分析一波调用关系</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221015170223.png"></p><p>看到这里的端口号是8090，在后端项目的配置文件中查看也是8090，就说明前后端调用接口一致</p><p>如果前后端的调用接口不一致-如8013 – 8000，怎么操作的，封装了接口请求 ajax axios  request</p><ul><li>找到前端配置</li></ul><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221015172750.png"></p><ul><li>前后端分离项目的重点：找到接口调用关系</li><li>springboot提供服务！前端调用接口！Vue负责渲染页面！</li></ul><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221015173049.png"></p><p>看到这里的 <code>api/auth/login</code>可以在前端代码项目中的api目录（前端项目的套路api目录中装的是后端接口，可以在后端代码中找到一一对应的地址）</p><p>中根据业务含义到对应的js文件中搜索</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221015172629.png"></p><ul><li>找到后端对应的接口</li></ul><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20221015174108.png"></p><ul><li><p>Controller –Service–Dao：你就能看懂了</p></li><li><p>现在从前到后就可以分析了！但是如何渲染到视图上的呢？看前端：搜索一个接口如·<code>api/auth/login</code>看在哪里调用了</p></li><li><p>Vue标准套路</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>视图层<br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  js操作，接口的调用</span><br><span class="language-javascript">  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span>&#123;</span><br><span class="language-javascript">  </span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><br>  页面的样式<br><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><br></code></pre></td></tr></table></figure></li></ul><h4 id="4-如何找到一个好的开源项目"><a href="#4-如何找到一个好的开源项目" class="headerlink" title="4.如何找到一个好的开源项目"></a>4.如何找到一个好的开源项目</h4><p>1.找分类 如：java</p><p>2.看收藏，大家都认为好的东西，活跃度</p><p>3.看价值</p><p>4.根据自身的理解能力去学，如果学起来很吃力，那肯定是找的资料不满足T+1的输入模型（指的是比你现阶段段位高一段的知识）</p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>Spring-SpringMVC-SpringBoot注解</title>
    <link href="/posts/2022/09/8d2b149b.html"/>
    <url>/posts/2022/09/8d2b149b.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><h3 id="创建对象的"><a href="#创建对象的" class="headerlink" title="创建对象的"></a>创建对象的</h3><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-variable">@Controller</span>：放在类的上面，创建控制器对象，注入到容器中<br><br><span class="hljs-variable">@RestController</span>：放在类的上面，创建控制对象，注入到容器中，使用这个注解类的，里面的控制器方法的返回值都是数据<br>              是<span class="hljs-variable">@Controller</span>和<span class="hljs-variable">@ResponseBody</span>的复合注解<br><br><span class="hljs-variable">@Service</span>：放在业务层的实现上面，创建Service对象，注入到容器中<br><br><span class="hljs-variable">@Repository</span>:放在dao层的实现类上面，创建dao对象，放入到容器，没有使用这个注解是因为现在使用MyBatis框架，dao对象是MyBatis通过代理生成的，不需要Repository，所以没有使用<br><br><span class="hljs-variable">@Component</span>：放在类的上面，创建此类的对象，放入容器中<br></code></pre></td></tr></table></figure><h3 id="赋值的"><a href="#赋值的" class="headerlink" title="赋值的"></a>赋值的</h3><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-variable">@Value</span>：简单类型的赋值，例如在属性上面使用<br>        <span class="hljs-variable">@Value</span>(<span class="hljs-string">&quot;李四&quot;</span>)private String name<br>        还可以使用<span class="hljs-variable">@Value</span>，获取配置文件的数量（properties或者yml）<br>        <span class="hljs-variable">@Value</span>(<span class="hljs-string">&quot;$&#123;server.port&#125;&quot;</span>)private Interger port<br>        <br><span class="hljs-variable">@Autowired</span>:引用类型赋值自动注入的，支持byName，byType，默认是byType，放在属性的上面，也可以放在构造方法的上面，推荐是放在构造方法上面<br><br><span class="hljs-variable">@Qualifer</span>：给引用类型赋值，使用byName方式<br>           <span class="hljs-variable">@Autowired</span>，<span class="hljs-variable">@Qualifer</span>都是spring框架提供的<br>           <br><span class="hljs-variable">@Resource</span>：来自jdk中的定义，实现引用类型的自动注入，支持byName，byType，默认是byName，如果byName失败，再使用byType注入，在属性上面使用           <br></code></pre></td></tr></table></figure><h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs xml">@Configuration：放在类的上面，表示这是个配置类，相当于配置文件的作用<br><br>@Bean：放在方法的上面，把方法的返回值对象注入到spring容器中<br><br>@ImportResource：加载其他的xml配置文件，把文件中的对象注入到spring容器<br>@PropertySource：读取其他的properties属性配置文件<br>@ComponentScan：扫描器，指定包名，扫描注解<br>@ResponseBody：放在方法的上面，表示方法的返回值是数据，不是视图<br>@RequestBody：把请求体中的数据，读取出来，转为java对象使用<br>@ControllerAdvice：控制器增强，放在类上面，表示此类提供了方法，可以对Controller增加功能<br>@ExceptionHandler：处理异常的，放在方法的上面<br><br>@Transcational：处理事务的，放在service实现类的public方法上，表示此方法有事务<br><br><br>@SpringBootApplication：放在启动类的上面<br>   包含了@SpringBootConfiguration @EnableAutoConfiguration，@ComponentScan<br><br>MyBatis相关注解：<br>@Mapper：放在类上面，让MyBatis找到接口，创建代理对象<br>@MapperScan：放在主类的上面，指定扫描的包，把这个包中所有接口创建代理对象，对象都注入到容器中<br>@Param：放在dao接口的方法的形参前面，作为命名参数使用的<br><br>Dubbo注解：<br>@DubboService：在提供者端使用的，暴露服务的，放在接口的实现类上面<br>@DubboReference：在消费者端使用的，引用远程服务，放在属性上面使用<br>@EnableDubbo：放在主类上面，表示当前引用启动Dubbo功能<br><br>    <br><br></code></pre></td></tr></table></figure><h3 id="请求"><a href="#请求" class="headerlink" title="请求"></a>请求</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping</span> ：<br>  Spring MVC 的 <span class="hljs-meta">@RequestMapping</span> 注解能够处理 HTTP 请求的方法, 比如 GET, PUT, POST, DELETE 以及 PATCH。 <br>  <br>  派生请求： 处理get请求的映射 —&gt; <span class="hljs-meta">@GetMapping</span> 请求指定的页面信息，并返回实体主体<br>           处理post请求的映射 —&gt; <span class="hljs-meta">@PostMapping</span> 向指定资源提交处理请求（例如提交表单或者上传文件）<br>           处理put请求的映射 —&gt;  <span class="hljs-meta">@PutMapping</span>   更新<br>           处理delete请求的映射 —&gt; <span class="hljs-meta">@DeleteMapping</span> 删除<br><span class="hljs-meta">@RequestMapping(</span><br><span class="hljs-meta">           value = &#123;&quot;/other&quot;,&quot;/other2&quot;,&quot;/other3&quot;&#125;,</span><br><span class="hljs-meta">           method = &#123;RequestMethod.GET,RequestMethod.POST&#125;</span><br><span class="hljs-meta">           params = &#123;&quot;username=Keeling&quot;,&quot;password=123456&quot;&#125;</span><br><span class="hljs-meta">           headers = &#123;&quot;Connection=keep-alive&quot;&#125;</span><br><span class="hljs-meta">         )</span>  <br>  <br>  * <span class="hljs-meta">@RequestMapping</span>的value属性：<br>      <span class="hljs-meta">@RequestMapping(“/other”)</span>等价于<span class="hljs-meta">@RequestMapping(value = “/other”)</span><br>  <br>  * <span class="hljs-meta">@RequestMapping</span>的method属性：<br>       method=RequestMethod.POST<br>  * <span class="hljs-meta">@RequestMapping</span>的params属性:<br>      <span class="hljs-number">1</span>、“param”：表示要求请求映射所匹配的请求必须携带param请求参数<br>      <span class="hljs-number">2</span>、“!param”：表示要求请求映射所匹配的请求不能携带param请求参数<br>      <span class="hljs-number">3</span>、“param=value”：表示要求请求映射所匹配的请求必须携带param请求参数且param=value<br>      <span class="hljs-number">4</span>、“param!=value”：表示要求请求映射所匹配的请求必须携带param请求参数且param!=value<br>     例如 params = &#123;<span class="hljs-string">&quot;username=Keeling&quot;</span>,<span class="hljs-string">&quot;password=123456&quot;</span>&#125;<br>         访问localhost:<span class="hljs-number">8080</span>/mvcDemo/other?username=Keeling&amp;password=<span class="hljs-number">123456</span><br>   * <span class="hljs-meta">@RequestMapping</span>的headers属性:<br>           <br>   * REST风格<br>       <span class="hljs-meta">@RequestMapping(&quot;/other/&#123;username&#125;/&#123;password&#125;&quot;)</span><br>       <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toPath</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable(&quot;username&quot;)</span> String username,</span><br><span class="hljs-params">                            <span class="hljs-meta">@PathVariable(&quot;password&quot;)</span> String password,</span><br><span class="hljs-params">                           )</span>&#123;<br>           System.out.println(<span class="hljs-string">&quot;username=&quot;</span>+username)<br>           System.out.println(<span class="hljs-string">&quot;username=&quot;</span>+password)<br>           <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;other&quot;</span>;<br>         &#125; <br>        访问localhost:<span class="hljs-number">8080</span>/mvcDemo/other/Keeling/<span class="hljs-number">123456</span><br></code></pre></td></tr></table></figure><h3 id="swagger前后端分离"><a href="#swagger前后端分离" class="headerlink" title="swagger前后端分离"></a>swagger前后端分离</h3><p>SpringBoot集成Swagger</p><p>1、新建SpringBoot项目，导入swagger依赖</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--swagger依赖--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.springfox<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>springfox-swagger2<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.9.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-comment">&lt;!--swagger ui--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.springfox<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>springfox-swagger-ui<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.9.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>2、编写swagger的配置文件</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-variable">@Configuration</span><br><span class="hljs-variable">@EnableSwagger2</span><br>public class Swagger2Config &#123;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 创建API应用</span><br><span class="hljs-comment">     * apiInfo() 增加API相关信息</span><br><span class="hljs-comment">     * 通过select()函数返回一个ApiSelectorBuilder实例,用来控制哪些接口暴露给Swagger来展现，</span><br><span class="hljs-comment">     * 指定扫描的包路径来定义指定要建立API的目录。</span><br><span class="hljs-comment">     * @return</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-variable">@Bean</span><br>    public Docket <span class="hljs-built_in">coreApiConfig</span>()&#123;<br>        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">new</span> <span class="hljs-selector-tag">Docket</span>(DocumentationType.SWAGGER_2)<br>                <span class="hljs-selector-class">.apiInfo</span>(<span class="hljs-built_in">adminApiInfo</span>())<br>                <span class="hljs-selector-class">.groupName</span>(<span class="hljs-string">&quot;adminApi&quot;</span>)<br>                <span class="hljs-selector-class">.select</span>()<br>                <span class="hljs-comment">//只显示admin下面的路径</span><br>                <span class="hljs-selector-class">.paths</span>(Predicates.<span class="hljs-built_in">and</span>(PathSelectors.<span class="hljs-built_in">regex</span>(<span class="hljs-string">&quot;/admin/.*&quot;</span>)))<br>                <span class="hljs-selector-class">.build</span>();<br>    &#125;<br><br>    <span class="hljs-selector-tag">private</span> <span class="hljs-selector-tag">ApiInfo</span> <span class="hljs-selector-tag">adminApiInfo</span>()&#123;<br>        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">new</span> <span class="hljs-selector-tag">ApiInfoBuilder</span>()<br>                <span class="hljs-selector-class">.title</span>(<span class="hljs-string">&quot;尚融宝后台管理系统--api文档&quot;</span>)<br>                <span class="hljs-selector-class">.description</span>(<span class="hljs-string">&quot;尚融宝后台管理系统接口描述&quot;</span>)<br>                <span class="hljs-selector-class">.version</span>(<span class="hljs-string">&quot;1.0&quot;</span>)<br>                <span class="hljs-selector-class">.contact</span>(new <span class="hljs-built_in">Contact</span>(<span class="hljs-string">&quot;李燕茹&quot;</span>,<span class="hljs-string">&quot;http://baidu.com&quot;</span>,<span class="hljs-string">&quot;728831102@qq.com&quot;</span>))<br>                <span class="hljs-selector-class">.build</span>();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>3、添加文档内容</p><p>在完成了上述配置后，其实已经可以生产文档内容，但是这样的文档主要针对请求本身，描述的主要来源是函数的命名，通常需要自己增加一些说明来丰富文档内容。</p><p>Swagger使用的注解及其说明：</p><p>@Api：用在类上，说明该类的作用。<br>@ApiOperation：用在方法上。<br>@ApiParam：定义在参数上<br>@ApiResponses：用于表示一组响应<br>@ApiResponse：用在@ApiResponses中，一般用于表达一个错误的响应信息<br>l code：数字，例如400<br>l message：信息，例如”请求参数没填好”<br>l response：抛出异常的类</p><p>@ApiModel：描述一个Model的信息（一般用在请求参数无法使用@ApiImplicitParam注解进行描述的时候）</p><p>l @ApiModelProperty：描述一个model的属性</p><p>@ApiImplicitParams: 用在方法上包含一组参数说明。</p><p>@ApiImplicitParam：用来注解来给方法入参增加说明。</p><p>案例：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//实体类</span><br><span class="hljs-comment">//entity的实体类中可以添加一些自定义设置</span><br><span class="hljs-meta">@Data</span><br><span class="hljs-meta">@EqualsAndHashCode(callSuper = false)</span><br><span class="hljs-meta">@ApiModel(value=&quot;IntegralGrade对象&quot;, description=&quot;积分等级表&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">IntegralGrade</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Serializable</span> &#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">serialVersionUID</span> <span class="hljs-operator">=</span> <span class="hljs-number">1L</span>;<br><br>    <span class="hljs-meta">@ApiModelProperty(value = &quot;编号&quot;)</span><br>      <span class="hljs-meta">@TableId(value = &quot;id&quot;, type = IdType.AUTO)</span><br>    <span class="hljs-keyword">private</span> Long id;<br><br>    <span class="hljs-meta">@ApiModelProperty(value = &quot;积分区间开始&quot;)</span><br>    <span class="hljs-keyword">private</span> Integer integralStart;<br><br>    <span class="hljs-meta">@ApiModelProperty(value = &quot;积分区间结束&quot;)</span><br>    <span class="hljs-keyword">private</span> Integer integralEnd;<br><br>    <span class="hljs-meta">@ApiModelProperty(value = &quot;借款额度&quot;)</span><br>    <span class="hljs-keyword">private</span> BigDecimal borrowAmount;<br><br>    <span class="hljs-meta">@ApiModelProperty(value = &quot;创建时间&quot;)</span><br>    <span class="hljs-keyword">private</span> LocalDateTime createTime;<br><br>    <span class="hljs-meta">@ApiModelProperty(value = &quot;更新时间&quot;)</span><br>    <span class="hljs-keyword">private</span> LocalDateTime updateTime;<br><br>    <span class="hljs-meta">@ApiModelProperty(value = &quot;逻辑删除(1:已删除，0:未删除)&quot;)</span><br>    <span class="hljs-meta">@TableField(&quot;is_deleted&quot;)</span><br>    <span class="hljs-meta">@TableLogic</span><br>    <span class="hljs-keyword">private</span> Boolean deleted;<br>&#125;<br></code></pre></td></tr></table></figure><pre><code class="hljs">//controler层@RestController@RequestMapping(&quot;/admin/integralGrade&quot;)@Api(value = &quot;积分等级管理&quot;)public class IntegralGradeController &#123;  @Resource  private IntegralGradeService integralGradeService;  @GetMapping(&quot;/list&quot;)  @ApiOperation(&quot;积分等级列表&quot;)  public Result listAll()&#123;      List&lt;IntegralGrade&gt; list = integralGradeService.list();      return Result.ok().data(&quot;list&quot;,list);  &#125;  @DeleteMapping(&quot;/remove/&#123;id&#125;&quot;)  @ApiOperation(value = &quot;根据id删除积分等级&quot;,notes = &quot;逻辑删除&quot;)  public Result removeById(      @ApiParam(value = &quot;数据id&quot;,required = true,example = &quot;1&quot;)      @PathVariable Long id)&#123;      boolean result = integralGradeService.removeById(id);      if (result)&#123;          return Result.ok().message(&quot;删除成功&quot;);      &#125;else &#123;          return Result.error().message(&quot;删除失败&quot;);      &#125;  &#125;  @PostMapping(&quot;/save&quot;)  @ApiOperation(value = &quot;新增积分等级&quot;)  public Result save(@ApiParam(value = &quot;积分等级对象&quot;,required = true) @RequestBody IntegralGrade integralGrade)&#123;      boolean result = integralGradeService.save(integralGrade);      if (result)&#123;          return Result.ok().message(&quot;新增成功&quot;);      &#125;else &#123;          return Result.error().message(&quot;新增失败&quot;);      &#125;  &#125;  @PutMapping(&quot;/updateById&quot;)  @ApiOperation(value = &quot;根据id修改积分等级&quot;)  public Result updateById(@ApiParam(value = &quot;积分等级对象&quot;,required = true) @RequestBody IntegralGrade integralGrade)&#123;      boolean result = integralGradeService.updateById(integralGrade);      if (result)&#123;          return Result.ok().message(&quot;修改成功&quot;);      &#125;else &#123;          return Result.error().message(&quot;修改失败&quot;);      &#125;  &#125;  @GetMapping(&quot;/getById/&#123;id&#125;&quot;)  @ApiOperation(value = &quot;根据id查询积分等级&quot;)  public Result getById(@ApiParam(value = &quot;数据id&quot;,required = true,example = &quot;1&quot;) @PathVariable Long id)&#123;      IntegralGrade result = integralGradeService.getById(id);      if (result == null)&#123;          return Result.error().message(&quot;查询失败&quot;);      &#125;else &#123;          return Result.ok().data(&quot;integralGrade&quot;,result);      &#125;  &#125;  &#125;  </code></pre><p>4.swagger只部署在测试环境，生产环境不部署（暴露接口容易被攻击）</p><p>参考：swagger使用教程 <a href="https://blog.csdn.net/YR_112233/article/details/122630446">https://blog.csdn.net/YR_112233/article/details/122630446</a></p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
      <tag>spring</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>数据库系统原理与实现-华东师大课程笔记</title>
    <link href="/posts/2022/09/58a4e4e5.html"/>
    <url>/posts/2022/09/58a4e4e5.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><p>Leveldb (总共两万行代码，很值得做系统的去学)</p><p><strong>做系统需要考虑到：</strong></p><p>性能</p><p>一致性（事务，副本，）</p><p>容错</p><p>kvs的数据结构（B+树，log-structure是顺序写（ 例如LSM tree），）</p><p>B link tree 是B+树的升级版 在并发上会有好处</p><p>缓冲区的需求</p><p>1.块是否空-bitmap</p><p>2.-hash表</p><p>3.淘汰策略-LRU，FIFO —&gt;second change</p><p>写放大（想要写的东西和真正在系统中要写的东西）</p><p>随机写和顺序写</p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    
    <tags>
      
      <tag>DB</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>计算机视觉-华东师大课程笔记</title>
    <link href="/posts/2022/09/fec64c0f.html"/>
    <url>/posts/2022/09/fec64c0f.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><h3 id="第一章-概述"><a href="#第一章-概述" class="headerlink" title="第一章 概述"></a>第一章 概述</h3><h4 id="1-什么是计算机视觉"><a href="#1-什么是计算机视觉" class="headerlink" title="1.什么是计算机视觉"></a>1.什么是计算机视觉</h4><p>采集来的图像或者视频，对场景进行识别和表达，理解感知分析的能力</p><h4 id="2-人类感知与计算机视觉"><a href="#2-人类感知与计算机视觉" class="headerlink" title="2. 人类感知与计算机视觉"></a>2. 人类感知与计算机视觉</h4><p>人脑解析</p><p>计算机视觉算法推断景物含义</p><p>图像处理  计算机视觉  图形学(3D重建)</p><h3 id="第二章-图像处理相关基础"><a href="#第二章-图像处理相关基础" class="headerlink" title="第二章 图像处理相关基础"></a>第二章 图像处理相关基础</h3><p>查阅文献关键词</p><p>inpainting 图像修复</p><p>Multi-level </p><p>Multi-scale 多尺度</p><p>image pyramid 图像金字塔</p><p>Super-resolution 超分辨率</p><p>Correspondence 对应点</p><h5 id="常见预处理："><a href="#常见预处理：" class="headerlink" title="常见预处理："></a>常见预处理：</h5><ul><li>灰度化处理：Y &#x3D; 0.299R+xxG+xxB</li></ul><p>​    分量，3通道分解成3个灰度图</p><ul><li><p>几何变换处理</p><p>旋转，移动</p></li><li><p>图像的增强</p><p>降燥，暗光增强</p></li></ul><h5 id="图像的卷积"><a href="#图像的卷积" class="headerlink" title="图像的卷积"></a>图像的卷积</h5><p>图像金字塔</p><p>最底层最清晰，越高越模糊</p><h3 id="第三章-图像的特征"><a href="#第三章-图像的特征" class="headerlink" title="第三章 图像的特征"></a>第三章 图像的特征</h3><p>image feature 图像特征</p><p>edge feature 边缘特征</p><p>image contour 图像轮廓</p><p>Image shape</p><p>feature tracking特征跟踪</p><h3 id="第四章-图像对齐问题"><a href="#第四章-图像对齐问题" class="headerlink" title="第四章 图像对齐问题"></a>第四章 图像对齐问题</h3><p>Image matching</p><p>image registration图像配准</p><p>Image stitching图像拼接</p><h3 id="第五章-二值图像分析"><a href="#第五章-二值图像分析" class="headerlink" title="第五章 二值图像分析"></a>第五章 二值图像分析</h3><p>pixed-wise</p><p>binary image    </p><p>binary image analysis </p><h3 id="第六章-纹理特征及分析"><a href="#第六章-纹理特征及分析" class="headerlink" title="第六章  纹理特征及分析"></a>第六章  纹理特征及分析</h3><p>rigid</p><p>动态 （风，蜡烛）</p><p>Style-transferring 风格迁移</p><p>patch</p><p>texture analysis</p><h3 id="第7章-图像分割"><a href="#第7章-图像分割" class="headerlink" title="第7章 图像分割"></a>第7章 图像分割</h3><p>关键词：image segmentation</p><p>​        snake</p><p>​        level set</p><h3 id="第8章-摄像机模型与多视几何"><a href="#第8章-摄像机模型与多视几何" class="headerlink" title="第8章 摄像机模型与多视几何"></a>第8章 摄像机模型与多视几何</h3><p> Camera structure</p><p> 3D Reconstruction</p><h3 id="第9章-三维重建"><a href="#第9章-三维重建" class="headerlink" title="第9章 三维重建"></a>第9章 三维重建</h3><p>3D reconstruction，CNN</p><p> point cloud</p><p> mesh</p><h3 id="第10章-光流计算"><a href="#第10章-光流计算" class="headerlink" title="第10章 光流计算"></a>第10章 光流计算</h3><p>optical flow</p><h3 id="第11章-目标识别"><a href="#第11章-目标识别" class="headerlink" title="第11章 目标识别"></a>第11章 目标识别</h3><p>object recognition，CNN</p><p>Kalman filter</p><h3 id="第12章-运动跟踪"><a href="#第12章-运动跟踪" class="headerlink" title="第12章 运动跟踪"></a>第12章 运动跟踪</h3><p>dynamic tracking</p><p>correlation filter,tracking</p><h3 id="第13章-深度学习基础"><a href="#第13章-深度学习基础" class="headerlink" title="第13章 深度学习基础"></a>第13章 深度学习基础</h3><p>CNN,deep learning</p><h3 id="第14章-智能图像增强技术"><a href="#第14章-智能图像增强技术" class="headerlink" title="第14章 智能图像增强技术"></a>第14章 智能图像增强技术</h3><p>denoise,CNN</p><h3 id="第15章-智能图像彩色化处理技术"><a href="#第15章-智能图像彩色化处理技术" class="headerlink" title="第15章 智能图像彩色化处理技术"></a>第15章 智能图像彩色化处理技术</h3><p>colorization</p><h3 id="论文阅读"><a href="#论文阅读" class="headerlink" title="论文阅读"></a>论文阅读</h3><p>关键字搜索到500篇怎么看？</p><ul><li><p>第一遍 筛选 你感兴趣的 怎么筛选？快速读 </p><p> 1.看标题</p><p> 2.看摘要中间部分</p><p> 3.introduction 的末尾部分 in this work, our research等关键字 描述的</p><p> 4.架构图 </p><p> 5.实验结果</p></li><li><p>第二遍 上面筛选有思路了</p></li></ul><p>​    结合自己学到的知识点 想到了新思路</p><p>新-查顶级期刊（CCF）</p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    
    <tags>
      
      <tag>CV</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>IDEA里运行代码没问题but生成jar运行报java.lang.NoClassDefFoundError错误</title>
    <link href="/posts/2022/09/f74c061a.html"/>
    <url>/posts/2022/09/f74c061a.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><h3 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h3><p>在IDEA中运行程序成功，但是通过maven的打包package生成jar包后调用报错如下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java">Caused by: java.lang.ClassNotFoundException: org.slf4j.LoggerFactory<br>at java.net.URLClassLoader.findClass(URLClassLoader.java:<span class="hljs-number">381</span>)<br>at java.lang.ClassLoader.loadClass(ClassLoader.java:<span class="hljs-number">424</span>)<br>at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:<span class="hljs-number">338</span>)<br>at java.lang.ClassLoader.loadClass(ClassLoader.java:<span class="hljs-number">357</span>)<br></code></pre></td></tr></table></figure><p>搜索一圈发现是依赖的jar包没有打进去。</p><h4 id="问题排查"><a href="#问题排查" class="headerlink" title="问题排查"></a>问题排查</h4><p>1.首先排除没有添加依赖（检查pom.xml文件）是否有依赖缺失</p><p>如果是没有添加依赖IDEA里面运行程序都会跑不成功。如下图依赖没缺失</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20220922164353.png"></p><p>2.检查IDEA中Artfacts中的依赖</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20220922171130.png"></p><p>在Artfacts中发现没有依赖的slf4j</p><h3 id="问题解决"><a href="#问题解决" class="headerlink" title="问题解决"></a>问题解决</h3><p>Artfacts中添加依赖</p><p>在Project structure中选择左侧Artifacts，点击“+”号，弹出窗口中选择JAR–&gt;From modules with dependencies。</p><p>配置包含main函数类和生成jar包的MF目录，配置完点击OK按钮就行。注意：MF文件目录不要用默认目录，使用默认，我的生成jar就出错了，无法运行。</p><p>配置完后点击“OK按钮”确认。</p><p>配置完毕后，需要编译，编译步骤如下图：</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20220923205741.png"></p><p>最后就可以到jar生成目录看到所生成的jar包了</p><p>生成的可执行jar在输出目录里。使用：java -jar *.jar命令执行jar包程序。</p><h3 id=""><a href="#" class="headerlink" title=""></a></h3></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>spring框架-AOP切面编程</title>
    <link href="/posts/2022/09/2a184e04.html"/>
    <url>/posts/2022/09/2a184e04.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><h3 id="AOP-Aspect-Orient-Programming-面向切面编程"><a href="#AOP-Aspect-Orient-Programming-面向切面编程" class="headerlink" title="AOP(Aspect Orient Programming),面向切面编程"></a>AOP(Aspect Orient Programming),面向切面编程</h3><p>切面：公共的，通用的，重复的功能成为切面，面向切面编程就是将切面提取出来，单独开发，在需要的时候织入。</p><h3 id="手写AOP框架"><a href="#手写AOP框架" class="headerlink" title="手写AOP框架"></a>手写AOP框架</h3><p>​    业务：图书购买业务</p><p>​    切面：事物</p><p>   1）第一个版本：业务和切面紧耦合在一起，没有拆分</p><p>   2）第二个版本：使用子类代理的方式拆分业务和切面</p><p>   3）第三个版本：使用静态代理拆分业务和切面，业务和业务接口已分开，此时切面紧耦合在业务中</p><p>   4）第四个版本：使用静态代理拆分业务和业务接口，切面和切面接口</p><p>   5）第五个版本：使用动态代理完成第四个版本的优化</p><h4 id="第一个版本：业务和切面紧耦合在一起，没有拆分"><a href="#第一个版本：业务和切面紧耦合在一起，没有拆分" class="headerlink" title="第一个版本：业务和切面紧耦合在一起，没有拆分"></a>第一个版本：业务和切面紧耦合在一起，没有拆分</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BookServiceImpl</span>&#123;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">buy</span><span class="hljs-params">()</span>&#123;<br>     <span class="hljs-keyword">try</span>&#123;<br>     System.out.println(<span class="hljs-string">&quot;事务开启。。。。&quot;</span>);<br>     System.out.println(<span class="hljs-string">&quot;图书购买业务功能实现。。。。&quot;</span>);<br>     System.out.println(<span class="hljs-string">&quot;事务提交。。。。&quot;</span>);<br>      &#125;<span class="hljs-keyword">catch</span>(Exception e)&#123;<br>          System.out.println(<span class="hljs-string">&quot;事务回滚。。。。&quot;</span>);<br>     &#125;<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="第二个版本：使用子类代理的方式拆分业务和切面"><a href="#第二个版本：使用子类代理的方式拆分业务和切面" class="headerlink" title="第二个版本：使用子类代理的方式拆分业务和切面"></a>第二个版本：使用子类代理的方式拆分业务和切面</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BookServiceImpl</span>&#123;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">buy</span><span class="hljs-params">()</span>&#123;<br>     System.out.println(<span class="hljs-string">&quot;图书购买业务功能实现。。。。&quot;</span>);<br>   &#125;<br>&#125;<br><br><span class="hljs-comment">//子类就是代理类，将父类的图书购买功能添加事务切面</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SubBookServiceImpl</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BookServiceImpl</span>&#123;<br>  <span class="hljs-meta">@Override</span><br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">buy</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-keyword">try</span>&#123;<br>       <span class="hljs-comment">// 事务切面</span><br>      System.out.println(<span class="hljs-string">&quot;事务开启。。。。&quot;</span>);<br>       <span class="hljs-comment">// 主业务实现</span><br>      <span class="hljs-built_in">super</span>.buy();<br>       <span class="hljs-comment">// 事务切面  </span><br>      System.out.println(<span class="hljs-string">&quot;事务提交。。。。&quot;</span>);<br>    &#125;<span class="hljs-keyword">catch</span>(Exception e)&#123;<br>          System.out.println(<span class="hljs-string">&quot;事务回滚。。。。&quot;</span>);<br>     &#125;<br>  &#125;<br> <br>&#125;<br></code></pre></td></tr></table></figure><h4 id="第三个版本：使用静态代理拆分业务和切面，业务和业务接口已分开，此时切面紧耦合在业务中"><a href="#第三个版本：使用静态代理拆分业务和切面，业务和业务接口已分开，此时切面紧耦合在业务中" class="headerlink" title="第三个版本：使用静态代理拆分业务和切面，业务和业务接口已分开，此时切面紧耦合在业务中"></a>第三个版本：使用静态代理拆分业务和切面，业务和业务接口已分开，此时切面紧耦合在业务中</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Service</span>&#123;<br>  <span class="hljs-comment">//规定业务功能</span><br>  <span class="hljs-keyword">void</span> <span class="hljs-title function_">buy</span><span class="hljs-params">()</span>;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BookSeviceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Service</span>&#123;<br>  <span class="hljs-meta">@Override</span><br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">buy</span><span class="hljs-params">()</span>&#123;<br>    System.out.println(<span class="hljs-string">&quot;图书购买业务功能实现。。。。&quot;</span>);<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProductServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Service</span>&#123;<br>  <span class="hljs-meta">@Override</span><br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">buy</span><span class="hljs-params">()</span>&#123;<br>    System.out.println(<span class="hljs-string">&quot;商品购买业务功能实现。。。。&quot;</span>);<br>  &#125;  <br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Agent</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Service</span>&#123;<br>  <span class="hljs-comment">//设计成员变量的类型为接口，为了灵活切换目标对象</span><br>  <span class="hljs-keyword">public</span> Service target;<br>  <br>  <span class="hljs-comment">//使用构造方法传入目标对象</span><br>  <span class="hljs-keyword">public</span> <span class="hljs-title function_">Agent</span><span class="hljs-params">(Service target)</span>&#123;<br>    <span class="hljs-built_in">this</span>.target = target;<br>  &#125;<br>  <br>  <span class="hljs-meta">@Override</span><br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">buy</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-keyword">try</span>&#123;<br>       <span class="hljs-comment">// 切面功能</span><br>      System.out.println(<span class="hljs-string">&quot;事务开启。。。。&quot;</span>);<br>       <span class="hljs-comment">// 业务功能</span><br>      <span class="hljs-built_in">super</span>.buy();<br>       <span class="hljs-comment">// 切面功能  </span><br>      System.out.println(<span class="hljs-string">&quot;事务提交。。。。&quot;</span>);<br>    &#125;<span class="hljs-keyword">catch</span>(Exception e)&#123;<br>          System.out.println(<span class="hljs-string">&quot;事务回滚。。。。&quot;</span>);<br>    &#125;<br>  &#125;<br>&#125;<br><br><br># Test<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Mytest</span>&#123;<br>  <span class="hljs-meta">@Test</span><br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test</span><span class="hljs-params">()</span>&#123;<br><span class="hljs-type">Service</span> <span class="hljs-variable">agent</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Agent</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">BookSeviceImpl</span>());<br>    agent.buy();<br>    <br>    <span class="hljs-type">Service</span> <span class="hljs-variable">agent</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Agent</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ProductServiceImpl</span>());<br>    agent.buy();<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="第四个版本：使用静态代理拆分业务和业务接口，切面和切面接口"><a href="#第四个版本：使用静态代理拆分业务和业务接口，切面和切面接口" class="headerlink" title="第四个版本：使用静态代理拆分业务和业务接口，切面和切面接口"></a>第四个版本：使用静态代理拆分业务和业务接口，切面和切面接口</h4><p>上个版本只实现了事务切面，如果要换成日志切面实现呢？</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><code class="hljs java">###########################业务接口#####################<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Service</span>&#123;<br>  <span class="hljs-comment">//规定业务功能</span><br>  <span class="hljs-keyword">void</span> <span class="hljs-title function_">buy</span><span class="hljs-params">()</span>;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BookSeviceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Service</span>&#123;<br>  <span class="hljs-meta">@Override</span><br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">buy</span><span class="hljs-params">()</span>&#123;<br>    System.out.println(<span class="hljs-string">&quot;图书购买业务功能实现。。。。&quot;</span>);<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProductServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Service</span>&#123;<br>  <span class="hljs-meta">@Override</span><br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">buy</span><span class="hljs-params">()</span>&#123;<br>    System.out.println(<span class="hljs-string">&quot;商品购买业务功能实现。。。。&quot;</span>);<br>  &#125;  <br>&#125;<br><br>#####################切面接口AOP########################<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">AOP</span>&#123;<br>  <span class="hljs-keyword">default</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">before</span><span class="hljs-params">()</span>&#123;&#125;;<br>  <span class="hljs-keyword">default</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">after</span><span class="hljs-params">()</span>&#123;&#125;;<br>  <span class="hljs-keyword">default</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">exception</span><span class="hljs-params">()</span>&#123;&#125;;<br>&#125;  <br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LogAop</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">AOP</span>&#123;<br>  <span class="hljs-meta">@Override</span><br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">before</span><span class="hljs-params">()</span>&#123;<br>     System.out.println(<span class="hljs-string">&quot;前置日志输出。。。。&quot;</span>);<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TransAop</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">AOP</span>&#123;<br>  <span class="hljs-meta">@Override</span><br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">before</span><span class="hljs-params">()</span>&#123;<br>     System.out.println(<span class="hljs-string">&quot;事务开启。。。。&quot;</span>);<br>  &#125;<br><br>  <span class="hljs-meta">@Override</span><br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">after</span><span class="hljs-params">()</span>&#123;<br>     System.out.println(<span class="hljs-string">&quot;事务提交。。。。&quot;</span>);<br>  &#125;  <br> <br>  <span class="hljs-meta">@Override</span><br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">exception</span><span class="hljs-params">()</span>&#123;<br>     System.out.println(<span class="hljs-string">&quot;事务回滚。。。。&quot;</span>);<br>  &#125;    <br>&#125;<br><br>#####################代理对象Agent########################<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Agent</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Service</span>&#123;<br>  <span class="hljs-comment">//传入业务对象，切面对象</span><br>  Service target;<br>  Aop aop;<br>  <br>  <span class="hljs-comment">//使用构造方法初始化业务对象和切面对象</span><br>  <span class="hljs-keyword">public</span> <span class="hljs-title function_">Agent</span><span class="hljs-params">(Service target, AOP aop)</span>&#123;<br>    <span class="hljs-built_in">this</span>.target = target;<br>    <span class="hljs-built_in">this</span>.aop = aop;<br>  &#125;<br>  <br>  <span class="hljs-meta">@Override</span><br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">buy</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-keyword">try</span>&#123;<br>      <span class="hljs-comment">//切面</span><br>      aop.before(); <span class="hljs-comment">//事务 日志</span><br>      <span class="hljs-comment">//业务</span><br>      target.buy(); <span class="hljs-comment">// 图书 商品</span><br>      <span class="hljs-comment">//切面</span><br>      aop.after();  <span class="hljs-comment">// 事务</span><br>    &#125;<span class="hljs-keyword">catch</span>(Exception e)&#123;<br>      aop.exception();<br>    &#125;<br>  &#125;<br>&#125;<br><br><br>## test<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Mytest</span>&#123;<br>  <span class="hljs-meta">@Test</span><br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> test&#123;<br>   <span class="hljs-type">Serive</span> <span class="hljs-variable">agent</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Agent</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">BookServiceImpl</span>(),<span class="hljs-keyword">new</span> <span class="hljs-title class_">LogAop</span>());<br>   agent.buy();<br>    <br>   <span class="hljs-type">Serive</span> <span class="hljs-variable">agent</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Agent</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ProductServiceImpl</span>(),<span class="hljs-keyword">new</span>            <span class="hljs-title class_">TransAop</span>());<br>   agent.buy();    <br>  &#125;<br>&#125;<br><br>## 切入多个切面<br>## test<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Mytest</span>&#123;<br>  <span class="hljs-meta">@Test</span><br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> test&#123;<br>   <span class="hljs-type">Serive</span> <span class="hljs-variable">agent</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Agent</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">BookServiceImpl</span>(),<span class="hljs-keyword">new</span> <span class="hljs-title class_">LogAop</span>());<br>   agent.buy();<br>    <br>   <span class="hljs-type">Serive</span> <span class="hljs-variable">agent1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Agent</span>(agent,<span class="hljs-keyword">new</span> <span class="hljs-title class_">TransAop</span>());<br>   agent1.buy();    <br>  &#125;<br>&#125;  <br></code></pre></td></tr></table></figure><h4 id="第五个版本：使用动态代理完成第四个版本的优化"><a href="#第五个版本：使用动态代理完成第四个版本的优化" class="headerlink" title="第五个版本：使用动态代理完成第四个版本的优化"></a>第五个版本：使用动态代理完成第四个版本的优化</h4><p>业务功能的增加</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><code class="hljs java">###########################业务接口#####################<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Service</span>&#123;<br>  <span class="hljs-comment">//规定业务功能</span><br>  <span class="hljs-keyword">void</span> <span class="hljs-title function_">buy</span><span class="hljs-params">()</span>;<br>  <br>  <span class="hljs-comment">//增加有参返回值的方法测试代理功能</span><br>  <span class="hljs-keyword">default</span> String <span class="hljs-title function_">show</span><span class="hljs-params">(<span class="hljs-type">int</span> age)</span>&#123;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>&#125;;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BookSeviceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Service</span>&#123;<br>  <span class="hljs-meta">@Override</span><br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">buy</span><span class="hljs-params">()</span>&#123;<br>    System.out.println(<span class="hljs-string">&quot;图书购买业务功能实现。。。。&quot;</span>);<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProductServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Service</span>&#123;<br>  <span class="hljs-meta">@Override</span><br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">buy</span><span class="hljs-params">()</span>&#123;<br>    System.out.println(<span class="hljs-string">&quot;商品购买业务功能实现。。。。&quot;</span>);<br>  &#125;  <br>  <br>  <span class="hljs-meta">@Override</span><br>  <span class="hljs-keyword">public</span> String <span class="hljs-title function_">show</span><span class="hljs-params">(<span class="hljs-type">int</span> age)</span>&#123;<br>    System.out.println(<span class="hljs-string">&quot;这是show()方法调用。。。。&quot;</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;abcd&quot;</span>;<br>  &#125; <br>&#125;<br><br>#####################切面接口AOP########################<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">AOP</span>&#123;<br>  <span class="hljs-keyword">default</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">before</span><span class="hljs-params">()</span>&#123;&#125;;<br>  <span class="hljs-keyword">default</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">after</span><span class="hljs-params">()</span>&#123;&#125;;<br>  <span class="hljs-keyword">default</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">exception</span><span class="hljs-params">()</span>&#123;&#125;;<br>&#125;  <br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LogAop</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">AOP</span>&#123;<br>  <span class="hljs-meta">@Override</span><br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">before</span><span class="hljs-params">()</span>&#123;<br>     System.out.println(<span class="hljs-string">&quot;前置日志输出。。。。&quot;</span>);<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TransAop</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">AOP</span>&#123;<br>  <span class="hljs-meta">@Override</span><br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">before</span><span class="hljs-params">()</span>&#123;<br>     System.out.println(<span class="hljs-string">&quot;事务开启。。。。&quot;</span>);<br>  &#125;<br><br>  <span class="hljs-meta">@Override</span><br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">after</span><span class="hljs-params">()</span>&#123;<br>     System.out.println(<span class="hljs-string">&quot;事务提交。。。。&quot;</span>);<br>  &#125;  <br> <br>  <span class="hljs-meta">@Override</span><br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">exception</span><span class="hljs-params">()</span>&#123;<br>     System.out.println(<span class="hljs-string">&quot;事务回滚。。。。&quot;</span>);<br>  &#125;    <br>&#125;<br><br>####################动态代理####################<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProxyFactory</span>&#123;<br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Object <span class="hljs-title function_">getAgent</span><span class="hljs-params">(Service target,Aop aop)</span>&#123;<br>    <span class="hljs-comment">//返回的是生成的动态代理对象</span><br>    <span class="hljs-keyword">return</span> Proxy.newProxyInstance(<br>       <span class="hljs-comment">//类加载器</span><br>      target.getClass().getClassLoader(),<br>      <span class="hljs-comment">// 目标对象实现的所有的接口</span><br>      target.getClass().getInterfaces(),<br>      <span class="hljs-comment">//代理功能实现</span><br>      <span class="hljs-keyword">new</span> <span class="hljs-title class_">InvocationHandler</span>()&#123;<br>        <span class="hljs-meta">@Override</span><br>        <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">invoke</span><span class="hljs-params">(</span><br><span class="hljs-params">               //生成的代理对象</span><br><span class="hljs-params">               Object proxy</span><br><span class="hljs-params">               //正在被调用的目标方法buy()</span>,show()<br>               ,Method method<br>               <span class="hljs-comment">//目标方法的参数</span><br>               ,Object[] args) <span class="hljs-keyword">throws</span> Throwable&#123;<br>            <span class="hljs-comment">//切面</span><br>            aop.before();<span class="hljs-comment">//事务 日志</span><br>            <span class="hljs-comment">//业务</span><br>            <span class="hljs-type">Object</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> method.invoke(target,args);<br>            <span class="hljs-comment">//切面</span><br>            aop.after();<br>            <span class="hljs-comment">//切面</span><br>          <span class="hljs-keyword">return</span> obj;<span class="hljs-comment">//目标方法的返回值</span><br>        &#125;<br>      &#125;<br>    )<br>  &#125;    <br>&#125;<br><br>#test<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Mytest</span>&#123;<br>  <span class="hljs-meta">@Test</span><br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">Service</span> <span class="hljs-variable">agent</span> <span class="hljs-operator">=</span> ProxyFactory.getAgent(<span class="hljs-keyword">new</span> <span class="hljs-title class_">BookServiceImpl</span>(),<span class="hljs-keyword">new</span> <span class="hljs-title class_">TransAop</span>());<br>    agent.buy();<br>    <span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> agent.show(<span class="hljs-number">22</span>);<br>  &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><hr><h3 id="AspectJ框架"><a href="#AspectJ框架" class="headerlink" title="AspectJ框架"></a>AspectJ框架</h3><p>AspectJ中常用的通知有几种类型：</p><p>0）@Aspect:作用是把当前类标识为一个切面供容器读取</p><p>1）前置通知@Before</p><p>2）后置通知@AfterReturning</p><p>3）环绕通知@Around</p><p>4）最终通知@After</p><p>5）定义切入点@Pointcut</p><p> 使用@Pointcut注解，创建一个空方法，此方法的名称就是别名</p><p>@Pointcut：Pointcut是植入Advice的触发条件。每个Pointcut的定义包括2部分，一是表达式，二是方法签名。方法签名必须是 public及void型。可以将Pointcut中的方法看作是一个被Advice引用的助记符，因为表达式不直观，因此我们可以通过方法签名的方式为 此表达式命名。因此Pointcut中的方法只需要方法签名，而不需要在方法体内编写实际代码。</p><p>使用pointcut代码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> SomeServiceImpl <span class="hljs-keyword">implements</span> <span class="hljs-title class_">SomeService</span>&#123;<br>  <span class="hljs-meta">@Override</span><br>  <span class="hljs-keyword">public</span> String <span class="hljs-title function_">doSome</span><span class="hljs-params">(String name,<span class="hljs-type">int</span> age)</span>&#123;<br>     System.out.println(<span class="hljs-string">&quot;doSome业务方法执行.......&quot;</span>+name);<br>     <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;abcd&quot;</span>;<br>  &#125;<br>&#125;<br><br><br><br><span class="hljs-meta">@Aspect</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyAspect</span>&#123;<br>  <span class="hljs-comment">/*</span><br><span class="hljs-comment">  前置通知切面方法规范</span><br><span class="hljs-comment">  1）访问权限是public</span><br><span class="hljs-comment">  2）方法的返回值是void</span><br><span class="hljs-comment">  3）方法名称自定义</span><br><span class="hljs-comment">  4）方法没有参数，如果有也只能是JoinPoint类型</span><br><span class="hljs-comment">  5）必须使用@Before注解来声明切入的时机</span><br><span class="hljs-comment">     参数：value 指定切入点表达式</span><br><span class="hljs-comment">  */</span><br>  <span class="hljs-meta">@Before(value = &quot;execution(public String com.yuting.SomeSeriveImpl.dosome(String,int))&quot;)</span><br>  # <span class="hljs-meta">@Around(value=&quot;myCut()&quot;)</span><br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">myBefore</span><span class="hljs-params">()</span>&#123;<br>    System.out.println(<span class="hljs-string">&quot;切面方法中的前置通知&quot;</span>);<br>  &#125;<br>  <span class="hljs-comment">/*</span><br><span class="hljs-comment">  后置通知切面方法规范</span><br><span class="hljs-comment">  1）访问权限是public</span><br><span class="hljs-comment">  2）方法的返回值是void</span><br><span class="hljs-comment">  3）方法名称自定义</span><br><span class="hljs-comment">  4）方法没有参数，如果有也只能是JoinPoint类型</span><br><span class="hljs-comment">  5）必须使用@After注解表明是最终通知</span><br><span class="hljs-comment">     参数：value 指定切入点表达式</span><br><span class="hljs-comment">  */</span><br>  <span class="hljs-meta">@After(value=&quot;execution(* com.yuting.s01.*.*(..))&quot;)</span><br>  # <span class="hljs-meta">@Around(value=&quot;myCut()&quot;)</span><br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">myAfter</span><span class="hljs-params">()</span>&#123;<br>    System.out.println(<span class="hljs-string">&quot;切面方法中的最终通知&quot;</span>);<br>  &#125;<br>  <br>  <br>  <span class="hljs-meta">@AfterReturning(value=&quot;execution(* com.yuting.s01.*.*(..))&quot;,returning=&quot;obj&quot;)</span><br>  # <span class="hljs-meta">@Around(value=&quot;myCut()&quot;)</span><br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">myAfterReturning</span><span class="hljs-params">(Object obj)</span>&#123;<br>    System.out.println(<span class="hljs-string">&quot;后置通知的功能&quot;</span>);<br>  &#125;<br>  <br>  <span class="hljs-comment">/*</span><br><span class="hljs-comment">  环绕通知切面方法规范</span><br><span class="hljs-comment">  1）访问权限是public</span><br><span class="hljs-comment">  2）方法的返回值是目标方法的返回值</span><br><span class="hljs-comment">  3）方法名称自定义</span><br><span class="hljs-comment">  4）方法有参数，此参数就是目标方法</span><br><span class="hljs-comment">  5）必须使用@Around注解表明是环绕通知</span><br><span class="hljs-comment">     参数：value 指定切入点表达式</span><br><span class="hljs-comment">  */</span>  <br>  <span class="hljs-meta">@Around(value=&quot;execution(* com.yuting.s01.*.*(...))&quot;)</span><br>  # <span class="hljs-meta">@Around(value=&quot;myCut()&quot;)</span><br>  <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">myAround</span><span class="hljs-params">(ProceedingJoinPoint pjp)</span> <span class="hljs-keyword">throws</span> Throwable&#123;<br>    System.out.println(<span class="hljs-string">&quot;环绕通知中的前置通知功能&quot;</span>);<br>    <span class="hljs-type">Object</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> pjp.proceed(pjp.getArgs());<br>    System.out.println(<span class="hljs-string">&quot;环绕通知中的后置通知功能&quot;</span>);<br>    <span class="hljs-keyword">return</span> obj.toString().toUpperCase(); # 改变了目标方法的返回值<br>  &#125;<br>&#125;<br><br>  <span class="hljs-meta">@PointCut(value = &quot;execution(* com.yuting.s01.*.*(...))&quot;)</span><br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">myCut</span><span class="hljs-params">()</span>&#123;<br><br>  &#125;<br> <br><br>注解配置<br>applicationContext.xml<br>&lt;!--基于注解的访问要添加包扫描--&gt;  <br> &lt;context:component-scan base-<span class="hljs-keyword">package</span>=<span class="hljs-string">&quot;com.yuting&quot;</span>&gt;&lt;/context:component-scan&gt; <br>&lt;!--绑定--&gt;  <br>&lt;aop:aspectj-autoproxy&gt;&lt;/aop:aspectj-autoproxy&gt;<br>   <br>   <br></code></pre></td></tr></table></figure><p>使用annotation代码：</p><p>@annotation: 元注解的作用就是负责注解其他注解。Java5.0定义了4个标准的meta-annotation类型，它们被用来提供对其它 annotation类型作说明。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-number">1</span>.<span class="hljs-meta">@Target</span><br>说明了Annotation所修饰的对象范围：Annotation可被用于 packages、types（类、接口、枚举、Annotation类型）、类型成员（方法、构造方法、成员变量、枚举值）、方法参数和本地变量（如循环变量、<span class="hljs-keyword">catch</span>参数）。在Annotation类型的声明中使用了target可更加明晰其修饰的目标<br><br><span class="hljs-number">2</span>.<span class="hljs-meta">@Retention</span><br>  <span class="hljs-meta">@Retention</span>定义了该Annotation被保留的时间长短==：某些Annotation仅出现在源代码中，而被编译器丢弃；而另一些却被编译在<span class="hljs-class"><span class="hljs-keyword">class</span>文件中；编译在<span class="hljs-title">class</span>文件中的<span class="hljs-title">Annotation</span>可能会被虚拟机忽略，而另一些在<span class="hljs-title">class</span>被装载时将被读取（请注意并不影响<span class="hljs-title">class</span>的执行，因为<span class="hljs-title">Annotation</span>与<span class="hljs-title">class</span>在使用上是被分离的）。使用这个<span class="hljs-title">meta</span>-<span class="hljs-title">Annotation</span>可以对 <span class="hljs-title">Annotation</span>的“生命周期”限制。</span><br><span class="hljs-class"></span><br><span class="hljs-class">3.@<span class="hljs-title">Documented</span></span><br><span class="hljs-class">  @<span class="hljs-title">Documented</span>：用于描述其它类型的<span class="hljs-title">annotation</span>应该被作为被标注的程序成员的公共<span class="hljs-title">API</span>，因此可以被例如<span class="hljs-title">javadoc</span>此类的工具文档化。<span class="hljs-title">Documented</span>是一个标记注解，没有成员</span><br><span class="hljs-class">  </span><br><span class="hljs-class">4.@<span class="hljs-title">Inherited</span></span><br><span class="hljs-class">  @<span class="hljs-title">Inherited</span> ：元注解是一个标记注解，@<span class="hljs-title">Inherited</span>阐述了某个被标注的类型是被继承的。如果一个使用了@<span class="hljs-title">Inherited</span>修饰的<span class="hljs-title">annotation</span>类型被用于一个<span class="hljs-title">class</span>，则这个<span class="hljs-title">annotation</span>将被用于该<span class="hljs-title">class</span>的子类。</span><br><span class="hljs-class">  </span><br><span class="hljs-class">5.自定义注解</span><br><span class="hljs-class">  使用@<span class="hljs-title">interface</span>自定义注解时，自动继承了<span class="hljs-title">java</span>.<span class="hljs-title">lang</span>.<span class="hljs-title">annotation</span>.<span class="hljs-title">Annotation</span>接口，由编译程序自动完成其他细节。在定义注解时，不能继承其他的注解或接口。@<span class="hljs-title">interface</span>用来声明一个注解，其中的每一个方法实际上是声明了一个配置参数。方法的名称就是参数的名称，返回值类型就是参数的类型（返回值类型只能是基本类型、<span class="hljs-title">Class</span>、<span class="hljs-title">String</span>、<span class="hljs-title">enum</span>）。可以通过<span class="hljs-title">default</span>来声明参数的默认值。</span><br><span class="hljs-class"></span><br><span class="hljs-class">  定义注解格式：</span><br><span class="hljs-class"><span class="hljs-title">public</span> @<span class="hljs-title">interface</span> 注解名 </span>&#123;定义体&#125;<br><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//注解实体类</span><br><span class="hljs-keyword">package</span> com.trip.demo;<br> <br><span class="hljs-keyword">import</span> java.lang.annotation.ElementType;<br><span class="hljs-keyword">import</span> java.lang.annotation.Retention;<br><span class="hljs-keyword">import</span> java.lang.annotation.RetentionPolicy;<br><span class="hljs-keyword">import</span> java.lang.annotation.Target;<br> <br> <br><span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="hljs-meta">@Target(&#123; ElementType.METHOD &#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> SMSAndMailSender &#123;<br>    <span class="hljs-comment">/*短信模板String格式化串*/</span><br>    String <span class="hljs-title function_">value</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-string">&quot;&quot;</span>;<br> <br>    String <span class="hljs-title function_">smsContent</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-string">&quot;&quot;</span>;<br> <br>    String <span class="hljs-title function_">mailContent</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-string">&quot;&quot;</span>;<br>    <span class="hljs-comment">/*是否激活发送功能*/</span><br>    <span class="hljs-type">boolean</span> <span class="hljs-title function_">isActive</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-literal">true</span>;<br>    <span class="hljs-comment">/*主题*/</span><br>    String <span class="hljs-title function_">subject</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-string">&quot;&quot;</span>;<br>&#125;<br> <br> <br><span class="hljs-comment">//切面类</span><br><span class="hljs-meta">@Aspect</span><br><span class="hljs-meta">@Component(&quot;smsAndMailSenderMonitor&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SMSAndMailSenderMonitor</span> &#123;<br> <br>    <span class="hljs-keyword">private</span> <span class="hljs-type">Logger</span> <span class="hljs-variable">logger</span> <span class="hljs-operator">=</span> LoggerFactory.getLogger(SMSAndMailSenderMonitor.class);<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 在所有标记了<span class="hljs-doctag">@SMSAndMailSender</span>的方法中切入</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> joinPoint</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> result</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@AfterReturning(value=&quot;@annotation(com.trip.demo.SMSAndMailSender)&quot;, returning=&quot;result&quot;)</span><span class="hljs-comment">//有注解标记的方法，执行该后置返回</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">afterReturning</span><span class="hljs-params">(JoinPoint joinPoint , Object result//注解标注的方法返回值)</span> &#123;<br>        <span class="hljs-type">MethodSignature</span> <span class="hljs-variable">ms</span> <span class="hljs-operator">=</span> (MethodSignature) joinPoint.getSignature();<br>        <span class="hljs-type">Method</span> <span class="hljs-variable">method</span> <span class="hljs-operator">=</span> ms.getMethod();<br>        <span class="hljs-type">boolean</span> <span class="hljs-variable">active</span> <span class="hljs-operator">=</span> method.getAnnotation(SMSAndMailSender.class).isActive();<br>        <span class="hljs-keyword">if</span> (!active) &#123;<br>            <span class="hljs-keyword">return</span>;<br>        &#125;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">smsContent</span> <span class="hljs-operator">=</span> method.getAnnotation(SMSAndMailSender.class).smsContent();<br>        <span class="hljs-type">String</span> <span class="hljs-variable">mailContent</span> <span class="hljs-operator">=</span> method.getAnnotation(SMSAndMailSender.class).mailContent();<br>        <span class="hljs-type">String</span> <span class="hljs-variable">subject</span> <span class="hljs-operator">=</span> method.getAnnotation(SMSAndMailSender.class).subject();<br>       <br>    &#125;<br>    <br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 在抛出异常时使用</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> joinPoint</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> ex</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@AfterThrowing(value=&quot;@annotation(com.trip.order.monitor.SMSAndMailSender)&quot;,throwing = &quot;ex&quot;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">afterThrowing</span><span class="hljs-params">(JoinPoint joinPoint, Throwable ex//注解标注的方法抛出的异常)</span> &#123;<br>        <span class="hljs-type">MethodSignature</span> <span class="hljs-variable">ms</span> <span class="hljs-operator">=</span> (MethodSignature) joinPoint.getSignature();<br>        <span class="hljs-type">Method</span> <span class="hljs-variable">method</span> <span class="hljs-operator">=</span> ms.getMethod();<br>        <span class="hljs-type">String</span> <span class="hljs-variable">subject</span> <span class="hljs-operator">=</span> method.getAnnotation(SMSAndMailSender.class).subject();<br>        <br>    &#125;<br>&#125;<br><span class="hljs-comment">//实体类中使用该注解标注方法</span><br><span class="hljs-meta">@Service(&quot;testService &quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TestService</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-meta">@SMSAndMailSender(smsContent = &quot;MODEL_SUBMIT_SMS&quot;, mailContent =     </span><br><span class="hljs-meta">    &quot;MODEL_SUPPLIER_EMAIL&quot;, subject = &quot;MODEL_SUBJECT_EMAIL&quot;)</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">test</span><span class="hljs-params">(String param)</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;success&quot;</span>;<br>    &#125;<br>｝<br><br></code></pre></td></tr></table></figure><p>记得在配置文件中加上：</p><p><code>&lt;aop:aspectj-autoproxy proxy-target-class=&quot;true&quot;/&gt;</code></p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>spring框架-IOC注入</title>
    <link href="/posts/2022/09/5c692bbb.html"/>
    <url>/posts/2022/09/5c692bbb.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><h3 id="Spring框架"><a href="#Spring框架" class="headerlink" title="Spring框架"></a>Spring框架</h3><h4 id="1-是什么："><a href="#1-是什么：" class="headerlink" title="1.是什么："></a>1.是什么：</h4><p>它是一个容器，是整合其他框架的框架，它的核心是IOC和AOP，它由20个模块构成，在很多领域都提供优秀的解决方案</p><h4 id="2-特性："><a href="#2-特性：" class="headerlink" title="2.特性："></a>2.特性：</h4><h5 id="轻量级"><a href="#轻量级" class="headerlink" title="轻量级"></a>轻量级</h5><p> 由20多个模块构成，每个jar包都很小，小于1M，核心包也就3M左右</p><h5 id="AOP（面向切面编程）"><a href="#AOP（面向切面编程）" class="headerlink" title="AOP（面向切面编程）"></a>AOP（面向切面编程）</h5><p>  将公共的，通用的，重复的代码单独开发，在需要的时候反织回去，底层的原理是动态代理（例如持久层，业务逻辑层，view层都需要输出打印日志，日志就可以做成公共的，需要的时候调用）</p><h5 id="IOC-（控制反转）"><a href="#IOC-（控制反转）" class="headerlink" title="IOC （控制反转）"></a>IOC （控制反转）</h5><p>   由spring容器进行对象的创建和依赖的注入，程序员在使用时直接取出来使用</p><p>   正转：由程序员进行对象的创建和依赖注入</p><p>   Student stu &#x3D; new Student();  程序员创建对象</p><p>   stu.setName(“张三”); 程序员进行赋值</p><p>   stu.setAge(22);</p><p>   反转：由Spring容器创建对象和依赖注入称为反转</p><p>  <bean id="stu" class="com.yuting.Student">  – Spring容器负责对象的创建</p><p>​     <property name="name" value="张三">  –spring容器依赖注入值</p><p>​     <property name="age" value="22">     </p><p>   备注：切记spring容器在启动时，就创建所有的对象stu。。。</p><h5 id="代码无污染"><a href="#代码无污染" class="headerlink" title="代码无污染"></a>代码无污染</h5><p>  没有约束，例如maven有规定的目录约束</p><h4 id="3-相关用法："><a href="#3-相关用法：" class="headerlink" title="3.相关用法："></a>3.相关用法：</h4><p>————————————<strong>基于xml的IOC</strong>————————————</p><ul><li>1）创建对象</li></ul><p>resource目录下创建命名为applicationContext.xml的文件，</p>  <bean id="stu" class="com.yuting.Student"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyTest1</span>&#123;<br>   <span class="hljs-meta">@Test</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testStudent</span><span class="hljs-params">()</span>&#123;<br>     <span class="hljs-comment">//程序员创建对象</span><br>     <span class="hljs-type">Student</span> <span class="hljs-variable">stu</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>();<br>     System.out.println(stu);<br>   &#125;<br>  <br>  <span class="hljs-meta">@Test</span><br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testStudentSpring</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-comment">//有spring容器进行对象的创建</span><br>    <span class="hljs-comment">//如果想从spring容器中取出对象，则要先创建容器对象，并启动才可以取对象</span><br>    <span class="hljs-comment">//s01/applicationContext.xml，这里可以在resource目录下再建一个s01文件夹</span><br>    <span class="hljs-type">ApplicationCOntext</span> <span class="hljs-variable">ac</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ClassPathXmlApplicationContext</span>(<span class="hljs-string">&quot;s01/applicationContext.xml&quot;</span>)<br>    <span class="hljs-comment">//取出对象</span><br>    <span class="hljs-type">Student</span> <span class="hljs-variable">stu</span> <span class="hljs-operator">=</span> (Student) ac.getBean(<span class="hljs-string">&quot;stu&quot;</span>);<br>  &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><ul><li>2）给创建的对象赋值</li></ul><p>​         A 使用setter注入</p><p>​             简单类型注入值使用value属性   </p><p>​             引用类型注入值使用ref属性</p><p>​             ⚠️注意：使用setter注入必须提供无参的构造方法，必须提供setXXX()方法。   </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"># 创建学校对象<br>&lt;bean id=<span class="hljs-string">&quot;school&quot;</span> class=<span class="hljs-string">&quot;com.yuting.School&quot;</span>&gt;  -- Spring容器负责对象的创建<br>  &lt;property name=<span class="hljs-string">&quot;name&quot;</span> value=<span class="hljs-string">&quot;清华大学&quot;</span>&gt;  --spring容器依赖注入值<br>  &lt;property name=<span class="hljs-string">&quot;address&quot;</span> value=<span class="hljs-string">&quot;海淀区&quot;</span>&gt; <br>&lt;/bean&gt;<br>  <br>&lt;bean id=<span class="hljs-string">&quot;stu&quot;</span> class=<span class="hljs-string">&quot;com.yuting.Student&quot;</span>&gt;  <br>  &lt;property name=<span class="hljs-string">&quot;name&quot;</span> value=<span class="hljs-string">&quot;张三&quot;</span>&gt; <br>  &lt;property name=<span class="hljs-string">&quot;age&quot;</span> value=<span class="hljs-string">&quot;22&quot;</span>&gt;   <br>  &lt;property name=<span class="hljs-string">&quot;sch&quot;</span> ref=<span class="hljs-string">&quot;school&quot;</span>&gt; <br>&lt;/bean&gt;        <br></code></pre></td></tr></table></figure><p>​        B 使用构造方法注入</p><p>​            a.使用构造方法的参数名称进行注入值</p><p>​            b.使用构造方法参数的下标注入值</p><p>​            c.使用默认的构造方法的参数的顺序注入值  </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs java">## 使用构造方法的参数名称进行注入值<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">School</span>&#123;<br>  <span class="hljs-keyword">private</span> String name;<br>  <span class="hljs-keyword">private</span> String address;<br>  <span class="hljs-keyword">public</span> <span class="hljs-title function_">School</span><span class="hljs-params">(String name1,String address1)</span>&#123;<br>     <span class="hljs-built_in">this</span>.name = name1;<br>     <span class="hljs-built_in">this</span>.address = address1;<br>  &#125;<br>&#125;<br>  <br>&lt;bean id=<span class="hljs-string">&quot;school&quot;</span> class=<span class="hljs-string">&quot;com.yuting.School&quot;</span>&gt;  -- Spring容器负责对象的创建<br>  &lt;constructor-arg name=<span class="hljs-string">&quot;name1&quot;</span> value=<span class="hljs-string">&quot;清华大学&quot;</span>&gt;&lt;/constructor-arg&gt; <br>  &lt;constructor-arg name=<span class="hljs-string">&quot;address1&quot;</span> value=<span class="hljs-string">&quot;海淀区&quot;</span>&gt;&lt;/constructor-arg&gt; <br>&lt;/bean&gt;<br>  <br><br>## 使用构造方法参数的下标注入值<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span>&#123;<br>  <span class="hljs-keyword">private</span> String name;<br>  <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;<br>  <span class="hljs-keyword">private</span> School school;<br>  <br>  <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">(String name,<span class="hljs-type">int</span> age, School school)</span>&#123;<br>     <span class="hljs-built_in">this</span>.name = name;<br>     <span class="hljs-built_in">this</span>.age = age;<br>     <span class="hljs-built_in">this</span>.school = school;<br>  &#125;<br>&#125;  <br><br>&lt;bean id=<span class="hljs-string">&quot;stu&quot;</span> class=<span class="hljs-string">&quot;com.yuting.Student&quot;</span>&gt;  -- Spring容器负责对象的创建<br>  &lt;constructor-arg index=<span class="hljs-string">&quot;0&quot;</span> value=<span class="hljs-string">&quot;ywq&quot;</span>&gt;&lt;/constructor-arg&gt; <br>  &lt;constructor-arg index=<span class="hljs-string">&quot;1&quot;</span> value=<span class="hljs-string">&quot;20&quot;</span>&gt;&lt;/constructor-arg&gt; <br>  &lt;constructor-arg index=<span class="hljs-string">&quot;2&quot;</span> ref=<span class="hljs-string">&quot;school&quot;</span>&gt;&lt;/constructor-arg&gt; <br>&lt;/bean&gt;<br>  <br><br>## 使用默认的构造方法的参数的顺序注入值<br>&lt;bean id=<span class="hljs-string">&quot;stuSequence&quot;</span> class=<span class="hljs-string">&quot;com.yuting.Student&quot;</span>&gt;  -- Spring容器负责对象的创建<br>  &lt;constructor-arg value=<span class="hljs-string">&quot;yt&quot;</span>&gt;&lt;/constructor-arg&gt; <br>  &lt;constructor-arg value=<span class="hljs-string">&quot;20&quot;</span>&gt;&lt;/constructor-arg&gt; <br>  &lt;constructor-arg ref=<span class="hljs-string">&quot;school&quot;</span>&gt;&lt;/constructor-arg&gt; <br>&lt;/bean&gt; <br></code></pre></td></tr></table></figure><p>————————————<strong>基于注解的IOC</strong>————————————</p><p>也称为DI(Dependency Injection),它是IOC的具体实现的技术</p><p>汤：xml  annotation</p><p>药：创建对象并依赖注入</p><ul><li>1）创建对象的注解</li></ul><p>​    @Component:可以创建任意对象，创建对象的默认名称是类名的驼峰命名法。也可以指定对象的名称。</p><p>​    @Controller:专门来创建控制器的对象(Servlet), 这种对象可以接收用户的请求，可以返回处理结果给客户端</p><p>​    @Service:专门用来创建业务逻辑层的对象，负责向下访问数据访问层，处理完毕后的结果返回给界面层。</p><p>​    @Repository:专门用来创建数据访问层的对象，负责数据库中的增删改查所有操作</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs xml">@Component<br>public class Student&#123;<br>private String name;<br>  private int age;<br>  <br>  public Student()&#123;<br>    System.out.println(&quot;学生对象的无参构造方法&quot;)<br>  &#125;<br>&#125;<br><br>@Component(&quot;stu&quot;)<br>public class Student&#123;<br>private String name;<br>  private int age;<br>  <br>  public Student()&#123;<br>    System.out.println(&quot;学生对象的无参构造方法&quot;)<br>  &#125;<br>&#125;<br><br># applicationContext.xml<br><span class="hljs-comment">&lt;!--添加包扫描--&gt;</span><br># 只要包下面有顶着那些创建对象的注解，就给你自动创建对象<br><span class="hljs-tag">&lt;<span class="hljs-name">context:component-scan</span> <span class="hljs-attr">base-package</span>=<span class="hljs-string">&quot;com.yuting.s01&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">context:component-scan</span>&gt;</span><br><br>  <br>@Test<br>public void testStudentSpring()&#123;<br>    //有spring容器进行对象的创建<br>    //如果想从spring容器中取出对象，则要先创建容器对象，并启动才可以取对象<br>    //s01/applicationContext.xml，这里可以在resource目录下再建一个s01文件夹<br>    ApplicationCOntext ac = new ClassPathXmlApplicationContext(&quot;s01/applicationContext.xml&quot;)<br>    //取出对象<br>    Student stu = (Student) ac.getBean(&quot;stu&quot;);<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li><p>2）创建依赖的注解</p><p> <strong>值类型的注入</strong></p></li></ul><p>​    @value:用来给简单类型注入值</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Component(&quot;stu&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span>&#123;<br>  <span class="hljs-meta">@Value(&quot;zhangsan&quot;)</span><br><span class="hljs-keyword">private</span> String name;<br><span class="hljs-meta">@Value(&quot;22&quot;)</span><br>  <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;<br>  <br>  <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">()</span>&#123;<br>    System.out.println(<span class="hljs-string">&quot;学生对象的无参构造方法&quot;</span>)<br>  &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>​    </p><p><strong>引用类型的注入</strong></p><p>​    A.@Autowired:使用类型注入值，从整个Bean工厂中搜索同源类型的对象进行注入</p><p>​        同源类型: </p><p>​         1.被注入的类型(Student中的school)与注入的类型是完全相同的类型</p><p>​         2.被注入的类型(Student中的school父)与注入的类型(子)是父子类</p><p>​         3.被注入的类型(Student中的school接口)与注入的类型(实现类)是接口和实现类的类型</p><p>  注：在有父子类的情况下，使用按类型注入，就意味着有多个可注入的对象，此时按照名称进行二次筛选，选中与被注入对象相同名称的对象进行注入</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><code class="hljs java">-------------<span class="hljs-number">1.</span>被注入的类型(Student中的school)与注入的类型是完全相同的类型-----------<br><span class="hljs-meta">@Component</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">School</span>&#123;<br>  <span class="hljs-meta">@Value(&quot;清华大学&quot;)</span><br>  <span class="hljs-keyword">private</span> String name;<br>  <span class="hljs-meta">@Value(&quot;海淀区&quot;)</span><br>  <span class="hljs-keyword">private</span> String address;<br>  <br>  <span class="hljs-keyword">public</span> <span class="hljs-title function_">School</span><span class="hljs-params">()</span>&#123;<br>System.out.println(<span class="hljs-string">&quot;school对象的无参构造方法&quot;</span>)<br>  &#125;<br>&#125;<br><br><span class="hljs-meta">@Component</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span>&#123;<br>  <span class="hljs-meta">@Value(&quot;lisi&quot;)</span><br><span class="hljs-keyword">private</span> String name;<br><span class="hljs-meta">@Value(&quot;23&quot;)</span><br>  <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;<br>  <br>  <span class="hljs-comment">//引用类型按类型注入</span><br>  <span class="hljs-meta">@Autowired</span><br>  <span class="hljs-keyword">private</span> School school;<br>&#125;<br><br># applicationContext.xml<br>&lt;!--添加包扫描--&gt;<br># 只要包下面有顶着那些创建对象的注解，就给你自动创建对象<br>&lt;context:component-scan base-<span class="hljs-keyword">package</span>=<span class="hljs-string">&quot;com.yuting.s01&quot;</span>&gt;&lt;/context:component-scan&gt;<br><br><br>-------------------<span class="hljs-number">2.</span>被注入的类型(Student中的school父)与注入的类型(子)是父子类--------------------<br><span class="hljs-meta">@Component(&quot;schoolNew&quot;)</span> <br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">School</span>&#123;<br>  <span class="hljs-meta">@Value(&quot;清华大学&quot;)</span><br>  <span class="hljs-keyword">private</span> String name;<br>  <span class="hljs-meta">@Value(&quot;海淀区&quot;)</span><br>  <span class="hljs-keyword">private</span> String address;<br>  <br>  <span class="hljs-keyword">public</span> <span class="hljs-title function_">School</span><span class="hljs-params">()</span>&#123;<br>System.out.println(<span class="hljs-string">&quot;school对象的无参构造方法&quot;</span>)<br>  &#125;<br>&#125;<br><br><span class="hljs-meta">@Component(&quot;school&quot;)</span>  <br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SubSchool</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">School</span>&#123;<br>  <span class="hljs-meta">@Value(&quot;清华附小&quot;)</span><br>  <span class="hljs-keyword">private</span> String name;<br>  <span class="hljs-meta">@Value(&quot;海淀小区&quot;)</span><br>  <span class="hljs-keyword">private</span> String address;<br>  <br>  <span class="hljs-keyword">public</span> <span class="hljs-title function_">SubSchool</span><span class="hljs-params">()</span>&#123;<br>    System.out.println(<span class="hljs-string">&quot;这是SubSchool的构造方法&quot;</span>)<br>  &#125;<br>&#125;<br><br><span class="hljs-meta">@Component</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span>&#123;<br>  <span class="hljs-meta">@Value(&quot;lisi&quot;)</span><br><span class="hljs-keyword">private</span> String name;<br><span class="hljs-meta">@Value(&quot;23&quot;)</span><br>  <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;<br>  <br>  <span class="hljs-comment">//引用类型按类型注入</span><br>  <span class="hljs-meta">@Autowired</span><br>  <span class="hljs-keyword">private</span> School school;<br>&#125;<br><br>默认：父类被注入进来<br>结果：子类被注入进来<br>  <br>--<span class="hljs-number">3.</span>被注入的类型(Student中的school接口)与注入的类型(实现类)是接口和实现类的类型<br></code></pre></td></tr></table></figure><p>​    B.@Autowired</p><p>​       @Qualifier:使用名称注入值，从整个Bean工厂中搜索相同名称的对象进行注入</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Component</span> <span class="hljs-comment">//交给spring去创建对象</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">School</span>&#123;  <span class="hljs-comment">//此时School对象的名称就是school</span><br>  <span class="hljs-meta">@Value(&quot;清华大学&quot;)</span><br>  <span class="hljs-keyword">private</span> String name;<br>  <span class="hljs-meta">@Value(&quot;海淀区&quot;)</span><br>  <span class="hljs-keyword">private</span> String address;<br>  <br>  <span class="hljs-keyword">public</span> <span class="hljs-title function_">School</span><span class="hljs-params">()</span>&#123;<br>System.out.println(<span class="hljs-string">&quot;school对象的无参构造方法&quot;</span>)<br>  &#125;<br>&#125;<br><br><span class="hljs-meta">@Component</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span>&#123;<br>  <span class="hljs-meta">@Value(&quot;lisi&quot;)</span><br><span class="hljs-keyword">private</span> String name;<br><span class="hljs-meta">@Value(&quot;23&quot;)</span><br>  <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;<br>  <br>  <span class="hljs-comment">//引用类型按名称注入</span><br>  <span class="hljs-meta">@Autowired</span><br>  <span class="hljs-meta">@Qualifier(&quot;school&quot;)</span><span class="hljs-comment">// 按照名称school找</span><br>  <span class="hljs-keyword">private</span> School s; <br>&#125;<br><br># applicationContext.xml<br>&lt;!--添加包扫描--&gt;<br># 只要包下面有顶着那些创建对象的注解，就给你自动创建对象<br>&lt;context:component-scan base-<span class="hljs-keyword">package</span>=<span class="hljs-string">&quot;com.yuting.s01&quot;</span>&gt;&lt;/context:component-scan&gt;<br><br><br></code></pre></td></tr></table></figure><hr><h3 id="创建spring项目"><a href="#创建spring项目" class="headerlink" title="创建spring项目"></a>创建spring项目</h3><p>项目结构如下</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-strong">__springDemo</span><br><span class="hljs-strong">__</span><span class="hljs-strong">__src</span><br><span class="hljs-strong">__</span><span class="hljs-strong">____</span><span class="hljs-emphasis">_main</span><br><span class="hljs-emphasis"><span class="hljs-strong">____</span><span class="hljs-strong">____</span>_</span>java<br><span class="hljs-strong">____</span><span class="hljs-strong">____</span><span class="hljs-strong">____</span>com<br><span class="hljs-strong">____</span><span class="hljs-strong">____</span><span class="hljs-strong">____</span><span class="hljs-strong">__yuting</span><br><span class="hljs-strong">__</span><span class="hljs-strong">____</span><span class="hljs-strong">__<span class="hljs-emphasis">_resources</span></span><br><span class="hljs-emphasis"><span class="hljs-strong">_</span>__</span><span class="hljs-strong">____</span><span class="hljs-strong">____</span><span class="hljs-emphasis">_applicationContext.xml</span><br><span class="hljs-emphasis"><span class="hljs-strong">____</span><span class="hljs-strong">___test</span></span><br><span class="hljs-strong"><span class="hljs-emphasis">__</span><span class="hljs-strong">____</span><span class="hljs-strong">___java</span></span><br><span class="hljs-strong"><span class="hljs-emphasis">__</span><span class="hljs-strong">____</span><span class="hljs-strong">____</span>_</span>com<br><span class="hljs-strong">____</span><span class="hljs-strong">____</span><span class="hljs-strong">____</span><span class="hljs-emphasis">_yuting</span><br><span class="hljs-emphasis"><span class="hljs-strong">____</span><span class="hljs-strong">____</span>_</span>resources<br><span class="hljs-strong">____</span>pom.xml<br></code></pre></td></tr></table></figure><p>1.新建maven项目</p><p>2.maven是代码污染框架，所以得按照maven规定的目录来</p><p>3.新建的文件夹要退出去才能被maven识别</p><p>4.修改pom文件</p><ul><li>添加依赖</li><li>build 增加配置文件路径（xml，properties等配置文件不需要编译，因此编译好的class文件会在target文件夹下找到配置文件，因为idea的原因，有些时候不会把配置文件copy到target目录下就没办法正常运行，所以build标签在编译时执行在编译阶段copy到target目录下）</li></ul><p>5.resource目录下创建命名为applicationContext.xml的文件</p><h3 id="三层架构的项目实例"><a href="#三层架构的项目实例" class="headerlink" title="三层架构的项目实例"></a>三层架构的项目实例</h3><p>界面层、业务逻辑层、数据访问层</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java">src.main.java.com.yuting.pojo     # 实体类<br>        Users.java<br>  <br>src.main.java.com.yuting.dao      # 数据访问层<br>        UserMapper.java <br>        UserMapperImpl.java <br>        <br>src.main.java.com.yuting.service  # 业务逻辑层<br>      impl<br>         UserServiceImpl.java<br>      UserService.java<br>         <br>src.main.java.com.yuting.controller # 界面层<br>        UserController.java<br>        <br></code></pre></td></tr></table></figure><p>Spring会接管三层架构中哪些对象的创建？</p><p>Users.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Users</span>&#123;<br><span class="hljs-keyword">private</span> <span class="hljs-type">int</span> uid;<br>  <span class="hljs-keyword">private</span> String uname;<br>  <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> uage;<br>  <br>  <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getUid</span><span class="hljs-params">()</span>&#123;<span class="hljs-keyword">return</span> uid;&#125;;<br>  <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getUname</span><span class="hljs-params">()</span>&#123;<span class="hljs-keyword">return</span> uname;&#125;;<br>  <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getUage</span><span class="hljs-params">()</span>&#123;<span class="hljs-keyword">return</span> uage;&#125;;<br>  <br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setUid</span><span class="hljs-params">(<span class="hljs-type">int</span> uid)</span>&#123;<span class="hljs-built_in">this</span>.uid=uid&#125;;<br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setUname</span><span class="hljs-params">(String uname)</span>&#123;<span class="hljs-built_in">this</span>.uname=uname&#125;;<br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setUage</span><span class="hljs-params">(<span class="hljs-type">int</span> uage)</span>&#123;<span class="hljs-built_in">this</span>.uage=uage&#125;;<br>  <br>  <span class="hljs-keyword">public</span> <span class="hljs-title function_">Users</span><span class="hljs-params">(<span class="hljs-type">int</span> uid,String uname,<span class="hljs-type">int</span> uage)</span>&#123;<br>    <span class="hljs-built_in">this</span>.uid=uid;<br>    <span class="hljs-built_in">this</span>.uname=uname;<br>    <span class="hljs-built_in">this</span>.uage=uage;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>UserMapperImpl.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Repository</span> <span class="hljs-comment">// 交给spring框架去创建数据访问层的对象创建</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserMapperImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UserMapper</span>&#123;<br>  <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">insert</span><span class="hljs-params">(Users u)</span>&#123;<br>    System.out.println(u.getUname()+<span class="hljs-string">&#x27;用户增加成功！&#x27;</span>);<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>UserMapper.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserMapper</span>&#123;<br>  <span class="hljs-type">int</span> <span class="hljs-title function_">insert</span><span class="hljs-params">(Users u)</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>UserServiceImpl.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Service</span> <span class="hljs-comment">//交给spring框架创建业务逻辑层的对象</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UsersService</span>&#123;<br>  <span class="hljs-comment">//在所有的业务逻辑中都必定有数据访问层的对象</span><br>  <span class="hljs-meta">@Autowired</span><br>  <span class="hljs-keyword">private</span> UsersMapper usersMapper; <span class="hljs-comment">// = new UsersMapperImpl();</span><br>  <br>  <span class="hljs-meta">@Override</span><br>  <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">insert</span><span class="hljs-params">(Users users)</span>&#123;<br>    <span class="hljs-keyword">return</span> usersMapper.insert(users)<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>UserService.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UsersService</span>&#123;<br>  <span class="hljs-comment">//在所有的业务逻辑中都必定有数据访问层的对象</span><br><br>  <span class="hljs-type">int</span> <span class="hljs-title function_">insert</span><span class="hljs-params">(Users users)</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>UserController.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Controller</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserController</span>&#123;<br>  <span class="hljs-comment">//所有的界面层都会有业务逻辑层的对象</span><br>  <span class="hljs-meta">@Autowired</span><br><span class="hljs-keyword">public</span> UsersService userService;<span class="hljs-comment">// = new UsersServiceImpl();</span><br>  <br>  <span class="hljs-comment">//界面层对外提供访问的功能</span><br>  <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">insert</span><span class="hljs-params">(Users users)</span>&#123;<br>    <span class="hljs-keyword">return</span> userService.insert(users);<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>测试类.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyTest</span>&#123;<br>  <span class="hljs-meta">@Test</span><br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testInsertUsers</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">ApplicationContext</span> <span class="hljs-variable">ac</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ClassPathXmlApplicationCOntext</span>(<span class="hljs-string">&quot;applicationContext.xml&quot;</span>);<br>    <span class="hljs-type">UserController</span> <span class="hljs-variable">userController</span> <span class="hljs-operator">=</span> (UserController)ac.getBean(<span class="hljs-string">&quot;userController&quot;</span>);<br>    userController.insert(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Users</span>(<span class="hljs-number">100</span>,<span class="hljs-string">&quot;haha&quot;</span>,<span class="hljs-number">25</span>));<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Flink作业读取mysql-binlog写入kafka报错</title>
    <link href="/posts/2022/08/61250184.html"/>
    <url>/posts/2022/08/61250184.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><h2 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h2><p>flinkcdc读取mysql-binlog日志写到kafka时出现不能获取kafka metadata的问题</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20220831214337.png"></p><p>遇到获取不到获取不到metadata的情况，检查kafka集群是否有节点挂了。我们kafka集群为3节点，排查发现其中一个节点由于磁盘写满挂了。</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20220831214941.png"></p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20220831214849.png"></p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>Flink</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Flink</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Flink使用之SQL Client</title>
    <link href="/posts/2022/08/4176c1fa.html"/>
    <url>/posts/2022/08/4176c1fa.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>Flink提供了SQL Client端，有了它我们可以像Hive的beeline一样直接在控制台编写SQL并提交作业。这里与FlinkSQL不同的是，虽然FlinkSQL实现了可以在Flink程序中写SQL，但还是需要写一些java和scala代码，Flink提供了SQL Client可以帮助不会写java和scala的程序员快速上手。</p><h2 id="如何使用"><a href="#如何使用" class="headerlink" title="如何使用"></a>如何使用</h2><p>Flink SQL client支持运行在standalone集群和Yarn集群上。在提交任务的命令有所不同。</p><h3 id="SQL-client运行于standalone模式："><a href="#SQL-client运行于standalone模式：" class="headerlink" title="SQL client运行于standalone模式："></a><strong>SQL client运行于standalone模式：</strong></h3><ol><li>事先启动一个Flink standalone集群</li></ol><p><code>./start-cluster.sh</code></p><ol start="2"><li>启动sql-client on standalone</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">./sql-client.sh embedded<br></code></pre></td></tr></table></figure><blockquote><p>注意。如果使用standalone模式运行，需要事先启动一个Flink standalone集群。方法如下</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">./start-cluster.sh<br></code></pre></td></tr></table></figure></blockquote><p>默认情况下，这个sql-client上面所跑的任务，会提交到flink的standalone集群上，如果你没有<strong>bin&#x2F;start-cluster.s</strong>h启动standalon集群，那么sql-client进程可以启动起来，但是在实际执行sql的时候，会报如下连接拒绝的错误</p><h3 id="运行到Yarn集群上："><a href="#运行到Yarn集群上：" class="headerlink" title="运行到Yarn集群上："></a><strong>运行到Yarn集群上：</strong></h3><ol><li>启动一个yarn-session集群</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">进入flink安装目录</span><br>cd &#123;Flink_ENV&#125;<br><span class="hljs-meta prompt_"># </span><span class="language-bash">执行</span><br>./bin/yarn-session.sh -s 2 -jm 1024 -tm 2048 -nm test1 -d<br><span class="hljs-meta prompt_"># </span><span class="language-bash">-d 表示detach()放在后台执行</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">-nm 名字</span><br></code></pre></td></tr></table></figure><ol start="2"><li>启动sql-client on yarn-session</li></ol><p><code>./sql-client.sh embedded -s yarn-session</code></p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs nix">或者bin<span class="hljs-symbol">/sql-client.sh</span> embedded <span class="hljs-operator">-</span>e sql-env.yaml<br><span class="hljs-comment"># sql-env.yaml文件内容为：</span><br><span class="hljs-params">configuration:</span><br>  execution.<span class="hljs-params">target:</span> yarn-session<br></code></pre></td></tr></table></figure><p>大家可能会问：SQL slient怎么知道提交到哪个yarn app上？</p><p>指定<code>yarn-session</code>方式启动的时候会看到如下日志：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">INFO  org.apache.flink.yarn.cli.FlinkYarnSessionCli                [] - Found Yarn properties file under /tmp/.yarn-properties-root.<br></code></pre></td></tr></table></figure><p>Flink每次启动<code>yarn-session</code>，都会创建一个<code>/tmp/.yarn-properties-root</code>文件(root为用户名，源码位于<code>FlinkYarnSessionCli</code>)。内容如下：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">dynamicPropertiesString=<br>applicationID=application_xxxxxxxxxxxxx_xxxx<br></code></pre></td></tr></table></figure><p>记录了最近一次提交的yarn session对应的application ID。SQL client如果使用yarn session模式启动，会查找<code>/tmp/.yarn-properties-root</code>文件中指定的application id，将SQL提交到这个yarn session上运行。</p><p>参考：</p><p><a href="https://nightlies.apache.org/flink/flink-docs-release-1.13/zh/docs/dev/table/sqlclient/">Flink官网</a></p><p><a href="https://blog.csdn.net/lsr40/article/details/113398830">CSDN博客</a></p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>Flink</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Flink</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ETL算法</title>
    <link href="/posts/2022/08/26e855a5.html"/>
    <url>/posts/2022/08/26e855a5.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><h2 id="ETL算法"><a href="#ETL算法" class="headerlink" title="ETL算法"></a>ETL算法</h2><blockquote><p>1.全删全插</p></blockquote><p><strong>应用场景</strong></p><p>适合<strong>源表是全量数据表</strong>，该数据表业务逻辑只需保存当前最新全量数据，不需跟踪过往历史信息。主要应用在维表、参数表</p><p><strong>算法实现逻辑</strong></p><p>1.清空目标表；</p><p>2.源表全量插入；</p><p><strong>ETL代码原型</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">--   1. 清理目标表</span><br><span class="hljs-keyword">TRUNCATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-operator">&lt;</span>目标表<span class="hljs-operator">&gt;</span>;<br> <br><span class="hljs-comment">--   2. 全量插入</span><br><span class="hljs-keyword">INSERT INTO</span> <span class="hljs-operator">&lt;</span>目标表<span class="hljs-operator">&gt;</span>   (字段<span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span>)<br><span class="hljs-keyword">SELECT</span> 字段<span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><br><span class="hljs-keyword">FROM</span> <span class="hljs-operator">&lt;</span>源表<span class="hljs-operator">&gt;</span><br><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-keyword">JOIN</span> <span class="hljs-operator">&lt;</span>关联数据<span class="hljs-operator">&gt;</span><br><span class="hljs-keyword">WHERE</span>   <span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span>;<br></code></pre></td></tr></table></figure><hr><blockquote><p>2.增量累全模型</p></blockquote><p>即Upsert实现逻辑</p><p><strong>应用场景</strong></p><p>源表可以是增量或全量数据表，目标表始终最新最全记录。</p><p><strong>算法实现逻辑</strong></p><p>1.利用PK主键比对；</p><p>2.目标表和源表PK一致的变化记录，更新目标表；</p><p>3.源表存在但目标表不存在，直接插入；</p><p><strong>ETL代码原型</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 1. 生成加工源表</span><br><span class="hljs-keyword">Create</span> temp <span class="hljs-keyword">Table</span> <span class="hljs-operator">&lt;</span>临时表<span class="hljs-operator">&gt;</span> <span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span>;<br><span class="hljs-keyword">INSERT INTO</span> <span class="hljs-operator">&lt;</span>临时表<span class="hljs-operator">&gt;</span> (字段<span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span>)<br><span class="hljs-keyword">SELECT</span> 字段<span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span>  <br><span class="hljs-keyword">FROM</span> <span class="hljs-operator">&lt;</span>源表<span class="hljs-operator">&gt;</span><br><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-keyword">JOIN</span> <span class="hljs-operator">&lt;</span>关联数据<span class="hljs-operator">&gt;</span><br><span class="hljs-keyword">WHERE</span> <span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><br>;<br> <br><span class="hljs-comment">-- 2. 可利用Merge Into实现累全能力，当前也可以采用分步Delete/Insert或Update/Insert操作</span><br><span class="hljs-keyword">Merge</span> <span class="hljs-keyword">INTO</span> <span class="hljs-operator">&lt;</span>目标表<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">As</span> T1 (字段<span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span>)<br><span class="hljs-keyword">Using</span> <span class="hljs-operator">&lt;</span>临时表<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">as</span> S1<br><span class="hljs-keyword">on</span> (<span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span>PK<span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span>)<br><span class="hljs-keyword">when</span> Matched <span class="hljs-keyword">then</span><br><span class="hljs-keyword">update</span> <span class="hljs-keyword">set</span> Colx <span class="hljs-operator">=</span> S1.Colx <span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><br><span class="hljs-keyword">when</span> <span class="hljs-keyword">Not</span> Matched <span class="hljs-keyword">then</span><br><span class="hljs-keyword">INSERT</span> (字段<span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span>)   <span class="hljs-keyword">values</span> (字段<span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span> )<br>;<br></code></pre></td></tr></table></figure><hr><blockquote><p>3.增量累加模型</p></blockquote><p>即Append实现逻辑；</p><p><strong>应用场景</strong></p><p>主要应用在流水表加载上，即每日产生的流水、事件数据，追加到目标表中保留全历史数据。流水表、快照表、统计分析表等均是通过该逻辑实现。</p><p><strong>算法实现逻辑</strong></p><p>1.源表直接插入目标表；</p><p><strong>ETL代码原型</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">--   1.插入目标表</span><br><span class="hljs-keyword">INSERT INTO</span> <span class="hljs-operator">&lt;</span>目标表<span class="hljs-operator">&gt;</span>   (字段<span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span>)<br><span class="hljs-keyword">SELECT</span> 字段<span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><br><span class="hljs-keyword">FROM</span> <span class="hljs-operator">&lt;</span>源表<span class="hljs-operator">&gt;</span><br><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-keyword">JOIN</span> <span class="hljs-operator">&lt;</span>关联数据<span class="hljs-operator">&gt;</span><br><span class="hljs-keyword">WHERE</span>   <span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span>;<br></code></pre></td></tr></table></figure><hr><blockquote><p>4.全历史拉链模型</p></blockquote><p><strong>应用场景</strong></p><p>全历史拉链，跟踪源表全量变化历史，若源表记录不存在，则说明数据闭链；根据PK新拉一条有效记录。源表数据要求全量</p><p><strong>算法实现逻辑</strong></p><p>1.提取当前有效记录；</p><p>2.提取当日源系统最新数据；</p><p>3.根据PK字段比对当前有效记录与最新源表，更新目标表当前有效记录，进行闭链操作；</p><p>4.根据全字段比对最新源表与当前有效记录，插入目标表；</p><p><strong>ETL代码原型</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 1. 提取当前有效记录</span><br><span class="hljs-keyword">Insert into</span> <span class="hljs-operator">&lt;</span>临时表<span class="hljs-operator">-</span>开链<span class="hljs-operator">-</span>pre<span class="hljs-operator">&gt;</span> (不含开闭链字段<span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span>)<br><span class="hljs-keyword">Select</span> 不含开闭链字段<span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><br><span class="hljs-keyword">From</span> <span class="hljs-operator">&lt;</span>目标表<span class="hljs-operator">&gt;</span><br><span class="hljs-keyword">Where</span> 结束日期 <span class="hljs-operator">=</span><span class="hljs-type">date</span><span class="hljs-string">&#x27;&lt;最大日期&gt;&#x27;</span>;<br>;<br><br><span class="hljs-comment">-- 2. 提取当日源系统最新数据</span><br><span class="hljs-operator">&lt;</span>源表临时表<span class="hljs-operator">-</span>cur<span class="hljs-operator">&gt;</span><br><br><br><span class="hljs-comment">-- 3 今天全部开链的数据，即包含今天全新插入、数据发生变化的记录</span><br><span class="hljs-keyword">Insert Into</span> <span class="hljs-operator">&lt;</span>临时表<span class="hljs-operator">-</span>增量<span class="hljs-operator">-</span>ins<span class="hljs-operator">&gt;</span><br><span class="hljs-keyword">Select</span> 不含开闭链字段<span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><br><span class="hljs-keyword">From</span> <span class="hljs-operator">&lt;</span>源表临时表<span class="hljs-operator">-</span>cur<span class="hljs-operator">&gt;</span><br><span class="hljs-keyword">where</span> (不含开闭链字段<span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span>) <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span><br>   (<span class="hljs-keyword">Select</span> 不含开闭链字段<span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><br> <span class="hljs-keyword">From</span> <span class="hljs-operator">&lt;</span>临时表<span class="hljs-operator">-</span>开链<span class="hljs-operator">-</span>pre<span class="hljs-operator">&gt;</span><br>   );<br>   <br><span class="hljs-comment">-- 4 今天需要闭链的数据，即今天发生变化的记录</span><br><span class="hljs-keyword">Insert into</span> <span class="hljs-operator">&lt;</span>临时表<span class="hljs-operator">-</span>增量<span class="hljs-operator">-</span>upd<span class="hljs-operator">&gt;</span><br><span class="hljs-keyword">Select</span> 不含开闭链字段<span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span>,开始时间<br><span class="hljs-keyword">From</span> <span class="hljs-operator">&lt;</span>临时表<span class="hljs-operator">-</span>开链<span class="hljs-operator">-</span>pre<span class="hljs-operator">&gt;</span><br><span class="hljs-keyword">where</span> (不含开闭链字段<span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span>) <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span><br>   (<span class="hljs-keyword">Select</span> 不含开闭链字段<span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><br> <span class="hljs-keyword">From</span> <span class="hljs-operator">&lt;</span>临时表<span class="hljs-operator">-</span>开链<span class="hljs-operator">-</span>cur<span class="hljs-operator">&gt;</span><br>   );<br>   <br><span class="hljs-comment">-- 5 更新闭链数据，即历史记录闭链（删除-插入替代更新）</span><br><span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> <span class="hljs-operator">&lt;</span>目标表<span class="hljs-operator">&gt;</span><br><span class="hljs-keyword">WHERE</span> (PK<span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span>) <span class="hljs-keyword">IN</span><br>(<span class="hljs-keyword">Select</span> PK<span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span> <span class="hljs-keyword">From</span> <span class="hljs-operator">&lt;</span>临时表<span class="hljs-operator">-</span>增量<span class="hljs-operator">-</span>upd<span class="hljs-operator">&gt;</span>)<br><span class="hljs-keyword">AND</span> 结束日期<span class="hljs-operator">=</span><span class="hljs-type">date</span><span class="hljs-string">&#x27;&lt;最大日期&gt;&#x27;</span>;<br><br><span class="hljs-keyword">INSERT INTO</span> <span class="hljs-operator">&lt;</span>目标表<span class="hljs-operator">&gt;</span><br>      (不含开闭链字段<span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span>,开始时间,结束日期)<br><span class="hljs-keyword">Select</span> 不含开闭链字段<span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span>,开始时间,<span class="hljs-type">date</span><span class="hljs-string">&#x27;&lt;数据日期&gt;&#x27;</span><br><span class="hljs-keyword">From</span> <span class="hljs-operator">&lt;</span>临时表<span class="hljs-operator">-</span>增量<span class="hljs-operator">-</span>upd<span class="hljs-operator">&gt;</span>;<br><br><span class="hljs-comment">-- 6 插入开链数据，即当日新增记录</span><br><span class="hljs-keyword">INSERT INTO</span> <span class="hljs-operator">&lt;</span>目标表<span class="hljs-operator">&gt;</span> .<br>      (不含开闭链字段<span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span>,开始时间,结束日期)<br><span class="hljs-keyword">Select</span> 不含开闭链字段<span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span>,<span class="hljs-type">date</span><span class="hljs-string">&#x27;&lt;数据日期&gt;&#x27;</span>,<span class="hljs-type">date</span><span class="hljs-string">&#x27;&lt;最大日期&gt;&#x27;</span><br><span class="hljs-keyword">From</span> <span class="hljs-operator">&lt;</span>临时表<span class="hljs-operator">-</span>增量<span class="hljs-operator">-</span>ins<span class="hljs-operator">&gt;</span>;<br></code></pre></td></tr></table></figure><hr><blockquote><p>5.<strong>增量拉链模型</strong></p></blockquote><p><strong>应用场景</strong></p><p>增量拉链，目的是追踪数据增量变化历史，根据PK比对新拉一条开链数据；</p><p>算法要求源表增量或者全量。</p><p><strong>算法实现逻辑</strong></p><p>1.提取上日开链数据；</p><p>2.PK相同变化记录，关闭旧记录链，开启新记录链；</p><p>3.PK不同，源表存在，新增开链记录</p><p><strong>ETL代码原型</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">--   1. 提取当前有效记录</span><br><span class="hljs-keyword">Insert into</span> <span class="hljs-operator">&lt;</span>临时表<span class="hljs-operator">-</span>开链<span class="hljs-operator">-</span>pre<span class="hljs-operator">&gt;</span> (不含开闭链字段<span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span>)<br><span class="hljs-keyword">Select</span> 不含开闭链字段<span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><br><span class="hljs-keyword">From</span> <span class="hljs-operator">&lt;</span>目标表<span class="hljs-operator">&gt;</span><br><span class="hljs-keyword">Where</span> 结束日期 <span class="hljs-operator">=</span><span class="hljs-type">date</span><span class="hljs-string">&#x27;&lt;最大日期&gt;&#x27;</span>;<br><br><span class="hljs-comment">--   2. 提取当日源系统增量记录</span><br><span class="hljs-operator">&lt;</span>源表临时表<span class="hljs-operator">-</span>cur<span class="hljs-operator">&gt;</span><br><br><span class="hljs-comment">--   3. 提取当日源系统新增记录</span><br><span class="hljs-keyword">Insert into</span> <span class="hljs-operator">&lt;</span>临时表<span class="hljs-operator">-</span>增量<span class="hljs-operator">-</span>ins<span class="hljs-operator">&gt;</span><br><span class="hljs-keyword">Select</span> 不含开闭链字段<span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><br><span class="hljs-keyword">From</span> <span class="hljs-operator">&lt;</span>临时表<span class="hljs-operator">-</span>开链<span class="hljs-operator">-</span>cur<span class="hljs-operator">&gt;</span><br><span class="hljs-keyword">where</span> (<span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span>PK<span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span>) <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span><br>  (<span class="hljs-keyword">select</span> <span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span>PK<span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> <span class="hljs-operator">&lt;</span>临时表<span class="hljs-operator">-</span>开链<span class="hljs-operator">-</span>pre<span class="hljs-operator">&gt;</span>);<br>  <br><span class="hljs-comment">--   4. 提取当日源系统历史变化记录</span><br><span class="hljs-keyword">Insert into</span> <span class="hljs-operator">&lt;</span>临时表<span class="hljs-operator">-</span>增量<span class="hljs-operator">-</span>upd<span class="hljs-operator">&gt;</span><br><span class="hljs-keyword">Select</span> 不含开闭链字段<span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><br><span class="hljs-keyword">From</span> <span class="hljs-operator">&lt;</span>临时表<span class="hljs-operator">-</span>开链<span class="hljs-operator">-</span>cur<span class="hljs-operator">&gt;</span><br><span class="hljs-keyword">inner</span> <span class="hljs-keyword">join</span> <span class="hljs-operator">&lt;</span>临时表<span class="hljs-operator">-</span>开链<span class="hljs-operator">-</span>pre<span class="hljs-operator">&gt;</span><br><span class="hljs-keyword">on</span> (<span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span>PK 等值<span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span>)<br><span class="hljs-keyword">where</span> (<span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span>变化字段 非等值<span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span>);<br><br><span class="hljs-comment">--   5. 更新历史变化记录，关闭历史旧链，开启新链</span><br><span class="hljs-keyword">update</span> <span class="hljs-operator">&lt;</span>目标表<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">AS</span> T1<br><span class="hljs-keyword">SET</span> <span class="hljs-operator">&lt;</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span>变化字段 S1赋值<span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">&gt;</span>,结束日期 <span class="hljs-operator">=</span> <span class="hljs-type">date</span><span class="hljs-string">&#x27;&lt;数据日期&gt;&#x27;</span><br><span class="hljs-keyword">FROM</span> <span class="hljs-operator">&lt;</span>临时表<span class="hljs-operator">-</span>增量<span class="hljs-operator">-</span>upd<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">AS</span> S1<br><span class="hljs-keyword">WHERE</span> ( <span class="hljs-operator">&lt;</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span>PK 等值<span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">&gt;</span> )<br><span class="hljs-keyword">AND</span>   T1.结束日期 <span class="hljs-operator">=</span><span class="hljs-type">date</span><span class="hljs-string">&#x27;&lt;最大日期&gt;&#x27;</span><br>;<br><span class="hljs-keyword">INSERT INTO</span> <span class="hljs-operator">&lt;</span>目标表<span class="hljs-operator">&gt;</span><br>      (不含开闭链字段<span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span>,开始时间,结束日期)<br><span class="hljs-keyword">SELECT</span> 不含开闭链字段<span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span>,<span class="hljs-type">date</span><span class="hljs-string">&#x27;&lt;数据日期&gt;&#x27;</span>,<span class="hljs-type">date</span><span class="hljs-string">&#x27;&lt;最大日期&gt;&#x27;</span><br><span class="hljs-keyword">FROM</span> <span class="hljs-operator">&lt;</span>临时表<span class="hljs-operator">-</span>增量<span class="hljs-operator">-</span>upd<span class="hljs-operator">&gt;</span>;<br><br><span class="hljs-comment">--   6. 插入全新开链数据</span><br><span class="hljs-keyword">INSERT INTO</span> <span class="hljs-operator">&lt;</span>目标表<span class="hljs-operator">&gt;</span><br>      (不含开闭链字段<span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span>,开始时间,结束日期)<br><span class="hljs-keyword">SELECT</span> 不含开闭链字段<span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span>,<span class="hljs-type">date</span><span class="hljs-string">&#x27;&lt;数据日期&gt;&#x27;</span>,<span class="hljs-type">date</span><span class="hljs-string">&#x27;&lt;最大日期&gt;&#x27;</span><br><span class="hljs-keyword">FROM</span> <span class="hljs-operator">&lt;</span>临时表<span class="hljs-operator">-</span>增量<span class="hljs-operator">-</span>ins<span class="hljs-operator">&gt;</span>;<br></code></pre></td></tr></table></figure><hr><blockquote><p>6.<strong>增删拉链模型</strong></p></blockquote><p><strong>应用场景</strong></p><p>主要是利用业务字段跟踪增量数据中包含删除的变化历史。</p><p><strong>算法实现逻辑</strong></p><p>1.提取上日开链数据；</p><p>2.提取源表非删除记录；</p><p>3.PK相同变化记录，关闭旧记录链，开启新记录链；</p><p>4.PK比对，源表存在，新增开链记录；</p><p>5.提取源表删除记录；</p><p>6.PK比对，旧开链记录存在，关闭旧记录链；</p><p><strong>ETL代码原型</strong></p><hr><blockquote><p>7.全量增删拉链模型</p></blockquote><p><strong>应用场景</strong></p><p>主要是利用业务字段跟踪全量数据中包含删除的变化历史。</p><p><strong>算法实现逻辑</strong></p><p>1.提取上日开链数据；</p><p>2.提取源表非删除记录；</p><p>3.PK相同变化记录，关闭旧记录链，开启新记录链；</p><p>4.PK比对，源表存在，新增开链记录；</p><p>5.提取源表删除记录；</p><p>6.PK比对，旧开链记录存在，关闭旧记录链；</p><p>7.PK比对，提取旧开链存在但源表不存在记录，关闭旧记录链；</p><p><strong>ETL代码原型</strong></p><p><strong>应用场景</strong></p><p><strong>算法实现逻辑</strong></p><p><strong>ETL代码原型</strong></p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>数据仓库</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ETL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Doris索引</title>
    <link href="/posts/2022/08/8fd3de5d.html"/>
    <url>/posts/2022/08/8fd3de5d.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><h2 id="BloomFilter索引"><a href="#BloomFilter索引" class="headerlink" title="BloomFilter索引"></a>BloomFilter索引</h2><h3 id="BloomFilter索引原理"><a href="#BloomFilter索引原理" class="headerlink" title="BloomFilter索引原理"></a>BloomFilter索引原理</h3><p>布隆过滤器实际上是由一个超长的二进制位数组和一系列的哈希函数组成。二进制位数组初始全部为0，当给定一个待查询的元素时，这个元素会被一系列哈希函数计算映射出一系列的值，所有的值在位数组的偏移量处置为1。</p><p>下图所示出一个 m&#x3D;18, k&#x3D;3 （m是该Bit数组的大小，k是Hash函数的个数）的Bloom Filter示例。集合中的 x、y、z 三个元素通过 3 个不同的哈希函数散列到位数组中（这里因为hash函数是3个，需要散列的3个位值都为1时，才说明在集合中）。当查询元素w时，通过Hash函数计算之后因为有一个比特为0，因此w不在该集合中。</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20220815201708.png"></p><h3 id="Doris-BloomFilter索引及使用场景"><a href="#Doris-BloomFilter索引及使用场景" class="headerlink" title="Doris BloomFilter索引及使用场景"></a>Doris BloomFilter索引及使用场景</h3><p>Bloom Filter本质上是一种位图结构，用于快速的判断一个给定的值是否在一个集合中。这种判断会产生小概率的误判。即如果返回false，则一定不在这个集合内。而如果范围true，则有可能在这个集合内。</p><h4 id="创建BloomFilter索引"><a href="#创建BloomFilter索引" class="headerlink" title="创建BloomFilter索引"></a>创建BloomFilter索引</h4><p>Doris BloomFilter索引的创建是通过在建表语句的PROPERTIES里加上”bloom_filter_columns”&#x3D;”k1,k2,k3”,这个属性，k1,k2,k3是你要创建的BloomFilter索引的Key列名称</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE TABLE</span> IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> sale_detail_bloom  (<br>    sale_date <span class="hljs-type">date</span> <span class="hljs-keyword">NOT NULL</span> COMMENT &quot;销售时间&quot;,<br>    customer_id <span class="hljs-type">int</span> <span class="hljs-keyword">NOT NULL</span> COMMENT &quot;客户编号&quot;,<br>    saler_id <span class="hljs-type">int</span> <span class="hljs-keyword">NOT NULL</span> COMMENT &quot;销售员&quot;,<br>    sku_id <span class="hljs-type">int</span> <span class="hljs-keyword">NOT NULL</span> COMMENT &quot;商品编号&quot;,<br>    category_id <span class="hljs-type">int</span> <span class="hljs-keyword">NOT NULL</span> COMMENT &quot;商品分类&quot;,<br>    sale_count <span class="hljs-type">int</span> <span class="hljs-keyword">NOT NULL</span> COMMENT &quot;销售数量&quot;,<br>    sale_price <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">12</span>,<span class="hljs-number">2</span>) <span class="hljs-keyword">NOT NULL</span> COMMENT &quot;单价&quot;,<br>    sale_amt <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">20</span>,<span class="hljs-number">2</span>)  COMMENT &quot;销售总金额&quot;<br>)<br>Duplicate  KEY(sale_date, customer_id,saler_id,sku_id,category_id)<br><span class="hljs-keyword">PARTITION</span> <span class="hljs-keyword">BY</span> <span class="hljs-keyword">RANGE</span>(sale_date)<br>(<br><span class="hljs-keyword">PARTITION</span> P_202111 <span class="hljs-keyword">VALUES</span> [(<span class="hljs-string">&#x27;2021-11-01&#x27;</span>), (<span class="hljs-string">&#x27;2021-12-01&#x27;</span>))<br>)<br>DISTRIBUTED <span class="hljs-keyword">BY</span> HASH(saler_id) BUCKETS <span class="hljs-number">10</span><br>PROPERTIES (<br>&quot;replication_num&quot; <span class="hljs-operator">=</span> &quot;3&quot;,<br>&quot;bloom_filter_columns&quot;<span class="hljs-operator">=</span>&quot;saler_id,category_id&quot;,<br>&quot;dynamic_partition.enable&quot; <span class="hljs-operator">=</span> &quot;true&quot;,<br>&quot;dynamic_partition.time_unit&quot; <span class="hljs-operator">=</span> &quot;MONTH&quot;,<br>&quot;dynamic_partition.time_zone&quot; <span class="hljs-operator">=</span> &quot;Asia/Shanghai&quot;,<br>&quot;dynamic_partition.start&quot; <span class="hljs-operator">=</span> &quot;-2147483648&quot;,<br>&quot;dynamic_partition.end&quot; <span class="hljs-operator">=</span> &quot;2&quot;,<br>&quot;dynamic_partition.prefix&quot; <span class="hljs-operator">=</span> &quot;P_&quot;,<br>&quot;dynamic_partition.replication_num&quot; <span class="hljs-operator">=</span> &quot;3&quot;,<br>&quot;dynamic_partition.buckets&quot; <span class="hljs-operator">=</span> &quot;3&quot;<br>);<br></code></pre></td></tr></table></figure><h4 id="查看BloomFilter索引"><a href="#查看BloomFilter索引" class="headerlink" title="查看BloomFilter索引"></a>查看BloomFilter索引</h4><p>查看我们在表上建立的BloomFilter索引是使用:</p><p><code>SHOW CREATE TABLE &lt;table_name&gt;</code></p><h4 id="删除BloomFilter索引"><a href="#删除BloomFilter索引" class="headerlink" title="删除BloomFilter索引"></a>删除BloomFilter索引</h4><p><code>ALTER TABLE &lt;db.table_name&gt; SET (&quot;bloom_filter_columns&quot; = &quot;&quot;);</code></p><h4 id="修改BloomFilter索引"><a href="#修改BloomFilter索引" class="headerlink" title="修改BloomFilter索引"></a>修改BloomFilter索引</h4><p><code>ALTER TABLE &lt;db.table_name&gt; SET (&quot;bloom_filter_columns&quot; = &quot;k1,k3&quot;);</code></p><h4 id="Doris-BloomFilter使用场景"><a href="#Doris-BloomFilter使用场景" class="headerlink" title="Doris BloomFilter使用场景"></a><strong>Doris BloomFilter使用场景</strong></h4><p>满足以下几个条件时可以考虑对某列建立Bloom Filter 索引：</p><p>1.首先BloomFilter适用于非前缀过滤。</p><p>2.查询会根据该列高频过滤，而且查询条件大多是 in 和 &#x3D; 过滤。</p><p>3.不同于Bitmap, BloomFilter适用于高基数列。比如UserID。因为如果创建在低基数的列上，比如 “性别” 列，则每个Block几乎都会包含所有取值，导致BloomFilter索引失去意义。</p><h3 id="Doris-BloomFilter使用注意事项"><a href="#Doris-BloomFilter使用注意事项" class="headerlink" title="Doris BloomFilter使用注意事项"></a><strong>Doris BloomFilter使用注意事项</strong></h3><ol><li>不支持对Tinyint、Float、Double 类型的列建Bloom Filter索引。</li><li>Bloom Filter索引只对 in 和 &#x3D; 过滤查询有加速效果。</li><li>如果要查看某个查询是否命中了Bloom Filter索引，可以通过查询的Profile信息查看。</li></ol><h2 id="Bitmap-索引"><a href="#Bitmap-索引" class="headerlink" title="Bitmap 索引"></a>Bitmap 索引</h2><h3 id="Bitmap索引原理"><a href="#Bitmap索引原理" class="headerlink" title="Bitmap索引原理"></a>Bitmap索引原理</h3><p>举个例子，给定一块长度是10bit的内存空间，想要依次插入数据4，2，1，3怎么做？</p><p>1.给定长度是10的bitmap，每一个bit位分别对应着从0到9的10个整型数。此时bitmap的所有位都是0</p><p>2.把整型数4存入bitmap，对应存储的位置就是下标为4的位置，将此bit置为1</p><p>3.把整型数2存入bitmap，对应存储的位置就是下标为2的位置，将此bit置为1</p><p>4.把整型数1存入bitmap，对应存储的位置就是下标为1的位置，将此bit置为1</p><p>5.把整型数3存入bitmap，对应存储的位置就是下标为3的位置，将此bit置为1</p><p>![image-20220815204429416](&#x2F;Users&#x2F;tingyu&#x2F;Library&#x2F;Application Support&#x2F;typora-user-images&#x2F;image-20220815204429416.png)</p><p>要问此时bitmap里存储了哪些元素？显然是4,3,2,1，一目了然。</p><p>Bitmap不仅方便查询，还可以去除掉重复的整型数。</p><p>这里有个实际工作中遇到的例子，一个用户数据表，每条用户数据都对应着几百上千个标签，怎么转化成bitmap？</p><p>让每一个标签存储包含此标签的所有用户ID，每一个标签都是一个独立的Bitmap</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20220815205230.png"></p><p>如何查找使用苹果手机的程序员用户？</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20220815205522.png"></p><h3 id="Doris-Bitmap索引使用场景"><a href="#Doris-Bitmap索引使用场景" class="headerlink" title="Doris Bitmap索引使用场景"></a>Doris Bitmap索引使用场景</h3><p>1.适用于低基数的列上，建议在100到100000之间，如：职业、地市等。基数太高则没有明显优势；基数太低，则空间效率和性能会大大降低。</p><p>2.对于特定类型的查询例如count、or、and等逻辑操作因为只需要进行位运算。如：通过类似 <code>select count(*) from table where city = &#39;beijing&#39; and job = &#39;teacher&#39;</code> 这种多个条件组合查询场景，如果在每个查询条件列上都建立了bitmap索引，则可以进行高效的位运算，精确定位到需要的数据，数据扫描量。当筛选出的结果集越小，bitmap索引的优势越明显</p><p>参考：</p><p><a href="https://zhuanlan.zhihu.com/p/54783053">Apache Doris索引机制介绍</a></p><p><a href="https://zhuanlan.zhihu.com/p/394882844">Bitmap算法介绍</a></p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>Doris</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Doris</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>deep_learning_7.数值稳定性和模型初始化</title>
    <link href="/posts/2022/08/61369467.html"/>
    <url>/posts/2022/08/61369467.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><p>到目前为止，我们实现的每个模型都是根据某个预先指定的分布来初始化模型的参数。这样比较容易忽略模型初始值对训练的影响。</p><p>选择哪个函数以及如何初始化参数可以决定优化算法收敛的速度有多快。 糟糕选择可能会导致我们在训练时遇到梯度爆炸或梯度消失。</p><h2 id="梯度消失和梯度爆炸"><a href="#梯度消失和梯度爆炸" class="headerlink" title="梯度消失和梯度爆炸"></a>梯度消失和梯度爆炸</h2><p>当初始值选取的点不一样时，就会造成梯度消失或者是梯度爆炸的情况</p><p>所谓梯度消失是指，梯度的值在很小的范围内变化，导数接近于平滑的直线。</p><p>梯度爆炸是指，导数斜率很大导致w更新的时候超出了浮点数所能表示的范围</p><h4 id="1-梯度消失"><a href="#1-梯度消失" class="headerlink" title="1.梯度消失"></a>1.梯度消失</h4><p>曾经sigmoid函数1&#x2F;(1+exp⁡(−x))很流行， 因为它类似于阈值函数。 由于早期的人工神经网络受到生物神经网络的启发， 神经元要么完全激活要么完全不激活（就像生物神经元）的想法很有吸引力。 然而，它却是导致梯度消失问题的一个常见的原因， 让我们仔细看看sigmoid函数为什么会导致梯度消失。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python">%matplotlib inline<br><span class="hljs-keyword">import</span> torch<br><span class="hljs-keyword">from</span> d2l <span class="hljs-keyword">import</span> torch <span class="hljs-keyword">as</span> d2l<br><br>x = torch.arange(-<span class="hljs-number">8.0</span>, <span class="hljs-number">8.0</span>, <span class="hljs-number">0.1</span>, requires_grad=<span class="hljs-literal">True</span>)<br>y = torch.sigmoid(x)<br>y.backward(torch.ones_like(x))<br><br>d2l.plot(x.detach().numpy(), [y.detach().numpy(), x.grad.numpy()],<br>         legend=[<span class="hljs-string">&#x27;sigmoid&#x27;</span>, <span class="hljs-string">&#x27;gradient&#x27;</span>], figsize=(<span class="hljs-number">4.5</span>, <span class="hljs-number">2.5</span>))<br></code></pre></td></tr></table></figure><p>![](<a href="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img%E6%88%AA%E5%B1%8F2022-10-06">https://raw.githubusercontent.com/YUTING0907/PicGo/main/img截屏2022-10-06</a> 下午11.41.35.png)</p><p>当sigmoid函数的输入很大或是很小时，它的梯度都会消失。 此外，当反向传播通过许多层时，除非我们在刚刚好的地方， 这些地方sigmoid函数的输入接近于零，否则整个乘积的梯度可能会消失。 当我们的网络有很多层时，除非我们很小心，否则在某一层可能会切断梯度。 事实上，这个问题曾经困扰着深度网络的训练。 因此，更稳定的ReLU系列函数已经成为从业者的默认选择（虽然在神经科学的角度看起来不太合理）。</p><h4 id="2-梯度爆炸"><a href="#2-梯度爆炸" class="headerlink" title="2.梯度爆炸"></a>2.梯度爆炸</h4><p>梯度爆炸可能同样令人烦恼。 为了更好地说明这一点，我们生成100个高斯随机矩阵，并将它们与某个初始矩阵相乘。 对于我们选择的尺度（方差σ2&#x3D;1），矩阵乘积发生爆炸。 当这种情况是由于深度网络的初始化所导致时，我们没有机会让梯度下降优化器收敛。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python">M = torch.normal(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, size=(<span class="hljs-number">4</span>,<span class="hljs-number">4</span>))<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;一个矩阵 \n&#x27;</span>,M)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">100</span>):<br>    M = torch.mm(M,torch.normal(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, size=(<span class="hljs-number">4</span>, <span class="hljs-number">4</span>)))<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;乘以100个矩阵后\n&#x27;</span>, M)<br><br><br>一个矩阵<br> tensor([[ <span class="hljs-number">0.4382</span>, -<span class="hljs-number">0.7687</span>,  <span class="hljs-number">0.2731</span>, -<span class="hljs-number">0.2587</span>],<br>        [-<span class="hljs-number">0.1789</span>, -<span class="hljs-number">0.2395</span>,  <span class="hljs-number">1.4915</span>,  <span class="hljs-number">0.2634</span>],<br>        [-<span class="hljs-number">0.5272</span>,  <span class="hljs-number">0.2403</span>,  <span class="hljs-number">2.4397</span>, -<span class="hljs-number">0.7587</span>],<br>        [ <span class="hljs-number">0.9805</span>,  <span class="hljs-number">0.4166</span>, -<span class="hljs-number">0.1906</span>, -<span class="hljs-number">0.2581</span>]])<br>乘以<span class="hljs-number">100</span>个矩阵后<br> tensor([[ <span class="hljs-number">7.6616e+22</span>,  <span class="hljs-number">4.2587e+22</span>, -<span class="hljs-number">5.8065e+22</span>,  <span class="hljs-number">1.2980e+23</span>],<br>        [-<span class="hljs-number">2.3790e+21</span>, -<span class="hljs-number">1.3224e+21</span>,  <span class="hljs-number">1.8030e+21</span>, -<span class="hljs-number">4.0304e+21</span>],<br>        [-<span class="hljs-number">1.3796e+23</span>, -<span class="hljs-number">7.6687e+22</span>,  <span class="hljs-number">1.0456e+23</span>, -<span class="hljs-number">2.3373e+23</span>],<br>        [ <span class="hljs-number">8.5987e+20</span>,  <span class="hljs-number">4.7795e+20</span>, -<span class="hljs-number">6.5167e+20</span>,  <span class="hljs-number">1.4567e+21</span>]])<br></code></pre></td></tr></table></figure><h3 id="解决数值不稳定"><a href="#解决数值不稳定" class="headerlink" title="解决数值不稳定"></a>解决数值不稳定</h3><p><strong>目标：让梯度值在合理的范围内，例如【1e-6，1e3】</strong></p><p><strong>1.合理的权重初始化和激活函数</strong></p><p>合理化的权重是要把权重的在均值和方差保持在一个范围</p><p>Xavier初始化方法</p><p>一般采用Xavier初始化方法来进行初始化，意味着说激活函数应该近似是y&#x3D;x</p><p>常用激活函数</p><p>sigmoid(X) &#x3D; 1&#x2F;2 + x&#x2F;4 - x^3 &#x2F;48 + O(x^5)</p><p>tanh(x) &#x3D; 0+x-x^3&#x2F;3 + O(x^5)</p><p>Relu(x) &#x3D; 0 + x </p><p>调整sigmoid：</p><p>4*sigmoid(x) - 2</p><p>注：Relu：max(0,x)</p><p><strong>2.将乘法变加法</strong></p><p>   ResNet、LSTM</p><p><strong>3.归一化</strong></p><p>  梯度归一化，梯度裁剪</p><h2 id="Q-amp-A"><a href="#Q-amp-A" class="headerlink" title="Q&amp;A"></a>Q&amp;A</h2><p>1.nan和inf是怎么产生的？</p><p>nan是➗0导致的，inf是值太大了炸掉了。可以把学习率减少，合理的初始化权重，激活函数不要选错，简单的做法是lr调小，直到不出现nan或者inf为止，还有就是初始化权重的时候，可以方差取小一点，均值为0，方差可以取小点</p><p>2.训练过程中，如果网络层的输出的中间层特征元素的值突然变成nanle，是发生了梯度爆炸了嘛？</p><p>一般是梯度爆炸造成的</p><p>3.遇到复杂的数学公式，看文字描述也没什么感觉，怎么突破？</p><p>上数学课hhh，线形代数学一学概率论学一学呗，虽然深度学习没有用到太多的数学知识，但是你如果要去看别的模型，数学不好你可能就看不懂，也就玩不了别的模型</p><p>4.梯度消失可以说是因为使用了sigmoid激活函数引起的吗？所以我们可以用ReLU替换sigmoid解决梯度消失的问题？</p><p>sigmoid确实是会造成梯度消失，但不能说是梯度消失就是sigmoid造成的，还可能有其他原因。用ReLU可以代替sigmoid有可能解决这个问题，但是不能保证一定能解决</p><p>5.梯度爆炸是由什么激活函数引起的？</p><p>激活函数相对都是比较平滑的曲线，它的梯度一般不会有太大的问题。梯度爆炸的产生是每层输出的值太大，n个很大的数相乘会导致梯度爆炸</p><p>6.山地图可以可视化出来吗？我们可以把损失函数可视化出来来指导训练吗？</p><p>没有特别好的方法，但是有一些研究正在做</p><p>7.强制似的每一层的输出特征均值为0，方差为1，是不是损失了网络的表达能力？会降低学到的模型的准确率？</p><p>其实没有损失网络的表达能力，只是把它们拉到一个合理数值区间，只是让硬件更好处理和计算，从数学上来讲无论拉到什么区间都不会影响模型的可表达性</p><p>8.为什么4*sigmoid(x)-2可以提高稳定性？</p><p>其实是sigmoid做这样的处理后，它在0点附近的区间近视与y&#x3D;x</p><p>9.激活函数选择有什么建议吗？</p><p>用ReLU</p><p>10.一般权重是在每个epoch结束后更新的吧？</p><p>权重更新是在每个data_iter每个batch，每个epoch结束后是已经更新过很多次了</p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>Deep Learning</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Deep Learning</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>deep_learning_6.过拟合-暂退法(Dropout)</title>
    <link href="/posts/2022/08/4c9f5d12.html"/>
    <url>/posts/2022/08/4c9f5d12.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><h2 id="暂退法（Dropout）"><a href="#暂退法（Dropout）" class="headerlink" title="暂退法（Dropout）"></a>暂退法（Dropout）</h2><p>模型的泛化性越强，要求模型对其输入的微小变化越不敏感，也就是对噪声的适应能力越强。</p><p>那么关键是如何加入这种噪声，一种想法是<strong>无偏差（unbiased）</strong>的方式注入噪声。这样在固定住其他层时，每一层的期望值等于没有噪声时的值。我们把这种方法叫做暂退法。</p><p>暂退法其实就是在训练过程中丢弃（drop out）一些神经元。 在整个训练过程的每一次迭代中，标准暂退法包括在计算下一层之前将当前层中的一些节点置零。</p><p>无偏差的加入噪音</p><ul><li><p>对X加入噪音得到X‘，我们希望</p><p>$E[x’] &#x3D; x$</p></li><li><p>丢弃法对每个元素进行如下的扰动<br>$$<br>x_i’ &#x3D; \begin{cases} 0 \ , with\  probablity\  p  \<br>\frac {x_i}{1-p} \ , otherwise<br>\end{cases}<br>$$</p></li></ul><p>$E[x_i’] &#x3D; p<em>0 + (1-p)</em> \frac {x_i’}{(1-p)} &#x3D; x_i’$ </p><h2 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h2><p>要实现单层的暂退法函数， 我们从均匀分布U[0,1]中抽取样本，样本数与这层神经网络的维度一致。 然后我们保留那些对应样本大于p的节点，把剩下的丢弃。</p><p>在下面的代码中，我们实现 <code>dropout_layer</code> 函数， 该函数以<code>dropout</code>的概率丢弃张量输入<code>X</code>中的元素， 如上所述重新缩放剩余部分：将剩余部分除以<code>1.0-dropout</code>。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> torch<br><span class="hljs-keyword">from</span> torch <span class="hljs-keyword">import</span> nn<br><span class="hljs-keyword">from</span> d2l <span class="hljs-keyword">import</span> torch <span class="hljs-keyword">as</span> d2l<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">dropout_layer</span>(<span class="hljs-params">X, dropout</span>):<br>    <span class="hljs-keyword">assert</span> <span class="hljs-number">0</span> &lt;= dropout &lt;= <span class="hljs-number">1</span><br>    <span class="hljs-comment"># 在本情况中，所有元素都被丢弃</span><br>    <span class="hljs-keyword">if</span> dropout == <span class="hljs-number">1</span>:<br>        <span class="hljs-keyword">return</span> torch.zeros_like(X)<br>    <span class="hljs-comment"># 在本情况中，所有元素都被保留</span><br>    <span class="hljs-keyword">if</span> dropout == <span class="hljs-number">0</span>:<br>        <span class="hljs-keyword">return</span> X<br>    mask = (torch.rand(X.shape) &gt; dropout).<span class="hljs-built_in">float</span>()<br>    <span class="hljs-keyword">return</span> mask * X / (<span class="hljs-number">1.0</span> - dropout)<br></code></pre></td></tr></table></figure><p>我们可以通过下面几个例子来测试<code>dropout_layer</code>函数。 我们将输入<code>X</code>通过暂退法操作，暂退概率分别为0、0.5和1。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python">X = torch.arange(<span class="hljs-number">16</span>,dtype=torch.float32).reshape((<span class="hljs-number">2</span>,<span class="hljs-number">8</span>))<br><span class="hljs-built_in">print</span>(X)<br><span class="hljs-built_in">print</span>(drop_out_layer(X,<span class="hljs-number">0.</span>))<br><span class="hljs-built_in">print</span>(drop_out_layer(X,<span class="hljs-number">0.5</span>))<br><span class="hljs-built_in">print</span>(drop_out_layer(X,<span class="hljs-number">1.</span>))<br><span class="hljs-built_in">print</span>(torch.rand(X.shape) &gt; <span class="hljs-number">0.5</span>)<br><span class="hljs-built_in">print</span>((torch.rand(X.shape) &gt; <span class="hljs-number">0.5</span>).<span class="hljs-built_in">float</span>())<br></code></pre></td></tr></table></figure><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs lua">tensor(<span class="hljs-string">[[ 0.,  1.,  2.,  3.,  4.,  5.,  6.,  7.],</span><br><span class="hljs-string">        [ 8.,  9., 10., 11., 12., 13., 14., 15.]]</span>)<br>tensor(<span class="hljs-string">[[ 0.,  1.,  2.,  3.,  4.,  5.,  6.,  7.],</span><br><span class="hljs-string">        [ 8.,  9., 10., 11., 12., 13., 14., 15.]]</span>)<br>tensor(<span class="hljs-string">[[ 0.,  0.,  4.,  0.,  8., 10.,  0.,  0.],</span><br><span class="hljs-string">        [ 0., 18., 20., 22.,  0., 26.,  0., 30.]]</span>)<br>tensor(<span class="hljs-string">[[0., 0., 0., 0., 0., 0., 0., 0.],</span><br><span class="hljs-string">        [0., 0., 0., 0., 0., 0., 0., 0.]]</span>)<br>tensor(<span class="hljs-string">[[ True, False,  True, False,  True, False, False,  True],</span><br><span class="hljs-string">        [False,  True, False,  True, False,  True, False, False]]</span>)<br>tensor(<span class="hljs-string">[[0., 0., 1., 1., 1., 0., 0., 0.],</span><br><span class="hljs-string">        [0., 0., 1., 0., 1., 0., 1., 0.]]</span>)<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs python">num_inputs, num_outputs, num_hiddens1, num_hiddens2 = <span class="hljs-number">784</span>, <span class="hljs-number">10</span>, <span class="hljs-number">256</span>, <span class="hljs-number">256</span><br><br>dropout1, dropout2 = <span class="hljs-number">0.2</span>, <span class="hljs-number">0.5</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Net</span>(nn.Module):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, num_inputs, num_outputs, num_hiddens1, num_hiddens2,</span><br><span class="hljs-params">                 is_training = <span class="hljs-literal">True</span></span>):<br>        <span class="hljs-built_in">super</span>(Net, <span class="hljs-variable language_">self</span>).__init__()<br>        <span class="hljs-variable language_">self</span>.num_inputs = num_inputs<br>        <span class="hljs-variable language_">self</span>.training = is_training<br>        <span class="hljs-variable language_">self</span>.lin1 = nn.Linear(num_inputs, num_hiddens1)<br>        <span class="hljs-variable language_">self</span>.lin2 = nn.Linear(num_hiddens1, num_hiddens2)<br>        <span class="hljs-variable language_">self</span>.lin3 = nn.Linear(num_hiddens2, num_outputs)<br>        <span class="hljs-variable language_">self</span>.relu = nn.ReLU()<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">forward</span>(<span class="hljs-params">self, X</span>):<br>        H1 = <span class="hljs-variable language_">self</span>.relu(<span class="hljs-variable language_">self</span>.lin1(X.reshape((-<span class="hljs-number">1</span>, <span class="hljs-variable language_">self</span>.num_inputs))))<br>        <span class="hljs-comment"># 只有在训练模型时才使用dropout</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-variable language_">self</span>.training == <span class="hljs-literal">True</span>:<br>            <span class="hljs-comment"># 在第一个全连接层之后添加一个dropout层</span><br>            H1 = dropout_layer(H1, dropout1)<br>        H2 = <span class="hljs-variable language_">self</span>.relu(<span class="hljs-variable language_">self</span>.lin2(H1))<br>        <span class="hljs-keyword">if</span> <span class="hljs-variable language_">self</span>.training == <span class="hljs-literal">True</span>:<br>            <span class="hljs-comment"># 在第二个全连接层之后添加一个dropout层</span><br>            H2 = dropout_layer(H2, dropout2)<br>        out = <span class="hljs-variable language_">self</span>.lin3(H2)<br>        <span class="hljs-keyword">return</span> out<br><br><br>net = Net(num_inputs, num_outputs, num_hiddens1, num_hiddens2)<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">num_epochs, lr, batch_size = <span class="hljs-number">10</span>, <span class="hljs-number">0.5</span>, <span class="hljs-number">256</span><br>loss = nn.CrossEntropyLoss(reduction=<span class="hljs-string">&#x27;none&#x27;</span>)<br>train_iter, test_iter = d2l.load_data_fashion_mnist(batch_size)<br>trainer = torch.optim.SGD(net.parameters(), lr=lr)<br>d2l.train_ch3(net, train_iter, test_iter, loss, num_epochs, trainer)<br></code></pre></td></tr></table></figure><h2 id="简介代码实现"><a href="#简介代码实现" class="headerlink" title="简介代码实现"></a>简介代码实现</h2><p>对于深度学习框架的高级API，我们只需在每个全连接层之后添加一个<code>Dropout</code>层， 将暂退概率作为唯一的参数传递给它的构造函数。 在训练时，<code>Dropout</code>层将根据指定的暂退概率随机丢弃上一层的输出（相当于下一层的输入）。 在测试时，<code>Dropout</code>层仅传递数据。</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">net</span> = nn.Sequential(nn.Flatten(),<br>        <span class="hljs-attribute">nn</span>.Linear(<span class="hljs-number">784</span>, <span class="hljs-number">256</span>),<br>        <span class="hljs-attribute">nn</span>.ReLU(),<br>        <span class="hljs-comment"># 在第一个全连接层之后添加一个dropout层</span><br>        <span class="hljs-attribute">nn</span>.Dropout(dropout1),<br>        <span class="hljs-attribute">nn</span>.Linear(<span class="hljs-number">256</span>, <span class="hljs-number">256</span>),<br>        <span class="hljs-attribute">nn</span>.ReLU(),<br>        <span class="hljs-comment"># 在第二个全连接层之后添加一个dropout层</span><br>        <span class="hljs-attribute">nn</span>.Dropout(dropout2),<br>        <span class="hljs-attribute">nn</span>.Linear(<span class="hljs-number">256</span>, <span class="hljs-number">10</span>))<br><br><span class="hljs-attribute">def</span> init_weights(m):<br>    <span class="hljs-attribute">if</span> type(m) == nn.Linear:<br>        <span class="hljs-attribute">nn</span>.init.normal_(m.weight, std=<span class="hljs-number">0</span>.<span class="hljs-number">01</span>)<br><br><span class="hljs-attribute">net</span>.apply(init_weights);<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">trainer = torch.optim.SGD(net.parameters(), lr=lr)<br>d2l.train_ch3(net, train_iter, test_iter, loss, num_epochs, trainer)<br></code></pre></td></tr></table></figure><h2 id="Q-amp-A"><a href="#Q-amp-A" class="headerlink" title="Q&amp;A"></a>Q&amp;A</h2><p>1.丢弃法的丢弃依据是什么？如果丢弃不合理对输出的结果影响会很大？</p><p>所谓丢弃不合理，其实就是过大或过小，过小就还是过拟合，太大那么就是欠拟合，慢慢调超参数就好了</p><p>2.dropout随机置0对求梯度和反向传播的影响是什么？</p><p>dropout掉的对应的梯度不会更新</p><p>3.丢弃法是在训练中把神经元丢弃后训练，在预测时网络中的神经元没有丢弃吗？</p><p>是的，dropout其实是正则项，正则项唯一的作用是你在训练模型的时候，让你的模型复杂度变低一点，当你在做推理的时候你不会更新你的模型，这就是为什么在预测的时候不用dropout。</p><p>4.丢弃法是每次迭代一次，随机丢弃一次吗？</p><p>每一个层在调用前项运算的时候，随机丢一次，假如你3个隐藏层就是套3个dropout</p><p>5.dropout会不会让训练的loss曲线方差变大，不够平滑？</p><p>李沐说不care这件事情，没有具体去看过</p><p>6.在解决过拟合问题上，dropout和regularization的主要区别是什么？</p><p>可以认为dropout就是正则regularization</p><p>7.dropout层丢弃的是前一层还是后一层？</p><p>丢弃前一层的输出，后一层的输入</p><p>8.dropout和权重衰减都属于正则，为何dropout效果更好更常用呢？</p><p>dropout其实没有权重衰减常用，dropout是在全连接层使用，权重衰减对于卷积层啊之后的transformer都可以用。至于为什么效果更好，其实是dropout更好调参一点，权重衰减的weight没那么好调。</p><p>9.在同样的学习率lr上，dropout的介入会不会造成参数手链更慢，需要比没有dropout的情况下适当调大lr？</p><p>lr主要是对期望和方差敏感一点，dropout不改变期望，没有说dropout的情况下一定要调大lr，但你也可以试试。但会收敛变慢是可能的，等于是说你每次你更小的数量在更新梯度</p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>Deep Learning</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Deep Learning</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Mac电脑重新启动后hexo d需要输入密码</title>
    <link href="/posts/2022/08/7c9e9a40.html"/>
    <url>/posts/2022/08/7c9e9a40.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><h3 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h3><p>在一次我Mac电脑重启后，hexo部署文章时，需要手动输入密码</p><p>在确认ssh密钥已经配置后，开始网上搜索Mac重启后密钥失效问题。</p><h3 id="ssh密钥确认"><a href="#ssh密钥确认" class="headerlink" title="ssh密钥确认"></a>ssh密钥确认</h3><p>&#x2F;Users&#x2F;tingyu&#x2F;.ssh 目录下存在id_rsa和id_rsa.pub两个文件</p><p>![](<a href="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img%E6%88%AA%E5%B1%8F2022-08-11">https://raw.githubusercontent.com/YUTING0907/PicGo/main/img截屏2022-08-11</a> 下午11.16.32.png)</p><p>再去查看github的settings-》SSH and GPG keys也已经配置过</p><p>但是在执行<code>hexo d</code>命令的时候,仍然要求输入密码</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs shell">(base) tingyu@TINGdeMacBook-Pro blog % hexo d<br>INFO  Validating config<br>WARN  Deprecated config detected: &quot;external_link&quot; with a Boolean value is deprecated. See https://hexo.io/docs/configuration for more details.<br>INFO  Deploying: git<br>INFO  Clearing .deploy_git folder...<br>INFO  Copying files from public folder...<br>INFO  Copying files from extend dirs...<br>On branch master<br>nothing to commit, working tree clean<br>Enter passphrase for key &#x27;/Users/tingyu/.ssh/id_rsa&#x27;: <br></code></pre></td></tr></table></figure><h3 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h3><p>为了不必在重新启动后填写密码，请将以下内容添加到ssh配置文件中(通常位于<del>&#x2F;.ssh&#x2F;config)，即在</del>&#x2F;.ssh&#x2F;目录下新建config文件，写入以下内容</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">Host *<br>  UseKeychain <span class="hljs-built_in">yes</span><br>  AddKeysToAgent <span class="hljs-built_in">yes</span><br>  IdentityFile ~/.ssh/id_rsa<br></code></pre></td></tr></table></figure><p>之后密码会在重启Mac后被记住！</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs shell">(base) tingyu@TINGdeMacBook-Pro blog % hexo d<br>INFO  Validating config<br>WARN  Deprecated config detected: &quot;external_link&quot; with a Boolean value is deprecated. See https://hexo.io/docs/configuration for more details.<br>INFO  Deploying: git<br>INFO  Clearing .deploy_git folder...<br>INFO  Copying files from public folder...<br>INFO  Copying files from extend dirs...<br>On branch master<br>nothing to commit, working tree clean<br>Branch &#x27;master&#x27; set up to track remote branch &#x27;master&#x27; from &#x27;git@github.com:YUTING0907/YUTING0907.github.io.git&#x27;.<br>Everything up-to-date<br>INFO  Deploy done: git<br></code></pre></td></tr></table></figure><p>参考：<a href="https://www.codenong.com/21095054/">https://www.codenong.com/21095054/</a></p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>博客</category>
      
    </categories>
    
    
    <tags>
      
      <tag>hexo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Doris性能优化实战技巧</title>
    <link href="/posts/2022/08/4264fb91.html"/>
    <url>/posts/2022/08/4264fb91.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><h3 id="为什么选择Doris"><a href="#为什么选择Doris" class="headerlink" title="为什么选择Doris"></a>为什么选择Doris</h3><p>1.开源 Doris 和 Clickhouse 之间的优势和劣势是什么？</p><p>Doris 是 MPP 架构的数据库，这点是和 Clickhouse 从架构上有本质的不同。Doris 在 多表 Join 和分布式管理上更有优势，Clickhouse 单机性能突出。不过我们的向量化引擎也马上就能和大家见面了，性能上可以期待一下。</p><p>2.Doris 入门门槛高吗？超过多大的数据量比较合适使用 Doris ？哪些场景下特别适合doris数据库的发挥优势？哪些场景下 Doris 的性能不好？</p><p>Doris 入门门槛不高，G-TB的数据量都适合使用。Doris 因为没有其他依赖，所以运维会方便一些。场景方面，当然是面向分析的 OLAP 场景。OLTP 场景，比如 qps 上万的点查这类以及频繁的 update&#x2F;delete的场景并不适合 Doris。</p><p>3.您好，想要咨询一下关于物联网时序数据这种场景下是否适合？</p><p>之前也有社区用户使用 Doris 应用在时序场景的，主要瓶颈在写入频率，不建议特别高频的写入。</p><h3 id="操作"><a href="#操作" class="headerlink" title="操作"></a>操作</h3><p>4.对于聚合模型， MODIFY COLUMN 某一个已经存在的列, 从类型 BIGINT 变更为 VARCHAR , 该表按每天分区,每天数据量 1亿+，发现该表这一列历史数据过多，一直处于 SCHEMA_CHANGE【 state is not NORMAL】 状态 （大概5小时），导致后续其他的增加列，增加动态分区都不断失败重试,直到表恢复 NORMAL 状态才成功。这种情况有什么建议吗？</p><p>同一时间单个表只能做一个 schema change 操作。所以做第一个 schema change 的时候后面增加列和增加分区的操作都被禁止了。schema change 的时间过长主要原因是表数据量大导致的。对于这种大表的表结构变更最好是等到业务不太忙的时候，比如半夜。再者，如果需要多次 schema change 建议合并为一次。</p><p>5.Doris 现在是否支持修改列的名称？</p><p>因为一些历史原因，目前列名称是直接写入到数据文件中的。Doris 在查询时，也是通过类名查找到对应的列的。所以修改列名不仅是简单的元数据修改，还会涉及到数据的重写，是一个非常重的操作。后续可能通过一些兼容手段来支持轻量化的列名修改操作。</p><p>6.通过 Broker Load 导入数据时，总偶然碰到查询超时，而且这个问题是必现，我怎么定位问题？</p><p>导入过程中的查询超时，建议先看监控，grafana 上的数据。比如是否导入占用了过多的 IO或者 cpu 等，导致了相互影响，再逐步根据 pprof + 代码分析。</p><p>7.Doris 集群 不定期的出现某个 BE 节点直接挂掉的情况，每次挂掉的 BE 节点并不一样。查看监控看机器 Load 比较高（主要是磁盘IO write高）怎么排查这个问题，怎么知道这台机器上在做什么，有什么命令可以知道。</p><p>BE 挂掉最常见的两种情况：</p><p>第一：oom 被系统 Kill，通过 dmesg 方式排查，并且结合使用方式确定 导入还是查询导致的内存使用量过大，需要优化使用方式。</p><p>第二：be core 了，通过 core dump 方式找到 core 栈，core 栈就可以看到是哪部分行为导致的 BE 挂掉。并且在 Issue 里面搜索，看是否是 Doris 旧版本已知问题。每次不一样节点，那就要逐个分析，可能虽然节点不一样但原因都一样。</p><h3 id="查询优化"><a href="#查询优化" class="headerlink" title="查询优化"></a>查询优化</h3><p>8.在 Apache Doris 中，如果表按天分区，每天大约 2000 至 3000 万数据量，通常按照业务字段查询最近 30 天的明细信息。如何设计能支持更多的并发查询呢？</p><p>如果是明细查询，建议利用<strong>前缀索引、分桶分区裁剪以及 Bitmap 索引</strong>这类的优化策略。</p><p>9.如果是 Uniq 数据模型，在查询的过程中存在对数据的 update 操作，那么对查询会有哪些影响呢？</p><p>update 操作可以，如果 update 的操作频率和导入占比很小，就不会对查询有影响。</p><p>10.请教下 Doris 集群规模为 6个 BE节点，在聚合模型下用天 Date做时间分区、每天数据近2亿行，发现 select max(date) 性能不佳（接近10秒），看了下执行计划发现全表扫描了，这样设计的主要考虑是什么呢？</p><p>确实，如果对 Range 分区字段求 Max 或者 Min 等，逻辑上可以只读最大分区数据。Doris 没对这种特殊场景做优化，所以是全表扫描。需要增加 Where 条件从而匹配到分区分桶裁剪，才能减少数据量。比如这样写 select max(date) from table where date &gt;xxx。分区字段和索引字段需要出现在 Where 条件中效果最好。</p><p>11.关于性能优化这方面，与数据类型是否有什么关联，各种数据源中的表联合查询的时候，对于复杂类型的性能优化是从哪方面着手的？</p><p>和数据类型关系还是很大的。比如 Int 类型的性能就会比 String 要好。复杂类型的性能优化我举个 Bitmap 的例子。Bitmap 的聚合函数在 Bitmap 分布相对稠密情况下，会比稀疏的要性能高不少。</p><p>12.请问高吞吐量的即席查询实时性如何，比如1张1亿条数据的表，查出200万条数据，大约需要多少毫秒?</p><p>这个差异可能会非常大，需要结合建表语句、查询 SQL 、机器配置、集群规模等多方面因素综合来看。在 Doris 官网上基于 Star-Schema-Benchmark 标准测试数据集做过性能测试，可以参考一下 <a href="https://doris.apache.org/zh-CN/benchmark/star-schema-benchmark.html#">https://doris.apache.org/zh-CN/benchmark/star-schema-benchmark.html#</a></p><p>13.接口性能优化都有哪些好的方案？</p><p>首先要看你的情况是提升 QPS 还是提升单个慢查询。</p><p>先说慢查询：</p><p>第一，打开 Profile 观察慢查询主要的性能瓶</p><p>第二，梳理 Doris 的常见优化，比如 Join Reorder 、Runtime Filter、谓词下推等等需要手动开启的优化策略，并观察作用。</p><p>第三，从数据模型入手，比如是否存在数据版本过多、数据模型和列类型设计不合理等等问题。</p><p>14.请教一下分桶的优化技巧？</p><p>数据分桶主要是为了分桶裁剪，并且避免数据倾斜。所以首先，最好选用像 id，uuid 这种不容易产生数据倾斜，且分散广的列作为分桶列。同时可以选择查询的 Where 条件列作为分桶列，来更好的减少读取的数据量，提升查询性能。</p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>Doris</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Doris</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>deep_learning_5.过拟合-权重衰减法</title>
    <link href="/posts/2022/08/7a70fccc.html"/>
    <url>/posts/2022/08/7a70fccc.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><p>出现过拟合的现象，是数据集的大小不能够支撑现有的模型。除了收集更多的数据外（大多数情况耗时短期内不可能做到），可以引入正则化来处理过拟合的问题。</p><h2 id="正则化"><a href="#正则化" class="headerlink" title="正则化"></a>正则化</h2><p>正则化一般分为两种，一种是L1范数，一种是L2范数。L2正则化线性模型构成经典的<em>岭回归</em>（ridge regression）算法， L1正则化线性回归是统计学中类似的基本模型， 通常被称为<em>套索回归</em>（lasso regression）。 </p><p><strong>为什么我们首先使用L2范数，而不是L1范数？</strong></p><p>使用L2范数的一个原因是它对权重向量的大分量施加了巨大的惩罚。 这使得我们的学习算法偏向于在大量特征上均匀分布权重的模型。 在实践中，这可能使它们对单个变量中的观测误差更为稳定。 相比之下，L1惩罚会导致模型将权重集中在一小部分特征上， 而将其他权重清除为零。 这称为<em>特征选择</em>（feature selection），这可能是其他场景下需要的。</p><p> L2正则化回归的小批量随机梯度下降更新如下式：</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20220807163459.png"></p><p>我们根据估计值与观测值之间的差异来更新w。 </p><p>然而，我们同时也在试图将w的大小缩小到零。 这就是为什么这种方法有时被称为<em>权重衰减</em>。 我们仅考虑惩罚项，优化算法在训练的每一步<em>衰减</em>权重。 与特征选择相比，权重衰减为我们提供了一种连续的机制来调整函数的复杂度。 较小的λ值对应较少约束的w， 而较大的λ值对w的约束更大。</p><h2 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h2><p>下面将从头开始实现权重衰减，只需将L2的平方惩罚添加到原始目标函数中。</p><h3 id="1-初始化模型参数"><a href="#1-初始化模型参数" class="headerlink" title="1. 初始化模型参数"></a>1. 初始化模型参数</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">init_params</span>():<br>    w = torch.normal(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, size=(num_inputs, <span class="hljs-number">1</span>), requires_grad=<span class="hljs-literal">True</span>)<br>    b = torch.zeros(<span class="hljs-number">1</span>, requires_grad=<span class="hljs-literal">True</span>)<br>    <span class="hljs-keyword">return</span> [w, b]<br></code></pre></td></tr></table></figure><h3 id="2-定义L2范数惩罚"><a href="#2-定义L2范数惩罚" class="headerlink" title="2.定义L2范数惩罚"></a>2.定义L2范数惩罚</h3><p>实现这一惩罚最方便的方法是对所有项求平方后并将它们求和。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">l2_penalty</span>(<span class="hljs-params">w</span>):<br>    <span class="hljs-keyword">return</span> torch.<span class="hljs-built_in">sum</span>(w.<span class="hljs-built_in">pow</span>(<span class="hljs-number">2</span>)) / <span class="hljs-number">2</span><br></code></pre></td></tr></table></figure><h3 id="3-定义训练代码实现"><a href="#3-定义训练代码实现" class="headerlink" title="3.定义训练代码实现"></a>3.定义训练代码实现</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">train</span>(<span class="hljs-params">lambd</span>):<br>    w, b = init_params()<br>    net, loss = <span class="hljs-keyword">lambda</span> X: d2l.linreg(X, w, b), d2l.squared_loss<br>    num_epochs, lr = <span class="hljs-number">100</span>, <span class="hljs-number">0.003</span><br>    animator = d2l.Animator(xlabel=<span class="hljs-string">&#x27;epochs&#x27;</span>, ylabel=<span class="hljs-string">&#x27;loss&#x27;</span>, yscale=<span class="hljs-string">&#x27;log&#x27;</span>,<br>                            xlim=[<span class="hljs-number">5</span>, num_epochs], legend=[<span class="hljs-string">&#x27;train&#x27;</span>, <span class="hljs-string">&#x27;test&#x27;</span>])<br>    <span class="hljs-keyword">for</span> epoch <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(num_epochs):<br>        <span class="hljs-keyword">for</span> X, y <span class="hljs-keyword">in</span> train_iter:<br>            <span class="hljs-comment"># 增加了L2范数惩罚项，</span><br>            <span class="hljs-comment"># 广播机制使l2_penalty(w)成为一个长度为batch_size的向量</span><br>            l = loss(net(X), y) + lambd * l2_penalty(w)<br>            l.<span class="hljs-built_in">sum</span>().backward()<br>            d2l.sgd([w, b], lr, batch_size)<br>        <span class="hljs-keyword">if</span> (epoch + <span class="hljs-number">1</span>) % <span class="hljs-number">5</span> == <span class="hljs-number">0</span>:<br>            animator.add(epoch + <span class="hljs-number">1</span>, (d2l.evaluate_loss(net, train_iter, loss),<br>                                     d2l.evaluate_loss(net, test_iter, loss)))<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;w的L2范数是：&#x27;</span>, torch.norm(w).item())<br></code></pre></td></tr></table></figure><h3 id="4-忽略正则化直接训练"><a href="#4-忽略正则化直接训练" class="headerlink" title="4.忽略正则化直接训练"></a>4.忽略正则化直接训练</h3><p>我们现在用<code>lambd = 0</code>禁用权重衰减后运行这个代码。 注意，这里训练误差有了减少，但测试误差没有减少， 这意味着出现了严重的过拟合。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">train(lambd=<span class="hljs-number">0</span>)<br>w的L2范数： <span class="hljs-number">13.860143661499023</span><br></code></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20220807171557.png"></p><h3 id="5-使用权重衰减"><a href="#5-使用权重衰减" class="headerlink" title="5.使用权重衰减"></a>5.使用权重衰减</h3><p>下面，我们使用权重衰减来运行代码。 注意，在这里训练误差增大，但测试误差减小。 这正是我们期望从正则化中得到的效果。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">train(lambd=<span class="hljs-number">3</span>)<br>w的L2范数： <span class="hljs-number">0.490328311920166</span><br></code></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20220807171625.png"></p><h3 id="简洁实现"><a href="#简洁实现" class="headerlink" title="简洁实现"></a>简洁实现</h3><p>在下面的代码中，我们在实例化优化器时直接通过<code>weight_decay</code>指定weight decay超参数。 默认情况下，PyTorch同时衰减权重和偏移。 这里我们只为权重设置了<code>weight_decay</code>，所以偏置参数b不会衰减。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">train_concise</span>(<span class="hljs-params">wd</span>):<br>    net = nn.Sequential(nn.Linear(num_inputs, <span class="hljs-number">1</span>))<br>    <span class="hljs-keyword">for</span> param <span class="hljs-keyword">in</span> net.parameters():<br>        param.data.normal_()<br>    loss = nn.MSELoss(reduction=<span class="hljs-string">&#x27;none&#x27;</span>)<br>    num_epochs, lr = <span class="hljs-number">100</span>, <span class="hljs-number">0.003</span><br>    <span class="hljs-comment"># 偏置参数没有衰减</span><br>    trainer = torch.optim.SGD([<br>        &#123;<span class="hljs-string">&quot;params&quot;</span>:net[<span class="hljs-number">0</span>].weight,<span class="hljs-string">&#x27;weight_decay&#x27;</span>: wd&#125;,<br>        &#123;<span class="hljs-string">&quot;params&quot;</span>:net[<span class="hljs-number">0</span>].bias&#125;], lr=lr)<br>    animator = d2l.Animator(xlabel=<span class="hljs-string">&#x27;epochs&#x27;</span>, ylabel=<span class="hljs-string">&#x27;loss&#x27;</span>, yscale=<span class="hljs-string">&#x27;log&#x27;</span>,<br>                            xlim=[<span class="hljs-number">5</span>, num_epochs], legend=[<span class="hljs-string">&#x27;train&#x27;</span>, <span class="hljs-string">&#x27;test&#x27;</span>])<br>    <span class="hljs-keyword">for</span> epoch <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(num_epochs):<br>        <span class="hljs-keyword">for</span> X, y <span class="hljs-keyword">in</span> train_iter:<br>            trainer.zero_grad()<br>            l = loss(net(X), y)<br>            l.mean().backward()<br>            trainer.step()<br>        <span class="hljs-keyword">if</span> (epoch + <span class="hljs-number">1</span>) % <span class="hljs-number">5</span> == <span class="hljs-number">0</span>:<br>            animator.add(epoch + <span class="hljs-number">1</span>,<br>                         (d2l.evaluate_loss(net, train_iter, loss),<br>                          d2l.evaluate_loss(net, test_iter, loss)))<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;w的L2范数：&#x27;</span>, net[<span class="hljs-number">0</span>].weight.norm().item())<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">train_concise(<span class="hljs-number">0</span>)<br>w的L2范数： <span class="hljs-number">14.026016235351562</span><br></code></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20220807171933.png"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">train_concise(<span class="hljs-number">3</span>)<br>w的L2范数： <span class="hljs-number">0.7186794877052307</span><br></code></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20220807172016.png"></p><h2 id="Q-amp-A"><a href="#Q-amp-A" class="headerlink" title="Q&amp;A"></a>Q&amp;A</h2><ol><li>为什么可以通过使用均方范数作为硬性限制来降低模型复杂度(模型容量)？或者说限制参数值(w,b)的选择范围来控制模型容量？</li></ol><p>简单来说就是一个多项式中的高次项的系数变小了，函数也就变平滑了。限制参数值是为了让模型的训练过程中从那些平滑的曲线中去选，而不是波动特别大的曲线</p><ol start="2"><li>实践中权重衰退的值一般设置多少为好呢？之前在跑代码的时候总感觉权重衰退的效果并不是那么好？</li></ol><p>一般是取0.01,0.001,0.0001,权重衰退有效果但不要太指望，如果你的模型真的特别复杂，权重衰退是不会给你带来很好的效果，需要换别的方法。</p><ol start="3"><li>为什么要把w往小的拉？如果最优解的W就是比较大的数，那权重衰减是不是会有反作用？</li></ol><p>假设是存在真正的最优解，但实际你是学不到这个最优解的，数据有噪声，模型会尝试去记住所有的数据，合适的λ(w前面乘的值)可以把曲线拉到合适地方，不是说越小越好</p><ol start="4"><li>λ作为超参数是怎么调优的？</li></ol><p>看验证集和训练集的loss值的差别，上节讲到的k-fold可以帮助调超参数</p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>Deep Learning</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Deep Learning</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>deep_learning_4.模型选择&amp;欠拟合和过拟合</title>
    <link href="/posts/2022/08/38d9bd1.html"/>
    <url>/posts/2022/08/38d9bd1.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><h2 id="模型选择"><a href="#模型选择" class="headerlink" title="模型选择"></a>模型选择</h2><p>在机器学习中，我们通常在评估几个候选模型后选择最终的模型。 这个过程叫做<em>模型选择</em>。 有时，需要进行比较的模型在本质上是完全不同的（比如，决策树与线性模型）。</p><p> 又有时，我们需要<strong>比较不同的超参数</strong>设置下的同一类模型。</p><p>例如，训练多层感知机模型时，我们可能希望比较具有 不同数量的隐藏层、不同数量的隐藏单元以及不同的激活函数组合的模型。 为了确定候选模型中的最佳模型，我们通常会使用验证集。</p><h3 id="验证集"><a href="#验证集" class="headerlink" title="验证集"></a>验证集</h3><p>原则上，在我们确定所有的超参数之前，我们不希望用到测试集。 如果我们在模型选择过程中使用测试数据，可能会有过拟合测试数据的风险</p><p>因此，我们决不能依靠测试数据进行模型选择。 然而，我们也不能仅仅依靠训练数据来选择模型，因为我们无法估计训练数据的泛化误差。</p><p>虽然理想情况下我们只会使用测试数据一次， 以评估最好的模型或比较一些模型效果，但现实是测试数据很少在使用一次后被丢弃。 我们很少能有充足的数据来对每一轮实验采用全新测试集。</p><p>解决此问题的常见做法是将我们的数据分成三份， 除了<strong>训练和测试数据集</strong>之外，还增加一个<strong>验证数据集</strong>（validation dataset）， 也叫<em>验证集</em>（validation set）。</p><p> 但现实是验证数据和测试数据之间的边界模糊得令人担忧。 </p><h3 id="K-折交叉验证"><a href="#K-折交叉验证" class="headerlink" title="K 折交叉验证"></a>K 折交叉验证</h3><p>当训练数据稀缺时，我们甚至可能无法提供足够的数据来构成一个合适的验证集。 这个问题的一个流行的解决方案是采用K<em>折交叉验证</em>。 这里，原始训练数据被分成K个不重叠的子集。 然后执行K次模型训练和验证，每次在K−1个子集上进行训练， 并在剩余的一个子集（在该轮中没有用于训练的子集）上进行验证。 最后，通过对K次实验的结果取平均来估计训练和验证误差。</p><h2 id="欠拟合和过拟合"><a href="#欠拟合和过拟合" class="headerlink" title="欠拟合和过拟合"></a>欠拟合和过拟合</h2><p>当我们比较训练和验证误差时，我们要注意两种常见的情况。</p><p> 首先，当训练误差和验证误差都很严重， 且它们之间仅有一点差距。 如果模型不能降低训练误差，这可能意味着模型过于简单（即表达能力不足）， 无法捕获试图学习的模式。 此外，由于我们的训练和验证误差之间的<em>泛化误差</em>很小， 我们有理由相信可以用一个更复杂的模型降低训练误差。 这种现象被称为<em>欠拟合</em>（underfitting）。</p><p>另一方面，当我们的训练误差明显低于验证误差时要小心， 这表明严重的<em>过拟合</em>（overfitting）。 注意，<em>过拟合</em>并不总是一件坏事。 特别是在深度学习领域，众所周知， 最好的预测模型在训练数据上的表现往往比在保留（验证）数据上好得多。 最终，我们通常更关心验证误差，而不是训练误差和验证误差之间的差距。</p><p>对于模型的欠拟合和过拟合有两个重要的影响因素：<strong>第一，模型复杂度，第二，数据集大小</strong></p><ul><li><p>当数据集大小不变时，模型越复杂过拟合程度就会越高，也就是在训练集上的误差小，在测试集上的误差相差较大</p></li><li><p>另一个重要因素是数据集的大小。 训练数据集中的样本越少，我们就越有可能（且更严重地）过拟合。 随着训练数据量的增加，泛化误差通常会减小。 此外，一般来说，更多的数据不会有什么坏处。</p></li></ul><p>对于固定的任务和数据分布，模型复杂性和数据集大小之间通常存在关系。 给出更多的数据，我们可能会尝试拟合一个更复杂的模型。 能够拟合更复杂的模型可能是有益的。 如果没有足够的数据，简单的模型可能更有用。 </p><p>对于许多任务，深度学习只有在有数千个训练样本时才优于线性模型。 从一定程度上来说，深度学习目前的生机要归功于 廉价存储、互联设备以及数字化经济带来的海量数据集。</p><h3 id="欠拟合过拟合实验"><a href="#欠拟合过拟合实验" class="headerlink" title="欠拟合过拟合实验"></a>欠拟合过拟合实验</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> math<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">import</span> torch<br><span class="hljs-keyword">from</span> torch <span class="hljs-keyword">import</span> nn<br>!pip install d2l<br><span class="hljs-keyword">from</span> d2l <span class="hljs-keyword">import</span> torch <span class="hljs-keyword">as</span> d2l<br><br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python">max_degree = <span class="hljs-number">20</span> <span class="hljs-comment"># 多项式的最大阶数</span><br>n_train,n_test = <span class="hljs-number">100</span>, <span class="hljs-number">100</span> <span class="hljs-comment"># 训练和测试数据集的大小</span><br>true_w = np.zeros(max_degree)<br>true_w[<span class="hljs-number">0</span>:<span class="hljs-number">4</span>] = np.array([<span class="hljs-number">5</span>,<span class="hljs-number">1.2</span>,-<span class="hljs-number">3.4</span>,<span class="hljs-number">5.6</span>])<br><br>features = np.random.normal(size=(n_train+n_test,<span class="hljs-number">1</span>))<br>np.random.shuffle(features)<br>poly_features = np.power(features,np.arange(max_degree).reshape(<span class="hljs-number">1</span>,-<span class="hljs-number">1</span>))<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(max_degree):<br>  poly_features[:,i] /= math.gamma(i+<span class="hljs-number">1</span>) <span class="hljs-comment"># gamma(n) = (n-1)!</span><br><br>labels = np.dot(poly_features,true_w)<br>labels += np.random.normal(scale=<span class="hljs-number">0.1</span>,size=labels.shape)<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">true_w,features,poly_features,labels = [torch.tensor(x,dtype=torch.float32) <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> [true_w,features,poly_features,labels]]<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">features[:<span class="hljs-number">2</span>],poly_features[:<span class="hljs-number">2</span>,:],labels[:<span class="hljs-number">2</span>]<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">evaluate_loss</span>(<span class="hljs-params">net,data_iter,loss</span>):<br>  metirc = d2l.Accumulator(<span class="hljs-number">2</span>)<br>  <span class="hljs-keyword">for</span> X,y <span class="hljs-keyword">in</span> data_iter:<br>    out = net(X)<br>    y = y.reshape(out.shape)<br>    l = loss(out,y)<br>    metirc.add(l.<span class="hljs-built_in">sum</span>(),l.numel())<br>  <span class="hljs-keyword">return</span> metirc[<span class="hljs-number">0</span>] / metirc[<span class="hljs-number">1</span>]<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">train</span>(<span class="hljs-params">train_features, test_features, train_labels, test_labels,</span><br><span class="hljs-params">          num_epochs=<span class="hljs-number">400</span></span>):<br>    loss = nn.MSELoss(reduction=<span class="hljs-string">&#x27;none&#x27;</span>)<br>    input_shape = train_features.shape[-<span class="hljs-number">1</span>]<br>    <span class="hljs-comment"># 不设置偏置，因为我们已经在多项式中实现了它</span><br>    net = nn.Sequential(nn.Linear(input_shape, <span class="hljs-number">1</span>, bias=<span class="hljs-literal">False</span>))<br>    batch_size = <span class="hljs-built_in">min</span>(<span class="hljs-number">10</span>, train_labels.shape[<span class="hljs-number">0</span>])<br>    train_iter = d2l.load_array((train_features, train_labels.reshape(-<span class="hljs-number">1</span>,<span class="hljs-number">1</span>)),<br>                                batch_size)<br>    test_iter = d2l.load_array((test_features, test_labels.reshape(-<span class="hljs-number">1</span>,<span class="hljs-number">1</span>)),<br>                               batch_size, is_train=<span class="hljs-literal">False</span>)<br>    trainer = torch.optim.SGD(net.parameters(), lr=<span class="hljs-number">0.01</span>)<br>    animator = d2l.Animator(xlabel=<span class="hljs-string">&#x27;epoch&#x27;</span>, ylabel=<span class="hljs-string">&#x27;loss&#x27;</span>, yscale=<span class="hljs-string">&#x27;log&#x27;</span>,<br>                            xlim=[<span class="hljs-number">1</span>, num_epochs], ylim=[<span class="hljs-number">1e-3</span>, <span class="hljs-number">1e2</span>],<br>                            legend=[<span class="hljs-string">&#x27;train&#x27;</span>, <span class="hljs-string">&#x27;test&#x27;</span>])<br>    <span class="hljs-keyword">for</span> epoch <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(num_epochs):<br>        d2l.train_epoch_ch3(net, train_iter, loss, trainer)<br>        <span class="hljs-keyword">if</span> epoch == <span class="hljs-number">0</span> <span class="hljs-keyword">or</span> (epoch + <span class="hljs-number">1</span>) % <span class="hljs-number">20</span> == <span class="hljs-number">0</span>:<br>            animator.add(epoch + <span class="hljs-number">1</span>, (evaluate_loss(net, train_iter, loss),<br>                                     evaluate_loss(net, test_iter, loss)))<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;weight:&#x27;</span>, net[<span class="hljs-number">0</span>].weight.data.numpy())<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># matplotlib版本过高，会导致下面画图报错，故而降低版本</span><br>! pip uninstall matplotlib<br>! pip install matplotlib==<span class="hljs-number">3.0</span><span class="hljs-number">.0</span><br><br></code></pre></td></tr></table></figure><h3 id="三阶多项式函数拟合-正常"><a href="#三阶多项式函数拟合-正常" class="headerlink" title="三阶多项式函数拟合(正常)"></a>三阶多项式函数拟合(正常)</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 从多项式特征中选择前4个维度，即1,x,x^2/2!,x^3/3!</span><br>train(poly_features[:n_train, :<span class="hljs-number">4</span>], poly_features[n_train:, :<span class="hljs-number">4</span>],<br>      labels[:n_train], labels[n_train:])<br></code></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20220806211046.png"></p><h3 id="线性函数拟合-欠拟合"><a href="#线性函数拟合-欠拟合" class="headerlink" title="线性函数拟合(欠拟合)"></a>线性函数拟合(欠拟合)</h3><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20220806211133.png"></p><h3 id="高阶多项式函数拟合-过拟合"><a href="#高阶多项式函数拟合-过拟合" class="headerlink" title="高阶多项式函数拟合(过拟合)"></a>高阶多项式函数拟合(过拟合)</h3><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20220806211216.png"></p><h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><ul><li>欠拟合是指模型无法继续减少训练误差。过拟合是指训练误差远小于验证误差。</li><li>由于不能基于训练误差来估计泛化误差，因此简单地最小化训练误差并不一定意味着泛化误差的减小。机器学习模型需要注意防止过拟合，即防止泛化误差过大。</li><li>我们应该选择一个复杂度适当的模型，避免使用数量不足的训练样本。</li></ul><h2 id="Q-amp-A"><a href="#Q-amp-A" class="headerlink" title="Q&amp;A"></a>Q&amp;A</h2><ol><li>k则交叉验证中的k怎么确定？</li></ol><p>k在能承受的计算成本里面，k越大越好</p><ol start="2"><li>模型参数和超参数不一样吗？</li></ol><p>模型参数是这w和b，超参数是指学习率，如果是多层感知机选择多少层</p><ol start="3"><li>类别不平衡怎么办？</li></ol><p>可以把验证数据集平衡一下，或者可以加权重</p><ol start="4"><li>k折交叉验证的目的是确定超参数吗？然后还要用这个超参数再训练一遍全数据吗？</li></ol><p>最常见的做法是k折验证之后确定超参数，整个数据集上再全部训练一次</p><p>第二个做法是，不再训练了，就在k折中找出训练最好的那一折模型拿出来</p><p>第三种做法是，验证的k个模型全部拿出来，测试数据集对k个模型每一个都测一次，然后把预测结果取均值。坏处是代价变成k倍了，之前只用过一遍，现在要过k遍了，但好处是说模型稳定性更好了，因为你做了一个voting。</p><ol start="5"><li>为什么svm打败了多层感知机，后来深度学习cnn又打败了svm呢？</li></ol><p>学术界其实就是赶时髦，svm打败了多层感知机是因为不那么要调参，并且有数学理论，有人推就火了。深度学习打败svm是实际效果很好，精度高了很多。其实也不要纠结这个事情，学术界这个东西可能今天火了的东西，明天又不火了。一波又一波的</p><ol start="6"><li>如果训练是不平衡的，是否先考虑测试集是否也是不平衡的，再去决定是否使用一个平衡的验证集？</li></ol><p>首先要考虑真实的世界中，是不是一类就是百分之九十，剩下的一类就是百分之十。如果是因为采样的原因，你就应该吧小的那个百分之十的权重提升</p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>Deep Learning</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Deep Learning</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>deep_learning_3.多层感知机的从零实现</title>
    <link href="/posts/2022/07/f1f173e2.html"/>
    <url>/posts/2022/07/f1f173e2.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><p><strong>单层感知机模型</strong>，给定输入x，权重w，和偏移b，感知机输出：</p><p>o &#x3D; O(&lt;w,x&gt; + b )   O(i) &#x3D; {1, if x&gt;0; -1 otherwise}</p><p>感知机模型为二分类：-1或1</p><ul><li>vs 回归 输出实数</li><li>vs Softmax回归 输出概率</li></ul><p>单层感知机不能划分XOR数据（亦或），对于这一点，我们可以使用多层感知机模型。我们可以通过在网络中加入一个或多个隐藏层来克服线性模型的限制， 使其能处理更普遍的函数关系类型。 要做到这一点，最简单的方法是将许多全连接层堆叠在一起。 每一层都输出到上面的层，直到生成最后的输出。 我们可以把前L−1层看作表示，把最后一层看作线性预测器。 </p><p>这种架构通常称为<em>多层感知机</em>（multilayer perceptron），通常缩写为<em>MLP</em>。</p><p><strong>多层感知机模型</strong></p><p>   <strong>h1</strong> &#x3D; O(<strong>W1*x</strong> + <strong>b1</strong>)</p><p>   <strong>h2</strong> &#x3D; O(<strong>W2*h1</strong> + <strong>b2</strong>)</p><p>   <strong>h3</strong> &#x3D; O(<strong>W3*h2</strong> + <strong>b3</strong>)</p><p>  <strong>o</strong> &#x3D; <strong>W4*h3</strong> + <strong>b4</strong></p><p>最后一层不需要激活函数，激活函数主要是用来避免层数的塌陷。</p><p><strong>常用的激活函数：</strong></p><ul><li>ReLU函数，ReLU提供了一种非常简单的非线性变换。</li></ul><p>ReLU(x) &#x3D; max(x,0)</p><ul><li>sigmoid函数,<em>sigmoid函数</em>将输入变换为区间(0, 1)上的输出</li></ul><p>Sigmoid(x) &#x3D; $\frac{1}{1+exp(-x)}$</p><ul><li>tanh函数</li></ul><p>tanh(x) &#x3D; $\frac{1-exp(-2x)}{1+exp(-2x)}$</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><br><span class="hljs-keyword">import</span> torch<br><span class="hljs-keyword">from</span> torch <span class="hljs-keyword">import</span> nn<br><span class="hljs-keyword">from</span> d2l <span class="hljs-keyword">import</span> torch <span class="hljs-keyword">as</span> d2l<br><br>batch_size = <span class="hljs-number">256</span><br>train_iter, test_iter = d2l.load_data_fashion_mnist(batch_size)<br></code></pre></td></tr></table></figure><h2 id="多层感知机从零实现"><a href="#多层感知机从零实现" class="headerlink" title="多层感知机从零实现"></a>多层感知机从零实现</h2><h3 id="1-初始化模型参数"><a href="#1-初始化模型参数" class="headerlink" title="1.初始化模型参数"></a>1.初始化模型参数</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python">num_inputs, num_outputs, num_hiddens = <span class="hljs-number">784</span>, <span class="hljs-number">10</span>, <span class="hljs-number">256</span><br><br>W1 = nn.Parameter(torch.randn(<br>    num_inputs, num_hiddens, requires_grad=<span class="hljs-literal">True</span>) * <span class="hljs-number">0.01</span>)<br>b1 = nn.Parameter(torch.zeros(num_hiddens, requires_grad=<span class="hljs-literal">True</span>))<br>W2 = nn.Parameter(torch.randn(<br>    num_hiddens, num_outputs, requires_grad=<span class="hljs-literal">True</span>) * <span class="hljs-number">0.01</span>)<br>b2 = nn.Parameter(torch.zeros(num_outputs, requires_grad=<span class="hljs-literal">True</span>))<br><br>params = [W1, b1, W2, b2]<br></code></pre></td></tr></table></figure><h3 id="2-激活函数"><a href="#2-激活函数" class="headerlink" title="2.激活函数"></a>2.激活函数</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">relu</span>(<span class="hljs-params">X</span>):<br>    a = torch.zeros_like(X)<br>    <span class="hljs-keyword">return</span> torch.<span class="hljs-built_in">max</span>(X, a)<br></code></pre></td></tr></table></figure><h3 id="3-模型"><a href="#3-模型" class="headerlink" title="3.模型"></a>3.模型</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">net</span>(<span class="hljs-params">X</span>):<br>    X = X.reshape((-<span class="hljs-number">1</span>, num_inputs))<br>    H = relu(X@W1 + b1)  <span class="hljs-comment"># 这里“@”代表矩阵乘法</span><br>    <span class="hljs-keyword">return</span> (H@W2 + b2)<br></code></pre></td></tr></table></figure><h3 id="4-损失函数"><a href="#4-损失函数" class="headerlink" title="4.损失函数"></a>4.损失函数</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">loss = nn.CrossEntropyLoss(reduction=<span class="hljs-string">&#x27;none&#x27;</span>)<br></code></pre></td></tr></table></figure><h3 id="5-训练"><a href="#5-训练" class="headerlink" title="5.训练"></a>5.训练</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">num_epochs, lr = <span class="hljs-number">10</span>, <span class="hljs-number">0.1</span><br>updater = torch.optim.SGD(params, lr=lr)<br>d2l.train_ch3(net, train_iter, test_iter, loss, num_epochs, updater)<br></code></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20220806114407.png"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">d2l.predict_ch3(net, test_iter)<br></code></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20220806114524.png"></p><h2 id="多层感知机的简介实现"><a href="#多层感知机的简介实现" class="headerlink" title="多层感知机的简介实现"></a>多层感知机的简介实现</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> torch<br><span class="hljs-keyword">from</span> torch <span class="hljs-keyword">import</span> nn<br><span class="hljs-keyword">from</span> d2l <span class="hljs-keyword">import</span> torch <span class="hljs-keyword">as</span> d2l<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python">添加了<span class="hljs-number">2</span>个全连接层（之前我们只添加了<span class="hljs-number">1</span>个全连接层）。 第一层是隐藏层，它包含<span class="hljs-number">256</span>个隐藏单元，并使用了ReLU激活函数。 第二层是输出层<br>net = nn.Sequential(nn.Flatten(),<br>                    nn.Linear(<span class="hljs-number">784</span>, <span class="hljs-number">256</span>),<br>                    nn.ReLU(),<br>                    nn.Linear(<span class="hljs-number">256</span>, <span class="hljs-number">10</span>))<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">init_weights</span>(<span class="hljs-params">m</span>):<br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">type</span>(m) == nn.Linear:<br>        nn.init.normal_(m.weight, std=<span class="hljs-number">0.01</span>)<br><br>net.apply(init_weights);<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python">batch_size, lr, num_epochs = <span class="hljs-number">256</span>, <span class="hljs-number">0.1</span>, <span class="hljs-number">10</span><br>loss = nn.CrossEntropyLoss(reduction=<span class="hljs-string">&#x27;none&#x27;</span>)<br>trainer = torch.optim.SGD(net.parameters(), lr=lr)<br><br>train_iter, test_iter = d2l.load_data_fashion_mnist(batch_size)<br>d2l.train_ch3(net, train_iter, test_iter, loss, num_epochs, trainer)<br></code></pre></td></tr></table></figure><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>多层感知机使用隐藏层和激活函数来得到非线形模型</p><p>常用的激活函数是Sigmoid，Tanh，ReLU（没有想法的时候，通常用ReLU）</p><p>使用Softmax来处理多类分类</p><p>超参数为隐藏层数，和各个隐藏层大小</p><p>对于设置隐藏层数大小，没有科学的方法解释，只能全凭手感</p><h2 id="Q-amp-A"><a href="#Q-amp-A" class="headerlink" title="Q&amp;A"></a>Q&amp;A</h2><ol><li>epoch是什么？和batch_size有什么不同？</li></ol><p>一次epoch是指将所有数据训练一次，所有数据迭代一次不够的，实际训练中，要反复多次才能收敛。batch_size则是在一次训练中把所有数据分成几批进行模型的训练，因为模型的训练是把数据加载到内存中处理的，没办法一次性把所有数据加载到内存中处理的</p><ol start="2"><li>隐藏层的层数怎么设置？</li></ol><p>输入维数比较多的时候，比如128维的输入你要把它压缩到10维的空间的话，最好是慢慢的把它压缩，比如先到64，再到32，再到16等，最后到你的输出。</p><p>还有一种做法是，先压缩再扩张再压缩，这样做会避免模型的overfitting</p><ol start="3"><li>神经网络中的一层是包括了线形函数和激活函数的</li><li>SVM替换了多层感知机吗？</li></ol><p>SVM用起来更简单，不用调那么多超参数，有很漂亮的数学解释，在实用性都差不多的情况下，学术界会更倾向于有数学解释的模型</p><ol start="5"><li>请问神经网络要增加隐藏层的层数，而不是神经元的个数？</li></ol><p>增加神经元的个数，学习起来很难，浅显解释就是不能一口吃一个胖子，先学习一点，每一层可以慢慢训练</p><ol start="6"><li>不同任务下的激活函数是不是都不一样？也是通过实验来确认的吗？</li></ol><p>一般都差不多，激活函数远远没有选择隐藏层的大小这些来的重要，可以尽量用ReLU</p><ol start="7"><li>模型深度和宽度哪个更影响性能，怎么根据输入空间选择最优的深度或者宽度？</li></ol><p>没有最优，哪有最优哈哈哈，慢慢尝试，比如说128到2，首先不要隐藏层，第二次加一个隐藏层，比如试下16，32，64，第三次可以再试下加两个隐藏层。这些就是老中医要自己试手感</p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>Deep Learning</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Deep Learning</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>deep_learning-2.softmax回归的从零实现</title>
    <link href="/posts/2022/07/32f91c2c.html"/>
    <url>/posts/2022/07/32f91c2c.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><h2 id="softmax回归"><a href="#softmax回归" class="headerlink" title="softmax回归"></a>softmax回归</h2><p>回归可以用于预测<em>多少</em>的问题。 比如预测房屋被售出价格，或者棒球队可能获得的胜场数，又或者患者住院的天数。</p><p>事实上，我们也对<em>分类</em>问题感兴趣：不是问“多少”，而是问“哪一个”：</p><ul><li>某个电子邮件是否属于垃圾邮件文件夹？</li><li>某个用户可能<em>注册</em>或<em>不注册</em>订阅服务？</li><li>某个图像描绘的是驴、狗、猫、还是鸡？</li><li>某人接下来最有可能看哪部电影？</li></ul><p>通常，机器学习实践者用<em>分类</em>这个词来描述两个有微妙差别的问题： 1. 我们只对样本的“硬性”类别感兴趣，即属于哪个类别； 2. 我们希望得到“软性”类别，即得到属于每个类别的概率。 这两者的界限往往很模糊。其中的一个原因是：即使我们只关心硬类别，我们仍然使用软类别的模型。</p><h3 id="分类问题"><a href="#分类问题" class="headerlink" title="分类问题"></a>分类问题</h3><p>我们从一个图像分类问题开始。 假设每次输入是一个2×2的灰度图像。 我们可以用一个标量表示每个像素值，每个图像对应四个特征x1,x2,x3,x4。 此外，假设每个图像属于类别“猫”，“鸡”和“狗”中的一个。</p><p>接下来，我们要选择如何表示标签。 我们有两个明显的选择：最直接的想法是选择y∈{1,2,3}， 其中整数分别代表狗猫鸡{狗,猫,鸡}。 这是在计算机上存储此类信息的有效方法。 如果类别间有一些自然顺序， 比如说我们试图预测婴儿儿童青少年青年人中年人老年人{婴儿,儿童,青少年,青年人,中年人,老年人}， 那么将这个问题转变为回归问题，并且保留这种格式是有意义的。</p><p>但是一般的分类问题并不与类别之间的自然顺序有关。 幸运的是，统计学家很早以前就发明了一种表示分类数据的简单方法：<em>独热编码</em>（one-hot encoding）。 独热编码是一个向量，它的分量和类别一样多。 类别对应的分量设置为1，其他所有分量设置为0。 在我们的例子中，标签y将是一个三维向量， 其中(1,0,0)对应于“猫”、(0,1,0)对应于“鸡”、(0,0,1)对应于“狗”：</p><h3 id="softmax运算"><a href="#softmax运算" class="headerlink" title="softmax运算"></a>softmax运算</h3><p>现在我们将优化参数以最大化观测数据的概率。 为了得到预测结果，我们将设置一个阈值，如选择具有最大概率的标签。</p><p>我们希望模型的输出y^j可以视为属于类j的概率， 然后选择具有最大输出值的类别argmaxjyj作为我们的预测。 例如，如果y^1、y^2和y^3分别为0.1、0.8和0.1， 那么我们预测的类别是2，在我们的例子中代表“鸡”。</p><p>然而我们能否将未规范化的预测o直接视作我们感兴趣的输出呢？ 答案是否定的。 因为将线性层的输出直接视为概率时存在一些问题： 一方面，我们没有限制这些输出数字的总和为1。 另一方面，根据输入的不同，它们可以为负值。</p><p>要将输出视为概率，我们必须保证在任何数据上的输出都是非负的且总和为1。 此外，我们需要一个训练目标，来鼓励模型精准地估计概率。 在分类器输出0.5的所有样本中，我们希望这些样本有一半实际上属于预测的类。 这个属性叫做<em>校准</em>（calibration）。</p><h2 id="Softmax的从零开始实现"><a href="#Softmax的从零开始实现" class="headerlink" title="Softmax的从零开始实现"></a>Softmax的从零开始实现</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> torch<br><span class="hljs-keyword">from</span> IPython <span class="hljs-keyword">import</span> display<br><span class="hljs-keyword">from</span> d2l <span class="hljs-keyword">import</span> torch <span class="hljs-keyword">as</span> d2l<br><br>batch_size = <span class="hljs-number">256</span><br>train_iter, test_iter = d2l.load_data_fashion_mnist(batch_size)<br></code></pre></td></tr></table></figure><h3 id="1-初始化模型参数"><a href="#1-初始化模型参数" class="headerlink" title="1.初始化模型参数"></a>1.初始化模型参数</h3><p>和之前线性回归的例子一样，这里的每个样本都将用固定长度的向量表示。 原始数据集中的每个样本都是28×28的图像。 在本节中，我们将展平每个图像，把它们看作长度为784的向量。 在后面的章节中，我们将讨论能够利用图像空间结构的特征， 但现在我们暂时只把每个像素位置看作一个特征。</p><p>回想一下，在softmax回归中，我们的输出与类别一样多。 因为我们的数据集有10个类别，所以网络输出维度为10。 因此，权重将构成一个784×10的矩阵， 偏置将构成一个1×10的行向量。 与线性回归一样，我们将使用正态分布初始化我们的权重<code>W</code>，偏置初始化为0。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">num_inputs = <span class="hljs-number">784</span><br>num_outputs = <span class="hljs-number">10</span><br><br>W = torch.normal(<span class="hljs-number">0</span>, <span class="hljs-number">0.01</span>, size=(num_inputs, num_outputs), requires_grad=<span class="hljs-literal">True</span>)<br>b = torch.zeros(num_outputs, requires_grad=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></table></figure><h3 id="2-定义softmax操作"><a href="#2-定义softmax操作" class="headerlink" title="2.定义softmax操作"></a>2.定义softmax操作</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">X = torch.tensor([[<span class="hljs-number">1.0</span>, <span class="hljs-number">2.0</span>, <span class="hljs-number">3.0</span>], [<span class="hljs-number">4.0</span>, <span class="hljs-number">5.0</span>, <span class="hljs-number">6.0</span>]])<br>X.<span class="hljs-built_in">sum</span>(<span class="hljs-number">0</span>, keepdim=<span class="hljs-literal">True</span>), X.<span class="hljs-built_in">sum</span>(<span class="hljs-number">1</span>, keepdim=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></table></figure><p>回想一下，实现softmax由三个步骤组成：</p><ol><li>对每个项求幂（使用<code>exp</code>）；</li><li>对每一行求和（小批量中每个样本是一行），得到每个样本的规范化常数；</li><li>将每一行除以其规范化常数，确保结果的和为1。</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">softmax</span>(<span class="hljs-params">X</span>):<br>    X_exp = torch.exp(X)<br>    partition = X_exp.<span class="hljs-built_in">sum</span>(<span class="hljs-number">1</span>, keepdim=<span class="hljs-literal">True</span>)<br>    <span class="hljs-keyword">return</span> X_exp / partition  <span class="hljs-comment"># 这里应用了广播机制</span><br>  <br>X = torch.normal(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, (<span class="hljs-number">2</span>, <span class="hljs-number">5</span>))<br>X_prob = softmax(X)<br>X_prob, X_prob.<span class="hljs-built_in">sum</span>(<span class="hljs-number">1</span>)<br><br>(tensor([[<span class="hljs-number">0.2290</span>, <span class="hljs-number">0.1027</span>, <span class="hljs-number">0.1771</span>, <span class="hljs-number">0.0187</span>, <span class="hljs-number">0.4725</span>],<br>         [<span class="hljs-number">0.0509</span>, <span class="hljs-number">0.2083</span>, <span class="hljs-number">0.6785</span>, <span class="hljs-number">0.0430</span>, <span class="hljs-number">0.0193</span>]]),<br> tensor([<span class="hljs-number">1.</span>, <span class="hljs-number">1.</span>]))<br></code></pre></td></tr></table></figure><h3 id="3-定义模型"><a href="#3-定义模型" class="headerlink" title="3. 定义模型"></a>3. 定义模型</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">net</span>(<span class="hljs-params">X</span>):<br>    <span class="hljs-keyword">return</span> softmax(torch.matmul(X.reshape((-<span class="hljs-number">1</span>, W.shape[<span class="hljs-number">0</span>])), W) + b)<br></code></pre></td></tr></table></figure><h3 id="4-定义损失函数"><a href="#4-定义损失函数" class="headerlink" title="4.定义损失函数"></a>4.定义损失函数</h3><p>回顾一下，交叉熵采用真实标签的预测概率的负对数似然。 这里我们不使用Python的for循环迭代预测（这往往是低效的）， 而是通过一个运算符选择所有元素。 下面，我们创建一个数据样本<code>y_hat</code>，其中包含2个样本在3个类别的预测概率， 以及它们对应的标签<code>y</code>。 有了<code>y</code>，我们知道在第一个样本中，第一类是正确的预测； 而在第二个样本中，第三类是正确的预测。 然后使用<code>y</code>作为<code>y_hat</code>中概率的索引， 我们选择第一个样本中第一个类的概率和第二个样本中第三个类的概率。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">y = torch.tensor([<span class="hljs-number">0</span>, <span class="hljs-number">2</span>])<br>y_hat = torch.tensor([[<span class="hljs-number">0.1</span>, <span class="hljs-number">0.3</span>, <span class="hljs-number">0.6</span>], [<span class="hljs-number">0.3</span>, <span class="hljs-number">0.2</span>, <span class="hljs-number">0.5</span>]])<br>y_hat[[<span class="hljs-number">0</span>, <span class="hljs-number">1</span>], y]<br><br>tensor([<span class="hljs-number">0.1000</span>, <span class="hljs-number">0.5000</span>])<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">cross_entropy</span>(<span class="hljs-params">y_hat, y</span>):<br>    <span class="hljs-keyword">return</span> - torch.log(y_hat[<span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(y_hat)), y])<br><br>cross_entropy(y_hat, y)<br><br>tensor([<span class="hljs-number">2.3026</span>, <span class="hljs-number">0.6931</span>])<br></code></pre></td></tr></table></figure><h3 id="5-分类精度"><a href="#5-分类精度" class="headerlink" title="5.分类精度"></a>5.分类精度</h3><p>给定预测概率分布<code>y_hat</code>，当我们必须输出硬预测（hard prediction）时， 我们通常选择预测概率最高的类。 许多应用都要求我们做出选择。如Gmail必须将电子邮件分类为“Primary（主要邮件）”、 “Social（社交邮件）”、“Updates（更新邮件）”或“Forums（论坛邮件）”。 Gmail做分类时可能在内部估计概率，但最终它必须在类中选择一个。</p><p>当预测与标签分类<code>y</code>一致时，即是正确的。 分类精度即正确预测数量与总预测数量之比。 虽然直接优化精度可能很困难（因为精度的计算不可导）， 但精度通常是我们最关心的性能衡量标准，我们在训练分类器时几乎总会关注它。</p><p>为了计算精度，我们执行以下操作。 首先，如果<code>y_hat</code>是矩阵，那么假定第二个维度存储每个类的预测分数。 我们使用<code>argmax</code>获得每行中最大元素的索引来获得预测类别。 然后我们将预测类别与真实<code>y</code>元素进行比较。 由于等式运算符“<code>==</code>”对数据类型很敏感， 因此我们将<code>y_hat</code>的数据类型转换为与<code>y</code>的数据类型一致。 结果是一个包含0（错）和1（对）的张量。 最后，我们求和会得到正确预测的数量。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">accuracy</span>(<span class="hljs-params">y_hat, y</span>):  <span class="hljs-comment">#@save</span><br>    <span class="hljs-string">&quot;&quot;&quot;计算预测正确的数量&quot;&quot;&quot;</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(y_hat.shape) &gt; <span class="hljs-number">1</span> <span class="hljs-keyword">and</span> y_hat.shape[<span class="hljs-number">1</span>] &gt; <span class="hljs-number">1</span>:<br>        y_hat = y_hat.argmax(axis=<span class="hljs-number">1</span>)<br>    cmp = y_hat.<span class="hljs-built_in">type</span>(y.dtype) == y<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">float</span>(cmp.<span class="hljs-built_in">type</span>(y.dtype).<span class="hljs-built_in">sum</span>())<br></code></pre></td></tr></table></figure><p>我们将继续使用之前定义的变量<code>y_hat</code>和<code>y</code>分别作为预测的概率分布和标签。 可以看到，第一个样本的预测类别是2（该行的最大元素为0.6，索引为2），这与实际标签0不一致。 第二个样本的预测类别是2（该行的最大元素为0.5，索引为2），这与实际标签2一致。 因此，这两个样本的分类精度率为0.5。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">accuracy(y_hat, y) / <span class="hljs-built_in">len</span>(y)<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python">同样，对于任意数据迭代器data_iter可访问的数据集， 我们可以评估在任意模型net的精度。<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">evaluate_accuracy</span>(<span class="hljs-params">net, data_iter</span>):  <span class="hljs-comment">#@save</span><br>    <span class="hljs-string">&quot;&quot;&quot;计算在指定数据集上模型的精度&quot;&quot;&quot;</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(net, torch.nn.Module):<br>        net.<span class="hljs-built_in">eval</span>()  <span class="hljs-comment"># 将模型设置为评估模式</span><br>    metric = Accumulator(<span class="hljs-number">2</span>)  <span class="hljs-comment"># 正确预测数、预测总数</span><br>    <span class="hljs-keyword">with</span> torch.no_grad():<br>        <span class="hljs-keyword">for</span> X, y <span class="hljs-keyword">in</span> data_iter:<br>            metric.add(accuracy(net(X), y), y.numel())<br>    <span class="hljs-keyword">return</span> metric[<span class="hljs-number">0</span>] / metric[<span class="hljs-number">1</span>]<br></code></pre></td></tr></table></figure><p>这里定义一个实用程序类<code>Accumulator</code>，用于对多个变量进行累加。 在上面的<code>evaluate_accuracy</code>函数中， 我们在<code>Accumulator</code>实例中创建了2个变量， 分别用于存储正确预测的数量和预测的总数量。 当我们遍历数据集时，两者都将随着时间的推移而累加。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Accumulator</span>:  <span class="hljs-comment">#@save</span><br>    <span class="hljs-string">&quot;&quot;&quot;在n个变量上累加&quot;&quot;&quot;</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, n</span>):<br>        <span class="hljs-variable language_">self</span>.data = [<span class="hljs-number">0.0</span>] * n<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">self, *args</span>):<br>        <span class="hljs-variable language_">self</span>.data = [a + <span class="hljs-built_in">float</span>(b) <span class="hljs-keyword">for</span> a, b <span class="hljs-keyword">in</span> <span class="hljs-built_in">zip</span>(<span class="hljs-variable language_">self</span>.data, args)]<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">reset</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-variable language_">self</span>.data = [<span class="hljs-number">0.0</span>] * <span class="hljs-built_in">len</span>(<span class="hljs-variable language_">self</span>.data)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__getitem__</span>(<span class="hljs-params">self, idx</span>):<br>        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">self</span>.data[idx]<br></code></pre></td></tr></table></figure><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">evaluate_accuracy</span><span class="hljs-params">(net, test_iter)</span></span><br></code></pre></td></tr></table></figure><h3 id="6-训练"><a href="#6-训练" class="headerlink" title="6.训练"></a>6.训练</h3><p>首先，我们定义一个函数来训练一个迭代周期。 请注意，<code>updater</code>是更新模型参数的常用函数，它接受批量大小作为参数。 它可以是<code>d2l.sgd</code>函数，也可以是框架的内置优化函数。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">train_epoch_ch3</span>(<span class="hljs-params">net, train_iter, loss, updater</span>):  <span class="hljs-comment">#@save</span><br>    <span class="hljs-string">&quot;&quot;&quot;训练模型一个迭代周期（定义见第3章）&quot;&quot;&quot;</span><br>    <span class="hljs-comment"># 将模型设置为训练模式</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(net, torch.nn.Module):<br>        net.train()<br>    <span class="hljs-comment"># 训练损失总和、训练准确度总和、样本数</span><br>    metric = Accumulator(<span class="hljs-number">3</span>)<br>    <span class="hljs-keyword">for</span> X, y <span class="hljs-keyword">in</span> train_iter:<br>        <span class="hljs-comment"># 计算梯度并更新参数</span><br>        y_hat = net(X)<br>        l = loss(y_hat, y)<br>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(updater, torch.optim.Optimizer):<br>            <span class="hljs-comment"># 使用PyTorch内置的优化器和损失函数</span><br>            updater.zero_grad()<br>            l.mean().backward()<br>            updater.step()<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-comment"># 使用定制的优化器和损失函数</span><br>            l.<span class="hljs-built_in">sum</span>().backward()<br>            updater(X.shape[<span class="hljs-number">0</span>])<br>        metric.add(<span class="hljs-built_in">float</span>(l.<span class="hljs-built_in">sum</span>()), accuracy(y_hat, y), y.numel())<br>    <span class="hljs-comment"># 返回训练损失和训练精度</span><br>    <span class="hljs-keyword">return</span> metric[<span class="hljs-number">0</span>] / metric[<span class="hljs-number">2</span>], metric[<span class="hljs-number">1</span>] / metric[<span class="hljs-number">2</span>]<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Animator</span>:  <span class="hljs-comment">#@save</span><br>    <span class="hljs-string">&quot;&quot;&quot;在动画中绘制数据&quot;&quot;&quot;</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, xlabel=<span class="hljs-literal">None</span>, ylabel=<span class="hljs-literal">None</span>, legend=<span class="hljs-literal">None</span>, xlim=<span class="hljs-literal">None</span>,</span><br><span class="hljs-params">                 ylim=<span class="hljs-literal">None</span>, xscale=<span class="hljs-string">&#x27;linear&#x27;</span>, yscale=<span class="hljs-string">&#x27;linear&#x27;</span>,</span><br><span class="hljs-params">                 fmts=(<span class="hljs-params"><span class="hljs-string">&#x27;-&#x27;</span>, <span class="hljs-string">&#x27;m--&#x27;</span>, <span class="hljs-string">&#x27;g-.&#x27;</span>, <span class="hljs-string">&#x27;r:&#x27;</span></span>), nrows=<span class="hljs-number">1</span>, ncols=<span class="hljs-number">1</span>,</span><br><span class="hljs-params">                 figsize=(<span class="hljs-params"><span class="hljs-number">3.5</span>, <span class="hljs-number">2.5</span></span>)</span>):<br>        <span class="hljs-comment"># 增量地绘制多条线</span><br>        <span class="hljs-keyword">if</span> legend <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:<br>            legend = []<br>        d2l.use_svg_display()<br>        <span class="hljs-variable language_">self</span>.fig, <span class="hljs-variable language_">self</span>.axes = d2l.plt.subplots(nrows, ncols, figsize=figsize)<br>        <span class="hljs-keyword">if</span> nrows * ncols == <span class="hljs-number">1</span>:<br>            <span class="hljs-variable language_">self</span>.axes = [<span class="hljs-variable language_">self</span>.axes, ]<br>        <span class="hljs-comment"># 使用lambda函数捕获参数</span><br>        <span class="hljs-variable language_">self</span>.config_axes = <span class="hljs-keyword">lambda</span>: d2l.set_axes(<br>            <span class="hljs-variable language_">self</span>.axes[<span class="hljs-number">0</span>], xlabel, ylabel, xlim, ylim, xscale, yscale, legend)<br>        <span class="hljs-variable language_">self</span>.X, <span class="hljs-variable language_">self</span>.Y, <span class="hljs-variable language_">self</span>.fmts = <span class="hljs-literal">None</span>, <span class="hljs-literal">None</span>, fmts<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">self, x, y</span>):<br>        <span class="hljs-comment"># 向图表中添加多个数据点</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">hasattr</span>(y, <span class="hljs-string">&quot;__len__&quot;</span>):<br>            y = [y]<br>        n = <span class="hljs-built_in">len</span>(y)<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">hasattr</span>(x, <span class="hljs-string">&quot;__len__&quot;</span>):<br>            x = [x] * n<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-variable language_">self</span>.X:<br>            <span class="hljs-variable language_">self</span>.X = [[] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-variable language_">self</span>.Y:<br>            <span class="hljs-variable language_">self</span>.Y = [[] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br>        <span class="hljs-keyword">for</span> i, (a, b) <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(<span class="hljs-built_in">zip</span>(x, y)):<br>            <span class="hljs-keyword">if</span> a <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span> <span class="hljs-keyword">and</span> b <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:<br>                <span class="hljs-variable language_">self</span>.X[i].append(a)<br>                <span class="hljs-variable language_">self</span>.Y[i].append(b)<br>        <span class="hljs-variable language_">self</span>.axes[<span class="hljs-number">0</span>].cla()<br>        <span class="hljs-keyword">for</span> x, y, fmt <span class="hljs-keyword">in</span> <span class="hljs-built_in">zip</span>(<span class="hljs-variable language_">self</span>.X, <span class="hljs-variable language_">self</span>.Y, <span class="hljs-variable language_">self</span>.fmts):<br>            <span class="hljs-variable language_">self</span>.axes[<span class="hljs-number">0</span>].plot(x, y, fmt)<br>        <span class="hljs-variable language_">self</span>.config_axes()<br>        display.display(<span class="hljs-variable language_">self</span>.fig)<br>        display.clear_output(wait=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></table></figure><p>接下来我们实现一个训练函数， 它会在<code>train_iter</code>访问到的训练数据集上训练一个模型<code>net</code>。 该训练函数将会运行多个迭代周期（由<code>num_epochs</code>指定）。 在每个迭代周期结束时，利用<code>test_iter</code>访问到的测试数据集对模型进行评估。 我们将利用<code>Animator</code>类来可视化训练进度。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">train_ch3</span>(<span class="hljs-params">net, train_iter, test_iter, loss, num_epochs, updater</span>):  <span class="hljs-comment">#@save</span><br>    <span class="hljs-string">&quot;&quot;&quot;训练模型（定义见第3章）&quot;&quot;&quot;</span><br>    animator = Animator(xlabel=<span class="hljs-string">&#x27;epoch&#x27;</span>, xlim=[<span class="hljs-number">1</span>, num_epochs], ylim=[<span class="hljs-number">0.3</span>, <span class="hljs-number">0.9</span>],<br>                        legend=[<span class="hljs-string">&#x27;train loss&#x27;</span>, <span class="hljs-string">&#x27;train acc&#x27;</span>, <span class="hljs-string">&#x27;test acc&#x27;</span>])<br>    <span class="hljs-keyword">for</span> epoch <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(num_epochs):<br>        train_metrics = train_epoch_ch3(net, train_iter, loss, updater)<br>        test_acc = evaluate_accuracy(net, test_iter)<br>        animator.add(epoch + <span class="hljs-number">1</span>, train_metrics + (test_acc,))<br>    train_loss, train_acc = train_metrics<br>    <span class="hljs-keyword">assert</span> train_loss &lt; <span class="hljs-number">0.5</span>, train_loss<br>    <span class="hljs-keyword">assert</span> train_acc &lt;= <span class="hljs-number">1</span> <span class="hljs-keyword">and</span> train_acc &gt; <span class="hljs-number">0.7</span>, train_acc<br>    <span class="hljs-keyword">assert</span> test_acc &lt;= <span class="hljs-number">1</span> <span class="hljs-keyword">and</span> test_acc &gt; <span class="hljs-number">0.7</span>, test_acc<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">lr = <span class="hljs-number">0.1</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">updater</span>(<span class="hljs-params">batch_size</span>):<br>    <span class="hljs-keyword">return</span> d2l.sgd([W, b], lr, batch_size)<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">num_epochs = <span class="hljs-number">10</span><br>train_ch3(net, train_iter, test_iter, cross_entropy, num_epochs, updater)<br></code></pre></td></tr></table></figure><h3 id="7-预测"><a href="#7-预测" class="headerlink" title="7.预测"></a>7.预测</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">predict_ch3</span>(<span class="hljs-params">net, test_iter, n=<span class="hljs-number">6</span></span>):  <span class="hljs-comment">#@save</span><br>    <span class="hljs-string">&quot;&quot;&quot;预测标签（定义见第3章）&quot;&quot;&quot;</span><br>    <span class="hljs-keyword">for</span> X, y <span class="hljs-keyword">in</span> test_iter:<br>        <span class="hljs-keyword">break</span><br>    trues = d2l.get_fashion_mnist_labels(y)<br>    preds = d2l.get_fashion_mnist_labels(net(X).argmax(axis=<span class="hljs-number">1</span>))<br>    titles = [true +<span class="hljs-string">&#x27;\n&#x27;</span> + pred <span class="hljs-keyword">for</span> true, pred <span class="hljs-keyword">in</span> <span class="hljs-built_in">zip</span>(trues, preds)]<br>    d2l.show_images(<br>        X[<span class="hljs-number">0</span>:n].reshape((n, <span class="hljs-number">28</span>, <span class="hljs-number">28</span>)), <span class="hljs-number">1</span>, n, titles=titles[<span class="hljs-number">0</span>:n])<br><br>predict_ch3(net, test_iter)<br></code></pre></td></tr></table></figure><h2 id="Softmax的简洁实现"><a href="#Softmax的简洁实现" class="headerlink" title="Softmax的简洁实现"></a>Softmax的简洁实现</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> torch<br><span class="hljs-keyword">from</span> torch <span class="hljs-keyword">import</span> nn<br><span class="hljs-keyword">from</span> d2l <span class="hljs-keyword">import</span> torch <span class="hljs-keyword">as</span> d2l<br><br>batch_size = <span class="hljs-number">256</span><br>train_iter, test_iter = d2l.load_data_fashion_mnist(batch_size)<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">############## 1. 初始化模型参数################</span><br><br><span class="hljs-comment"># PyTorch不会隐式地调整输入的形状。因此，</span><br><span class="hljs-comment"># 我们在线性层前定义了展平层（flatten），来调整网络输入的形状</span><br>net = nn.Sequential(nn.Flatten(), nn.Linear(<span class="hljs-number">784</span>, <span class="hljs-number">10</span>))<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">init_weights</span>(<span class="hljs-params">m</span>):<br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">type</span>(m) == nn.Linear:<br>        nn.init.normal_(m.weight, std=<span class="hljs-number">0.01</span>)<br><br>net.apply(init_weights);<br><br><span class="hljs-comment">############## 2. 重新审视Softmax的实现################</span><br>loss = nn.CrossEntropyLoss(reduction=<span class="hljs-string">&#x27;none&#x27;</span>)<br><br><span class="hljs-comment">############## 3. 优化算法 ###########################</span><br>trainer = torch.optim.SGD(net.parameters(), lr=<span class="hljs-number">0.1</span>)<br><br><span class="hljs-comment">############## 4. 训练 ##############################</span><br>num_epochs = <span class="hljs-number">10</span><br>d2l.train_ch3(net, train_iter, test_iter, loss, num_epochs, trainer)<br></code></pre></td></tr></table></figure><h2 id="Q-amp-A"><a href="#Q-amp-A" class="headerlink" title="Q&amp;A"></a>Q&amp;A</h2><p>问题1: softmax回归和logistic回归分析是一样的吗？</p><p>softmax回归是多分类，logistic回归是2分类问题</p><p>问题2: batch_size设置为1或者设置为4，设置4是设置为1的4倍速度吗？</p><p>不是的，batch_size的大小与否，它的计算量都是不会发生变化的，发生变化的是计算的并行度是不是能增加使得整个执行的效率能不能增加</p><p>问题3: 在计算精度的时候，为什么需要使用new.eval()将模型设置成评估模式？</p><p>设置eval模式是为了不算梯度，默认是会算梯度的，可以不用开，但在性能上可能会好一点。</p><p>问题4: 如何把自己的图片数据集用于训练？</p><p>pytorch官方文档可以去看一下，是支持本地照片用训练集的</p><p>参考：<a href="https://zh-v2.d2l.ai/">https://zh-v2.d2l.ai</a></p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>Deep Learning</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Deep Learning</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>PyTorch框架-TensorDataset</title>
    <link href="/posts/2022/07/8bd2f176.html"/>
    <url>/posts/2022/07/8bd2f176.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><p>在学习深度学习前有必要先学习下当下深度学习的主流框架PyTorch、tensorflow、MXnet，但本篇文章主要介绍PyTorch的TensorDataset和DataLoader。我目前接触的框架也只有PyTorch，其他框架自己按需学习吧 :)</p><p>先看下面的代码，就能大致知道TensorDataset和DataLoader是干什么的了</p><h2 id="TensorDataset"><a href="#TensorDataset" class="headerlink" title="TensorDataset"></a>TensorDataset</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># TensorDataset 学习</span><br><span class="hljs-comment"># DataLoader 学习</span><br><span class="hljs-keyword">from</span> torch.utils.data <span class="hljs-keyword">import</span> TensorDataset<br><span class="hljs-keyword">import</span> torch<br><span class="hljs-keyword">from</span> torch.utils.data <span class="hljs-keyword">import</span> DataLoader<br><br>a = torch.tensor([<br>                  [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]<br>                  ,[<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>]<br>                  ,[<span class="hljs-number">7</span>,<span class="hljs-number">8</span>,<span class="hljs-number">9</span>]<br>                  ,[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]<br>                  ,[<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>]<br>                  ,[<span class="hljs-number">7</span>,<span class="hljs-number">8</span>,<span class="hljs-number">9</span>]<br>                  ,[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]<br>                  ,[<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>]<br>                  ,[<span class="hljs-number">7</span>,<span class="hljs-number">8</span>,<span class="hljs-number">9</span>]<br>                  ,[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]<br>                  ,[<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>]<br>                  ,[<span class="hljs-number">7</span>,<span class="hljs-number">8</span>,<span class="hljs-number">9</span>]                                     <br>                ])<br>b = torch.tensor([<span class="hljs-number">44</span>, <span class="hljs-number">55</span>, <span class="hljs-number">66</span>, <span class="hljs-number">44</span>, <span class="hljs-number">55</span>, <span class="hljs-number">66</span>, <span class="hljs-number">44</span>, <span class="hljs-number">55</span>, <span class="hljs-number">66</span>, <span class="hljs-number">44</span>, <span class="hljs-number">55</span>, <span class="hljs-number">66</span>]<br>                 )<br>train_ids = TensorDataset(a,b)<br><span class="hljs-comment"># 切片输出</span><br><span class="hljs-built_in">print</span>(train_ids[<span class="hljs-number">0</span>:<span class="hljs-number">2</span>])<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;=&#x27;</span> * <span class="hljs-number">80</span>)<br><span class="hljs-comment"># 循环取数据</span><br><span class="hljs-keyword">for</span> x_train,y_label <span class="hljs-keyword">in</span> train_ids:<br>  <span class="hljs-built_in">print</span>(x_train,y_label)<br><br><span class="hljs-comment"># DataLoader进行数据封装</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;=&#x27;</span> * <span class="hljs-number">80</span>)<br>train_loader = DataLoader(dataset=train_ids,batch_size=<span class="hljs-number">4</span>,shuffle=<span class="hljs-literal">True</span>)<br><span class="hljs-keyword">for</span> i, data <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(train_loader,<span class="hljs-number">1</span>):<br>  x_data,label = data<br>  <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;batch:&#123;0&#125; x_data:&#123;1&#125; label:&#123;2&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(i,x_data,label))<br><br></code></pre></td></tr></table></figure><p>输出结果如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs python">(tensor([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>],<br>        [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]]), tensor([<span class="hljs-number">44</span>, <span class="hljs-number">55</span>]))<br>&lt;torch.utils.data.dataset.TensorDataset <span class="hljs-built_in">object</span> at <span class="hljs-number">0x7fb6189168d0</span>&gt;<br>================================================================================<br>tensor([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]) tensor(<span class="hljs-number">44</span>)<br>tensor([<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]) tensor(<span class="hljs-number">55</span>)<br>tensor([<span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>]) tensor(<span class="hljs-number">66</span>)<br>tensor([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]) tensor(<span class="hljs-number">44</span>)<br>tensor([<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]) tensor(<span class="hljs-number">55</span>)<br>tensor([<span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>]) tensor(<span class="hljs-number">66</span>)<br>tensor([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]) tensor(<span class="hljs-number">44</span>)<br>tensor([<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]) tensor(<span class="hljs-number">55</span>)<br>tensor([<span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>]) tensor(<span class="hljs-number">66</span>)<br>tensor([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]) tensor(<span class="hljs-number">44</span>)<br>tensor([<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]) tensor(<span class="hljs-number">55</span>)<br>tensor([<span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>]) tensor(<span class="hljs-number">66</span>)<br>================================================================================<br>batch:<span class="hljs-number">1</span> x_data:tensor([[<span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>],<br>        [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>],<br>        [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>],<br>        [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]]) label:tensor([<span class="hljs-number">66</span>, <span class="hljs-number">44</span>, <span class="hljs-number">55</span>, <span class="hljs-number">44</span>])<br>batch:<span class="hljs-number">2</span> x_data:tensor([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>],<br>        [<span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>],<br>        [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>],<br>        [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]]) label:tensor([<span class="hljs-number">44</span>, <span class="hljs-number">66</span>, <span class="hljs-number">55</span>, <span class="hljs-number">44</span>])<br>batch:<span class="hljs-number">3</span> x_data:tensor([[<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>],<br>        [<span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>],<br>        [<span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>],<br>        [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]]) label:tensor([<span class="hljs-number">55</span>, <span class="hljs-number">66</span>, <span class="hljs-number">66</span>, <span class="hljs-number">55</span>])<br></code></pre></td></tr></table></figure><p>TensorDataset(a,b)将两个tensor传入到TensorDataset里，</p><p>得到TensorDataset后可以对其进行<strong>切片输出</strong>，例如TensorDataset(a,b)[0:2]，指的是取a和b前面两个元素。</p><p>除了进行<strong>切片输出</strong>外，还可以用循环来取数据，例如a是矩阵，b是向量，用for循环取出来的分别就是矩阵的每一行和向量的每个元素。</p><h2 id="DataLoader"><a href="#DataLoader" class="headerlink" title="DataLoader"></a>DataLoader</h2><p>DataLoader进行数据封装</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># DataLoader进行数据封装</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;=&#x27;</span> * <span class="hljs-number">80</span>)<br>train_loader = DataLoader(dataset=train_ids,batch_size=<span class="hljs-number">4</span>,shuffle=<span class="hljs-literal">True</span>)<br><span class="hljs-keyword">for</span> i, data <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(train_loader,<span class="hljs-number">1</span>):<br>  x_data,label = data<br>  <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;batch:&#123;0&#125; x_data:&#123;1&#125; label:&#123;2&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(i,x_data,label))<br></code></pre></td></tr></table></figure><p>输出：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python">batch:<span class="hljs-number">1</span> x_data:tensor([[<span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>],<br>        [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>],<br>        [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>],<br>        [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]]) label:tensor([<span class="hljs-number">66</span>, <span class="hljs-number">44</span>, <span class="hljs-number">55</span>, <span class="hljs-number">44</span>])<br>batch:<span class="hljs-number">2</span> x_data:tensor([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>],<br>        [<span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>],<br>        [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>],<br>        [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]]) label:tensor([<span class="hljs-number">44</span>, <span class="hljs-number">66</span>, <span class="hljs-number">55</span>, <span class="hljs-number">44</span>])<br>batch:<span class="hljs-number">3</span> x_data:tensor([[<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>],<br>        [<span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>],<br>        [<span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>],<br>        [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]]) label:tensor([<span class="hljs-number">55</span>, <span class="hljs-number">66</span>, <span class="hljs-number">66</span>, <span class="hljs-number">55</span>])<br></code></pre></td></tr></table></figure><p>DataLoader(dataset&#x3D;train_ids,batch_size&#x3D;4,shuffle&#x3D;True)这里分别是传入上面讲的TensorDataset类型的train_ids，batch_size&#x3D;4指的是一个批次里有几个元素，这里等于4，是指一个batch里取四个元素。shuffle&#x3D;True每次都洗牌。取到的都不一样。</p><p>将batch_size设置为1时，输出结果如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># DataLoader进行数据封装</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;=&#x27;</span> * <span class="hljs-number">80</span>)<br>train_loader = DataLoader(dataset=train_ids,batch_size=<span class="hljs-number">1</span>,shuffle=<span class="hljs-literal">True</span>)<br><span class="hljs-keyword">for</span> i, data <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(train_loader,<span class="hljs-number">1</span>):<br>  x_data,label = data<br>  <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;batch:&#123;0&#125; x_data:&#123;1&#125; label:&#123;2&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(i,x_data,label))<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python">================================================================================<br>batch:<span class="hljs-number">1</span> x_data:tensor([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]]) label:tensor([<span class="hljs-number">44</span>])<br>batch:<span class="hljs-number">2</span> x_data:tensor([[<span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>]]) label:tensor([<span class="hljs-number">66</span>])<br>batch:<span class="hljs-number">3</span> x_data:tensor([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]]) label:tensor([<span class="hljs-number">44</span>])<br>batch:<span class="hljs-number">4</span> x_data:tensor([[<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]]) label:tensor([<span class="hljs-number">55</span>])<br>batch:<span class="hljs-number">5</span> x_data:tensor([[<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]]) label:tensor([<span class="hljs-number">55</span>])<br>batch:<span class="hljs-number">6</span> x_data:tensor([[<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]]) label:tensor([<span class="hljs-number">55</span>])<br>batch:<span class="hljs-number">7</span> x_data:tensor([[<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]]) label:tensor([<span class="hljs-number">55</span>])<br>batch:<span class="hljs-number">8</span> x_data:tensor([[<span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>]]) label:tensor([<span class="hljs-number">66</span>])<br>batch:<span class="hljs-number">9</span> x_data:tensor([[<span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>]]) label:tensor([<span class="hljs-number">66</span>])<br>batch:<span class="hljs-number">10</span> x_data:tensor([[<span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>]]) label:tensor([<span class="hljs-number">66</span>])<br>batch:<span class="hljs-number">11</span> x_data:tensor([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]]) label:tensor([<span class="hljs-number">44</span>])<br>batch:<span class="hljs-number">12</span> x_data:tensor([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]]) label:tensor([<span class="hljs-number">44</span>])<br></code></pre></td></tr></table></figure><p>将shuffle改为False, 每次取到的数据都是一样的</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># DataLoader进行数据封装</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;=&#x27;</span> * <span class="hljs-number">80</span>)<br>train_loader = DataLoader(dataset=train_ids,batch_size=<span class="hljs-number">1</span>,shuffle=<span class="hljs-literal">False</span>)<br><span class="hljs-keyword">for</span> i, data <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(train_loader,<span class="hljs-number">1</span>):<br>  x_data,label = data<br>  <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;batch:&#123;0&#125; x_data:&#123;1&#125; label:&#123;2&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(i,x_data,label))<br></code></pre></td></tr></table></figure></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>Deep Learning</category>
      
    </categories>
    
    
    <tags>
      
      <tag>PyTorch</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>deep_learning_1.线性回归的从零实现</title>
    <link href="/posts/2022/07/36aca9af.html"/>
    <url>/posts/2022/07/36aca9af.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><h2 id="线性回归"><a href="#线性回归" class="headerlink" title="线性回归"></a>线性回归</h2><p><em>回归</em>（regression）是能为一个或多个自变量与因变量之间关系建模的一类方法。 在自然科学和社会科学领域，回归经常用来表示输入和输出之间的关系。</p><p>在机器学习领域中的大多数任务通常都与<em>预测</em>（prediction）有关。 当我们想预测一个数值时，就会涉及到回归问题。 常见的例子包括：预测价格（房屋、股票等）、预测住院时间（针对住院病人等）、 预测需求（零售销量等）。 但不是所有的<em>预测</em>都是回归问题。 </p><p><em>线性回归</em>（linear regression）可以追溯到19世纪初， 它在回归的各种标准工具中最简单而且最流行。 线性回归基于几个简单的假设： 首先，假设自变量x和因变量y之间的关系是线性的， 即y可以表示为x中元素的加权和，这里通常允许包含观测值的一些噪声； 其次，我们假设任何噪声都比较正常，如噪声遵循正态分布。</p><p>为了解释<em>线性回归</em>，我们举一个实际的例子： 我们希望根据房屋的面积（平方英尺）和房龄（年）来估算房屋价格（美元）。 为了开发一个能预测房价的模型，我们需要收集一个真实的数据集。</p><p> 这个数据集包括了房屋的销售价格、面积和房龄。 在机器学习的术语中，该数据集称为<em>训练数据集</em>（training data set） 或<em>训练集</em>（training set）。 每行数据（比如一次房屋交易相对应的数据）称为<em>样本</em>（sample）， 也可以称为<em>数据点</em>（data point）或<em>数据样本</em>（data instance）。 我们把试图预测的目标（比如预测房屋价格）称为<em>标签</em>（label）或<em>目标</em>（target）。 预测所依据的自变量（面积和房龄）称为<em>特征</em>（feature）或<em>协变量</em>（covariate）。</p><h2 id="线性回归的从零开始实现"><a href="#线性回归的从零开始实现" class="headerlink" title="线性回归的从零开始实现"></a>线性回归的从零开始实现</h2><p>以下是pytorch版本实现</p><p><strong>导入包</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">%matplotlib inline<br><span class="hljs-keyword">import</span> random<br><span class="hljs-keyword">import</span> torch<br><span class="hljs-keyword">from</span> d2l <span class="hljs-keyword">import</span> torch <span class="hljs-keyword">as</span> d2l<br></code></pre></td></tr></table></figure><p><strong>生成数据集</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">synthetic_data</span>(<span class="hljs-params">w, b, num_examples</span>):  <span class="hljs-comment">#@save</span><br>    <span class="hljs-string">&quot;&quot;&quot;生成y=Xw+b+噪声&quot;&quot;&quot;</span><br>    <span class="hljs-comment"># torch.normal(mean,std,out) 输出均值为0，标准差为1，大小为[1000,2]的数组</span><br>    X = torch.normal(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, (num_examples, <span class="hljs-built_in">len</span>(w))) <br>    <span class="hljs-comment"># matmul:如果一个二维矩阵和一个一维向量input的乘积运算，则先将input的一维向量扩充到二维，然后进行矩阵乘积，得到结果后再将此维度去掉，得到的与input的维度相同。</span><br>    y = torch.matmul(X, w) + b<br>    y += torch.normal(<span class="hljs-number">0</span>, <span class="hljs-number">0.01</span>, y.shape) <span class="hljs-comment"># 这里是加入一些噪声</span><br>    <span class="hljs-keyword">return</span> X, y.reshape((-<span class="hljs-number">1</span>, <span class="hljs-number">1</span>))<br><br>true_w = torch.tensor([<span class="hljs-number">2</span>, -<span class="hljs-number">3.4</span>])<br>true_b = <span class="hljs-number">4.2</span><br>features, labels = synthetic_data(true_w, true_b, <span class="hljs-number">1000</span>)<br></code></pre></td></tr></table></figure><p>注意，<code>features</code>中的每一行都包含一个二维数据样本， <code>labels</code>中的每一行都包含一维标签值（一个标量）。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;features:&#x27;</span>, features[<span class="hljs-number">0</span>],<span class="hljs-string">&#x27;\nlabel:&#x27;</span>, labels[<span class="hljs-number">0</span>])<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">d2l.set_figsize()<br>d2l.plt.scatter(features[:, (<span class="hljs-number">1</span>)].detach().numpy(), labels.detach().numpy(), <span class="hljs-number">1</span>);<br></code></pre></td></tr></table></figure><p><strong>读取数据集</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">data_iter</span>(<span class="hljs-params">batch_size, features, labels</span>):<br>    num_examples = <span class="hljs-built_in">len</span>(features)<br>    indices = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">range</span>(num_examples))<br>    <span class="hljs-comment"># 这些样本是随机读取的，没有特定的顺序</span><br>    random.shuffle(indices)<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, num_examples, batch_size):<br>        batch_indices = torch.tensor(<br>            indices[i: <span class="hljs-built_in">min</span>(i + batch_size, num_examples)])<br>        <span class="hljs-keyword">yield</span> features[batch_indices], labels[batch_indices]<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">batch_size = <span class="hljs-number">10</span><br><br><span class="hljs-keyword">for</span> X, y <span class="hljs-keyword">in</span> data_iter(batch_size, features, labels):<br>    <span class="hljs-built_in">print</span>(X, <span class="hljs-string">&#x27;\n&#x27;</span>, y)<br>    <span class="hljs-keyword">break</span><br></code></pre></td></tr></table></figure><p>当我们运行迭代时，我们会连续地获得不同的小批量，直至遍历完整个数据集。 上面实现的迭代对于教学来说很好，但它的执行效率很低，可能会在实际问题上陷入麻烦。 例如，它要求我们将所有数据加载到内存中，并执行大量的随机内存访问。 在深度学习框架中实现的内置迭代器效率要高得多， 它可以处理存储在文件中的数据和数据流提供的数据。</p><p><strong>初始化模型参数</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">w = torch.normal(<span class="hljs-number">0</span>, <span class="hljs-number">0.01</span>, size=(<span class="hljs-number">2</span>,<span class="hljs-number">1</span>), requires_grad=<span class="hljs-literal">True</span>)<br>b = torch.zeros(<span class="hljs-number">1</span>, requires_grad=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></table></figure><p><strong>定义数据模型</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">linreg</span>(<span class="hljs-params">X, w, b</span>):  <span class="hljs-comment">#@save</span><br>    <span class="hljs-string">&quot;&quot;&quot;线性回归模型&quot;&quot;&quot;</span><br>    <span class="hljs-keyword">return</span> torch.matmul(X, w) + b <span class="hljs-comment"># [1000,2] * [2,1]  = [1000,1] + b (随意变换)</span><br></code></pre></td></tr></table></figure><p><strong>定义损失函数</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">squared_loss</span>(<span class="hljs-params">y_hat, y</span>):  <span class="hljs-comment">#@save</span><br>    <span class="hljs-string">&quot;&quot;&quot;均方损失&quot;&quot;&quot;</span><br>    <span class="hljs-keyword">return</span> (y_hat - y.reshape(y_hat.shape)) ** <span class="hljs-number">2</span> / <span class="hljs-number">2</span><br>  <span class="hljs-string">&#x27;&#x27;&#x27;正常应该是同样的shape，但以防一个是行向量、一个是列向量。</span><br><span class="hljs-string">现在reshape，可以确保shape一样&#x27;&#x27;&#x27;</span><br></code></pre></td></tr></table></figure><p><strong>定义优化算法</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">sgd</span>(<span class="hljs-params">params, lr, batch_size</span>):  <span class="hljs-comment">#@save</span><br>    <span class="hljs-string">&quot;&quot;&quot;小批量随机梯度下降&quot;&quot;&quot;</span><br>    <span class="hljs-comment"># torch.no_grad()包含的代码不算梯度</span><br>    <span class="hljs-keyword">with</span> torch.no_grad():<br>        <span class="hljs-keyword">for</span> param <span class="hljs-keyword">in</span> params:<br>          <span class="hljs-comment"># x-=k 与x= x-k 不同，前者会更新变量的值，而后者不会 此时的param为None.</span><br>            param -= lr * param.grad / batch_size<br>            <span class="hljs-comment"># torch的梯度值每次会累加，所以要清0</span><br>            <span class="hljs-comment"># torch的梯度保存在.grad里面</span><br>            param.grad.zero_()<br></code></pre></td></tr></table></figure><p><strong>训练</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python">lr = <span class="hljs-number">0.03</span><br>num_epochs = <span class="hljs-number">3</span><br>net = linreg<br>loss = squared_loss<br><br><span class="hljs-keyword">for</span> epoch <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(num_epochs):<br>    <span class="hljs-keyword">for</span> X, y <span class="hljs-keyword">in</span> data_iter(batch_size, features, labels):<br>        l = loss(net(X, w, b), y)  <span class="hljs-comment"># X和y的小批量损失</span><br>        <span class="hljs-comment"># 因为l形状是(batch_size,1)，而不是一个标量。l中的所有元素被加到一起，</span><br>        <span class="hljs-comment"># 并以此计算关于[w,b]的梯度</span><br>        l.<span class="hljs-built_in">sum</span>().backward()<br>        sgd([w, b], lr, batch_size)  <span class="hljs-comment"># 使用参数的梯度更新参数</span><br>    <span class="hljs-keyword">with</span> torch.no_grad():<br>        train_l = loss(net(features, w, b), labels)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&#x27;epoch <span class="hljs-subst">&#123;epoch + <span class="hljs-number">1</span>&#125;</span>, loss <span class="hljs-subst">&#123;<span class="hljs-built_in">float</span>(train_l.mean()):f&#125;</span>&#x27;</span>)<br></code></pre></td></tr></table></figure><p>epoch 1, loss 0.037357 </p><p>epoch 2, loss 0.000146 </p><p>epoch 3, loss 0.000049</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">print</span>(<span class="hljs-string">f&#x27;w的估计误差: <span class="hljs-subst">&#123;true_w - w.reshape(true_w.shape)&#125;</span>&#x27;</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&#x27;b的估计误差: <span class="hljs-subst">&#123;true_b - b&#125;</span>&#x27;</span>)<br></code></pre></td></tr></table></figure><p>w的估计误差: tensor([ 4.0927, -2.6497], grad_fn&#x3D;<SubBackward0>) </p><p>b的估计误差: tensor([67.1991], grad_fn&#x3D;<RsubBackward1>)</p><h2 id="线性回归的简洁实现"><a href="#线性回归的简洁实现" class="headerlink" title="线性回归的简洁实现"></a>线性回归的简洁实现</h2><p><strong>生成数据集</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">import</span> torch<br><span class="hljs-keyword">from</span> torch.utils <span class="hljs-keyword">import</span> data<br><span class="hljs-keyword">from</span> d2l <span class="hljs-keyword">import</span> torch <span class="hljs-keyword">as</span> d2l<br><br>true_w = torch.tensor([<span class="hljs-number">2</span>, -<span class="hljs-number">3.4</span>])<br>true_b = <span class="hljs-number">4.2</span><br>features, labels = d2l.synthetic_data(true_w, true_b, <span class="hljs-number">1000</span>)<br></code></pre></td></tr></table></figure><p><strong>读取数据集</strong></p><p>我们可以调用框架中现有的API来读取数据。 我们将<code>features</code>和<code>labels</code>作为API的参数传递，并通过数据迭代器指定<code>batch_size</code>。 此外，布尔值<code>is_train</code>表示是否希望数据迭代器对象在每个迭代周期内打乱数据。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">load_array</span>(<span class="hljs-params">data_arrays, batch_size, is_train=<span class="hljs-literal">True</span></span>):  <span class="hljs-comment">#@save</span><br>    <span class="hljs-string">&quot;&quot;&quot;构造一个PyTorch数据迭代器&quot;&quot;&quot;</span><br>    dataset = data.TensorDataset(*data_arrays)<br>    <span class="hljs-keyword">return</span> data.DataLoader(dataset, batch_size, shuffle=is_train)<br><br>batch_size = <span class="hljs-number">10</span><br>data_iter = load_array((features, labels), batch_size)<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">next</span>(<span class="hljs-built_in">iter</span>(data_iter)<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python">[tensor([[ <span class="hljs-number">0.4162</span>, -<span class="hljs-number">1.5868</span>],<br>         [-<span class="hljs-number">0.4829</span>,  <span class="hljs-number">0.1374</span>],<br>         [-<span class="hljs-number">0.5748</span>, -<span class="hljs-number">0.6860</span>],<br>         [-<span class="hljs-number">0.6347</span>,  <span class="hljs-number">0.1200</span>],<br>         [-<span class="hljs-number">0.9963</span>,  <span class="hljs-number">2.0180</span>],<br>         [ <span class="hljs-number">1.5813</span>, -<span class="hljs-number">1.2615</span>],<br>         [-<span class="hljs-number">0.4949</span>,  <span class="hljs-number">2.0363</span>],<br>         [ <span class="hljs-number">0.3605</span>,  <span class="hljs-number">0.5714</span>],<br>         [ <span class="hljs-number">0.4059</span>, -<span class="hljs-number">1.2410</span>],<br>         [ <span class="hljs-number">0.1744</span>,  <span class="hljs-number">1.4118</span>]]),<br> tensor([[<span class="hljs-number">10.4306</span>],<br>         [ <span class="hljs-number">2.7637</span>],<br>         [ <span class="hljs-number">5.3611</span>],<br>         [ <span class="hljs-number">2.5469</span>],<br>         [-<span class="hljs-number">4.6475</span>],<br>         [<span class="hljs-number">11.6465</span>],<br>         [-<span class="hljs-number">3.7162</span>],<br>         [ <span class="hljs-number">2.9882</span>],<br>         [ <span class="hljs-number">9.2429</span>],<br>         [-<span class="hljs-number">0.2496</span>]])]<br></code></pre></td></tr></table></figure><p><strong>定义模型</strong></p><p>当我们在前面从0实现线性回归时， 我们明确定义了模型参数变量，并编写了计算的代码，这样通过基本的线性代数运算得到输出。 但是，如果模型变得更加复杂，且当你几乎每天都需要实现模型时，你会想简化这个过程。 这种情况类似于为自己的博客从零开始编写网页。 做一两次是有益的，但如果每个新博客你就花一个月的时间重新开始编写网页，那并不高效。</p><p>对于标准深度学习模型，我们可以使用框架的预定义好的层。这使我们只需关注使用哪些层来构造模型，而不必关注层的实现细节。 我们首先定义一个模型变量<code>net</code>，它是一个<code>Sequential</code>类的实例。 <code>Sequential</code>类将多个层串联在一起。 当给定输入数据时，<code>Sequential</code>实例将数据传入到第一层， 然后将第一层的输出作为第二层的输入，以此类推。 在下面的例子中，我们的模型只包含一个层，因此实际上不需要<code>Sequential</code>。 但是由于以后几乎所有的模型都是多层的，在这里使用<code>Sequential</code>会让你熟悉“标准的流水线”。</p><p>回顾上面的线性回归模型中的单层网络架构， 这一单层被称为<em>全连接层</em>（fully-connected layer）， 因为它的每一个输入都通过矩阵-向量乘法得到它的每个输出</p><p>在PyTorch中，全连接层在<code>Linear</code>类中定义。 值得注意的是，我们将两个参数传递到<code>nn.Linear</code>中。 第一个指定输入特征形状，即2，第二个指定输出特征形状，输出特征形状为单个标量，因此为1。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># nn是神经网络的缩写</span><br><span class="hljs-keyword">from</span> torch <span class="hljs-keyword">import</span> nn<br><br>net = nn.Sequential(nn.Linear(<span class="hljs-number">2</span>, <span class="hljs-number">1</span>))<br></code></pre></td></tr></table></figure><p><strong>初始化模型参数</strong></p><p>在使用<code>net</code>之前，我们需要初始化模型参数。 如在线性回归模型中的权重和偏置。 深度学习框架通常有预定义的方法来初始化参数。 在这里，我们指定每个权重参数应该从均值为0、标准差为0.01的正态分布中随机采样， 偏置参数将初始化为零。</p><p>正如我们在构造<code>nn.Linear</code>时指定输入和输出尺寸一样， 现在我们能直接访问参数以设定它们的初始值。 我们通过<code>net[0]</code>选择网络中的第一个图层， 然后使用<code>weight.data</code>和<code>bias.data</code>方法访问参数。 我们还可以使用替换方法<code>normal_</code>和<code>fill_</code>来重写参数值。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">net[<span class="hljs-number">0</span>].weight.data.normal_(<span class="hljs-number">0</span>, <span class="hljs-number">0.01</span>)<br>net[<span class="hljs-number">0</span>].bias.data.fill_(<span class="hljs-number">0</span>)<br></code></pre></td></tr></table></figure><p><strong>定义损失函数</strong></p><p>计算均方误差使用的是<code>MSELoss</code>类，也称为平方L2范数。 默认情况下，它返回所有样本损失的平均</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">loss = nn.MSELoss()<br></code></pre></td></tr></table></figure><p><strong>定义优化算法</strong></p><p>小批量随机梯度下降算法是一种优化神经网络的标准工具， PyTorch在<code>optim</code>模块中实现了该算法的许多变种。 当我们实例化一个<code>SGD</code>实例时，我们要指定优化的参数 （可通过<code>net.parameters()</code>从我们的模型中获得）以及优化算法所需的超参数字典。 小批量随机梯度下降只需要设置<code>lr</code>值，这里设置为0.03。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">trainer = torch.optim.SGD(net.parameters(), lr=<span class="hljs-number">0.03</span>)<br></code></pre></td></tr></table></figure><p><strong>训练</strong></p><p>通过深度学习框架的高级API来实现我们的模型只需要相对较少的代码。 我们不必单独分配参数、不必定义我们的损失函数，也不必手动实现小批量随机梯度下降。 当我们需要更复杂的模型时，高级API的优势将大大增加。 当我们有了所有的基本组件，训练过程代码与我们从零开始实现时所做的非常相似。</p><p>回顾一下：在每个迭代周期里，我们将完整遍历一次数据集（<code>train_data</code>）， 不停地从中获取一个小批量的输入和相应的标签。 对于每一个小批量，我们会进行以下步骤:</p><ul><li>通过调用<code>net(X)</code>生成预测并计算损失<code>l</code>（前向传播）。</li><li>通过进行反向传播来计算梯度。</li><li>通过调用优化器来更新模型参数。</li></ul><p>为了更好的衡量训练效果，我们计算每个迭代周期后的损失，并打印它来监控训练过程。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python">num_epochs = <span class="hljs-number">3</span><br><span class="hljs-keyword">for</span> epoch <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(num_epochs):<br>    <span class="hljs-keyword">for</span> X, y <span class="hljs-keyword">in</span> data_iter:<br>        l = loss(net(X) ,y)<br>        trainer.zero_grad()<br>        l.backward()<br>        trainer.step()<br>    l = loss(net(features), labels)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&#x27;epoch <span class="hljs-subst">&#123;epoch + <span class="hljs-number">1</span>&#125;</span>, loss <span class="hljs-subst">&#123;l:f&#125;</span>&#x27;</span>)<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">epoch <span class="hljs-number">1</span>, loss <span class="hljs-number">0.000392</span><br>epoch <span class="hljs-number">2</span>, loss <span class="hljs-number">0.000104</span><br>epoch <span class="hljs-number">3</span>, loss <span class="hljs-number">0.000104</span><br></code></pre></td></tr></table></figure><p>下面我们比较生成数据集的真实参数和通过有限数据训练获得的模型参数。 要访问参数，我们首先从<code>net</code>访问所需的层，然后读取该层的权重和偏置。 正如在从零开始实现中一样，我们估计得到的参数与生成数据的真实参数非常接近。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">w = net[<span class="hljs-number">0</span>].weight.data<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;w的估计误差：&#x27;</span>, true_w - w.reshape(true_w.shape))<br>b = net[<span class="hljs-number">0</span>].bias.data<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;b的估计误差：&#x27;</span>, true_b - b)<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">w的估计误差： tensor([ <span class="hljs-number">0.0002</span>, -<span class="hljs-number">0.0002</span>])<br>b的估计误差： tensor([-<span class="hljs-number">9.1553e-05</span>])<br></code></pre></td></tr></table></figure><h2 id="Q-amp-A"><a href="#Q-amp-A" class="headerlink" title="Q&amp;A"></a>Q&amp;A</h2><p>问题1: 为啥使用平方损失函数而不是绝对差值呢？</p><p>绝对差值函数在0点处不可导，会导致在0点出现跳跃梯度的情况，其实的话问题也不大</p><p>问题2: 线性回归损失函数是不是通常都是MSE？</p><p>是的</p><p>问题3: 损失为什么要求平均？</p><p>求不求平均其实问题不大，有点像标准化归一化处理，不求平均的话你就是在某个scale内，求了平均这个scale范围等于是等比例缩小了</p><p>问题4: 怎么找到合适的学习率？</p><p>第一，你可以找一个对学习率不那么敏感的算法，比较smooth的算法，</p><p>第二，可以通过合理的参数初始化，然后学习率取0.1或者0.01就差不多了</p><p>第三，有找学习率的方法，比如网格搜索等</p><p>问题5: batchsize是否会影响模型结果？</p><p>batchsize越小实际上是效果越好的，batchsize越小，模型每次处理的数据就越多，如果一次喂的数据少的话，带来的噪音会越多，但是一定的噪音会对模型的 范化性更好</p><p>问题6: 学习率和批次会影响模型收敛吗？</p><p>一般来说只要是你的学习率不要给到太大，学习率和批次是不会影响到收敛的，只是时间问题，模型最终都会收敛的</p><p>问题7: 随机梯度下降的随机指的是什么？</p><p>指的是每次随机采样批量大小的样本</p><p>问题8: 为什么机器学习优化算法都采用随机梯度下降（一阶导算法）,而不是采用牛顿（二阶导算法），收敛速度更快？</p><p>我们其实不太关心收敛的快不快，我们关心的是它收敛到哪里，牛顿法快可能不是最优解，不一定比随机梯度下降训练出来的模型范化性好。不要步子迈太快😄</p><p>问题9: 本质上我们为什么要用SGD，是因为大部分的实际loss太复杂，推导不出导数为0的解么？只能逐个batch去逼近？</p><p>是的，机器学习深度学习存在的意义就是无法直接求出具体的最优解，只能通过参数的训练达到无限逼近最优解</p><p>问题10: 定义网络层后一定要手动设置参数初始值吗？</p><p>不一定，给默认的初始值也挺好的</p><p>问题11: 每个batch计算的时候，为什么要把梯度清零啊？<br>因为pytorch你不清0的话，它会一直在上面的梯度上做累加</p><p>问题12: 矩阵怎么求导数？</p><p>标量的导数：就是数学里面学习的导数</p><p>将导数拓展到向量，进而到矩阵：</p><table><thead><tr><th align="left"></th><th>标量x(1,)</th><th>向量x(s,1)</th><th>矩阵(s,k)</th></tr></thead><tbody><tr><td align="left">标量y(1,)</td><td>标量(1,)</td><td>向量(1,s)</td><td>矩阵(k,s)</td></tr><tr><td align="left">向量y(m,1)</td><td>向量(m,1)</td><td>矩阵(m,s)</td><td>矩阵(m,k,s)</td></tr><tr><td align="left">矩阵Y(m,n)</td><td>矩阵(m,n)</td><td>矩阵(m,n,s)</td><td>矩阵(m,n,k,s)</td></tr></tbody></table><p>问题13: 如果将小批量的总损失替换为小批量损失的平均值，你需要如何更改学习率？</p><p>若不将损失函数采用均值 将会使得参数的梯度过大，梯度经过放大后，原有的学习率显得过大 使得其出现了振荡 即步长过长导致，在最优解的附近震荡 而无法高效逼近最优点，mean意味着所有样本损失的平均值，即loss会除以样本数，sum没有除这个样本数，所以会放大1000倍（这里样本数为1000），默认情况下以mean作为损失的计算结果更好，</p><p>loss function reduction&#x3D; ‘mean’ , lr&#x3D;0.03:<br>epoch 1, loss 0.000361<br>epoch 2, loss 0.000095<br>epoch 3, loss 0.000095<br>w的估计误差： tensor([-0.0002, -0.0002])<br>b的估计误差： tensor([8.6784e-05])</p><p>loss function reduction &#x3D; ‘sum’, lr &#x3D;0.03&#x2F;batch_size&#x3D;0.003<br>epoch 1, loss 0.176310<br>epoch 2, loss 0.091707<br>epoch 3, loss 0.092358<br>w的估计误差： tensor([0.0007, 0.0012])<br>b的估计误差： tensor([0.0005])</p><p>参考：<a href="https://zh-v2.d2l.ai/">https://zh-v2.d2l.ai</a></p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>Deep Learning</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Deep Learning</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Apache Doris在橙联的应用实践</title>
    <link href="/posts/2022/07/18e85b64.html"/>
    <url>/posts/2022/07/18e85b64.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><h2 id="1-背景"><a href="#1-背景" class="headerlink" title="1. 背景"></a>1. 背景</h2><h3 id="1-1-公司介绍"><a href="#1-1-公司介绍" class="headerlink" title="1.1 公司介绍"></a>1.1 公司介绍</h3><p>橙联（Orange Connex）是一家服务全球跨境电商的科技公司，致力于通过市场分析、系统研发及资源整合，为客户提供物流、金融、大数据等多方面的服务产品，为全球跨境电商提供高品质、全方位的服务解决方案。橙联股份由中信产业基金和 eBAY 联合成立，拥有非常丰富的物流服务经验和客户市场资源，旨在为卖家客户提供快捷 、稳定 、成本领先 、可视及可持续的物流服务，让买家客户享有更加优质贴心的服务体验</p><h3 id="1-2-目前痛点"><a href="#1-2-目前痛点" class="headerlink" title="1.2 目前痛点"></a>1.2 目前痛点</h3><p>随着公司业务的发展和数据的不断增长，基于 MySQL 的传统数仓架构已经无法应对公司数据的快速增长。业务的需求和运营的决策对于数据时效性的要求越来越高，对数仓准实时能力的需求越发强烈</p><p>基于 MySQL 的传统离线数仓的数据时效性是 T+1，调度频率以天为单位，无法支撑准实时场景的数据需求。即使将调度频率设置成 x 小时，也只能解决部分时效性要求不高的场景，对于实效性要求很高的场景还是无法支撑</p><h2 id="2-架构与实现"><a href="#2-架构与实现" class="headerlink" title="2. 架构与实现"></a>2. 架构与实现</h2><p>公司目前已搭建完成了基于 Doris 的准实时数仓 1.0 版本，在介绍实时数仓的架构之前，简单介绍公司业务的几个计算场景</p><h3 id="公司业务主要计算场景："><a href="#公司业务主要计算场景：" class="headerlink" title="公司业务主要计算场景："></a>公司业务主要计算场景：</h3><h4 id="场景1-物流数据宽表"><a href="#场景1-物流数据宽表" class="headerlink" title="场景1. 物流数据宽表"></a>场景1. 物流数据宽表</h4><p>物流数据宽表数据的生成来自于几十张表的关联，以下是物流数据宽表的主要驱动表</p><p>​    1. 轨迹时间表，日均变动数据峰值 100W 条，用于更新订单轨迹节点时间</p><p>​    2. 订单表，日均数据变动数据峰值 25W 条，用于 ascan 和 dscan 节点时间更新</p><p>​    3. 财务流水表，日均数据变动数据峰值 30W 条，该表用于更新订单物流费用</p><p>​    4. 订单异常表，日均数据变动不大，用于更新异常订单状态</p><p>​    5. 订单取消表，日均数据变动不大，用于更新订单状态</p><p>​    6. 发货预报表</p><p>​    7. 揽收表</p><p>​    8. 分拣表</p><p>​    9. 分拣大小包关系表</p><p>​    10. 申报信息表</p><p>​    11. 预计流程 &#x2F; 预计流程回 call 表</p><h4 id="场景2-财务数据统计"><a href="#场景2-财务数据统计" class="headerlink" title="场景2. 财务数据统计"></a>场景2. 财务数据统计</h4><p>财务日常统计需求，如按天+客户来统计客户物流费用</p><p>在统计当天，来自于供应商的部分数据并不能及时回传到业务系统，客户会在发现问题后采取补回传的操作</p><p>业务实际发生时间到数据补传时间跨度甚至在 1 个月左右，针对补回传的数据，需要对数据涉及的业务日期的天进行重新统计</p><h4 id="场景3-SLA-计算"><a href="#场景3-SLA-计算" class="headerlink" title="场景3. SLA 计算"></a>场景3. SLA 计算</h4><p>一条订单有多个轨迹节点，如 A、B、C、D、E</p><p>各个节点时间的回传并非严格遵守时间顺序，后续节点的时间会先于前节点时间进入系统</p><p>每个节点时间进入系统时，需要计算两个节点之间的 SLA，如 A–B，A–C，B–D 的时间</p><p>SLA 计算逻辑复杂，需要考虑不同国家节假日及冬令时&#x2F;夏令时转换，若 2 个节点跨国家，还需要考虑时区转换</p><p>不同订单根据路向，物流产品，内部产品，尾程供应商等6个维度各种组合来判定 SLA 的计算逻辑</p><p>举例来说同一考核点，P1 产品需要按 A–B 来考核，P2 产品需要按照 A–C 来考核，目前单一考核点的规则最多达 20+ 种</p><h3 id="准实时数仓架构"><a href="#准实时数仓架构" class="headerlink" title="准实时数仓架构"></a>准实时数仓架构</h3><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img%E6%A9%99%E8%81%94%E6%95%B0%E4%BB%93%E6%9E%B6%E6%9E%84%E5%9B%BE_3.jpeg"> </p><h3 id="流批一体准实时数仓数据加工"><a href="#流批一体准实时数仓数据加工" class="headerlink" title="流批一体准实时数仓数据加工"></a>流批一体准实时数仓数据加工</h3><p>以上几个业务场景都对数据时效性有较高的要求，为了解决业务场景数据时效性高痛点，我们采用基于 Doris 的流批一体的准实时数仓架构，Doris 的三种数据模型能够全面的覆盖公司当前所有的数据场景，为了满足从业务数据库到 Doris ODS 层的端到端 EOS，我们使用了 Unique 模型，有效的解决了数据的精准一次问题；使用 Aggregate 模型，加速固定模式的报表查询；使用 Duplicate 模型解决既没有主键也没有聚合需求的多维分析场景</p><p>以下是业务数据的采集、清洗、流转流程图</p><p>对于业务数据源 MySQL 数据的实时获取，我们使用 FlinkCDC 实时获取业务 MySQL 备库的 Binlog 日志，写入到 Kafka 做为中间缓冲，下游 Flink 消费 Kafka 数据，使用 flink-doris-connector 将数据写入 Doris ODS。通过 Flink at least once + Doris Unique 模型，实现数据从 <strong>Flink CDC → Kafka → Flink → Doris 端到端 EOS 保证</strong></p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img%E6%A9%99%E8%81%94%E5%AE%9E%E6%97%B6%E6%95%B0%E6%8D%AE%E6%B5%81%E5%9B%BE_2.jpeg"> </p><p>在准实时数仓的分层设计上，采用 ODS(Operation Data Store 数据准备区，也称为贴源层)， 数据细节层 DWD、数据中间层 DWM、数据服务层 DWS，数据应用层 ADS 的分层思想</p><h2 id="3-问题及解决方案"><a href="#3-问题及解决方案" class="headerlink" title="3. 问题及解决方案"></a>3. 问题及解决方案</h2><p>在基于 Doris 的准实时数仓搭建过程中也解决了一些问题</p><p><strong>1. longtext 字段数据采用外部表映射方式导入数据到 Doris 报错</strong></p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img%E5%A4%96%E9%83%A8%E8%A1%A8%E6%98%A0%E5%B0%84%E6%96%B9%E5%BC%8F%E5%AF%BC%E5%85%A5%E6%95%B0%E6%8D%AE%E5%88%B0dori.png"> </p><p>不是字段 null 的问题，这个提示有误，实际问题是 detail 字段太大了，不适合利用外部表的方式导入，外部表不支持 longtext 这类超长字段的导入</p><p>以下是 MySQL 和 Doris 中的类型匹配情况</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgdoris%E5%92%8C%E5%85%B6%E4%BB%96%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B1%BB%E5%9E%8B%E5%8C%B9%E9%85%8D%E6%83%85%E5%86%B5.png"></p><p>MySQL 表结构如下，detail 字段数据长度可达几十 MB</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20220724135541.png"> </p><p><strong>解决方案：采用 FlinkCDC 的方式，成功导入</strong></p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/imglanguage_detail.png"> </p><p><strong>2. 业务数据库物理删除操作</strong></p><p>业务数据库会有物理删除的情况，FlinkCDC 在做数据抽取的时候使用 Debezium 提供的 op 来判断物理删除，Doris 的 ODS 表增加逻辑删除字段 is_deleted_flag 来标识数据是否删除</p><p><strong>3. FlinkCDC 抽取数据写入到 Doris 报错 err&#x3D;-235</strong></p><p>FlinkCDC 抽取数据写入到 Doris 报错，<code>err: tablet writer write failed, tablet_id=8165971, txn_id=122211550, err=-235, see more in null</code></p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgdoris_error_235.png">  </p><p>排查问题发现是 Doris 集群挂了以后，在重启时积累了大量的数据写入批次，Doris 内部来不及 compaction 导致了 tablet 的数据版本超过了最大限制（默认500），这里目前暂时解决方案是将 <code>max_tablet_version_num</code> 扩大了 6 倍</p><p>未来将升级 Doris 1.1.1 版本，配合最新的 flink-doris-connector 来避免此类问题</p><p><strong>Doris 1.1 版本新特性：</strong></p><p>在 <strong>Compaction 实时性</strong>做出了优化，数据能快速合并，Tablet 数据版本个数维持在 50 以下， Compaction Score 稳定。相比于之前高并发导入频出的 -235 问题，<strong>Compaction 合并效率有 10+ 倍提升</strong></p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgDoris1.1_Compaction%E5%AE%9E%E6%97%B6%E6%80%A7.jpeg"> </p><p>在 <strong>CPU 资源消耗</strong>上，Doris 1.1.1 针对小文件的 Compaction 进行了策略优化，在上述高并发导入场景，<strong>CPU 资源消耗下降 25%</strong></p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgDoris1.1_CPU%E8%B5%84%E6%BA%90%E6%B6%88%E8%80%97.jpeg"> </p><p>另外对于 <strong>QPS 查询延迟的稳定性</strong>，Doris 1.1 通过降低 CPU 使用率，减少数据版本的个数，提升了数据整体有序性，从而减少了 SQL 查询的延迟。</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgDoris1.1_QPS%E6%9F%A5%E8%AF%A2%E5%BB%B6%E8%BF%9F%E7%A8%B3%E5%AE%9A.jpeg"> </p><p><strong>Doris 1.1 对高并发导入、秒级别数据同步、数据实时可见等场景都做了针对性优化，大大增加了 Flink + Doris 系统的易用性以及稳定性，节省了集群整体资源</strong></p><p>另外我们部署了 Doris 集群 Grafana Dashboard 监控，能及时监控 Doris 集群相关指标</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20220724151404.png"></p><p><strong>4. SQL执行超时</strong></p><p>批处理过程中确实会有一些复杂的任务或者写入数据太多的任务会超时，除了调大 timeout 参数（目前设置为 10 分钟）以外，我们还把任务做了切分。有些写入的 SQL 按照分区字段或者日期区间来分批计算或引入中间层 DWM 进行复杂任务的拆分</p><p>未来会使用 Doris 多租户的功能进行资源隔离，减少大作业的资源占用对生产集群其他作业的影响</p><p><strong>5. 调度系统存在的问题</strong></p><p>我们之前使用 Dolphinscheduler 2.x 对 Doris 进行数据调度，使用中发现当多段 Doris SQL 编辑在同一个 node 时，会出现只执行了第一段 Doris SQL 的情况</p><p>以生产的一张宽表调度任务为例，这张宽表有 75 个字段，数据量为几十万，关联表有 15 张，调度在正常情况下不可能 1s ~ 2s 完成，debug 发现调度任务只执行了第一段 Doris SQL</p><h3 id=""><a href="#" class="headerlink" title=""></a><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgdolpin%E8%B0%83%E5%BA%A6%E9%97%AE%E9%A2%98.png"></h3><p>针对次问题 Dolphinscheduler 2.x 官网解释是不支持 MySQL 数据源一次执行多段 SQL，Dolphinscheduler 3.0 修复了此问题，可在任务参数中配置分段执行符号</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20220731160955.png">  </p><p>我们将 Dolphinscheduler 升级到 3.x，并持续观察运行时长，稳定在 1m30s 左右，此类调度问题被解决</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgdolpin3.0%E8%B0%83%E5%BA%A6.png"></p><h2 id="结束语"><a href="#结束语" class="headerlink" title="结束语"></a>结束语</h2><p>目前我们数仓 1.0 版本已上线，橙联正在形成以 Apache Doris 为核心的数据生态，随着应用的深入，我们也正在创建以 Doris 为基础的数据中台和 DataOps</p><p>最后，感谢 Apache Doris 团队给予的支持，祝愿 Apache Doris 社区发展越来越好！</p><p>作者：喻婷 橙联 大数据开发工程师</p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    
    <tags>
      
      <tag>Doris</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>python导入模块和包</title>
    <link href="/posts/2022/07/ac2ed376.html"/>
    <url>/posts/2022/07/ac2ed376.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><h2 id="python导入模块"><a href="#python导入模块" class="headerlink" title="python导入模块"></a>python导入模块</h2><p>模块就是 Python 程序。换句话说，任何 Python 程序都可以作为模块</p><h3 id="python导入模块的2种方式"><a href="#python导入模块的2种方式" class="headerlink" title="python导入模块的2种方式"></a>python导入模块的2种方式</h3><p> import 导入模块的语法：</p><p><code>1.import 模块名1 [as 别名1], 模块名2 [as 别名2]，…</code></p><p>使用这种语法格式的 import 语句，会导入指定模块中的所有成员（包括变量、函数、类等）。</p><p>不仅如此，当需要使用模块中的成员时，需用该模块名（或别名）作为前缀，否则 Python 解释器会报错。</p><p><code>2.from 模块名 import 成员名1 [as 别名1]，成员名2 [as 别名2]，…</code></p><p>使用这种语法格式的 import 语句，只会导入模块中指定的成员，而不是全部成员。同时，当程序中使用该成员时，无需附加任何前缀，直接使用成员名（或别名）即可。</p><h4 id="import-模块名-as-别名"><a href="#import-模块名-as-别名" class="headerlink" title="import 模块名 as 别名"></a>import 模块名 as 别名</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 导入sys、os两个模块</span><br><span class="hljs-keyword">import</span> sys,os<br><span class="hljs-comment"># 使用模块名作为前缀来访问模块中的成员</span><br><span class="hljs-built_in">print</span>(sys.argv[<span class="hljs-number">0</span>])<br><span class="hljs-comment"># os模块的sep变量代表平台上的路径分隔符</span><br><span class="hljs-built_in">print</span>(os.sep)<br></code></pre></td></tr></table></figure><p>上面第 2 行代码一次导入了 sys 和 os 两个模块，因此程序要使用 sys、os 两个模块内的成员，只要分别使用 sys、os 模块名作为前缀即可</p><h4 id="from-模块名-import-成员名-as-别名"><a href="#from-模块名-import-成员名-as-别名" class="headerlink" title="from 模块名 import 成员名 as 别名"></a>from 模块名 import 成员名 as 别名</h4><p>下面程序使用了 from…import 最简单的语法来导入指定成员：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 导入sys模块的argv成员</span><br><span class="hljs-keyword">from</span> sys <span class="hljs-keyword">import</span> argv<br><span class="hljs-comment"># 使用导入成员的语法，直接使用成员名访问</span><br><span class="hljs-built_in">print</span>(argv[<span class="hljs-number">0</span>])<br></code></pre></td></tr></table></figure><p>第 2 行代码导入了 sys 模块中的 argv 成员，这样即可在程序中直接使用 argv 成员，无须使用任何前缀。</p><p>导入模块成员时，也可以为成员指定别名，例如如下程序：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 导入sys模块的argv成员，并为其指定别名v</span><br><span class="hljs-keyword">from</span> sys <span class="hljs-keyword">import</span> argv <span class="hljs-keyword">as</span> v<br><span class="hljs-comment"># 使用导入成员（并指定别名）的语法，直接使用成员的别名访问</span><br><span class="hljs-built_in">print</span>(v[<span class="hljs-number">0</span>])<br></code></pre></td></tr></table></figure><p>第 2 行代码导入了 sys 模块中的 argv 成员，并为该成员指定别名 v，这样即可在程序中通过别名 v 使用 argv 成员，无须使用任何前缀。</p><p><strong>Tips:</strong> 需要说明的是，一般不推荐使用“from 模块 import”这种语法导入指定模块内的所有成员，因为它存在潜在的风险。比如同时导入 module1 和 module2 内的所有成员，假如这两个模块内都有一个 foo() 函数，那么当在程序中执行如下代码时：</p><p><code>foo()</code></p><p>上面调用的这个 foo() 函数到底是 module1 模块中的还是 module2 模块中的？因此，这种导入指定模块内所有成员的用法是有风险的。</p><p>但如果换成如下两种导入方式：</p><p><code>import module1 import module2 </code></p><p>接下来要分别调用这两个模块中的 foo() 函数就非常清晰。程序可使用如下代码：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#使用模块module1 的模块名作为前缀调用foo()函数</span><br>module1.foo()<br><span class="hljs-comment">#使用module2 的模块别名作为前缀调用foo()函数</span><br>module2.foo()<br></code></pre></td></tr></table></figure><p>或者使用 from…import 语句也是可以的，但是得给别名</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#导入module1 中的foo 成员，并指定其别名为foo1</span><br><span class="hljs-keyword">from</span> module1 <span class="hljs-keyword">import</span> foo <span class="hljs-keyword">as</span> fool<br><span class="hljs-comment">#导入module2 中的foo 成员，并指定其别名为foo2</span><br><span class="hljs-keyword">from</span> module2 <span class="hljs-keyword">import</span> foo <span class="hljs-keyword">as</span> foo2<br></code></pre></td></tr></table></figure><p>此时通过别名将 module1 和 module2 两个模块中的 foo 函数很好地进行了区分，接下来分别调用两个模块中 foo() 函数就很清晰：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">foo1() <span class="hljs-comment">#调用module1 中的foo()函数</span><br>foo2() <span class="hljs-comment">#调用module2 中的foo()函数</span><br></code></pre></td></tr></table></figure><h2 id="python导入包"><a href="#python导入包" class="headerlink" title="python导入包"></a>python导入包</h2><p>实际开发中，一个大型的项目往往需要使用成百上千的Python模块，如果将这些模块都堆放在一起，势必不好管理。而且，使用模块可以有效避免变量名或函数名重名引发的冲突，但是如果模块名重复怎么办呢？因此，Python提出了包（Package）的概念。</p><p>简单理解，包就是文件夹，只不过在该文件夹下必须存在一个名为_<em>init</em>_.py的文件。</p><p>| 注意，这是 Python 2.x 的规定，而在 Python 3.x 中，<strong>init</strong>.py 对包来说，并不是必须的。</p><p>每个包的目录下都必须建立一个 _<em>init</em>_.py 的模块，可以是一个空模块，可以写一些初始化代码，其作用就是告诉 Python 要将该目录当成包来处理。</p><p>包是一个包含多个模块的文件夹，它的本质依然是模块，因此包中也可以包含包。例如，我们安装了 numpy 模块之后可以在 Lib\site-packages 安装目录下找到名为 numpy 的文件夹，它就是安装的 numpy 模块（其实就是一个包）</p><p>假如我们有如下文件结构的包：</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs vim">my_package<br>     ┠── __init__.<span class="hljs-keyword">py</span><br>     ┠── module1.<span class="hljs-keyword">py</span><br>     ┗━━ module2.<span class="hljs-keyword">py</span><br></code></pre></td></tr></table></figure><p>_<em>init</em>_.py</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">&#x27;&#x27;&#x27;<br>http://c.biancheng.net/<br>创建第一个 Python 包<br>&#x27;&#x27;&#x27;<br>print(<span class="hljs-emphasis">&#x27;http://c.biancheng.net/python/&#x27;</span>)<br></code></pre></td></tr></table></figure><p>module1.py模块文件</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#module1.py模块文件</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">display</span>(<span class="hljs-params">arc</span>):<br>    <span class="hljs-built_in">print</span>(arc)<br></code></pre></td></tr></table></figure><p>module2.py 模块文件</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#module2.py 模块文件</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">CLanguage</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">display</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;http://c.biancheng.net/python/&quot;</span>)<br></code></pre></td></tr></table></figure><h3 id="python导入包的3种方式"><a href="#python导入包的3种方式" class="headerlink" title="python导入包的3种方式"></a>python导入包的3种方式</h3><p>导入包的方法可归结为以下 3 种：</p><ol><li><p><code>import 包名[.模块名 [as 别名]]</code></p></li><li><p><code>from 包名 import 模块名 [as 别名]</code></p></li><li><p><code>from 包名.模块名 import 成员名 [as 别名]</code></p></li></ol><h4 id="1-import-包名-模块名-as-别名"><a href="#1-import-包名-模块名-as-别名" class="headerlink" title="1) import 包名[.模块名 [as 别名]]"></a>1) import 包名[.模块名 [as 别名]]</h4><p>以前面创建好的 my_package 包为例，导入 module1 模块并使用该模块中成员可以使用如下代码：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> my_package.module1<br>my_package.module1.display(<span class="hljs-string">&quot;http://c.biancheng.net/java/&quot;</span>)<br></code></pre></td></tr></table></figure><p>运行结果为：</p><p><code>http://c.biancheng.net/java/</code></p><p>可以看到，通过此语法格式导入包中的指定模块后，在使用该模块中的成员（变量、函数、类）时，需添加“包名.模块名”为前缀。当然，如果使用 as 给包名.模块名”起一个别名的话，就使用直接使用这个别名作为前缀使用该模块中的方法。</p><p>另外，当直接导入指定包时，程序会自动执行该包所对应文件夹下的 <strong>init</strong>.py 文件中的代码,例如</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> my_package<br>my_package.module1.display(<span class="hljs-string">&quot;http://c.biancheng.net/linux_tutorial/&quot;</span>)<br></code></pre></td></tr></table></figure><p>直接导入包名，并不会将包中所有模块全部导入到程序中，它的作用仅仅是导入并执行包下的 _<em>init</em>_.py 文件，因此，运行该程序，在执行 <strong>init</strong>.py 文件中代码的同时，还会抛出 AttributeError 异常（访问的对象不存在）</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs vim">http://<span class="hljs-keyword">c</span>.biancheng.net/<span class="hljs-keyword">python</span>/<br>Traceback (most recent <span class="hljs-keyword">call</span> <span class="hljs-keyword">last</span>):<br>  File <span class="hljs-string">&quot;C:\Users\mengma\Desktop\demo.py&quot;</span>, <span class="hljs-built_in">line</span> <span class="hljs-number">2</span>, in <span class="hljs-symbol">&lt;module&gt;</span><br>    my_package.module1.<span class="hljs-keyword">display</span>(<span class="hljs-string">&quot;http://c.biancheng.net/linux_tutorial/&quot;</span>)<br>AttributeError: module <span class="hljs-string">&#x27;my_package&#x27;</span> <span class="hljs-built_in">has</span> <span class="hljs-keyword">no</span> attribute <span class="hljs-string">&#x27;module1&#x27;</span><br></code></pre></td></tr></table></figure><h4 id="2-from-包名-import-模块名-as-别名"><a href="#2-from-包名-import-模块名-as-别名" class="headerlink" title="2) from 包名 import 模块名 [as 别名]"></a>2) from 包名 import 模块名 [as 别名]</h4><p>仍以导入 my_package 包中的 module1 模块为例，使用此语法格式的实现代码如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> my_package <span class="hljs-keyword">import</span> module1<br>module1.display(<span class="hljs-string">&quot;http://c.biancheng.net/golang/&quot;</span>)<br></code></pre></td></tr></table></figure><p>运行结果为：</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">http:<span class="hljs-regexp">//</span>c.biancheng.net<span class="hljs-regexp">/python/</span><br>http:<span class="hljs-regexp">//</span>c.biancheng.net<span class="hljs-regexp">/golang/</span><br></code></pre></td></tr></table></figure><p>同样，既然包也是模块，那么这种语法格式自然也支持 <code>from 包名 import *</code> 这种写法，它和 import 包名 的作用一样，都只是将该包的 <strong>init</strong>.py 文件导入并执行。</p><h4 id="3-from-包名-模块名-import-成员名-as-别名"><a href="#3-from-包名-模块名-import-成员名-as-别名" class="headerlink" title="3) from 包名.模块名 import 成员名 [as 别名]"></a>3) from 包名.模块名 import 成员名 [as 别名]</h4><p>此语法格式用于向程序中导入“包.模块”中的指定成员（变量、函数或类）。通过该方式导入的变量（函数、类），在使用时可以直接使用变量名（函数名、类名）调用，例如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> my_package.module1 <span class="hljs-keyword">import</span> display<br>display(<span class="hljs-string">&quot;http://c.biancheng.net/shell/&quot;</span>)<br></code></pre></td></tr></table></figure><p>运行结果为：</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">http:<span class="hljs-regexp">//</span>c.biancheng.net<span class="hljs-regexp">/python/</span><br>http:<span class="hljs-regexp">//</span>c.biancheng.net<span class="hljs-regexp">/shell/</span><br></code></pre></td></tr></table></figure><hr><p><strong>Tips: Python __all__变量用法</strong></p><p>事实上，当我们向文件导入某个模块时，导入的是该模块中那些名称不以下划线（单下划线“_”或者双下划线“__”）开头的变量、函数和类。因此，如果我们不想模块文件中的某个成员被引入到其它文件中使用，可以在其名称前添加下划线。</p><p>除此之外，还可以借助模块提供的  _<em>all__变量，该变量的值是一个列表，存储的是当前模块中一些成员（变量、函数或者类）的名称。通过在模块文件中设置 _<em>all</em></em> 变量，当其它文件以“from 模块名 import *”的形式导入该模块时，该文件中只能使用_<em>all</em>_ 列表中指定的成员。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">say</span>():<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;人生苦短，我学Python！&quot;</span>)<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">CLanguage</span>():<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;C语言中文网：http://c.biancheng.net&quot;</span>)<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">disPython</span>():<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Python教程：http://c.biancheng.net/python&quot;</span>)<br>__all__ = [<span class="hljs-string">&quot;say&quot;</span>,<span class="hljs-string">&quot;CLanguage&quot;</span>]<br></code></pre></td></tr></table></figure><p>此时调用disPython() 函数会报错</p><p>再次声明，_<em>all</em>_ 变量仅限于在其它文件中以“from 模块名 import *”的方式引入。也就是说，如果使用以下 2 种方式引入模块，则  _<em>all</em>_ 变量的设置是无效的。</p><p>以“import 模块名”的形式导入模块</p><p>以“from 模块名 import 成员”的形式直接导入指定成员</p><p>参考链接：<a href="http://c.biancheng.net/python">http://c.biancheng.net/python</a></p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>python包源码安装</title>
    <link href="/posts/2022/07/1f489601.html"/>
    <url>/posts/2022/07/1f489601.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><p>比如我们在要用numpy这个库的时候，我们通常的下载方法是<code>pip install numpy</code></p><p>但本文提供另外一种下载python包的方法，下载源码安装。</p><p>一般使用的场景是pip在线下载很慢，或者在GitHub上看到好玩的程序，拿到源码来安装。</p><h3 id="python包源码安装"><a href="#python包源码安装" class="headerlink" title="python包源码安装"></a>python包源码安装</h3><h4 id="方法一：pip-install"><a href="#方法一：pip-install" class="headerlink" title="方法一：pip install ."></a>方法一：pip install .</h4><p>下载到源码包后，进入包内，例如我们下载了requests的源码包，cd包内，然后进行pip install的安装</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs linux">cd requests<br>pip install .<br></code></pre></td></tr></table></figure><h4 id="方法二：python-setup-py-install"><a href="#方法二：python-setup-py-install" class="headerlink" title="方法二：python setup.py install"></a>方法二：python setup.py install</h4><p>cd 进入requests文件夹内，输入命令：</p><p><code>python setup.py install</code>回车即可</p><h4 id="方法三：Install-a-project-from-VCS"><a href="#方法三：Install-a-project-from-VCS" class="headerlink" title="方法三：Install a project from VCS"></a>方法三：Install a project from VCS</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">python3 -m pip install -e git+https://git.repo/some_pkg.git<span class="hljs-comment">#egg=SomePackage          # from git</span><br>python3 -m pip install -e hg+https://hg.repo/some_pkg.git<span class="hljs-comment">#egg=SomePackage            # from mercurial</span><br>python3 -m pip install -e svn+svn://svn.repo/some_pkg/trunk/<span class="hljs-comment">#egg=SomePackage         # from svn</span><br>python3 -m pip install -e git+https://git.repo/some_pkg.git@feature<span class="hljs-comment">#egg=SomePackage  # from &#x27;feature&#x27; branch</span><br>python3 -m pip install -e <span class="hljs-string">&quot;git+https://git.repo/some_repo.git#egg=subdir&amp;subdirectory=subdir_path&quot;</span> <span class="hljs-comment"># install a python package from a repo subdirectory</span><br></code></pre></td></tr></table></figure><p>参考链接：<a href="https://pip.pypa.io/en/stable/cli/pip_install/#">pip document v22.2</a> </p><h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h4><p>本文主要介绍了python的3种方式安装源码包的方法，give it a try! 😊</p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>anaconda创建多个python环境</title>
    <link href="/posts/2022/07/f248611c.html"/>
    <url>/posts/2022/07/f248611c.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><p>本文旨在讲怎么用anaconda创建多个python环境，主要是因为在github上看到好玩的项目非得要用python3.10版本，我之前装的python版本比这个低，不然才不会折腾环境的安装呢 :( </p><h3 id="conda查看目前已有的环境"><a href="#conda查看目前已有的环境" class="headerlink" title="conda查看目前已有的环境"></a>conda查看目前已有的环境</h3><p>关于anaconda的安装可以自己去百度安装下，这里就不赘述安装的过程了。</p><p>当安装完成并设置环境变量之后，就可以在命令行终端查看conda的环境了。</p><p>运行命令<code>conda env list</code> 就可以查看目前conda有哪些环境，如下图是我目前conda的环境，这里有一个是base, 注意base前面有个*，这表示是我们当前的环境，这个是安装anaconda最初时候就产生的。</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20220723134349.png"></p><h3 id="conda创建新python环境"><a href="#conda创建新python环境" class="headerlink" title="conda创建新python环境"></a>conda创建新python环境</h3><p>在原来的基础上，如果我想用python3.10版本，是不是要重新去官网下载python3.10版本呢，其实不用的，可以直接通过conda-forge的channel，只需要下面这一行命令即可创建新的<code>Python</code>3.10正式版本虚拟环境：</p><p><code>conda create -n py310 python=3.10 -c conda-forge -y</code></p><p>输入这行命令之后你会看到如下安装过程</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20220723135012.png"></p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20220723135138.png"></p><p>这样python3.10就算是下载完成了，完成安装之后，激活环境进入<code>Python</code>的shell</p><p>激活新环境命令：<code>conda activate py310(新环境名称)</code></p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20220723135512.png"></p><p>退出当前环境可以使用命令</p><p><code>conda deactivate</code></p><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>本文主要是conda命令的学习</p><p>1.查看conda所有环境</p><p><code>conda env list</code> </p><p>2.创建新python环境</p><p><code>conda create -n py310 python=3.10 -c conda-forge -y</code> </p><p>3.激活新环境</p><p><code>conda activate py310(新环境名称)</code></p><p>4.退出当前环境</p><p><code>conda deactivate</code></p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>python实现配置文件传参的多线程爬虫</title>
    <link href="/posts/2022/07/5250dd60.html"/>
    <url>/posts/2022/07/5250dd60.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><h3 id="迷你定向网页抓取器"><a href="#迷你定向网页抓取器" class="headerlink" title="迷你定向网页抓取器"></a>迷你定向网页抓取器</h3><h4 id="明确要求"><a href="#明确要求" class="headerlink" title="明确要求"></a>明确要求</h4><p>这个迷你定向网页抓取器是基于如下需求来实现的网络爬虫的功能，实现对种子链接的广度优先抓取，并把URL格式符合特定pattern的网页保存到磁盘上。</p><p>要求：</p><ol><li><p>需要支持命令行参数处理。具体包含: -h(帮助)、-v(版本)、-c(配置文件)</p></li><li><p>需要按照广度优先的顺序抓取网页</p></li><li><p>单个网页抓取或解析失败，不能导致整个程序退出。需要在日志中记录下错误原因并继续</p></li><li><p>当程序完成所有抓取任务后，必须优雅退出。</p></li><li><p>从HTML提取链接时需要处理相对路径和绝对路径。</p></li><li><p>网页存储时每个网页单独存为一个文件，以URL为文件名。注意对URL中的特殊字符，需要做转义。</p></li><li><p>要求支持多线程并行抓取。</p></li><li><p>代码的可读性和可维护性好。注意模块、类、函数的设计和划分</p></li><li><p>PS Python CM委员会为大家提供测试抓取网站: <a href="http://pycm.baidu.com:8081/">http://pycm.baidu.com:8081</a></p></li></ol><hr><h4 id="程序说明"><a href="#程序说明" class="headerlink" title="程序说明"></a>程序说明</h4><p><strong>Py-files:</strong></p><blockquote><p><strong>run_main.py</strong> : this file is the execute-file of the project</p></blockquote><blockquote><p><strong>mini_spider.py</strong> : this file is to start multi crawling-threads</p></blockquote><blockquote><p><strong>config_args.py</strong> : this file is to load configurations from spider.conf</p></blockquote><blockquote><p><strong>Url.py</strong> : this file is the class for url</p></blockquote><blockquote><p><strong>crawl_thread.py</strong>: this file is a unit of crawling-thread</p></blockquote><blockquote><p><strong>html_parse.py</strong> : this file is a class for parsing html to extract urls</p></blockquote><blockquote><p><strong>downloader.py</strong> : this file is a class for downloading a page <strong>log.py</strong> : this file is used for logging</p></blockquote><p><strong>Cfg-files:</strong></p><blockquote><p><strong>urls</strong> : this file save seed-urls (depth - 0)</p></blockquote><blockquote><p><strong>spider.conf</strong> : this file save normal configurations for crawling</p></blockquote><p><strong>Dirs:</strong></p><blockquote><p><strong>log</strong> : this dir is used for saving log-files</p></blockquote><blockquote><p><strong>output</strong> : this dir is used for saving Url-page</p></blockquote><blockquote><p><strong>test</strong> : this dir contains all unittest-py</p></blockquote><p><strong>How to run:</strong></p><blockquote><p>1: change into this dir</p></blockquote><blockquote><p>2: run <code>python run_main.py -c spider.conf</code> or <code>python run_main.p</code></p></blockquote><hr><h4 id="代码走读"><a href="#代码走读" class="headerlink" title="代码走读"></a>代码走读</h4><h5 id="spider-conf配置文件"><a href="#spider-conf配置文件" class="headerlink" title="spider.conf配置文件"></a>spider.conf配置文件</h5><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[spider]</span><br><span class="hljs-attr">url_list_file</span> = ./urls<br><span class="hljs-attr">output_directory</span> = ./output<br><span class="hljs-attr">max_depth</span> = <span class="hljs-number">1</span><br><span class="hljs-attr">crawl_interval</span> = <span class="hljs-number">0.3</span> <br><span class="hljs-attr">crawl_timeout</span> = <span class="hljs-number">2</span><br><span class="hljs-attr">target_url</span> = .*.(gif|png|jpg|bmp)$ <br><span class="hljs-attr">thread_count</span> = <span class="hljs-number">8</span><br></code></pre></td></tr></table></figure><h5 id="run-main-py"><a href="#run-main-py" class="headerlink" title="run_main.py"></a>run_main.py</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> argparse<br><span class="hljs-keyword">import</span> logging<br><br><span class="hljs-keyword">import</span> mini_spider<br><span class="hljs-keyword">import</span> log<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    主程序,程序入口</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    log.init_log(<span class="hljs-string">&#x27;./log/mini_spider&#x27;</span>)<br>    logging.info(<span class="hljs-string">&#x27;%-35s&#x27;</span> % <span class="hljs-string">&#x27; * miniSpider is starting ... &#x27;</span>)<br>    <span class="hljs-comment"># **********************  start  ***********************</span><br>    <span class="hljs-comment"># 1.set args for the program(设置参数)</span><br>    parser = argparse.ArgumentParser(description = <span class="hljs-string">&#x27;This is a mini spider program!&#x27;</span>)<br>    parser.add_argument(<span class="hljs-string">&#x27;-v&#x27;</span>,<br>                        <span class="hljs-string">&#x27;--version&#x27;</span>,<br>                        action=<span class="hljs-string">&#x27;version&#x27;</span>,<br>                        version=<span class="hljs-string">&#x27;%(prog)s 1.0.0&#x27;</span>)<br><br>    parser.add_argument(<span class="hljs-string">&#x27;-c&#x27;</span>,<br>                        <span class="hljs-string">&#x27;--config_file&#x27;</span>,<br>                        action=<span class="hljs-string">&#x27;store&#x27;</span>,<br>                        dest=<span class="hljs-string">&#x27;CONF_PATH&#x27;</span>,<br>                        default=<span class="hljs-string">&#x27;spider.conf&#x27;</span>,<br>                        <span class="hljs-built_in">help</span>=<span class="hljs-string">&#x27;Set configuration file path&#x27;</span>)<br><br>    args = parser.parse_args()<br><br>    <span class="hljs-comment">#2.create an instance of miniSpider and start crawling</span><br>    mini_spider_inst = mini_spider.MiniSpider(args.CONF_PATH)<br>    init_success = mini_spider_inst.initialize()<br>    <span class="hljs-keyword">if</span> init_success:<br>        mini_spider_inst.pre_print()<br>        mini_spider_inst.run_threads()<br><br>    <span class="hljs-comment"># ********************* end  **************************</span><br>    logging.info(<span class="hljs-string">&#x27;%-35s&#x27;</span> % <span class="hljs-string">&#x27; * miniSpider is ending ...&#x27;</span>)<br></code></pre></td></tr></table></figure><p>可以看到主程序其实就是两步，第一步是传入参数（配置文件），第二步是多线程爬虫（另外写的爬虫类）</p><p>先来看传入参数：</p><p>这里使用的是argparse模块，argparse的使用demo：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> argparse<br>parser = argparse.ArgumentParser()<br>parser.add_argument(<span class="hljs-string">&quot;--verbosity&quot;</span>, <span class="hljs-built_in">help</span>=<span class="hljs-string">&quot;increase output verbosity&quot;</span>)<br>args = parser.parse_args()<br><span class="hljs-keyword">if</span> args.verbosity:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;verbosity turned on&quot;</span>)<br>  <br>运行和输出  <br>$ python3 prog.py --verbosity <span class="hljs-number">1</span><br>verbosity turned on<br><br>$ python3 prog.py<br>无输出（这里--verbosity是可选参数）<br><br>$ python3 prog.py --<span class="hljs-built_in">help</span><br>usage: prog.py [-h] [--verbosity VERBOSITY]<br>options:<br>  -h, --<span class="hljs-built_in">help</span>            show this <span class="hljs-built_in">help</span> message <span class="hljs-keyword">and</span> exit<br>  --verbosity VERBOSITY<br>                        increase output verbosity<br>    <br>$ python3 prog.py --verbosity<br>usage: prog.py [-h] [--verbosity VERBOSITY]<br>prog.py: error: argument --verbosity: expected one argument<br></code></pre></td></tr></table></figure><p>argparse中dest的用法：</p><p>dest：如果提供dest，例如dest&#x3D;“CONF_PATH”，那么可以通过args.CONF_PATH访问该参数。</p><p>再来看多线程爬虫：</p><p>先是mini_spider模块调用生成MiniSpider类对象</p><p>mini_spider_inst &#x3D; mini_spider.MiniSpider(args.CONF_PATH)</p><p>再是调用initialize()的方法，init_success &#x3D; mini_spider_inst.initialize()，就是将配置文件的内容赋值给类变量。</p><p>最后就是多线程掉起，mini_spider_inst.run_threads()</p><h5 id="mini-spider-py"><a href="#mini-spider-py" class="headerlink" title="mini_spider.py"></a>mini_spider.py</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> Queue<br><span class="hljs-keyword">import</span> threading<br><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> logging<br><span class="hljs-keyword">import</span> re<br><br><span class="hljs-keyword">import</span> termcolor<br><br><span class="hljs-keyword">import</span> url_object<br><span class="hljs-keyword">import</span> config_args<br><span class="hljs-keyword">import</span> crawl_thread<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">MiniSpider</span>(<span class="hljs-title class_ inherited__">object</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    This class is a crawler-master-class for operating serveral crawling threads</span><br><span class="hljs-string">    Attributes:</span><br><span class="hljs-string">        checking_url      : 存放待爬URL的队列</span><br><span class="hljs-string">        checked_url       : 存放已经爬取过URL的队列</span><br><span class="hljs-string">        config_file_path  : 配置文件路径</span><br><span class="hljs-string">        error_url         : 存放访问出错URL的队列</span><br><span class="hljs-string">        lock              : 线程锁</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, config_file_path=<span class="hljs-string">&#x27;spider.conf&#x27;</span></span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        Initialize variables</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        <span class="hljs-variable language_">self</span>.checking_url = Queue.Queue(<span class="hljs-number">0</span>)<br>        <span class="hljs-variable language_">self</span>.checked_url = <span class="hljs-built_in">set</span>()<br>        <span class="hljs-variable language_">self</span>.error_url = <span class="hljs-built_in">set</span>()<br>        <span class="hljs-variable language_">self</span>.config_file_path = config_file_path<br>        <span class="hljs-variable language_">self</span>.lock = threading.Lock()<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">initialize</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        Initialize ConfigArgs parameters</span><br><span class="hljs-string">        Returns:</span><br><span class="hljs-string">            True / False : 相关配置文件正常返回True，否则返回False</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        config_arg = config_args.ConfigArgs(<span class="hljs-variable language_">self</span>.config_file_path) <span class="hljs-comment"># 从配置文件中读取数据</span><br>        is_load = config_arg.initialize()<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> is_load:<br>            <span class="hljs-variable language_">self</span>.program_end(<span class="hljs-string">&#x27;there is no conf file !&#x27;</span>)<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br><br>        <span class="hljs-variable language_">self</span>.url_list_file = config_arg.get_url_list_file()<br>        <span class="hljs-variable language_">self</span>.output_dir = config_arg.get_output_dir()<br>        <span class="hljs-variable language_">self</span>.max_depth = config_arg.get_max_depth()<br>        <span class="hljs-variable language_">self</span>.crawl_interval = config_arg.get_crawl_interval()<br>        <span class="hljs-variable language_">self</span>.crawl_timeout = config_arg.get_crawl_timeout()<br>        <span class="hljs-variable language_">self</span>.target_url = config_arg.get_target_url()<br>        <span class="hljs-variable language_">self</span>.thread_count = config_arg.get_thread_count()<br>        <span class="hljs-variable language_">self</span>.tag_dict = config_arg.get_tag_dict()<br>        <span class="hljs-variable language_">self</span>.url_pattern = re.<span class="hljs-built_in">compile</span>(<span class="hljs-variable language_">self</span>.target_url)<br><br>        seedfile_is_exist = <span class="hljs-variable language_">self</span>.get_seed_url()<br>        <span class="hljs-keyword">return</span> seedfile_is_exist<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">pre_print</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        MiniSpider 创建时显示配置信息</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        <span class="hljs-built_in">print</span> termcolor.colored(<span class="hljs-string">&#x27;* MiniSpider Configurations list as follows:&#x27;</span>, <span class="hljs-string">&#x27;green&#x27;</span>)<br>        <span class="hljs-built_in">print</span> termcolor.colored(<span class="hljs-string">&#x27;* %-25s : %s&#x27;</span> % (<span class="hljs-string">&#x27;url_list_file   :&#x27;</span>,<br>                                                   <span class="hljs-variable language_">self</span>.url_list_file),<br>                                                   <span class="hljs-string">&#x27;green&#x27;</span><br>                                                   )<br><br>        <span class="hljs-built_in">print</span> termcolor.colored(<span class="hljs-string">&#x27;* %-25s : %s&#x27;</span> % (<span class="hljs-string">&#x27;output_directory:&#x27;</span>,<br>                                                   <span class="hljs-variable language_">self</span>.output_dir),<br>                                                   <span class="hljs-string">&#x27;green&#x27;</span><br>                                                   )<br><br>        <span class="hljs-built_in">print</span> termcolor.colored(<span class="hljs-string">&#x27;* %-25s : %s&#x27;</span> % (<span class="hljs-string">&#x27;max_depth       :&#x27;</span>,<br>                                                  <span class="hljs-variable language_">self</span>.max_depth),<br>                                                  <span class="hljs-string">&#x27;green&#x27;</span><br>                                                  )<br><br>        <span class="hljs-built_in">print</span> termcolor.colored(<span class="hljs-string">&#x27;* %-25s : %s&#x27;</span> % (<span class="hljs-string">&#x27;crawl_interval  :&#x27;</span>,<br>                                                  <span class="hljs-variable language_">self</span>.crawl_interval),<br>                                                  <span class="hljs-string">&#x27;green&#x27;</span><br>                                                  )<br><br>        <span class="hljs-built_in">print</span> termcolor.colored(<span class="hljs-string">&#x27;* %-25s : %s&#x27;</span> % (<span class="hljs-string">&#x27;crawl_timeout   :&#x27;</span>,<br>                                                  <span class="hljs-variable language_">self</span>.crawl_timeout),<br>                                                  <span class="hljs-string">&#x27;green&#x27;</span><br>                                                  )<br><br>        <span class="hljs-built_in">print</span> termcolor.colored(<span class="hljs-string">&#x27;* %-25s : %s&#x27;</span> % (<span class="hljs-string">&#x27;target_url      :&#x27;</span>,<br>                                                   <span class="hljs-variable language_">self</span>.target_url),<br>                                                   <span class="hljs-string">&#x27;green&#x27;</span><br>                                                   )<br><br>        <span class="hljs-built_in">print</span> termcolor.colored(<span class="hljs-string">&#x27;* %-25s : %s&#x27;</span> % (<span class="hljs-string">&#x27;thread_count    :&#x27;</span>,<br>                                                  <span class="hljs-variable language_">self</span>.thread_count),<br>                                                  <span class="hljs-string">&#x27;green&#x27;</span><br>                                                  )<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_seed_url</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        get seed url from seedUrlFile</span><br><span class="hljs-string">        Returns:</span><br><span class="hljs-string">            True / False : 存在种子文件返回True, 否则返回 False</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.path.isfile(<span class="hljs-variable language_">self</span>.url_list_file):<br>            logging.error(<span class="hljs-string">&#x27; * seedfile is not existing !!!&#x27;</span>)<br>            <span class="hljs-variable language_">self</span>.program_end(<span class="hljs-string">&#x27;there is no seedfile !&#x27;</span>)<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br><br>        <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-variable language_">self</span>.url_list_file, <span class="hljs-string">&#x27;rb&#x27;</span>) <span class="hljs-keyword">as</span> f:<br>            lines = f.readlines()<br><br>        <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> lines:<br>            <span class="hljs-keyword">if</span> line.strip() == <span class="hljs-string">&#x27;&#x27;</span>:<br>                <span class="hljs-keyword">continue</span><br><br>            url_obj = url_object.Url(line.strip(), <span class="hljs-number">0</span>)<br>            <span class="hljs-variable language_">self</span>.checking_url.put(url_obj)<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">program_end</span>(<span class="hljs-params">self, info</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        退出程序的后续信息输出函数</span><br><span class="hljs-string">        Args:</span><br><span class="hljs-string">            info : 退出原因信息</span><br><span class="hljs-string">        Returns:</span><br><span class="hljs-string">            none</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        <span class="hljs-built_in">print</span> termcolor.colored(<span class="hljs-string">&#x27;* crawled page num : &#123;&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(<span class="hljs-built_in">len</span>(<span class="hljs-variable language_">self</span>.checked_url)), <span class="hljs-string">&#x27;green&#x27;</span>)<br>        logging.info(<span class="hljs-string">&#x27;crawled  pages  num : &#123;&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(<span class="hljs-built_in">len</span>(<span class="hljs-variable language_">self</span>.checked_url)))<br>        <span class="hljs-built_in">print</span> termcolor.colored(<span class="hljs-string">&#x27;* error page num : &#123;&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(<span class="hljs-built_in">len</span>(<span class="hljs-variable language_">self</span>.error_url)), <span class="hljs-string">&#x27;green&#x27;</span>)<br>        logging.info(<span class="hljs-string">&#x27;error page num : &#123;&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(<span class="hljs-built_in">len</span>(<span class="hljs-variable language_">self</span>.error_url)))<br>        <span class="hljs-built_in">print</span> termcolor.colored(<span class="hljs-string">&#x27;* finish_reason  :&#x27;</span> + info, <span class="hljs-string">&#x27;green&#x27;</span>)<br>        logging.info(<span class="hljs-string">&#x27;reason of ending :&#x27;</span> + info)<br>        <span class="hljs-built_in">print</span> termcolor.colored(<span class="hljs-string">&#x27;* program is ended ... &#x27;</span>, <span class="hljs-string">&#x27;green&#x27;</span>)<br>        logging.info(<span class="hljs-string">&#x27;program is ended ... &#x27;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">run_threads</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        设置线程池，并启动线程</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        args_dict = &#123;&#125;<br>        args_dict[<span class="hljs-string">&#x27;output_dir&#x27;</span>] = <span class="hljs-variable language_">self</span>.output_dir<br>        args_dict[<span class="hljs-string">&#x27;crawl_interval&#x27;</span>] = <span class="hljs-variable language_">self</span>.crawl_interval<br>        args_dict[<span class="hljs-string">&#x27;crawl_timeout&#x27;</span>] = <span class="hljs-variable language_">self</span>.crawl_timeout<br>        args_dict[<span class="hljs-string">&#x27;url_pattern&#x27;</span>] = <span class="hljs-variable language_">self</span>.url_pattern<br>        args_dict[<span class="hljs-string">&#x27;max_depth&#x27;</span>] = <span class="hljs-variable language_">self</span>.max_depth<br>        args_dict[<span class="hljs-string">&#x27;tag_dict&#x27;</span>] = <span class="hljs-variable language_">self</span>.tag_dict<br><br>        <span class="hljs-keyword">for</span> index <span class="hljs-keyword">in</span> xrange(<span class="hljs-variable language_">self</span>.thread_count):<br>            thread_name = <span class="hljs-string">&#x27;thread - %d&#x27;</span> % index<br>            <span class="hljs-comment"># CrawlerThread类继承了threading.Thread</span><br>            thread = crawl_thread.CrawlerThread(thread_name,<br>                                                <span class="hljs-variable language_">self</span>.process_request,<br>                                                <span class="hljs-variable language_">self</span>.process_response,<br>                                                args_dict)<br><br>            thread.setDaemon(<span class="hljs-literal">True</span>) <span class="hljs-comment"># MainThread 结束，子线程也立马结束，怎么做呢</span><br>            thread.start()<br>            <span class="hljs-built_in">print</span> termcolor.colored((<span class="hljs-string">&quot;第%s个线程开始工作&quot;</span>) % index, <span class="hljs-string">&#x27;yellow&#x27;</span>)<br>            logging.info((<span class="hljs-string">&quot;第%s个线程开始工作&quot;</span>) % index)<br><br>        <span class="hljs-variable language_">self</span>.checking_url.join()<br>        <span class="hljs-variable language_">self</span>.program_end(<span class="hljs-string">&#x27;normal exits &#x27;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">is_visited</span>(<span class="hljs-params">self, url_obj</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        check new url_obj if visited (including Checked_Url and Error_Url)</span><br><span class="hljs-string">        Args:</span><br><span class="hljs-string">            url_obj : Url 对象</span><br><span class="hljs-string">        Returns:</span><br><span class="hljs-string">            True / False  -  若访问过则返回 True ，否则返回 False</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        checked_url_list = <span class="hljs-variable language_">self</span>.checked_url.union(<span class="hljs-variable language_">self</span>.error_url)<br><br>        <span class="hljs-keyword">for</span> checked_url_ <span class="hljs-keyword">in</span> checked_url_list:<br>            <span class="hljs-keyword">if</span> url_obj.get_url() == checked_url_.get_url():<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br><br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">process_request</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        线程任务前期处理的回调函数：</span><br><span class="hljs-string">            负责从任务队列checking_url中取出url对象</span><br><span class="hljs-string">        Returns:</span><br><span class="hljs-string">            url_obj : 取出的url-object 对象</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        url_obj = <span class="hljs-variable language_">self</span>.checking_url.get()<br>        <span class="hljs-keyword">return</span> url_obj<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">process_response</span>(<span class="hljs-params">self, url_obj, flag, extract_url_list=<span class="hljs-literal">None</span></span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        线程任务后期回调函数：</span><br><span class="hljs-string">            解析HTML源码，获取下一层URLs 放入checking_url</span><br><span class="hljs-string">        Args:</span><br><span class="hljs-string">            extract_url_list : 返回抽取出的urls集合</span><br><span class="hljs-string">            url_obj  : 被下载页面所处的url链接对象</span><br><span class="hljs-string">            flag     : 页面下载具体情况的返回标志</span><br><span class="hljs-string">                     - 0  : 表示下载成功且为非pattern页面</span><br><span class="hljs-string">                     - 1  : 表示下载成功且为符合pattern的图片</span><br><span class="hljs-string">                     - -1 : 表示页面下载失败</span><br><span class="hljs-string">                     - 2  : depth &gt;= max_depth 的非target - URL</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-variable language_">self</span>.lock.acquire():<br>            <span class="hljs-keyword">if</span> flag == -<span class="hljs-number">1</span>:<br>                <span class="hljs-variable language_">self</span>.error_url.add(url_obj)<br><br>            <span class="hljs-keyword">elif</span> flag == <span class="hljs-number">0</span>:<br>                <span class="hljs-variable language_">self</span>.checked_url.add(url_obj)<br>                    <span class="hljs-comment"># link add into Checking_Url</span><br>                <span class="hljs-keyword">for</span> ex_url <span class="hljs-keyword">in</span> extract_url_list:<br>                    next_url_obj = url_object.Url(ex_url, <span class="hljs-built_in">int</span>(url_obj.get_depth()) + <span class="hljs-number">1</span>)<br>                    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-variable language_">self</span>.is_visited(next_url_obj):<br>                        <span class="hljs-variable language_">self</span>.checking_url.put(next_url_obj)<br><br>            <span class="hljs-keyword">elif</span> flag == <span class="hljs-number">1</span>:<br>                <span class="hljs-variable language_">self</span>.checked_url.add(url_obj)<br>            <span class="hljs-variable language_">self</span>.checking_url.task_done()<br>        <span class="hljs-variable language_">self</span>.lock.release()<br></code></pre></td></tr></table></figure><h5 id="crawl-thread-py"><a href="#crawl-thread-py" class="headerlink" title="crawl_thread.py"></a>crawl_thread.py</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> threading<br><span class="hljs-keyword">import</span> logging<br><span class="hljs-keyword">import</span> urllib<br><span class="hljs-keyword">import</span> re<br><span class="hljs-keyword">import</span> time<br><span class="hljs-keyword">import</span> os<br><br><span class="hljs-keyword">import</span> downloader<br><span class="hljs-keyword">import</span> html_parser<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">CrawlerThread</span>(threading.Thread):<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    This class is a crawler thread for crawling pages by breadth-first-crawling</span><br><span class="hljs-string">    Attributes:</span><br><span class="hljs-string">        process_request : 前期回调函数</span><br><span class="hljs-string">        process_response: 后期回调函数</span><br><span class="hljs-string">        output_dir      : 存放target 目录</span><br><span class="hljs-string">        crawl_interval  : 爬取间隔</span><br><span class="hljs-string">        crawl_timeout   : 爬取时间延迟</span><br><span class="hljs-string">        target_url      : 目标文件链接格式</span><br><span class="hljs-string">        max_depth       : 爬取最大深度</span><br><span class="hljs-string">        tag_dict        : 链接标签字典</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, name, process_request, process_response, args_dict</span>):<br><br>        <span class="hljs-built_in">super</span>(CrawlerThread, <span class="hljs-variable language_">self</span>).__init__(name=name)<br>        <span class="hljs-variable language_">self</span>.process_request = process_request<br>        <span class="hljs-variable language_">self</span>.process_response = process_response<br>        <span class="hljs-variable language_">self</span>.output_dir = args_dict[<span class="hljs-string">&#x27;output_dir&#x27;</span>]<br>        <span class="hljs-variable language_">self</span>.crawl_interval = args_dict[<span class="hljs-string">&#x27;crawl_interval&#x27;</span>]<br>        <span class="hljs-variable language_">self</span>.crawl_timeout = args_dict[<span class="hljs-string">&#x27;crawl_timeout&#x27;</span>]<br>        <span class="hljs-variable language_">self</span>.url_pattern = args_dict[<span class="hljs-string">&#x27;url_pattern&#x27;</span>]<br>        <span class="hljs-variable language_">self</span>.max_depth = args_dict[<span class="hljs-string">&#x27;max_depth&#x27;</span>]<br>        <span class="hljs-variable language_">self</span>.tag_dict = args_dict[<span class="hljs-string">&#x27;tag_dict&#x27;</span>]<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">run</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        线程执行的具体内容</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        <span class="hljs-keyword">while</span> <span class="hljs-number">1</span>:<br>            url_obj = <span class="hljs-variable language_">self</span>.process_request()<br>            time.sleep(<span class="hljs-variable language_">self</span>.crawl_interval)<br><br>            logging.info(<span class="hljs-string">&#x27;%-12s  : get a url  in depth : &#x27;</span> %<br>                         threading.currentThread().getName() + <span class="hljs-built_in">str</span>(url_obj.get_depth()))<br><br>            <span class="hljs-keyword">if</span> <span class="hljs-variable language_">self</span>.is_target_url(url_obj.get_url()):<br>                flag = -<span class="hljs-number">1</span><br>                <span class="hljs-keyword">if</span> <span class="hljs-variable language_">self</span>.save_target(url_obj.get_url()):<br>                    flag = <span class="hljs-number">1</span><br>                <span class="hljs-variable language_">self</span>.process_response(url_obj, flag)<br>                <span class="hljs-keyword">continue</span><br><br>            <span class="hljs-keyword">if</span> url_obj.get_depth() &lt; <span class="hljs-variable language_">self</span>.max_depth:<br>                downloader_obj = downloader.Downloader(url_obj, <span class="hljs-variable language_">self</span>.crawl_timeout)<br>                response, flag = downloader_obj.download() <span class="hljs-comment">#flag = 0 or -1</span><br><br>                <span class="hljs-keyword">if</span> flag == -<span class="hljs-number">1</span>: <span class="hljs-comment"># download failed</span><br>                    <span class="hljs-variable language_">self</span>.process_response(url_obj, flag)<br>                    <span class="hljs-keyword">continue</span><br><br>                <span class="hljs-keyword">if</span> flag == <span class="hljs-number">0</span>: <span class="hljs-comment"># download sucess</span><br>                    content = response.read()<br>                    url = url_obj.get_url()<br>                    soup = html_parser.HtmlParser(content, <span class="hljs-variable language_">self</span>.tag_dict, url)<br>                    extract_url_list = soup.extract_url()<br><br>                    <span class="hljs-variable language_">self</span>.process_response(url_obj, flag, extract_url_list)<br>            <span class="hljs-keyword">else</span>:<br>                flag = <span class="hljs-number">2</span>  <span class="hljs-comment"># depth &gt; max_depth 的正常URL</span><br>                <span class="hljs-variable language_">self</span>.process_response(url_obj, flag)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">is_target_url</span>(<span class="hljs-params">self, url</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        判断url 是否符合TargetUrl的形式</span><br><span class="hljs-string">        Args:</span><br><span class="hljs-string">            url : 被用来判断的url</span><br><span class="hljs-string">        Returns:</span><br><span class="hljs-string">            True/False : 符合返回True 否则返回False</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        found_aim =<span class="hljs-variable language_">self</span>.url_pattern.<span class="hljs-keyword">match</span>(url)<br>        <span class="hljs-keyword">if</span> found_aim:<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">save_target</span>(<span class="hljs-params">self, url</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        save targetUrl-page into outputDir</span><br><span class="hljs-string">        Args:</span><br><span class="hljs-string">            response : 页面返回file-object</span><br><span class="hljs-string">        Returns:</span><br><span class="hljs-string">            none</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.path.isdir(<span class="hljs-variable language_">self</span>.output_dir):<br>            os.mkdir(<span class="hljs-variable language_">self</span>.output_dir)<br><br>        file_name = urllib.quote_plus(url)<br>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(file_name) &gt; <span class="hljs-number">127</span>:<br>            file_name = file_name[-<span class="hljs-number">127</span>:]<br>        target_path = <span class="hljs-string">&quot;&#123;&#125;/&#123;&#125;&quot;</span>.<span class="hljs-built_in">format</span>(<span class="hljs-variable language_">self</span>.output_dir, file_name)<br>        <span class="hljs-keyword">try</span>:<br>            urllib.urlretrieve(url, target_path)<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>        <span class="hljs-keyword">except</span> IOError <span class="hljs-keyword">as</span> e:<br>            logging.warn(<span class="hljs-string">&#x27; * Save target Faild: %s - %s&#x27;</span> % (url, e))<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br></code></pre></td></tr></table></figure><p>在多线程的调用中这里是自定义一个类CrawlerThread，继承了父类threading.Thread。</p><p>派生类中重写父类threading.Thread的run()方法，其他方法（除了构造函数)都不应在子类中被重写，换句话说，在子类中只有_init_()和run()方法被重写。使用线程的时候先生成一个子线程类的对象，然后对象调用start()方法就可以运行线程啦（start调用run）</p><p>参考Github：<a href="https://github.com/DrCubic/MiniSpider">https://github.com/DrCubic/MiniSpider</a></p><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>文章中介绍了python程序通过配置文件传参数，多线程广度优先爬取符合要求的网页</p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>微博超话自动签到程序-SpringBoot注解</title>
    <link href="/posts/2022/07/46096da.html"/>
    <url>/posts/2022/07/46096da.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><h3 id="微博超话自动签到程序"><a href="#微博超话自动签到程序" class="headerlink" title="微博超话自动签到程序"></a>微博超话自动签到程序</h3><p>与世界交手的这二十几年来，我没追过星，专业领域里的偶像倒是有几个，但都不是歌手或演员，这次看浪姐3是粉上于文文了，直给的酷酷的性格，再深扒她在音乐领域也很能打，烟嗓配摇滚开嗓即巅峰哈哈哈哈。后面基本天天泡在三文鱼超话里面，有一天是看到一个文文粉丝挂了一个微博自动签到的程序。</p><p>这不巧了吗，同行啊，正好看看学习下这个签到程序，里面用到的是java的SpringBoot框架，web程序的框架正好我也不熟悉，借着追星还可以学代码🤩</p><hr><h4 id="代码走读"><a href="#代码走读" class="headerlink" title="代码走读"></a>代码走读</h4><h5 id="AutoCheckInApplication-java-类"><a href="#AutoCheckInApplication-java-类" class="headerlink" title="AutoCheckInApplication.java 类"></a><strong>AutoCheckInApplication.java</strong> 类</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.didi.autocheckin;<br><br><span class="hljs-keyword">import</span> com.alibaba.fastjson.JSONObject;<br><span class="hljs-keyword">import</span> com.didi.autocheckin.config.WbConfig;<br><span class="hljs-keyword">import</span> com.didi.autocheckin.portConfig.StartCommand;<br><span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;<br><span class="hljs-keyword">import</span> okhttp3.MediaType;<br><span class="hljs-keyword">import</span> okhttp3.OkHttpClient;<br><span class="hljs-keyword">import</span> okhttp3.Request;<br><span class="hljs-keyword">import</span> okhttp3.Response;<br><span class="hljs-keyword">import</span> org.springframework.boot.SpringApplication;<br><br><span class="hljs-keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;<br><br><span class="hljs-keyword">import</span> org.springframework.scheduling.annotation.Scheduled;<br><br><span class="hljs-keyword">import</span> javax.annotation.PostConstruct;<br><span class="hljs-keyword">import</span> javax.annotation.Resource;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><br><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-meta">@Slf4j</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AutoCheckInApplication</span> &#123;<br><br>    <span class="hljs-meta">@Resource</span><br>    <span class="hljs-keyword">private</span> WbConfig wbConfig;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-keyword">new</span> <span class="hljs-title class_">StartCommand</span>(args); # 检查可用端口<br>        SpringApplication.run(AutoCheckInApplication.class, args);<br>    &#125;<br><br>  <br>    <span class="hljs-meta">@Scheduled(cron = &quot;0 0  0 * * ?&quot;)</span><br>    <span class="hljs-meta">@PostConstruct</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">auto</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">cookie</span> <span class="hljs-operator">=</span> wbConfig.getCookie();<br>        List&lt;String&gt; pids = wbConfig.getPids();<br><br>        pids.forEach(x-&gt;&#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                autoCheck(x,cookie);<br>            &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>                log.info(e.getMessage());<br>            &#125;<br>        &#125;);<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 自动签到</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> pid 超话id</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> cookie cookie</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span> IOException</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">autoCheck</span><span class="hljs-params">(String pid,String cookie)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-type">Integer</span> <span class="hljs-variable">scCode</span> <span class="hljs-operator">=</span> <span class="hljs-number">100000</span>;<br>        log.info(<span class="hljs-string">&quot;开始自动签到&#123;&#125;&quot;</span>,pid);<br>        <span class="hljs-type">OkHttpClient</span> <span class="hljs-variable">client</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">OkHttpClient</span>().newBuilder()<br>                .build();<br><br>        <span class="hljs-type">MediaType</span> <span class="hljs-variable">mediaType</span> <span class="hljs-operator">=</span> MediaType.parse(<span class="hljs-string">&quot;text/plain&quot;</span>);<br><br>        <span class="hljs-type">Request</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Request</span>.Builder()<br>                .url(<span class="hljs-string">&quot;https://weibo.com/p/aj/general/button?api=http://i.huati.weibo.com/aj/super/checkin&amp;id=&quot;</span>+pid)<br>                .addHeader(<span class="hljs-string">&quot;cookie&quot;</span>, cookie)<br>                .build();<br><br>        <span class="hljs-type">Response</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> client.newCall(request).execute();<br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">data</span> <span class="hljs-operator">=</span> response.body().string();<br>        <span class="hljs-type">JSONObject</span> <span class="hljs-variable">dataJsonObject</span> <span class="hljs-operator">=</span> JSONObject.parseObject(data);<br>        <span class="hljs-type">Integer</span> <span class="hljs-variable">code</span> <span class="hljs-operator">=</span> dataJsonObject.getInteger(<span class="hljs-string">&quot;code&quot;</span>);<br><br>        <span class="hljs-keyword">if</span> (code.equals(scCode)) &#123;<br>            log.info(<span class="hljs-string">&quot;签到成功&quot;</span>);<br>        &#125;<span class="hljs-keyword">else</span> &#123;<br>            log.info(dataJsonObject.getString(<span class="hljs-string">&quot;msg&quot;</span>));<br>        &#125;<br>        log.info(<span class="hljs-string">&quot;结束&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>这个类主要是看几个注解: </p><ul><li><p>@SpringBootApplication，可以看到这个启动类AutoCheckInApplication</p><p>最上面标的就是@SpringBootApplication注解，mian方法里调用run方法。这里.   run方法的作用如下：</p><p>SpringApplication.run()一共做了两件事</p><p> 1.创建SpringApplication对象；在对象初始化时保存事件监听器，容器初始化类.  以及判断是否为web应用，保存包含main方法的主配置类。</p></li></ul><p>​    2.调用run方法；准备spring的上下文，完成容器的初始化，创建，加载等。<strong>会在不同的时机触发监听器的不同事件。</strong></p><ul><li><p>@Resource，<strong>从Spring上下文中找到唯一匹配的bean进行装配</strong>，说白了就是去spring容器里面去找而不用new对象</p></li><li><p>@Scheduled，定时调度该方法</p></li><li><p>@PostConstruct</p></li></ul><p>@PostConstruct是java5的时候引入的注解，指的是在项目启动的时候执行这个方法，也可以理解为在spring容器启动的时候执行，可作为一些数据的常规化加载，比如数据字典之类的。</p><p>被@PostConstruct修饰的方法会在服务器加载Servle的时候运行，并且只会被服务器执行一次。PostConstruct在构造函数之后执行</p><hr><h5 id="WbConfig-java-类"><a href="#WbConfig-java-类" class="headerlink" title="WbConfig.java 类"></a><strong>WbConfig.java</strong> 类</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.didi.autocheckin.config;<br><br><span class="hljs-keyword">import</span> lombok.Data;<br><span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Value;<br><span class="hljs-keyword">import</span> org.springframework.boot.context.properties.ConfigurationProperties;<br><span class="hljs-keyword">import</span> org.springframework.stereotype.Component;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-meta">@Data</span><br><span class="hljs-meta">@Component</span><br><span class="hljs-meta">@ConfigurationProperties(prefix = &quot;wb&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WbConfig</span> &#123;<br>    <span class="hljs-meta">@Value(&quot;$&#123;wb.cookie&#125;&quot;)</span><br>    <span class="hljs-keyword">private</span> String cookie;<br><br>    <span class="hljs-meta">@Value(&quot;$&#123;wb.pid&#125;&quot;)</span><br>    <span class="hljs-keyword">private</span> List&lt;String&gt; pids;<br><br>&#125;<br></code></pre></td></tr></table></figure><ul><li><strong>@Component：</strong> 标注Spring管理的Bean，使用@Component注解在一个类上，表示将此类标记为Spring容器中的一个Bean。</li></ul><p>  补充：**@controller：  controller控制器层（注入服务）**</p><p>  ​            <strong>@service ：   service服务层（注入dao）</strong></p><p>  ​            <strong>@repository ： dao持久层（实现dao访问）</strong></p><ul><li><p><strong>@Data</strong>:  属性的set和get方法不用写</p></li><li><p><strong>@ConfigurationProperties</strong>: 在编写项目代码时，我们要求更灵活的配置，更好的模块化整合。在 Spring Boot 项目中，为满足以上要求，我们将大量的参数配置在 application.properties 或 application.yml 文件中，通过 <code>@ConfigurationProperties</code> 注解，我们可以方便的获取这些参数值</p></li></ul><hr><h5 id="application-yml-配置文件内容："><a href="#application-yml-配置文件内容：" class="headerlink" title="application.yml 配置文件内容："></a><strong>application.yml 配置文件内容：</strong></h5><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">server:</span><br>  <span class="hljs-attr">port:</span> <span class="hljs-string">$&#123;auto.port&#125;</span><br><br><span class="hljs-comment"># cookie </span><br><span class="hljs-attr">wb:</span><br>  <span class="hljs-attr">cookie:</span> <span class="hljs-comment">#cookie</span><br>  <span class="hljs-attr">pid:</span> <span class="hljs-string">100808445c68f22a32b95efe6c3d025512d13c,1008089f1260fce8d1d56c76d01541995b2d5c</span><br></code></pre></td></tr></table></figure><hr><h5 id="StartCommand-java类"><a href="#StartCommand-java类" class="headerlink" title="StartCommand.java类"></a><strong>StartCommand.java类</strong></h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.didi.autocheckin.portConfig;<br><span class="hljs-keyword">import</span> com.didi.autocheckin.util.ServerPortUtil;<br><span class="hljs-keyword">import</span> org.springframework.util.StringUtils;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StartCommand</span> &#123;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 端口属性名称，如果名称为server.port则在配置文件中不用指定，否则需要指定为此处配置的名称，如$&#123;auto.port&#125;</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">SERVER_PORT</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;auto.port&quot;</span>;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">StartCommand</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">boolean</span> <span class="hljs-variable">isServerPort</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">serverPort</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&quot;</span>;<br>        <span class="hljs-keyword">if</span> (args != <span class="hljs-literal">null</span>) &#123;<br>            <span class="hljs-keyword">for</span> (String arg : args) &#123;<br>                <span class="hljs-keyword">if</span> (StringUtils.hasText(arg) &amp;&amp; arg.startsWith(<span class="hljs-string">&quot;--server.port&quot;</span> )) &#123;<br>                    isServerPort = <span class="hljs-literal">true</span>;<br>                    serverPort = arg;<br>                    <span class="hljs-keyword">break</span>;<br>                &#125;<br>            &#125;<br>        &#125;<br><br>        String port;<br>        <span class="hljs-keyword">if</span> (isServerPort) &#123;<br>            port = serverPort.split(<span class="hljs-string">&quot;=&quot;</span>)[<span class="hljs-number">1</span>];<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            port = ServerPortUtil.getAvailablePort();<br>        &#125;<br>        System.out.println(<span class="hljs-string">&quot;Current project port is &quot;</span> + port);<br>        System.setProperty(SERVER_PORT, port);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="ServerPortUtil-java类"><a href="#ServerPortUtil-java类" class="headerlink" title="ServerPortUtil.java类"></a>ServerPortUtil.java类</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.didi.autocheckin.util;<br><br><span class="hljs-keyword">import</span> java.net.InetAddress;<br><span class="hljs-keyword">import</span> java.net.Socket;<br><span class="hljs-keyword">import</span> java.util.Random;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ServerPortUtil</span> &#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">MAX_PORT</span> <span class="hljs-operator">=</span> <span class="hljs-number">65535</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">MIN_PORT</span> <span class="hljs-operator">=</span> <span class="hljs-number">8000</span>;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">getAvailablePort</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">Random</span> <span class="hljs-variable">random</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Random</span>();<br>        <span class="hljs-comment">// 最大尝试次数为端口范围</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">maxRetryCount</span> <span class="hljs-operator">=</span> MAX_PORT - MIN_PORT;<br>        <span class="hljs-keyword">while</span> (maxRetryCount &gt; <span class="hljs-number">0</span>) &#123;<br>            <span class="hljs-comment">// 指定范围内随机端口，随便写的算法，根据自己需要调整</span><br>            <span class="hljs-type">int</span> <span class="hljs-variable">port</span> <span class="hljs-operator">=</span> random.nextInt(MAX_PORT - MIN_PORT) + MIN_PORT;<br>            <span class="hljs-type">boolean</span> <span class="hljs-variable">isUsed</span> <span class="hljs-operator">=</span> isLocalePortUsing(port);<br>            <span class="hljs-keyword">if</span> (!isUsed) &#123;<br>                <span class="hljs-keyword">return</span> String.valueOf(port);<br>            &#125;<br>            --maxRetryCount;<br>        &#125;<br>        System.out.println(<span class="hljs-string">&quot;系统暂无端口可用，运行结束&quot;</span>);<br>        System.exit(<span class="hljs-number">1</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 检查给定端口是否可用</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@author</span> tianxincode@163.com</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@since</span> 2020/10/14</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isLocalePortUsing</span><span class="hljs-params">(<span class="hljs-type">int</span> port)</span> &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-comment">// 建立一个Socket连接, 如果该端口还在使用则返回true, 否则返回false, 127.0.0.1代表本机</span><br>            <span class="hljs-keyword">new</span> <span class="hljs-title class_">Socket</span>(InetAddress.getByName(<span class="hljs-string">&quot;127.0.0.1&quot;</span>), port);<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            <span class="hljs-comment">// 异常说明端口连接不上，端口能使用</span><br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>这个签到程序，第一遍看完os：哇好混乱，这是什么注解啊！！那是什么意思啊</p><p>看第二遍os：我画画它的流程图看看。看第三遍os：好像就是两步，先检查可用port，然后设置一个定时签到任务。哈哈哈哈哈，看不懂就多看几遍就好了。</p><p>参考链接：<a href="https://gitee.com/didi1212/AutoCheckIn"></a></p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Doris写入数据报错err=-235</title>
    <link href="/posts/2022/07/4b557c76.html"/>
    <url>/posts/2022/07/4b557c76.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><h3 id="问题描述："><a href="#问题描述：" class="headerlink" title="问题描述："></a>问题描述：</h3><ul><li>Flinkcdc抽取数据写入到doris报错，err: tablet writer write failed, tablet_id&#x3D;8165971, txn_id&#x3D;122211550, err&#x3D;-235, see more in null</li></ul><p>具体截图如下：</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgdoris_235.png"></p><hr><h3 id="问题查询和解决"><a href="#问题查询和解决" class="headerlink" title="问题查询和解决"></a>问题查询和解决</h3><p>通过网上查询一圈，发现该问题还挺普遍的，而且还已经记录在了doris官网</p><p>[<a href="https://doris.apache.org/zh-CN/docs/faq/data-faq.html#q4-tablet-writer-write-failed-tablet-id-27306172-txn-id-28573520-err-235-or-215-or-238]">https://doris.apache.org/zh-CN/docs/faq/data-faq.html#q4-tablet-writer-write-failed-tablet-id-27306172-txn-id-28573520-err-235-or-215-or-238]</a>(tablet writer write failed, tablet_id&#x3D;27306172, txn_id&#x3D;28573520, err&#x3D;-235 or -215 or -238)</p><p>这个错误通常发生在数据导入操作中。新版错误码为 -235，老版本错误码可能是 -215。</p><p>这个错误的含义是，对应tablet的数据版本超过了最大限制（默认500，由 BE 参数 <code>max_tablet_version_num</code> 控制），后续写入将被拒绝。</p><p>比如问题中这个错误，即表示 27306172 这个tablet的数据版本超过了限制。</p><p>这个错误通常是因为导入的频率过高，大于后台数据的compaction速度，导致版本堆积并最终超过了限制。</p><p>此时，我们可以先通过show tablet 27306172 语句，然后执行结果中的 show proc 语句，查看tablet各个副本的情况。结果中的 versionCount即表示版本数量。</p><p>如果发现某个副本的版本数量过多，则需要降低导入频率(batch_size)或停止导入，并观察版本数是否有下降。</p><p>如果停止导入后，版本数依然没有下降，则需要去对应的BE节点查看be.INFO日志，搜索tablet id以及 compaction关键词，检查compaction是否正常运行。</p><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>以上问题，可以通过两种方式解决</p><p>1.降低dorisBatchSize大小</p><p>2.增大tablet的数据版本数据版本最大限制，我们是将默认的调大到了3000，修改be.conf 中max_tablet_version_num &#x3D; 3000</p><p>我们项目组出线这个问题是因为，当天几台doris全挂了，重启后max_tablet_version_num之前设置的实效了，导致doris启动后积压了很多数据的需要compaction，一下子就达到了默认值versionCount&#x3D;500，导致的报错</p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>Doris</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Doris</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>flinkCDC抽取mysql数据问题记录</title>
    <link href="/posts/2022/06/95cefbee.html"/>
    <url>/posts/2022/06/95cefbee.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><h3 id="情景描述"><a href="#情景描述" class="headerlink" title="情景描述"></a>情景描述</h3><p>利用flinkcdc抽取mysql数据到kafka，再从kafka消费数据到Doris。</p><p>上游mysql的delete操作，在下游Doris做成逻辑删除，即表增加一列is_delete_flg做为是否删除的标志。Doris表设置为unique模型，保证端对端的幂等性，保证数据不会重复。其中Doris的unique模型表需要设置sequence列。</p><p>flinkcdc官网介绍的op_ts操作时间正好可以做为sequence。</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20220619203017.png"></p><p>在同步了两百多张表后，发现有一张表Doris的is_delete_flg&#x3D;1，也就是逻辑删除的状态，而mysql表里并没有删除。</p><hr><h3 id="定位问题"><a href="#定位问题" class="headerlink" title="定位问题"></a>定位问题</h3><p>定位问题的思路就是打印原始数据看看，直接flinkcdc读取过来然后做print打印原始数据</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs scala">------<span class="hljs-type">Struct</span>-原始value数据如下：--------------------<br><span class="hljs-type">Struct</span>&#123;before=<span class="hljs-type">Struct</span>&#123;goods_id=<span class="hljs-number">311054013088959091</span>,send_location=<span class="hljs-type">US</span>&#125;,source=<span class="hljs-type">Struct</span>&#123;version=<span class="hljs-number">1.5</span><span class="hljs-number">.4</span>.<span class="hljs-type">Final</span>,connector=mysql,name=mysql_binlog_source,ts_ms=<span class="hljs-number">1654866586000</span>,db=isc_goods,table=prd_goods_send_location,server_id=<span class="hljs-number">50103306</span>,gtid=<span class="hljs-number">25e11912</span>-aa95<span class="hljs-number">-11</span>ec<span class="hljs-number">-9</span>f6c<span class="hljs-number">-002248168</span>efc:<span class="hljs-number">3002800</span>,file=mysql_bin<span class="hljs-number">.000023</span>,pos=<span class="hljs-number">647582276</span>,row=<span class="hljs-number">0</span>&#125;,op=d,ts_ms=<span class="hljs-number">1654866586278</span>&#125;<br><br>------<span class="hljs-type">DELETE</span>-value数据如下：--------------------<br><span class="hljs-type">Struct</span>&#123;before=<span class="hljs-type">Struct</span>&#123;goods_id=<span class="hljs-number">311054013088959091</span>,send_location=<span class="hljs-type">US</span>&#125;,source=<span class="hljs-type">Struct</span>&#123;version=<span class="hljs-number">1.5</span><span class="hljs-number">.4</span>.<span class="hljs-type">Final</span>,connector=mysql,name=mysql_binlog_source,ts_ms=<span class="hljs-number">1654866586000</span>,db=isc_goods,table=prd_goods_send_location,server_id=<span class="hljs-number">50103306</span>,gtid=<span class="hljs-number">25e11912</span>-aa95<span class="hljs-number">-11</span>ec<span class="hljs-number">-9</span>f6c<span class="hljs-number">-002248168</span>efc:<span class="hljs-number">3002800</span>,file=mysql_bin<span class="hljs-number">.000023</span>,pos=<span class="hljs-number">647582276</span>,row=<span class="hljs-number">0</span>&#125;,op=d,ts_ms=<span class="hljs-number">1654866586278</span>&#125;<br>&#123;<span class="hljs-string">&quot;op&quot;</span>:<span class="hljs-string">&quot;-D&quot;</span>,<span class="hljs-string">&quot;data&quot;</span>:&#123;<span class="hljs-string">&quot;send_location&quot;</span>:<span class="hljs-string">&quot;US&quot;</span>,<span class="hljs-string">&quot;goods_id&quot;</span>:<span class="hljs-string">&quot;311054013088959091&quot;</span>,<span class="hljs-string">&quot;is_deleted_flg&quot;</span>:<span class="hljs-number">1</span>,<span class="hljs-string">&quot;ts_ms&quot;</span>:<span class="hljs-number">1654866586278</span>&#125;,<span class="hljs-string">&quot;source&quot;</span>:<span class="hljs-string">&quot;isc_goods.prd_goods_send_location&quot;</span>&#125;<br><br>------<span class="hljs-type">Struct</span>-原始value数据如下：--------------------<br><span class="hljs-type">Struct</span>&#123;after=<span class="hljs-type">Struct</span>&#123;goods_id=<span class="hljs-number">311054013088959091</span>,send_location=<span class="hljs-type">US</span>&#125;,source=<span class="hljs-type">Struct</span>&#123;version=<span class="hljs-number">1.5</span><span class="hljs-number">.4</span>.<span class="hljs-type">Final</span>,connector=mysql,name=mysql_binlog_source,ts_ms=<span class="hljs-number">1654866586000</span>,db=isc_goods,table=prd_goods_send_location,server_id=<span class="hljs-number">50103306</span>,gtid=<span class="hljs-number">25e11912</span>-aa95<span class="hljs-number">-11</span>ec<span class="hljs-number">-9</span>f6c<span class="hljs-number">-002248168</span>efc:<span class="hljs-number">3002800</span>,file=mysql_bin<span class="hljs-number">.000023</span>,pos=<span class="hljs-number">647582531</span>,row=<span class="hljs-number">0</span>&#125;,op=c,ts_ms=<span class="hljs-number">1654866586278</span>&#125;<br>&#123;<span class="hljs-string">&quot;op&quot;</span>:<span class="hljs-string">&quot;+I&quot;</span>,<span class="hljs-string">&quot;data&quot;</span>:&#123;<span class="hljs-string">&quot;send_location&quot;</span>:<span class="hljs-string">&quot;US&quot;</span>,<span class="hljs-string">&quot;goods_id&quot;</span>:<span class="hljs-string">&quot;311054013088959091&quot;</span>,<span class="hljs-string">&quot;is_deleted_flg&quot;</span>:<span class="hljs-number">0</span>,<span class="hljs-string">&quot;ts_ms&quot;</span>:<span class="hljs-number">1654866586278</span>&#125;,<span class="hljs-string">&quot;source&quot;</span>:<span class="hljs-string">&quot;isc_goods.prd_goods_send_location&quot;</span>&#125;<br></code></pre></td></tr></table></figure><p>发现delete的”ts_ms”:1654866586278和insert的 “ts_ms”:1654866586278是在同一毫秒发生，此时到Doris就会随机取一条数据，可能取到delete的那一条，所以标志is_delete_flg&#x3D;1，而mysql由于还有insert同一条数据，故而发生了👆描述的问题。</p><h3 id="猜想上游发生此数据现象的原因"><a href="#猜想上游发生此数据现象的原因" class="headerlink" title="猜想上游发生此数据现象的原因"></a>猜想上游发生此数据现象的原因</h3><p>可能delete和insert放在同一个事物中提交了，于是找上游要了处理逻辑</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20220619204843.png"></p><p>发现真是批量提交了</p><h3 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h3><p>1.可以将insert操作的op_ts➕1s使得和delete的操作时间不同</p><p>2.因为数据量比较小，我直接采用了select方式的datax方式抽取数据</p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>Flink</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Flink</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>计算机统考专业课(408)笔记</title>
    <link href="/posts/2022/06/72b512e2.html"/>
    <url>/posts/2022/06/72b512e2.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><p>每门学科其实都有自己的底层逻辑，如果说高屋建瓴，搭好一个好房子最重要的是地基，那么计算机学科的地基就是408，即计算机组成原理(CO)、数据结构(DS)、操作系统(OS)、计算机网络(CN)。这也是计算机很多优秀学校的考研专业课，算得上是工科考研难度天花板。</p><p>下面👇分别整理了四门课程的思维导图，在这里做个整理😄</p><h4 id="计算机网络"><a href="#计算机网络" class="headerlink" title="计算机网络"></a>计算机网络</h4><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.png"></p><h3 id="计算机组成原理"><a href="#计算机组成原理" class="headerlink" title="计算机组成原理"></a>计算机组成原理</h3><p>​<img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86@2x.png"></p><h3 id="操作系统"><a href="#操作系统" class="headerlink" title="操作系统"></a>操作系统</h3><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F.png"></p><h3 id="数据结构"><a href="#数据结构" class="headerlink" title="数据结构"></a>数据结构</h3><p>数据结构部分为手写，可以从线性到非线性的这个主题框架来阅读。因为数据结构除了线性就是非线性结构。</p><p>线性结构有：线性1.0（顺序表、链表），线性2.0（栈、队列），再进行推广有数据和字符串。</p><p>非线性结构：树，图</p><p><strong>线性结构和非线性结构是谈的数据的构成，要将数据结构这门课程灵活运用，重在数据的操作</strong>。什么是数据的操作呢？在大多数开发的场景，我们会对数据进行排序和查找。</p><p>排序和查找都有对应的算法，读到这里数据结构的精髓其实就已经出来了，它就是上面介绍的数据构成方式（线性和非线性）➕算法（查询、排序等等）</p><ul><li>数据结构总览</li></ul><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20220611191533.png"></p><ul><li>线性结构</li></ul><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20220611184958.png"></p><ul><li>非线性结构</li></ul><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20220611185350.png"></p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20220611185601.png"></p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20220611185647.png"></p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20220611185735.png"></p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20220612112140.png"></p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20220611190007.png"></p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20220611190158.png"></p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20220611190252.png"></p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20220611190355.png"></p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20220611190640.png"></p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    
    <tags>
      
      <tag>计算机基础专业课</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Doris大表关联优化</title>
    <link href="/posts/2022/06/3bf19656.html"/>
    <url>/posts/2022/06/3bf19656.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><h3 id="记一次Doris大表关联优化"><a href="#记一次Doris大表关联优化" class="headerlink" title="记一次Doris大表关联优化"></a>记一次Doris大表关联优化</h3><p><strong>场景：</strong></p><p>有两张大表，数据量分别为5kw+和接近7kw，表空间占用约等于6.26GB和7.77GB</p><p>![](<a href="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img%E6%88%AA%E5%B1%8F2022-06-08">https://raw.githubusercontent.com/YUTING0907/PicGo/main/img截屏2022-06-08</a> 下午9.58.01.png)</p><p>历史数据上游提供的全部为同一天的数据，所以没办法进行分区，只能进行分桶，按照大概每个桶10w-15w数据量，将表分为300个bucket</p><p>表结构如下：</p><figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs autohotkey">CREATE TABLE `ods_esc_buyer_goods_ebay_compatibility_model_test` (<br>  `id` varchar(<span class="hljs-number">128</span>) <span class="hljs-literal">NOT</span> NULL COMMENT <span class="hljs-string">&quot;id&quot;</span>,<br>  `create_time` datetime <span class="hljs-literal">NOT</span> NULL COMMENT <span class="hljs-string">&quot;create_time&quot;</span>,<br>  `category_id` varchar(<span class="hljs-number">200</span>) <span class="hljs-literal">NOT</span> NULL COMMENT <span class="hljs-string">&quot;ebayid&quot;</span>,<br>  `site` varchar(<span class="hljs-number">1020</span>) <span class="hljs-literal">NOT</span> NULL COMMENT <span class="hljs-string">&quot;站点&quot;</span>,<br>  `model_id` bigint NULL COMMENT <span class="hljs-string">&quot;车型id&quot;</span>,<br>  `esc_category_id` varchar(<span class="hljs-number">128</span>) NULL COMMENT <span class="hljs-string">&quot;esc品类id&quot;</span>,<br>  `version` varchar(<span class="hljs-number">128</span>) NULL COMMENT <span class="hljs-string">&quot;版本号&quot;</span>,<br>  `update_type` int(<span class="hljs-number">11</span>) NULL COMMENT <span class="hljs-string">&quot;更新类型&quot;</span>,<br>  `update_time` datetime NULL COMMENT <span class="hljs-string">&quot;update_time&quot;</span>,<br>  `deleted` tinyint(<span class="hljs-number">4</span>) NULL DEFAULT <span class="hljs-string">&quot;0&quot;</span> COMMENT <span class="hljs-string">&quot;删除标记&quot;</span>,<br>  `is_deleted_flg` int(<span class="hljs-number">11</span>) NULL DEFAULT <span class="hljs-string">&quot;0&quot;</span> COMMENT <span class="hljs-string">&quot;是否被系統物理刪 0：未被物理删，1：系统已删除&quot;</span>,<br>  `ts_ms` bigint(<span class="hljs-number">20</span>) NULL DEFAULT <span class="hljs-string">&quot;0&quot;</span> COMMENT <span class="hljs-string">&quot;数据拉取时间&quot;</span>,<br>  INDEX idx_site (`site`) USING BITMAP COMMENT &#x27;站点索引&#x27;,<br>  INDEX idx_category_id (`category_id`) USING BITMAP COMMENT &#x27;品类索引&#x27;,<br>  INDEX idx_model_id (`model_id`) USING BITMAP COMMENT &#x27;车型id索引&#x27;<br>) ENGINE=OLAP<br>UNIQUE KEY(`id`, `create_time`, `category_id`, `site`)<br>COMMENT <span class="hljs-string">&quot;品类车型关联表&quot;</span><br>DISTRIBUTED BY HASH(`id`) BUCKETS <span class="hljs-number">300</span><br>PROPERTIES (<br><span class="hljs-string">&quot;replication_allocation&quot;</span> = <span class="hljs-string">&quot;tag.location.default: 3&quot;</span>,<br><span class="hljs-string">&quot;in_memory&quot;</span> = <span class="hljs-string">&quot;false&quot;</span>,<br><span class="hljs-string">&quot;storage_format&quot;</span> = <span class="hljs-string">&quot;V2&quot;</span><br>)<span class="hljs-comment">;</span><br><br><br>CREATE TABLE ods.`ods_esc_buyer_goods_ebay_compatibility_properties_values_test` (<br>  `id` varchar(<span class="hljs-number">128</span>) <span class="hljs-literal">NOT</span> NULL COMMENT <span class="hljs-string">&quot;id&quot;</span>,<br>  `create_time` datetime <span class="hljs-literal">NOT</span> NULL COMMENT <span class="hljs-string">&quot;create_time&quot;</span>,<br>  `site` varchar(<span class="hljs-number">1020</span>) <span class="hljs-literal">NOT</span> NULL COMMENT <span class="hljs-string">&quot;站点&quot;</span>,<br>  `model_id` bigint <span class="hljs-literal">NOT</span> NULL COMMENT <span class="hljs-string">&quot;车型id&quot;</span>,<br>  `level1` varchar(<span class="hljs-number">1020</span>) NULL COMMENT <span class="hljs-string">&quot;对应goods_ebay_compatibility_properties表propertyName,FitmentComments不是属性，遇到FitmentComments则删除FitmentComments并且level前移一位&quot;</span>,<br>  `level2` varchar(<span class="hljs-number">1020</span>) NULL COMMENT <span class="hljs-string">&quot;level2&quot;</span>,<br>  `level3` varchar(<span class="hljs-number">1020</span>) NULL COMMENT <span class="hljs-string">&quot;level3&quot;</span>,<br>  `level4` varchar(<span class="hljs-number">1020</span>) NULL COMMENT <span class="hljs-string">&quot;level4&quot;</span>,<br>  `level5` varchar(<span class="hljs-number">1020</span>) NULL COMMENT <span class="hljs-string">&quot;level5&quot;</span>,<br>  `level6` varchar(<span class="hljs-number">1020</span>) NULL COMMENT <span class="hljs-string">&quot;level6&quot;</span>,<br>  `level7` varchar(<span class="hljs-number">1020</span>) NULL COMMENT <span class="hljs-string">&quot;level7&quot;</span>,<br>  `level8` varchar(<span class="hljs-number">1020</span>) NULL COMMENT <span class="hljs-string">&quot;level8&quot;</span>,<br>  `deleted` tinyint(<span class="hljs-number">4</span>) NULL COMMENT <span class="hljs-string">&quot;状态&quot;</span>,<br>  `update_time` datetime NULL COMMENT <span class="hljs-string">&quot;update_time&quot;</span>,<br>  `is_deleted_flg` int(<span class="hljs-number">11</span>) NULL DEFAULT <span class="hljs-string">&quot;0&quot;</span> COMMENT <span class="hljs-string">&quot;是否被系統物理刪 0：未被物理删，1：系统已删除&quot;</span>,<br>  `ts_ms` bigint(<span class="hljs-number">20</span>) NULL DEFAULT <span class="hljs-string">&quot;0&quot;</span> COMMENT <span class="hljs-string">&quot;数据拉取时间&quot;</span>,<br>  INDEX idx_site (`site`) USING BITMAP COMMENT &#x27;站点索引&#x27;,<br>  INDEX idx_model_id (`model_id`) USING BITMAP COMMENT &#x27;车型id索引&#x27;,<br>  INDEX idx_level1 (`level1`) USING BITMAP COMMENT &#x27;level1索引&#x27;,<br>  INDEX idx_level2 (`level2`) USING BITMAP COMMENT &#x27;level2索引&#x27;,<br>  INDEX idx_level3 (`level3`) USING BITMAP COMMENT &#x27;level3索引&#x27;,<br>  INDEX idx_level4 (`level4`) USING BITMAP COMMENT &#x27;level4索引&#x27;,<br>  INDEX idx_level5 (`level5`) USING BITMAP COMMENT &#x27;level5索引&#x27;,<br>  INDEX idx_level6 (`level6`) USING BITMAP COMMENT &#x27;level6索引&#x27;,<br>  INDEX idx_level7 (`level7`) USING BITMAP COMMENT &#x27;level7索引&#x27;,<br>  INDEX idx_level8 (`level8`) USING BITMAP COMMENT &#x27;level8索引&#x27;<br>) ENGINE=OLAP<br>UNIQUE KEY(`id`, `create_time`, `site`)<br>COMMENT <span class="hljs-string">&quot;品类属性值&quot;</span><br>DISTRIBUTED BY HASH(`id`) BUCKETS <span class="hljs-number">300</span><br>PROPERTIES (<br><span class="hljs-string">&quot;replication_allocation&quot;</span> = <span class="hljs-string">&quot;tag.location.default: 3&quot;</span>,<br><span class="hljs-string">&quot;in_memory&quot;</span> = <span class="hljs-string">&quot;false&quot;</span>,<br><span class="hljs-string">&quot;storage_format&quot;</span> = <span class="hljs-string">&quot;V2&quot;</span><br>)<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><p>查询语句如下：</p><p>发现SET query_timeout &#x3D; 10000; 发现查询仍旧会time out </p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">select <br> <span class="hljs-built_in">t1</span>.model_id<br> ,split_part(<span class="hljs-built_in">t1</span>.version , <span class="hljs-string">&#x27;-&#x27;</span>, <span class="hljs-number">1</span>) <br> ,<span class="hljs-built_in">t1</span>.esc_category_id<br> ,<span class="hljs-built_in">t1</span>.category_id<br> ,<span class="hljs-built_in">t1</span>.site<br> ,<span class="hljs-built_in">t3</span>.catagory_name<br> ,<span class="hljs-string">&quot;&quot;</span><br> ,<span class="hljs-built_in">t1</span>.update_type<br> ,<span class="hljs-built_in">t1</span>.deleted<br> ,<span class="hljs-built_in">t1</span>.create_time<br> ,<span class="hljs-built_in">t1</span>.update_time<br> ,<span class="hljs-built_in">t2</span>.level1<br> ,<span class="hljs-built_in">t2</span>.level2<br> ,<span class="hljs-built_in">t2</span>.level3<br> ,<span class="hljs-built_in">t2</span>.level4<br> ,<span class="hljs-built_in">t2</span>.level5<br> ,<span class="hljs-built_in">t2</span>.level6<br> ,<span class="hljs-built_in">t2</span>.level7<br> ,<span class="hljs-built_in">t2</span>.level8<br> from ods.ods_esc_buyer_goods_ebay_compatibility_model <span class="hljs-built_in">t1</span><br>left <span class="hljs-keyword">join </span>ods.ods_esc_buyer_goods_ebay_compatibility_properties_values <span class="hljs-built_in">t2</span><br>on <span class="hljs-built_in">t1</span>.model_id = <span class="hljs-built_in">t2</span>.model_id<br><span class="hljs-keyword">and </span><span class="hljs-built_in">t2</span>.is_deleted_flg=<span class="hljs-number">0</span><br><span class="hljs-keyword">and </span><span class="hljs-built_in">t2</span>.deleted = <span class="hljs-number">0</span><br>left <span class="hljs-keyword">join </span>ods.ods_esc_goods_prd_catagory <span class="hljs-built_in">t3</span><br>on <span class="hljs-built_in">t1</span>.esc_category_id = <span class="hljs-built_in">t3</span>.catagory_uid<br><span class="hljs-keyword">and </span><span class="hljs-built_in">t3</span>.is_deleted_flg = <span class="hljs-number">0</span><br>where <span class="hljs-built_in">t1</span>.is_deleted_flg=<span class="hljs-number">0</span><br>;<br></code></pre></td></tr></table></figure><p>观察select查询语句发现关联键model_id, 没有用上前缀索引。可以用bukect shuffle join进行优化。</p><hr><h3 id="优化"><a href="#优化" class="headerlink" title="优化"></a>优化</h3><h4 id="bukect-shuffle-join原理"><a href="#bukect-shuffle-join原理" class="headerlink" title="bukect shuffle join原理"></a>bukect shuffle join原理</h4><p>Doris支持的常规分布式Join方式包括了<em>shuffle</em> join 和broadcast join。这两种join都会导致不小的网络开销:</p><p>举个例子，当前存在A表与B表的Join查询，它的Join方式为HashJoin，不同Join类型的开销如下：</p><ul><li><strong>Broadcast Join</strong>: 如果根据数据分布，查询规划出A表有3个执行的HashJoinNode，那么需要将B表全量的发送到3个HashJoinNode，那么它的网络开销是<code>3B</code>，它的内存开销也是<code>3B</code></li><li><strong>Shuffle  Join</strong>: <em>Shuffle</em> Join会将A，B两张表的数据根据哈希计算分散到集群的节点之中，所以它的网络开销为 <code>A + B</code>，内存开销为<code>B</code></li></ul><p>在FE之中保存了Doris每个表的数据分布信息，如果join语句命中了表的数据分布列，我们应该使用数据分布信息来减少join语句的网络与内存开销，这就是Bucket <em>Shuffle</em> Join的思路来源。</p><h3 id="bukect-shuffle-join使用方式"><a href="#bukect-shuffle-join使用方式" class="headerlink" title="bukect shuffle join使用方式"></a>bukect shuffle join使用方式</h3><ul><li><p>将session变量<code>enable_bucket_*shuffle*_join</code>设置为<code>true</code></p><p>则FE在进行查询规划时就会默认将能够转换为Bucket <em>Shuffle</em> Join的查询自动规划为Bucket <em>Shuffle</em> Join。</p></li></ul><p><code>set enable_bucket_*shuffle*_join = true;</code></p><p>在FE进行分布式查询规划时，优先选择的顺序为 Colocate Join -&gt; Bucket <em>Shuffle</em> Join -&gt; Broadcast Join -&gt; <em>Shuffle</em> Join。但是如果用户显式hint了Join的类型，如：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> test <span class="hljs-keyword">join</span> [shuffle] baseall <span class="hljs-keyword">on</span> test.k1 = baseall.k1;<br></code></pre></td></tr></table></figure><ul><li>可以通过<code>explain</code>命令来查看Join是否为Bucket <em>Shuffle</em> Join：</li></ul><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs gherkin"> 2:HASH JOIN                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |<span class="hljs-string"></span><br><span class="hljs-string"></span>|<span class="hljs-string">   </span>|<span class="hljs-string">  join op: INNER JOIN (BUCKET_SHUFFLE)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          </span>|<br>|<span class="hljs-string">   </span>|<span class="hljs-string">  hash predicates:                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              </span>|<br>|<span class="hljs-string">   </span>|<span class="hljs-string">  colocate: false, reason: table not in the same group                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          </span>|<br>|<span class="hljs-string">   </span>|<span class="hljs-string">  equal join conjunct: `test`.`k1` = `baseall`.`k1`</span><br></code></pre></td></tr></table></figure><p>在Join类型之中会指明使用的Join方式为：<code>BUCKET_*SHUFFLE*</code></p><h4 id="Bucket-Shuffle-Join的规划规则"><a href="#Bucket-Shuffle-Join的规划规则" class="headerlink" title="Bucket Shuffle Join的规划规则"></a>Bucket <em>Shuffle</em> Join的规划规则</h4><ul><li>Bucket <em>Shuffle</em> Join只生效于Join条件为等值的场景，原因与Colocate Join类似，它们都依赖hash来计算确定的数据分布</li><li>在等值Join条件之中包含两张表的分桶列，当左表的分桶列为等值的Join条件时，它有很大概率会被规划为Bucket <em>Shuffle</em> Join</li><li>由于不同的数据类型的hash值计算结果不同，所以Bucket <em>Shuffle</em> Join要求左表的分桶列的类型与右表等值join列的类型需要保持一致，否则无法进行对应的规划</li><li>对于分区表，由于每一个分区的数据分布规则可能不同，所以Bucket <em>Shuffle</em> Join只能保证左表为单分区时生效。所以在SQL执行之中，需要尽量使用<code>where</code>条件使分区裁剪的策略能够生效。</li></ul><p>基于以上规则，将关联键设置为bukect分桶列，并加入到key列，利用前缀索引加速查询。</p><p><strong>tips：</strong>Join 条件中存在左表的分布式列(bukect列)，且左表执行时为单分区，才可以让 Bucket Shuffle Join 生效。</p><p>优化后的表结构如下，优化完3s出结果。</p><figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs autohotkey">CREATE TABLE `ods_esc_buyer_goods_ebay_compatibility_model_test` (<br>  `model_id` bigint NULL COMMENT <span class="hljs-string">&quot;车型id&quot;</span>,<br>  `id` varchar(<span class="hljs-number">128</span>) <span class="hljs-literal">NOT</span> NULL COMMENT <span class="hljs-string">&quot;id&quot;</span>,<br>  `create_time` datetime <span class="hljs-literal">NOT</span> NULL COMMENT <span class="hljs-string">&quot;create_time&quot;</span>,<br>  `category_id` varchar(<span class="hljs-number">200</span>) <span class="hljs-literal">NOT</span> NULL COMMENT <span class="hljs-string">&quot;ebayid&quot;</span>,<br>  `site` varchar(<span class="hljs-number">1020</span>) <span class="hljs-literal">NOT</span> NULL COMMENT <span class="hljs-string">&quot;站点&quot;</span>,<br>  `esc_category_id` varchar(<span class="hljs-number">128</span>) NULL COMMENT <span class="hljs-string">&quot;esc品类id&quot;</span>,<br>  `version` varchar(<span class="hljs-number">128</span>) NULL COMMENT <span class="hljs-string">&quot;版本号&quot;</span>,<br>  `update_type` int(<span class="hljs-number">11</span>) NULL COMMENT <span class="hljs-string">&quot;更新类型&quot;</span>,<br>  `update_time` datetime NULL COMMENT <span class="hljs-string">&quot;update_time&quot;</span>,<br>  `deleted` tinyint(<span class="hljs-number">4</span>) NULL DEFAULT <span class="hljs-string">&quot;0&quot;</span> COMMENT <span class="hljs-string">&quot;删除标记&quot;</span>,<br>  `is_deleted_flg` int(<span class="hljs-number">11</span>) NULL DEFAULT <span class="hljs-string">&quot;0&quot;</span> COMMENT <span class="hljs-string">&quot;是否被系統物理刪 0：未被物理删，1：系统已删除&quot;</span>,<br>  `ts_ms` bigint(<span class="hljs-number">20</span>) NULL DEFAULT <span class="hljs-string">&quot;0&quot;</span> COMMENT <span class="hljs-string">&quot;数据拉取时间&quot;</span>,<br>  INDEX idx_site (`site`) USING BITMAP COMMENT &#x27;站点索引&#x27;,<br>  INDEX idx_category_id (`category_id`) USING BITMAP COMMENT &#x27;品类索引&#x27;,<br>  INDEX idx_model_id (`model_id`) USING BITMAP COMMENT &#x27;车型id索引&#x27;<br>) ENGINE=OLAP<br>UNIQUE KEY(`model_id`,`id`, `create_time`, `category_id`, `site`)<br>COMMENT <span class="hljs-string">&quot;品类车型关联表&quot;</span><br>DISTRIBUTED BY HASH(`model_id`) BUCKETS <span class="hljs-number">300</span><br>PROPERTIES (<br><span class="hljs-string">&quot;replication_allocation&quot;</span> = <span class="hljs-string">&quot;tag.location.default: 3&quot;</span>,<br><span class="hljs-string">&quot;in_memory&quot;</span> = <span class="hljs-string">&quot;false&quot;</span>,<br><span class="hljs-string">&quot;storage_format&quot;</span> = <span class="hljs-string">&quot;V2&quot;</span><br>)<span class="hljs-comment">;</span><br><br><br>CREATE TABLE ods.`ods_esc_buyer_goods_ebay_compatibility_properties_values_test` (<br>  `model_id` bigint <span class="hljs-literal">NOT</span> NULL COMMENT <span class="hljs-string">&quot;车型id&quot;</span>,<br>  `id` varchar(<span class="hljs-number">128</span>) <span class="hljs-literal">NOT</span> NULL COMMENT <span class="hljs-string">&quot;id&quot;</span>,<br>  `create_time` datetime <span class="hljs-literal">NOT</span> NULL COMMENT <span class="hljs-string">&quot;create_time&quot;</span>,<br>  `site` varchar(<span class="hljs-number">1020</span>) <span class="hljs-literal">NOT</span> NULL COMMENT <span class="hljs-string">&quot;站点&quot;</span>,<br>  `level1` varchar(<span class="hljs-number">1020</span>) NULL COMMENT <span class="hljs-string">&quot;对应goods_ebay_compatibility_properties表propertyName,FitmentComments不是属性，遇到FitmentComments则删除FitmentComments并且level前移一位&quot;</span>,<br>  `level2` varchar(<span class="hljs-number">1020</span>) NULL COMMENT <span class="hljs-string">&quot;level2&quot;</span>,<br>  `level3` varchar(<span class="hljs-number">1020</span>) NULL COMMENT <span class="hljs-string">&quot;level3&quot;</span>,<br>  `level4` varchar(<span class="hljs-number">1020</span>) NULL COMMENT <span class="hljs-string">&quot;level4&quot;</span>,<br>  `level5` varchar(<span class="hljs-number">1020</span>) NULL COMMENT <span class="hljs-string">&quot;level5&quot;</span>,<br>  `level6` varchar(<span class="hljs-number">1020</span>) NULL COMMENT <span class="hljs-string">&quot;level6&quot;</span>,<br>  `level7` varchar(<span class="hljs-number">1020</span>) NULL COMMENT <span class="hljs-string">&quot;level7&quot;</span>,<br>  `level8` varchar(<span class="hljs-number">1020</span>) NULL COMMENT <span class="hljs-string">&quot;level8&quot;</span>,<br>  `deleted` tinyint(<span class="hljs-number">4</span>) NULL COMMENT <span class="hljs-string">&quot;状态&quot;</span>,<br>  `update_time` datetime NULL COMMENT <span class="hljs-string">&quot;update_time&quot;</span>,<br>  `is_deleted_flg` int(<span class="hljs-number">11</span>) NULL DEFAULT <span class="hljs-string">&quot;0&quot;</span> COMMENT <span class="hljs-string">&quot;是否被系統物理刪 0：未被物理删，1：系统已删除&quot;</span>,<br>  `ts_ms` bigint(<span class="hljs-number">20</span>) NULL DEFAULT <span class="hljs-string">&quot;0&quot;</span> COMMENT <span class="hljs-string">&quot;数据拉取时间&quot;</span>,<br>  INDEX idx_site (`site`) USING BITMAP COMMENT &#x27;站点索引&#x27;,<br>  INDEX idx_model_id (`model_id`) USING BITMAP COMMENT &#x27;车型id索引&#x27;,<br>  INDEX idx_level1 (`level1`) USING BITMAP COMMENT &#x27;level1索引&#x27;,<br>  INDEX idx_level2 (`level2`) USING BITMAP COMMENT &#x27;level2索引&#x27;,<br>  INDEX idx_level3 (`level3`) USING BITMAP COMMENT &#x27;level3索引&#x27;,<br>  INDEX idx_level4 (`level4`) USING BITMAP COMMENT &#x27;level4索引&#x27;,<br>  INDEX idx_level5 (`level5`) USING BITMAP COMMENT &#x27;level5索引&#x27;,<br>  INDEX idx_level6 (`level6`) USING BITMAP COMMENT &#x27;level6索引&#x27;,<br>  INDEX idx_level7 (`level7`) USING BITMAP COMMENT &#x27;level7索引&#x27;,<br>  INDEX idx_level8 (`level8`) USING BITMAP COMMENT &#x27;level8索引&#x27;<br>) ENGINE=OLAP<br>UNIQUE KEY(`model_id`,`id`, `create_time`, `site`)<br>COMMENT <span class="hljs-string">&quot;品类属性值&quot;</span><br>DISTRIBUTED BY HASH(`model_id`) BUCKETS <span class="hljs-number">300</span><br>PROPERTIES (<br><span class="hljs-string">&quot;replication_allocation&quot;</span> = <span class="hljs-string">&quot;tag.location.default: 3&quot;</span>,<br><span class="hljs-string">&quot;in_memory&quot;</span> = <span class="hljs-string">&quot;false&quot;</span>,<br><span class="hljs-string">&quot;storage_format&quot;</span> = <span class="hljs-string">&quot;V2&quot;</span><br>)<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><hr><h3 id="SMB-JOIN"><a href="#SMB-JOIN" class="headerlink" title="SMB JOIN"></a>SMB JOIN</h3><p>Bucket <em>Shuffle</em> Join 其实就是SMB JOIN，大表join大表的场景都是这样解决的。</p><p>SMB JOIN是sort merge bucket操作，需要进行分桶，首先会进行排序，然后根据key值合并，把相同key的数据放到同一个bucket中（按照key进行hash）。</p><p>分桶的目的其实就是把大表化成“小表”（多个桶）。</p><p>相同key的数据都在同一个桶中之后，再进行join操作，那么在联合的时候就会大幅度的减小无关项的扫描。</p><p>使用条件：</p><p>（1）两表进行分桶，桶的个数必须相等</p><p>（2）两边进行join时，join列&#x3D;&#x3D;排序列&#x3D;&#x3D;分桶列</p><hr><p><strong>Tips: Doris参数优化</strong></p><p>例如，</p><p>设置并发数 set parallel_fragment_exec_instance_num &#x3D; 8;</p><p>调高执行内存 set exec_mem_limit &#x3D; 8G;</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgdoris%E5%8F%82%E6%95%B0%E4%BC%98%E5%8C%96.png"></p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>Doris</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Doris</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>工作中常用的Java集合类有哪些?</title>
    <link href="/posts/2022/06/d570df95.html"/>
    <url>/posts/2022/06/d570df95.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><p><strong>工作中常用到的Java集合有哪些，应用场景是什么？</strong></p><p>下图是java集合的全家福，可以看到分为两大类，第一类是collection，第二类是map。下面分别介绍：其中List，Set，Queue都是Collection（集合），其每个元素都是单独的一个对象，如List<String>，Set<Integer>等，String和Integer就是单独的一个对象</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgjava%E9%9B%86%E5%90%88.png"></p><ul><li><a href="https://docs.oracle.com/javase/8/docs/api/index.html">JAVA SE 8官方文档</a></li></ul><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img%E9%9B%86%E5%90%88%E5%AE%98%E6%96%B9%E6%96%87%E6%A1%A3.png"></p><h3 id="List集合"><a href="#List集合" class="headerlink" title="List集合"></a>List集合</h3><p>List集合下最常见的集合类有两个：<strong>ArrayList和LinkedList</strong></p><p>在工作中，我都是无脑用<strong>ArrayList</strong>。我问了两个同事：“你们在项目中用过LinkedList吗？”他们都表示没有。</p><p>众所周知，ArrayList底层是数组，LinkedList底层是链表。数组遍历速度快，LinkedList增删元素快。</p><p>为什么在工作中一般就用ArrayList，而不用LinkedList呢？原因也很简单：</p><ul><li>在工作中，<strong>遍历的需求比增删多</strong>，即便是增加元素往往也只是从尾部插入元素，而ArrayList在尾部插入元素也是O(1)</li><li>ArrayList增删没有想象中慢，ArrayList的增删底层调用的<code>copyOf()</code>被优化过，加上现代CPU对内存可以<strong>块操作</strong>，普通大小的ArrayList增删比LinkedList更快。</li></ul><p>所以，在开发中，想到要用集合来装载元素，第一个想到的就是ArrayList。</p><p>那么来了，LinkedList用在什么地方呢？我们一般用在刷算法题上。把LinkedList当做一个先进先出的队列，LinkedList本身就实现了Queue接口</p><p>如果考虑线程安全的问题，可以看看CopyWriteOnArrayList，实际开发用得不多，但我觉得可以了解一下它的思想（CopyWriteOn），这个思想在Linux&#x2F;文件系统都有用到。</p><hr><h3 id="Set集合"><a href="#Set集合" class="headerlink" title="Set集合"></a>Set集合</h3><p>Set集合下最常见的集合类有三个：<strong>HashSet、TreeSet、LinkedHashSet</strong></p><p>List和Set都是集合，一般来说：<strong>如果我们需要保证集合的元素是唯一的，就应该想到用Set集合</strong></p><p>一般我们在开发中最多用到的也就是<strong>HashSet</strong>。TreeSet是可以排序的Set，一般我们需要有序，从数据库拉出来的数据就是有序的，可能往往写<code>order by id desc</code>比较多。而在开发中也很少管元素插入有序的问题，所以LinkedHashSet一般也用不上。</p><p>如果考虑线程安全的问题，可以考虑CopyOnWriteArraySet，用得就更少了（这是一个线程安全的Set，底层实际上就是CopyWriteOnArrayList)</p><p>TreeSet和LinkedHashSet更多的可能用在刷算法的时候。</p><hr><h3 id="Map集合"><a href="#Map集合" class="headerlink" title="Map集合"></a>Map集合</h3><p>Map集合最常见的子类也有三个：HashMap、LinkedHashMap、TreeMap</p><p>如果考虑线程安全问题，应该想到的是ConcurrentHashMap，当然了Hashtable也要有一定的了解，因为面试实在是问得太多太多了。</p><p>HashMap在实际开发中用得也非常多，只要是<code>key-value</code>结构的，一般我们就用<code>HashMap</code>。LinkedHashMap和TreeMap用的不多，原因跟HashSet和TreeSet一样。</p><p>ConcurrentHashMap在实际开发中也用得挺多，我们很多时候把ConcurrentHashMap用于<strong>本地缓存</strong>，不想每次都网络请求数据，在本地做本地缓存。监听数据的变化，如果数据有变动了，就把ConcurrentHashMap对应的值给更新了。</p><hr><h3 id="什么时候考虑线程安全"><a href="#什么时候考虑线程安全" class="headerlink" title="什么时候考虑线程安全"></a>什么时候考虑线程安全</h3><p>什么时候考虑线程安全的集合类，那当然是线程不安全的时候咯。那什么时候线程不安全？最常见的是：<strong>操作的对象是有状态的</strong></p><p>虽然说，我们经常会听到线程不安全，但在<strong>业务开发中</strong>要我们程序员处理线程不安全的地方少之又少。比如说：你在写Servlet的时候，加过<code>syn/lock</code>锁吗？应该没有吧？</p><p>因为我们的操作的对象往往是<strong>无状态</strong>的。<strong>没有共享变量被多个线程访问，自然就没有线程安全问题了</strong>。</p><p>SpringMVC是单例的，但SpringMVC都是在方法内操作数据的，每个线程进入方法都会生成栈帧，每个栈帧的数据都是线程独有的，如果不设定共享变量，不会有线程安全问题。</p><p>上面只是简单举了SpringMVC的例子（只是为了更好的理解）；</p><p>一句话总结：只要涉及到多个线程操作一个共享变量的时候，<strong>就要考虑是不是要用线程安全的集合类</strong>。</p><hr><h3 id="总结："><a href="#总结：" class="headerlink" title="总结："></a>总结：</h3><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/imglist%E9%9B%86%E5%90%88.png"></p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgset%E9%9B%86%E5%90%88.png"></p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgset%E9%9B%86%E5%90%88.png"></p><p>参考链接： <a href="https://www.cnblogs.com/Java3y/p/12572288.html">https://www.cnblogs.com/Java3y/p/12572288.html</a></p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
    </categories>
    
    
    <tags>
      
      <tag>JAVA</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>IDEA编写Scala快捷键</title>
    <link href="/posts/2022/06/9d5296cb.html"/>
    <url>/posts/2022/06/9d5296cb.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><h4 id="键入main之后，按tab键补全"><a href="#键入main之后，按tab键补全" class="headerlink" title="键入main之后，按tab键补全"></a>键入main之后，按tab键补全</h4><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-function">def <span class="hljs-title">main</span><span class="hljs-params">(args: Array[<span class="hljs-type">String</span>])</span>: Unit =</span> &#123;<br>  <br>&#125;<br></code></pre></td></tr></table></figure><h4 id="按住command-点击，查看源代码"><a href="#按住command-点击，查看源代码" class="headerlink" title="按住command + 点击，查看源代码"></a>按住command + 点击，查看源代码</h4><p>当然这里会显示不全，可以去官网把源码包下载下来，然后点击idea右上角的Attach Sources去做一个绑定</p><h4 id="缩进"><a href="#缩进" class="headerlink" title="缩进"></a>缩进</h4><p>tab操作默认整体向右👉移动</p><p>用shift+tab整体向左移</p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    
    <tags>
      
      <tag>Scala</tag>
      
      <tag>IDEA</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>银行成本分摊计算</title>
    <link href="/posts/2022/06/944eb539.html"/>
    <url>/posts/2022/06/944eb539.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><p>银行成本分摊介绍：</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img%E9%93%B6%E8%A1%8C%E6%88%90%E6%9C%AC%E5%88%86%E6%91%8A"></p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>公司业务</category>
      
    </categories>
    
    
    <tags>
      
      <tag>公司业务</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>跨境电商供应链业务</title>
    <link href="/posts/2022/05/7a81ba12.html"/>
    <url>/posts/2022/05/7a81ba12.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><p>下图为跨境电商供应链业务整理</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgeSC%E4%B8%9A%E5%8A%A1.png"></p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>公司业务</category>
      
    </categories>
    
    
    <tags>
      
      <tag>公司业务</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>书单</title>
    <link href="/posts/2022/05/e8a1470d.html"/>
    <url>/posts/2022/05/e8a1470d.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><h4 id="书单推荐"><a href="#书单推荐" class="headerlink" title="书单推荐"></a>书单推荐</h4><table><thead><tr><th>书名</th><th>类型</th><th>推荐人</th><th>推荐理由</th><th>状态</th></tr></thead><tbody><tr><td>Gift of Fear</td><td>权谋书</td><td>weibo: <em>恶魔奶爸</em>_</td><td>正反都可以用的权谋书，正面是教人如何识别出人际关系操纵技巧，生活中的危险分子，防止被人陷害。反面则是可以学习到操纵人心控制他人的技巧。</td><td></td></tr><tr><td>《增广贤文》</td><td>人情练达</td><td>weibo: <em>恶魔奶爸</em>_</td><td>人情世故，工作沟通，办公室政治</td><td></td></tr><tr><td>杜拉拉升职记》</td><td>HR上班流程</td><td>weibo: <em>恶魔奶爸</em>_</td><td>你看完科特勒的市场营销和各类广告的书，背了一堆名词概念，考试过了。但你还是不知道市场部每天干什么。知道市场部每天干什么，这些教科书里的技能，你也还是用不出来。因为人很难想象自己没见过的东西。没概念，那还怎么理解工作？</td><td></td></tr><tr><td>《浮沉》</td><td>市场部工作</td><td>weibo: <em>恶魔奶爸</em>_</td><td>你会发现市场部就是整天出差到处请人来开会，开会时候顺带送礼的</td><td></td></tr><tr><td>《米娅快跑》</td><td>市场部工作</td><td>weibo: <em>恶魔奶爸</em>_</td><td>就会知道市场部就是天天写PPT，写方案，开会，做策划的，出差是有，但不是整天出差，都是市场部你就会迷惑，为什么，为什么会有这些区别？</td><td></td></tr><tr><td>《原则》</td><td>工作</td><td>weibo: <em>恶魔奶爸</em>_</td><td>本书其实讲的是管理，如何最大效率的经营公司，但很多白领和经理人推荐，认为这个是讲工作方法的。它教会了我如何打造企业文化，统一企业精神，制定企业制度，但是自己如何工作它没怎么教，普通白领从这本书里恐怕也学不到什么东西</td><td></td></tr><tr><td></td><td></td><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td><td></td><td></td></tr></tbody></table></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    
    <tags>
      
      <tag>life</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Scala语言入门</title>
    <link href="/posts/2022/05/4b8de31c.html"/>
    <url>/posts/2022/05/4b8de31c.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><h1 id="Scala语言入门"><a href="#Scala语言入门" class="headerlink" title="Scala语言入门"></a>Scala语言入门</h1><p>Scala（发音为&#x2F;ˈskɑːlə, ˈskeɪlə&#x2F;）是一门多范式的编程语言，设计初衷是要集成面向对象编程和函数式编程的各种特性。洛桑联邦理工学院的Martin Odersky于2001年基于Funnel的工作开始设计Scala。Java平台的Scala于2003年底&#x2F;2004年初发布。</p><p>特点：</p><ul><li>同样运行在JVM上，可以与现存程序同时运行。</li><li>可直接使用Java类库。</li><li>同Java一样静态类型。</li><li>语法和Java类似，比Java更加简洁（简洁而并不是简单），表达性更强。</li><li>同时支持面向对象、函数式编程。</li><li>比Java更面向对象。</li></ul><p>关注点：</p><ul><li>类型推断、不变量、函数式编程、高级程序构造。</li><li>并发：actor模型。</li><li>和现有Java代码交互、相比Java异同和优缺。</li></ul><p>和Java关系：</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">        javac               java<br><span class="hljs-string">.java</span> <span class="hljs-params">--------</span>&gt; <span class="hljs-string">.class</span> <span class="hljs-params">----------</span>&gt; run on JVM<br><span class="hljs-string">.scala</span> <span class="hljs-params">-------</span>&gt; <span class="hljs-string">.class</span> <span class="hljs-params">----------</span>&gt; run on JVM<br>        scalac              scala<br></code></pre></td></tr></table></figure><p>测试代码：<a href="https://github.com/tch0/notes/tree/Scala">Scala分支</a> </p><p>等待替换repo，还没手敲</p><p>阅读：</p><ul><li><a href="https://www.bilibili.com/video/BV1Xh411S7bP">尚硅谷大数据技术之Scala入门到精通教程</a>（本文参考）</li><li><a href="https://docs.scala-lang.org/zh-cn/cheatsheets/index.html">Scala官网语法速查</a></li><li><a href="https://docs.scala-lang.org/zh-cn/tour/tour-of-scala.html">Scala官方文档 Tour Of Scala</a></li></ul><h2 id="环境配置"><a href="#环境配置" class="headerlink" title="环境配置"></a>环境配置</h2><p>Scala需要依赖Java，访问<a href="https://docs.scala-lang.org/overviews/jdk-compatibility/overview.html">这里</a>查看特定Scala版本依赖的Java版本。这里选择，最新的JDK17配合Scala2.13.6。</p><p>Windows中下载安装配置环境变量：</p><ul><li>类似于java配置<code>SCALA_HOME</code>为安装目录。</li><li>添加<code>%SCALA_HOME%\bin</code>到path环境变量。</li></ul><p>Linux中类似，可以使用包管理器，但如果依赖版本不严格一致的话，需要官网下载对应版本安装即可。</p><p>也有交互式执行环境：</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">scala</span><br></code></pre></td></tr></table></figure><p>交互式执行环境中的传统艺能：</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">println</span><span class="hljs-params">(<span class="hljs-string">&quot;hello,world!&quot;</span>)</span></span><br></code></pre></td></tr></table></figure><p>暂时不管项目配置，还是单文件编译执行为主，项目开发肯定要以包的形式组织可以使用IntelliJ IDEA开发，使用maven或者sbt进行项目配置。</p><p>使用VSCode编辑器，安装插件Scala Syntax (official)和Scala (Mentals)。</p><p>新建文件<code>HelloScala.scala</code>。</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs perl">object HelloScala &#123; <span class="hljs-regexp">//</span> HelloScala is a object, <span class="hljs-keyword">not</span> a <span class="hljs-class"><span class="hljs-keyword">class</span>, <span class="hljs-title">will</span> <span class="hljs-title">create</span> <span class="hljs-title">a</span> </span><br><span class="hljs-class">    <span class="hljs-title">def</span> <span class="hljs-title">main</span>(<span class="hljs-title">args</span><span class="hljs-attr"> : Array</span>[<span class="hljs-title">String</span>])<span class="hljs-attr"> : Unit</span> = </span>&#123;<br>        println(<span class="hljs-string">&quot;hello,world!&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>可以使用插件CodeRunner直接快捷键运行。也可以在命令行编译为字节码后再运行：</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm"><span class="hljs-keyword">scalac </span>HelloScala.<span class="hljs-keyword">scala</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">scala </span>helloScala<br></code></pre></td></tr></table></figure><p>或者直接运行scala源文件：</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stata"><span class="hljs-keyword">scala</span> HelloScala.<span class="hljs-keyword">scala</span><br></code></pre></td></tr></table></figure><p>和java如出一辙。</p><p>如果编译的话会生成2个<code>.class</code>字节码文件，<code>HelloScala.class</code>和<code>HelloScala$.class</code>。都是字节码但是不能通过<code>java</code>直接运行。但对于HelloWorld这个例子来说，java源代码编译而成的字节码是可以通过<code>scala</code>命令运行的。</p><p>原因是没有引入Scala的库，添加<code>classpath</code>就可以通过java执行scala编译成的字节码了：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">java -<span class="hljs-built_in">cp</span> %SCALA_HOME%/lib/scala-library.jar; HelloScala<br></code></pre></td></tr></table></figure><p>使用<a href="http://java-decompiler.github.io/">Java Decompiler</a>反编译字节码到java源文件可以看到引入Scala库的逻辑。并且：</p><ul><li>scala源文件中的<code>HelloScala</code>对象编译后成为了一个类，但对象本身编译后就是生成的另一个类<code>HelloScala$</code>类的单例对象<code>HelloScala$.MODULE$</code>，称之为伴生对象。</li><li><code>HelloScala$</code>有一个<code>main</code>实例方法，<code>HelloScala</code>类的静态方法通过这个单例对象转调这个实例方法。完成打印。</li><li>Scala比Java更面向对象。</li></ul><h2 id="IDEA环境配置"><a href="#IDEA环境配置" class="headerlink" title="IDEA环境配置"></a>IDEA环境配置</h2><p>使用IntelliJ IDEA：</p><ul><li><p>创建Maven项目，JDK版本17。</p></li><li><p>安装插件：Scala。在IDEA里Preferences&#x2F;Plugins安装scala插件，在线下载慢的话，可以去jerkins官网下载插件到本地然后from disk安装 。</p></li><li><p>Maven项目默认用Java写，在<code>main/</code>目录下新建目录<code>scala/</code>，文件夹上右击Mark directory as, 然后将目录标记为Source Root。</p></li><li><p>这样甚至可以在同一个项目中混用Scala和Java源文件，并互相调用。</p></li><li><p>需要能够添加scala源文件，右键项目，添加框架支持(Add Framworks Support)，配置Scala SDK，选择，然后就可以右键添加Scala源文件了。</p><p>⚠️注意：到这里如果new文件还没出现scala class</p><p>🍬尝试解决方案：</p><p>  在项目的目录下，找到.idea文件下，再从里面找到modules文件夹，里面有个以.iml为后缀的文件，打开它，新增下面这段代码</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs xml">新增下面这段代码，name指的是你自己安装的scala版本，最后你再右键的时候可以发现能new出来一个Scala文件啦<br><span class="hljs-tag">&lt;<span class="hljs-name">orderEntry</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;library&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;scala-sdk-2.13.0&quot;</span> <span class="hljs-attr">level</span>=<span class="hljs-string">&quot;application&quot;</span> /&gt;</span><br><br>以下是整个.iml为后缀文件的参考案例：<br><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">module</span> <span class="hljs-attr">org.jetbrains.idea.maven.project.MavenProjectsManager.isMavenModule</span>=<span class="hljs-string">&quot;true&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;JAVA_MODULE&quot;</span> <span class="hljs-attr">version</span>=<span class="hljs-string">&quot;4&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">component</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;NewModuleRootManager&quot;</span> <span class="hljs-attr">LANGUAGE_LEVEL</span>=<span class="hljs-string">&quot;JDK_1_5&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">output</span> <span class="hljs-attr">url</span>=<span class="hljs-string">&quot;file://$MODULE_DIR$/target/classes&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">output-test</span> <span class="hljs-attr">url</span>=<span class="hljs-string">&quot;file://$MODULE_DIR$/target/test-classes&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">content</span> <span class="hljs-attr">url</span>=<span class="hljs-string">&quot;file://$MODULE_DIR$&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">sourceFolder</span> <span class="hljs-attr">url</span>=<span class="hljs-string">&quot;file://$MODULE_DIR$/src/main/java&quot;</span> <span class="hljs-attr">isTestSource</span>=<span class="hljs-string">&quot;false&quot;</span> /&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">sourceFolder</span> <span class="hljs-attr">url</span>=<span class="hljs-string">&quot;file://$MODULE_DIR$/src/main/resources&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;java-resource&quot;</span> /&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">sourceFolder</span> <span class="hljs-attr">url</span>=<span class="hljs-string">&quot;file://$MODULE_DIR$/src/main/scala&quot;</span> <span class="hljs-attr">isTestSource</span>=<span class="hljs-string">&quot;false&quot;</span> /&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">sourceFolder</span> <span class="hljs-attr">url</span>=<span class="hljs-string">&quot;file://$MODULE_DIR$/src/test/java&quot;</span> <span class="hljs-attr">isTestSource</span>=<span class="hljs-string">&quot;true&quot;</span> /&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">excludeFolder</span> <span class="hljs-attr">url</span>=<span class="hljs-string">&quot;file://$MODULE_DIR$/target&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">content</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">orderEntry</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;jdk&quot;</span> <span class="hljs-attr">jdkName</span>=<span class="hljs-string">&quot;1.8&quot;</span> <span class="hljs-attr">jdkType</span>=<span class="hljs-string">&quot;JavaSDK&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">orderEntry</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;sourceFolder&quot;</span> <span class="hljs-attr">forTests</span>=<span class="hljs-string">&quot;false&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">orderEntry</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;library&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;scala-sdk-2.12.10&quot;</span> <span class="hljs-attr">level</span>=<span class="hljs-string">&quot;application&quot;</span> /&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">component</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>添加包，添加Scala类，选择对象，编辑源码。</p></li></ul><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs processing"><span class="hljs-keyword">package</span> VeryStarted<br><br>object HelloWorld &#123;<br>  def <span class="hljs-title function_">main</span>(args: <span class="hljs-built_in">Array</span>[<span class="hljs-built_in">String</span>]): Unit= &#123;<br>    <span class="hljs-built_in">println</span>(<span class="hljs-string">&quot;Hello,world!&quot;</span>)<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>Ctrl + Shift + F10运行。</li><li>可以看到执行的命令是<code>java</code>在<code>classpath</code>中引入了Scala的<code>jar</code>包形式的库。</li><li>调用java的类库：</li></ul><figure class="highlight sas"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sas">package VeryStarted<br><br>object HelloWorld &#123;<br>  def mai<span class="hljs-meta">n</span>(args: <span class="hljs-keyword">Array</span>[String]): Unit= &#123;<br>    printl<span class="hljs-meta">n</span>(<span class="hljs-string">&quot;Hello,world!&quot;</span>)<br>    System.<span class="hljs-keyword">out</span>.printl<span class="hljs-meta">n</span>(<span class="hljs-string">&quot;Hello,world! from java&quot;</span>)<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>语法含义：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">object</span> SingletonObject &#123; <span class="hljs-selector-tag">body</span> &#125;<br>def MethodName(ArgName: ArgType): RetType = &#123; <span class="hljs-selector-tag">body</span> &#125;<br></code></pre></td></tr></table></figure><p><code>object</code>关键字创建的伴生对象，可以理解为替代Java的<code>static</code>关键字的方式，将静态方法用单例对象的实例方法做了替代，做到了更纯粹的面向对象。</p><p>仅仅测试理解语法既可以单文件编写VSCode编译执行也可以用IDEA管理项目，影响不大。</p><p>再用一个等价的类定义来认识和区别一下Scala和Java：</p><p>java:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-title class_">Integer</span> age;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-title class_">String</span> school = <span class="hljs-string">&quot;XDU&quot;</span>;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title class_">Student</span>(<span class="hljs-title class_">String</span> name, <span class="hljs-title class_">Integer</span> age) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = age;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">printInfo</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> + <span class="hljs-string">&quot; &quot;</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> + <span class="hljs-string">&quot; &quot;</span> + <span class="hljs-title class_">Student</span>.<span class="hljs-property">school</span>);<br>    &#125;<br><br>    <span class="hljs-comment">// psvm</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"><span class="hljs-title class_">String</span>[] args</span>) &#123;<br>        <span class="hljs-title class_">Student</span> tch = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">&quot;tch&quot;</span>, <span class="hljs-number">20</span>);<br>        tch.<span class="hljs-title function_">printInfo</span>();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>scala:</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">package</span> VeryStarted<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span>(name: String, age: <span class="hljs-built_in">Int</span>) &#123;<br>  def printInfo(): <span class="hljs-built_in">Unit</span> = &#123;<br>    println(name + <span class="hljs-string">&quot; &quot;</span> + age + <span class="hljs-string">&quot; &quot;</span> + Student.school)<br>  &#125;<br>&#125;<br><br><span class="hljs-comment">// 引入伴生对象，名称一致，同一个文件</span><br><span class="hljs-keyword">object</span> Student &#123;<br>  <span class="hljs-keyword">val</span> school: String = <span class="hljs-string">&quot;XDU&quot;</span><br><br>  def main(args: Array[String]): <span class="hljs-built_in">Unit</span> = &#123;<br>    <span class="hljs-keyword">val</span> tch = new Student(<span class="hljs-string">&quot;tch&quot;</span>, <span class="hljs-number">20</span>)<br>    tch.printInfo()<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>Scala库源码与API文档：</p><ul><li>官网上下载下载Scala源码，解压到Scala安装目录或任意位置。</li><li>IntelliJ IDEA进入反编译的源码后选择右上角附加源码，选择源码的<code>src/</code>目录。</li><li>安装包里面已经有了文档，没有的话可以单独下载。</li><li>Scala依赖Java，某些类型就是Java的包装，库中有一部分java源码。</li></ul><h2 id="变量与数据类型"><a href="#变量与数据类型" class="headerlink" title="变量与数据类型"></a>变量与数据类型</h2><p>注释：</p><ul><li>和java一样</li><li><code>//</code> 单行</li><li><code>/* */</code> 多行</li><li><code>/** */</code> 文档，方法或者类前面，便于<code>scaladoc</code>生成文档。</li></ul><p>变量和常量：</p><figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs delphi"><span class="hljs-keyword">var</span> <span class="hljs-keyword">name</span> [:VariableType] = value <span class="hljs-comment">// variable</span><br>val <span class="hljs-keyword">name</span> [:ConstantType] = value <span class="hljs-comment">// constant</span><br></code></pre></td></tr></table></figure><p>因为Scala的函数式编程要素，所以一个指导意见就是能用常量就不要用变量。</p><ul><li>声明变量时，类型可以省略，编译器会自动推导。</li><li>静态类型，类型经过给定或推导确定后就不能修改。</li><li>变量和常量声明时，必须有初始值。</li><li>变量可变，常量不可变。</li><li>引用类型常量，不能改变常量指向的对象，可以改变对象的字段。</li><li>不以<code>;</code>作为语句结尾，scala编译器自动识别语句结尾。</li></ul><p>标识符命名规范：</p><ul><li>字母下划线开头，后跟字母数字下划线，和C&#x2F;C++&#x2F;Java一样。</li><li>操作符开头，且只包含(+-*&#x2F;#!等)，也是有效的标识符。这样用会用什么奇怪的好处吗？答案是灵活到天顶星的运算符重载。</li><li>用反引号包括的任意字符串，即使是同39个Scala关键字同名也可以。有点奇怪的用法，尚不知道为什么。</li></ul><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">var</span> _abc:String = <span class="hljs-string">&quot;hello&quot;</span><br>val -+/%# = <span class="hljs-number">10</span><br>val <span class="hljs-string">`if`</span> = <span class="hljs-number">10</span><br><span class="hljs-built_in">println</span>(_abc)<br><span class="hljs-built_in">println</span>(-+/%#)<br><span class="hljs-built_in">println</span>(<span class="hljs-string">`if`</span>)<br></code></pre></td></tr></table></figure><p>关键字：</p><ul><li><code>package import class obejct trait extends with type for</code></li><li><code>private protected abstract sealed final implicit lazy override</code></li><li><code>try catch finlly throw</code></li><li><code>if else match case do while for return yield</code></li><li><code>def var val</code></li><li><code>this super</code></li><li><code>new</code></li><li><code>true false null</code></li><li>其中Java没有的关键字：<code>object trait with implicit match yield def val var</code></li></ul><p>字符串：</p><ul><li>类型：<code>String</code></li><li><code>+</code>号连接</li><li><code>*</code>字符串乘法，复制一个字符串多次</li><li><code>printf</code>格式化输出</li><li>字符串插值：<code>s&quot;xxx$&#123;varname&#125;&quot;</code>前缀<code>s</code>模板字符串，前缀<code>f</code>格式化模板字符串，通过<code>$</code>获取变量值，<code>%</code>后跟格式化字符串。</li><li>原始字符串：<code>raw&quot;rawstringcontents$&#123;var&#125;&quot;</code>，不会考虑后跟的格式化字符串。</li><li>多行字符串：<code>&quot;&quot;&quot; &quot;&quot;&quot;</code>。</li><li>输出：<code>print printf println ...</code></li></ul><figure class="highlight pony"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs pony"><span class="hljs-meta">val</span> name: <span class="hljs-type">String</span> = <span class="hljs-string">&quot;Pyrrha&quot;</span> + <span class="hljs-string">&quot; &quot;</span> + <span class="hljs-string">&quot;Nikos&quot;</span><br><span class="hljs-meta">val</span> age = <span class="hljs-number">17</span><br>println((name + <span class="hljs-string">&quot; &quot;</span>) * <span class="hljs-number">3</span>)<br>printf(<span class="hljs-string">&quot;%s : dead in %d\n&quot;</span>, name, age)<br>print(s<span class="hljs-string">&quot;$name : dead in $&#123;age&#125;&quot;</span>)<br><span class="hljs-meta">val</span> power = <span class="hljs-number">98.9072</span><br>println(f<span class="hljs-string">&quot; : power $&#123;power&#125;%.2f.&quot;</span>)<br><br><span class="hljs-keyword">var</span> sql = s<span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    |Select *</span><br><span class="hljs-string">    |from </span><br><span class="hljs-string">    |   Student</span><br><span class="hljs-string">    |Where</span><br><span class="hljs-string">    |   name = $&#123;name&#125;</span><br><span class="hljs-string">    |and</span><br><span class="hljs-string">    |   age &gt;= $&#123;age&#125;</span><br><span class="hljs-string">&quot;&quot;&quot;</span>.stripMargin <span class="hljs-comment">// strip | and whitespaces before |</span><br>println(sql)<br></code></pre></td></tr></table></figure><p>输入：</p><ul><li><code>StdIn.readLine()</code></li><li><code>StdIn.readShort() StdIn.readDouble</code></li><li><code>import scala.io.StdIn</code></li></ul><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">println</span><span class="hljs-params">(<span class="hljs-string">&quot;input name:&quot;</span>)</span></span><br>val name: String = StdIn<span class="hljs-selector-class">.readLine</span>()<br><span class="hljs-function"><span class="hljs-title">println</span><span class="hljs-params">(<span class="hljs-string">&quot;input age:&quot;</span>)</span></span><br>val age:Int = StdIn<span class="hljs-selector-class">.readInt</span>()<br><span class="hljs-function"><span class="hljs-title">println</span><span class="hljs-params">(name + <span class="hljs-string">&quot; : &quot;</span> + age)</span></span><br></code></pre></td></tr></table></figure><p>读写文件：</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">import</span> scala.io.Source<br><span class="hljs-keyword">import</span> java.io.PrintWriter<br><span class="hljs-keyword">import</span> java.io.File<br><span class="hljs-keyword">object</span> FileIO &#123;<br>    def main(args: <span class="hljs-keyword">Array</span>[String]): Unit =&#123;<br>        // <span class="hljs-keyword">read</span> <span class="hljs-keyword">from</span> file<br>        Source.fromFile(&quot;FileIO.txt&quot;).<span class="hljs-keyword">foreach</span>(print)<br><br>        // <span class="hljs-keyword">write</span> <span class="hljs-keyword">to</span> file<br>        // <span class="hljs-keyword">call</span> java API <span class="hljs-keyword">to</span> <span class="hljs-keyword">write</span><br>        val writer = <span class="hljs-built_in">new</span> PrintWriter(<span class="hljs-built_in">new</span> File(&quot;WFile.txt&quot;))<br>        writer.<span class="hljs-keyword">write</span>(&quot;Nephren!&quot;)<br>        writer.<span class="hljs-keyword">close</span>()<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>数据类型：</p><ul><li>java基本类型<code>char byte short int long float double boolean</code>。</li><li>java基本类型对应包装类型：<code>Charater Byte Short Integer Long Float Double Boolean</code>。</li><li>java中不是纯粹的面向对象。</li><li>Scala吸取了这一点，所有数据都是对象，都是<code>Any</code>的子类。</li><li><code>Any</code>有两个子类：<code>AnyVal</code>值类型 <code>AnyRef</code>引用类型。</li><li>数值类型都是<code>AnyVal</code>子类，和Java数值包装类型都一样，只有整数在scala中是<code>Int</code>、字符是<code>Char</code>有点区别。</li><li><code>StringOps</code>是java中<code>String</code>类增强，<code>AnyVal</code>子类。</li><li><code>Unit</code>对应java中的<code>void</code>，<code>AnyVal</code>子类。用于方法返回值的位置，表示方法无返回值，<code>Unit</code>是一个类型，只有一个单例的对象，转成字符串打印出来为<code>()</code>。</li><li><code>Void</code>不是数据类型，只是一个关键字。</li><li><code>Null</code>是一个类型，只有一个单例对象<code>null</code>就是空引用，所有引用类型<code>AnyRef</code>的子类，这个类型主要用途是与其他JVM语言互操作，几乎不在Scala代码中使用。</li><li><code>Nothing</code>所有类型的子类型，也称为底部类型。它常见的用途是发出终止信号，例如抛出异常、程序退出或无限循环。</li></ul><p>整数类型：都是有符号整数，标准补码表示。</p><ul><li><code>Byte</code> 1字节</li><li><code>Short</code> 2字节</li><li><code>Int</code> 4字节</li><li><code>Long</code> 8字节</li><li>整数赋初值超出表示范围报错。</li><li>自动类型推断，整数字面值默认类型<code>Int</code>，长整型字面值必须加<code>L</code>后缀表示。</li><li>直接向下转换会失败，需要使用强制类型转换，<code>(a + 10).toByte</code>。</li></ul><p>浮点类型：</p><ul><li><code>Float</code> IEEE 754 32位浮点数</li><li><code>Double</code> IEEE 754 64位浮点数</li><li>字面值默认<code>Double</code></li></ul><p>字符类型：</p><ul><li>同java的<code>Character</code>，2字节，UTF-16编码的字符。</li><li>字符常量：<code>&#39;&#39;</code></li><li>类型<code>Char</code></li><li>转义：<code>\t \n \r \\ \&quot; \&#39;</code>etc</li></ul><p>布尔类型：<code>true false</code></p><p>空类型：</p><ul><li><code>Unit</code> 无值，只有一个实例，用于函数返回值。</li><li><code>Null</code> 只有一个实例<code>null</code>，空引用。</li><li><code>Nothing</code> 确定没有正常的返回值，可以用Nothing来指定返回值类型。好像意思是抛异常时返回Nothing，不是特别懂。</li></ul><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs arduino">object NullType &#123;<br>    <span class="hljs-function">def <span class="hljs-title">main</span><span class="hljs-params">(arg : Array[<span class="hljs-type">String</span>])</span> : Unit =</span> &#123;<br>        <span class="hljs-comment">// Unit</span><br>        <span class="hljs-function">def <span class="hljs-title">f1</span><span class="hljs-params">()</span>: Unit =</span> &#123;<br>            <span class="hljs-built_in">println</span>(<span class="hljs-string">&quot;just nothing!&quot;</span>)<br>        &#125;<br>        val a = <span class="hljs-built_in">f1</span>()<br>        <span class="hljs-built_in">println</span>(a) <span class="hljs-comment">// ()</span><br><br>        <span class="hljs-comment">// null only used for AnyRef</span><br>        <span class="hljs-comment">// val n:Int = null // invalid</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>数据类型转换：</p><ul><li><p>自动类型提升：多种数据类型混合运算，自动提升到精度最大的数据类型。</p></li><li><p>高精度赋值到低精度，直接报错。</p></li><li><p>除了图中的隐式类型转换，都需要强制类型转换。</p></li><li><p><code>Byte Short Char</code>计算时会直接提升为<code>Int</code>。</p></li><li><p><code>Boolean</code>不能参与整数浮点运算，不能隐式转换为整数。</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgScala_implicit_datatype_cast.jpeg"></p></li></ul><p>强制类型转换：</p><ul><li><code>toByte toInt toChar toXXXX</code></li><li><code>&#39;a&#39;.toInt</code> <code>2.7.toInt</code></li><li>数值与String的转换：<code>&quot;&quot; + n</code> <code>&quot;100&quot;.toInt</code> <code>&quot;12.3&quot;.toFloat</code> <code>12.3&quot;.toDouble.toInt</code></li><li>整数强转是二进制截取，整数高精度转低精度可能会溢出，比如<code>128.toByte</code>。</li></ul><p>Scala标准库：</p><ul><li><code>Int</code> <code>Double</code>这些数据类型对应于Java中的原始数据类型，在底层的运行时不是一个对象，但Scala提供了从这些类型到<code>scala.runtime.RichInt/RichDouble/...</code>的（低优先级）隐式类型转换（在<code>Perdef</code>中定义），从而提供了非原始类型具有的对象操作。</li><li>基本类型都是默认导入的，不需要显式导入，位于包<code>scala</code>中。还有<code>scala.Predef</code>对象也是自动导入。</li><li>其他需要导入的包：<ul><li><code>scala.collection</code>集合。</li><li><code>scala.collection.immutable</code>不可变数据结构，比如数组、列表、范围、哈希表、哈希集合。</li><li><code>scala.collection.mutable</code>可变数据结构，数组缓冲、字符串构建器、哈希表、哈希集合。</li><li><code>scala.collection.concurrent</code>可变并发数据结构，比如字典树。</li></ul></li><li><code>scala.concurrent</code>原始的并发编程。</li><li><code>scala.io</code>输入输出。</li><li><code>scala.math</code>基本数学操作。</li><li><code>scala.sys</code>操作系统交互。</li><li><code>scala.util.matching</code>正则。</li><li>标准库中的其他部分被放在独立的分开的库中。可能需要单独安装，包括：</li><li><code>scala.reflect</code>反射API。</li><li><code>scala.xml</code>xml解析、操作、序列化。</li><li><code>scala.collection.parallel</code>并行集合。</li><li><code>scala.util.parsing</code> parser的组合子，什么东西？</li><li><code>scala.swing</code>java的GUI框架Swing的封装。</li><li>定义了一些别名给常用的类，比如<code>List</code>是<code>scala.collection.immutable.List</code>的别名，也可以理解为默认导入？</li><li>其他别名可能是底层平台JVM提供的，比如<code>String</code>是<code>java.lang.String</code>的别名。</li></ul><h2 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h2><p>运算符：</p><ul><li>和Java基本相同。</li><li>算术运算：<code>+ - * / %</code> ，<code>+</code>可以用于一元正号，二元加号，还可以用作字符串加法，取模也可用于浮点数。没有自增和自减语法<code>++ --</code>。</li><li>关系运算：<code>== != &lt; &gt; &lt;= &gt;=</code></li><li>逻辑运算：<code>&amp;&amp; || !</code>， <code>&amp;&amp; ||</code>所有语言都支持短路求值，scala也不例外。</li><li>赋值运算：<code>= += -= *= /= %=</code></li><li>按位运算：<code>&amp; | ^ ~</code></li><li>移位运算：<code>&lt;&lt; &gt;&gt; &gt;&gt;&gt;</code>，其中<code>&lt;&lt; &gt;&gt;</code>是有符号左移和右移，<code>&gt;&gt;&gt;</code>无符号右移。</li><li>scala中所有运算符本质都是对象的方法调用，拥有比C++更灵活的运算符重载。</li></ul><p>自定义运算符：</p><ul><li>Scala中运算符即是方法，任何具有单个参数的方法都可以用作<strong>中缀运算符</strong>，写作中缀表达式的写法。<code>10.+(1)</code>即是<code>10 + 1</code>。</li><li>定义时将合法的运算符（只有特殊符号构成的标识符）作为函数名称即可定义。</li></ul><p>运算符优先级：</p><ul><li>当一个表达式使用多个运算符时，将<strong>根据运算符的第一个字符来评估优先级</strong>。内置的运算符和自定义运算符都是函数，遵守同样的规则。</li></ul><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">(characters not shown below)<br><span class="hljs-bullet">* </span>/ %<br>+ -<br>:<br><span class="hljs-section">= !</span><br>&lt; &gt;<br>&amp;<br>^<br>|<br>(all letters, $, _)<br></code></pre></td></tr></table></figure><ul><li>比如下面两个表示等价：</li></ul><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs coq">a + b ^? c ?^ d less a ==&gt; b | <span class="hljs-type">c</span><br>((a + b) ^? (c ?^ d)) less ((a ==&gt; b) | <span class="hljs-type">c</span>)<br></code></pre></td></tr></table></figure><p>上面都是粗浅的理解，以下引用自<a href="https://www.scala-lang.org/files/archive/spec/2.13/06-expressions.html#prefix-infix-and-postfix-operations">Scala2.13标准 - 06表达式 - 12前缀中缀和后缀操作</a>一节：</p><p>词法：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">PostfixExpr     ::=  InfixExpr [<span class="hljs-built_in">id</span> [<span class="hljs-built_in">nl</span>]]<br>InfixExpr       ::=  PrefixExpr<br>                  |  InfixExpr <span class="hljs-built_in">id</span> [<span class="hljs-built_in">nl</span>] InfixExpr<br>PrefixExpr      ::=  [<span class="hljs-string">&#x27;-&#x27;</span> | <span class="hljs-string">&#x27;+&#x27;</span> | <span class="hljs-string">&#x27;!&#x27;</span> | <span class="hljs-string">&#x27;~&#x27;</span>] SimpleExpr<br></code></pre></td></tr></table></figure><ul><li>可以看到前缀运算符只有<code>- + ! ~</code>含义是正负号、逻辑非、按位取反。</li><li>表达式是通过运算符和操作数构建的。</li></ul><p>前缀运算：</p><ul><li>仅有<code>+ - ! ~</code>，等价于后缀的方法调用<code>.+() .-() .!() .~()</code></li><li>前缀运算符的操作数是<strong>原子</strong>的，比如<code>-sin(x)</code>被解析为<code>-(sin(x))</code>。这不同于一般的函数，如果定义一个相同含义的<code>negate</code>函数，那么<code>negate sin(x)</code>会被解析为<code>sin</code>是操作符，而<code>negate</code>和<code>(x)</code>是它的操作数。</li></ul><p>后缀运算：</p><ul><li>后缀的运算符可以是任意的标识符，所有的<code>e op</code>被解释为<code>e.op</code>。原来还可以这样！</li></ul><p>中缀运算：</p><ul><li>一个中缀运算符可以是任意的标识符，中缀运算符</li><li>中缀运算符的优先级定义如下：递增顺序，优先级由运算符首字符确定，同一行拥有同等优先级。</li></ul><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">(all letters, as defined in [chapter 1], including <span class="hljs-code">`_`</span> and <span class="hljs-code">`$`</span>)<br>|<br>^<br>&amp;<br><span class="hljs-section">= !</span><br>&lt; &gt;<br>:<br>+ -<br><span class="hljs-bullet">* </span>/ %<br>(other operator characters, as defined in [chapter 1], including Unicode categories <span class="hljs-code">`Sm`</span> and <span class="hljs-code">`So`</span>)<br></code></pre></td></tr></table></figure><ul><li>运算符的结合性由运算符的尾字符确定，以<code>:</code>结尾的字符为右结合，其他的都是左结合。后面的集合操作运算符中有例子。</li><li>优先级和结合性决定了一个表达式的语义，也即是它的组合方式。具体规则：<ul><li>多个中缀运算符同时出现，优先级更高的更显绑定到操作数。</li><li>如果有多个连续的同一优先级的中缀运算符（同一优先级结合性必定相同），那么按照结合性绑定，左结合从左往右，右结合从右往左。</li><li>后缀运算符总是比中缀运算符优先级更低。比如<code>e1 op1 e2 op2</code>总是解释为<code>(e1 op1 e2) op2</code>。</li></ul></li><li>中缀的左结合的运算符可能包含多个参数，<code>e op (e1, e2, ..., en)</code>总是被解释为<code>e.op(e1, e2, ..., en)</code>。</li><li>对于中缀表达式<code>e1 op e2</code>，如果<code>op</code>左结合那么被解释为<code>e1.op(e2)</code>，如果右结合并且是它的参数是传名参数那么被解释为<code>e2.op(e1)</code>，如果参数是值传递，那么解释为<code>&#123;val x = e2; e2.op(x)&#125;</code>，其中x是一个新名称。后面的集合操作有例子。</li><li>前面所说的前缀运算、后缀运算、中缀运算对应的运算符分别是一元前置运算符、一元后置运算符、二元后置运算符，不存在其他类型，比如三元的条件运算符。</li></ul><p>赋值运算符：</p><ul><li>赋值运算符是指以<code>=</code>结尾的运算符。除了同样以<code>=</code>开始，和<code>&gt;= &lt;= !=</code>之外。</li><li>赋值运算符在当其他的解释都非法时会有特殊对待。</li><li>比如说<code>l += r</code>，如果没有显式定义的<code>+=</code>运算符，那么会被解释为<code>l = l + r</code>。</li><li>这种重新解释发生在满足以下两个条件的情况下：<ul><li><code>l</code>没有<code>+=</code>运算符。</li><li><code>l = l + r</code>是类型正确的，通常情况下这意味着<code>l</code>是一个左值，并且<code>l + r</code>是合法的（定义了<code>+</code>或者可隐式转换为定义了<code>+</code>的类型）。</li></ul></li></ul><p>试验与总结：</p><ul><li>内置前缀运算符有<code>+ - ! ~</code>对少量内置类型提供支持，自定义一元前缀请使用<code>unary_</code>加上要定义的运算符名称，并且不要加参数列表<code>()</code>。而且这东西真的可以加参数列表，但我并没有找到用运算符形式调用的方式。</li><li>自定义一元后置运算符（即定义为空参数列表）需要引入<code>scala.language.postfixOps</code>才能使用后缀运算符形式调用。当然用函数调用形式调用总是没有语法问题的。同样去掉参数列表后就可以后置使用。</li><li>二元后置运算符，是最常用的自定义运算符。优先级上面有，结合性以是否<code>:</code>结尾确定。需要特别注意的是右结合和比如C++中重载赋值运算符是有区别的，需要了解。</li><li>Scala中内置的赋值运算符返回空<code>()</code>，所以其实是不能连续赋值的，赋值类运算符算是被特殊对待了。并且因为推崇函数式编程风格，能定义为<code>val</code>则定义为<code>val</code>也就不能连续赋值。因为变量都是引用变量，定义<code>=</code>变成了没有道理也不可能的一件事情，所以实践中也只能一条语句只做一次赋值。</li><li>Scala不能定义<code>=</code>运算符，但可以定义复合赋值，并且做了处理，某些情况下只要类设计得好定义了运算类运算符就不需要多去定义复合赋值了。所以说如果真要定义复合赋值返回值也应该返回<code>()</code>吗？也许是的。</li><li>多参数的方法其实也可以写成中缀形式，<code>e op (e1, e2, ..., en)</code>。</li><li>对于类方法来说，<strong>运算符是函数，函数也是运算符</strong>。</li></ul><p>例子：可窥见其灵活程度。</p><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><code class="hljs processing"><span class="hljs-keyword">import</span> scala.<span class="hljs-property">language</span>.<span class="hljs-property">postfixOps</span><br>object UserDefindOps &#123;<br>    def <span class="hljs-title function_">main</span>(args: <span class="hljs-built_in">Array</span>[<span class="hljs-built_in">String</span>]): Unit = &#123;<br>        val v = <span class="hljs-title function_">Vector2</span>(<span class="hljs-number">10</span>, <span class="hljs-number">5</span>)<br>        val v2 = <span class="hljs-title function_">Vector2</span>(<span class="hljs-number">5</span>, <span class="hljs-number">10</span>)<br><br>        <span class="hljs-built_in">println</span>(v)<br>        <span class="hljs-comment">// prefix unary</span><br>        <span class="hljs-built_in">println</span>(<span class="hljs-string">&quot;==========================================&quot;</span>)<br>        <span class="hljs-built_in">println</span>(+v)<br>        <span class="hljs-built_in">println</span>(-v)<br>        <span class="hljs-built_in">println</span>(v.<span class="hljs-property">unary_</span>-(<span class="hljs-string">&quot;hello&quot;</span>))<br><br>        <span class="hljs-comment">// binary</span><br>        <span class="hljs-built_in">println</span>(<span class="hljs-string">&quot;==========================================&quot;</span>)<br>        <span class="hljs-built_in">println</span>(v * <span class="hljs-number">3</span>)<br>        <span class="hljs-built_in">println</span>(v * v2)<br>        <span class="hljs-built_in">println</span>(v + v2)<br>        <span class="hljs-built_in">println</span>(v - v2)<br>        <br>        <span class="hljs-comment">// postfix unary, just for test, no meaning</span><br>        <span class="hljs-built_in">println</span>(<span class="hljs-string">&quot;==========================================&quot;</span>)<br>        <span class="hljs-built_in">println</span>(v-)<br>        <span class="hljs-built_in">println</span>((v-)-)<br><br>        <span class="hljs-comment">// multiple</span><br>        <span class="hljs-built_in">println</span>(<span class="hljs-string">&quot;==========================================&quot;</span>)<br>        <span class="hljs-built_in">println</span>(v <span class="hljs-title function_">hello</span> (<span class="hljs-string">&quot;test&quot;</span>, <span class="hljs-string">&quot;yes&quot;</span>))<br>        <span class="hljs-built_in">println</span>(v + (<span class="hljs-number">10</span>, <span class="hljs-number">10</span>))<br>        <span class="hljs-built_in">println</span>(v - (<span class="hljs-number">10</span>, <span class="hljs-number">10</span>))<br><br>        <span class="hljs-comment">// assignment operator</span><br>        <span class="hljs-built_in">println</span>(<span class="hljs-string">&quot;==========================================&quot;</span>)<br>        var v3 = <span class="hljs-title function_">Vector2</span>(<span class="hljs-number">10</span>, <span class="hljs-number">5</span>)<br>        <span class="hljs-built_in">println</span>(v3 *= <span class="hljs-number">3</span>) <span class="hljs-comment">// ()</span><br>        <span class="hljs-built_in">println</span>(v3) <span class="hljs-comment">// Vector2(30.0, 15.0)</span><br>        v3 /= <span class="hljs-number">3</span><br>        <span class="hljs-built_in">println</span>(v3)<br>        v3 += v2<br>        <span class="hljs-built_in">println</span>(v3)<br>        v3 += (<span class="hljs-number">10</span>, <span class="hljs-number">10</span>)<br>        <span class="hljs-built_in">println</span>(v3)<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Vector2</span>(val x: Double, val y: Double) &#123;<br>    override def <span class="hljs-title function_">toString</span>(): <span class="hljs-built_in">String</span> = s<span class="hljs-string">&quot;Vector2($x, $y)&quot;</span><br>    <span class="hljs-comment">// prefix unary</span><br>    def unary_- = <span class="hljs-variable">this</span>.- <span class="hljs-comment">// call postfix -</span><br>    def unary_+ = <span class="hljs-title function_">Vector2</span>(x, y)<br>    def unary_-(<span class="hljs-built_in">str</span>: <span class="hljs-built_in">String</span>) = s<span class="hljs-string">&quot;unary - with a string parameter: $str&quot;</span> <span class="hljs-comment">// can not call this through operator format</span><br>    <span class="hljs-comment">// binary</span><br>    def +(v: Vector2) = <span class="hljs-title function_">Vector2</span>(x + v.<span class="hljs-property">x</span>, y + v.<span class="hljs-property">y</span>)<br>    def -(v: Vector2) = <span class="hljs-title function_">Vector2</span>(x - v.<span class="hljs-property">x</span>, y - v.<span class="hljs-property">y</span>)<br>    def *(v: Vector2) = x * v.<span class="hljs-property">x</span> + y * v.<span class="hljs-property">y</span> <span class="hljs-comment">// Inner product </span><br>    def *(d: Double) = <span class="hljs-title function_">Vector2</span>(d * x, d * y) <span class="hljs-comment">// multiply</span><br>    def /(d: Double) = <span class="hljs-title function_">Vector2</span>(x / d, y / d)<br>    <span class="hljs-comment">// postfix unary</span><br>    def - = <span class="hljs-title function_">Vector2</span>(-x, -y)<br>    <span class="hljs-comment">// multiple</span><br>    def <span class="hljs-title function_">hello</span>(a: <span class="hljs-built_in">String</span>, b: <span class="hljs-built_in">String</span>) = s<span class="hljs-string">&quot;$a, $b, $&#123;toString()&#125;&quot;</span><br>    def +(_x: Double, _y: Double): Vector2 = <span class="hljs-variable">this</span> + <span class="hljs-title function_">Vector2</span>(_x, _y)<br>    def -(_x: Double, _y: Double): Vector2 = <span class="hljs-title function_">Vector2</span>(x - _x, y - _y)<br>&#125;<br><br>object Vector2 &#123;<br>    def <span class="hljs-title function_">apply</span>(x: Double, y: Double) = <span class="hljs-keyword">new </span><span class="hljs-class title_">Vector2</span>(x, y)<br>&#125;<br></code></pre></td></tr></table></figure><p>实践指南：</p><ul><li>一元前缀和一元后缀运算符定义时不加参数列表，运算符形式使用。</li><li>在复杂表达式中使用一元前缀和后缀运算符使用时最好加括号表明优先级，不然在复杂表达式中编译器可能难以区分这是一元的还是二元的。至少定义了一元前置和后置<code>-</code>的类中无法像<code>a - -</code>和<code>- - a</code>这样来用。</li><li>二元运算符定义只给一个参数，运算符形式使用。</li><li>参数多于1个时不要通过运算符形式使用，但如果很清晰的话其实也无妨。</li><li>函数也是运算符，非特殊符号运算符形式使用也可以很有用，表达能力很强，比如<code>1 to 10</code>。</li><li>不要滥用，用到都搞不清谁是运算符谁是操作数就不好了。</li><li>经验尚浅，还需多实践。</li></ul><h2 id="控制流"><a href="#控制流" class="headerlink" title="控制流"></a>控制流</h2><p><code>if-else</code>：</p><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs mel"><span class="hljs-keyword">if</span> (<span class="hljs-keyword">condition</span>) &#123;<br>    xxx<br>&#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">condition</span>) &#123;<br>    xxx<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>    xxx<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>scala中特殊一点，<code>if-else</code>语句也有返回值，也就是说也可以作为表达式，定义为执行的最后一个语句的返回值。</li><li>可以强制要求返回<code>Unit</code>类型，此时忽略最后一个表达式的值，得到<code>()</code>。</li><li>多种返回类型的话，赋值的目标变量类型需要指定为具体公共父类，也可以自动推断。</li><li>scala中没有三元条件运算符，可以用<code>if (a) b else c</code> 替代<code>a ? b : c</code>。</li><li>嵌套条件同理。</li></ul><p><code>for</code>循环，也叫<code>for</code>推导式：</p><ul><li><p>范围遍历：<code>for(i &lt;- 1 to 10) &#123;&#125;</code>，其中<code>1 to 10</code>是<code>Int</code>一个方法调用，返回一个<code>Range</code>。</p></li><li><p>范围<code>1 to 10</code> <code>1 until 10</code>是包含右边界和不包含右边界的范围，也可以直接用<code>Range</code>类。</p></li><li><p>范围步长<code>1 to 10 by 2</code>。</p></li><li><p>范围也是一个集合，也可以遍历普通集合：<code>for(i &lt;- collection) &#123;&#125;</code></p></li><li><p>循环守卫：即循环保护式，或者叫条件判断式，循环守卫为<code>true</code></p><p>则进入循环体内部，为<code>fasle</code></p><p>则跳过，类似于<code>continue</code></p><ul><li>写法：</li></ul><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">for</span><span class="hljs-params">(i &lt;- collection if condition)</span></span> &#123;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>等价于：</li></ul><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs erlang"><span class="hljs-function"><span class="hljs-title">if</span> <span class="hljs-params">(i &lt;- collection)</span> &#123;</span><br><span class="hljs-function">    <span class="hljs-title">if</span> <span class="hljs-params">(condition)</span> &#123;</span><br><span class="hljs-function">    &#125;</span><br><span class="hljs-function">&#125;</span><br></code></pre></td></tr></table></figure></li><li><p>嵌套循环同理。嵌套循环可以将条件合并到一个for中：</p><ul><li>标准写法：</li></ul><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs erlang"><span class="hljs-function"><span class="hljs-title">for</span> <span class="hljs-params">(i &lt;- <span class="hljs-number">1</span> to <span class="hljs-number">4</span>)</span> &#123;</span><br><span class="hljs-function">        <span class="hljs-title">for</span> <span class="hljs-params">(j &lt;- <span class="hljs-number">1</span> to <span class="hljs-number">5</span>)</span> &#123;</span><br><span class="hljs-function">            <span class="hljs-title">println</span><span class="hljs-params">(<span class="hljs-string">&quot;i = &quot;</span> + i + <span class="hljs-string">&quot;, j = &quot;</span> + j)</span></span><br><span class="hljs-function">        &#125;</span><br><span class="hljs-function">    &#125;</span><br></code></pre></td></tr></table></figure><ul><li>等价写法：</li></ul><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs applescript"><span class="hljs-keyword">for</span> (i &lt;- <span class="hljs-number">1</span> <span class="hljs-keyword">to</span> <span class="hljs-number">4</span>; j &lt;- <span class="hljs-number">1</span> <span class="hljs-keyword">to</span> <span class="hljs-number">5</span>) &#123;<br>        println(<span class="hljs-string">&quot;i = &quot;</span> + i + <span class="hljs-string">&quot;, j = &quot;</span> + j)<br>    &#125;<br></code></pre></td></tr></table></figure><ul><li>典型例子，乘法表：</li></ul><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-keyword">for</span> (i &lt;- 1 <span class="hljs-keyword">to</span> 9; j &lt;- 1 <span class="hljs-keyword">to</span> i) &#123;<br>    <span class="hljs-built_in">print</span>(s<span class="hljs-string">&quot;<span class="hljs-variable">$j</span> * <span class="hljs-variable">$i</span> = <span class="hljs-variable">$&#123;i * j&#125;</span> \t&quot;</span>)<br>    <span class="hljs-keyword">if</span> (j == i) println()<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>循环中的引入变量，但不是循环变量：</p><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs erlang"><span class="hljs-function"><span class="hljs-title">for</span> <span class="hljs-params">(i &lt;- <span class="hljs-number">1</span> to <span class="hljs-number">10</span>; j = <span class="hljs-number">10</span> - i)</span> &#123;</span><br><span class="hljs-function">    <span class="hljs-title">println</span><span class="hljs-params">(<span class="hljs-string">&quot;i = &quot;</span> + i + <span class="hljs-string">&quot;, j = &quot;</span> + j)</span></span><br><span class="hljs-function">&#125;</span><br></code></pre></td></tr></table></figure></li><li><p>循环条件也可以用<code>&#123;&#125;</code></p><ul><li>上面的引入变量循环等价于：</li></ul><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-keyword">for</span> &#123;<br>    <span class="hljs-selector-tag">i</span> &lt;- <span class="hljs-number">1</span> to <span class="hljs-number">10</span><br>    j = <span class="hljs-number">10</span> - <span class="hljs-selector-tag">i</span><br>&#125; &#123;<br>    <span class="hljs-built_in">println</span>(<span class="hljs-string">&quot;i = &quot;</span> + <span class="hljs-selector-tag">i</span> + <span class="hljs-string">&quot;, j = &quot;</span> + j)<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>循环同样有返回值，返回值都是空，也就是<code>Unit</code>实例<code>()</code>。</p></li><li><p>循环中同样可以用<code>yield</code></p><p>返回，外面可以接住用来操作，循环暂停，执行完后再继续循环。就像Ruby&#x2F;Python。</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">val</span> v = for (i &lt;- <span class="hljs-number">1</span> to <span class="hljs-number">10</span>) yield i * i // default implementation is Vector, Vector(<span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">9</span>, <span class="hljs-number">16</span>, <span class="hljs-number">25</span>, <span class="hljs-number">36</span>, <span class="hljs-number">49</span>, <span class="hljs-number">64</span>, <span class="hljs-number">81</span>, <span class="hljs-number">100</span>)<br></code></pre></td></tr></table></figure></li></ul><p><code>while</code>和<code>do while</code>：</p><ul><li>为了兼容java，不推荐使用，结果类型是<code>Unit</code>。</li><li>不可避免需要声明变量在循环外部，等同于循环内部对外部变量造成了影响，所以不推荐使用。</li></ul><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mel"><span class="hljs-keyword">while</span> (<span class="hljs-keyword">condition</span>) &#123;<br>&#125;<br><span class="hljs-keyword">do</span> &#123;<br>&#125; <span class="hljs-keyword">while</span> (<span class="hljs-keyword">condition</span>)<br></code></pre></td></tr></table></figure><p>循环中断：</p><ul><li><p>Scala内置控制结构去掉了<code>break continue</code>关键字，为了更好适应函数式编程，推荐使用函数式风格解决。</p></li><li><p>使用<code>breakable</code>结构来实现<code>break continue</code>功能。</p></li><li><p>循环守卫可以一定程度上替代<code>continue</code>。</p></li><li><p>可以用抛出异常捕获的方式退出循环，替代break</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-keyword">for</span> (i &lt;- <span class="hljs-number">0</span> to <span class="hljs-number">10</span>) &#123;<br>        <span class="hljs-keyword">if</span> (i == <span class="hljs-number">3</span>)<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">RuntimeException</span><br>        <span class="hljs-title function_ invoke__">println</span>(i)<br>    &#125;<br>&#125; <span class="hljs-keyword">catch</span> &#123;<br>    <span class="hljs-keyword">case</span> e: <span class="hljs-built_in">Exception</span> =&gt; <span class="hljs-comment">// do nothing</span><br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>可以使用Scala中的<code>Breaks</code>类中的<code>break</code></p><p>方法（只是封装了异常捕获），实现异常抛出和捕获。</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs stylus">import scala<span class="hljs-selector-class">.util</span><span class="hljs-selector-class">.control</span><span class="hljs-selector-class">.Breaks</span><br>Breaks<span class="hljs-selector-class">.breakable</span>(<br>    <span class="hljs-keyword">for</span> (<span class="hljs-selector-tag">i</span> &lt;- <span class="hljs-number">0</span> to <span class="hljs-number">10</span>) &#123;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-selector-tag">i</span> == <span class="hljs-number">3</span>)<br>            Breaks<span class="hljs-selector-class">.break</span>()<br>        <span class="hljs-built_in">println</span>(i)<br>    &#125;<br>)<br></code></pre></td></tr></table></figure></li></ul><h2 id="函数式编程"><a href="#函数式编程" class="headerlink" title="函数式编程"></a>函数式编程</h2><p>不同范式对比：</p><ul><li>面向过程：按照步骤解决问题。</li><li>面向对象：分解对象、行为、属性，通过对象关系以及行为调用解决问题。耦合低，复用性高，可维护性强。</li><li>函数式编程：面向对象和面向过程都是命令式编程，但是函数式编程不关心具体运行过程，而是关心数据之间的映射。纯粹的函数式编程语言中没有变量，所有量都是常量，计算过程就是不停的表达式求值的过程，每一段程序都有返回值。不关心底层实现，对人来说更好理解，相对地编译器处理就比较复杂。</li><li>函数式编程优点：编程效率高，函数式编程的不可变性，对于函数特定输入输出是特定的，与环境上下文等无关。函数式编程无副作用，利于并行处理，所以Scala特别利于应用于大数据处理，比如Spark，Kafka框架。</li></ul><p>函数定义：</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-function">def <span class="hljs-title">func</span><span class="hljs-params">(arg1: TypeOfArg1, arg2: ...)</span>: RetType =</span> &#123;<br>    ...<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>函数式编程语言中，函数是一等公民（可以像对象一样赋值、作为参数返回值），可以在任何代码块中定义函数。</li><li>一般将定义在类或对象中（最外层）的函数称为方法，而定义在方法中（内层）的称为函数。广义上都是函数。</li><li>返回值用<code>return</code>返回，不写的话会使用最后一行代码作为返回值。</li><li>无返回值<code>Unit</code>时可以用<code>return</code>可以用<code>return ()</code>可以不返回。</li><li>其他时候只需要返回值是返回值类型的子类对象就行。</li></ul><p>术语说明：</p><ul><li>java中不提函数的说法，而是说类或者实例方法，不涉及一般化的函数。</li><li>函数式编程中的函数二字来源于数学上的函数，也就是映射，集合和集合之间的关系，强调数据之间的映射关系。</li><li>而编程语言中的函数，也包括scala中的函数定义都是指的一个完成特定功能的子程序（subroutine），并不等同于数学意义上的函数。</li></ul><p>函数参数：</p><ul><li><p>可变参数，类似于Java，使用数组包装。</p><ul><li><code>def f4(str:String*): Unit = &#123;&#125;</code>。</li><li>如果除了可变参数还有其他参数，需要将可变参数放在末尾。</li><li>可变参数当做数组来使用。</li></ul></li><li><p>参数默认值:</p><ul><li><code>def f5(name: String = &quot;alice&quot;): Unit = &#123;&#125;</code></li><li>和C++一样，默认参数可以不传，默认参数必须全部放在末尾。</li></ul></li><li><p>带名称传参：</p><ul><li>调用时带名称。</li></ul><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs nix">def f6(<span class="hljs-params">name:</span> String, <span class="hljs-params">age:</span> Int <span class="hljs-operator">=</span> <span class="hljs-number">20</span>, <span class="hljs-params">loc:</span> String <span class="hljs-operator">=</span> <span class="hljs-string">&quot;BeiJing&quot;</span>): Unit <span class="hljs-operator">=</span> &#123;<br>    println(s<span class="hljs-string">&quot;name <span class="hljs-subst">$&#123;name&#125;</span>, age <span class="hljs-subst">$&#123;age&#125;</span>, location <span class="hljs-subst">$&#123;loc&#125;</span>&quot;</span>)<br>&#125;<br>f6(<span class="hljs-string">&quot;Bob&quot;</span>)<br>f6(<span class="hljs-string">&quot;Alice&quot;</span>, loc <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Xi&#x27;An&quot;</span>)<br>f6(<span class="hljs-string">&quot;Michael&quot;</span>, <span class="hljs-number">30</span>)<br></code></pre></td></tr></table></figure><ul><li>不给名称的就是按顺序赋值。</li><li>调用时带名参数必须位于实参列表末尾。</li><li>和默认参数一起使用会很方便，比如有多个默认参数，但只想覆盖其中一个。</li></ul></li></ul><p>函数至简原则：</p><ul><li><p>能省则省。</p></li><li><p>最后一行代码会作为返回值，可以省略<code>return</code>。</p></li><li><p>函数体只有一行代码的话，可以省略花括号。</p></li><li><p>如果返回值类型能够自动推断那么可以省略。</p></li><li><p>如果函数体中用<code>return</code>做返回，那么返回值类型必须指定。</p></li><li><p>如果声明返回<code>Unit</code>，那么函数体中使用<code>return</code>返回的值也不起作用。</p></li><li><p>如果期望是无返回值类型，那么可以省略<code>=</code>。这时候没有返回值，函数也可以叫做过程。【2.13.0已废弃，能编过不过会提示。】</p></li><li><p>无参函数如果声明时没有加<code>()</code>，调用时可以省略<code>()</code>。【如果声明时有<code>()</code>调用也可以省略，不过2.13.3废弃了。】</p></li><li><p>不关心函数名称时，函数名称和def也可以省略，去掉返回值类型，将&#x3D;修改为&#x3D;&gt;定义为匿名函数。</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">val</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> = <span class="hljs-params">(name: <span class="hljs-type">String</span>)</span></span> =&gt; &#123; println(<span class="hljs-string">&quot;name&quot;</span>) &#125;<br></code></pre></td></tr></table></figure></li></ul><p>匿名函数：</p><ul><li><p>没有名称的函数，可以被赋值给一个量。也叫lambda表达式</p></li><li><p><code>val fun = (name: String) =&gt; &#123; println(&quot;name&quot;) &#125;</code></p></li><li><p>匿名函数定义时不能有函数的返回值类型。</p></li><li><p>简化原则：</p><ul><li>参数的类型可以省略，如果可以根据高阶函数形参自动推导。</li><li>类型省略之后如果只有一个参数，那么可以省略参数列表的<code>()</code>，<code>name =&gt; println(name)</code>。</li><li>匿名函数函数体只要一行，那么<code>&#123;&#125;</code>可以省略。</li><li>如果参数只出现一次，则参数可以省略，后面出现的参数用<code>_</code>代替，<code>println(_)</code>也是一个lambda，表示<code>name =&gt; &#123;println(name)&#125;</code>。</li><li>如果可以推断出当前传入的<code>println</code>是一个函数体，而不是函数调用语句，那么可以省略下划线。也就是省略了转调，直接将函数名称作为参数传递。</li></ul><figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs isbl"><span class="hljs-variable">def</span> <span class="hljs-function"><span class="hljs-title">f</span>(<span class="hljs-variable">func</span>: <span class="hljs-variable">String</span> =&gt; <span class="hljs-variable">Unit</span>): <span class="hljs-variable">Unit</span> = &#123;</span><br><span class="hljs-function">    <span class="hljs-title">func</span>(<span class="hljs-string">&quot;alice&quot;</span>)</span><br>&#125;<br><span class="hljs-function"><span class="hljs-title">f</span>((<span class="hljs-variable">name</span>: <span class="hljs-variable">String</span>) =&gt; &#123; <span class="hljs-title">println</span>(<span class="hljs-variable">name</span>) &#125;)</span><br><span class="hljs-function"><span class="hljs-title">f</span>((<span class="hljs-variable">name</span>) =&gt; <span class="hljs-title">println</span>(<span class="hljs-variable">name</span>))</span><br><span class="hljs-function"><span class="hljs-title">f</span>(<span class="hljs-title">println</span>(<span class="hljs-variable">_</span>))</span><br><span class="hljs-function"><span class="hljs-title">f</span>(<span class="hljs-variable">println</span>)</span><br></code></pre></td></tr></table></figure></li><li><p>例子：省得太极端就没有可读性了。</p></li></ul><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-keyword">def</span> dualOp(func: (<span class="hljs-keyword">Int</span>, <span class="hljs-keyword">Int</span>) =&gt; <span class="hljs-keyword">Int</span>): <span class="hljs-keyword">Int</span> = &#123;<br>    func(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)<br>&#125;<br><span class="hljs-keyword">println</span>(dualOp((a: <span class="hljs-keyword">Int</span>, b: <span class="hljs-keyword">Int</span>) =&gt; a + b))<br><span class="hljs-keyword">println</span>(dualOp((a: <span class="hljs-keyword">Int</span>, b: <span class="hljs-keyword">Int</span>) =&gt; a - b))<br><span class="hljs-keyword">println</span>(dualOp((a, b) =&gt; a - b))<br><span class="hljs-keyword">println</span>(dualOp(_ + _)) <span class="hljs-comment">// a + b</span><br><span class="hljs-keyword">println</span>(dualOp(-_ + _)) <span class="hljs-comment">// -a + b</span><br></code></pre></td></tr></table></figure><p>高阶函数：</p><ul><li>三种形式：函数作为值传递、函数作为参数、函数作为返回值。</li><li>作为值传递：经过赋值之后在底层变成一个lambda对象。</li></ul><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-comment">// define function</span><br><span class="hljs-keyword">def</span> foo(n: <span class="hljs-keyword">Int</span>): <span class="hljs-keyword">Int</span> = &#123;<br>    <span class="hljs-keyword">println</span>(<span class="hljs-string">&quot;call foo&quot;</span>)<br>    n + <span class="hljs-number">1</span><br>&#125;<br><span class="hljs-comment">// function assign to value, also a object</span><br>val func = foo _ <span class="hljs-comment">// represent the function foo, not function call</span><br>val func1: <span class="hljs-keyword">Int</span> =&gt; <span class="hljs-keyword">Int</span> = foo <span class="hljs-comment">// specify the type of func1</span><br><span class="hljs-keyword">println</span>(func) <span class="hljs-comment">// Main$$$Lambda$674/0x000000080103c588@770beef5</span><br><span class="hljs-keyword">println</span>(func == func1) <span class="hljs-comment">// false, not a same object</span><br></code></pre></td></tr></table></figure><ul><li>函数作为参数，上面展示过了。可以传匿名函数、函数名称、lambda对象。</li></ul><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">// <span class="hljs-keyword">function</span> <span class="hljs-keyword">as</span> arguments<br>def dualEval(op: (<span class="hljs-type">Int</span>, <span class="hljs-type">Int</span>) =&gt; <span class="hljs-type">Int</span>, a: <span class="hljs-type">Int</span>, b: <span class="hljs-type">Int</span>) = &#123;<br>    op(a, b)<br>&#125;<br>def <span class="hljs-keyword">add</span>(a: <span class="hljs-type">Int</span>, b: <span class="hljs-type">Int</span>): <span class="hljs-type">Int</span> = a + b<br>println(dualEval(<span class="hljs-keyword">add</span>, <span class="hljs-number">10</span>, <span class="hljs-number">100</span>))<br>val mul:(<span class="hljs-type">Int</span>, <span class="hljs-type">Int</span>) =&gt; <span class="hljs-type">Int</span> = _ * _<br>println(dualEval(mul, <span class="hljs-number">10</span>, <span class="hljs-number">100</span>))<br>println(dualEval((a, b) =&gt; a + b, <span class="hljs-number">1000</span>, <span class="hljs-number">24</span>))<br></code></pre></td></tr></table></figure><ul><li>函数作为返回值：</li></ul><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs ada">// <span class="hljs-keyword">function</span> <span class="hljs-title">as</span> <span class="hljs-keyword">return</span> <span class="hljs-type">value</span><br>def outerFunc(): Int =&gt; Unit = &#123;<br>    def inner(a: Int): Unit = &#123;<br>        println(s<span class="hljs-string">&quot;call inner with argument $&#123;a&#125;&quot;</span>)<br>    &#125;<br>    inner // <span class="hljs-keyword">return</span> a <span class="hljs-keyword">function</span><br><span class="hljs-title">&#125;</span><br>println(outerFunc()(10)) // inner <span class="hljs-keyword">return</span> <span class="hljs-type">()</span><br></code></pre></td></tr></table></figure><ul><li>现在就可以套娃了，比如定义一个返回一个返回函数的函数的函数。</li></ul><p>高阶函数举例：</p><ul><li>使用特定操作处理数组元素，得到新数组。也就是集合处理的map（映射）操作。</li></ul><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">// deal <span class="hljs-keyword">with</span> an <span class="hljs-keyword">array</span>, <span class="hljs-keyword">get</span> a <span class="hljs-built_in">new</span> <span class="hljs-keyword">array</span><br>// map operation <span class="hljs-keyword">of</span> <span class="hljs-keyword">array</span><br>def arrayOp(arr: <span class="hljs-keyword">Array</span>[<span class="hljs-type">Int</span>], op: <span class="hljs-type">Int</span> =&gt; <span class="hljs-type">Int</span>): <span class="hljs-keyword">Array</span>[<span class="hljs-type">Int</span>] = &#123;<br>    <span class="hljs-keyword">for</span> (elem &lt;- arr) yield op(elem) // the whole <span class="hljs-keyword">for</span> expression <span class="hljs-keyword">get</span> a <span class="hljs-built_in">new</span> <span class="hljs-keyword">array</span><br>&#125;<br>val arr = <span class="hljs-keyword">Array</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>)<br>def addOne(elem: <span class="hljs-type">Int</span>): <span class="hljs-type">Int</span> = elem + <span class="hljs-number">1</span><br>println(arrayOp(arr, addOne _).mkString(&quot;, &quot;)) // pass addOne <span class="hljs-keyword">also</span> <span class="hljs-keyword">work</span><br>println(arrayOp(arr, elem =&gt; elem * <span class="hljs-number">2</span>).mkString(&quot;, &quot;))<br>println(arrayOp(arr, _ * <span class="hljs-number">3</span>).mkString(&quot;, &quot;))<br></code></pre></td></tr></table></figure><ul><li>套娃：</li></ul><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-keyword">def</span> func(a: <span class="hljs-keyword">Int</span>): String =&gt; (<span class="hljs-keyword">Char</span> =&gt; <span class="hljs-keyword">Boolean</span>) = &#123;<br>    <span class="hljs-keyword">def</span> f1(s: String): <span class="hljs-keyword">Char</span> =&gt; <span class="hljs-keyword">Boolean</span> = &#123;<br>        <span class="hljs-keyword">def</span> f2(c: <span class="hljs-keyword">Char</span>): <span class="hljs-keyword">Boolean</span> = &#123; <br>            <span class="hljs-keyword">if</span> (a == <span class="hljs-number">0</span> &amp;&amp; s == <span class="hljs-string">&quot;&quot;</span> &amp;&amp; c == <span class="hljs-string">&#x27;0&#x27;</span>) <span class="hljs-keyword">false</span> <span class="hljs-keyword">else</span> <span class="hljs-keyword">true</span><br>        &#125;<br>        f2<br>    &#125;<br>    f1<br>&#125;<br><span class="hljs-keyword">println</span>(func(<span class="hljs-number">0</span>)(<span class="hljs-string">&quot;&quot;</span>)(<span class="hljs-string">&#x27;0&#x27;</span>)) <span class="hljs-comment">// false</span><br><span class="hljs-keyword">println</span>(func(<span class="hljs-number">1</span>)(<span class="hljs-string">&quot;hello&quot;</span>)(<span class="hljs-string">&#x27;c&#x27;</span>)) <span class="hljs-comment">// true</span><br></code></pre></td></tr></table></figure><ul><li>上面的例子经过极致简写：只能说类型推导也太强大了。<strong>内层函数可以使用外层函数的参数</strong>。</li></ul><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs arcade"><span class="hljs-comment">// simplify to anonymous function</span><br>def func1(a: Int): <span class="hljs-function"><span class="hljs-params">String</span> =&gt;</span> (<span class="hljs-function"><span class="hljs-params">Char</span> =&gt;</span> <span class="hljs-built_in">Boolean</span>) = &#123;<br>    s =&gt; <span class="hljs-function"><span class="hljs-params">c</span> =&gt;</span> !(a == <span class="hljs-number">0</span> &amp;&amp; s == <span class="hljs-string">&quot;&quot;</span> &amp;&amp; c == <span class="hljs-string">&#x27;0&#x27;</span>)<br>&#125;<br>println(func1(<span class="hljs-number">0</span>)(<span class="hljs-string">&quot;&quot;</span>)(<span class="hljs-string">&#x27;0&#x27;</span>)) <span class="hljs-comment">// false</span><br>println(func1(<span class="hljs-number">1</span>)(<span class="hljs-string">&quot;hello&quot;</span>)(<span class="hljs-string">&#x27;c&#x27;</span>)) <span class="hljs-comment">// true</span><br></code></pre></td></tr></table></figure><ul><li>柯里化之后：</li></ul><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-comment">// Currying </span><br><span class="hljs-keyword">def</span> func2(a: <span class="hljs-keyword">Int</span>)(s: String)(c: <span class="hljs-keyword">Char</span>): <span class="hljs-keyword">Boolean</span> = !(a == <span class="hljs-number">0</span> &amp;&amp; s == <span class="hljs-string">&quot;&quot;</span> &amp;&amp; c == <span class="hljs-string">&#x27;0&#x27;</span>)<br><span class="hljs-keyword">println</span>(func2(<span class="hljs-number">0</span>)(<span class="hljs-string">&quot;&quot;</span>)(<span class="hljs-string">&#x27;0&#x27;</span>)) <span class="hljs-comment">// false</span><br><span class="hljs-keyword">println</span>(func2(<span class="hljs-number">1</span>)(<span class="hljs-string">&quot;hello&quot;</span>)(<span class="hljs-string">&#x27;c&#x27;</span>)) <span class="hljs-comment">// true</span><br></code></pre></td></tr></table></figure><p><strong>函数柯里化</strong>和<strong>闭包</strong>：<strong>重点</strong>。</p><p>闭包：如果一个函数，访问到了它的外部（局部）变量的值，那么这个函数和他所处的环境，称为闭包。</p><ul><li><a href="https://zh.wikipedia.org/wiki/%E9%97%AD%E5%8C%85_(%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6)">闭包</a>的定义：</li></ul><blockquote><p>在计算机科学中，闭包（英语：Closure），又称词法闭包（Lexical Closure）或函数闭包（function closures），是在支持<a href="https://zh.wikipedia.org/wiki/%E5%A4%B4%E7%AD%89%E5%87%BD%E6%95%B0">头等函数</a>的编程语言中实现词法绑定的一种技术。闭包在实现上是一个结构体，它存储了一个函数（通常是其入口地址）和一个关联的环境（相当于一个符号查找表）。环境里是若干对符号和值的对应关系，它既要包括约束变量（该函数内部绑定的符号），也要包括自由变量（在函数外部定义但在函数内被引用），有些函数也可能没有自由变量。闭包跟函数最大的不同在于，当捕捉闭包的时候，它的自由变量会在捕捉时被确定，这样即便脱离了捕捉时的上下文，它也能照常运行。捕捉时对于值的处理可以是值拷贝，也可以是名称引用，这通常由语言设计者决定，也可能由用户自行指定（如C++）。</p></blockquote><ul><li>因为外层调用结束返回内层函数后，经过堆栈调整(比如在C中主调或者被调清理)，外层函数的参数已经被释放了，所以内层是获取不到外层的函数参数的。为了能够将环境（函数中用到的并非该函数参数的变量和他们的值）保存下来（需要考虑释放问题，可以通过GC可以通过对象生命周期控制，GC是一个常见选择），这时会将执行的环境打一个包保存到堆里面。</li></ul><p>函数<a href="https://zh.wikipedia.org/wiki/%E6%9F%AF%E9%87%8C%E5%8C%96">柯里化</a>（Currying）：将一个参数列表的多个参数，变成多个参数列表的过程。也就是将普通多参数函数变成高阶函数的过程。</p><ul><li>定义：</li></ul><blockquote><p>在计算机科学中，柯里化（英语：Currying），又译为卡瑞化或加里化，是把接受多个参数的函数变换成接受一个单一参数（最初函数的第一个参数）的函数，并且返回接受余下的参数而且返回结果的新函数的技术。在直觉上，柯里化声称“如果你固定某些参数，你将得到接受余下参数的一个函数”。柯里化是一种处理函数中附有多个参数的方法，并在只允许单一参数的框架中使用这些函数。</p></blockquote><ul><li>scala中的柯里化函数定义：</li></ul><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs scss"><span class="hljs-comment">// Currying </span><br>def <span class="hljs-built_in">add</span>(a: Int)(b: Int): Int = a + b<br><span class="hljs-built_in">println</span>(<span class="hljs-built_in">add</span>(<span class="hljs-number">4</span>)(<span class="hljs-number">3</span>))<br>val addFour = <span class="hljs-built_in">add</span>(<span class="hljs-number">4</span>) _<br>// val addFour: Int =&gt; int = <span class="hljs-built_in">add</span>(<span class="hljs-number">4</span>)<br><span class="hljs-built_in">println</span>(<span class="hljs-built_in">addFour</span>(<span class="hljs-number">3</span>))<br></code></pre></td></tr></table></figure><p>递归：</p><ul><li>太常见了，不用过多介绍。</li><li>方法调用自身。</li><li>递归要有结束逻辑。</li><li>调用自身时，传递参数要有规律。</li><li>scala中递归定义函数必须声明返回值类型，因为无法通过推导获得。</li><li>纯函数式语言比如Haskell，连循环都没有，很多操作都需要通过递归来做，性能比较依赖尾递归优化。</li><li>scala中的尾递归优化例子：</li></ul><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs scss">def <span class="hljs-built_in">factorial</span>(n: Int) : Int = &#123;<br>    if (n &lt; <span class="hljs-number">0</span>)<br>        return -<span class="hljs-number">1</span><br>    <span class="hljs-built_in">if</span>(n == <span class="hljs-number">0</span>)<br>        return <span class="hljs-number">1</span> <br>    <span class="hljs-built_in">factorial</span>(n-<span class="hljs-number">1</span>) * n<br>&#125;<br><span class="hljs-comment">// tail recusion implementation of factorial</span><br>def <span class="hljs-built_in">tailFact</span>(n: Int): Int = &#123;<br>    if (n &lt; <span class="hljs-number">0</span>)<br>        return -<span class="hljs-number">1</span><br>    <span class="hljs-keyword">@annotation</span>.tailrec<br>    def loop(<span class="hljs-attribute">n</span>: Int, <span class="hljs-attribute">curRes</span>: Int): Int = &#123;<br>        if (n == <span class="hljs-number">0</span>)<br>            return curRes<br>        <span class="hljs-built_in">loop</span>(n - <span class="hljs-number">1</span>, curRes * n)<br>    &#125;<br>    <span class="hljs-built_in">loop</span>(n, <span class="hljs-number">1</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>控制抽象：</p><ul><li>值调用：按值传递参数，计算值后再传递。多数语言中一般函数调用都是这个方式，C++还存在引用传递。</li><li>名调用：按名称传递参数，直接用实参替换函数中使用形参的地方。能想到的只有C语言中的带参宏函数，其实并不是函数调用，预处理时直接替换。</li><li>例子：</li></ul><figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs isbl"><span class="hljs-comment">// pass by value</span><br><span class="hljs-variable">def</span> <span class="hljs-function"><span class="hljs-title">f0</span>(<span class="hljs-variable">a</span>: <span class="hljs-variable">Int</span>): <span class="hljs-variable">Unit</span> = &#123;</span><br><span class="hljs-function">    <span class="hljs-title">println</span>(<span class="hljs-string">&quot;a: &quot;</span> + <span class="hljs-variable">a</span>)</span><br>    <span class="hljs-function"><span class="hljs-title">println</span>(<span class="hljs-string">&quot;a: &quot;</span> + <span class="hljs-variable">a</span>)</span><br>&#125;<br><span class="hljs-function"><span class="hljs-title">f0</span>(<span class="hljs-number">10</span>)</span><br><br><span class="hljs-comment">// pass by name, argument can be a code block that return to Int</span><br><span class="hljs-variable">def</span> <span class="hljs-function"><span class="hljs-title">f1</span>(<span class="hljs-variable">a</span>: =&gt; <span class="hljs-variable">Int</span>): <span class="hljs-variable">Unit</span> = &#123;</span><br><span class="hljs-function">    <span class="hljs-title">println</span>(<span class="hljs-string">&quot;a: &quot;</span> + <span class="hljs-variable">a</span>)</span><br>    <span class="hljs-function"><span class="hljs-title">println</span>(<span class="hljs-string">&quot;a: &quot;</span> + <span class="hljs-variable">a</span>)</span><br>&#125;<br><span class="hljs-variable">def</span> <span class="hljs-function"><span class="hljs-title">f2</span>(): <span class="hljs-variable">Int</span> = &#123;</span><br><span class="hljs-function">    <span class="hljs-title">println</span>(<span class="hljs-string">&quot;call f2()&quot;</span>)</span><br>    <span class="hljs-number">10</span><br>&#125;<br><span class="hljs-function"><span class="hljs-title">f1</span>(<span class="hljs-number">10</span>)</span><br><span class="hljs-function"><span class="hljs-title">f1</span>(<span class="hljs-title">f2</span>()) <span class="hljs-comment">// pass by name, just replace a with f2(), then will call f2() twice</span></span><br><span class="hljs-function"><span class="hljs-title">f1</span>(&#123;</span><br><span class="hljs-function">    <span class="hljs-title">println</span>(<span class="hljs-string">&quot;code block&quot;</span>) <span class="hljs-comment">// print twice</span></span><br><span class="hljs-function">    <span class="hljs-number">30</span></span><br><span class="hljs-function">&#125;)</span><br></code></pre></td></tr></table></figure><ul><li>应用：使用传名参数实现一个函数相当于while的功能。</li></ul><figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs isbl"><span class="hljs-comment">// built-in while</span><br><span class="hljs-variable">var</span> <span class="hljs-variable">n</span> = <span class="hljs-number">10</span><br><span class="hljs-variable"><span class="hljs-keyword">while</span></span> (<span class="hljs-variable">n</span> &gt;= <span class="hljs-number">1</span>) &#123;<br>    <span class="hljs-function"><span class="hljs-title">print</span>(<span class="hljs-variable">s</span><span class="hljs-string">&quot;$n &quot;</span>)</span><br>    <span class="hljs-variable">n</span> -= <span class="hljs-number">1</span><br>&#125;<br><span class="hljs-function"><span class="hljs-title">println</span>()</span><br><br><span class="hljs-comment">// application: self-defined while, implement a function just like while keyword</span><br><span class="hljs-variable">def</span> <span class="hljs-function"><span class="hljs-title">myWhile</span>(<span class="hljs-variable">condition</span>: =&gt; <span class="hljs-variable">Boolean</span>): (=&gt; <span class="hljs-variable">Unit</span>) =&gt; <span class="hljs-variable">Unit</span> = &#123;</span><br><span class="hljs-function">    <span class="hljs-variable">def</span> <span class="hljs-title">doLoop</span>(<span class="hljs-variable">op</span>: =&gt; <span class="hljs-variable">Unit</span>): <span class="hljs-variable">Unit</span> = &#123;</span><br><span class="hljs-function">        <span class="hljs-variable"><span class="hljs-keyword">if</span></span> (<span class="hljs-variable">condition</span>) &#123;</span><br><span class="hljs-function">            <span class="hljs-variable">op</span></span><br><span class="hljs-function">            <span class="hljs-title">myWhile</span>(<span class="hljs-variable">condition</span>)(<span class="hljs-variable">op</span>)</span><br>        &#125;<br>    &#125;<br>    <span class="hljs-variable">doLoop</span> <span class="hljs-variable">_</span><br>&#125;<br><span class="hljs-variable">n</span> = <span class="hljs-number">10</span><br><span class="hljs-variable">myWhile</span> (<span class="hljs-variable">n</span> &gt;= <span class="hljs-number">1</span>) &#123;<br>    <span class="hljs-function"><span class="hljs-title">print</span>(<span class="hljs-variable">s</span><span class="hljs-string">&quot;$n &quot;</span>)</span><br>    <span class="hljs-variable">n</span> -= <span class="hljs-number">1</span><br>&#125;<br><span class="hljs-function"><span class="hljs-title">println</span>()</span><br><br><span class="hljs-comment">// simplfy</span><br><span class="hljs-variable">def</span> <span class="hljs-function"><span class="hljs-title">myWhile2</span>(<span class="hljs-variable">condition</span>: =&gt; <span class="hljs-variable">Boolean</span>): (=&gt; <span class="hljs-variable">Unit</span>) =&gt; <span class="hljs-variable">Unit</span> = &#123;</span><br><span class="hljs-function">    <span class="hljs-variable">op</span> =&gt; &#123;</span><br><span class="hljs-function">        <span class="hljs-variable"><span class="hljs-keyword">if</span></span> (<span class="hljs-variable">condition</span>) &#123;</span><br><span class="hljs-function">            <span class="hljs-variable">op</span></span><br><span class="hljs-function">            <span class="hljs-title">myWhile2</span>(<span class="hljs-variable">condition</span>)(<span class="hljs-variable">op</span>)</span><br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-variable">n</span> = <span class="hljs-number">10</span><br><span class="hljs-variable">myWhile</span> (<span class="hljs-variable">n</span> &gt;= <span class="hljs-number">1</span>) &#123;<br>    <span class="hljs-function"><span class="hljs-title">print</span>(<span class="hljs-variable">s</span><span class="hljs-string">&quot;$n &quot;</span>)</span><br>    <span class="hljs-variable">n</span> -= <span class="hljs-number">1</span><br>&#125;<br><span class="hljs-function"><span class="hljs-title">println</span>()</span><br><br><span class="hljs-comment">// use currying</span><br><span class="hljs-variable">def</span> <span class="hljs-function"><span class="hljs-title">myWhile3</span>(<span class="hljs-variable">condition</span>: =&gt; <span class="hljs-variable">Boolean</span>)(<span class="hljs-variable">op</span>: =&gt; <span class="hljs-variable">Unit</span>): <span class="hljs-variable">Unit</span> = &#123;</span><br><span class="hljs-function">    <span class="hljs-variable"><span class="hljs-keyword">if</span></span> (<span class="hljs-variable">condition</span>) &#123;</span><br><span class="hljs-function">        <span class="hljs-variable">op</span></span><br><span class="hljs-function">        <span class="hljs-title">myWhile3</span>(<span class="hljs-variable">condition</span>)(<span class="hljs-variable">op</span>)</span><br>    &#125;<br>&#125;<br><span class="hljs-variable">n</span> = <span class="hljs-number">10</span><br><span class="hljs-variable">myWhile3</span> (<span class="hljs-variable">n</span> &gt;= <span class="hljs-number">1</span>) &#123;<br>    <span class="hljs-function"><span class="hljs-title">print</span>(<span class="hljs-variable">s</span><span class="hljs-string">&quot;$n &quot;</span>)</span><br>    <span class="hljs-variable">n</span> -= <span class="hljs-number">1</span><br>&#125;<br><span class="hljs-function"><span class="hljs-title">println</span>()</span><br></code></pre></td></tr></table></figure><p>惰性加载：</p><ul><li>当函数返回值被声明为<code>lazy</code>时，函数的执行将会被推迟，知道我们首次对此取值，该函数才会被执行。这种函数成为惰性函数。</li></ul><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-keyword">def</span> main(args: Array[String]): Unit = &#123;<br>    <span class="hljs-comment">// just like pass by name</span><br>    lazy val result: <span class="hljs-keyword">Int</span> = sum(<span class="hljs-number">13</span>, <span class="hljs-number">47</span>)<br>    <span class="hljs-keyword">println</span>(<span class="hljs-string">&quot;before lazy load&quot;</span>)<br>    <span class="hljs-keyword">println</span>(s<span class="hljs-string">&quot;result = $&#123;result&#125;&quot;</span>) <span class="hljs-comment">// first call sum(13, 47)</span><br>    <span class="hljs-keyword">println</span>(s<span class="hljs-string">&quot;result = $&#123;result&#125;&quot;</span>) <span class="hljs-comment">// result has been evaluated</span><br>&#125;<br><span class="hljs-keyword">def</span> sum(a: <span class="hljs-keyword">Int</span>, b: <span class="hljs-keyword">Int</span>): <span class="hljs-keyword">Int</span> = &#123;<br>    <span class="hljs-keyword">println</span>(<span class="hljs-string">&quot;call sum&quot;</span>)<br>    a + b<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>有点像传名参数，但懒加载只是推迟求值到第一次使用时，而不是单纯替换。</li></ul><h2 id="包管理"><a href="#包管理" class="headerlink" title="包管理"></a>包管理</h2><p>关于Scala面向对象：</p><ul><li>Scala的面向对象思想源自Java，很多概念是一致的。</li><li>语法和java不同，补充了更多功能。</li></ul><p>包：</p><ul><li><p><code>package name</code></p></li><li><p>作用：</p><ul><li>区分相同名字类，避免名称冲突。</li><li>类很多时，分模块管理。</li><li>访问权限控制。</li></ul></li><li><p>命名：包名称只能是常规的标识符（字母数字下划线，数字不能开头）。同样<code>.</code>作为不同层级分割符，整体作为包名。</p></li><li><p>命名规范：一般情况下按照如下规则命名<code>com.company.projectname.modulename</code>，视项目规定而定，只是一个名称而已。</p></li><li><p>scala中的两种包管理方式：</p><ul><li>第一种，java风格，每个源文件声明一个包，写在源文件最上方。但源文件位置不需要和包名目录层级一致，只代表逻辑层级关系，不像java一样源文件也必须按照包名目录层级关系放置。当然惯例是和java一样按照包名目录层级来放置。</li><li>第二种，用<code>&#123;&#125;</code>嵌套风格定义包：</li></ul><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">package com &#123;<br>    // code <span class="hljs-keyword">in</span> com package<br>    <span class="hljs-keyword">object</span> <span class="hljs-keyword">Outer</span> &#123;<br>        var <span class="hljs-type">name</span> = &quot;Outer&quot;<br>    &#125;<br>    package <span class="hljs-keyword">inner</span> &#123;<br>        // code <span class="hljs-keyword">in</span> com.<span class="hljs-keyword">inner</span> package<br>        package scala &#123;<br>            // code <span class="hljs-keyword">in</span> com.innner.scala package<br>            <span class="hljs-keyword">object</span> <span class="hljs-keyword">Inner</span> &#123;<br>                def main(args: <span class="hljs-keyword">Array</span>[String]):Unit = &#123;<br>                    println(<span class="hljs-keyword">Outer</span>.name)<br>                    <span class="hljs-keyword">Outer</span>.name = &quot;Inner&quot;<br>                    println(<span class="hljs-keyword">Outer</span>.name)<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125; <br></code></pre></td></tr></table></figure><ul><li>嵌套风格好处：<ul><li>一个源文件可以声明多个并列的最顶层的包。</li><li>子包中的类可以访问父包中的内容，无需导入。但外层是不能直接访问内层的，需要导入。</li></ul></li><li>如果单文件VsCode测试嵌套包，而不是用IDE的话，那定义了包就不能直接执行了，需要<code>scalac</code>先编译，并指定入口类运行。编译后的字节码文件和java一样会自动按照包层级关系排列。</li></ul><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm"><span class="hljs-keyword">scalac </span>PackageManagement.<span class="hljs-keyword">scala</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">scala </span>com.inner.<span class="hljs-keyword">scala.Inner </span><br></code></pre></td></tr></table></figure></li></ul><p>包对象：</p><ul><li>为scala包定义一个同名的单例包对象，定义在包对象中的成员，作为其对应包下的所有类和对象的共享变量，可以被直接访问，无需导入。</li><li>关键字<code>package object</code>，需要和包在同一层级下。比如为<code>com.inner</code>包定义包对象的话，必须在<code>com</code>包中，定义形式<code>package obejct inner &#123; ... &#125;</code>。</li></ul><p>包的导入：</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">import</span> users._      <span class="hljs-comment">// 导入包 users 中的所有成员</span><br><span class="hljs-keyword">import</span> users.User   <span class="hljs-comment">// 导入类 User</span><br><span class="hljs-keyword">import</span> users.&#123;User, UserPreferences&#125;      <span class="hljs-comment">// 仅导入选择的成员</span><br><span class="hljs-keyword">import</span> users.&#123;UserPreferences =&gt; UPrefs&#125;  <span class="hljs-comment">// 导入类并且设置别名</span><br><span class="hljs-keyword">import</span> users.&#123;User =&gt; _, _&#125;               <span class="hljs-comment">// 导入出User类以外的所有users包中的内容</span><br></code></pre></td></tr></table></figure><ul><li>可以在任意位置导入（作用于代码块），可以设置别名，可以选择性导入想要导入的内容，可以屏蔽某个类。</li><li>所有scala源文件默认导入：</li></ul><figure class="highlight elm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs elm"><span class="hljs-keyword">import</span> java.lang._<br><span class="hljs-keyword">import</span> scala._<br><span class="hljs-keyword">import</span> scala.Predef._<br></code></pre></td></tr></table></figure><h2 id="面向对象"><a href="#面向对象" class="headerlink" title="面向对象"></a>面向对象</h2><p>类定义：</p><ul><li>回顾java中，如果是<code>public</code>向外公开的，那么必须和文件名一致，也只能有一个。不写访问修饰符则可以定义多个，包访问权限。</li><li>scala中没有<code>public</code>关键字，默认就是公有，不能加<code>public</code>，一个文件可以写多个类，不要求和文件名一致。</li></ul><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs perl">[descriptor] <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">classname</span> </span>&#123;<br>    // body: fields &amp; methods<br>    [descriptor] var/val name: Type = _<br>    [descriptor] <span class="hljs-function"><span class="hljs-keyword">method</span>(<span class="hljs-title">args</span>: <span class="hljs-title">ArgsType</span>): <span class="hljs-title">RetType</span> = </span>&#123;<br>        // <span class="hljs-function"><span class="hljs-keyword">method</span> <span class="hljs-title">body</span></span><br><span class="hljs-function">    &#125;</span><br><span class="hljs-function">&#125;</span><br></code></pre></td></tr></table></figure><ul><li>访问修饰符可以是：<code>private</code> <code>protected</code> <code>private [pacakgeName]</code>，默认就是公有，不需要加。</li><li>成员如果需要Java Bean规范的getter和setter的话可以加<code>@scala.beans.BeanProperty</code>相当于自动创建，不需要显式写出。</li><li>成员给初值<code>_</code>会赋默认值，scala中定义变量必须赋值，可以这样做。值类型的值0，引用则是<code>null</code>。定义常量的话不能用<code>_</code>，因为只能初始化一次，编译器会提示。</li></ul><p>封装：</p><ul><li>Java的封装：私有化，提供getter和setter。</li><li>scala中考虑到Java太冗余了，脱裤子放屁一样。scala中的公有属性，底层实际为<code>private</code>，并通过get方法<code>obj.field()</code>和set方法<code>obj.field_=(value)</code>对其进行操作。所以scala不推荐设置为<code>private</code>。如果需要和其他框架互操作，必须提供Java Bean规范的getter和setter的话可以加<code>@scala.beans.BeanProperty</code>注解。</li></ul><p>访问权限：</p><ul><li>Java中<code>private protected public</code>和默认包访问权限。</li><li>scala中属性和方法默认公有，并且不提供<code>public</code>关键字。</li><li><code>private</code>私有，类内部和伴生对象内可用。</li><li><code>protected</code>保护权限，scala中比java中严格，只有同类、子类可访问，同包无法访问。【因为java中说实话有点奇怪】</li><li><code>private [pacakgeName]</code>增加包访问权限，在包内可以访问。</li></ul><p>构造器：</p><ul><li>包括主构造器和辅助构造器。</li></ul><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ClassName</span> [<span class="hljs-title">descriptor</span>] [([descriptor][<span class="hljs-keyword">val</span>/<span class="hljs-keyword">var</span>] arg1: Arg1Type, [descriptor][<span class="hljs-keyword">val</span>/<span class="hljs-keyword">var</span>] arg2: ...)] &#123; <span class="hljs-comment">// main constructor, only one, like record in java</span><br>    <span class="hljs-comment">// assist constructor</span><br>    def <span class="hljs-keyword">this</span>(argsList1) &#123;<br>        <span class="hljs-keyword">this</span>(args) <span class="hljs-comment">// call main constructor</span><br>    &#125;<br>    def <span class="hljs-keyword">this</span>(argsList2) &#123; <span class="hljs-comment">// overload constrcutor</span><br>        <span class="hljs-keyword">this</span>(argsList1) <span class="hljs-comment">// can call main constructor or other constructor that call main constructor directly or indirectly</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>例子：</li></ul><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">object</span> Constructor &#123;<br>    def main(args: Array[String]): <span class="hljs-built_in">Unit</span> = &#123;<br>        <span class="hljs-keyword">val</span> p: Person = new Person()<br>        p.Person() <span class="hljs-comment">// call main constructor</span><br><br>        <span class="hljs-keyword">val</span> p1 = new Person(<span class="hljs-string">&quot;alice&quot;</span>)<br>        <span class="hljs-keyword">val</span> p2 = new Person(<span class="hljs-string">&quot;bob&quot;</span>, <span class="hljs-number">25</span>)<br>        p1.Person()<br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> &#123;<br>    <span class="hljs-keyword">var</span> name: String = _<br>    <span class="hljs-keyword">var</span> age: <span class="hljs-built_in">Int</span> = _<br>    println(<span class="hljs-string">&quot;call main construtor&quot;</span>)<br><br>    def <span class="hljs-keyword">this</span>(name: String) &#123;<br>        <span class="hljs-keyword">this</span>()<br>        println(<span class="hljs-string">&quot;call assist constructor 1&quot;</span>)<br>        <span class="hljs-keyword">this</span>.name = name<br>        println(s<span class="hljs-string">&quot;Person: <span class="hljs-variable">$name</span> <span class="hljs-variable">$age</span>&quot;</span>)<br>    &#125;<br><br>    def <span class="hljs-keyword">this</span>(name: String, age: <span class="hljs-built_in">Int</span>) &#123;<br>        <span class="hljs-keyword">this</span>(name)<br>        <span class="hljs-keyword">this</span>.age = age<br>        println(<span class="hljs-string">&quot;call assist constructor 2&quot;</span>)<br>        println(s<span class="hljs-string">&quot;Person: <span class="hljs-variable">$name</span> <span class="hljs-variable">$age</span>&quot;</span>)<br>    &#125;<br><br>    <span class="hljs-comment">// just a common method, not constructor</span><br>    def Person(): <span class="hljs-built_in">Unit</span> = &#123;<br>        println(<span class="hljs-string">&quot;call Person.Person() method&quot;</span>)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li><p>特点：</p><ul><li>主构造器写在类定义上，一定是构造时最先被调用的构造器，方法体就是类定义，可以在类中方法定义的同级编写逻辑，都是主构造器一部分，按顺序执行。</li><li>辅助构造器用<code>this</code>定义。</li><li>辅助构造器必须直接或者间接调用主构造器，调用其他构造必须位于第一行。</li><li>主构造器和辅助构造器是重载的方法，所以参数列表不能一致。</li><li>可以定义和类名同名方法，就是一个普通方法。</li></ul></li><li><p>主构造器中形参三种形式：不使用任何修饰，</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs actionscript"><span class="hljs-keyword">var</span><br></code></pre></td></tr></table></figure><p>修饰，</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">val</span><br></code></pre></td></tr></table></figure><p>修饰。</p><ul><li>不使用任何修饰那就是一个形参，但此时在类内都可以访问到这个变量。逻辑上不是一个成员（报错信息这么写），但是可以访问，WTF？？？</li><li>使用<code>var val</code>修饰那就是定义为类成员，分别是变量和常量，不需要也不能在类内再定义一个同名字段。调用时传入参数就直接给到该成员，不需要再显式赋值。</li><li>主构造器中的<code>var val</code>成员也可以添加访问修饰符。</li><li>不加参数列表相当于为空，<code>()</code>可以省略。</li><li>主构造器的访问修饰符添加到参数列表<code>()</code>前。</li></ul></li><li><p>实践指南：</p><ul><li>推荐使用scala风格的主构造器<code>var val</code>修饰参数的编写方法，而不要被Java毒害！</li><li>如果需要多种重载的构造器那么就添加新的的辅助构造器。</li></ul></li></ul><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>(<span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> name: String) &#123;<br>    <span class="hljs-keyword">var</span> age: <span class="hljs-built_in">Int</span> = _<br>    println(<span class="hljs-string">&quot;call main construtor&quot;</span>)<br><br>    def <span class="hljs-keyword">this</span>(name: String, age: <span class="hljs-built_in">Int</span>) = &#123;<br>        <span class="hljs-keyword">this</span>(name)<br>        <span class="hljs-keyword">this</span>.age = age<br>        println(<span class="hljs-string">&quot;call assist constructor 2&quot;</span>)<br>        println(s<span class="hljs-string">&quot;Person: <span class="hljs-variable">$name</span> <span class="hljs-variable">$age</span>&quot;</span>)<br>    &#125;<br><br>    <span class="hljs-comment">// just a common method, not constructor</span><br>    def Person(): <span class="hljs-built_in">Unit</span> = &#123;<br>        println(<span class="hljs-string">&quot;call Person.Person() method&quot;</span>)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>继承：</p><ul><li><code>class ChildClassName[(argList1)] extends BaseClassName[(args)] &#123; body &#125;</code></li><li>子类继承父类属性和方法。</li><li>可以调用父类构造器，但感觉好像很局限，子类中只可能调用到主构造或者辅助构造中的其中一个构造器。那如果父类有多种构造方式，子类想继承也没有办法？只能是其中一种。</li><li>不考虑太多负担，按照scala惯用写法来写起来还是挺轻松的。</li></ul><p>多态：</p><ul><li>java中属性静态绑定，根据变量的引用类型确定，方法是动态绑定。</li><li>但scala中<strong>属性和方法都是动态绑定</strong>。就属性而言，其实也不应该在子类和父类中定义同名字段。</li><li>同java一样，所有实例方法都是虚方法，都可以被子类覆写。</li><li><code>override</code>关键字覆写。</li><li>scala中<strong>属性（字段）也可以被重写</strong>，加<code>override</code>关键字。</li></ul><p>抽象类：</p><ul><li><code>abstract calss ClassName</code></li><li>抽象属性：<code>val/var name: Type</code>，不给定初始值。</li><li>抽象方法：<code>def methodName(): RetType</code>，只声明不实现。</li><li>子类如果没有覆写全部父类未定义的属性和方法，那么就必须定义为抽象类。老生常谈了。</li><li>重写非抽象方法属性必须加<code>override</code>，重写抽象方法则可以不加<code>override</code>。</li><li>子类调用父类中方法使用<code>super</code>关键字。</li><li>子类重写父类抽象属性，父类抽象属性可以用<code>var</code>修饰，<code>val var</code>都可以。因为父类没有实现嘛，需要到子类中来实现。</li><li>如果是<strong>重写非抽象属性</strong>，则父类非抽象属性只支持<code>val</code>，不支持<code>var</code>。因为<code>var</code>修饰为可变量，子类继承后可以直接使用修改，没有必要重写。<code>val</code>不可变才有必要重写。</li><li>实践建议是重写就加<code>override</code>，都是很自然的东西，理解就好，不必纠结于每一个细节。</li></ul><p>匿名子类；</p><ul><li>和java如出一辙。重写所有抽象字段和方法。</li></ul><figure class="highlight fsharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs fsharp"><span class="hljs-keyword">val</span><span class="hljs-operator">/</span>var p<span class="hljs-operator">:</span> baseClass <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-keyword">baseClass</span> &#123;<br>    <span class="hljs-keyword">override</span> <span class="hljs-operator">...</span><br>&#125;<br></code></pre></td></tr></table></figure><p>伴生对象（Companion Object）：</p><ul><li>取代<code>static</code>语义。</li><li>编译后其实会生成两个类，伴生对象是伴生类（类名为对应类后加<code>$</code>符号）的单例对象。</li><li><code>obejct</code>，名称和类一致，必须放同一个文件，前面已经说过了。</li><li>常见用法：构造器私有化，用伴生对象中的工厂方法。和静态工厂方法使用起来也没有什么区别。</li><li>伴生对象实现<code>apply</code>方法后调用时可以省略<code>.apply</code>，直接使用<code>className(args)</code>。库中很多这种用法创建实例，是一个语法糖。</li><li>测试伴生对象时就在该对象内定义<code>main</code>函数编译时会出现的奇怪的访问权限问题。可能对包含入口的伴生对象做了特殊处理，具体细节尚不清楚。最好将<code>main</code>定义在单独的伴生对象内。</li></ul><p>Trait（特征&#x2F;特质）：</p><ul><li>替代java接口的概念。但比接口更为灵活，一种实现多继承的手段。</li><li>多个类具有相同的特征时，就可以将这个特征提取出来，用继承的方式来复用。</li><li>用关键字<code>trait</code>声明。</li></ul><figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs lasso"><span class="hljs-keyword">trait</span> traitName &#123;<br>    <span class="hljs-params">...</span><br>&#125;<br></code></pre></td></tr></table></figure><ul><li>引入&#x2F;混入(mixin)特征：<ul><li>有父类<code>class extends baseClass with trait1 with trait2 ... &#123;&#125;</code></li><li>没有父类<code>class extends trait1 with trait2 ... &#123;&#125;</code></li></ul></li><li>其中可以定义抽象和非抽象的属性和方法。</li><li>匿名子类也可以引入特征。</li><li>特征和基类或者多个特征中重名的属性或方法需要在子类中覆写以解决冲突，最后因为动态绑定，所有使用的地方都是子类的字段或方法。属性的话需要类型一致，不然提示不兼容。方法的话参数列表不一致会视为重载而不是冲突。</li><li>如果基类和特征中的属性或方法一个是抽象的，一个非抽象，且兼容，那么可以不覆写。很直观，就是不能冲突不能二义就行。</li><li>多个特征和基类定义了同名方法的，就需要在子类重写解决冲突。其中可以调用父类和特征的方法，此时<code>super.methodName</code>指代按照顺序最后一个拥有该方法定义的特征或基类。也可以用<code>super[baseClassOrTraitName].methodName</code>直接指代某个基类的方法，注意需要是直接基类，间接基类则不行。</li><li>也就是说基类和特征基本是同等地位。</li><li>例子：</li></ul><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><code class="hljs scala"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span> </span>&#123;<br>    <span class="hljs-keyword">val</span> name: <span class="hljs-type">String</span> = <span class="hljs-string">&quot;Person&quot;</span><br>    <span class="hljs-keyword">var</span> age: <span class="hljs-type">Int</span> = <span class="hljs-number">18</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">sayHi</span></span>(): <span class="hljs-type">Unit</span> = &#123;<br>        println(<span class="hljs-string">s&quot;hello from : <span class="hljs-subst">$name</span>&quot;</span>)<br>    &#125;<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">trait</span> <span class="hljs-title">Young</span> </span>&#123;<br>    <span class="hljs-comment">// abstract and non-abstract attribute</span><br>    <span class="hljs-keyword">var</span> age: <span class="hljs-type">Int</span><br>    <span class="hljs-keyword">val</span> name: <span class="hljs-type">String</span> = <span class="hljs-string">&quot;young&quot;</span><br><br>    <span class="hljs-comment">// method</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">play</span></span>(): <span class="hljs-type">Unit</span> = &#123;<br>        println(<span class="hljs-string">s&quot;young people <span class="hljs-subst">$name</span> is playing&quot;</span>)<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">dating</span></span>(): <span class="hljs-type">Unit</span><br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">trait</span> <span class="hljs-title">Knowledge</span> </span>&#123;<br>    <span class="hljs-keyword">var</span> amount: <span class="hljs-type">Int</span> = <span class="hljs-number">0</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">increase</span></span>(): <span class="hljs-type">Unit</span> = &#123;<br>        amount += <span class="hljs-number">1</span><br>    &#125;<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">trait</span> <span class="hljs-title">Talent</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">increase</span></span>(): <span class="hljs-type">Unit</span> = &#123;<br>        println(<span class="hljs-string">&quot;increase talent&quot;</span>)<br>    &#125;<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Student</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Person</span> <span class="hljs-keyword">with</span> <span class="hljs-title">Young</span> <span class="hljs-keyword">with</span> <span class="hljs-title">Knowledge</span> <span class="hljs-keyword">with</span> <span class="hljs-title">Talent</span></span>&#123;<br>    <span class="hljs-keyword">override</span> <span class="hljs-keyword">val</span> name: <span class="hljs-type">String</span> = <span class="hljs-string">&quot;alice&quot;</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">dating</span></span>(): <span class="hljs-type">Unit</span> = &#123;<br>        println(<span class="hljs-string">s&quot;Sutdent <span class="hljs-subst">$name</span> <span class="hljs-subst">$age</span> is dating&quot;</span>)<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">study</span></span>(): <span class="hljs-type">Unit</span> = println(<span class="hljs-string">s&quot;Student <span class="hljs-subst">$name</span> is studying&quot;</span>)<br><br>    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">sayHi</span></span>(): <span class="hljs-type">Unit</span> = &#123;<br>        <span class="hljs-keyword">super</span>.sayHi()<br>        println(<span class="hljs-string">s&quot;hello from : student <span class="hljs-subst">$name</span>&quot;</span>)<br>    &#125;<br><br>    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">increase</span></span>(): <span class="hljs-type">Unit</span> = &#123;<br>        <span class="hljs-keyword">super</span>.increase() <span class="hljs-comment">// call Talent.increase(), just the last</span><br>        println(<span class="hljs-string">s&quot;studnet <span class="hljs-subst">$name</span> knowledge increase: <span class="hljs-subst">$amount</span>&quot;</span>)<br>    &#125;<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">Trait</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span></span>(args: <span class="hljs-type">Array</span>[<span class="hljs-type">String</span>]): <span class="hljs-type">Unit</span> = &#123;<br>        <span class="hljs-keyword">val</span> s = <span class="hljs-keyword">new</span> <span class="hljs-type">Student</span>()<br>        s.sayHi()<br>        s.increase()<br><br>        s.study()<br>        s.increase()<br><br>        s.play()<br>        s.increase()<br><br>        s.dating()<br>        s.increase()<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>特征的继承：<code>trait childTrait extends baseTrait</code></li><li>特征的<strong>菱形继承</strong>解决方式：转换为线性的继承链条，在前面的成为基类，后面的成为子类。</li><li>例子：</li></ul><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs scala"><span class="hljs-class"><span class="hljs-keyword">trait</span> <span class="hljs-title">Ball</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">describe</span></span>(): <span class="hljs-type">String</span> = <span class="hljs-string">&quot;ball&quot;</span><br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">trait</span> <span class="hljs-title">ColorBall</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Ball</span> </span>&#123;<br>    <span class="hljs-keyword">var</span> color: <span class="hljs-type">String</span> = <span class="hljs-string">&quot;red&quot;</span><br>    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">describe</span></span>(): <span class="hljs-type">String</span> = color + <span class="hljs-string">&quot;_&quot;</span> + <span class="hljs-keyword">super</span>.describe()<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">trait</span> <span class="hljs-title">CategoryBall</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Ball</span> </span>&#123;<br>    <span class="hljs-keyword">var</span> category: <span class="hljs-type">String</span> = <span class="hljs-string">&quot;foot&quot;</span><br>    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">describe</span></span>(): <span class="hljs-type">String</span> = category + <span class="hljs-string">&quot;_&quot;</span> + <span class="hljs-keyword">super</span>.describe()<br>&#125;<br><br><span class="hljs-comment">// equals to MyFootBall -&gt; ColorBall -&gt; CategoryBall -&gt; Ball</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyFootBall</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">CategoryBall</span> <span class="hljs-keyword">with</span> <span class="hljs-title">ColorBall</span> </span>&#123;<br>    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">describe</span></span>(): <span class="hljs-type">String</span> = <span class="hljs-keyword">super</span>.describe()<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">TraitInheritance</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span></span>(args: <span class="hljs-type">Array</span>[<span class="hljs-type">String</span>]): <span class="hljs-type">Unit</span> = &#123;<br>        <span class="hljs-keyword">val</span> b = <span class="hljs-keyword">new</span> <span class="hljs-type">MyFootBall</span>()<br>        println(b.describe()) <span class="hljs-comment">// red_foot_ball</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>其实特征的多继承和C++的多继承已经很像了，只是名称冲突的解决方式不一样，菱形继承的解决方式也不一样，而且不能访问间接基类。</li><li>scala<strong>单继承多实现</strong>，实现体现在特征上。基类主要用于一个对象比较核心比较本质的部分上。</li><li><strong>继承特征与类的区别</strong>：特征构造时不能给参数。其他都是同样的，都可以实现多态。</li></ul><p>自身类型（self type）：</p><ul><li>可实现<strong>依赖注入</strong>的功能。</li><li>一个类或者特征指定了自身类型的话，它的对象和子类对象就会拥有这个自身类型中的所有属性和方法。</li><li>是将一个类或者特征插入到另一个类或者特征中，属性和方法都就像直接复制插入过来一样，能直接使用。但不是继承，不能用多态。</li><li>语法，在类或特征中：<code>_: SelfType =&gt;</code>，其中<code>_</code>的位置是别名定义，也可以是其他，<code>_</code>指代<code>this</code>。插入后就可以用<code>this.xxx</code>来访问自身类型中的属性和方法了。</li><li>注入进来的目的是让你能够使用，可见，提前使用应该拥有的属性和方法。最终只要自身类型和注入目标类型同时被继承就能够得到定义了。</li><li>例子：</li></ul><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs scala"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span>(<span class="hljs-params">val name: <span class="hljs-type">String</span>, val password: <span class="hljs-type">String</span></span>)</span><br><span class="hljs-comment">// user database access object</span><br><span class="hljs-class"><span class="hljs-keyword">trait</span> <span class="hljs-title">UserDao</span> </span>&#123;<br>    <span class="hljs-comment">// dependency injection from external</span><br>    _: <span class="hljs-type">User</span> =&gt; <span class="hljs-comment">// self type</span><br>    <span class="hljs-comment">// simulate insert data to databse</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">insert</span></span>(): <span class="hljs-type">Unit</span> = &#123;<br>        println(<span class="hljs-string">s&quot;insert into db: <span class="hljs-subst">$name</span> <span class="hljs-subst">$password</span>&quot;</span>)<br>    &#125;<br>&#125;<br><span class="hljs-comment">// register user</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RegisterUser</span>(<span class="hljs-params">name: <span class="hljs-type">String</span>, password: <span class="hljs-type">String</span></span>) <span class="hljs-keyword">extends</span> <span class="hljs-title">User</span>(<span class="hljs-params">name, password</span>) <span class="hljs-keyword">with</span> <span class="hljs-title">UserDao</span></span><br><br><span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">SelfType</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span></span>(args: <span class="hljs-type">Array</span>[<span class="hljs-type">String</span>]): <span class="hljs-type">Unit</span> = &#123;<br>        <span class="hljs-keyword">val</span> u = <span class="hljs-keyword">new</span> <span class="hljs-type">RegisterUser</span>(<span class="hljs-string">&quot;catholly&quot;</span>, <span class="hljs-string">&quot;nephren&quot;</span>)<br>        u.insert()<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>运行时类型识别RTTI：</p><ul><li>判断类型：<code>obj.isInstanceOf[T]</code>，确切匹配的类型或者父类都返回true。</li><li>转换类型：<code>obj.asInstance[T]</code>，转换为目标类型。</li><li>获取类名：<code>classOf[T]</code>，得到类对应的<code>Class</code>对象<code>Class[T]</code>，转字符串结果是<code>class package.xxx.className</code>。</li><li>获取对象的类：<code>obj.getClass</code></li></ul><p>枚举类：</p><ul><li>继承<code>Enumeration</code>。</li><li>用<code>Value</code>类型定义枚举值。</li></ul><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs scala"><span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">WorkDay</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Enumeration</span> </span>&#123;<br>    <span class="hljs-keyword">val</span> <span class="hljs-type">MONDAY</span> = <span class="hljs-type">Value</span>(<span class="hljs-number">1</span>, <span class="hljs-string">&quot;Monday&quot;</span>)<br>    <span class="hljs-keyword">val</span> <span class="hljs-type">TUESDAY</span> = <span class="hljs-type">Value</span>(<span class="hljs-number">2</span>, <span class="hljs-string">&quot;Tuesday&quot;</span>)<br>    <span class="hljs-keyword">val</span> <span class="hljs-type">THURSDAy</span> = <span class="hljs-type">Value</span>(<span class="hljs-number">3</span>, <span class="hljs-string">&quot;Thrusday&quot;</span>)<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">EnumClass</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span></span>(args: <span class="hljs-type">Array</span>[<span class="hljs-type">String</span>]): <span class="hljs-type">Unit</span> = &#123;<br>        println(<span class="hljs-type">WorkDay</span>.<span class="hljs-type">MONDAY</span>)<br>        println(<span class="hljs-type">WorkDay</span>.<span class="hljs-type">TUESDAY</span>)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>应用类：</p><ul><li>继承<code>App</code>，包装了<code>main</code>方法，就不需要显式定义<code>main</code>方法了，可以直接执行。</li></ul><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs scala"><span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">TestApp</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">App</span> </span>&#123;<br>    println(<span class="hljs-string">&quot;hello,world!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>定义类型别名：<code>type SelfDefineType = TargetType</code>。</p><p>密封类： <code>sealed</code>，子类只能定义在同一个文件内。</p><h2 id="集合"><a href="#集合" class="headerlink" title="集合"></a>集合</h2><p>Java集合：</p><ul><li>三大类型：列表<code>List</code>、集合<code>Set</code>、映射<code>Map</code>，有多种不同实现。</li></ul><p>Scala集合三大类型：</p><ul><li><p>序列<code>Seq</code>，集合<code>Set</code>，映射<code>Map</code>，所有集合都扩展自<code>Iterable</code>。</p></li><li><p>对于几乎所有集合类，都同时提供</p><p>可变和不可变</p><p>版本。</p><ul><li>不可变集合：<code>scala.collection.immutable</code></li><li>可变集合：<code>scala.collection.mutable</code></li><li>两个包中可能有同名的类型，需要注意区分是用的可变还是不可变版本，避免冲突和混淆。</li></ul></li><li><p>对于不可变集合，指该集合长度数量不可修改，每次修改（比如增删元素）都会返回一个新的对象，而不会修改源对象。</p></li><li><p>可变集合可以对源对象任意修改，一般也提供不可变集合相同的返回新对象的方法，但也可以用其他方法修改源对象。</p></li><li><p><strong>建议</strong>：操作集合时，不可变用操作符，可变用方法。操作符也不一定就会返回新对象，但大多是这样的，还是要具体看。</p></li><li><p>scala中集合类的定义比java要清晰不少。</p></li></ul><p>不可变集合：</p><ul><li><code>scala.collection.immutable</code>包中不可变集合关系一览： <a href="https://github.com/tch0/notes/blob/master/Images/Scala_immutable_collections_tree.jpg"><img src="https://github.com/tch0/notes/raw/master/Images/Scala_immutable_collections_tree.jpg" alt="Scala_mutable_collections_tree"></a></li><li>不可变集合没有太多好说的，集合和映射的哈希表和二叉树实现是肯定都有的，序列中分为随机访问序列（数组实现）和线性序列（链表实现），基本数据结构都有了。</li><li><code>Range</code>是范围，常用来遍历，有语法糖支持<code>1 to 10 by 2</code> <code>10 until 1 by -1</code>其实就是隐式转换加上方法调用。</li><li>scala中的<code>String</code>就是<code>java.lang.String</code>，和集合无直接关系，所以是虚箭头，是通过<code>Perdef</code>中的低优先级隐式转换来做到的。经过隐式转换为一个包装类型后就可以当做集合了。</li><li><code>Array</code>和<code>String</code>类似，在图中漏掉了。</li><li>此类包装为了兼容java在scala中非常常见，scala中很多类型就是对java类型的包装或者仅仅是别名。</li><li>scala中可能会推荐更多地使用不可变集合。能用不可变就用不可变。</li></ul><p>可变集合：</p><ul><li><code>scala.collection.mutable</code>包中可变集合关系一览：</li></ul><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgScala_mutable_collections_tree.jpeg"></p><ul><li>序列中多了<code>Buffer</code>，整体结构差不多。</li></ul><p>不可变和可变：</p><ul><li>不可变指的是对象大小不可变，但是可以修改元素的值（不能修改那创建了也没有用对吧），需要注意这一点。而如果用了<code>val</code>不变量存储，那么指向对象的地址也不可变。</li><li>不可变集合在原集合上个插入删除数据是做不到的，只能返回新的集合。</li></ul><p>泛型：</p><ul><li>集合类型大多都是支持泛型，使用泛型的语法是<code>[Type]</code>，不同于java的<code>&lt;Type&gt;</code>。</li></ul><p>不可变数组：</p><ul><li>访问元素使用<code>()</code>运算符，通过<code>apply/update</code>方法实现，源码中的实现只是抛出错误作为<strong>存根方法</strong>（stab method），具体逻辑由编译器填充。</li></ul><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-comment">// 1. new</span><br>val arr = new Array<span class="hljs-selector-attr">[Int]</span>(<span class="hljs-number">5</span>)<br><br><span class="hljs-comment">// 2. factory method in companion obejct</span><br>val arr1 = Array<span class="hljs-selector-attr">[Int]</span>(<span class="hljs-number">5</span>)<br>val arr2 = <span class="hljs-built_in">Array</span>(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>)<br><br><span class="hljs-comment">// 3. traverse, range for</span><br><span class="hljs-keyword">for</span> (<span class="hljs-selector-tag">i</span> &lt;- <span class="hljs-number">0</span> until arr.length) <span class="hljs-built_in">arr</span>(i) = <span class="hljs-selector-tag">i</span><br><span class="hljs-keyword">for</span> (<span class="hljs-selector-tag">i</span> &lt;- arr.indices) <span class="hljs-built_in">print</span>(s<span class="hljs-string">&quot;$&#123;arr(i)&#125; &quot;</span>)<br><span class="hljs-function"><span class="hljs-title">println</span><span class="hljs-params">()</span></span><br><br><span class="hljs-comment">// 4. tarverse, foreach</span><br><span class="hljs-keyword">for</span> (elem &lt;- arr) <span class="hljs-built_in">print</span>(s<span class="hljs-string">&quot;$elem &quot;</span>) <span class="hljs-comment">// elem is a val</span><br><span class="hljs-function"><span class="hljs-title">println</span><span class="hljs-params">()</span></span><br><br><span class="hljs-comment">// 5. tarverse, use iterator</span><br>val iter = arr<span class="hljs-selector-class">.iterator</span><br>while (iter.hasNext)<br>    <span class="hljs-built_in">print</span>(s<span class="hljs-string">&quot;$&#123;iter.next()&#125; &quot;</span>)<br><span class="hljs-function"><span class="hljs-title">println</span><span class="hljs-params">()</span></span><br><br><span class="hljs-comment">// 6. traverse, use foreach method, pass a function</span><br>arr<span class="hljs-selector-class">.foreach</span>((elem: Int) =&gt; <span class="hljs-built_in">print</span>(s<span class="hljs-string">&quot;$elem &quot;</span>))<br><span class="hljs-function"><span class="hljs-title">println</span><span class="hljs-params">()</span></span><br><br><span class="hljs-function"><span class="hljs-title">println</span><span class="hljs-params">(arr2.mkString(<span class="hljs-string">&quot;, &quot;</span>)</span></span>) <span class="hljs-comment">// to string directly</span><br><br><span class="hljs-comment">// 7. add element, return a new array, : should toward to object</span><br>val newArr = arr :+ <span class="hljs-number">10</span> <span class="hljs-comment">//  arr.:+(10) add to end</span><br><span class="hljs-function"><span class="hljs-title">println</span><span class="hljs-params">(newArr.mkString(<span class="hljs-string">&quot;, &quot;</span>)</span></span>)<br>val newArr2 = <span class="hljs-number">20</span> +: <span class="hljs-number">10</span> +: arr :+ <span class="hljs-number">30</span> <span class="hljs-comment">// arr.+:(10).+:(20).:+(30)</span><br><span class="hljs-function"><span class="hljs-title">println</span><span class="hljs-params">(newArr2.mkString(<span class="hljs-string">&quot;, &quot;</span>)</span></span>)<br></code></pre></td></tr></table></figure><ul><li>可以看到自定义运算符可以非常灵活，规定如果运算符首尾有<code>:</code>那么<code>:</code>一定要指向对象。</li><li>下标越界当然会抛出异常，使用前应该检查。</li><li>通过<code>Predef</code>中的隐式转换为一个混入了集合相关特征的包装类型从而得以使用scala的集合相关特征，<code>Array</code>类型中并没有相关混入。</li></ul><p>可变数组：</p><ul><li>类型<code>ArrayBuffer</code>。</li></ul><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-comment">// 1. create</span><br>val arr: ArrayBuffer<span class="hljs-selector-attr">[Int]</span> = new ArrayBuffer<span class="hljs-selector-attr">[Int]</span>()<br>val arr1: ArrayBuffer<span class="hljs-selector-attr">[Int]</span> = <span class="hljs-built_in">ArrayBuffer</span>(<span class="hljs-number">10</span>, <span class="hljs-number">20</span>, <span class="hljs-number">30</span>)<br><span class="hljs-function"><span class="hljs-title">println</span><span class="hljs-params">(arr.mkString(<span class="hljs-string">&quot;, &quot;</span>)</span></span>)<br><span class="hljs-function"><span class="hljs-title">println</span><span class="hljs-params">(arr1)</span></span> <span class="hljs-comment">// call toString ArrayBuffer(10, 20, 30)</span><br><br><span class="hljs-comment">// 2. visit</span><br><span class="hljs-function"><span class="hljs-title">arr1</span><span class="hljs-params">(<span class="hljs-number">2</span>)</span></span> = <span class="hljs-number">10</span><br><span class="hljs-comment">// 3. add element to tail</span><br><span class="hljs-selector-tag">var</span> newArr = arr :+ <span class="hljs-number">15</span> :+ <span class="hljs-number">20</span> <span class="hljs-comment">// do not change arr</span><br><span class="hljs-function"><span class="hljs-title">println</span><span class="hljs-params">(newArr)</span></span><br>newArr = arr += <span class="hljs-number">15</span> <span class="hljs-comment">// modify arr itself, add to tail return itself, do notrecommand assign to other var</span><br><span class="hljs-function"><span class="hljs-title">println</span><span class="hljs-params">(arr)</span></span><br><span class="hljs-function"><span class="hljs-title">println</span><span class="hljs-params">(newArr == arr)</span></span> <span class="hljs-comment">// true</span><br><span class="hljs-comment">// 4. add to head</span><br><span class="hljs-number">77</span> +=: arr <span class="hljs-comment">// WTF?</span><br><span class="hljs-function"><span class="hljs-title">println</span><span class="hljs-params">(arr)</span></span><br><span class="hljs-comment">// 5. insert to middle</span><br>arr<span class="hljs-selector-class">.insert</span>(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>)<br><span class="hljs-function"><span class="hljs-title">println</span><span class="hljs-params">(arr)</span></span><br><span class="hljs-comment">// 6. remove element</span><br>arr<span class="hljs-selector-class">.remove</span>(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>) <span class="hljs-comment">// startIndex, count</span><br><span class="hljs-function"><span class="hljs-title">println</span><span class="hljs-params">(arr)</span></span><br>arr -= <span class="hljs-number">15</span> <span class="hljs-comment">// remove specific element</span><br><span class="hljs-function"><span class="hljs-title">println</span><span class="hljs-params">(arr)</span></span><br><span class="hljs-comment">// 7. convert to Array</span><br>val newImmuArr: Array<span class="hljs-selector-attr">[Int]</span> = arr<span class="hljs-selector-class">.toArray</span><br><span class="hljs-function"><span class="hljs-title">println</span><span class="hljs-params">(newImmuArr.mkString(<span class="hljs-string">&quot;, &quot;</span>)</span></span>)<br><span class="hljs-comment">// 8. Array to ArryBuffer</span><br>val buffer: scala<span class="hljs-selector-class">.collection</span><span class="hljs-selector-class">.mutable</span><span class="hljs-selector-class">.Buffer</span><span class="hljs-selector-attr">[Int]</span> = newImmuArr<span class="hljs-selector-class">.toBuffer</span><br><span class="hljs-function"><span class="hljs-title">println</span><span class="hljs-params">(buffer)</span></span><br></code></pre></td></tr></table></figure><ul><li>推荐：不可变集合用运算符，可变集合直接调用对应方法。运算符容易迷惑。</li><li>更多方法查看文档和源码用到去找就行。</li><li>可变数组和不可变数组可以调用方法互相转换。</li></ul><p>二维数组：</p><ul><li>就是数组的数组。</li><li>使用<code>Array.ofDim[Type](firstDim, secondDim, ...)</code>方法。</li></ul><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-comment">// create 2d array</span><br>val arr: Array<span class="hljs-selector-attr">[Array[Int]</span>] = Array<span class="hljs-selector-class">.ofDim</span><span class="hljs-selector-attr">[Int]</span>(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>)<br><span class="hljs-function"><span class="hljs-title">arr</span><span class="hljs-params">(<span class="hljs-number">0</span>)</span><span class="hljs-params">(<span class="hljs-number">1</span>)</span></span> = <span class="hljs-number">10</span><br><span class="hljs-function"><span class="hljs-title">arr</span><span class="hljs-params">(<span class="hljs-number">1</span>)</span><span class="hljs-params">(<span class="hljs-number">0</span>)</span></span> = <span class="hljs-number">100</span><br> <br><span class="hljs-comment">// traverse</span><br>arr<span class="hljs-selector-class">.foreach</span>(v =&gt; <span class="hljs-built_in">println</span>(v<span class="hljs-selector-class">.mkString</span>(<span class="hljs-string">&quot;,&quot;</span>)))<br></code></pre></td></tr></table></figure><p>不可变列表：</p><ul><li><code>List</code>，抽象类，不能直接<code>new</code>，使用伴生对象<code>apply</code>传入元素创建。</li><li><code>List</code>本身也有<code>apply</code>能随机访问（做了优化），但是不能<code>update</code>更改。</li><li><code>foreach</code>方法遍历。</li><li>支持<code>+: :+</code>首尾添加元素。</li><li><code>Nil</code>空列表，<code>::</code>添加元素到表头。</li><li>常用<code>Nil.::(elem)</code>创建列表，换一种写法就是<code>10 :: 20 :: 30 :: Nil</code>得到结果<code>List(10, 20, 30)</code>，糖是真滴多！</li><li>合并两个列表：<code>list1 ::: list2</code> 或者<code>list1 ++ list2</code>。</li></ul><p>可变列表：</p><ul><li>可变列表<code>ListBuffer</code>，和<code>ArrayBuffer</code>很像。</li><li><code>final</code>的，可以直接<code>new</code>，也可以伴生对象<code>apply</code>传入元素创建（总体来说scala中更推荐这种方式）。</li><li>方法：<code>append prepend insert remove</code></li><li>添加元素到头或尾：<code>+=: +=</code></li><li>合并：<code>++</code>得到新的列表，<code>++=</code>合并到源上。</li><li>删除元素也可以用<code>-=</code>运算符。</li><li>具体操作很多，使用时阅读文档即可。</li></ul><p>不可变集合：</p><ul><li>数据无序，不可重复。</li><li>可变和不可变都叫<code>Set</code>，需要做区分。默认<code>Set</code>定义为<code>immutable.Set</code>别名。</li><li>创建时重复数据会被去除，可用来去重。</li><li>添加元素：<code>set + elem</code></li><li>合并：<code>set1 ++ set2</code></li><li>移除元素：<code>set - elem</code></li><li>不改变源集合。</li></ul><p>可变集合：</p><ul><li>操作基于源集合做更改。</li><li>为了与不可变集合区分，<code>import scala.collection.mutable</code>并用<code>mutable.Set</code>。</li><li>不可变集合有的都有。</li><li>添加元素到源上：<code>set += elem</code> <code>add</code></li><li>删除元素：<code>set -= elem</code> <code>remove</code></li><li>合并：<code>set1 ++= set2</code></li><li>都很简单很好理解，多看文档和源码就行。</li></ul><p>不可变映射：</p><ul><li><code>Map</code>默认就是<code>immutable.Map</code>别名。</li><li>两个泛型类型。</li><li>基本元素是一个二元组。</li></ul><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-comment">// create Map</span><br>val map: Map<span class="hljs-selector-attr">[String, Int]</span> = <span class="hljs-built_in">Map</span>(<span class="hljs-string">&quot;a&quot;</span> -&gt; <span class="hljs-number">13</span>, <span class="hljs-string">&quot;b&quot;</span> -&gt; <span class="hljs-number">20</span>)<br><span class="hljs-function"><span class="hljs-title">println</span><span class="hljs-params">(map)</span></span><br><span class="hljs-comment">// traverse</span><br>map<span class="hljs-selector-class">.foreach</span>((kv: (String, Int)) =&gt; <span class="hljs-built_in">println</span>(kv))<br>map<span class="hljs-selector-class">.foreach</span>(kv =&gt; <span class="hljs-built_in">println</span>(s<span class="hljs-string">&quot;$&#123;kv._1&#125; : $&#123;kv._2&#125;&quot;</span>))<br><span class="hljs-comment">// get keys and values</span><br><span class="hljs-keyword">for</span> (key &lt;- map.keys) &#123;<br>    <span class="hljs-built_in">println</span>(s<span class="hljs-string">&quot;$&#123;key&#125; : $&#123;map.get(key)&#125;&quot;</span>)<br>&#125;<br><span class="hljs-comment">// get value of given key</span><br><span class="hljs-function"><span class="hljs-title">println</span><span class="hljs-params">(map.get(<span class="hljs-string">&quot;a&quot;</span>)</span></span>.get)<br><span class="hljs-function"><span class="hljs-title">println</span><span class="hljs-params">(map.getOrElse(<span class="hljs-string">&quot;c&quot;</span>, -<span class="hljs-number">1</span>)</span></span>) <span class="hljs-comment">// avoid excption</span><br><span class="hljs-function"><span class="hljs-title">println</span><span class="hljs-params">(map(<span class="hljs-string">&quot;a&quot;</span>)</span></span>) <span class="hljs-comment">// if no such key will throw exception</span><br><span class="hljs-comment">// merge</span><br>val map2 = map ++ <span class="hljs-built_in">Map</span>(<span class="hljs-string">&quot;e&quot;</span> -&gt; <span class="hljs-number">1024</span>)<br><span class="hljs-function"><span class="hljs-title">println</span><span class="hljs-params">(map2)</span></span><br></code></pre></td></tr></table></figure><p>可变映射：</p><ul><li><code>mutable.Map</code></li><li>不可变的都支持。</li></ul><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-comment">// create mutable Map</span><br>val map: mutable<span class="hljs-selector-class">.Map</span><span class="hljs-selector-attr">[String, Int]</span> = mutable<span class="hljs-selector-class">.Map</span>(<span class="hljs-string">&quot;a&quot;</span> -&gt; <span class="hljs-number">10</span>, <span class="hljs-string">&quot;b&quot;</span> -&gt; <span class="hljs-number">20</span>)<br><span class="hljs-comment">// add element</span><br>map<span class="hljs-selector-class">.put</span>(<span class="hljs-string">&quot;c&quot;</span>, <span class="hljs-number">30</span>)<br>map += ((<span class="hljs-string">&quot;d&quot;</span>, <span class="hljs-number">40</span>)) <span class="hljs-comment">// two () represent tuple to avoid ambiguity</span><br><span class="hljs-function"><span class="hljs-title">println</span><span class="hljs-params">(map)</span></span><br><span class="hljs-comment">// remove element</span><br>map<span class="hljs-selector-class">.remove</span>(<span class="hljs-string">&quot;a&quot;</span>)<br>map -= <span class="hljs-string">&quot;b&quot;</span> <span class="hljs-comment">// just need key</span><br><span class="hljs-function"><span class="hljs-title">println</span><span class="hljs-params">(map)</span></span><br><span class="hljs-comment">// modify element</span><br>map<span class="hljs-selector-class">.put</span>(<span class="hljs-string">&quot;c&quot;</span>, <span class="hljs-number">100</span>) <span class="hljs-comment">// call update, add/modify</span><br><span class="hljs-function"><span class="hljs-title">println</span><span class="hljs-params">(map)</span></span><br><span class="hljs-comment">// merge Map</span><br>map ++= <span class="hljs-built_in">Map</span>(<span class="hljs-string">&quot;a&quot;</span> -&gt; <span class="hljs-number">10</span>, <span class="hljs-string">&quot;b&quot;</span> -&gt; <span class="hljs-number">20</span>, <span class="hljs-string">&quot;c&quot;</span> -&gt; <span class="hljs-number">30</span>) <span class="hljs-comment">// add and will override</span><br><span class="hljs-function"><span class="hljs-title">println</span><span class="hljs-params">(map)</span></span><br></code></pre></td></tr></table></figure><p>元组：</p><ul><li><code>(elem1, elem2, ...)</code> 类型可以不同。</li><li>最多只能22个元素，从<code>Tuple1</code>定义到了<code>Tuple22</code>。</li><li>使用<code>_1 _2 _3 ...</code>访问。</li><li>也可以使用<code>productElement(index)</code>访问，下标从0开始。</li><li><code>-&gt;</code>创建二元组。</li><li>遍历：<code>for(elem &lt;- tuple.productIterator)</code></li><li>可以嵌套，元组的元素也可以是元组。</li></ul><p>集合通用属性和方法：</p><ul><li>线性序列才有长度<code>length</code>、所有集合类型都有大小<code>size</code>。</li><li>遍历<code>for (elem &lt;- collection)</code>、迭代器<code>for (elem &lt;- collection.iterator)</code>。</li><li>生成字符串<code>toString</code> <code>mkString</code>，像<code>Array</code>这种是隐式转换为scala集合的，<code>toString</code>是继承自<code>java.lang.Object</code>的，需要自行处理。</li><li>是否包含元素<code>contains</code>。</li></ul><p>衍生集合的方式：</p><ul><li>获取集合的头元素<code>head</code>（元素）和剩下的尾<code>tail</code>（集合）。</li><li>集合最后一个元素<code>last</code>（元素）和除去最后一个元素的初始数据<code>init</code>（集合）。</li><li>反转<code>reverse</code>。</li><li>取前后n个元素<code>take(n) takeRight(n)</code></li><li>去掉前后n个元素<code>drop(n) dropRight(n)</code></li><li>交集<code>intersect</code></li><li>并集<code>union</code>，线性序列的话已废弃用<code>concat</code>连接。</li><li>差集<code>diff</code>，得到属于自己、不属于传入参数的部分。</li><li>拉链<code>zip</code>，得到两个集合对应位置元素组合起来构成二元组的集合，大小不匹配会丢掉其中一个集合不匹配的多余部分。</li><li>滑窗<code>sliding(n, step = 1)</code>，框住特定个数元素，方便移动和操作。得到迭代器，可以用来遍历，每个迭代的元素都是一个n个元素集合。步长大于1的话最后一个窗口元素数量可能个数会少一些。</li></ul><p>集合的简单计算操作：</p><ul><li>求和<code>sum</code> 求乘积<code>product</code> 最小值<code>min</code> 最大值<code>max</code></li><li><code>maxBy(func)</code>支持传入一个函数获取元素并返回比较依据的值，比如元组默认就只会判断第一个元素，要根据第二个元素判断就返回第二个元素就行<code>xxx.maxBy(_._2)</code>。</li><li>排序<code>sorted</code>，默认从小到大排序。从大到小排序<code>sorted(Ordering[Int].reverse)</code>。</li><li>按元素排序<code>sortBy(func)</code>，指定要用来做排序的字段。也可以再传一个隐式参数逆序<code>sortBy(func)(Ordering[Int].reverse)</code></li><li>自定义比较器<code>sortWith(cmp)</code>，比如按元素升序排列<code>sortWith((a, b) =&gt; a &lt; b)</code>或者<code>sortWith(_ &lt; _)</code>，按元组元素第二个元素升序<code>sortWith(_._2 &gt; _._2)</code>。</li><li>例子：</li></ul><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs processing">object Calculations &#123;<br>    def <span class="hljs-title function_">main</span>(args: <span class="hljs-built_in">Array</span>[<span class="hljs-built_in">String</span>]): Unit = &#123;<br>        <span class="hljs-comment">// calculations of collections</span><br>        val list = <span class="hljs-title function_">List</span>(<span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">10</span>)<br>        <br>        <span class="hljs-comment">// sum</span><br>        var sum = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">for</span> (elem &lt;- list) sum += elem<br>        <span class="hljs-built_in">println</span>(sum)<br>        <br>        <span class="hljs-built_in">println</span>(list.<span class="hljs-property">sum</span>)<br>        <span class="hljs-built_in">println</span>(list.<span class="hljs-property">product</span>)<br>        <span class="hljs-built_in">println</span>(list.<span class="hljs-property">min</span>)<br>        <span class="hljs-built_in">println</span>(list.<span class="hljs-property">max</span>)<br><br>        val list2 = <span class="hljs-title function_">List</span>((<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-number">1</span>), (<span class="hljs-string">&#x27;b&#x27;</span>, <span class="hljs-number">2</span>), (<span class="hljs-string">&#x27;d&#x27;</span>, <span class="hljs-number">-3</span>))<br>        <span class="hljs-built_in">println</span>(list2.<span class="hljs-property">maxBy</span>((tuple: (Char, Int)) =&gt; tuple._2))<br>        <span class="hljs-built_in">println</span>(list2.<span class="hljs-property">minBy</span>(_._2))<br><br>        <span class="hljs-comment">// sort, default is ascending</span><br>        val sortedList = list.<span class="hljs-property">sorted</span><br>        <span class="hljs-built_in">println</span>(sortedList)<br>        <span class="hljs-comment">// descending</span><br>        <span class="hljs-built_in">println</span>(list.<span class="hljs-property">sorted</span>(Ordering[Int].<span class="hljs-property">reverse</span>))<br><br>        <span class="hljs-comment">// sortBy</span><br>        <span class="hljs-built_in">println</span>(list2.<span class="hljs-property">sortBy</span>(_._2))<br><br>        <span class="hljs-comment">// sortWith</span><br>        <span class="hljs-built_in">println</span>(list.<span class="hljs-property">sortWith</span>((a, b) =&gt; a &lt; b))<br>        <span class="hljs-built_in">println</span>(list2.<span class="hljs-property">sortWith</span>(_._2 &gt; _._2))<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>简单操作还是太少了，不足以应对复杂的需求。</li></ul><p>集合高级计算函数：</p><ul><li>大数据的处理核心就是映射（map）和规约（reduce）。</li><li>映射操作（广义上的map）：<ul><li>过滤：自定义过滤条件，<code>filter(Elem =&gt; Boolean)</code></li><li>转化&#x2F;映射（狭义上的map）：自定义映射函数，<code>map(Elem =&gt; NewElem)</code></li><li>扁平化（flatten）：将集合中集合元素拆开，去掉里层集合，放到外层中来。<code>flatten</code></li><li>扁平化+映射：先映射，再扁平化，<code>flatMap(Elem =&gt; NewElem)</code></li><li>分组（group）：指定分组规则，<code>groupBy(Elem =&gt; Key)</code>得到一个Map，key根据传入的函数运用于集合元素得到，value是对应元素的序列。</li></ul></li><li>规约操作（广义的reduce）：<ul><li>简化&#x2F;规约（狭义的reduce）：对所有数据做一个处理，规约得到一个结果（比如连加连乘操作）。<code>reduce((CurRes, NextElem) =&gt; NextRes)</code>，传入函数有两个参数，第一个参数是第一个元素（第一次运算）和上一轮结果（后面的计算），第二个是当前元素，得到本轮结果，最后一轮的结果就是最终结果。<code>reduce</code>调用<code>reduceLeft</code>从左往右，也可以<code>reduceRight</code>从右往左（实际上是递归调用，和一般意义上的从右往左有区别，看下面例子）。</li><li>折叠（fold）：<code>fold(InitialVal)((CurRes, Elem) =&gt; NextRes)</code>相对于<code>reduce</code>来说其实就是<code>fold</code>自己给初值，从第一个开始计算，<code>reduce</code>用第一个做初值，从第二个元素开始算。<code>fold</code>调用<code>foldLeft</code>，从右往左则用<code>foldRight</code>（翻转之后再<code>foldLeft</code>）。具体逻辑还得还源码。从右往左都有点绕和难以理解，如果要使用需要特别注意。</li></ul></li><li>以上：</li></ul><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs processing">object HighLevelCalculations &#123;<br>    def <span class="hljs-title function_">main</span>(args: <span class="hljs-built_in">Array</span>[<span class="hljs-built_in">String</span>]): Unit = &#123;<br>        val list = <span class="hljs-title function_">List</span>(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>, <span class="hljs-number">100</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">111</span>)<br>        <br>        <span class="hljs-comment">// 1. map functions</span><br>        <span class="hljs-comment">// filter</span><br>        val evenList = list.<span class="hljs-property">filter</span>(_ % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>)<br>        <span class="hljs-built_in">println</span>(evenList)<br><br>        <span class="hljs-comment">// map</span><br>        <span class="hljs-built_in">println</span>(list.<span class="hljs-property">map</span>(_ * <span class="hljs-number">2</span>))<br>        <span class="hljs-built_in">println</span>(list.<span class="hljs-property">map</span>(x =&gt; x * x))<br><br>        <span class="hljs-comment">// flatten</span><br>        val nestedList: List[List[Int]] = <span class="hljs-title function_">List</span>(<span class="hljs-title function_">List</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>), <span class="hljs-title function_">List</span>(<span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>), <span class="hljs-title function_">List</span>(<span class="hljs-number">10</span>, <span class="hljs-number">100</span>))<br>        val flatList = <span class="hljs-title function_">nestedList</span>(<span class="hljs-number">0</span>) ::: <span class="hljs-title function_">nestedList</span>(<span class="hljs-number">1</span>) ::: <span class="hljs-title function_">nestedList</span>(<span class="hljs-number">2</span>)<br>        <span class="hljs-built_in">println</span>(flatList)<br><br>        val flatList2 = nestedList.<span class="hljs-property">flatten</span><br>        <span class="hljs-built_in">println</span>(flatList2) <span class="hljs-comment">// equals to flatList</span><br><br>        <span class="hljs-comment">// map and flatten</span><br>        <span class="hljs-comment">// example: change a string list into a word list</span><br>        val strings: List[<span class="hljs-built_in">String</span>] = <span class="hljs-title function_">List</span>(<span class="hljs-string">&quot;hello world&quot;</span>, <span class="hljs-string">&quot;hello scala&quot;</span>, <span class="hljs-string">&quot;yes no&quot;</span>)<br>        val splitList: List[<span class="hljs-built_in">Array</span>[<span class="hljs-built_in">String</span>]] = strings.<span class="hljs-property">map</span>(_.<span class="hljs-property">split</span>(<span class="hljs-string">&quot; &quot;</span>)) <span class="hljs-comment">// divide string to words</span><br>        val flattenList = splitList.<span class="hljs-property">flatten</span><br>        <span class="hljs-built_in">println</span>(flattenList)<br><br>        <span class="hljs-comment">// merge two steps above into one</span><br>        <span class="hljs-comment">// first map then flatten</span><br>        val flatMapList = strings.<span class="hljs-property">flatMap</span>(_.<span class="hljs-property">split</span>(<span class="hljs-string">&quot; &quot;</span>))<br>        <span class="hljs-built_in">println</span>(flatMapList)<br><br>        <span class="hljs-comment">// divide elements into groups</span><br>        val groupMap = list.<span class="hljs-property">groupBy</span>(_ % <span class="hljs-number">2</span>) <span class="hljs-comment">// keys: 0 &amp; 1</span><br>        val groupMap2 = list.<span class="hljs-property">groupBy</span>(data =&gt; <span class="hljs-keyword">if</span> (data % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>) <span class="hljs-string">&quot;even&quot;</span> <span class="hljs-keyword">else</span> <span class="hljs-string">&quot;odd&quot;</span>) <span class="hljs-comment">// keys : &quot;even&quot; &amp; &quot;odd&quot;</span><br>        <span class="hljs-built_in">println</span>(groupMap)<br>        <span class="hljs-built_in">println</span>(groupMap2)<br><br>        val worldList = <span class="hljs-title function_">List</span>(<span class="hljs-string">&quot;China&quot;</span>, <span class="hljs-string">&quot;America&quot;</span>, <span class="hljs-string">&quot;Alice&quot;</span>, <span class="hljs-string">&quot;Curry&quot;</span>, <span class="hljs-string">&quot;Bob&quot;</span>, <span class="hljs-string">&quot;Japan&quot;</span>)<br>        <span class="hljs-built_in">println</span>(worldList.<span class="hljs-property">groupBy</span>(_.<span class="hljs-property">charAt</span>(<span class="hljs-number">0</span>)))<br><br>        <span class="hljs-comment">// 2. reduce functions</span><br>        <span class="hljs-comment">// narrowly reduce</span><br>        <span class="hljs-built_in">println</span>(<span class="hljs-title function_">List</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>).<span class="hljs-property">reduce</span>(_ + _)) <span class="hljs-comment">// 1+2+3+4 = 10</span><br>        <span class="hljs-built_in">println</span>(<span class="hljs-title function_">List</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>).<span class="hljs-property">reduceLeft</span>(_ - _)) <span class="hljs-comment">// 1-2-3-4 = -8</span><br>        <span class="hljs-built_in">println</span>(<span class="hljs-title function_">List</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>).<span class="hljs-property">reduceRight</span>(_ - _)) <span class="hljs-comment">// 1-(2-(3-4)) = -2, a little confusing</span><br><br>        <span class="hljs-comment">// fold</span><br>        <span class="hljs-built_in">println</span>(<span class="hljs-title function_">List</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>).<span class="hljs-property">fold</span>(<span class="hljs-number">0</span>)(_ + _)) <span class="hljs-comment">// 0+1+2+3+4 = 10</span><br>        <span class="hljs-built_in">println</span>(<span class="hljs-title function_">List</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>).<span class="hljs-property">fold</span>(<span class="hljs-number">10</span>)(_ + _)) <span class="hljs-comment">// 10+1+2+3+4 = 20</span><br>        <span class="hljs-built_in">println</span>(<span class="hljs-title function_">List</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>).<span class="hljs-property">foldRight</span>(<span class="hljs-number">10</span>)(_ - _)) <span class="hljs-comment">// 1-(2-(3-(4-10))) = 8, a little confusing</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>集合应用案例：</p><ul><li>Map的默认合并操作是用后面的同key元素覆盖前面的，如果要定制为累加他们的值可以用<code>fold</code>。</li></ul><figure class="highlight xl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs xl"><span class="hljs-comment">// merging two Map will override the value of the same key</span><br><span class="hljs-comment">// custom the merging process instead of just override</span><br><span class="hljs-function"><span class="hljs-title">val</span> map1 = Map(&quot;a&quot; -&gt;</span> <span class="hljs-number">1</span>, <span class="hljs-string">&quot;b&quot;</span> -&gt; <span class="hljs-number">3</span>, <span class="hljs-string">&quot;c&quot;</span> -&gt; <span class="hljs-number">4</span>)<br><span class="hljs-function"><span class="hljs-title">val</span> map2 = mutable.Map(&quot;a&quot; -&gt;</span> <span class="hljs-number">6</span>, <span class="hljs-string">&quot;b&quot;</span> -&gt; <span class="hljs-number">2</span>, <span class="hljs-string">&quot;c&quot;</span> -&gt; <span class="hljs-number">5</span>, <span class="hljs-string">&quot;d&quot;</span> -&gt; <span class="hljs-number">10</span>)<br>val map3 = map1.foldLeft(map2)(<br>    (mergedMap, kv) =&gt; &#123;<br>        mergedMap(kv._1) = mergedMap.getOrElse(kv._1, <span class="hljs-number">0</span>) + kv._2<br>        mergedMap<br>    &#125;<br>)<br><span class="hljs-function"><span class="hljs-title">println</span>(map3) // HashMap(a -&gt;</span> <span class="hljs-number">7</span>, <span class="hljs-function"><span class="hljs-title">b</span> -&gt;</span> <span class="hljs-number">5</span>, <span class="hljs-function"><span class="hljs-title">c</span> -&gt;</span> <span class="hljs-number">9</span>, <span class="hljs-function"><span class="hljs-title">d</span> -&gt;</span> <span class="hljs-number">10</span>)<br></code></pre></td></tr></table></figure><ul><li>经典案例：单词计数：分词，计数，取排名前三结果。</li></ul><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs haxe"><span class="hljs-comment">// count words in string list, and get 3 highest frequency words</span><br>def wordCount(): <span class="hljs-type">Unit </span>= &#123;<br>    val stringList: <span class="hljs-type">List</span>[<span class="hljs-keyword">String</span>] = List(<br>        <span class="hljs-string">&quot;hello&quot;</span>,<br>        <span class="hljs-string">&quot;hello world&quot;</span>,<br>        <span class="hljs-string">&quot;hello scala&quot;</span>,<br>        <span class="hljs-string">&quot;hello spark from scala&quot;</span>,<br>        <span class="hljs-string">&quot;hello flink from scala&quot;</span><br>    )<br><br>    <span class="hljs-comment">// 1. split</span><br>    val wordList: <span class="hljs-type">List</span>[<span class="hljs-keyword">String</span>] = stringList.flatMap(<span class="hljs-literal">_</span>.split(<span class="hljs-string">&quot; &quot;</span>))<br>    println(wordList)<br><br>    <span class="hljs-comment">// 2. group same words</span><br>    val groupMap: <span class="hljs-type">Map</span>[<span class="hljs-keyword">String</span>, List[<span class="hljs-keyword">String</span>]] = wordList.groupBy(word =&gt; word)<br>    println(groupMap)<br><br>    <span class="hljs-comment">// 3. get length of the every word, to (word, length)</span><br>    val countMap: <span class="hljs-type">Map</span>[<span class="hljs-keyword">String</span>, <span class="hljs-keyword">Int</span>] = groupMap.map(kv =&gt; (kv<span class="hljs-number">._1</span>, kv<span class="hljs-number">._2</span>.length))<br><br>    <span class="hljs-comment">// 4. convert map to list, sort and take first 3</span><br>    val countList: <span class="hljs-type">List</span>[(<span class="hljs-keyword">String</span>, <span class="hljs-keyword">Int</span>)] = countMap.toList<br>        .sortWith(<span class="hljs-literal">_</span><span class="hljs-number">._2</span> &gt; <span class="hljs-literal">_</span><span class="hljs-number">._2</span>)<br>        .take(<span class="hljs-number">3</span>)<br><br>    println(countList) <span class="hljs-comment">// result</span><br>&#125;<br></code></pre></td></tr></table></figure><ul><li>单词计数案例扩展，每个字符串都可能出现多次并且已经统计好出现次数，解决方式，先按次数合并之后再按照上述例子处理。</li></ul><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs arcade"><span class="hljs-comment">// strings has their frequency</span><br>def wordCountAdvanced(): Unit = &#123;<br>    val tupleList: List[(String, Int)] = List(<br>        (<span class="hljs-string">&quot;hello&quot;</span>, <span class="hljs-number">1</span>),<br>        (<span class="hljs-string">&quot;hello world&quot;</span>, <span class="hljs-number">2</span>),<br>        (<span class="hljs-string">&quot;hello scala&quot;</span>, <span class="hljs-number">3</span>),<br>        (<span class="hljs-string">&quot;hello spark from scala&quot;</span>, <span class="hljs-number">1</span>),<br>        (<span class="hljs-string">&quot;hello flink from scala&quot;</span>, <span class="hljs-number">2</span>)<br>    )<br><br>    val newStringList: List[String] = tupleList.<span class="hljs-built_in">map</span>(<br>        <span class="hljs-function"><span class="hljs-params">kv</span> =&gt;</span> (kv._1.<span class="hljs-built_in">trim</span> + <span class="hljs-string">&quot; &quot;</span>) * kv._2<br>    )<br><br>    <span class="hljs-comment">// just like wordCount</span><br>    val wordCountList: List[(String, Int)] = newStringList<br>        .flatMap(_.<span class="hljs-built_in">split</span>(<span class="hljs-string">&quot; &quot;</span>))<br>        .<span class="hljs-built_in">groupBy</span>(<span class="hljs-function"><span class="hljs-params">word</span> =&gt;</span> word)<br>        .<span class="hljs-built_in">map</span>(<span class="hljs-function"><span class="hljs-params">kv</span> =&gt;</span> (kv._1, kv._2.<span class="hljs-built_in">length</span>))<br>        .toList<br>        .sortWith(_._2 &gt; _._2)<br>        .take(<span class="hljs-number">3</span>)<br><br>    println(wordCountList) <span class="hljs-comment">// result</span><br>&#125;<br></code></pre></td></tr></table></figure><ul><li>当然这并不高效，更好的方式是利用上已经统计的频率信息。</li></ul><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs arcade">def wordCountAdvanced2(): Unit = &#123;<br>    val tupleList: List[(String, Int)] = List(<br>        (<span class="hljs-string">&quot;hello&quot;</span>, <span class="hljs-number">1</span>),<br>        (<span class="hljs-string">&quot;hello world&quot;</span>, <span class="hljs-number">2</span>),<br>        (<span class="hljs-string">&quot;hello scala&quot;</span>, <span class="hljs-number">3</span>),<br>        (<span class="hljs-string">&quot;hello spark from scala&quot;</span>, <span class="hljs-number">1</span>),<br>        (<span class="hljs-string">&quot;hello flink from scala&quot;</span>, <span class="hljs-number">2</span>)<br>    )<br><br>    <span class="hljs-comment">// first split based on the input frequency</span><br>    val preCountList: List[(String, Int)] = tupleList.flatMap(<br>        <span class="hljs-function"><span class="hljs-params">tuple</span> =&gt;</span> &#123;<br>            val strings: <span class="hljs-built_in">Array</span>[String] = tuple._1.<span class="hljs-built_in">split</span>(<span class="hljs-string">&quot; &quot;</span>)<br>            strings.<span class="hljs-built_in">map</span>(<span class="hljs-function"><span class="hljs-params">word</span> =&gt;</span> (word, tuple._2)) <span class="hljs-comment">// Array[(String, Int)]</span><br>        &#125;<br>    )<br><br>    <span class="hljs-comment">// group as words</span><br>    val groupedMap: <span class="hljs-built_in">Map</span>[String, List[(String, Int)]] = preCountList.<span class="hljs-built_in">groupBy</span>(_._1)<br>    println(groupedMap)<br><br>    <span class="hljs-comment">// count frequency of all words</span><br>    val countMap: <span class="hljs-built_in">Map</span>[String, Int] = groupedMap.<span class="hljs-built_in">map</span>(<br>        <span class="hljs-function"><span class="hljs-params">kv</span> =&gt;</span> (kv._1, kv._2.<span class="hljs-built_in">map</span>(_._2).<span class="hljs-built_in">sum</span>)<br>    )<br>    println(countMap)<br><br>    <span class="hljs-comment">// to list, sort and take first 3 words</span><br>    val countList = countMap.toList.sortWith(_._2 &gt; _._2).take(<span class="hljs-number">3</span>)<br>    println(countList)<br>&#125;<br></code></pre></td></tr></table></figure><p>队列：</p><ul><li>可变队列<code>mutable.Queue</code></li><li>入队<code>enqueue(Elem*)</code> 出队<code>Elem = dequeue()</code></li><li>不可变队列<code>immutable.Queue</code>，使用伴生对象创建，出队入队返回新队列。</li></ul><p>并行集合（Parllel Collection）：</p><ul><li>使用并行集合执行时会调用多个线程加速执行。</li><li>使用集合类前加一个<code>.par</code>方法。</li><li>具体细节待补。</li><li>依赖<code>scala.collection.parallel.immutable/mutable</code>，2.13版本后不再在标准库中提供，需要单独下载，暂未找到编好的jar的下载地址，从源码构造需要sbt，TODO。</li></ul><h2 id="模式匹配"><a href="#模式匹配" class="headerlink" title="模式匹配"></a>模式匹配</h2><p><code>match-case</code>中的模式匹配：</p><ul><li>用于替代传统C&#x2F;C++&#x2F;Java的<code>switch-case</code>结构，但补充了更多功能，拥有更强的能力。</li><li>语法：（Java中现在也支持<code>=&gt;</code>的写法了）</li></ul><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs coq">value <span class="hljs-keyword">match</span> &#123;<br>    <span class="hljs-built_in">case</span> caseVal1 =&gt; returnVal1<br>    <span class="hljs-built_in">case</span> caseVal2 =&gt; returnVal2<br>    ...<br>    <span class="hljs-built_in">case</span> <span class="hljs-keyword">_</span> =&gt; defaultVal<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>每一个case条件成立才返回，否则继续往下走。</li><li><code>case</code>匹配中可以添加模式守卫，用条件判断来代替精确匹配。</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs dart">def abs(<span class="hljs-built_in">num</span>: Int): Int= &#123;<br>    <span class="hljs-built_in">num</span> match &#123;<br>        <span class="hljs-keyword">case</span> i <span class="hljs-keyword">if</span> i &gt;= <span class="hljs-number">0</span> =&gt; i<br>        <span class="hljs-keyword">case</span> i <span class="hljs-keyword">if</span> i &lt; <span class="hljs-number">0</span> =&gt; -i<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>模式匹配支持类型：所有类型字面量，包括字符串、字符、数字、布尔值、甚至数组列表等。</li><li>你甚至可以传入<code>Any</code>类型变量，匹配不同类型常量。</li><li>需要注意默认情况处理，<code>case _</code>也需要返回值，如果没有但是又没有匹配到，就抛出运行时错误。默认情况<code>case _</code>不强制要求通配符（只是在不需要变量的值建议这么做），也可以用<code>case abc</code>一个变量来接住，可以什么都不做，可以使用它的值。</li><li>通过指定匹配变量的类型（用特定类型变量接住），可以匹配类型而不匹配值，也可以混用。</li><li>需要注意类型匹配时由于泛型擦除，可能并不能严格匹配泛型的类型参数，编译器也会报警告。但<code>Array</code>是基本数据类型，对应于java的原生数组类型，能够匹配泛型类型参数。</li></ul><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-comment">// match type</span><br><span class="hljs-keyword">def</span> describeType(x: <span class="hljs-keyword">Any</span>) = x match &#123;<br>    <span class="hljs-keyword">case</span> i: <span class="hljs-keyword">Int</span> =&gt; <span class="hljs-string">&quot;Int &quot;</span> + i<br>    <span class="hljs-keyword">case</span> s: String =&gt; <span class="hljs-string">&quot;String &quot;</span> + s<br>    <span class="hljs-keyword">case</span> list: List[String] =&gt; <span class="hljs-string">&quot;List &quot;</span> + list<br>    <span class="hljs-keyword">case</span> array: Array[<span class="hljs-keyword">Int</span>] =&gt; <span class="hljs-string">&quot;Array[Int] &quot;</span> + array<br>    <span class="hljs-keyword">case</span> a =&gt; <span class="hljs-string">&quot;Something else &quot;</span> + a <br>&#125;<br><span class="hljs-keyword">println</span>(describeType(<span class="hljs-number">20</span>)) <span class="hljs-comment">// match</span><br><span class="hljs-keyword">println</span>(describeType(<span class="hljs-string">&quot;hello&quot;</span>)) <span class="hljs-comment">// match</span><br><span class="hljs-keyword">println</span>(describeType(List(<span class="hljs-string">&quot;hi&quot;</span>, <span class="hljs-string">&quot;hello&quot;</span>))) <span class="hljs-comment">// match</span><br><span class="hljs-keyword">println</span>(describeType(List(<span class="hljs-number">20</span>, <span class="hljs-number">30</span>))) <span class="hljs-comment">// match</span><br><span class="hljs-keyword">println</span>(describeType(Array(<span class="hljs-number">10</span>, <span class="hljs-number">20</span>))) <span class="hljs-comment">// match</span><br><span class="hljs-keyword">println</span>(describeType(Array(<span class="hljs-string">&quot;hello&quot;</span>, <span class="hljs-string">&quot;yes&quot;</span>))) <span class="hljs-comment">// not match</span><br><span class="hljs-keyword">println</span>(describeType((<span class="hljs-number">10</span>, <span class="hljs-number">20</span>))) <span class="hljs-comment">// not match</span><br></code></pre></td></tr></table></figure><ul><li>对于数组可以定义多种匹配形式，可以定义模糊的元素类型匹配、元素数量匹配或者精确的某个数组元素值匹配，非常强大。</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">for</span> (arr &lt;- <span class="hljs-built_in">List</span>(<br>    Array(<span class="hljs-number">0</span>),<br>    Array(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>),<br>    Array(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>),<br>    Array(<span class="hljs-number">10</span>, <span class="hljs-number">2</span>, <span class="hljs-number">7</span>, <span class="hljs-number">5</span>),<br>    Array(<span class="hljs-string">&quot;hello&quot;</span>, <span class="hljs-number">20</span>, <span class="hljs-number">50</span>)<br>)) &#123;<br>    val result = arr match &#123;<br>        <span class="hljs-keyword">case</span> Array(<span class="hljs-number">0</span>) =&gt; <span class="hljs-string">&quot;0&quot;</span><br>        <span class="hljs-keyword">case</span> Array(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>) =&gt; <span class="hljs-string">&quot;Array(1, 0)&quot;</span><br>        <span class="hljs-keyword">case</span> Array(x: Int, y: Int) =&gt; s<span class="hljs-string">&quot;Array(<span class="hljs-subst">$x</span>, <span class="hljs-subst">$y</span>)&quot;</span> <span class="hljs-comment">// Array of two elements</span><br>        <span class="hljs-keyword">case</span> Array(<span class="hljs-number">0</span>, _*) =&gt; s<span class="hljs-string">&quot;an array begin with 0&quot;</span><br>        <span class="hljs-keyword">case</span> Array(x, <span class="hljs-number">1</span>, z) =&gt; s<span class="hljs-string">&quot;an array with three elements, no.2 is 1&quot;</span><br>        <span class="hljs-keyword">case</span> Array(x:<span class="hljs-built_in">String</span>, _*) =&gt; s<span class="hljs-string">&quot;array that first element is a string&quot;</span><br>        <span class="hljs-keyword">case</span> _ =&gt; <span class="hljs-string">&quot;somthing else&quot;</span><br>    &#125;<br>    println(result)<br></code></pre></td></tr></table></figure><ul><li>List匹配和Array差不多，也很灵活。还可用用集合类灵活的运算符来匹配。<ul><li>比如使用<code>::</code>运算符匹配<code>first :: second :: rest</code>，将一个列表拆成三份，第一个第二个元素和剩余元素构成的列表。</li></ul></li><li>注意模式匹配不仅可以通过返回值当做表达式来用，也可以仅执行语句类似于传统<code>switch-case</code>语句不关心返回值，也可以既执行语句同时也返回。</li><li>元组匹配：<ul><li>可以匹配n元组、匹配元素类型、匹配元素值。如果只关心某个元素，其他就可以用通配符或变量。</li><li>元组大小固定，所以不能用<code>_*</code>。</li></ul></li></ul><p>变量声明匹配：</p><ul><li>变量声明也可以是一个模式匹配的过程。</li><li>元组常用于批量赋值。</li><li><code>val (x, y) = (10, &quot;hello&quot;)</code></li><li><code>val List(first, second, _*) = List(1, 3, 4, 5)</code></li><li><code>val List(first :: second :: rest) = List(1, 2, 3, 4)</code></li></ul><p><code>for</code>推导式中也可以进行模式匹配：</p><ul><li>元组中取元素时，必须用<code>_1 _2 ...</code>，可以用元组赋值将元素赋给变量，更清晰一些。</li><li><code>for ((first, second) &lt;- tupleList)</code></li><li><code>for ((first, _) &lt;- tupleList)</code></li><li>指定特定元素的值，可以实现类似于循环守卫的功能，相当于加一层筛选。比如<code>for ((10, second) &lt;- tupleList)</code></li><li>其他匹配也同样可以用，可以关注数量、值、类型等，相当于做了筛选。</li><li>元组列表匹配、赋值匹配、<code>for</code>循环中匹配非常灵活，灵活运用可以提高代码可读性。</li></ul><p>匹配对象：</p><ul><li>对象内容匹配。</li><li>直接<code>match-case</code>中匹配对应引用变量的话语法是有问题的。编译报错信息提示：不是样例类也没有一个合法的<code>unapply/unapplySeq</code>成员实现。</li><li>要匹配对象，需要实现伴生对象<code>unapply</code>方法，用来对对象属性进行拆解以做匹配。</li></ul><p>样例类：</p><ul><li>第二种实现对象匹配的方式是样例类。</li><li><code>case class className</code>定义样例类，会直接将打包<code>apply</code>和拆包<code>unapply</code>的方法直接定义好。</li><li>样例类定义中主构造参数列表中的<code>val</code>甚至都可以省略，如果是<code>var</code>的话则不能省略，最好加上的感觉，奇奇怪怪的各种边角简化。</li></ul><p>对象匹配和样例类例子：</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">object</span> MatchObject &#123;<br>    def main(args: <span class="hljs-keyword">Array</span>[String]): Unit = &#123;<br>        val person = <span class="hljs-built_in">new</span> Person(&quot;Alice&quot;, <span class="hljs-number">18</span>)<br><br>        val result: String = person match &#123;<br>            <span class="hljs-keyword">case</span> Person(&quot;Alice&quot;, <span class="hljs-number">18</span>) =&gt; &quot;Person: Alice, 18&quot;<br>            <span class="hljs-keyword">case</span> _ =&gt; &quot;something else&quot;<br>        &#125;<br>        println(result)<br><br>        val s = Student(&quot;Alice&quot;, <span class="hljs-number">18</span>)<br>        val result2: String = s match &#123;<br>            <span class="hljs-keyword">case</span> Student(&quot;Alice&quot;, <span class="hljs-number">18</span>) =&gt; &quot;Student: Alice, 18&quot;<br>            <span class="hljs-keyword">case</span> _ =&gt; &quot;something else&quot;<br>        &#125;<br>        println(result2)<br>    &#125;<br>&#125;<br><br><br><span class="hljs-keyword">class</span> Person(val <span class="hljs-type">name</span>: String, val age: <span class="hljs-type">Int</span>)<br><span class="hljs-keyword">object</span> Person &#123;<br>    def apply(<span class="hljs-type">name</span>: String, age: <span class="hljs-type">Int</span>) = <span class="hljs-built_in">new</span> Person(<span class="hljs-type">name</span>, age)<br>    def unapply(person: Person): <span class="hljs-keyword">Option</span>[(String, <span class="hljs-type">Int</span>)] = &#123;<br>        <span class="hljs-keyword">if</span> (person == <span class="hljs-keyword">null</span>) &#123; // avoid <span class="hljs-keyword">null</span> reference<br>            <span class="hljs-keyword">None</span><br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">Some</span>((person.name, person.age))<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">case</span> <span class="hljs-keyword">class</span> Student(<span class="hljs-type">name</span>: String, age: <span class="hljs-type">Int</span>) // <span class="hljs-type">name</span> <span class="hljs-keyword">and</span> age are vals<br></code></pre></td></tr></table></figure><p>偏函数：</p><ul><li>偏函数是函数的一种，通过偏函数我们可以方便地对参数做更精确的检查，例如偏函数输入类型是<code>List[Int]</code>，需要第一个元素是0的集合，也可以通过模式匹配实现的。</li><li>定义：</li></ul><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">val partialFuncName: PartialFunction[List[<span class="hljs-type">Int</span>], <span class="hljs-keyword">Option</span>[<span class="hljs-type">Int</span>]] = &#123;<br>    <span class="hljs-keyword">case</span> x :: y :: _ =&gt; <span class="hljs-keyword">Some</span>(y)<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>通过一个变量定义方式定义，<code>PartialFunction</code>的泛型类型中，前者是参数类型，后者是返回值类型。函数体中用一个<code>case</code>语句来进行模式匹配。上面例子返回输入的<code>List</code>集合中的第二个元素。</li><li>一般一个偏函数只能处理输入的一部分场景，实际中往往需要定义多个偏函数用以组合使用。</li><li>例子：</li></ul><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs gradle">object PartialFunctionTest &#123;<br>    <span class="hljs-keyword">def</span> main(args: Array[String]): Unit = &#123;<br>        val list: List[(String, <span class="hljs-keyword">Int</span>)] = List((<span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-number">12</span>), (<span class="hljs-string">&quot;b&quot;</span>, <span class="hljs-number">10</span>), (<span class="hljs-string">&quot;c&quot;</span>, <span class="hljs-number">100</span>), (<span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-number">5</span>))<br><br>        <span class="hljs-comment">// keep first constant and double second value of the tuple</span><br>        <span class="hljs-comment">// 1. use map</span><br>        val newList = list.map(tuple =&gt; (tuple._1, tuple._2 * <span class="hljs-number">2</span>))<br>        <span class="hljs-keyword">println</span>(newList)<br><br>        <span class="hljs-comment">// 2. pattern matching</span><br>        val newList1 = list.map(<br>            tuple =&gt; &#123;<br>                tuple match &#123;<br>                    <span class="hljs-keyword">case</span> (x, y) =&gt; (x, y * <span class="hljs-number">2</span>)<br>                &#125;<br>            &#125;<br>        )<br>        <span class="hljs-keyword">println</span>(newList1)<br><br>        <span class="hljs-comment">// simplify to partial function</span><br>        val newList2 = list.map &#123;<br>            <span class="hljs-keyword">case</span> (x, y) =&gt; (x, y * <span class="hljs-number">2</span>) <span class="hljs-comment">// this is a partial function</span><br>        &#125;<br>        <span class="hljs-keyword">println</span>(newList2)<br><br>        <span class="hljs-comment">// application of partial function</span><br>        <span class="hljs-comment">// get absolute value, deal with: negative, 0, positive</span><br>        val positiveAbs: PartialFunction[<span class="hljs-keyword">Int</span>, <span class="hljs-keyword">Int</span>] = &#123;<br>            <span class="hljs-keyword">case</span> x <span class="hljs-keyword">if</span> x &gt; <span class="hljs-number">0</span> =&gt; x<br>        &#125;<br>        val negativeAbs: PartialFunction[<span class="hljs-keyword">Int</span>, <span class="hljs-keyword">Int</span>] = &#123;<br>            <span class="hljs-keyword">case</span> x <span class="hljs-keyword">if</span> x &lt; <span class="hljs-number">0</span> =&gt; -x<br>        &#125;<br>        val zeroAbs: PartialFunction[<span class="hljs-keyword">Int</span>, <span class="hljs-keyword">Int</span>] = &#123;<br>            <span class="hljs-keyword">case</span> <span class="hljs-number">0</span> =&gt; <span class="hljs-number">0</span><br>        &#125;<br><br>        <span class="hljs-comment">// combine a function with three partial functions</span><br>        <span class="hljs-keyword">def</span> <span class="hljs-keyword">abs</span>(x: <span class="hljs-keyword">Int</span>): <span class="hljs-keyword">Int</span> = (positiveAbs orElse negativeAbs orElse zeroAbs) (x)<br>        <span class="hljs-keyword">println</span>(<span class="hljs-keyword">abs</span>(-<span class="hljs-number">13</span>))<br>        <span class="hljs-keyword">println</span>(<span class="hljs-keyword">abs</span>(<span class="hljs-number">30</span>))<br>        <span class="hljs-keyword">println</span>(<span class="hljs-keyword">abs</span>(<span class="hljs-number">0</span>))<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h2><p>scala异常处理整体上的语法和底层处理细节和java非常类似。</p><p>Java异常处理：</p><ul><li>用<code>try</code>语句包围要捕获异常的块，多个不同<code>catch</code>块用于捕获不同的异常，<code>finally</code>块中是捕获异常与否都会执行的逻辑。</li></ul><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs abnf">try &#123;<br>    int a <span class="hljs-operator">=</span> <span class="hljs-number">0</span><span class="hljs-comment">;</span><br>    int b <span class="hljs-operator">=</span> <span class="hljs-number">0</span><span class="hljs-comment">;</span><br>    int c <span class="hljs-operator">=</span> a / b<span class="hljs-comment">;</span><br>&#125; catch (ArithmeticException e) &#123;<br>    e.printStackTrace()<span class="hljs-comment">;</span><br>&#125; catch (Exception e) &#123;<br>    e.printStackTrace()<span class="hljs-comment">;</span><br>&#125; finally &#123;<br>    System.out.println(<span class="hljs-string">&quot;finally&quot;</span>)<span class="hljs-comment">;</span><br>&#125;<br></code></pre></td></tr></table></figure><p>scala异常处理：</p><ul><li><code>try</code>包围要捕获异常的内容，<code>catch</code>仅仅是关键字，将捕获异常的所有逻辑包围在<code>catch</code>块中。<code>finally</code>块和java一样都会执行，一般用于对象的清理工作。</li><li>scala中没有编译期异常，所有异常都是运行时处理。</li><li>scala中也是用<code>throw</code>关键字抛出异常，所有异常都是<code>Throwable</code>的子类，<code>throw</code>表达式是有类型的，就是<code>Nothing</code>。<code>Nothing</code>主要用在一个函数总是不能正常工作，总是抛出异常的时候用作返回值类型。</li><li>java中用了<code>throws</code>关键字声明此方法可能引发的异常信息，在scala中对应地使用<code>@throws[ExceptionList]</code>注解来声明，用法差不多。</li></ul><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs processing">object Exceptionstest &#123;<br>    def <span class="hljs-title function_">main</span>(args: <span class="hljs-built_in">Array</span>[<span class="hljs-built_in">String</span>]): Unit = &#123;<br>        <span class="hljs-comment">// test of exceptions</span><br>        <span class="hljs-keyword">try</span> &#123;<br>            val n = <span class="hljs-number">10</span> / <span class="hljs-number">0</span><br>        &#125; <span class="hljs-keyword">catch</span> &#123;<br>            <span class="hljs-keyword">case</span> e: ArithmeticException =&gt; &#123;<br>                <span class="hljs-built_in">println</span>(s<span class="hljs-string">&quot;ArithmeticException raised.&quot;</span>)<br>            &#125;<br>            <span class="hljs-keyword">case</span> e: Exception =&gt; &#123;<br>                <span class="hljs-built_in">println</span>(<span class="hljs-string">&quot;Normal Exceptions raised.&quot;</span>)<br>            &#125;<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-built_in">println</span>(<span class="hljs-string">&quot;finally&quot;</span>)<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="隐式转换"><a href="#隐式转换" class="headerlink" title="隐式转换"></a>隐式转换</h2><p>前面说了很多了，编译器做隐式转换的时机：</p><ul><li>编译器第一次编译失败时，会在当前环境中查找能让代码编译通过的方法，将类型隐式转换，尝试二次编译。</li></ul><p>隐式函数：</p><ul><li>函数定义前加上<code>implicit</code>声明为隐式转换函数。</li><li>当编译错误时，编译器会尝试在当前作用域范围查找能调用对应功能的转换规则，这个过程由编译器完成，称之为隐式转换或者自动转换。</li></ul><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs fortran">// convert <span class="hljs-built_in">Int</span> to MyRichInt<br><span class="hljs-keyword">implicit</span> def convert(arg: <span class="hljs-built_in">Int</span>): MyRichInt = &#123;<br>    new MyRickInt(arg)<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>在当前作用域定义时需要在使用前定义才能找到。</li></ul><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs fortran">object  ImplicitConversion &#123;<br>    def main(args: Array[String]): <span class="hljs-keyword">Unit</span> = &#123;<br>        <span class="hljs-keyword">implicit</span> def convert(num: <span class="hljs-built_in">Int</span>): MyRichInt = new MyRichInt(num)<br><br>        println(<span class="hljs-number">12.</span>myMax(<span class="hljs-number">15</span>)) // will <span class="hljs-keyword">call</span> convert implicitly<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> MyRichInt(val self: <span class="hljs-built_in">Int</span>) &#123;<br>    // self define compare method<br>    def myMax(n: <span class="hljs-built_in">Int</span>): <span class="hljs-built_in">Int</span> = <span class="hljs-keyword">if</span> (n &lt; self) self <span class="hljs-keyword">else</span> n<br>    def myMin(n: <span class="hljs-built_in">Int</span>): <span class="hljs-built_in">Int</span> = <span class="hljs-keyword">if</span> (n &gt; self) self <span class="hljs-keyword">else</span> n<br>&#125;<br></code></pre></td></tr></table></figure><p>隐式参数：</p><ul><li>普通方法或者函数中的参数可以通过<code>implicit</code>关键字声明为隐式参数，调用方法时，如果传入了，那么以传入参数为准。如果没有传入，编译器会在当前作用域寻找复合条件的隐式值。例子：集合排序方法的排序规则就是隐式参数。</li><li>隐式值：<ul><li>同一个作用域，相同类型隐式值只能有一个。</li><li>编译器按照隐式参数的类型去寻找对应隐式值，与隐式值名称无关。</li><li>隐式参数优先于默认参数。（也就是说隐式参数和默认参数可以同时存在，加上默认参数之后其实就相当于两个不同优先级的默认参数）</li></ul></li><li>隐式参数有一个很淦的点：<ul><li>如果参数列表中只有一个隐式参数，无论这个隐式参数是否提供默认参数，那么如果要用这个隐式参数就应该<strong>将调用隐式参数的参数列表连同括号一起省略掉</strong>。如果调用时又想加括号可以在函数定义的隐式参数列表前加一个空参数列表<code>()</code>，那么<code>()</code>将使用隐式参数，<code>()()</code>将使用默认参数（如果有，没有肯定编不过），<code>()(arg)</code>使用传入参数。</li><li>也就是说一个隐式参数时通过是否加括号可以区分隐式参数、默认参数、传入参数三种情况。</li><li>那么如果多参数情况下：隐式参数、默认参数、普通参数排列组合在一个参数列表中混用会怎么样呢？没有试验过，不要这么用，思考这些东西搞什么哦！</li><li>具体要不要加这个柯里化的空参数列表，那看习惯就行。不加可能更好一点，加了可能有点让人费解。</li></ul></li><li>可以进一步简写隐式参数，在参数列表中直接去掉，在函数中直接使用<code>implicity[Type]</code>（<code>Predef</code>中定义的）。但这时就不能传参数了，有什么用啊？相当于一个在自己作用域范围内起作用的全局量？</li></ul><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs fortran">object ImplicitArgments &#123;<br>    def main(args: Array[String]): <span class="hljs-keyword">Unit</span> = &#123;<br>        <span class="hljs-keyword">implicit</span> val str: String = <span class="hljs-string">&quot;Alice from implicit argument&quot;</span><br>        <br>        def sayHello()(<span class="hljs-keyword">implicit</span> <span class="hljs-keyword">name</span>: String = <span class="hljs-string">&quot;Alice from default argument&quot;</span>): <span class="hljs-keyword">Unit</span> = &#123;<br>            println(s<span class="hljs-string">&quot;hello $name&quot;</span>)<br>        &#125;<br><br>        sayHello() // <span class="hljs-keyword">implicit</span><br>        sayHello()() // <span class="hljs-keyword">default</span><br>        sayHello()(<span class="hljs-string">&quot;Alice from normal argument&quot;</span>) // normal<br><br>        def sayHi(<span class="hljs-keyword">implicit</span> <span class="hljs-keyword">name</span>: String = <span class="hljs-string">&quot;Alice from default argument&quot;</span>): <span class="hljs-keyword">Unit</span> = &#123;<br>            println(s<span class="hljs-string">&quot;hi $name&quot;</span>)<br>        &#125;<br><br>        sayHi // <span class="hljs-keyword">implicit</span><br>        sayHi() // <span class="hljs-keyword">default</span><br>        sayHi(<span class="hljs-string">&quot;Alice from normal argument&quot;</span>) // normal<br><br>        def sayBye() = &#123;<br>            println(s<span class="hljs-string">&quot;bye $&#123;implicitly[String]&#125;&quot;</span>)<br>        &#125;<br><br>        sayBye()<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>隐式类：</p><ul><li>scala2.10之后提供了隐式类，使用<code>implicit</code>声明为隐式类。将类的构造方法声明为隐式转换函数。</li><li>也就是说如果编译通不过，就可能将数据直接传给构造转换为对应的类。</li><li>隐式函数的一个扩展。</li><li>说明：<ul><li>所带构造参数有且只能有一个。</li><li>隐式类必须被定义在类或者伴生对象或者包对象中，隐式类不能是顶层的。</li></ul></li><li>同一个作用域定义隐式转换函数和隐式类会冲突，定义一个就行。</li></ul><p>隐式解析机制的作用域：</p><ul><li>首先在<strong>当前代码作用域下</strong>查找隐式实体（隐式方法、隐式类、隐式对象）。</li><li>如果第一条规查找隐式对象失败，会继续在<strong>隐式参数的类型的作用域</strong>中查找。</li><li>类型的作用域是指该类型相关联的全部伴生对象以及该类型所在包的包对象。</li></ul><p>作用：</p><ul><li>隐式函数和隐式类可以用于扩充类的功能，常用语比如内建类<code>Int Double String</code>这种。</li><li>隐式参数相当于就是一种更高优先级的默认参数。用于多个函数需要同一个默认参数时，就不用每个函数定义时都写一次默认值了。为了简洁无所不用其极啊真是。</li></ul><h2 id="泛型"><a href="#泛型" class="headerlink" title="泛型"></a>泛型</h2><p>泛型：</p><ul><li><code>[TypeList]</code>，定义和使用都是。</li><li>常用于集合类型中用于支持不同元素类型。</li><li>和java一样通过类型擦除&#x2F;擦拭法来实现。</li><li>定义时可以用<code>+-</code>表示协变和逆变，不加则是不变。</li></ul><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyList</span>[+<span class="hljs-title">T</span>] </span>&#123;&#125; // 协变<br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyList</span>[-<span class="hljs-title">T</span>] </span>&#123;&#125; // 逆变<br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyList</span>[<span class="hljs-title">T</span>] </span>&#123;&#125; // 不变<br></code></pre></td></tr></table></figure><p>协变和逆变：</p><ul><li>比如Son和Father是父子关系，Son是子类。<ul><li>协变（Covariance）：<code>MyList[Son]</code>是<code>MyList[Father]</code>的子类，协同变化。</li><li>逆变（Contravariance）：<code>MyList[Son]</code>是<code>MyList[Father]</code>的父类，逆向变化。</li><li>不变（Invariant）：<code>MyList[Father] MyList[Son]</code>没有父子关系。</li></ul></li><li>还需要深入了解。</li></ul><p>泛型上下限：</p><ul><li>泛型上限：<code>class MyList[T &lt;: Type]</code>，可以传入<code>Type</code>自身或者子类。</li><li>泛型下限：<code>class MyList[T &gt;: Type]</code>，可以传入<code>Type</code>自身或者父类。</li><li>对传入的泛型进行限定。</li></ul><p>上下文限定：</p><ul><li><code>def f[A : B](a: A) = println(a)</code>等同于<code>def f[A](a: A)(implicit arg: B[A])</code></li><li>是将泛型和隐式转换结合的产物，使用上下文限定（前者）后，方法内无法使用隐式参数名调用隐式参数，需要通过<code>implicitly[Ordering[A]]</code>获取隐式变量。</li><li>了解即可，可能基本不会用到。</li></ul><h2 id="Style-Guide"><a href="#Style-Guide" class="headerlink" title="Style Guide"></a>Style Guide</h2><p><a href="https://docs.scala-lang.org/style/index.html">官方的Style Guide</a>中的一些建议：</p><ul><li>缩进鼓励为2个，当然我上面都是用的4个。Scala中很多时候嵌套层次会很深，也鼓励这样做，模式匹配、匿名函数、循环、条件等各种嵌套，层次深了之后4空格可能会比较折磨。</li><li>一个表达式一行放不下要换行时，语义上不会产生歧义就行，比如一个运算符放在末尾将其必需的操作数换到下一行。</li><li>多参数函数调用需要换行书写时，将第一个参数放到第二行并缩进2个空格书写，而不是第一个参数放到第一行，然后缩进到对齐（典型java风格）。</li></ul><figure class="highlight fsharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs fsharp"><span class="hljs-comment">// right!</span><br><span class="hljs-keyword">val</span> myLongFieldNameWithNoRealPoint <span class="hljs-operator">=</span><br>  foo(<br>    someVeryLongFieldName,<br>    andAnotherVeryLongFieldName,<br>    <span class="hljs-string">&quot;this is a string&quot;</span>,<br>    <span class="hljs-number">3.1415</span>)<br><br><span class="hljs-comment">// wrong!</span><br><span class="hljs-keyword">val</span> myLongFieldNameWithNoRealPoint <span class="hljs-operator">=</span> foo(someVeryLongFieldName,<br>                                         andAnotherVeryLongFieldName,<br>                                         <span class="hljs-string">&quot;this is a string&quot;</span>,<br>                                         <span class="hljs-number">3.1415</span>)<br></code></pre></td></tr></table></figure><ul><li>仅介绍第一页的内容，也没有空去看完，以后真写得多了再去看。</li></ul><h2 id="sbt"><a href="#sbt" class="headerlink" title="sbt"></a>sbt</h2><p>上面已经简单介绍了IDEA使用Maven项目编写Scala的配置，但学习scala，官方的构建工具sbt还是必须要了解一下的。</p><p>关于SBT：</p><ul><li>SBT是Scala的构建工具，全称Simple Build Tool，类似于 Maven 或 Gradle。</li><li><a href="https://docs.scala-lang.org/getting-started/sbt-track/getting-started-with-scala-and-sbt-on-the-command-line.html">GETTING STARTED WITH SCALA AND SBT ON THE COMMAND LINE</a></li><li><a href="https://www.scala-sbt.org/1.x/docs/index.html">sbt Reference Manual</a> 要使用sbt，阅读完第一章Getting Started with sbt是必要的。下面的内容皆是第一章翻译。</li></ul><p>特性：</p><ul><li>简单项目零配置。</li><li>用Scala源码管理项目构建。</li><li>精确的重编译，节省时间。</li><li>使用Coursier的库管理器。</li><li>支持Scala和Java的混合项目。</li><li>等等等，具体就不列了，总之一个大型项目构建系统该有的东西。</li></ul><p>安装：</p><ul><li>sbt依赖Java，确保已经安装了JDK1.8或以上版本。</li><li>下载压缩包或者安装包，这里的版本是1.5.5。</li><li>解压或者安装。</li><li>配置环境变量<code>SBT_HOME</code>，并添加<code>%SBT_HOME%\bin</code>到path环境变量，安装包的话会自动配置。</li></ul><h3 id="通过案例入门sbt"><a href="#通过案例入门sbt" class="headerlink" title="通过案例入门sbt"></a>通过案例入门sbt</h3><p>创建一个项目hello作为例子：</p><ul><li>windows上没有的命令按照含义操作即可。</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-built_in">mkdir</span> foo-build</span><br><span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-built_in">cd</span> foo-build</span><br><span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-built_in">touch</span> build.sbt</span><br></code></pre></td></tr></table></figure><p>开始sbt shell：</p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs n1ql">$ sbt<br>[info] Updated file /tmp/foo-<span class="hljs-keyword">build</span>/project/<span class="hljs-keyword">build</span>.properties: <span class="hljs-keyword">set</span> sbt.version <span class="hljs-keyword">to</span> <span class="hljs-number">1.1</span><span class="hljs-number">.4</span><br>[info] Loading project definition <span class="hljs-keyword">from</span> /tmp/foo-<span class="hljs-keyword">build</span>/project<br>[info] Loading settings <span class="hljs-keyword">from</span> <span class="hljs-keyword">build</span>.sbt ...<br>[info] <span class="hljs-keyword">Set</span> current project <span class="hljs-keyword">to</span> foo-<span class="hljs-keyword">build</span> (<span class="hljs-keyword">in</span> <span class="hljs-keyword">build</span> file:/tmp/foo-<span class="hljs-keyword">build</span>/)<br>[info] sbt server started at local:///Users/eed3si9n/.sbt/<span class="hljs-number">1.0</span>/server/abc4fb6c89985a00fd95/sock<br>sbt:foo-<span class="hljs-keyword">build</span>&gt;<br></code></pre></td></tr></table></figure><ul><li>第一次初始化时间会很长。</li><li>退出shell：</li></ul><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">sbt:foo-build&gt; <span class="hljs-keyword">exit</span><br></code></pre></td></tr></table></figure><ul><li>编译：</li></ul><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">sb</span><span class="hljs-variable">t:foo</span>-build&gt; compile<br></code></pre></td></tr></table></figure><ul><li>sbt shell中Tab可以补全。</li></ul><p>对修改重新编译：</p><ul><li>在<code>compile</code>命令（或其他命令同理）前加一个<code>~</code>前缀，会进入等待状态，当项目发生修改是会自动重新编译。当然退出这个状态后就不会了。</li></ul><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">sb</span><span class="hljs-variable">t:foo</span>-build&gt; ~compile<br>[success] Total time: <span class="hljs-number">0</span> s, completed May <span class="hljs-number">6</span>, <span class="hljs-number">2018</span> <span class="hljs-number">3</span>:<span class="hljs-number">52</span>:<span class="hljs-number">08</span> PM<br><span class="hljs-number">1</span>. Waiting <span class="hljs-keyword">for</span> <span class="hljs-keyword">source</span> <span class="hljs-keyword">changes</span>... (press enter <span class="hljs-keyword">to</span> interrupt)<br></code></pre></td></tr></table></figure><p>创建源文件：</p><ul><li>执行<code>~compile</code>并保持，创建目录<code>src/main/scala/example</code>新建源文件保存就能看到编译过程了。</li></ul><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs scala"><span class="hljs-comment">// src/main/scala/example/Hello.scala</span><br><span class="hljs-keyword">package</span> example<br><br><span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">Hello</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">App</span> </span>&#123;<br>  println(<span class="hljs-string">&quot;Hello&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>sbt shell常用操作：</p><ul><li><code>help</code>帮助。</li><li><code>help run</code>具体条目的帮助。</li><li><code>run</code>运行程序。</li><li>上下箭头切换已执行命令。</li><li><code>scalaVersion</code> scala版本。</li></ul><p>配置修改：</p><ul><li>切换当前项目的scala版本：<code>set ThisBuild / scalaVersion := &quot;2.13.6&quot;</code>。</li><li><code>session save</code>保存配置到<code>build.sbt</code>，此时其中就会多出<code>ThisBuild / scalaVersion := &quot;2.13.6&quot;</code>。</li><li>编辑<code>build.sbt</code>：</li></ul><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs go">ThisBuild / scalaVersion := <span class="hljs-string">&quot;2.13.6&quot;</span><br>ThisBuild / organization := <span class="hljs-string">&quot;com.example&quot;</span><br><br>lazy val hello = (project in file(<span class="hljs-string">&quot;.&quot;</span>))<br>  .settings(<br>    name := <span class="hljs-string">&quot;Hello&quot;</span><br>  )<br></code></pre></td></tr></table></figure><ul><li>重新加载配置<code>reload</code>。</li></ul><p>测试：</p><ul><li>添加ScalaTest到依赖</li></ul><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs cmake">ThisBuild / scalaVersion := <span class="hljs-string">&quot;2.13.6&quot;</span><br>ThisBuild / organization := <span class="hljs-string">&quot;com.example&quot;</span><br><br>lazy val hello = (<span class="hljs-keyword">project</span> in <span class="hljs-keyword">file</span>(<span class="hljs-string">&quot;.&quot;</span>))<br>  .settings(<br>    name := <span class="hljs-string">&quot;Hello&quot;</span>,<br>    libraryDependencies += <span class="hljs-string">&quot;org.scalatest&quot;</span> %% <span class="hljs-string">&quot;scalatest&quot;</span> % <span class="hljs-string">&quot;3.2.7&quot;</span> % <span class="hljs-keyword">Test</span>,<br>  )<br></code></pre></td></tr></table></figure><ul><li>执行测试：<code>test</code>。</li><li>后续继续运行追加的测试：<code>~testQuick</code></li></ul><p>编写测试：<code>src/test/scala/HelloSpec.scala</code></p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs scala"><span class="hljs-comment">// src/test/scala/HelloSpec.scala</span><br><span class="hljs-keyword">import</span> org.scalatest.funsuite._<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HelloSpec</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AnyFunSuite</span> </span>&#123;<br>  test(<span class="hljs-string">&quot;Hello should start with H&quot;</span>) &#123;<br>    assert(<span class="hljs-string">&quot;hello&quot;</span>.startsWith(<span class="hljs-string">&quot;H&quot;</span>))<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>测试结果当然是失败</li></ul><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs routeros">sbt:Hello&gt; test<br>[<span class="hljs-built_in">info</span>] HelloSpec:<br>[<span class="hljs-built_in">info</span>] - Hello should start with H *** FAILED ***<br>[<span class="hljs-built_in">info</span>]   <span class="hljs-string">&quot;hello&quot;</span> did <span class="hljs-keyword">not</span> start with <span class="hljs-string">&quot;H&quot;</span> (HelloSpec.scala:5)<br>[<span class="hljs-built_in">info</span>] <span class="hljs-built_in">Run</span> completed <span class="hljs-keyword">in</span> 214 milliseconds.<br>[<span class="hljs-built_in">info</span>] Total number of tests run: 1<br>[<span class="hljs-built_in">info</span>] Suites: completed 1, aborted 0<br>[<span class="hljs-built_in">info</span>] Tests: succeeded 0, failed 1, canceled 0, ignored 0, pending 0<br>[<span class="hljs-built_in">info</span>] *** 1 TEST FAILED ***<br>[<span class="hljs-built_in">error</span>] Failed tests:<br>[<span class="hljs-built_in">error</span>]         HelloSpec<br>[<span class="hljs-built_in">error</span>] (Test / test) sbt.TestsFailedException: Tests unsuccessful<br>[<span class="hljs-built_in">error</span>] Total time: 0 s, completed 2021年9月27日 下午11:58:01<br></code></pre></td></tr></table></figure><ul><li>改一下源码再测试就能通过了：</li></ul><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs scala"><span class="hljs-comment">// src/test/scala/HelloSpec.scala</span><br><span class="hljs-keyword">import</span> org.scalatest.funsuite._<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HelloSpec</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AnyFunSuite</span> </span>&#123;<br>  test(<span class="hljs-string">&quot;Hello should start with H&quot;</span>) &#123;<br>    assert(<span class="hljs-string">&quot;Hello&quot;</span>.startsWith(<span class="hljs-string">&quot;H&quot;</span>))<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>添加库依赖：</p><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs mel"><span class="hljs-comment">// build.sbt</span><br>ThisBuild / scalaVersion := <span class="hljs-string">&quot;2.13.6&quot;</span><br>ThisBuild / organization := <span class="hljs-string">&quot;com.example&quot;</span><br><br>lazy val hello = (project <span class="hljs-keyword">in</span> <span class="hljs-keyword">file</span>(<span class="hljs-string">&quot;.&quot;</span>))<br>  .settings(<br>    name := <span class="hljs-string">&quot;Hello&quot;</span>,<br>    libraryDependencies += <span class="hljs-string">&quot;com.typesafe.play&quot;</span> %% <span class="hljs-string">&quot;play-json&quot;</span> % <span class="hljs-string">&quot;2.9.2&quot;</span>,<br>    libraryDependencies += <span class="hljs-string">&quot;com.eed3si9n&quot;</span> %% <span class="hljs-string">&quot;gigahorse-okhttp&quot;</span> % <span class="hljs-string">&quot;0.5.0&quot;</span>,<br>    libraryDependencies += <span class="hljs-string">&quot;org.scalatest&quot;</span> %% <span class="hljs-string">&quot;scalatest&quot;</span> % <span class="hljs-string">&quot;3.2.7&quot;</span> % Test,<br>  )<br></code></pre></td></tr></table></figure><p>使用REPL（Read-Eval-Print Loop）：</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">sb</span><span class="hljs-variable">t:Hello</span>&gt; console<br></code></pre></td></tr></table></figure><ul><li>在scala的REPL环境中粘贴：<code>:paste</code>。</li><li>退出：<code>:q</code></li></ul><p>修改<code>build.sbt</code>创建一个子项目：</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs cmake">ThisBuild / scalaVersion := <span class="hljs-string">&quot;2.13.6&quot;</span><br>ThisBuild / organization := <span class="hljs-string">&quot;com.example&quot;</span><br><br>lazy val hello = (<span class="hljs-keyword">project</span> in <span class="hljs-keyword">file</span>(<span class="hljs-string">&quot;.&quot;</span>))<br>  .settings(<br>    name := <span class="hljs-string">&quot;Hello&quot;</span>,<br>    libraryDependencies += <span class="hljs-string">&quot;com.eed3si9n&quot;</span> %% <span class="hljs-string">&quot;gigahorse-okhttp&quot;</span> % <span class="hljs-string">&quot;0.5.0&quot;</span>,<br>    libraryDependencies += <span class="hljs-string">&quot;org.scalatest&quot;</span> %% <span class="hljs-string">&quot;scalatest&quot;</span> % <span class="hljs-string">&quot;3.2.7&quot;</span> % <span class="hljs-keyword">Test</span>,<br>  )<br><br>lazy val helloCore = (<span class="hljs-keyword">project</span> in <span class="hljs-keyword">file</span>(<span class="hljs-string">&quot;core&quot;</span>))<br>  .settings(<br>    name := <span class="hljs-string">&quot;Hello Core&quot;</span>,<br>  )<br></code></pre></td></tr></table></figure><ul><li><code>reload</code>时会自动创建目录<code>core/</code>。</li><li>列出所有子项目：<code>projects</code></li><li>编译子项目：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">helloCore/compile<br></code></pre></td></tr></table></figure><ul><li>子项目添加依赖：</li></ul><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs cmake">ThisBuild / scalaVersion := <span class="hljs-string">&quot;2.13.6&quot;</span><br>ThisBuild / organization := <span class="hljs-string">&quot;com.example&quot;</span><br><br>val scalaTest = <span class="hljs-string">&quot;org.scalatest&quot;</span> %% <span class="hljs-string">&quot;scalatest&quot;</span> % <span class="hljs-string">&quot;3.2.7&quot;</span><br><br>lazy val hello = (<span class="hljs-keyword">project</span> in <span class="hljs-keyword">file</span>(<span class="hljs-string">&quot;.&quot;</span>))<br>  .settings(<br>    name := <span class="hljs-string">&quot;Hello&quot;</span>,<br>    libraryDependencies += <span class="hljs-string">&quot;com.eed3si9n&quot;</span> %% <span class="hljs-string">&quot;gigahorse-okhttp&quot;</span> % <span class="hljs-string">&quot;0.5.0&quot;</span>,<br>    libraryDependencies += scalaTest % <span class="hljs-keyword">Test</span>,<br>  )<br><br>lazy val helloCore = (<span class="hljs-keyword">project</span> in <span class="hljs-keyword">file</span>(<span class="hljs-string">&quot;core&quot;</span>))<br>  .settings(<br>    name := <span class="hljs-string">&quot;Hello Core&quot;</span>,<br>    libraryDependencies += scalaTest % <span class="hljs-keyword">Test</span>,<br>  )<br></code></pre></td></tr></table></figure><p>广播命令、添加依赖：</p><ul><li>设置<code>.aggregate(...)</code>，这样发送到<code>hello</code>的命令都会被广播到<code>helloCore</code></li><li>使用<code>.dependsOn(...)</code>可以设置依赖，下面的设置使<code>hello</code>依赖于<code>helloCore</code></li><li>将Gigahorse的依赖移到<code>helloCore</code>。</li></ul><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs cmake">ThisBuild / scalaVersion := <span class="hljs-string">&quot;2.13.6&quot;</span><br>ThisBuild / organization := <span class="hljs-string">&quot;com.example&quot;</span><br><br>val scalaTest = <span class="hljs-string">&quot;org.scalatest&quot;</span> %% <span class="hljs-string">&quot;scalatest&quot;</span> % <span class="hljs-string">&quot;3.2.7&quot;</span><br>val gigahorse = <span class="hljs-string">&quot;com.eed3si9n&quot;</span> %% <span class="hljs-string">&quot;gigahorse-okhttp&quot;</span> % <span class="hljs-string">&quot;0.5.0&quot;</span><br><br>lazy val hello = (<span class="hljs-keyword">project</span> in <span class="hljs-keyword">file</span>(<span class="hljs-string">&quot;.&quot;</span>))<br>  .aggregate(helloCore)<br>  .dependsOn(helloCore)<br>  .settings(<br>    name := <span class="hljs-string">&quot;Hello&quot;</span>,<br>    libraryDependencies += scalaTest % <span class="hljs-keyword">Test</span>,<br>  )<br><br>lazy val helloCore = (<span class="hljs-keyword">project</span> in <span class="hljs-keyword">file</span>(<span class="hljs-string">&quot;core&quot;</span>))<br>  .settings(<br>    name := <span class="hljs-string">&quot;Hello Core&quot;</span>,<br>    libraryDependencies += scalaTest % <span class="hljs-keyword">Test</span>,<br>    libraryDependencies += gigahorse,<br>  )<br></code></pre></td></tr></table></figure><p>使用Play JSON解析JSON：</p><ul><li>添加依赖。</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs css">ThisBuild / scalaVersion := <span class="hljs-string">&quot;2.13.6&quot;</span><br>ThisBuild / organization := <span class="hljs-string">&quot;com.example&quot;</span><br><br>val scalaTest = <span class="hljs-string">&quot;org.scalatest&quot;</span> %% <span class="hljs-string">&quot;scalatest&quot;</span> % <span class="hljs-string">&quot;3.2.7&quot;</span><br>val gigahorse = <span class="hljs-string">&quot;com.eed3si9n&quot;</span> %% <span class="hljs-string">&quot;gigahorse-okhttp&quot;</span> % <span class="hljs-string">&quot;0.5.0&quot;</span><br>val playJson  = <span class="hljs-string">&quot;com.typesafe.play&quot;</span> %% <span class="hljs-string">&quot;play-json&quot;</span> % <span class="hljs-string">&quot;2.9.2&quot;</span><br><br>lazy val hello = (project in <span class="hljs-built_in">file</span>(<span class="hljs-string">&quot;.&quot;</span>))<br>  .<span class="hljs-built_in">aggregate</span>(helloCore)<br>  .<span class="hljs-built_in">dependsOn</span>(helloCore)<br>  .<span class="hljs-built_in">settings</span>(<br>    name := <span class="hljs-string">&quot;Hello&quot;</span>,<br>    libraryDependencies += scalaTest % Test,<br>  )<br><br>lazy val helloCore = (project in <span class="hljs-built_in">file</span>(<span class="hljs-string">&quot;core&quot;</span>))<br>  .<span class="hljs-built_in">settings</span>(<br>    name := <span class="hljs-string">&quot;Hello Core&quot;</span>,<br>    libraryDependencies ++= <span class="hljs-built_in">Seq</span>(gigahorse, playJson),<br>    libraryDependencies += scalaTest % Test,<br>  )<br></code></pre></td></tr></table></figure><ul><li>重载，添加文件：<code>core/src/main/scala/example/core/Weather.scala</code></li></ul><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-comment">// core/src/main/scala/example/core/Weather.scala</span><br><span class="hljs-keyword">package</span> example.core<br><br><span class="hljs-keyword">import</span> gigahorse._, support.okhttp.Gigahorse<br><span class="hljs-keyword">import</span> scala.concurrent._, duration._<br><span class="hljs-keyword">import</span> play.api.libs.json._<br><br><span class="hljs-keyword">object</span> Weather &#123;<br>  lazy <span class="hljs-keyword">val</span> http = Gigahorse.http(Gigahorse.config)<br><br>  def weather: Future[String] = &#123;<br>    <span class="hljs-keyword">val</span> baseUrl = <span class="hljs-string">&quot;https://www.metaweather.com/api/location&quot;</span><br>    <span class="hljs-keyword">val</span> locUrl = baseUrl + <span class="hljs-string">&quot;/search/&quot;</span><br>    <span class="hljs-keyword">val</span> weatherUrl = baseUrl + <span class="hljs-string">&quot;/%s/&quot;</span><br>    <span class="hljs-keyword">val</span> rLoc = Gigahorse.url(locUrl).<span class="hljs-keyword">get</span>.<br>      addQueryString(<span class="hljs-string">&quot;query&quot;</span> -&gt; <span class="hljs-string">&quot;New York&quot;</span>)<br>    <span class="hljs-keyword">import</span> ExecutionContext.Implicits.global<br>    <span class="hljs-keyword">for</span> &#123;<br>      loc &lt;- http.run(rLoc, parse)<br>      woeid = (loc \ <span class="hljs-number">0</span>  \ <span class="hljs-string">&quot;woeid&quot;</span>).<span class="hljs-keyword">get</span><br>      rWeather = Gigahorse.url(weatherUrl format woeid).<span class="hljs-keyword">get</span><br>      weather &lt;- http.run(rWeather, parse)<br>    &#125; yield (weather \\ <span class="hljs-string">&quot;weather_state_name&quot;</span>)(<span class="hljs-number">0</span>).<span class="hljs-keyword">as</span>[String].toLowerCase<br>  &#125;<br><br>  <span class="hljs-keyword">private</span> def parse = Gigahorse.asString andThen Json.parse<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>修改<code>src/main/scala/example/Hello.scala</code>:</li></ul><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs scala"><span class="hljs-keyword">package</span> example<br><br><span class="hljs-keyword">import</span> scala.concurrent._, duration._<br><span class="hljs-keyword">import</span> core.<span class="hljs-type">Weather</span><br><br><span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">Hello</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">App</span> </span>&#123;<br>  <span class="hljs-keyword">val</span> w = <span class="hljs-type">Await</span>.result(<span class="hljs-type">Weather</span>.weather, <span class="hljs-number">10.</span>seconds)<br>  println(<span class="hljs-string">s&quot;Hello! The weather in New York is <span class="hljs-subst">$w</span>.&quot;</span>)<br>  <span class="hljs-type">Weather</span>.http.close()<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>运行：<code>run</code></li></ul><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs applescript">sbt:Hello&gt; <span class="hljs-built_in">run</span><br>[info] <span class="hljs-built_in">running</span> example.Hello<br>Hello! The weather <span class="hljs-keyword">in</span> New York <span class="hljs-keyword">is</span> light cloud.<br>[success] Total <span class="hljs-built_in">time</span>: <span class="hljs-number">5</span> s, completed <span class="hljs-number">2021</span>年<span class="hljs-number">9</span>月<span class="hljs-number">28</span>日 上午<span class="hljs-number">10</span>:<span class="hljs-number">29</span>:<span class="hljs-number">57</span><br></code></pre></td></tr></table></figure><p>添加sbt-native-packager插件：</p><ul><li>创建<code>project/plugins.sbt</code></li></ul><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">addSbtPlugin</span><span class="hljs-params">(<span class="hljs-string">&quot;com.typesafe.sbt&quot;</span> % <span class="hljs-string">&quot;sbt-native-packager&quot;</span> % <span class="hljs-string">&quot;1.3.4&quot;</span>)</span></span><br></code></pre></td></tr></table></figure><ul><li>修改<code>build.sbt</code>对<code>Hello</code>项目添加<code>.enablePlugins(JavaAppPackaging)</code></li><li>重载，本地没有执行成功，所以下面的<code>dist</code>命令也就不能用。</li></ul><p>重载并创建.zip分发包：<code>dist</code></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs swift">sbt:<span class="hljs-type">Hello</span><span class="hljs-operator">&gt;</span> dist<br>[info] <span class="hljs-type">Wrote</span> <span class="hljs-regexp">/tmp/</span>foo<span class="hljs-operator">-</span>build<span class="hljs-regexp">/target/</span>scala<span class="hljs-operator">-</span><span class="hljs-number">2.12</span><span class="hljs-operator">/</span>hello_2.<span class="hljs-number">12</span><span class="hljs-operator">-</span><span class="hljs-number">0.1</span>.<span class="hljs-number">0</span><span class="hljs-operator">-</span><span class="hljs-type">SNAPSHOT</span>.pom<br>[info] <span class="hljs-type">Wrote</span> <span class="hljs-regexp">/tmp/</span>foo<span class="hljs-operator">-</span>build<span class="hljs-regexp">/core/</span>target<span class="hljs-regexp">/scala-2.12/</span>hello<span class="hljs-operator">-</span>core_2.<span class="hljs-number">12</span><span class="hljs-operator">-</span><span class="hljs-number">0.1</span>.<span class="hljs-number">0</span><span class="hljs-operator">-</span><span class="hljs-type">SNAPSHOT</span>.pom<br>[info] <span class="hljs-type">Your</span> <span class="hljs-keyword">package</span> <span class="hljs-keyword">is</span> ready <span class="hljs-keyword">in</span> <span class="hljs-regexp">/tmp/</span>foo<span class="hljs-operator">-</span>build<span class="hljs-regexp">/target/</span>universal<span class="hljs-operator">/</span>hello<span class="hljs-operator">-</span><span class="hljs-number">0.1</span>.<span class="hljs-number">0</span><span class="hljs-operator">-</span><span class="hljs-type">SNAPSHOT</span>.zip<br></code></pre></td></tr></table></figure><p>应用容器化：</p><ul><li><code>Docker/publishLocal</code></li><li>运行容器化后的应用：<code>docker run hello:0.1.0-SNAPSHOT</code></li></ul><p>设置应用版本：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs css">// build<span class="hljs-selector-class">.sbt</span><br>ThisBuild / version      := <span class="hljs-string">&quot;0.1.0&quot;</span><br>ThisBuild / scalaVersion := <span class="hljs-string">&quot;2.13.6&quot;</span><br>ThisBuild / organization := <span class="hljs-string">&quot;com.example&quot;</span><br><br>val scalaTest = <span class="hljs-string">&quot;org.scalatest&quot;</span> %% <span class="hljs-string">&quot;scalatest&quot;</span> % <span class="hljs-string">&quot;3.2.7&quot;</span><br>val gigahorse = <span class="hljs-string">&quot;com.eed3si9n&quot;</span> %% <span class="hljs-string">&quot;gigahorse-okhttp&quot;</span> % <span class="hljs-string">&quot;0.5.0&quot;</span><br>val playJson  = <span class="hljs-string">&quot;com.typesafe.play&quot;</span> %% <span class="hljs-string">&quot;play-json&quot;</span> % <span class="hljs-string">&quot;2.9.2&quot;</span><br><br>lazy val hello = (project in <span class="hljs-built_in">file</span>(<span class="hljs-string">&quot;.&quot;</span>))<br>  .<span class="hljs-built_in">aggregate</span>(helloCore)<br>  .<span class="hljs-built_in">dependsOn</span>(helloCore)<br>  .<span class="hljs-built_in">enablePlugins</span>(JavaAppPackaging)<br>  .<span class="hljs-built_in">settings</span>(<br>    name := <span class="hljs-string">&quot;Hello&quot;</span>,<br>    libraryDependencies += scalaTest % Test,<br>  )<br><br>lazy val helloCore = (project in <span class="hljs-built_in">file</span>(<span class="hljs-string">&quot;core&quot;</span>))<br>  .<span class="hljs-built_in">settings</span>(<br>    name := <span class="hljs-string">&quot;Hello Core&quot;</span>,<br>    libraryDependencies ++= <span class="hljs-built_in">Seq</span>(gigahorse, playJson),<br>    libraryDependencies += scalaTest % Test,<br>  )<br></code></pre></td></tr></table></figure><p>临时切换Scala版本：</p><ul><li><code>++2.12.14</code></li></ul><p>在Bash中直接运行sbt的命令：</p><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs excel">sbt <span class="hljs-built_in">clean</span> <span class="hljs-string">&quot;testOnly HelloSpec&quot;</span><br></code></pre></td></tr></table></figure><ul><li>这样程序运行起来会慢一些。</li><li>连续的开发的话，推荐使用sbt shell或者连续测试比如<code>~testQuick</code>。</li></ul><p><code>new</code>命令：</p><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs erlang"><span class="hljs-string">$ </span>sbt new scala/scala-seed.g8<br>....<br>A minimal Scala project.<br><br>name [My Something Project]: hello<br><br>Template applied in ./hello<br></code></pre></td></tr></table></figure><ul><li>会创建一个简单的项目，要求输入项目名时输入<code>hello</code>，会在<code>hello/</code>下创建一个新项目。</li></ul><h3 id="sbt使用"><a href="#sbt使用" class="headerlink" title="sbt使用"></a>sbt使用</h3><p>项目的目录结构：</p><ul><li>base directory是包含项目的目录，这里称为项目根目录。</li><li>sbt使用和Maven一样的源码结构，源文件路径都是基于项目根目录的相对路径。</li></ul><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs stata">src/<br>  main/<br>    resources/<br>       &lt;files to <span class="hljs-keyword">include</span> <span class="hljs-keyword">in</span> main jar here&gt;<br>    <span class="hljs-keyword">scala</span>/<br>       &lt;main <span class="hljs-keyword">Scala</span> sources&gt;<br>    <span class="hljs-keyword">scala</span>-2.12/<br>       &lt;main <span class="hljs-keyword">Scala</span> 2.12 specific sources&gt;<br>    java/<br>       &lt;main Java sources&gt;<br>  <span class="hljs-keyword">test</span>/<br>    resources<br>       &lt;files to <span class="hljs-keyword">include</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">test</span> jar here&gt;<br>    <span class="hljs-keyword">scala</span>/<br>       &lt;<span class="hljs-keyword">test</span> <span class="hljs-keyword">Scala</span> sources&gt;<br>    <span class="hljs-keyword">scala</span>-2.12/<br>       &lt;<span class="hljs-keyword">test</span> <span class="hljs-keyword">Scala</span> 2.12 specific sources&gt;<br>    java/<br>       &lt;<span class="hljs-keyword">test</span> Java sources&gt;<br></code></pre></td></tr></table></figure><ul><li>其他<code>src/</code>中的目录会被忽略，所有隐藏目录都会被忽略。</li><li>源码可以被放在根目录的<code>hello/app.scala</code>，对小项目是可行的。然而一般来说，人们倾向于将项目放在<code>src/main/</code>下面来保证事情能够有条理地进行。如果你自行管理定制了项目的构建的话，自定义源码的位置也是可行的。</li><li>sbt的构建定义文件：<code>build.sbt</code></li><li>除此之外，<code>project</code>目录中的<code>.scala</code>文件可以定义项目帮助文件和一次性的插件。</li></ul><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs gradle">build.sbt<br><span class="hljs-keyword">project</span>/<br>  <span class="hljs-keyword">Dependencies</span>.scala<br></code></pre></td></tr></table></figure><ul><li>生成文件：<code>.class</code>，生成的<code>jar</code>，其他文件和文档等会被默认输出到<code>target</code>目录。</li><li>一般生成文件应该要排除在版本控制之外，在<code>.gitignore</code>中添加：</li></ul><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs aspectj"><span class="hljs-keyword">target</span>/<br></code></pre></td></tr></table></figure><p>运行：</p><ul><li>运行sbt shell：<code>sbt</code>无参数运行，进入sbt的提示符，有tab补全和执行历史。</li><li>编译：<code>compile</code></li><li>运行：<code>run</code></li><li>不进入sbt shell直接运行sbt命令：用<code>&quot;&quot;</code>包起来表示是一个命令，相对来说会慢一些。</li></ul><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs excel">sbt <span class="hljs-built_in">clean</span> compile <span class="hljs-string">&quot;testOnly TestA TestB&quot;</span><br></code></pre></td></tr></table></figure><ul><li>会一次执行<code>clean compile testOnly</code>，<code>TestA TestB</code>是传给<code>testOnly</code>的参数。</li><li>保存文件时自动重编译运行测试：<code>~testQuick</code>。</li><li>命令加上<code>~</code>后会进入循环模式，保存文件都会自动运行。回车退出。</li><li>常用命令：</li></ul><table><thead><tr><th>Command</th><th>Description</th></tr></thead><tbody><tr><td>clean</td><td>Deletes all generated files (in the target directory).</td></tr><tr><td>compile</td><td>Compiles the main sources (in src&#x2F;main&#x2F;scala and src&#x2F;main&#x2F;java directories).</td></tr><tr><td>test</td><td>Compiles and runs all tests.</td></tr><tr><td>console</td><td>Starts the Scala interpreter with a classpath including the compiled sources and all dependencies. To return to sbt, type :quit, Ctrl+D (Unix), or Ctrl+Z (Windows).</td></tr><tr><td>run argument*</td><td>Runs the main class for the project in the same virtual machine as sbt.</td></tr><tr><td>package</td><td>Creates a jar file containing the files in src&#x2F;main&#x2F;resources and the classes compiled from src&#x2F;main&#x2F;scala and src&#x2F;main&#x2F;java.</td></tr><tr><td>help command</td><td>Displays detailed help for the specified command. If no command is provided, displays brief descriptions of all commands.</td></tr><tr><td>reload</td><td>Reloads the build definition (build.sbt, project&#x2F;<em>.scala, project&#x2F;</em>.sbt files). Needed if you change the build definition.</td></tr></tbody></table><h3 id="build-sbt"><a href="#build-sbt" class="headerlink" title="build.sbt"></a>build.sbt</h3><p><code>build.sbt</code>构建定义：</p><ul><li>指定sbt版本，这样就使用不同版本的sbt构建同一个项目了。如果指定的版本不可用，那么会自动下载。</li></ul><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">sbt</span>.version=<span class="hljs-number">1</span>.<span class="hljs-number">5</span>.<span class="hljs-number">5</span><br></code></pre></td></tr></table></figure><ul><li>构建定义（build definition）：</li><li>包含了一系列项目（<a href="https://www.scala-sbt.org/1.x/api/sbt/Project.html">Scala中的Project类型</a>），项目这个名词有一定的模糊性，所以其中的一个个项目一般将之称为子项目。</li><li>在<code>build.sbt</code>中可以定义一个在当前目录中的子项目：</li></ul><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cmake">lazy val root = (<span class="hljs-keyword">project</span> in <span class="hljs-keyword">file</span>(<span class="hljs-string">&quot;.&quot;</span>))<br>  .settings(<br>    name := <span class="hljs-string">&quot;Hello&quot;</span>,<br>    scalaVersion := <span class="hljs-string">&quot;2.12.7&quot;</span><br>  )<br></code></pre></td></tr></table></figure><ul><li>项目的名称在<code>.setting</code>方法中用一个键值对定义，key是<code>name</code>，值是一个字符串表示项目名称。</li><li><code>build.sbt</code>定义所有的子项目，包含一些的键值对称为<code>setting</code>表达式，使用一门build.sbt DSL（本质上其实就是Scala）来定义项目。</li></ul><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs go">ThisBuild / organization := <span class="hljs-string">&quot;com.example&quot;</span><br>ThisBuild / scalaVersion := <span class="hljs-string">&quot;2.12.14&quot;</span><br>ThisBuild / version      := <span class="hljs-string">&quot;0.1.0-SNAPSHOT&quot;</span><br><br>lazy val root = (project in file(<span class="hljs-string">&quot;.&quot;</span>))<br>  .settings(<br>    name := <span class="hljs-string">&quot;hello&quot;</span><br>  )<br></code></pre></td></tr></table></figure><ul><li><p>看一看这门DSL的定义：</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgScala_sbt_dsl_setting_expression.png"></p><p>每一个都叫做一个setting expression，其中的一些又被叫做task expression。</p></li><li><p>一个setting expression包含三部分：</p><ol><li>左边是key。</li><li>操作符，这个例子中是<code>:=</code></li><li>右边是setting body。</li></ol></li><li><p>一个key的类型是<code>sbt.SettingKey[T] sbt.TaskKey[T] sbt.InputKey[T]</code>其中一者的实例，T是期望的值类型。</p></li><li><p>比如<code>name</code>就绑定到了<code>SettingKey[String]</code>类型，给个其他类型比如整数的话就会编译错误。</p></li><li><p>在<code>build.sbt</code>中可以穿插<code>val</code> <code>lazy val</code> <code>def</code>，但是不能有顶层<code>object class</code>定义。</p></li></ul><p>expression的key：</p><ul><li>三种类型：<ul><li><code>SettingKey[T]</code> 值仅在加载子项目时计算一次，然后保持。</li><li><code>TaskKey[T]</code> 值被称为一个任务（task），每次都会重新计算（何时？），存在潜在的副作用。</li><li><code>InputKey[T]</code> 值是有命令行输入作为参数的任务，细节见<a href="https://www.scala-sbt.org/1.x/docs/Input-Tasks.html">Input Tasks</a>。</li></ul></li><li>内建的keys就是<code>sbt.Keys</code>单例伴生对象的域。<code>build.sbt</code>隐式导入<code>import sbt.Keys._</code>，<code>sbt.Keys.name</code>就是<code>name</code>，所以其实就是对这些字段做赋值。</li><li>自定义key：使用各自的方法<code>settingKey taskKey inputKey</code>，每个方法需要一个value的类型和描述。key的名称就是被赋值到的引用变量名称。</li><li>定义一个自定义key，名称是<code>hello</code>，类型是<code>TaskKey</code>，对应值类型是<code>Unit</code>：</li></ul><figure class="highlight fsharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs fsharp"><span class="hljs-keyword">lazy</span> <span class="hljs-keyword">val</span> hello <span class="hljs-operator">=</span> taskKey[Unit](<span class="hljs-string">&quot;An example task&quot;</span>)<br></code></pre></td></tr></table></figure><ul><li>所有这种定义都在设置前被求值，无论定义在文件什么位置。</li><li>一般来说，使用<code>lazy val</code>而不是<code>val</code>来避免初始化顺序导致的问题。</li><li>Task和Setting区别：<ul><li>Task是任务，比如<code>compile</code> <code>package</code>都是<code>sbt.Keys</code>中的域，同时也是sbt shell中可执行的命令。应该返回<code>Unit</code>或者返回和这个任务相关的值，比如<code>package</code>是<code>TaskKey[File]</code>值是其创建的jar文件。</li><li>每一次开始一个任务，比如sbt shell中执行<code>compile</code>，sbt都会重新跑（仅）一次这个任务相关的所有任务。</li><li>而Setting仅仅只是一个朴素的设置项。</li></ul></li></ul><p>定义任务和设置：</p><ul><li>使用<code>:=</code>可以将一个设置或者一项计算任务赋值。设置只会在记载项目时计算一次，任务则会在每次执行这个任务被执行时重新执行。</li><li>新建一个任务：</li></ul><figure class="highlight fsharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs fsharp"><span class="hljs-keyword">lazy</span> <span class="hljs-keyword">val</span> hello <span class="hljs-operator">=</span> taskKey[Unit](<span class="hljs-string">&quot;An example task&quot;</span>)<br><br><span class="hljs-keyword">lazy</span> <span class="hljs-keyword">val</span> root <span class="hljs-operator">=</span> (project <span class="hljs-keyword">in</span> file(<span class="hljs-string">&quot;.&quot;</span>))<br>  .settings(<br>    hello <span class="hljs-operator">:=</span> &#123; println(<span class="hljs-string">&quot;Hello!&quot;</span>) &#125;<br>  )<br></code></pre></td></tr></table></figure><ul><li>任务也在<code>.settings</code>中被赋值。</li><li>每次在sbt shell中执行<code>hello</code>都会执行其中<code>println</code>语句。</li><li>定义设置的话已经说过。</li><li>从类型系统的视角来看，对任务赋值得到一个<code>Setting[Task[T]]</code>，对设置赋值得到<code>Setting[T]</code>。<code>T Task[T]</code>的区别有一层隐含的含义：一个设置不能依赖于一个任务。因为设置仅记载是求值一次不会每次都重新运行。</li></ul><p>sbt shell中的key：</p><ul><li>sbt shell中可以输入任何任务名称都会运行该任务，因为这个任务名称是key。运行该任务但并不会显示运行结果值（也就是返回值，类型就是<code>taskKey[T]</code>中的<code>T</code>），要显示结果值，应该使用<code>show &lt;task name&gt;</code>而不是单纯的<code>&lt;task name&gt;</code>。</li><li>如果输入设置的key的话，会显示设置的值。</li><li>要知道一个key的更多信息，可以使用<code>inspect &lt;keyname&gt;</code>。某些信息现在看起来可能不知道含义，但最顶上有类型和简要描述。</li></ul><p>在<code>build.sbt</code>中导入信息：</p><ul><li>比如：</li></ul><figure class="highlight elm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs elm"><span class="hljs-keyword">import</span> sbt._<br><span class="hljs-keyword">import</span> Keys._<br></code></pre></td></tr></table></figure><ul><li>中间不能有空行。</li><li>如果有自动插件（<a href="https://www.scala-sbt.org/1.x/api/sbt/AutoPlugin.html"><code>sbt.AutoPlugin</code></a>，可以从其派生实现自己的插件），那么在其中的<code>autoImport</code>单例对象下的名称会被自动导入。</li></ul><p>Bare .sbt build definition：</p><ul><li>也就是裸的构建定义，设置可以被直接写到<code>.sbt</code>而不是项目的<code>.setting(...)</code>调用下，称之为bare style。</li></ul><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs go">ThisBuild / version := <span class="hljs-string">&quot;1.0&quot;</span><br>ThisBuild / scalaVersion := <span class="hljs-string">&quot;2.12.14&quot;</span><br></code></pre></td></tr></table></figure><ul><li>这种语法推荐用来写在<code>ThisBuild</code>作用域下的设置和添加插件。后续会有作用域和插件的说明。</li></ul><p>添加库依赖：</p><ul><li>为了能够依赖第三方库，有两种方式：</li><li>一是将jar文件直接放在<code>lib/</code>（未管理的依赖）目录下，第二种是添加管理的依赖，通过在<code>.setting(..)</code>调用中对<code>libraryDependencies</code>key做<code>+=</code>操作做到。</li></ul><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs go">val derby = <span class="hljs-string">&quot;org.apache.derby&quot;</span> %% <span class="hljs-string">&quot;derby&quot;</span> % <span class="hljs-string">&quot;10.4.1.3&quot;</span><br><br>ThisBuild / organization := <span class="hljs-string">&quot;com.example&quot;</span><br>ThisBuild / scalaVersion := <span class="hljs-string">&quot;2.12.14&quot;</span><br>ThisBuild / version      := <span class="hljs-string">&quot;0.1.0-SNAPSHOT&quot;</span><br><br>lazy val root = (project in file(<span class="hljs-string">&quot;.&quot;</span>))<br>  .settings(<br>    name := <span class="hljs-string">&quot;Hello&quot;</span>,<br>    libraryDependencies += derby<br>  )<br></code></pre></td></tr></table></figure><ul><li>包含包的组织、包名、和包的版本。可以定义变量来复用。<code>%</code>运算符被用来从字符串构建一个模块ID。</li></ul><h3 id="多项目构建"><a href="#多项目构建" class="headerlink" title="多项目构建"></a>多项目构建</h3><p>多个项目定义：</p><ul><li>在一次构建中编译多个相关联的子项目是很有用的，特别是其间存在依赖，想更改他们所有的时候。</li><li>每个子项目都有自己的目录，构建时都会生成自己的jar文件，</li><li>项目使用<code>lazy val</code>定义一个<a href="https://www.scala-sbt.org/1.x/api/sbt/Project.html">sbt.Project</a>来实现。</li></ul><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cmake">lazy val util = (<span class="hljs-keyword">project</span> in <span class="hljs-keyword">file</span>(<span class="hljs-string">&quot;util&quot;</span>))<br><br>lazy val core = (<span class="hljs-keyword">project</span> in <span class="hljs-keyword">file</span>(<span class="hljs-string">&quot;core&quot;</span>))<br></code></pre></td></tr></table></figure><ul><li>这个<code>val</code>的不变量名称被用做子项目的ID（也即是项目名称），在sbt shell中也用来指代一个子项目。</li><li>后面的<code>in file()</code>调用指定他们的base directory是可选的，目录名就是他们的名称。</li></ul><figure class="highlight fsharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs fsharp"><span class="hljs-keyword">lazy</span> <span class="hljs-keyword">val</span> util <span class="hljs-operator">=</span> project<br><br><span class="hljs-keyword">lazy</span> <span class="hljs-keyword">val</span> core <span class="hljs-operator">=</span> project<br></code></pre></td></tr></table></figure><p>公共设置；</p><ul><li>为了分离出跨子项目的设置，可以将其定义在<code>ThisBuild</code>范围下。<code>ThisBuild</code>表现的像一个普通的子项目名称一样使用，其下用来定义默认值。</li><li>如果定义了多个子项目，并且子项目下没有定义比如<code>scalaVersion</code>这个key，就会查找<code>ThisBuild / scalaVersion</code>。</li><li>这样定义的限制是右边的值只能是纯粹的值或者在<code>Global</code>&#x2F;<code>ThisBuild</code>下的设置。</li><li>子项目范围下没有默认值。</li></ul><figure class="highlight fsharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs fsharp">ThisBuild <span class="hljs-operator">/</span> organization <span class="hljs-operator">:=</span> <span class="hljs-string">&quot;com.example&quot;</span><br>ThisBuild <span class="hljs-operator">/</span> version      <span class="hljs-operator">:=</span> <span class="hljs-string">&quot;0.1.0-SNAPSHOT&quot;</span><br>ThisBuild <span class="hljs-operator">/</span> scalaVersion <span class="hljs-operator">:=</span> <span class="hljs-string">&quot;2.12.14&quot;</span><br><br><span class="hljs-keyword">lazy</span> <span class="hljs-keyword">val</span> core <span class="hljs-operator">=</span> (project <span class="hljs-keyword">in</span> file(<span class="hljs-string">&quot;core&quot;</span>))<br>  .settings(<br>    <span class="hljs-comment">// other settings</span><br>  )<br><br><span class="hljs-keyword">lazy</span> <span class="hljs-keyword">val</span> util <span class="hljs-operator">=</span> (project <span class="hljs-keyword">in</span> file(<span class="hljs-string">&quot;util&quot;</span>))<br>  .settings(<br>    <span class="hljs-comment">// other settings</span><br>  )<br></code></pre></td></tr></table></figure><ul><li>重载后，现在<code>versoin</code>和其他的设置在所有子项目中都会生效。</li></ul><p>另一种定义公共设置的方式：</p><ul><li>将默认设置放在<code>commonSettings</code>下，然后添加到所有子项目中<code>.setting()</code>调用中。</li></ul><figure class="highlight fsharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs fsharp"><span class="hljs-keyword">lazy</span> <span class="hljs-keyword">val</span> commonSettings <span class="hljs-operator">=</span> Seq(<br>  target <span class="hljs-operator">:=</span> &#123; baseDirectory.value <span class="hljs-operator">/</span> <span class="hljs-string">&quot;target2&quot;</span> &#125;<br>)<br><br><span class="hljs-keyword">lazy</span> <span class="hljs-keyword">val</span> core <span class="hljs-operator">=</span> (project <span class="hljs-keyword">in</span> file(<span class="hljs-string">&quot;core&quot;</span>))<br>  .settings(<br>    commonSettings,<br>    <span class="hljs-comment">// other settings</span><br>  )<br><br><span class="hljs-keyword">lazy</span> <span class="hljs-keyword">val</span> util <span class="hljs-operator">=</span> (project <span class="hljs-keyword">in</span> file(<span class="hljs-string">&quot;util&quot;</span>))<br>  .settings(<br>    commonSettings,<br>    <span class="hljs-comment">// other settings</span><br>  )<br></code></pre></td></tr></table></figure><p>项目间依赖：</p><ul><li>项目间可以完全独立，也通常可能会有某种方式的依赖。</li><li>有两种方式的依赖：aggregate and classpath，用<code>.aggregate .dependsOn</code>定义。</li><li>聚合用来广播命令，类路径依赖则是指项目之间存在依赖关系。</li></ul><p>聚合（Aggregation）：</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs cmake">lazy val root = (<span class="hljs-keyword">project</span> in <span class="hljs-keyword">file</span>(<span class="hljs-string">&quot;.&quot;</span>))<br>  .aggregate(util, core)<br><br>lazy val util = (<span class="hljs-keyword">project</span> in <span class="hljs-keyword">file</span>(<span class="hljs-string">&quot;util&quot;</span>))<br><br>lazy val core = (<span class="hljs-keyword">project</span> in <span class="hljs-keyword">file</span>(<span class="hljs-string">&quot;core&quot;</span>))<br></code></pre></td></tr></table></figure><ul><li>这种方式在聚合项目上运行任务时会同样在它聚合的所有子项目上运行。</li><li>比如上面的子项目定义，编译<code>root</code>是会同时编译<code>util core</code>。</li><li>通过在做聚合的项目中定义设置可以修改这种默认行为：</li></ul><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs stylus">lazy val root = (project <span class="hljs-keyword">in</span> <span class="hljs-built_in">file</span>(<span class="hljs-string">&quot;.&quot;</span>))<br>  <span class="hljs-selector-class">.aggregate</span>(util, core)<br>  <span class="hljs-selector-class">.settings</span>(<br>    update / aggregate := false<br>  )<br><br><span class="hljs-selector-attr">[...]</span><br></code></pre></td></tr></table></figure><ul><li>上面设置表示在root项目上执行<code>update</code>是就不会在被聚合的子项目上执行。<code>update / aggregate</code>是update作用域下的key。</li></ul><p>类路径依赖：</p><ul><li>一个项目可能依赖另一个项目的代码，通过<code>.dependsOn(proj1, proj2, ...)</code>方法调用来定义。依赖之后就会被添加到classpth，从而能够导入。</li></ul><figure class="highlight fsharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs fsharp"><span class="hljs-keyword">lazy</span> <span class="hljs-keyword">val</span> core <span class="hljs-operator">=</span> project.dependsOn(util)<br></code></pre></td></tr></table></figure><ul><li>现在在<code>core</code>中就可以调用<code>util</code>中的代码了。这同样也确定了代码编译顺序必然是先<code>util</code>后<code>core</code>。</li><li><code>core dependsOn(util)</code>意味着<code>core</code>的编译配置依赖<code>util</code>，也可以显式通过<code>dependsOn(util % &quot;compile-&gt;compile&quot;)</code>这种方式来指定，<code>compile-&gt;compile</code>中的<code>-&gt;</code>意味着依赖。因此如果是<code>&quot;test-&gt;compile&quot;</code>就以为着<code>core</code>的<code>test</code>配置依赖<code>util</code>的<code>compile</code>配置。可以忽略后面的<code>-&gt;config</code>部分意味着就是<code>-&gt;comile</code>。</li><li>一个比较有用的定义是<code>test-&gt;test</code>意味着测试<code>core</code>是先测试<code>util</code>。</li><li>可以用分好分隔：<code>dependsOn(util % &quot;test-&gt;test;compile-&gt;compile&quot;)</code>。</li></ul><p>项目间依赖：</p><ul><li><p>在大项目中，会有许多文件，持续监视文件修改并重新编译将会消耗大量磁盘和IO资源。</p></li><li><p>sbt使用</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">trackInternalDependencies</span><br></code></pre></td></tr></table></figure><p>和</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">exportToInternal</span><br></code></pre></td></tr></table></figure><p>设置用来控制执行</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">compile</span><br></code></pre></td></tr></table></figure><p>任务时是否触发独立子项目的编译。两个key都接受三个输入：</p><ul><li><code>TrackLevel.NoTracking</code></li><li><code>TrackLevel.TrackIfMissing</code></li><li><code>TrackLevel.TrackAlways</code> 默认是这一项。</li><li>含义显而易见。</li></ul></li><li><p><code>trackInternalDependencies</code>设置如果是<code>TrackLevel.TrackIfMissing</code>，那么sbt将不会尝试自动编译项目间依赖，除非输出目录中的<code>*.class</code>文件缺失了（或者<code>exportJars</code>时jar文件缺失了）。</p></li><li><p>当被设置为<code>TrackLevel.NoTracking</code>，项目将依赖将被跳过。但是classpth仍然会被添加，依赖图也会显示他们还是依赖的。这么做的目的是为了减小检查文件修改的IO负担。</p></li><li><p>设置方法：</p></li></ul><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cmake">ThisBuild / trackInternalDependencies := TrackLevel.TrackIfMissing<br>ThisBuild / exportJars := <span class="hljs-keyword">true</span><br><br>lazy val root = (<span class="hljs-keyword">project</span> in <span class="hljs-keyword">file</span>(<span class="hljs-string">&quot;.&quot;</span>))<br>  .aggregate(....)<br></code></pre></td></tr></table></figure><ul><li><code>exportToInternal</code>设置允许依赖于当前项目的子项目跳过内部追踪。用在一个子项目上，用在当前不关心的依赖于其他项目的子项目，当其他项目发生修改重新编译，它也不会重新编译。</li></ul><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs stylus">lazy val dontTrackMe = (project <span class="hljs-keyword">in</span> <span class="hljs-built_in">file</span>(<span class="hljs-string">&quot;dontTrackMe&quot;</span>))<br>  <span class="hljs-selector-class">.settings</span>(<br>    exportToInternal := TrackLevel<span class="hljs-selector-class">.NoTracking</span><br>  )<br></code></pre></td></tr></table></figure><ul><li><code>trackInternalDependencies</code>和<code>exportToInternal</code>，比如当前修改项目时A，A依赖B，C依赖A，那么前者是针对B也就是当前项目依赖的那些子项目，后者针对C也就是依赖当前项目的子项目。这是我的理解，应该是这个样子！</li><li>如果没理解错的话，项目的依赖关系（指classpth，会调用的那种依赖）应该是一棵树，而不会有环图。</li></ul><p>默认的根项目：</p><ul><li>如果没有为最顶层目录<code>.</code>定义项目，那么sbt会创建一个默认的然后在构建时聚合所有子项目。</li></ul><p>与项目的交互：</p><ul><li><code>projects</code>列出所有子项目。</li><li><code>proejct</code>列出当前项目，<code>project &lt;projectname&gt;</code>切换项目。运行一个任务比如<code>compile</code>时是针对当前项目。</li><li>也可以通过指定项目名称来在某个项目上运行任务：<code>subProjectID / &lt;taskname&gt;</code>。</li></ul><p>公共代码：</p><ul><li><code>.sbt</code>文件之间的定义是不共享的。</li><li>为了能够在不同<code>.sbt</code>之间共享代码，需要在根目录的<code>project/</code>下面（子目录中的是没有用的，会被忽略，只有根目录中的才会有效）定义一个或多个scala文件。后续会详述。</li></ul><p>子项目中的<code>.sbt</code>文件：</p><ul><li>所有的<code>.sbt</code>文件都会被合并到一个整体的构建（build）中来，但是只在他们自己的范围内起作用。定义不会被共享。</li><li>比如顶层<code>hello</code>目录中初始化<code>sbt</code>，<code>.</code>定义根项目<code>hello</code>，<code>hello/foo/ hello/bar</code>分别定义项目foo和bar并且有自己的<code>build.sbt</code>并把项目定义在了其中，其中定义了自己的不同版本。</li><li>那么执行<code>show version</code>的结果就是这样的：</li></ul><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs excel">&gt; show version<br>[<span class="hljs-built_in">info</span>] hello-foo/*<span class="hljs-symbol">:ve</span>rsion<br>[<span class="hljs-built_in">info</span>]  <span class="hljs-number">0.7</span><br>[<span class="hljs-built_in">info</span>] hello-bar/*<span class="hljs-symbol">:ve</span>rsion<br>[<span class="hljs-built_in">info</span>]  <span class="hljs-number">0.9</span><br>[<span class="hljs-built_in">info</span>] hello/*<span class="hljs-symbol">:ve</span>rsion<br>[<span class="hljs-built_in">info</span>]  <span class="hljs-number">0.5</span><br></code></pre></td></tr></table></figure><ul><li>所有的<code>build.sbt</code>都是整个构建的一部分，但都有自己的作用范围。</li><li>可以分开定义，也可以合起来定义<code>build.sbt</code>，项目很多时都定义在根目录中可能就太复杂了，定义在子目录找起来好像又挺麻烦。</li><li>风格选择：<ul><li>子项目的设置在子项目的<code>.sbt</code>中定义，根<code>build.sbt</code>中只定义最小的项目声明，形如：<code>lazy val foo = (project in file(&quot;foo&quot;))</code>不修改任何设置。</li><li>推荐是将所有项目定义全都放在根目录中的<code>build.sbt</code>，保持项目定义在一个文件中。</li><li>都可以，这完全取决于你。</li></ul></li></ul><h3 id="任务图"><a href="#任务图" class="headerlink" title="任务图"></a>任务图</h3><p>任务图：</p><ul><li>除了将设置视作一个个键值对，更好的比喻其实是以有向无环图（DAG）。边的方向表示<strong>在之前发生</strong>，称之为任务图（Task Graph） 。</li><li>Setting&#x2F;Task expression就是前面的在<code>.setting(...)</code>中定义了设置或者任务的表达式。</li></ul><p>任务间依赖：</p><ul><li>使用一个特殊的<code>.value</code>方法调用来解释任务之间的依赖。</li><li>直到非常熟悉<code>hello.sbt</code>之前，都推荐将<code>.value</code>调用放在task定义块中最上方。</li><li>除了使用一个不变量赋值的方式，也可以使用内联的<code>.value</code>调用，更加间接，也不用去想变量名。</li><li><code>.value</code>调用会在进入task body之前被求值，这是需要非常注意的。</li><li>测试：</li></ul><figure class="highlight fsharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs fsharp"><span class="hljs-keyword">lazy</span> <span class="hljs-keyword">val</span> hi <span class="hljs-operator">=</span> taskKey[Unit](<span class="hljs-string">&quot;An example task for dependency&quot;</span>)<br><br><span class="hljs-keyword">lazy</span> <span class="hljs-keyword">val</span> hello <span class="hljs-operator">=</span> (project <span class="hljs-keyword">in</span> file(<span class="hljs-string">&quot;.&quot;</span>))<br>  .aggregate(helloCore)<br>  .dependsOn(helloCore)<br>  <span class="hljs-comment">// .enablePlugins(JavaAppPackaging)</span><br>  .settings(<br>    name <span class="hljs-operator">:=</span> <span class="hljs-string">&quot;Hello&quot;</span>,<br>    libraryDependencies <span class="hljs-operator">+=</span> scalaTest <span class="hljs-operator">%</span> Test,<br>    hi <span class="hljs-operator">:=</span> &#123;<br>      <span class="hljs-keyword">val</span> ur <span class="hljs-operator">=</span> update.value <span class="hljs-comment">// streams task happens-before hi</span><br>      <span class="hljs-keyword">if</span> (<span class="hljs-literal">false</span>) &#123;<br>        <span class="hljs-keyword">val</span> x <span class="hljs-operator">=</span> clean.value <span class="hljs-comment">// clean task happens-before hi</span><br>      &#125;<br>    &#125;<br>  )<br></code></pre></td></tr></table></figure><ul><li>此时任务<code>hi</code>就会依赖于任务<code>update</code>和<code>clean</code>，并且这两个任务是在进入<code>hi</code>任务体前执行的，且不确定两者先后顺序，可先可后可并行。</li><li>在任务体中调用<code>.value</code>仅用来表明任务之间的依赖关系。</li><li>先编译项目，执行<code>hi</code>后会发现<code>target/scala-2.13/clsses/</code>被清除，就是因为执行了<code>clean</code>任务。</li><li>查看任务间依赖：在<code>Dependencies:</code>后可以看到。</li></ul><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">inspect hi</span><br></code></pre></td></tr></table></figure><ul><li>执行<code>inspect tree compile</code>会看到<code>compile</code>命令的依赖树，什么含义暂时不知。</li><li>sbt中的构建任务依赖是自动的而不是显式定义的，如果通过<code>.value</code>定义了，那么会造成任务间依赖。</li></ul><p>任务依赖设置：</p><ul><li>在任务体定义中调用设置的<code>.value</code>就行。</li><li>但设置是不能依赖任务的，因为设置只在重载时执行一次，而任务一直都可以执行。</li></ul><p>设置依赖设置：</p><ul><li>可以将设置看做仅在记加载是执行一次的任务，所以设置也可以依赖设置。</li><li>同样其中调用<code>.value</code>就可以依赖，并且执行时求值：</li><li>一个实际的例子：当Scala版本是2.11时讲将<code>Compile / scalaSource</code>定义到一个不同的目录。</li></ul><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs coq">Compile / scalaSource := &#123;<br>  val old = (Compile / scalaSource).value<br>  scalaBinaryVersion.value <span class="hljs-keyword">match</span> &#123;<br>    <span class="hljs-built_in">case</span> <span class="hljs-string">&quot;2.11&quot;</span> =&gt; baseDirectory.value / <span class="hljs-string">&quot;src-2.11&quot;</span> / <span class="hljs-string">&quot;main&quot;</span> / <span class="hljs-string">&quot;scala&quot;</span><br>    <span class="hljs-built_in">case</span> <span class="hljs-keyword">_</span>      =&gt; old<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>再看<code>build.sbt</code>DSL：</p><ul><li>构建了一个设置和任务的有向无环图。</li><li>设置表达式编码了设置、任务以及他们之间的依赖。</li><li>这种结构在Make&#x2F;Ant&#x2F;Rake等构建工具中很常见。</li><li>基于流的编程，减少了重复过程，好处：</li><li>一个任务仅仅只会执行一次，即使它被多个任务所依赖比如<code>Compile / compile</code>。</li><li>基于任务图，任务引擎会安排不相关的任务并行执行。</li><li>关注点分离和灵活性，任务图让用户可以将任务以不同的方式连接到一起，sbt和各种插件可以提供各种各样的特性比如库依赖管理等。</li></ul><p>总结：</p><ul><li>核心就是任务图，任务之间的关系是一个有向无环图。</li><li><code>hello.sbt</code>是一个设计来面向依赖编程（dependency-oriented programming）的DSL，或者叫基于流（flow）的编程。就像Makefile。语法就像Scala，但并不等同于Scala，语义上是有区别的。</li><li>基于流的编程的核心是：减少重复过程、并行处理和定制化。</li></ul><h3 id="更多内容"><a href="#更多内容" class="headerlink" title="更多内容"></a>更多内容</h3><p>更多内容就不翻译了，官网上第一章也有中文翻译。需要时再去阅读，现阶段感觉都用不到，真写项目了再看不迟。</p><h2 id="并发编程"><a href="#并发编程" class="headerlink" title="并发编程"></a>并发编程</h2><p>TODO</p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>总结：</p><ul><li>看起来是一门静态类型语言，提供了很其强大的类型推导，可以一定程度上实现隐式静态类型，但写起来如果高度依赖类型推导的话会和动态类型一样简洁，仅需提供少量必须的类型，只是有点牺牲可读性。</li><li>函数式编程很有趣。</li><li>语法糖太太太多了，虽然看起来更简洁了，但是读起来不一定更简单，学起来心智负担也更大。</li><li>运算符非常灵活，目前遇到过的运算符最灵活的语言。</li><li>并发编程还没有学，TODO。</li><li>Scala语法确实有点太强大了，当然软件工程的东西都是tradeoff，写起来爽用起来复杂学起来难。</li></ul><p>Scala是我目前学过的最舒服的语言，很多特点简直太棒了，如果此生只能选一门语言的话，那我可能真会选这门刚学了几天的语言。吸引我的点：</p><ul><li>函数式编程，和集合的映射推导结合起来很有用。</li><li>类型推导，像动态语言用起来的感觉，但也有编译期类型检查，再加上隐式类型转换，真我全都要。</li><li>各种能简则简的语法糖，初看可能很诧异，习惯之后只能说去**的java，简洁而不简单。</li><li>运算符重载，容易被滥用，但用得好会使代码进一步简化，当然各式各样的运算符会进一步增加读代码的难度。</li><li>更加纯粹的面向对象，万物皆是对象。</li></ul></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    
    <tags>
      
      <tag>Scala</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>数据中台-结束语_数据中台从哪里来，要到哪里去？</title>
    <link href="/posts/2022/05/80c26e4a.html"/>
    <url>/posts/2022/05/80c26e4a.html</url>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="25146fb3f21b17be3bf11f3fed8bef90a23389ed0672dc2b9d1a18d56cd17e4c">4e4fc70cc91fd42566446082a751780fd5618d041572b8bed7c41bda7a5fe16038be3debec314ec22c9c045460029955b65b7de78ff6f72bccea49dfe83da6f98478a64487a9e4141dd028df166e39355b0d9854da0d50d4000475bfdeb74bb63ef22052328d8aa1b8e36963eb9e48302d4382905966a8becb4b38634f1cec8bc7c03c7e2422aa5e537134876860c5851db5b201ba0bb226411a3887b01459db8641a4c683d6315b58ee3c5d91b5731e51f2d156b4c912e0f26eb35db76d5df7076806ef49000639e555ae4274876ffd46c75da7d4b39a03c76284418c2f08d494f468ad6e4ed44aa74b49217d0570531e77d9bf634d445088d7435cffc8f0fdc6bb155fd0622d196160af8cd8de0da5683007dbb5290d8798751e0bc6a49a321731af539c93731df8600e30e53bfe657e833d599ab82686c6e09fb054529e757dcb8848da43c8997bbda622d599cfd01b945e4b86dacda39fbeb0060938a3de189e5898e2676821e42a13de53c459de886115c222644ece17fe0b7c6e7ef1bdfb0e16b90a8b514c049e8a854f46022f6313d047210c83aa5ea1bd049188b19b6db9cae92de4818ebab6815503b317a96a18cc1e10712048f77e8897d47fa2a0a24ca342cff8b32d9685915965a73a31141a47a3a92fe31712f9cff25edd0335c5fdfae3e92cd8af7f07309649cb86746c823587ff2e4c4e30572d4143a04c618c843181331c5821eab88504077bd629058d6ed427e8b4cbdc402fcfe821c4915d51c5374cf90c8e6901f0518448818df4ac7c61f5e9cae2f7735f56d32590f949678b0890702be88a34d2ce7385d0d00d67fea9aa30ad97e8d82f8ba9d12f094481dc71bddae97d855e593f854cf054f6e0d55b728b40e5f8d4d463d1c9ef95bf898fcd5db01120c997d78a7708b396737900e1d5699fc6b74a62290e1b313db8d8f143df38dcbf05056278660a9578c15cb244eaddf7b9fe376d51464be57df25b9dcfa0f8b74b61e2edb687d9fccef54d22e74ebc7bee5fce291f844fd7b20226e4fd85405344132948fc6e766e495788383fed960f6e559b5b068ec3ac229bcc7f7b729ccea2e0556a41654d708133c3f13faecb6e046b91e217e4c713d9ee857892e04286b22ee5e06975ec2150818319e71c69c00a00524e2f578f5e3b8b8513bc979452a4beb193759d9ee01998ba4bd8c1dfdf67187205b4e35a5a9c0e8ba2b5b42510ad8e78d5d543faf9b25ff696e1084fd2313bb3c7fbe91dd1393503f1d226c85edaf83ab6213913e508893c5e9cae44b0ed152d61d0de5e44b2233fd429a0ee0e64ec0cf06af16b683325323948c98759f6b91cfc7d164473cc93816dfbb5739e6b0580a62f977d8177bf753343ee718b31146e01ecc04c77e1109bc8dcbeb460f767996dbb2d6e761fb098010e606bc32ddb0103ef060aed40b4549c2400e4ebdd403f07fa7d1bc0df9efc69d37bca1ea060aa02a0beef15407c81c0a005e34f6ce3a8751f91ec1500a6567498a6c2c00ccdb6d426518098cf10a88ae2b5297d14fa49a0c96c8deabb484603f61becb736ae45c35e223b7f67bf595ded51103527e02779652ba66189330e676424edff18afd6dd97dcd162cd8b9ff9560ed078e781b817c027b8a2aa21ccd602441e8cd8320c0c215e6c315faae213ce50e9837c16671149282248670422348fd455409b1c3b1af88cf854c80f84c8d5af45dc81bb6bec95db39aa29e320c4c3d676a14adf9119f1d278cca24437a55803151433f3533c8392946e25ff9aa5d4348a3c4845529acdf64c66fc4d2cb08d467173a82c0d65fe5b5e3911a44a90ab346034285f1292beaddfad2e87260023d7eb1c6190bbeb3a57e63a01fe48477a4e84fd26e73c6e998b82740daf4db18c9bb8e1f83dfac3cac18bf34383520c2beb3ea984e90f7ef49acd5d1532654006ee12dc149064a41859789c16e2e5a56d4c5dee6349efdc711a4b0c579e570aaf6faed3a1a8cb0d876d0dbdd054cc85f650ca94b0fb782e40afbd240f9e1e97a994747399e5fd3364c9d4ede830fbb420c42fb8f976b9c0b545087a960b19d3a7a029dcee14daaa14d8912a605e865327cd305a09169a5a47e24d43b49306dbeb25f84b54c1d041a646e2cdcbf17670c785d766643f30b4433dc34ef363a113b0ee37556a4d640949836b2f1f539a959f55092bcaac70985c4ad1c3331d4eeef0f4be1e4025561e9502d5e3960c16ff28dee4c6c80836a3899ce38ad041c30f08ff54934fee2ad3983cf7500fc995bedf8c2338616b6a2f24f8400ce179de1ecd1270a63e4c57b9099003559de08852e7d801b6e1f6deacbc2cd1f85933ba8506ad75eb550cb519dcae8bc66a59b69212a398ae0cd01fa8c76e4299c27ba29ad3317762705f4df0609fc453b3dff7b65d3dbee27d6c60d868f0611a2f42b39ee27d06df14e1f58706a9caa19fbdfcb85b5d3af7ea0cc659a26b0be79ed5125faee8e70199b2095b7f8b7d5702b59348977969b20d0558549846d0d9d5ae7d8528693093d65457efedea29b45bac27fb2cbe0f88d5c35f37876fd67e959c867ef4e6880b3858bef1fff479622f4c5b80f7227cbe1f400e2780221c0c7e1371d26e3c2fb51d3f855fc36e45c04613888bfa850b49b8466b4e88ed21e26e038345ddd74a6e99038836f3cc7a7c73adb3e7f4ec0bc2cb32e827d201f3d057f21ccdd6d7d4468065320e09888f919bd5082c6072f4efab0baf498ea20abc169b66455dd79839f5934a75bab0e74727aa44457d33b0cfa6aa8c457e5afafcc64aaaf5611294f8cd3fa0004a50328ee541c76c894747d018e4cb28ecd575de12b05dd17ff69dc919482f7ace044cab79dd429dceb24831a64312ac4106d6731617f31bd8697f6650f78f85d5e4497c7870346c0e946822a270f8a008c07e9a5b0615055f5efbc0846028998d3862dd42cb9264edccf374169721803f999579657532b87991da5cb883973b9cddb236a34da9c7872cb9f0d265f79b22fc04d952ba070e3e6fe6212fd5a50e61ad59fffd64e4fa608af9a5f04abdf292791fe06472e093d868b202326599e7a89a1bedb80909d3c86dc1ad88aef5517cbfc3a06ee391f684fb4ee5776a7bf32a62f75c4d8fca8f5a27f0111f09a8b80967909801cdc3299139e0f04538851e191e87f561d18cceb253431a16ada81630996a6b0ea59dd670cd125064af40c4fc0e80facfdbf3ab6e127e0ba622429c800d7f1e1d8b71746ca504db2f0aa908fc41d9aaf0c4943e63b3216ac9e6d8aa018a2e889824d85df4d2cdcc4f79ac279dc07bfeca06a7a5342ab032768ad347b7fc4b0a0a68e11e071a225b326fa7fab515e6ebff739eb0363ec3ca2c9097f5b25b03e575684848d364deedd6097b4db20e55cb180b20cb601f921c33490e2d919d513310d502dc61ddf501be08ac3688e52c3155ea1d78e9cf2ca0ae89032b3a68fe394b436a6af2cdbb65902bb2b7a6821e7f1d21b366455a33737e29b8e2c88cc09cd42a7597ddc59705c415e51c3ef83badcd29c5daa97bcf4fac93418e77a8a39b05b1d539c2a5522e106c2c1b762cd24e9b2baee76c69626fcbd15b44e8abc77835a525d52007a4a1731f544e30d2d045572730faf8800623d42d49ea78c322c473082a301bdc4d97223b939c3990dde36d0b3bed8e909dd5fe5cd631f97feca70532ca07e089385a0afdb13eb57f7fd695e112824f32374e279abdd783bca60b928426ea4f2923d225af57ded4cf2fe236bc5c46853447798e4f6c4c000f2005973cd86fca012daba32399d54c2aa5650e4820ec4d9988312f7b0d48666f75415553ad9f86dec0e433ff95d6e3e2f81ccaf7aa6006bc2c270a0fdeda9d3fdb772f220f820dc0b2a0e23adacad45279ec1a275d55b84fad2a7358597bc8a3048b8daba1a6fd411973e6341d432f2a8d73b08ac5ff5a1707e7e819ff910f4522309321c9d09eb5a96cbe09fd8c788ee0e6f6bf35a80288d52a631e4a14f7436389ab8afc2eb37340f3f86405bd44a3735da9eae5abf3f3ef5f3316159752ed435942df002726f939db4b794dcd093acff2ef951fce42ea8703ba04ea31d11b7303bd4cb23e7a598fb47f759eb2f2e440015aa515c19e60cd72805a42d3fd1c745eddb9c2b3657c8c6731380d30ca9fd9a95fb8355ac0066d48b0907a536ae5dbfaf6c0a32e00aafd3ddd905024707dce02347d1eecc0ffb6ceddcfb1c2def253eed105e1df07b2eb876f25f642e87fce3c62915663d8fbcdada83f53f4134164121b9614ab89ff41c3fe0d74e7d849d96e4145abd343b2149d9c79368354b7808e7a251810cde671738a74497e2fdd375c6b25a5cf0ec0f300f6d9af6853eea3a092ba8300f31bd5603cceef2b035c80f8c659aead21c04af9b165e9eb93a7ef14b2b8bfc0b998fa642129ddcf953a0dd9bf700228568f1cf86798a72edbd413dd998da5aefd10dcf6efd41af736aa7d651aa4ff4d51ffcbfc4b9d18f84932c2ea0df1aac51dd12fda938d5180b4fa0f4e314150b4f591fef25b19e041590f1564c71570f7fd70cd62d160ccc2d951dd63b8e1727381ea1a2dbc727033e48d0f41b11f2cca3a111be0e8460ae512eede5af4f9d728c13d49b2987434faa6cdd9cfad9f45874ecd0a8067bc172a7cf383694222552001d52fa1cb7b0be325e6f616831db15b65576ad5e9424eb0f5d1c56317c6a066e7a0292afb7f45a74c1a7e0527a47f8d4571c0930ffe3e6b82aa073eb60ea1d7635edbca97008fc17c3acbed9939c490191b4d06f9302d8664f5d17e12d9c5f3fec95bc165374aa91c175fb2564f82f8c9f253914a0342b4a84cc97bc3bfd4560a553670f3017e52db6cc9c6a547c704e823f3ddfb5400d05bf217ee2179617e08cedbc227d85860da519548d0bbaca89b75ab0d8cc67d36be364d016c8f915ac18c5e201bf8793ca63ef9b8631df9785423954c8b8ec89aaff9b11e202aa6ea00eb60338c4a5c1413e9913ed2b659f176e903f022823aea063fe733c35e5b640891bcea3e7b6e6e8f23efc34618ce17271754f06ccd2178d96b7006ffa682cebcef13fd8fc67144bbae5d3274d9e8dd8c611398e4f49eb34da3e1dc392b1653edbea5b22b7ad5f7e8708facd4fe45170da3f303e97d2c56e56979d2fd49b7f535b35e0f2c50901b4b8a5d27814f642d084f173b0a3f17b5357a8f1fca7a63f03dbac063335d8f97ead834cfb50b79446a52889830e4cb3b9534811808ae769f03a2c543f8c679262b22c9e5dee732874d714363786264a42530a46b80a21d46ea78e46d72f016989793318b7a2988cf6d541571e4c4319386697b95caf22d6890f6c944220677ea73615309de793263b5f87f32cdf244d1100628a0bac15d936c4f97fc7ddc1d3c79a9d4b64f65e6ea02b1b0b4069a57ae9b84a92e591546588883fc2f421be43a6859105ea0255630ba7248aa9fbbff8c1e50d4ed6cdac6f84342e496dc9a3188b0458ee28a3bf12f5952f5dc2b769e690ba03b73af2e9d73b0f01b59e24fbc5d94a23e2a841c79536c361a307f22db933895970e6aa76f57b855e41a44f6893e8100a621bff18e231bebe92ee22f0f8ac5eaff1093f2e3921ddb2f04a7bede74d85cdc40f481ee0f879a5f68780c52e89067cf4d4d25bf85528412b001d4c45b73f556c160950e33c8c04a4d0f93e66e48006e70019b0f384762eae9ef2c2a6da589c8b190ae808f90092ba8a044ad0972049493c9f5788fa6ae1d79c5dc42e9ebf0abd33d61b280ed6e8860ff571c620e7d7cc560bb8db29920cbe98b46c301b89e8f6203fed288caa1bcf430d2441158b5673d867f8993035dee8e6aab5b2149e06fa0c44f9fd44522120f81b2365f949f6d40230d548c3867f89dd921d0733ac181fc4e85d62ee229946b8e05e9d9f556b2f973ca4d51e0a0cfc7aa22f06431380e3ad6f45adfd8ef7a5b69d1ca87a567dd151e14920f0045433c18406b7cb76ff7079890ecb29cad76c44e936e5f0ec40db45b54fdeb7f4ab0c3b4099e36118ce67c4959f76304f82a4d8518462cbca598d52bfe6aab2be6befefc9c3fcbd3011b16aa61f4ae9713dc82e6eef5de47dfee569266869a738b3bfc765e27bc2dc86bc0abe532eb5a27b95ea727e25c18b75589b4a218397f63a064d79e03e63e91939258269d7462dbc4480c7b6f18e585e34a048e14c5b65a95cff65cf692eceeb326873a3c42ec0808f261b4569fee972a99dd03616e4062a4eb7d6bf881c7068cb223df1db44e0ec0eee84146fedd9097edbccd7d22a5becd28fd3f94e4b66e7ab84e52fe3befeb22aca10c72caf8f99de13b3a874d94831cec1f624bf4effd4295efa948c9a6a589d46278d473902db2751e35eba42941e942fd81c7d193d2380399ff6fe72ac340b1b79e6e91f1dcf976a952c4bbcb3108f27bbfc63d18b06c0172d5dc1ce677b0e068f9f0244d6b686de222a5929840969f19eaeb54ba28b5a4d881cd9b4d06db1a0ffcdf7ca1f43f989d07ce79ae43a596477ab05a065572f02a216435265352082c5593de7eb82bfdd3b479a614757360be1e3c7f32fd3aeb76bec065e8da9ef5845f2bae4bc1c4aadf0963a50e7c10de04fb43db0d59ab635c956af5a76ed7b52b772a89f2dc2bd513db2966935f5962710334dda0694091be9c99fae0994ec0f238ecbc6385c7eeddb53e384136e2e5147506fda3bbbd494dddc7e891152c0f8116b29dc77e4d15166e7982c5459dafa5c46c30178f1c5fff5fa9c12db13429ce8eec5dbc4984910f3fe1ddf4e0933efb5b8173a490f6f12b639f11b899bc4bc4adbf25bc0c741ba0d7c03b29f08d9256517331c12643f5e92100a232abbc58e78276519ebf5be302bbe3e45251541f2e317a6ff08cb14d8437f244581f2aefda50da05513414f24e1b7fd1a452fd84abd0423eb300567f1494c905b841d5cb142250106d26526adb63fc188d79b16d08f6dce4516ad82ad93d852ab804358c05dd4c51448f6b3ef5d437d59f7a1a1970f0c8ba14aa48a89ad3ccafe5a9d85ffbf121802283e182510d3990bafdb20fcce0cbb5910b231a6e18aba84dbe5a57748dc296c332e6229ac03c392e022e2389f9737e8c79d93ee44f65fdc674d7a1d6e4c5c50adc1e5d01c2e6913606a5990a41ccf5c09494c00073fc751327e943717a4b2be94a2ffeac536a6966b24f570d93446e8a0d15452e0beb2d401715e9c9476e29085e255284f89838c1483db86e7aa1374e2dc094e9174b0f027e80f86ce776993c173d725f84631a9c22fed09493da15f17a906a54daed9013feadd51e86faf8c82afaa25148fe122f1f27a0e9da75bd88520fe27821e0887f2ab4e11bd6f9e2c51d386715093d58a6045e773786b3bc0cd19e7648ca4557f14a6d2aa4e101dfa532a44ac1c7d59d72130b9000fccc6e9b00ade3c05e559898f29321d85476fe56b2aac44fdf00d5c09993a113316cf8b0b3376129d3e51cae04e5bda778703b612c61f8a683d17ca1c54e7dd1cd8107baaad238c8db5289dcde00ed047e6b519140e32e79c40adbf2ecdac8d5078a5cf7e3e379d325368702854c2453041e27ff337db1fd0967306c96fd148066ec680dfaa7762a7b720de86bbe7ca43bd9928e966dda0351855f1908280027753fc08676221db810122dafcaa6bf1a94692edb9aaa68950636cca66d471eb60551c7f13a8db749c8ab8a44dc5037819b0d7554603d2204d76d7636782aa71b6e04b3b08bf8efcbd2bfff8803eb54102c3f2a1c90dc0be8c0f9e268d7a88d97dbc5e244415ff7294f2a7427c1d050badf6f58e8ba8eba82bc2f1a15b5980ee0fdacf73b5b82d41e7327f25b1a6187268441d313bcd0633ab0af10dbb1d44f557ea46b77a02273bf5e78048924db7ccc758e918eb3939c992993af4b5f44aa55f57f5c3fedb4770a91f07b060b592423ab78684b532628ffa30f8c52f11bbda026b2a740c15ed5752a34461b2d9918d823a8288fce32afcd831a6befbf81f5e0b10b974646a2e5dc88e3d110cc746a0188587564e4ae8e4e151245a07278ffef1ca8bbe56d2df3ddb1e9d3d0aeb5549625e66b79b3f7fef261fc6ad9c11531cbb94d6516d482ee320967b1637ec03f2b5ccbde7879722181cf13b1c09d3661514b5e6c44a8e2cfe4490049eac0632c4a908a278ff326025211b4dd5c56a10bd1a5d49e90b2c776759d147cc79e21a4eaf2c780f11bc2ec6c21908d1f2749753ddba2a216914dbe49529dc55a623c69eca2d97979710f28ba49953f4aeeb64f767c553acec6fda289b32cf119ad6f13abeb29ea9886dea6f0974b6da675f43f251b1d6fba2081148f3793174b972634a00bf5b95383b07500838700adf82a29e16562da5cace0e8f440fc3876f16925a6ff28627774c462b6c42fd7aff0eddae0e4855047156733a4aae60b20ed54d27023872765fb9c9ecc6ffa1cbdae1aca9a1121a0eeca9f4e51e5c3d02210fa2923c3439c1e7d6164f184edba1ebea95b9bdc6d0bcb570b2f8f29d42ad7eac4a9baeb96ac993b82c88eae6065bb2dbd461be263abb566b08398f5c3252452c33389cafd4e570a42bb3d8e661ea7ce380087bd506c3747a34708839cf5e93866283a6415ebb826ca730ce738d60a68cd879c80df2d7b614dd6803644f441bd184faf8a5af6afe038c6bc24ca91fa5e04fc0af1336576febd972a59b03b2b4041e6c54c512c728e1077018ef33f281a89fc87f3e913f136b87fb7dc31048e2bbb239571b7bf49d444e77f7a90ba04da0d5cc0d1fa98c8d00bca076ea47d07bae9861ce607bc453fc1b59185ae9b14b0e5adfcdfdc570d5eb9a7c47f60bf805eb9d31a7a5b89ef23cbde4a097e32401f3b718abdc61b875c362fd30c453b98bc4eb5226f047254b55374938dc258260dff5665882b6679f1124ef8bf840bad2eb10d5d11a136f96a26b386352330baefa7beea3c9d32a378ff8f382d05d6b3e1f3bb5f86372b37a7ebef756822d79d6026107621e3dfb975810835fcaf73d4eed84182f4d9a601ae7d31ad77d91222b494f4ff963b4238cc39d1b77bf548419c3c718ff00401278cfc76e0fd046a5448d9a9ef7e617e07c7433846d6b693a531e38895612a638baf9d2384f443c77d982e8938f3784a2055b1ec3c24aa78849473a3b692744b04963e9a0ddf17b0837f79cb77eb05b31efcf37a71510950dc2af0b494aca5bd84170b0a026bda493d63f13786ef9f8ef43c4fa41164c4e98212206b70e3ae1acc6e037d24f11dc9ef237a855665c2db4f1bb3bb6da70e048c8017028a3f33bf5a0fc436a1a812dd180313160af1a1fa7625b2dc3dc7a01c13e4a0dcad4b263362d3f01866bf93d16f686427ef2c925a777c286d2321a40cc4480a7d5d4a11b55459bcc7f39f809fc0a1efba98a88527de1a783f74aec31a70ba0391de4be846bcd4736726cb1b876827e1ecc68933ce757514deb151089ba778ccf5c9986dc9b9dfff883c3bb3f6e839fa9286141360bbff3acdc5c12cad4ed85c2dd3b749974448488ad9d333c9083bce98881d06dd9351efdec8f0a8c2980b9c61a3e97a6ee99799ecff6e860994bebacbf235c6ab967837a61b</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">请输入密码</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    
    <categories>
      
      <category>数据中台</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>数据中台-15_数据中台在网易电商业务的最佳实践</title>
    <link href="/posts/2022/05/62bfe9f0.html"/>
    <url>/posts/2022/05/62bfe9f0.html</url>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="fe5f95dd4ba663841d17b51e15f46e7fc43a54e1c0693490d0e350448614d002">4e4fc70cc91fd42566446082a751780fd5618d041572b8bed7c41bda7a5fe16038be3debec314ec22c9c0454600299550529facde36ff1d9fcb3d483cc5957191770141dd2b1ab94285f156b6a9473c9a4809b0980e902a2ffd5487f15f30f198740037099a42c36bca18dd0f03cb00ed541ea2e21e93bde301c22b4d1b5c444705de5974eb5f072f8ccba6a4a46fa7dd4c00ced8d19c8c7a3f164a61520cfae02086b949484c85155f42804c92ee69dd5ca98b0ffb6825263b65ac064108e4bcfd372fa6d25cb15d0a6567f4f435c08e71bdc0faa6f51e949aea3ee0a3ddd6a091aa8fad470c362fa70188faab2e6209ef09c3cd220bd4443297e6934a563fe7011c84c62f0b3dba96469fea8851d7f33bff97210bfb0d698c317cb18d6949483381e6cbf47178084fbdf2f95ee42ca477f47fd6ac535ad57c8f40b831652e59150d131290608aa730503f4c76af886d654c460fb5350f8ccd5aecd644dcc1453202309a492e3797a7f9c23abf0c799c78de7bc4a532bde1a0e9289f2f833bf1c6eb915e5c593a910959bb27e50cfdc1ba656fb0c124126e3f108bf356602c958edcfba309889ffb657cad5773e86b57522dc62494bce2ccbaf1e1c19998677153c82b35b1c15783dd1ba5429a4c5c8e11bb4a923c58de0baf0974bfc52f7113200dddcb6361dd3b6576530d4504e508e8845c5da4511a9aa3b20075a13c9df4fc994928d2d17afee0778c6c40f040d4ca4225f5d4395da4e36e49aa7260424bc0e0804bc0288449b8c3b48ed3bde02a89a9aa4cda924cfb9f0e1943e32883aafef9818add231e0f2c7ce66ad4318a6d5cecf10f6a028b17d03a7da10cd55a5e3556174e6bd1687c6c3160185ea92c75b0298971041b2a08ad7005f1944cd8e890284a0f551f47bfd208d9e08212d9d4e7bb7275b615f03d8c8207336373b0df63ad692585fb592f65b510e18a46b6c479c14e702a9316627516e7e8bd345cbc054d3f8b5f7202134a0e33967d13f431fcb275ac13a90815fe6fd1d60e73014f006a5ac25fe91ce36370b4bccaba1972d6d600da09640037f292c404830982e5e3b233bb9550ed66ac0f26573c515a2d5aedeb4689c2c58714ac10afcec574d3eb8918e816a15b6e0c22c63e93f2e278d5cd162f677fbde39e4065326fe4ed2735d0c0e3f6ece6701ee36736d0d0a8ca56722712226ee62a96b7dd8a26cfd7fcd413b7586f51e0e027749fdc9254b74a0f785b5457c93af18d8c9fc2de6104c075c7a9407c6de76ed9459f465bb8afee15c21ace4edc9aa84d60fc94ccbd369bd926a79a63a47be1cd9e578c181e15148974f8171e2a8160790c5edd903c9b1267ba18a0d0724470837b73d79451ec34e08985dcc0b343ebcd9fd63c395789f9244aca1a02f5300449330fad7aa6f1c0a8bb47918a2a5aa4db4c4487dc4a26ed91e14ed6b355d10653d42a0bec87f0d4f1d94adcbc6a0cb5bc0c16638484cbdc88c61064471513c8de16b352c58360c85b018eda2747747596366f6b3f118cb0b25c1b0370b3ac725f8dc0c07c9d9d781cbd9db6f0528033622544ccc50571c20ec0e2c44deee98614e6c0be0c5a54deff943e68feb644c60a4e1b0c4485de20cd798d14f05b340b3d45a5742309abb512acc075fa39ed79759e2969a4afe329bf72dba11503b8437fd6f85777b331594dfe30ed06080e05e68d1f6f4f6dd717e92ec329cd718d2e12fe9f0ed2d99c8f1d6ad1eea39910d894801538f0a3332ad45f49cdab975cf6df501af57f52703e63e4249343633c6cd73a13d81b8122755bec4872776af4145e2d33c373a7b178db5a418edc737e2726aa587f879318c359d99769a14bb37ef1e5634862aa2613b6bc0bce5e8c80ffab5e9f72966417fc3f17d937ec6c79b4570a56aa6fe6ff2554bbdb63537850525a20756c1691ecafb5a00d5cb095427fcda83d6eae5a59594dcced5f14d988183f259d44c21f70871f907fe90c0684e2586f652f29097c049be43cc00713a23cad53d1b57e24507f2b9e7e9df519ae119f00ec36536036c88f5af0d0066f1b0330fa18c23f4ff82d4e784e2a01ef58bae6d767511d0dbec11e3a2d3559e968a829588d28d8d2a4331eab16ec673355ed897b7f378dab359652cf0cf1a47823fffb05f5e5fcda599cff63f830e8529577d3e2a51cc67c3170fd28a1ce78e1510a379bf9ea2bf6482a1c633c137a6a6031188fabc8135d94d4a3405f1704cdb47832614c3b470c55532ab3818883f94e7a6d9fc28485c4e9c0c3c36e8746761a28445af749e95549544d1802d1abcabed619a2458f521fcbc57239d5a32d7ae242564f342e59e628312547e5191df646a56419f1740d481bd35477bd8ae228762bb77e86186a9785faac219d2731d3d9c3667ace56191fedca0797501b27a9adde0db8d918ae6c6acac80cde92be48854327dc76b925c91e4da346a0a7e15c152bf5e7c71dd13b0f3a8c42866bb59b7d98a6c72a7b05a148b364ed83a3e0e790ebd13d119ffe7fa66e1717b8285c2001a812262786348db1e07162f8a3feb99c215c149ee19b11536da911c602947241e7fd8ada65fa09ee9d4f7e16bc062330e44e096e2995b30e5ade422fd47e10dc4146126b4c7e9a5bc6f595d4967c01a164b1afb1876b9088f7c0c291513789d29fa391b666144f8a5a590810f3396dfc58c1a0c0439014a135113981cb5d08c006e20e29986b8fb128b2af521a1a20e4ec85a55a2eb720ac675e723004d7d5339153f0f334b9d4095d2cd415db8fe348b60f5949567be2fcb78dce9c61940f020b391e8a79b18a90390b285f49c4f6efe0427999d91915c15c86af73185e57f32205f031992596e852e21624975338ff459e526c3e670faf10c7014845fc001e67e52aa52be314c259d906074f564ed3137992a0bdf6bcb73df155d0324d516ef7cfc3800d2aed90145249e3d3d94a5a19326a1c0b3588dd8c2fdd1643c186db7ee9739a7a790f4874d6820753d31655e169b43c1fb6ca8c327421833ae194aaab2003af63a36f509d372f24ee5953aff23d90e5d921024a03a7f7cdfc53335b4f76ea356a9d881a1964d32e4dd315f58e98f371a12eb953e636bd369ffac540b459b86f8caf325761adcd111ecb52405483b95fcb31cbdd79ed70496ba6c873188e3435f1a15361d08435bbd80c46e27781465f79d192c82a7a6cc498b8cd32792f521d64bc5bf10c7e2218755803ccecac32117d3b9c5a0930ad89af290499c64e2400d660e0b722f82c3eea41882acb588ec366205e596d1e1f40123ddc73aee78efe85f048bf86c845a98e79270e6c084398498a74398852240c93dcaa82bfffa3d725dbcca3eaf57c96c0086387884451b45478c0e299a2ed8b29438a8c0ca22daefa14fbb0c81aabf084a64996fbf657e548e8f20a844f67faaea4ee0c504171106bc58d7fc374d003d8b6fff7251f7a71a4a397112fac072150a3742d4d0a6e348ec9c3363b5d89686a974251ccc70c17e45ced294de74b5e85913a1225cc1dff195a0a666419c42c393d85db6f2ea9d231dcaa708604847df59838c2ff3472b9ce3f95ebc5a020c395b8670d95adb6d26e372fb357e75af79ba83d298e7aa4f0a62d533399db3eacce82706abd5a73f365d61dd33d181c3d26dfaa91b97719d6c586688034e57449402602765fecd9276d07450035e579792018f75491a4654dd36d899c0c1611addf56065a4aadb9f3687816ff3fae60c2511cb18d214b385f6d6357448e8ce075370c3ee523c5b3d25f77a1fb5cafcc5bfe18bfc0ecd00012e4576177af01b5442a47213bb330dfd808690b1139c443eba2b06f3b283b035cc56b35723f8c225bdfcfadfc634d62712cb48ea0ceb459e0183191dcda5d997fc86ab1580b2d3c445bdde99fc1f1eec9e81d0cae6c6a2c2b45a68e87ca19fddb499f1c8643dca7b05706b64a811e9f946c1b8a0f5c4e2807845c13dba52dff33f1da43a1de2a3342e74a3d40f6ca9c70a9c5e8f2131b7d0300c0d5a04b18cd47fc06e7b9c62e360fd07b88d22f948f25e4999702db0f06b78699fc31e56712c22b10b754ce5490fcc91550a1df3276c9a593f95cf7da0cedb7561caa565696768b70f0aad2542c57d8c43e3fd77750dae87a8c936404e24457a52ebf88665c78cd3fe2e0115bceed7c07204cd186bae5ce612a0ef8d1a5eea8511afcb8303080692f11f93b7160da417dc67647a2911f9fa886192d43b9b13c3135afdb74ec7ed9cc99da5e6ccc3c7e764783bd117db31b8c521015c33d8a3be1a709386929021099ecb5125f40298ee923b2f9934560c4ece4f584c8b06a107339cbcc2cb72e76805b08d12da34230cc46a9dc96958607af24665c5a3ff9498636b093b6e77c13205510798d6d9d91b9e43ee0dfcb11ce3b9ca213138d2063b68b86ad9c7eb5f720a9e9cfd0f8e845c07f8617a257e2d70257587e3368836e54c2ab2fea5dceebd0df240e8b7f95c84fbac1d0660ee6e5c12cc748389ba72deb835ae0b2480f5f3636acdea4c0ef72e63e5326bb07e6e5d916fa45e66e26e5ef8c65fa856bebeb987e4f7a1d9b7522469e4b62b5fb25601af9368c99aab865d4eb5cfd7c71017064a3c4cd33c5ec90b59c2a5a8c4e3d927057a22cbf5a33779ec31c5b54d8ea7161adedd738b185318a6e81a322b48880660fc3b1450804b0e7b28073503384aaa2b5d3a7cc15c0d3bf1de22b3d9d7ffbe85510a1c815d189a8236d329db6098a2c1ab59d38e7079b94a9e0d1184bc4ebc787f27e6c9d8c066bb5058e55ff686bd6511b7a4a007aa98bc5de046655976045188296c85843dab3cf25dd00f01ee13e668d34d3989c58795433aac9d70c52ffc46a49954663c02dde2b70357ba22ab1e79e19fab29468fd0dfc59c004e653ccbe67e4fd22494a3cce98657db3081942b7ab1bd37be6a9a1a5cbf6f7793dbdb43565f7d42b48e71817a401709e644f50744aba3b1efa0c25e83f4e96264293068c748977a3dea17b0b4bf0aed1182299c9e9c28af7a4cd4e5be8421ced9230cc55332f52a876ef098361192c94808f94ba7476ca58c639e07fe497dd01e46a1def7914c68875fdb7aa7c1b605e16518a9c952b5c09ad3a79ad8cb37badf18d70eed52e231412eca11379520de2bcb933c482dbed15760c5a51db34e20177e00cef43a6859c16bd5f82f516eb2051803e89a0752ae5f7a3bdb345b126a701dffaedde8c73660c027c22d34c3cf44c4024f85fc30e720cce6297b8900b504a0b83e82d49e1cbeb8662f8d18e46824f348ad7653f86a24bcc269c30cb1d5b3418e2d98dc2edf0fa100a6811340545c5657efe4862dfca2dcd48d398001986719abe4620f40373f08ba274216ffcac90ab63e549cce72a6b5f60856ba667fa2076f8d671c467fff89a321d882da14a04735bd8dc495341d116ac8785a071e9c69a47f60b375b19d9e5cd35d07dbb21c1e2f546712f20e3920fcdadfbe19fdc8e4da8af8e0b4a51231f7e377a287241106cb3fd38d4e5faf9cf463afc28630f8298b2e5b6c591dfabc4e7ee2a04e73d702d6a346ea1893a98717ef3a4933e6d6d15e0358200030d84bfaa6692bf107683ed95f5057f29dc5c74cec96042d6df510ee7935861411b6bd878385edb67899af1d7c36617d177315ee4098db696b051271f0179b237467b3eac67046c750aa9252a3e19f55f6f042bae45c5496d34a1c31a8abac0561dc5b57bbcaa26795d5809335af7189e502ab67e06cc1b535bd8975891d5945b826333e5e37c9685339faeca9e2381d8bf711845b07bed0935dc770279f68c8f39eeaf431d4d94ebdf56228464bc7c2d1969906a6218e4df2a67528a170c2d3073b5f8c18e2a93ed9ab6de11d00f49a9f6314a53b1893bd67c79be873d608d6868ca68d6d5be06789f10016f178ba776cb959c9e59268039a582d8c3e67dc3af344051091557fb8bb76fcc256f0cb5cee632a78359118d72733c12d3c7c5cc2bd1edeba107943d50271efa34e2c56ea0df34585cd59c5455548ba1ef7f27269d14a7734794012a468fac48966d153dab5588dde3a3f593ae5e616e521aaf41107d267c8fae5407a335cacacd370eea33009306caf0e4d71f2365c97d335c3a267d6d9058207d13362845bcd18bb39c57ca27ef06cee371c14f7de1923fa63a55251ac15e5c6d63600ee1015d36059080a0322c7d37d50e85d4089afdc8712d47da9ff8574418e0445ff338acd59275464baba8f9c25663bf81c16c357d807ac67b77473836df17dd3b65782aa68aef7900b283b8ce6df9ef82fdbd0c4099c6b6e22b19f7baf2dbade8780258c09ca6c6692246b7cdc0cff3b9c55b213b0b4b8914aed484d4c5c929519f6ac89d82b057ca7526f42db537b48612d452d4e7551a6e46f51dfa1bf39ec4c85a5067c8a098b5736e722b5bc089c915a4f6ef5d6cf149446fd183fcc8333c8571fe9e41ee612fbf1a2f7d8de13cba3bc057cc4ccf662ec90884a12d2d3ab5004fa4a3bbb8cbefe4430c12ae5ff3847d248949bdd01de550b8115239b9a764e053de304ec66ca6599077a11b994b5661477cc748c8afc777ee156cb57485b22be35d1c52c927d7f5e28482c1c4ab969de6a29b6c58f8774384a95954037dbd69890a4abafb9e9790b4784114c535070dc6eef62ac303652f3bd177d08e188f465a725d958bcf54d2fa0eff0bd25ddaf1808ec659e8c4a34fdd6910dc2bac8c37b0392b8568fec69017ddecdd1e2b8d16fb034bc415f98b5c1d4a3d61658e7b2372654bd021fc4a8af60033a45022ae14488328572a669ee22f8fcd9e1ca592f164ddba1fa35c8b7e356f2f6a3f2365d86afe2a9b889269706da400373c2777f8fbb30691b4c708db1a2f4c4a6e073bb4a2704e1b5b006e79632907d732bd05be36e7624a19bd01557d522ac2cbbdf6e6eff68337b4ba74c831db5644f2dd4287dcfab34789d55049a033dd0a95ffd34c4a6ca7de0dac87af5ca11759324542d826b7dcd91d55aa864461e3d8838dfbc08dc4a811ac172f22d48776570b6d476a52967a1bb2040b0a9edc9624655a739598d8e32fd9f727e672d26755f0d6ef704d36ef97195d8e39f4bd6da65f1f0a86c99d8df62c21bf49c10bab2a37914fb021b1090f2d93d2369f9a0cbc2a6312e21f9f8990d9f0480dae984cc3b80b67c2522ad9de800c3f9bd5e8eac4cfcd65946c5164f39b39f210d22b5fdc4ba3a9afddd7cfec8a70694e360a671d1841548f4007294169b62e72a0a03d7d8c79d9e31f5ab728db65d5b0702697df10b71dcf4d5ab6f3c5d6397e5b80558ee892dca58db181898a8a238e8da71485749777ad1b793c5f9935655f86236b9a41786001b04a3802b71d8039f0bae45975e1df368ab7c49cc0628c3549a03464689a470c64c0d335f8d95baea0b47e325f7da130c435749a3c1395eabaf5129552355ac3872791520f43fe615bfa801b28da917df250899bc094bb35be58fc96d80fd24f284c689c096a07ab732c577ff46f4d16d6b399e8315d081f03e64c8dd6b7f2b6f54f8f009420411e69cf5173705cea8a5205c010a847e1f888c20771b2d8c58c994bf8b82ec1ced953e531345d805887d002027d04dbc32464f61f57b4904853df81f6f671889a11bb19db4374950d2f833d80d6b736539b03d67a70db15ceacdbe4c4c44435861ac70b030d56a971e68b66f67aaa8230a9cafa31039e81d6379334ff56ecbb2de3a977d4c8c65d43aea2a311e88c14fba085b14637fc65a5a16957078108004718153f9b463833dc810b8cb2a7c6d614c2c65a896744b425ae005edddbeb546646850799e8241d17f35eb22a4cd19523444e1c63066c41a202bf93c93a0ef3db18a87f0dbccb7f295bd2ef61a52799a7ced88d995ae778696aaeefdb9e65b72ec669a79392132b2d7d27fffe98fac150ad7d3bb0ef6fa7d03717a4d4f21fc403eb7d1eb11ed848ada9a0a4e8fb02761a3c45f4e90d7a8d0a7aef3c951829ac73234f6b0780ce0b3c83635b007c0d34c8ca4fac1dd35f5dbe3b1a3fe2fc61a7e63ac4c6169fc28864c693efdbf27ae61f0b96318680020adbd21c798582b23bc992d492020569503aaab67bc5ddd3361e3b02b6f023c8430ca72fcc2217ff96c89ba7ef714775438831fa66d6e58b4357ba4eeb178c31399560156baa540d66eed66e6779b5c870c1688c53e18a292fb8723786a9f23ffd9d2c9d09b12c64b1a0b81635a4da745a9754cb8911504203034c51bb907616758d6ffca83800997b91281853588bc490002a94d0fb74a52d9c6983c5786899cdef0f0dea60b7ebcbeeb15629ca24542326a1c3222f39bfdebf8915fa699ae4ce4f2f9fc3d07afd7f2d45d38865dceba3b639fd3ae6af7c8c75b86b41a968580a0b635eaa9c48e443eddbd79fd049c8dd54badb8d6f065bb8223843cbac6a65e38f06f2d6060e385e85b17fb442ddd85eee2f5f5a4806816cd9fdf8ce8316923c58f900e83d046df8aa26ba0951bf4e3f61e92db5d4a3bae40f8b6a421e70b1823a038dd77424d57fb7025cc8dcb910d771aef4c7b96e6b9a3e34d4da6b79b011613e822a67473d1f9e910c9f9d6c67ef6f44207493e6f6336af8744a88656d110e544c89bb9237189519a7e149a3bed09493068ba4fcf733a802e33a4f39a4b39cabd45c524f0d7aaf11b4dcbf55fc530fd701271705c761000a1284c78503991e0a678f884f2da5c96a4b3095a3994db845ca157c87826d8b9941378673c549c037066d895ff6e702b4a9b05c047fa30cb698bc767bf21d7dc0354697edcb0de1cc691f8d2e2042370d30013ff09ccd60b6232f72d2a5418243a8721ffcb8b3b53ea80537ef754f9248c2ff8ca110a9dd45e1eafe2b2424d5ba71fb550b0dc1c973431b91deeeff8b6faadede63e24be0d60e611a40041c0e8236d86426f88ab6daca129d33490d09173d3ba17252c18ec060c200ab23a0389611ddb327d0564e665db90ff384fb3c31782e379371e67f4176aa211a53479e20c3b6f8683cdb677d2c6545868ff2f6c62d1e6101a0135550e4ceba3bf98de5f0abad1162c2b04cd65ff4ee52fff3c173b4f16d49b5556beea05d0e8714dc0533b2dd22551615ab6d0939b6dff21728e5d2ebbf2ee7ed01a50f585662ef0d7f1e2d89def9564637c6c24f2581e7ee8b367d7b78230afabe79abf9e7b86504bb324e0d5d668bd55a879ff6131e331d5ba2225fe35d49f97bcd6bb73583a459c73d87c9ec3d2991ae77527fa2d802bc9b639d2ad0c1edaa0ceb41afa4190ce5010a5b991cd5aab1ff149553182eaad448f2f657e389c8fd111cea5a557505dcd385da5c0e95ef38c1c2df163e5d955e530802cdfaec30ee8813f8b5e30b40465529385cb2ddf2d5983abd1f226a8d02856055b711738a8c15f17f38dad88cd32d82afc15a58f3dca1a4bfe68b6e8e9103966358c4acf2be54f1553a2e556831bd627ac3f2fcab0c91031809ce63b0e881d31176edd7409a15760957db46d7512d2a7e15156fdf51e47205965e0cb80e464cab32f02e4a80640dde7dfd0c67ae01914f063ee712e5ae0416849e3c67e0c29eb30b1d293274a90187be04cb938f5cf91b7f461eb463174703e1bd7cf341148953669c5f3cb63b43712bab63f895f5b936f3ce94f5ad02ea3dc6fbf44193284406b6d0b64f7c4a8e430277a149b4cd767dfb4f6296602519ee3055b3638c30b072fe7d31a0c9ae42d4861d9d1267c0ff1c3fb50147be15f54f534d5085434781d028dfe9a9a6d3bafcaa51ec4b9b0aefd37da19498e4451d21b7c9a785f6295fd712656c9272d7004fba165b000eb7d8d19ef25d39c9431f6b1e7bb806e5f23c46cb3fbcf5dc31d18bae8dad8815a2cdf53073872ea96a61710571b5d3f7ac05d5ad0039db4c887ad00d7cc6e18c51abd619fd2492419c53059c65f01cbb8c9290b1eb9634fec199c4673a2c2ea48b71cf867069965c6c1047d44840248ebeb2a46b7b10c92b25b8763ba94c3216b2ebe39435199d39661676aaaf2d248182a46bc8b0e19b7868859f28f6b893dd892d8a09c8d0d47bcbee5f2ae6d5464e8a1e87ef8e81853adf7b9cd16ba47f3b04dbe3c042fcca33ec1b65de7ff7023a680e71fafa1426d2ef26dc70e6fef6b7003ea1f31129d2b23efad91c8184a5dcfe4d10649c777097cf502f021ddd4799ba3f9ab46cec9fada3c4ea5ab6d9a332653d687f0086e4e32b25e26ec6417baf56d096e920a2df4078b4e5afbc2b85788941033660aa2c5046d0cb9ebfc9297a8aab6eaafbb365172105d83510b96150a9b4dc9b8d808953f989fd79157d72c0e866abf24419a1491016d51bff6841416835515229e7a483a40025c2e31ddc02421af1de41a888810adca50c9e44ef54a968f9e2aab8bf172c70cd0300e74bceb3e235e06dca1c320957045d74ac280a5301e48af0c7033df27257fbf76f565aedd5fd1775d1cb5b0d4e525f97aa83053993036cbaf173c1ce16054d4fc84f9659c8b3154e6047578e9cf9d6f107492200a445cced2015b159cf1b17d1c35388fae3be82463fa0205662e86c4044b4a099368421751b01fafc81e15c0dbbd815e2d8e57138e721ec412086126e5e78ad147db9685a4ffecde86bae3a1c510f9ab872d445b7121ffd5a7f51511c58524dd27d19f3b0e02c2b4b87642f095038fb0ab038dcef0a14a1457d6eb7b921dcc405485c6c1ae4ae6d583ab1e1ba3baef509a4044c878a3749c54f492b10b278bec70c5147cfbcb562e882b0e6161d94a9a2f97cac8fd499348abf44272f794dfe8a59ac340b6a6740d4c17b3d5e0a17b4a69a8bbe0e19dd66856a38c334747901fcdd447bea926f3fdba0511572d3422a69da6ce35a0a224252fcf1f682a9ecf3c324171773875bb97dd7853a46af351581bddb142a152203bdd4c7ae212f981829b149015f0cad9e71d4fb5886486180aac08158772a2eb03c9a94b36e4413045d7a16fa6847efa1c16fddd5f9f1a19fc1c0e7f63fbafd3cad576c59c7b25dbf037ea08031670d26a172c9361b2f948e270f319b388a8c3da331f4b4fb0e8587e70516dd4c6282fba5cfc19029b842dad98171bb006397502230b34eeeea48823d951f0e5e39a3a3ca9cfcd79f564d3ea5f7f4e89b1c4601185b7568fc3639a0cd51d1aeadc489d83e970ec29951365b474373239a344457230a2aaf6e1aded48cca8119cd05bde16cd96048021ed398e66599a250f147dd919103527178e59cdaaeda670168e26a141fd2370699d960213e9fa554ce767dfe7af143e41fab2a5e527a74658375e98dee2b8e6bd77a44aa55d167925bc1b089fb5a6b343224f6875be00a35cceafc1a9386ff83bdb9c760258d824e80353f0438348cdc09517c645ad0d33c1cdeec4466e6ceb5e65ed5f74ed77f622a826867c1256987c19518e635625909f48f23a61875c4881cf12ed21393f2f8eb2d924947ee8ad26722f815b01abd6d73186d9f042838c647a629a86c80ef0c56c4cbf16a646e09917815546eb75df52d6d9b51b242def332adef353c6c6d1db131509417615ca6e1b09f52e5e72687fab71dbecdac1ca2978220f94a3d7ab98ed4d7b7c4b4d169bf5b5414494c5d125b2a676ce7880283487e2b7d342063f5b2b69c3b162d7bd28402b12db143f3abc299f275d782f01320fc22ae0e80a4565a0e95e0a0d367c76c63fc762b6d650fc893f331f3126689cc7bbf224e042eb808cc2620327eb3858f340227d09bb728fe61868f2e5f91d335110db9a9b70fa16c0ad444c462a57c29ec9801daced9cd16f4a122fa5ace82edd6bf849bd37f7384686e21edca203f8306f74b9e7d2a75227c017bd34c1289c785ca262ae893df56d739e0f20504cc656d8b2b20b1396eacf935e80532f93bce22faade90e0e8df77e9d5483ad91598f9b764dd6c57965280c6022751e64c9347cadd40a91afc319bf468b8eebb5409fc055c0793c2298ff817eb853be150bee49ee655d07a646192962a7cdf9ab317872ebf332f52f869420b835dde8c8dc9648f7739aecf84f0c530a07bc9f9071381a2558b84fb897c69c200e67566dfa454d5e3c4196eae24fa2362c3ac0f5c1a35f36d654752d701acbaf73631cb05f77aecec338d9a2da22882ee3972e7ac8b0bae879bcad3d7b22eecb4ea52703cc3491c148af5c432507add9c074e5d9b4b8484ed04f2107fec9008e0b483154b951b781ae8ce1068496326c3829bc43053a135f5c0c4804c30a807f98192657a0f8a78749f5dc1b63f5856513b190c5053fcbff1f0e419dd5573863a1022cb432a90f9737b58989eaa93b704abe4b29a2d6206b5e95b23052a07d4a43dd038bd4f4a80dc942e404978450e6bfa8abbc69acd1fa8854c1217126aa6a4db209c12b4a576adf451dc346bf7327f0caed75157471ea92b613c0985c79a4aee206a0a11ac89a5f5f9663fa544b082e36bdc2d9185491fd67529984b0d650fbf90d6930aae0e27a8e3ff74a23734cd683077bb6daa0192640e4f9d9773efcf3ae19114f71700ce7e92d9f877d9e0a74f0159ed27af13e1bc61e210d59e70ac1f1303e52c6ce4dca62fd0d87e763a528b14417315fabf6e7733e2d77ef5c20ee20333f6ae1bfa52315f50b1256336912751ee240bcab062f4e1c921767db61c5efac3f565d01ad7459105f016cafba49e38d1e30354f04fb5fe189a3be8a5934adcbc475c51002c329c843c04371c9e6df28f32332cf0a6eb1daf2ffa2b1ecc0aaa9a2de671f5702c7978fca651f61af365b90b250dc99e6e18decb18946741dd1c02d66737246cd60709643d45960cb36f8c30521ac47caff3811813aed8b3bcca4d8def48fdb485fa09226cf5972e8a9dc7316b2b715ac75fe68d5e7ef13f6eb2ea31bec9249e1181462871db2d3586289b1428cbf4836d3594a180f67e76b6a46d463cb9c536ded77261a25be97a4444fac23923c2e600b73c47e36fb15fae51427aeb4bec42592b7be20b9ee41543aa078022327311b85f0cd9d1643600f61f2dd07554637d9730d53eeb5209f184631207d5804e80fa8fee10e72a29cde1c51d87d44542fe1f39fdfa4378616fe74192f22839c2b47b6fa8c391f1fb9519fc6530c233e43f8a9d00121c92c8d996fbddb1bc4b5ac781ea8e995f51f7a18ba38d5cf0fb801859db0ceafcbffa6f9477492e55ff61d4f9c41fbd9b89f266f67fcdf8e2a8ef7a8fdb53a86ed4c9c1f433d41a5018cb22bec4e14b58d831215befbf9b31f2808c38d4ad91212fb7851c94390d1dcc7c9193f5ef97923462217427fe3370fe38caf2c8450614a544b008e3362ce511a5f15ee2d3d12500d81d437c5584caa1c5ca88b8bb878d347f78b6610527a4a23424b131d4ab385c6ef8981025b85a1556c0e0e45004e91149b06b73eef28acfc4a90b7c60a5b0418c3a39f9364276135dd2e97a27255741c1f34f2f92f23e14e05bff48084856ae2f76e30ac976b9bece59b590ac8664bbffc647accd59ec53676f126b6ae45e5eb17ec5365d78c74140d735bf0dd0a9a08dfabf42178cfac197dd8f4da6ba84c54520766f6b91c05420ff40d3fc4158425f93eca9731d3a9166c4e94e5bcac86a6a9796cddbe7dbce01ef3b29b8de27ddb1165d9d41596d33a9e5a06203c390743dce2f7ffe9aafd5b18cf42ca230d89b111ef683d2938fb53b12d7b977af495c0432e43de740219392ca549a1f7d6e54ece604b3a90cfcae0892793cc8691410bf4cc9ab0d69f1e78bc6ae857e7b7195592d20ca1e917f4d0333d3bdba87b1c0e374c203a84e51dfc972a9ed8cc5f8c4a616cffac527d99a5823fa60da4f976a963a8500b358e01b1af22ee6a01f736d9d8c0a73824cba033ca8f55ced7bffad9f8df8d53bdf58892a52df5d88b0a1783fc0d01987fc7c391bdbb3f3883b54e5f5cb61ef93642a53e01b52572d61776a959fcc1cbc3522e56a6132e2b99c310a41ae30c0b1e7952dcae300a040f0f4b10f85834af316573d6738acd478dbf02dd6598b22eb7c6b4685dc83fb243a316e448397ce904eebf17aadcde9fa105e35b62d2e44bd44f2330587b605c1f530ca22149ea5ad34b20007b3648fe6d2b7853d0580db29b7f8391ceef5b2bd9b0d4f1535d249e7d719751fbf21fae8056b0696889feafbbbfb4e733f429d023324ace8727a2b2bc364b642c8c6baf9ac106ea3b94b6e963f96020be611cfdea65fd21289e123fa5e50117b3494d3623db8319c6c3d5a4cc9d8eb188c49f5e5080000f12973716d5a008c8562db1189ed66dc6eb7035d37517e20aa63f467f4a6ba3bb433a4195c786e3fbb1a2cdcbcf2210fa871b5b6965c4d0b65ef25d8df67613026445539af5053c3cc89740e7d4233743c7ac7b893220150ec70d9464784a681f16c951d245bcb8a0c2ea73e22a4daaf7a332ac050e1c965cba1ea1359bfb499cef1d6d24af2a7c50e6b449c675549fb5fe5dc8a367aef1f843e7bbc39cb02a7dfe414edd70288e381cbc42d5810d7169a8fc27ad1d586a10b0f652d63b48145543bef9c2dd1094c639efce586a9ab528d01162557511ea0b9ff7960fc3519312502983ed70ec5ba45ad9cb7fc8ca7b70de7c699f5aafe4f3fe61bd7607d9c75aa1d237b0a58051ee3800c4b00f07084f667f4b5f51ce0c0800d1201aa6ad4e58672a08f85880f8c5b0b42b095a28b9b60c98c92b89ab1721af0a3d9088ee07e0dd0e444793e8bae31e0af652c8c5284b4528c2e90489b45286277fb0b8161d1aef775a2ef0abe91f2d3785b82c7dabf788aa632e00695b31cd16399ac9e0bb969278cbacf0edf5700ddf2877c82abb07547b956e3ddaac446b85184150b5b328a7080be489493c6c51290f3bb457efb43754c109b832766f75012cce50ab2b50bfcd250a6a5fc35d12fb296032ff7aa8f1b641f01379c2eb830a8d09870071d68a13541dc99b95aeb2895f50ad8da8b485a2aa7e2025d7ef9f6cfc3d425001cd62b39a0a7e1a7649f6b0b0cd40846ad47693593596eec1d003affe9b1b891b69db670f3d11438fa6eba03590af2571310f121445522336295906d630fb474c7d48a49ae75b1b74948b806550105a80c8c1e86076ae730d538903707a8f5bb7d0cca50d46d9425bec0d6c85bcd44f94ec3eee3616d163d400912e3eea9ff46075417c1887d9e4972cf793560fda7d7dd82b01c89b8f4f51dee33ea371fa04b03f5ed596bae2e174fe529da92e123f5a4c7c2beb67e29d8668df2339cf071ec176225c58408a3228a8f68748a7c72324b3e810a229ffe94d10f06d541e20ca8ede679a3b64be56e4b300c55731573f0dd6fa75eeb8e16f2836bcdfc17feb0512a9d4bc9ae823098b77fb6ad9c5b7491670b8ada0243f856fe73ffd423d28c9c41cdee21b386fefdfa43298609ddfdc78cc7244b339507a67edecccee2358b6d3481df5abbb7f83bea06770cb092858f349a26341e3479b13f7cda5e71056371c7f5e5c6a65cc3dd32e2d03bd12f520ad1a9a588757dcd6de861e7f58e4fc8d9d1931458b3e5d45d5620368885c6dfcd7cb29a4ca9ccd1e13bf7cf849dcfed053c290dcfa1097bbb769062f4992b40dbe8ec2a32fb35407a976037e495bdb4423571a8140d847f56124616b4de70b6164289847ae26b90d39fc2cef3ba23a10729c20989a7a07c7a0db0a4c7e47b53b48a8209a86fb535a363dedbb432b74d72831db3769f333cf855a32f09081010031fd7b2584f4d678d0c246476e9ccba157fc8c29d87b00f8eb70c207eaa2e9c8e1d1530ba1c3c8115829899980a886fa3039020ea221d64a777244fd61f66673b533f09929ce8dd52b2cd39c776d2f06cb8fcc169b82bfd01fd8a01ccbc8f127c52f56c0f9b790b149f32e2140e29187fb6bee5daf316324d5577e061cbed5f936fcbbfe5a9b378f748d0a273915acae2a914a8383f6fc736978ce70cc5a70aa2b9d324c70200e658cb1154c8cdbc700932aa1476c2f3481223efc81ad4e847d9a60ab564fbf1077cf5839f710bb137cad60cc5461516cb9996453a8f5f58b7c01ef4fb0beec4d85f70c01bb6843f8d2863ea770884a9ed4b3f87b42a701215a27c6c99fc49d7315ebd10b599dff51374db1aba4eeb55c28c63bc0ad5c017480b722b51e6052b312a3b0fa198527f29ad7154cb176bbec2a01b76d305daa4f1787fef959494666e83e7303c9d44c2712d2bd7cc661d46a5f9e54d49b96ac3058883beb8d1368e7b02bce686befd0831af9877b70c4dbd8c452b014fd83b1e1355cfaccfef5bfc354eade0869c881fd220549830f6775d8c0ce6f341e5f0e9ae584105a3ee0eb6e3b2db4d3e65c722f09e6057ab1beb1f8d31d63ad740072cf0d2e012e6ee6f6bee195dc6f2f0976f04e63090fb845c75d5a32adcea76594a0af5cbd048a3d511baa7e3a1e24502da68f5d3fb6a47481feb20bc0f0cd1a4a8bb54817e3dcc93cecceb3897f9065b4a44cbd4c9d3121ecc7f86b3a922569b0f876529ca47db8925a381657b95c27787f2b9a6130706cd2cc937f0fe4fbb41b0263db8e974d6d940367de2758d79601a133cc9d8319a4757ae01caab3a2ca808cbab272ec3d4908ff07203b8d703de45129a228d875d55e040c4f916cd4641833acf55e061c8c3fa5b69e2edb131a2deaa8eb12abcc0a6cd8eefb7fa883818ec59cac923c83e17e2bb4fdfed0b43f6eb9210f11755c758cf4250256582a65d32b25974bdb40c70724cd8d5fb6c0df23992fbdf16e05acca24519928154e66169ea2cd025bd729a37468468c6e50eb07674b9eefb9b7871db0e8174caf7031ea42ee3f8449dd56ab2caedd414be54c5e5fc6f40909023c7ea34d29d71488a157b3931c2c9174759a4f42f0be5f4143c6c2d81cc94324f6ea7f8daae02539a5fd937231e2bd555b47c8c4cc4dc3017ad00cec6f4654ff7681580bec0a454b71b9a99756c0874eeff931036ed2b1e0ddff9bb1f305b8148432608ba5649db1fbf27d8a8027bd0a280992ee2f745e1be44c9432da03d32648263478fbb86e0b9ed265d7b8f6c235abdb05ed5c5f115063528912b31e583560264b959d4f905aede53425945277434611ab046fa97e605c6e31a89868f46602cf3b8dbbbb880022605b27620f13bcb499a4d1b0b22a35e9c0bbedfbd8ae3d0f3e0761dab3948032930227bd80b47876d59afa8ece2b1c3e1d96c42e7c813e25f5c5a9b33164315aa6a6db391473ee9c52d89fdd5ee07fb8584c8d3b805096ad7ef1f4764f40c2630ac5246dc83b03f216d6eaf037449e195dd6c38a007f4f298331d924e12eb904f93a20d06ff6be65408b0749de64c89ae7c51d850baf7305d43366ab6ead4ca5fef1bf6c84eb498db0ba4f0c18553506cbaba8da8b7e4ceef626b034f7987115afcc7f8d8cb7b55778241d2d9d18f9a0e751cdd22862fd6c25ecbb0143f9b6ca5e18606c4a3782e12b44ae5803483edb5c5dc4aabdded7dcb45746913963b8566247194bc8c7909c64de42f0c9b7368d825fd0cef1fda6e5c25738597849cd9ea4595d29709c1f5cec31f5f12fafb2d3ba08a06a2b84477feb4099edfd5cfd7d2713cfef29d7223e636ed99715b3abee90b1e5f2e95c8748e6092e3b2fed100c65c67ec23319e6a72a11d481d68ab9f7b33c41abad1bb27dad01dfe01c41c3ce11ff77ea279ede3b4d323daf7dd7bef8d4942a112bb1b7526f1769f60f95755f30738c7907bfac7547ff26e8962072e30b557d5d5ea1d125541598d1e02efecaf262908bfaca07d94a399f2688500962ae30a3023dadb8dc15a22f05d29ecbfbd8a1791cf3e93eddea8f0936ddae216e018ab7deaa48cbe96672d6bdb5c959a7fad27dab5c6d27e8aa1bd36e0cfef8e66d5ea442280abed51df7bd4614fd67b6fc79ca81693154e4cc9a142f3b3081671c6381a09a3f0fc2c79c970da262b749286ad56cc9665e36a1db3a5ba259a0847597bb055d263a6b270113e94ee9a9e3cec908227b1ed2f65d7c0710092df32496a4c9a0dec1f48f964777d87242c0ad5a3bb9cd3c0f9128eb472c276733107d24f6ff17aa36ca11f66dfb8bfb3e4dbd4315f937899e6beeff4038641a6be905693980e12083359ec2d2116f91bb5db85ccddc5ca586af80ba9979c7317180b4dea46b32535e8606716e9016b12be1a200e2983d56005184421cd172eca0cfcd7e96e39c17c648b32f291ee3ab8bd61230021a5bf3b0afdcf9d7d40ec05293c318c63898ee124e0a3257367ef433fc643c01a121b466c937a0025fadb0e2a00bb34e9b1de90522d775296e87838b819d14a1ee7375a98c7685fc4131acede1b6c5fd72f3d8943c1aca107cbcf6c0f6c7d831083efe5b99be47d6a71962fa37a4493607531b8d8c4c4d77d155af9850335c1b25f856e76dd50644c8295dbda2cc60e50ec6902666d15a3aec02ca8aed9b698e826c00f8cdfc46fe38f30a64453318d7366d2bcfccef93f154936861e9f6049278cdcb759a2b06ec490e392f158f4a8ddc1c207a1d875eb3bbe3c3bd54a8f7ca4d2859b8f5d9a92e8df2a6fec4632cdb541fddf469be1386269be3717257def46d0a17b5d8f709d229925011ecd133174275506fe586fee0312eb0a2c06f537de3d57fe95be263c54d0cbc653840aa7841d6468a5ed7e42cc0e2b502dd4eeaf4b1c86e0f7e2a5b206f0f87563e6dfa01a58113389f8d4b167924fd778917ca7982ce1e0cd719b66c23f60fd9850bdb6d4bb7a10e963a388e6e5bcf21ac4f54054d334e73eb7a7dfd2cc610cc179831a0ddddaa550bd0e5a78b811e531fb091e957aef04ed17222ef81868f9feab2fd90e856c1fd13e6b0a2aff015c6b44a4412255f36e1d08ba41e3ff7c338c2df1235966b6e385f9b445235ef3d1b55eefcac73013662a426764295e6038436c199297241c25954aeafdb16152a241b335fded935199c2458c1c9be7eb3f9448ffc96d492b49e3074abb5fc39fdca5b33de2e390d9fe06039d6c19e27b26453becfd7fadbaa86cf72c04c9456b834a30fab7935e4c5c85955d354aae156139cc9a308d66f9bac9e8dc961f6fb25a07b07e1a95f6143ca9eb9c4a16b9d36aa51231c083a73abca8bdfcc21b9a2a82326a4299c6b82e144457f3e9204b47f511fc170f4cfc0fe3eae14387884dcab7e7bccef0566f01b99e377678a0ee82e663eaa11540ad1825ec482b79d98995f91e1c2bcf5a35d9509e5ca63d4f3880c5810f888c0bb66d24dc1eecad11e843058bed34601802865b8b8bc499e36fa435cdaed7e641c6133a56ca00cee700b72bc12ec4113518a479b09a7fcb17100a42a2641d41ed39072c18892d807a1f63fbf7538d1723828ce5df03480623fe1daadb4d6fd84d8fa13155c6e7ef02d7fcd4d3f0ec506e0e794a6be31576f90afc418f4e1701f2969b2b77511b1df108f7a167f88917f06268124cd8b53017d788517a35f775564b75c36319934ee418aec5c4f88fd0b254907d1b9342c76a75b0ca385d5355de57d84133772a5c2a1e09eaf13efa573bc2d2d633bff49e102cfa9772b54cf5290ec9ee8b245410da6f2ba445aae8742efcb3ed77e1a228deb845b477984dcee36f5ded29053e7c143d8d2d6d9715bb6a2f55ca8524b4d89661d79d6cf8cc07b230ad576c59c33817fb27281aacd0b26a98ad7c5f764bceaab17ba4fb445f3bf70722bd40cb7ad24af3d8c3458dcaf6fa0bbd3fac03f13b35a710aa92057d21dca750a3028bf1a79f4840c1d2879b3c843874c599362e853f4c894c794c8da85261e0281b8db30da10b2776371538404f76823b70c91b5c30b0fb02c7d636c9c106298a6194b6089685fd234b34f73e86d2fa0d892cc0e45e0b02cf29fa978e2c1714dd6503ba452ebf92b5cb4947edcd3245b3902a5893f0540a14acf6f58c6a80f5e2c7721bb116d004f0b46a7eda8b21318ef0949e7b30a7250935870ee05a5487c67f026457abba58aed2db1c4417a339a490636df21acad5c8da2b915ff3358bf60c90a9ced344dfd74d3bff2ccead98d758eb6e27c60cd66694c1c73397a96f82229905e813dd977f2959a80778fe01b1a23a1a0e65f3b734bf7d59e139def3ce10cbcf188e6b4c5ded24e2e58e5599ae5e9eb772f3ec1f77b71ac31d2bf9c22dec563a88bc099b3b762313a7730d4ec8a951f8c21d39b7c3bff89af90706caba80e22a8a55dcb3445f980a79a76d42577e5cc4e7c65ddef94ce638c07804cf59ab654a1f482d9ca40226814c8cab056417eecb74d0ee1d4713669558e5095f8faf0dd246bc9667990178ee47531813344fa6eb379b2a34dbf3622607d29072947cc2f6e8841b970d40216e4fccf1ca984a7ca3172e10fe9cd68f5ee3e1728015b41df9f8efb2174b03918ec1ecd7ff2086b32c5a2156611c95dbb07d71c17b1d8d42fb58e8af3a3250e518f035c39cffbd9b867db97453df02b5eb304dd7e916698c2b047c220756985169bd2edfbd446dd82f4b3ee9d9e280fb33fe1f79418a6afa2ad1a1408dec9f4a38a1311fce981426445ee1a52b7570099863b8d2b0b3745f70d74b5ff276002986914f735a3268328c23ed261b825ff93e7cd10dae0093a6ce9f0dfaf6d426a128f4c473a1956ff63ab46a78515910e8cc7d3b92e315a68c3208d27c4c0f2aed70af32f0cee3634391ea0cae8e04ae8ba2a84c9325db1e3ba37c0d466454766f09f4d6b396787f56607812f35f4a44329f20902406320c190e7bea919de4257ec4eeb78dc0fd5be5978039390c9f0232b34c3c60f2811fa9d47a9bccc99765ab74f975008c8172e6dc33d0171ebfa16e117ef81bc19169852e4f50c760ff057ab4f5db207ec2a7aac0b114a409d1e9f6d1fafab56c0f48873941464b264ff125ed285efccfff16b1ec9611f7b8785a1c7054830e68c2a7db0b2f43acf04058ee84971d1089cb30a13427cf763c27a90731854db78dcefa359c1f7594a8c58d9e9d337b0188e5cfaf398314d1073a3dccc57ca82ab13fd7d1aa06c84e79e0f13295ddd3d13cc7482b54dda7b22318c6a34929d812113fc9ef40c0a13a2d1ce3b35a13054fc8f417532928f8d3cff40247497ee4a15d56846bee5e43cacff3283098eacfbd84c891c40285a77605d5c65c2b308955ab2575281bb0345f008501701c5ad0a6c3596c8f4bd910e467e739e3458abf6611f9871bfd0a3913341669ed262ed0a5bf602af1deac6e799ca0ddebcbe94e47995c68fd4c80fde84e8fd77bdf0e1770be01da32127dec6a7ee5c347e1c5e6d46f0fccf38ff3eb8c13a6f37264255e37b7d62bc0b053e3fd85908620d47950d65e19848c77717aebcf838340266d264ef71b77f7bf777a56a4f27256c69a3a6b64947e2eb5153e7a1ad213e2298bf90a8c132a5cde3ae82fd958ec8a1bfa60b9c6242665e14bcd186681c9566a584d35e035e5c32089a8016d566b47e7f9bfb592663f78c26c35cbafc5a81b74f209710569fe949366b0446321a3512ead898e6f8a9239aece2efb8f2d74be28c168324f7b280d73f80881c515cad684b6a200c22cabd82978c6bc334ff826ad33c9eeae98ff7597c93887ab42c864a8f176e954edac272d065338fd5bd68c5fe08a33ae6f954a709837cfba1f2f3bc23f5ffe4e69d66fe746754e46ca2f67af800fe23b32f8a1cd5d0baed20e1164ef1b666b731a7991cc8bf5041cc5c254b8dacf300f2666965128f5fdd73a3445f13347d520e2a4885df029aa8896335c94279936ca707fa68c8da8e5a8a914bb4c24f6cc63bc54dea2dc85a0d37f7141f83e8bf432f49c61ac25ff85f54d3b3d7d9d5002b252c869b49ba0338bb78581cdddbcbfb1b6c05e1d063732d9e806746505abee62cda4ce9f9d78108f4d5cd71a89192429a6d32cd7f4cad3518a2f24e5e1f2e49cf8b776bd859ab582f59550a9e2ce938a772af5536f67fa23e54c603ddfa6053bdaa6cb3b38538f417633f923df78fb5c59b9b9677a33901fb9489dd8e9e7c97e6d63218a05722df3f54c612b62fa79a644250c659a04a800b0be72267332fe02569c29789f778965137753d85a2b61b11173f820e500df6a3b8d68ad3d0cb986a086ca213fe311865c8e207a92c93cda456a7a5a833f26b98d6fc6aa88d9791c096107db0e9651795a993fa04f56fb5e6b718592ab0c2870bfbbac54d6d27107d338ab81d71650073b1014e98ef29419613b7d7b82450ae4624c0e0fa8190997885746f02434b7b67c2ca599785bb97a7a34b4670344cfc8c4d9d909a99c52c1393109daef94f16c3709a270d61b33f93d80c9ad9f2c1d7d5097773e52a6bb461ab35fb64cff49d0fdb19b162deab8a74ef4aff6e0e36c862cdad169c1e57638c79b5a5fad8e1ac9e0adf36a24300e32ef15a6603944b5d051283ff0886e82dbcfc8910ae7ff7073839e806d7db9654f1788fe45a615ff67f78133392e3a9ec7d1eaacf2808d56707728a741a56616da4876b4d792c310ca0c84ff72a1ec2d37fc28354279f72d502512aeea7d2cc99e5e63388610c0c1a42e61e98846a5b76c2c3fb0f1dd7285bd988f1a4cd8baae28cf1e239ffa2c992704d96a9e1261efef67b83e628e2a41f5e73154f9722753fcfb02f79bed0f1b2745b1a345a6ff6b881cbd9c1c53221e9c7156369b2fb82d74858fd37535d056c032f8f093a256f8ae167e99cefef8d43aa0b0c13a2d95438c6b1a7841d09e4fbd06b40422958edcde517be8329ffb6d8e71b2dea599a0d35604b4c420b3eabe00baddb575c67ade1ecfe8132698bf74952588aec7ba4128fbb50d9c24244104f4ddf2d62c86bac8588b71d3aed8d639c2d9bbb0625a53ab4051249ab0a468678f744db389613d30eb9a8844661c33f0aadff5fbd59a9240cd93b02f12fb98d84c73b4bf76945f2518bc28ff11e3bd647b2d16fc4aa766b0f0c7af03f11f4f90dfe833d2e8e086bca3dac6a7f148e23012b52e2418bce67b068db912db0a6d31cdcc431a9a23820883cf14b6ca54186f5ade62218c60eeb229cf212a1e4bff716eae847e39c467336b31dd679e50ae4545b3f56dd05249c7e0abc7c9308e4b2d89b824d01939187fc6f6e5af023ee6cea8b82ed413c22e8b5ff942a6b2d8d1bd9fcc4d370bcc665ad3c5750b6818382886ff96434173a2f1afa8e3a4c1e128f176d182eea403ef207600f07f447375fe86a820427274d23b00be6541eb74d93aad7d6b96b926b03770864ef72179eb1416570561c6f449b96ff21290651eba85ca17324a536fbcad49e276449a0c2bcde94dcb96a6a1dafd264a45a3f74be3c9a0bb48f42c2a9389bb5564f910fba2e7adbf1a1dfd4444918fcc14d6a439431d485efd2aaa9a22b45d18ed46c95d2ca563c10661e3d035f914fcc0e2d08409a77817781e7a0649a085e4880cdace6b9c4df6a86f89cc0381ed10f96c65629738979779c61421976d87bbeec39105d1de6a58c26b5989699ba3e6fcd7c23e3a49df491cddee8a69cb2df1d452681e4514cc075b8250d9c76d623a4bb97839a22fd04a5f94373c606ae24588b079be3448d8ae6e8b59846c0e9a19971d1aa8f69cabfd3f126c58017d70288cbbd7e0543ceaf7b8acea8d4725a94d68fce26ed7774a048fd2093c13106eb4404b0475ba917ed7ad58895fce5adb04fda88d5b5e5bce8dc0bfb7ef4acd81a58e7b0618a82f26fea6ae48798a94afd14d64df6900a67859ca74e4e66a30a4d501db24b64d7e05cacdb908678cec63f677e66aef7afb552f071915fbdd8c60e2e3c52848f82fdf63c18e9857a5e6daaeb698e4aa948ffaee0a925c06b98365013e0cd1f447c17ed88fee9f5f830f3b121b265b1a8ead66feb948dba1d2cc5e238baac58776cbf986042717f188477bcc003508ebff9858372d028270d9bb1aef4e690391fd2ea183e9f73aa16a4c52c132a993f6dfbf0e4e151b1d0501f5e1440109dcb8d513845b71e10d85b2ec48c6bbbe74b97af1de7f5cbbf8083189acefbfca9329cc3254afdc4400fc2f06b7d9f65fc3fed8a31517d328a611973d5ac12e9b85ba608a064a7ee600d48ba859e511f419922a87adf5bd6d2d003f84853b8fe32a8d5996326482c03449d2dbdd40db6af931e5949e107c77508fd1db3480e876fd351ffee76b474e6e521d0bea01685de453cb9661ad57ec18ec65da01b22b96c250c8c4b0239fb3656e5e7ddda8fb5d6ead2a8aa3696ad13a4812e6a4a8406d6697a38858870711afaf34cde983de7ffa2d801322753297c4185e8f1e7155900088e0ccf5dc80c350b2520e53302fa437738b4d5d902e856fce20818ceb1b02835844ba3d668e203d23cd2675d096df6c23abf39e2d2433d271a21d9ad117affb9d0febd48b8556c847ff93551a734f8f921f3d5ec60abeb993c9cdf49df9318c4105578bd55229fc74a897567b9a06dc99a38083a1f5f7ebcab82836645417c744eb05a0816d1b9aed4b34e3bb8de40f120b514f10b32344ced036e61b81c7f8eb1ceea8c8c6f2bd153eb2f63bfad45283ccd0445ad49a65757a36c5b0367a90379e4a7b2cb7e10fce58b2b1fa53003d751d58b4213e1cc781d4eb0f69ca681d541eb6ae0ebf69478e831594ca68596c920aca9d4f05dbeaad8c24591bc4dd61fdd95b95d2e1eb7d2eb9f7e2d17873d086146984b4722d5b50c2dec97ea026b6ba92015878bbedc9fcc6cc4b724fac18b031b3e755a775f5697dc81ecd7e3fe97a122f4fe79e77c2034df05303ed3f83d2e852dc458d195e0d8adea847eaabf52965339edd839efce04a64984f3e51a187a31c02d0bcc3fce3e9fc7a40834ef5495d5ff2115af9f2a9837f57e68ea3f956ac466b7735f9044b4b94d896f00f3a5ad2091f7de10231c49a77c6cf3418fd1451e41deae3b5ae8ad73eee6fea54d10a3f37133780adc7323d26ebad65c9321261fc6111cb3e4e190e4c5125463b407ffa6d037ec1e6242997981ae828a60be58400be82e7a3d10fa60452295a9bb389b3edbd0fae9d51ceea078b41d4d49bd8c7df851e2026379abd6765f470c371543610de64880efc25a47d982116b275295c1905537b9bfd746e17c011ef809769351ec0ccf354533ec6ddddc7fbeb3099d454f13ea6554f730a77900a399587b123631501aaf8a7c3d7f8f860bdb882625f3f10303588152f85c90b48ec38deae74a34adde7e06b350f3537cdf8c3dcc540445bd14f9702d0af078ce21f1af26ed8000a76734c6b2cdf1be8ab1020bdaca231a6ff1b5120b30df9fb7561fed89d2b20b37fc8b91e75eeb11e49d0b121c9f055ba9040cf72f49ac062b8defd3e2def23ac09765534064246a7180a479f17d37fe3ed28358f95a26cb78bece2918e102516eb183a4c9cd32daca4c5afc7c9f7cbf74667339b2337a4d5b938b1dd2678a6702c9c368d1146dcd0082c2e290fd7d72444125c6eb9f20833ba422737f3d80ffd3011a0927eb1ab27b53909fc68b00d2f13b970ba5f7bb6f073b0e76e86f2a68fb73badd03efa0eca6fcc1789ccb3291f364415d32702aa7cee19ea24953dfe4f9b07a15c62c29c487f96ab26714c9fd853d4b68540ab6bae69cb2e7817fec93758d9bc2c845d8cfb089212804c833aebd6cc2f8bb653997fa0e91d39f96325be3f9bcffab8c0a2808ff312734149252748143d378c4fa4f662dc561516df52b49d557a52f028fac10e5b0881dc19dc8fef7add82d209dcb8ace1c7377b574386cf949b26e4a022e771a1197861f77eedf5b1fc1d14b65b79e6df3edd3e06169e1d5a29ca3df63ba0d276f1ba0eb2c96b20762e0f92807f8a5ebf7ee473f779add1a4ae3c7e7f55a9ccc15818c50162afda96e1d95e14b1710ba7065679208eab7265b614e3c7d52438825a91453c0a0dc71847251773ce2788268044bb622536eb9489a214329d6e0153e49949023dd3e5fbbe85c9f01f5dd22b8b58189056b09cefb1de9559b9742f699eb42860402f693a05929631419dc270dd6b02262d14264456fe8accf2b2e87114222b5cfe80b5495f43ec2310dc1a2af56bfcd617fa9d5ccb26a0417a5eb9dcad565392c1ec7cddde6fd368b67f12879b54a95afcd24ca42b21eb835a910f5a5c1e39f891405a63030801a68047604ed8e71cef1286c0ae359e04fbce9581c9b2a653395db0c5fddb2cea578d2eacf1c535192d8f30f8952810c326109b0c22d4ff455edd582b15a5306711ba366c347edeec701dd31117236eee324188bb093355b8b2de044cc0f6163142fd8fbdf36856bcda4050315b03440fe85c10d7281284eb29b484d965df16658d0360fdcf5b43c79021c17e4d5bb0ca1d0839d07257b8e7e2995c972dfb6d279b06298e9e376c9732997f95684ddf7beaa61290476e9fa908f26774ec5b7e2d86daf491ccfd3545c6c7386ffee834c486476e7e832ae685f622aa7063bc86cba40fd21d6a72479f47507f5c6e1b10988f79c0b75ccdd2da1439eaacc530d7a5392e0b19b17e42ad1a265e53d5cb940d5f7db2a19facac16e71e8a91bd135f62da13962213a8426274ae73643d8ff67a471f7a5547e8297c75fdf00c7299fb60be43242401cff57be4059efe21640f1eef592562e6ae484f3df4d35adcd4660562e607e85ebd2a114330e3a06b8ecffdea5a2cf8cb3380bb3b17bc4872a28230192315ceed10c3a61165a88ba2281d4f46f5b0eb014ba94246594375005c0c652de6a0c91f80418f24b3d59d53f519c09821bc9c6ad1a5337d46a004ae730533dbcb66db04a466b7dc388d7fed153c444b56c12c2ffe57545628316e36b14ee4c583f90881dc1b831772f761a24f030472b31cd429cf7f68b55c354c1fb24c712041295f59ef3e6c632435fb3ad3101db05c75248057b8d79201da6c9d0cffa4fecc54b1b16da21c9366567d94e3d51798f75cdd9e2e75a213f89efd66be130b02c11aca4f6a86203286d297a93bc39188b3e4da4c6b91fcd7226095bbd1892d406fcc757939b14adc2766a3719a80e183bf95ea3e5ab5286af52ec647e29d95b5335c356183c501876e964f38446aa822d51ade473c09b70673f37afa6c63c212ceaf104af3bbf02101455a5b53646b2437b3bf63b4208bd6cbcbf7faf2f12d411aa44d79ac466d3c62519be9bfe8920c402eb8863ef149eaadf7c2f285e2f2d4a4c78c590292c416a04d86f3f2cac3fd788d3f2596feb23e1723bd62b686ccba428ea4c08b7723d95df07d5032bccaa7db13c9b16e848e1185c015684eb38a8481f44d1481961295c6862bb4575b6bfd89d6fd88390f3b466bffa34493ab0974b22450d5073ace1917dd7cb0a14e1d6ad3b0cc1dfd7bd34a12ee2568bc65bb1258d50613326a225691d4e1a5d5082ce3036fa17b4935d6fa5fe81da43207f8a17dfb1fc0524673ed5dfd843227cd8d6609bf396951be229d3f0ffdae58b8259ab6fef4534b9c6d33d60a6b3b79505af24583d042a54064e8439768c9c1db9ea14683973fdfbfcc75e34fba4b3cf1110cbe7818661da73730f57a40bb16025906b7d45d64457c049948b217d5a0705930926220aecb9be730c64651f677c3d88a5f8993c07083f7db0ccd2fba5c7c2e4b9cb7422a6120d9b8d0702e8cad469d4d77781501a43a8794e49d66127752f06c57e6ce5c0b5353e81da82f3d97b09aafc445751e2f190e14af89ebd6004dcc4fb25921264330069590810d1c97010da1fc66b32b124ff6f7c7744e8ea022e48411c0e4bc95365ced4dadb6967673ec7136ba9f3f459218e093f820033f2559c981a6a676f90e47fd24a02fe826ea6542ef1500dc66935c039fdf1902812c36a9768bc5656aa8d5626d0ce49b1ab12a061b275187a1117ba8ca44688eed5ba1b1f7e0c5a8d939ade413d2e73024f2d942492ce5ecd2804d60b9e5f275f856df33b6b8a838a28aa8ddad66e959ed1345ab84a2f0a207a82b843d3f783ea87acf05b7b55d46b1f0b2ace064dc69b126127bdc34a2e51d7f525ccdbc3648a17ef848b30c013489caa160c5e296b891912fea7dfb483a74266b6ec9152f99b061c8a2091682808923cd66966b4ae0365ede964f4cfe1bf0ec2a96d8215cfa611235a34386f7a4a45d3bbee3daacec33fbb092a3f672e23df1cc4448f71e0ea82fb26fee68d3c5d39c3879861f4b16aa65c5a97065665ff4baffd15a8ea1103adbdc0432485dfc1bd5530f96de9222d56b53a975c1fb0288760a3576789ecf71874f764868ae72d7630f2d65bb0642ee2268ed10e436b2ee9e7a5b891639e9fa55e7731800c5180ceb4f6a331d4f0098dce6f893e24a2782727542aa71f73e72e3cc27278ceca8a016902b78a5b33cbd7e2833a3a58245c10302418f76b5f24375089f851d303b870dcdadac61d5940c5ed791b737271615612f964a83386c045d33b0d06c5f701f8f281a19cb</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">请输入密码</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    
    <categories>
      
      <category>数据中台</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>数据中台-14_数据被加工后，你还要学会使用和管理数据</title>
    <link href="/posts/2022/05/5c972aea.html"/>
    <url>/posts/2022/05/5c972aea.html</url>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="0ffd4eb284c84115e04b9feca462d2e7785082350ade9411eb21e1228d5fc329">4e4fc70cc91fd42566446082a751780fd5618d041572b8bed7c41bda7a5fe16038be3debec314ec22c9c0454600299558383f53e34e2d04d342343cc86f8a881c6eb65402a818768df0881ca54e21d9f4d3835ef8a24ded69692fc3f7ab079570f35eb77a4cddc562a36e9dbeba052f5fba4c5ea5d22f189c64c4cb30684fd22959f85df8fb9332ae0563265296512187f56377e79d8fe93e4fca952c60ed24e7e70d71688b2f1d2b88142405edd21dc51eeff7a9300bf38be8a5458ee98d5574eff26129a3810d240a186378287b7a9d91d9a5ca64cce19bc4961712f695ffa96fe2f1ca6f73c50b6d6d37ac08cbbeba0474462af45e3b2939569889e6aea7986eed19c77bb2a39b1adc61d3c1d72bf5b0c944565670137d4088c4d4d453dc8a7de23dd1bd2b35ed552bc0d0916cf98ed012ed1d717dd977fee57c1ccafc67368925ddaf94491f9104c09cd235198e1a986bebff32804ec3108a04e7df54ee44df8e3fe5cdbb55516253be2a2127bb48c7f03fa4a1337eb5885906590e4a7a163db2a093293babfda230877e798f8e17f7f04d2bc687e841da73046baa994966cf6e24313708f972574b3f1b0007d2fce912be75ab05274a44e475fd6c7400f01663b658e668085b713ba47f4349719209304466fd8b28982a313c44e564276926b6b5b338ca560cf81aaa950317e74275dd0efb69bf5fb1b702b1d5ddb53d5281e5edfc016890d68c8d58ac3165a75e022f5ec7e8b6acc4b44baec9aaeddeaddff0fb7046a8707370794e45d633b748de4a1ecf58959ff63490ab06f27b7cf03854cfb9ac4c3b5835d4dd85b6691e52ad0d76bcf6dd7f70f59a19d2b1a34c2858a8042a0a0b6afb4e49181b71c518b95f4ef2471b07c17cc2b5885f4ba52746f297774c61086057060b1dcd20cf268a31edfc458df8f691cb38817554991292f184721b5825cd5aa155b713e7d67f64a6008efce133143fcc87f3587f14f83378394927298b0a2dc36a79937ccd73ce8addf357372976da5504033950f9548082dc70c2273ee5795b975f86ba46b92ddfa7f187d518d1c1e690ba3407dd10a858dff0c4f3935072ff250dd8ef74346f40d80661e2787754dbb83862f566ac71a698a1c92b329675771bf4c6cb1ffeca396ad4958c7fe94441a5b3d2a9ff0b7c2d26886219dbd5e5129f180e35a71b3121656fbf8ea5b42d2eee33c42a022c0d4c530e7d4384aa10dd576ea420a506d0b6f89e8b67dd843caaee712dddb8c7c8d6bb3b358471741d6c3601ee69b5c2eb4b24a2952e43e1757c4dabe6f97446c715d97563698d9bbc5a85ab2e60788503752f87b90e47f1e1177d6be7988851edf394c90607c7dea4b369b137099c18036060e4822ec656918ce11075dc3a8f4b4e6620567e31895f8998fc6b641bfe255ed69c99875db8306c4b5bafd489d50b953ced1754f4ee4806e403ac49a13d36e97eb2e5f89f1802c6b5eecf24ee4d65f1a86d7e60639e1dc3e4aa9864e28a287f0c32a0cc7b5931cc5d2a9cf86c4512422275f91035448986e795666b17a44bd7c92845aec21bf731f88e40e00638739b7dfc83d7becb80d687fc5f76ef5720e37b8a741fbfefb3db87af2363c29701acac732fa87a11ebb26863b6595f6e1d9238d03910b6c26b3c637cc3efd8ac65f45e7dc17540cc15251934abd3f966925104c42bf7cf62863cec549cda709159ba744a4b3bebf9a816fa102f33073eaf62a0a4f636d78776ecd14dc8cf1ebea0c77627bdf0dde1e5ff39295a70c4eabdfadba6d6377189a9e56d7aee7f143751c3ee63f3b4acbc5ae6ed029965f9efa07cbdaaca7c2d5322a129d87b78a33dc37da3af7b0dfecee8e642f2137ff05fb8b9980c9f15b9448cb1b3ab976344f8ca854212dd6eee5dde021af58e3532ba6817ef7305896a39bdd619cdcb4444d5d4610654e26e340419f13b5ab5c710d592da13aec7bbdfec6af4757a7be4750fc43238b2529f864477c44af794c0e1de6212d8e196931f78cd78a07aaff7f88fa4572824ff186a0e1dca418c86342160890d1ddb675638abb24334f6492183564a61dc7038deb83c87080c6a671d1eb7b31de166c2c90fffc1ad3655a789203d5356b988432ce87b63d5ea0aa432af41fcd0235492d5b55f8b3f3855d377a26222f4c003a8b669de8f96b6bee67d6af8b6135010e91a761c9bad491380cc73289dc3375542fee08bf1f42c8055dbc658cce3a9afbb2afcc5585de02078787cb05410fe8dd4771a81d1f4297bdcc78de30d91c332a36eabc7ac5a862a1afadfbd280f5314ac82fe57b751f5759db835487ca849fcddd2369e3e2c003c88ad465c3febc3f27795651e11b0f42ed010ce55de3ac96e21e8329e4dd3a572b2b142a8b627d7536e64b3fffc22f4ddaee3c887da3ef6fc03a338effff86e3a1cf07f2dad9eaab114b9776532d780a2d8b93fbd765c58fd85dcf43a418807b96262c946491c5d70ca48a9cf67251ec34d8648b3613acd22a7e91ff6bc6a6b41902cfded2ea9d60a27771b2bef11e11588e0abd53f4c1fee5f1853db4ce4bbfd06f11864520396c50afea5a18a53034b68721a4d4647abda2be14d27d84bf232ea30c6092aae63830d2fdb93772965866b06719cee2248fed8ee1c4f47f59f7e6199a463fadd0c7e54ee2bc2ce1da0ab8154b960cdd229541faa93ea2e3cd324182934a9a2753edcd9a4f9172fa1e76ce7b1e94a5b7f282828eef8af727a0b8d52aa62adef09a45010478030e8d73a5d97848699a6506ff477e371d71c66aa574ccf6b672efc22c090045ebcfd46c08bd221af206b54ffa96d8c269ede7337cf7ecdbc7ad901620859191d716539fb6f9392896b2e703fdb59b2d25110e934057878245ac7a21d77479a25c83c8f3e8cf8d7bccf122f13c5a4e96d27489ecd811b21e876d55e3398d64f1b4b575144ed87e3d8dc6da854c9f99b3383a4a02b062093a47c80307204994c5db6dd1c0385abb4a159114edd97f77b8ff5bf12ce656dec9fbfe7f7ec469e25d248c56b3342d61cfa3cc563845518f0370dd189bab3d4f831e4805cb406ed4b6100110dd1fb34078545213f0fd02ab2fc3048381270e9f9e7cd880920c5cf084572755fb9f30a66cc80dce3797e40aec95105d9cf9fb6b2418fc1b320e4a546a000fe4273240c657c4cafca059c32a793e4603bd6f0606202e3a1f246fda9dd824fcefa95ba7199d277e12fc6561e129856d8a738a6897b66676e3a1561452659e63034c979222490d425aecc97c0238fe123c8898faab045dc0ed0ea51f2bd7414659a899dba4f91200205e85c1051d206db113be0e20744e56725c55c83569490f3408cf366de801839d5710a5a5b7a7257d110cb0ba1e2cc822c1e27ddd4e852fe8274f53b315cb23a4622e36d159e8df41347fc1f330b899b715e9a6d6f54588e9cee7febc0d9fb94f87a3778a5bf2d35e37ab95e95a9d0a986b0fda40b0adf1ef9fbe74cdad6dc9138c64f80bda5afeea85a2f5577af19ec709e7c0456aeb7972f3d4312cd8373d90294a5266f3cc6e1406dbabbcf92d07ffc7fc8b2a0f9f3365fd278e947d92d940b083b1af3c598083c19f9b8d198b86f66098ad8e654b316565e8e3ad8b5b139507eef8907b96d40e94e17c18a48d1e479f12108c60ddedb96c4e213169b1f963d49d80a389d0c37a9bbb02f207a85f4149a4b4c552ecb138abac1bce5ff9d342d5ebbc0e8001607f272f2b8a5b41ce1e77020b17eb423ec61f1930969b5191bf68eb61531e9aae9596c997e86247f668d440ca914c7ecb78e81e4fec09c2a3354fa55e662558de08f509db4dba5342455f12b0223370449222974947b5983697b8524b5cc818f132c2ddc8638c439e863cbb0d048757ad9c3c1a64c237bde22512719ca72548f092b690a4585d55b449c3d646959aedc2bcaf4851e8dd4943cddcfe567d9fc526f8f634bef0041ad62eb75acd09ccd94e2dd493eec0bdabfb942b66da323701192cb3a5f620215bd685cd643d53d43040e33406caae9efdb9edca632d9769b093a0a6c8d903205b14a1fc1754782306800a8dd498c49d86ce8d2fa06a208850d02b56705ecac2b99430192313df183b923d8d7ce95f13d9a8b2f89d4e750832962c19dfab8906f7f396572410cb0036653bfc007e54d94a714a2dd3383955ba7f00b617dc111137551b71021c1e04040b7b493b87b01c31577afce9a9c6b6d641536a4e914a0dd3b838d4d3b987013803be88d57fd4a34b34c8b3581f1805af2ae647f8ec3c3f85f1a64d624f1493b705d1d25115e8a39f1d654cd9fd3de00e27f957fc66c305621a03b6971f251dcefc0670ad31a75e2ae470bc32fe3c12cede8749711b05cf8287889b9c642ab4f3022f4cc08791620c30647178509a1f24ac77551f677ed348a0713c0913a23ac639c2159d712045491563f022353610147828fa2815f0f9182b5cf6ad36e6a5370815e017fce0cfe02bc9875544a7fe8d86b350587c87a767590d3c7d132e3cfe4d85d74902c850e6a10ff0576b2cc6f8abd4770f4d3b28fe8fec6686f66a31e8f106bda3e850e78edbf999128f671f2361c25203abfe5f546a9587e5630b6ea696932996d0d16cf161a3cc738f9d9b04965729b523331c41a80bbd64656b0b5b9477517c0a6c4aa33a3dc4a272facd87d6a6147809d968f8136699c38b39987be29132390f66762c1a6b2052ddb54196a984e8b34b7956856c1e7f890ee982fc301c530be0893602a75f1037b9a0d90aeb5bbad6f71627ae9f2ba0f947b5cdaa91b402632a1081f09a3c27b8d34451fc045c0efe8c28a50c83f162062b4a5169b27cf35de7b933bda7c7713bb8a90101ba41ee693d95b5f11f65868d7a4e297f786a12e252b175f646e167c056e04f198ea1620c25311a9c734217eee3d08d30a12ea3c3a76cecde5764fca0e83a3f35a9b5cda6c8533c6877553bf12a0faf2b28d045145a30ca75cee4222ba5fd24d4c53094029f2edd0f1650ba0afa0d4fc666e1e5748414ba62a0d337c87d486c277a361686de44c3cc1dcfe6147381ed057f00480508ea2523114bed5f391b2b8139282300c8043b8b5084bfa71bcfb079f0e0f7c48a95aea7d658e9c5f4eef760ccc96644c5f35955240e0d52d88d29392b799b8f7e984099656b81ee213e63a302258c856dfb26466cc7a49890adf1dce98fae674616309a95a2248510034629e6e505a721e61b522363026ef669ff8779251c4955e208cb44857c522914503a09d110881523c46d1089e1d3544092d1534bfbb61baf31881f8a5eb66662ada10ce0dbc530faa467dffb9d21941cf6012caf082ec93c584482d853513567fed302227563388b39b1fa1056487a1dfd7b98a86b7420292a42ac564c7005e34d2fc24f95271b5e91d2d88255063decb87dc9192fba42de9031c73fd27a16dc91b06e7b7a1d452ca770b42883fcff28cadeebefefd7756ac2028d2c096ec7a70e9913897ec7e8d0c354a139dc769f431c3763848c741882914bd9df1723664b3ca619e8a5d9311186f209b12e368eb9459e6e1ac9c823e19e5cf9511e2a3da6f0f358a733946cfd9e113080d7e7643d80c669d36a7393d0ebab66857c8829b09f3ffd4a2b2e95998804c67909c46b33c458e6fd28ab9e9a1d15bba0a3305ae325c42d3c14392772d8de1e8a1dc01f93dd9a6ef4982f3da43ebdc23c00080397838d229d3d55fe327454204c198ca7bb2a556feccf35ac49a066d45d6037cc9db69cd31b9615493418322502bc098de17e0e0740dd279f3e652377d1f20d21b6bf7188169f43f3fe1793425df55e4ab37bbf9524eb256a7e7c24eba02d389c60b2776ebf7929025f60bd6ad80f16477222b3f9f3d694e3467e977f5ccf5c0ab276c701c8f9154be3b5f28466eaad6350b7b03030ec155a17ccdcb51f20fa9ac076576059339664c4aa6a745fb7619d147f061871b1f4d8b72f44abd4af5155c3e0c27bf150b1ba0454f31fce8fe8757a723faa38fbbddd657d3c412888c7b0c3f2e5edab4a7834b5839dbd353cf691e089febe02bbf7635be609f927a71ea74e2c834bfe0dde995e2a513bfb33fbce809f415289de6e61df6290b0f9508fe9ed2f593115a9e93bf7ac353249c4b0415d1c96c8bc9de0d5b594f63bfe59380a1ca4cf1552967bec042e80af5ba0d018fd652cc86393838e37816a9bd292651892a6c18d84331704370bfb41c66e4c95b16af334509676d66f504e314ab6758a7532ba3b80c6eb2e6b161b1af312856ed0214a32c63d1b30b289bea002fdeae4d4c9eaac338b4eed67f2aa6f6b7f21a8aee56efd00762aa5952d351641402d4a9cb695e60e171dcae084752dfc9779da5aad1d553f318e19b10b3ce806bc066ab8ffc337d935bd7d9768719d64dc3d70747be19740d6b3e2deb4a3e0c6e93bb9a79471032c97697c4e3b71b2de630a7a33dfa8edbd0f29423c81f6b8c4831a7353b879d607c2f0b439eaa7e8d2dd4bf91864aca44aacb6ff1361782d71679e2293d62ca6b5ef7f5a79a97cc8319cdf121e376dd8dd76150ef6afac84b6743a4fa3b27f9c3b7e4d3687c9cdace6825106493f6a3470ed0ec76ad5fe2697ddff9de731b6c2b56c5b1cd43753dc28aeb43d343da136dc001c250afaafbed25d69ffe106e2e9777cd729506bdd85ffbf2c1a96714861b6da687763a3f3d0c6b781ed5347cfb160ff974b28978d23d33d06e6c5e950ce490c0c1d4200fc956263dc78215804f813d3a95b8cceec1ddc096477e17a864302b9a1ce2b2fabe06921c3070a7860ea60708ef6877c992b41b39e77e9ae7f53c1c1b6b2f51f2bbb51ff546a2d276a33518fcbd8a07c97ddef9630cfe14ac32e8a6e6865877c848b67edbb300ea23349f6b74a95a227a1f43d6900421d8825be29b7bac2c3b9aae12ec2b53a36c88ffee141485103db37a4adcf4ac74c08e5637bdd17c2e4d28098d0b452ae7279c1e91ee74a249362a281fa369c83594808872f54bfbeea0dd4c0382b14d42acc035b640c1df3b30cbde85b39d12d4687880774526250f945597567d6be3da4e6cd5d6f06d7755e7ccd73e77bf1d058fbc4c361db4c7dfe7b3ed55f44ff4421d013095f926f27438fe2d438eb894f17dae057c726f893a7af3a8a86e367febfe873ba57b5d112cd2f9540e4680434e0a5dbf7d338d5195ca3b2dbc40a38e87cbf62056b63dba84c6590b8396e12da009a73cd96fa00019eaa6fa2c1b17a563082c44f1e38647d285abfe8458dbfa550c2296f725a0de5a0d9c4f197505cfc68cb4c212f141c18fd68db83f7410b552b277a13693dd50103ade5ce7f3c3218644c8c63d4fd05857a57e58d355605b77edee2bf66f9806866dba1b71f06ce231025448e5a25118bcbe19095be0953421b0dd0e0a0d70d9bfc0dd733850baea2c8b3fb737d0dc528654cd5716f7f2b047315699571d408278503fd374fc0bab466c91f8d80861c3c4ce60e03f7640210edbe9c0ffd0438ec9f03f338ca8e48ea3caa86e8998998ed645e28bf36bd764b8e0dce1528c04317a261fa7cd555e7aea79f2a744b1b1c1b38f2405a9ecfa55dc314acb00d7481c74a4ebacadd1906b33561d3bcb2020d19744e40a5508b5bf6a255394645d833f4ed4030d85a822c89a31c623eb212cd334af4fe3279a7320fe91a03cf8db665c4c20617116a4079f80adc26e673e0a9b7ffd2dc4afd723d1c219589fb7cc7229b165bba6f8994916a5056da52f8b027b2d6ad44809c98a9486768bfab4ad7276f228a8eff022a1056a7d2cb8ced14d08dba9b83250e1004ac40b82ab509b5c418e3384260ca939a18a17e6a8c67b5e0f4cb27565f09d3088056944f5ed66038795349f2e782edafe77029f4b5f5d08f85e47a38389b62557b59cb1a8801accc2a7d6f6e643f88a2f18b8dc83e6df39e85ef81110d893fefe3a5da49ba2154d46206afadfe89e89a45f2d4371ab82d3c4328d76954fd36e8ceb145aef99a505eceb1047daa4fb0cae123869cc06668ecb94f732bbe4802b36a472428baf0bd3e83177731c7050414fc4141782477a2fd0d36515d5c47cc7931c88179c4f599cef6612e34eb06aefbc5af7d62eb77693f7ce52febc273fe16c9702090331cbb085e31e32ba9e9462d80b3a2338c09735d0cd6f5811785ce357e27e9ecf7303ecf05b621252822ca72b9e63fdcff69cf1e6edfc5c5d2dacc045f8bf962ebbc13c61cf654dc6763fbf6f5ef56cc59f9f40b0757e2c09551b5f08a4da68b01024a047b2f74dbb3fde92d1d714757e2c011f6b0be0b1dca9452ba1f852344dbae9d97ea141d9ad85bbde5a8adf65ef988ee7de61a9637dcf8ab1e9ecbe88b0f65cc421a3fbdc43d91d39f1015a7c96c1d398c8c0179818aa9439d739d8e2e3bef147952e0dac48dcfffa90d1b03817e3ee2bce99d92f1e768446c4f4cd7206ca67e1491917da80805009a2dc7fc49695bf9eb2f4180bcf5e7cfa832e3b92b8aa10484002d7b400d305f4e3e8aa52263666a42f56f15b18c0c0937d2f86e82964d77a4870b83991c27d94084a97e468295961b28bbbf34404cd05a84cb9f2f8ab1a7996259e813a39c3590f18e59c8040c7d868343bce13371964419ee601052c1888a2cfb248b0f2928c3203d5a295f0ca04d80d90f1bda667e1a4e23ee97efdc9afd5a7276c27bb2ab358033892ee953c9fe369a8adac4fd9f52a042bac495dd0e21a12ac99aef55b2fb2733569851a903d2e6d524efbcc3994cd2487405bc16019be528ceb2ff46323958782d3667afa810a7cda855244b1f90a188a9c0581eea21bfe5fa7559057ef010b5124c520a1627792cdb0cb2bd0efc55cc2ab968876b04d405f8069b1e3deb99a812d0e419dd092431f289c2596eb8e69deefac764099434e931dac808d80c964ad880c7edc16911dee2919550739c1d1cc2868036aa493f98feef50b0486fdfd9a3143fc0f08da47487d81a5fb74080a4c5a2f68f50fb3c8e0534ced27c49a32d1592b667d366934439ddb7c67a97de0af38278ce4ef781829518fc12d43cd0439dfa9148477c6d0d895a049d4611223811dba461693f5d49522f31041fb2fe38cf3e4e3ed9189cb1d2942bde3be95d7e18e52e017b56574a4a1cf4efcdae197dcfaa2b2dffedd5884664f271cb6d721727ca3579f5e4f0abbd7e16d352df20d4aa873b67a69bdf5c6f28cb08e678dca4406ddc7b8c99565e7a02122323f4b6f9e16e0baa2766f750915836da29f8661d5d5ff0abaddd5c2eb1f8693353a6ed449338543eef37ae7b9b7fa8488a0120bd9cd8dcb3d484d415bed46b04a8e1c903d0ce78cda1d8cef0b9e1bf353a3ef5cc94f4d3e40c5c7f5a9d653373525f5c0766ccce839e8f15a9d9ca5e5e4ebf4bcbdc57675ddb271b034716db5f658a096b357f11899d65fc1e271d4e7c2f5fe7d201a99fce0716f06587a2b09d11524377b2c3ae9dd7f9a09434e8b258eba7644dadf7dcd5721dcea706d51112d1c662351d5517a921b1c3a81a7e6a3acf940bd07d0776082f044a683f86452c05d1620cd0c7c6c46429f041702d72bfedb62e0b9c98eebc35553f4bd070bd0dc6e01f90ccdb780b8c7bb63388004494ec3e89e4e1942cf437f87825916090993e4832c2159e689fc1b6deb10b0c4c008ff62946fc6b1687786877404196c83368db744de7c838cf8eeb95c1c5f82855ea21aa16a50d691689705a085a1ef8459bf97ccb72c53a3d0a01cf809f74d015a56294839839abd16e26fe0dd73d32412967949e1e8862f3f7db883b58cdb33897e0d1c084c31c7554095279356536bf7ac8dd1d816735e5b9c334f1e56d45688f2db6cdeb6d99ed8df37ca012b7429491b3faa7d8d3dd0ef90c236279de81dc2d3fb6953ef3d0ed41655adb50aeb1a7e35a365cc5a664b57a74b3425c66568ee91698f5ebaeba4fe0003abeeee450db235e9da25ed14912a1c91e125c5793538757363d942fa8b20f9a5ea6ed7470f79184e8371da7351ce103e5642da441301396cb73396a49badf3e41da277a6735e338504b7823df0a232afe0e228c79fc89ef2ed3359725893f422465449708688b24e720eef259f2e0e16577a068673d39c45e04cd8c257fd03ea3e9211e1ffac812a0b6e019e4f2e0b8a8a2036fc8ccb6c29054399f7899733eafd44069e0a73416d723d294a7392d35f20978b669316d2a86129e3e65605d9bc8c29ae69e828a6f313df0cad443028a0cb4e7c00d707fc1e578e2d7b71c2328ef24df908335aee6966f891d3a7fc16bd9b2501ca2a53d290b5c03e0beb538daf569f08d3c0d5f974d5672bbea934ef17ab0351bc72d55aa95f8c3140ee59a56af7150b403586cece4d5a74186087087ad1ae4a690c86022a028381689cff87c113b4b36fa9196263002ca3e91e54fb579a9e2d0d0ede73395419b1ae2f87ea293a8a0d9c83d383899b23157c69ce8364b4e817bc09c37d90d8d217ce7895c040667d0592264c3eebd78bd42f0ad3201dc8920efd3c1dddde03a5438c978ade69fe89504bfae8b1f55ca658b3a5c53f9f16db618bea7c275ef6ab5cf1425861ebb6df82c124f5ffe87d1c2fa16ba2bb2d932ad70d2d839486fd79951a9a50b64aa8fa1e54020cd67d3168da1782ad0922407eceda08927b411b931faf54c7a70ab02e932702c4458feea7f8bc5629701311f45b2bc84102251ee95741f0ca3df645f65896c6cf1619aaaa0885e4e4867c7016b700ac9b6d817a3e48f6f436799a8040fe6f8fa261b4cad611e1cb0e5ecf0e4b5bc1b3fa2f0eaccc231876f5001e2fa840ee868fc9a9e319c8ae9b1e07f49662bc95c2aecdbd48810d3dba7109edeebecc23eb3ddbbc68e6f4af302ae16a84b192f9fd702c22aafaf3b4402efe09f18a6652c8bc79eec60f55e0d490e2dd215906fd70e34b38267905eab6d38ef9a6734b73c41c6e43fd44e01054d992b190281ea7cab29c3ae52fff90629d457a4389677fb1faad5800b2918eb5f84ce7ce29bb61ec7267a1b192574dc82bb683b54f9787ec9632941e3caa9b4772bc0cfcd9e017e18a570fd0536c726417a396695849234c01520828df5722463930a707dd1979cbe207f2a26983b5d78bddc97eebc4241c92921a5982a361a1ff885c09500394db64fc8ad8e061dcf3c3837978a77b864b4a4ab1464b782cb22511d130dafe10bc88da7d8dbfc3aedef34c7bc66f10a0487ea9125f63c84e4a3822c34a77c40ab0bee880153c9a877417e12b2aea9149f88fc14db463e4b7e4da489af53b4f0752cdc71209ce18f191f033df7518373a3e86d3c056bcaf5f7c4fbf4444ce6ce0610bbb2bf6b6cc442425b6894188c1496f1f9ee2c07c73379fd24986473c1a92f1cf2d88d2a108ef10c61e22485d96bad103f4fb087bf34267099a28eeae29be76e09f6a8688ac5119a8e19ba826a38b3e7af25e902ff5dc4ac82147411ed720345ac6f0ab85cc6f59442b0e8a3e27a13dcd8b8988c7675c0145b82c5eb2a530891242b864ced3d3dfd1cfdeb701a133387f6aa754f8e63c9f25109ce7bd60a385660f56f4b29e7d3ec933439f26b3b05cad946f98fbefc37aff41ee1e4226c46ce1619360871f1c3796e973dddbcfd9d0436d4d56b9d5a46760c7b81bf9f77133aec0ffa33f8d3839ac9907d7d4f611566e07a71ec3b717e2b8618bb92450e143f8e3ae8d2ec3f4f76d6ce17e093af8ec234e7d74fd23f752e3f24b81b582f0cc9588b931d35fd89cc3ee201f2d794f3416be4b56233f97f2bb7802d405d739e76715c536e86b038b944714893403fb4b8f173c4064afcaef401056a76ffb627b4615341f048a9f6e31cb30f8051e7582c589473dfc331dbeb0b8f682c189edc1663b6983d3900e97a9605c1e92fee37f1d33325387eabee5bd4da69b6e5cb61142bbdeaa12214633cd47b4673bdab54523a9f3570028557beded5c57c04f49ce9438528cc0794c1727eea69e411b9195d309df0ce8c1d9a52322829d8b2d11e071d6e042e925082b40e39613a01e2cbfc212b6c18b2a1985c3f7cc2ffb67902108e8affb3b13bdbf3f4176ca71ff193246b03dbfe73af9d35c22f80971415c8302e7ba9ad519bf89b79cf3fe0eb2f53744049bd2e86054706fbfb789648acf7fdba969fb3e094427db9a6f41b96b630b420e62154d6af3d728aad2c2ad0bcb6ae369dc543371df3d12a922d53aead846a05e71dc521b384fa8e4bd9a0e8331a72fb727ba10e6baad88175223e76315115307d1506efc0a40733261a4804f45b6955ad84d4a896162fa415f5676f5977c868b4cd45b3a79d423e40c192f549d3c7b5cdbb34b26465d0e3c2b9ff9a74ed387a6ea839de7af336f19336fad8fbbcf4eb9c383ec5901ae4783c0af76691af2c06f67f600c8c8df0198a88278a975774394bc041c371086df049e27d9b06e360788f95a2a14a2d7831eebc3764e104ff96176166d1455320f7bed3f37419244cde80e66791cb8597e663c03ad85502e975f4300e8f3cf3e6e15de4d3365c98e49d685a9b1fdc93203606230199457d5ba96c9b7e1e307a3e2af9b8282350d0ca03ffef5b040d1900206d7b675b30a15b0d60dec72a0836cd92ceecd0d459365c27d727b342bec51fe0e73337ebf7c25fa2cc8f0279fad5e1c63a091b30d18fdad632ec2f61bc64159648a3390caf018bfaff65190912573bb199794626915a9ff8e6f5b45b31dc403f76fca94c68d83f0208fde9835f000f183c45af3e70a176e5ba177d9979bd335152e736ee9970e90cc59ee18f07c0e2eda75f2a4d5e75f515ee4e46f30ddc380710a174d50ff097ffbed705015a1c3dca8404c1cae87dd106618741666477d2a0211a3151090edc14530c60480688be52eeaa43e0afc862af0e939ab8336ec1f498a58c86d442687bd2a4df5f16997f2d951e7e52d65b615d4c7f1525431f8dffde68f059bdc93d7473e0b83dee6ab13191315b44cb85e009d6ca0002933d4bee9bb2055a106a1fb930213f2ccbede820551e1ca45ff7438145b294a0eb4469015c11af71ba1c2966b57c73894b33d9f9b1dc44a72942038d536307a778555aa1621cc7d432fba861384c3cf978b55471b9afadf6c9c40dae6b32b975158c4d71307039019b50c271f66b8bdd55556f360b8a8e4a12514f1aa54e5ea209aa060ec88ba0ba62b9d56f9de56413855c378dd051c56f896ac1d6bb3c8bbe9b8dd03fd760321c98bfd6f16cdfff8a6dc4ee9e0dedc24292c457e99486bcf527d8d0b09582a2c0add15725f49a6b30fc30104960fb71656107aba03e53461c90f2fc3a986c2882722aedc2a9a4ac0a7db49def33500d16b7ad458185483bc2c1acbe1898d5b0e19ba4955c49e790b4493e041f3feae56731ce657924b4cbc3436327f74761c0bcdf685b26e2073445a3ff853d8481076209ecc70f4782afdf57c6818176114df55235040f0dcfaa676db1b51f6ec1225c35fe9f6a7107fc052c31c1c9943aa87714cbea52086715d7347029ed16f451c8de7aa17af599348a519e02d9eb04b12e8efd2bfb86d8d1b503210e3b1e4a45d1f71dc69aed50cc0300c3b378d8cf4653b506951db0f7f2bf31b382a4e96616f0faeb839e48ffcf5924410cf81fc6deb28094bb5bc248216b73d74c65aa67274459f892af0092225f0324ff4b102982e11205cb8bb3997758638b09eaf0efa2b8c2dfeb088733532784ecc0a2e79adb17cfb81db13ee9cf1763e5df702540bd27eb4fb73323abb6110eca386bdc6b422c0a86372e18c700ec50b13fd53e87f62ee3c2e106b0dbb14a6b843ff6dcfc6a36bae577194e833dfbe38ed8f89627a7e3eefc6018152a1643f69c5f9ffd209e426c61dd61541ad4c11a218f66ad8b70e6675cd5611b46a911cba01873ddb9d85625eda494082e33097a04914d4ca567fdf7cfc55d6bea01f5234c077c0c503d9271616062db16806ffd9af14249227035cbd8864ab829dab65c55f9de72d80997abe30a9392ba3be79bcf4a380772367bcdb954cb3925dcb0dd2ccc607da6f8f4368ef15c07e5cb4c5aedd21e66c00e707f88e9799f8b5c53ca12016a17f49ef32e7c9a63bc3d3eaf8ef6c6bf6503cc6f5ab0f387878b025ebdc9cedde934d9176cf3fb20a61617d69c35a21d31525c49bb4e3ccc1bc633bb8c1b69dd17a81159432842fcf69a19361ec0be597c13bf577b99130c8358317993f1a64e13cd44ae656af14bbf909afd6c5b0b5ef15f25a1904a3aaf8997cd6b534ec575f55a215c2768c66757455768c6a7535b0befa636cfbfcacc00a6e9739bf2553e0caa558218b1374d3b66ba74ca03f4ff4f36bc32c83062649b10cd0e5ee87e216253466188f96208ffb6f2da51238d86f288ff0c75db729f083ac874c994bc3f85439ab7f4fc293efe3a9ad417ce29bfc39e7882fd516c2003053180e2ca043e4ec067a87b3e8552768b5229d9a96c241c4999bf67bb3aff1946a5b0edcb04d84826ac1cb57c1943b51558fa1a01632f69bb959a832fbc23b55e2db386e75c2b9095257f6424036b1f16dd3b983883b7da4e1f9408f259c394eb2908d24623ddd65b7840d266b48e68bfb6b49a37554f40f865ca2ea0cc2052806bb0247fc36f41bcc4bba990724c41387470aa2d3a544877aa104e3866c184a570df53d1d4f3189c9a85e166ad443149597e5055798fb4875be15b855b7462aa377ef5953d12485c80ed1e0980887a340be46d0ee05cb408f2bad84ec5be0c52dc6591cbf777b8d8006f96e4140cf8b1b9f54141632812a1a5bd90821794e1d50aa3e1798d25c7a61bc923b705001735d410e14a3e5792115b77cce51c8337b0a83ae95c15f1cbb19d53abd4ca0922ddae87a19cce7e8aca86c7b434cac9ef9c3b245862e969e9f6957e0bddee713d512f62a936400f3afcc00be4af9bc67b92ff26ba801555af1dbb9bc91c9d10798315372d25aa0724c726b70150bc6e780b48c76b8d9a43323a8b3720d6683aaad0e17b588e19dd3d36cc60e286efd5cf86e6d7f0c3ad5e09a2544a2c5ff46e35d4ae4696ed943f8004a95b9bc4707c9ac565c96b245381b40834f1c62a8e4cba40c3d0ebb1c614a7164eecca56337862e6b6cd0f83ac7524ba90cbe5a06ddbc0822ad735647520e6af2ffc9806d046f1356ed2af0b67a850abe7841e58d13866ee9bdeaeb87b741da37b3fd506744ed26338a53da0d3b1f1065867bbcfbc639e85936598b793460e3e0c3a9a0937d3b2f5d5257d1b4e1d466f5ec0bbf0e920ed6221c2994bb91aa9d3e7b43a3733875d4cd29a8e042863cbbd3384861d6dfdb6cf9452e166d8e76a0922e05ca46109d5e44deca3540bf10bfc9b4743a7706d6e429b731ffc1e4464678764c6cf406a4d96d2f273bf30cb7b9e8a14a811f4094254bd995b0713d56644151f2c64f8ae8ca6223b81e3497f2961bfca5d513e34db9583cd15793af369f9196a334a11c553df3cc2a73a5e0458b5ca1611afc4fba01152b0b15819e7adee7a94d162ba49b34936816c14940c0d131634716a932517dcebdeaa3b3c1296922156bff8f5e18874717c0feb43588dd343097e34035c98dab14aff5708c2571209490a447ccb2bc903f0a23084e29d16868f7a8e679ca90d38edb59003d3514ad143ed5943e468c3b8185bc2cbbc8269996fe3d288db56f36b05cc5d656badb7a6356a5cb1ebf0de80445eac966c97acd6c09e14910a0962ae4b05c435e8f9d6c275a7a29c58d3c7cf85daa589fd9028026b4dda4a719b065fd01c797c2185372df11462fa462036a128ffb5e842d0265cada6d190f200f4ac112153934dc8d9dc4d5964e042581286771f9d40c9fc1535297b513c957c7ceee60e487dcec3181f064e471940391b992706cc6625279f59d61209bab0217105e1016c55f60bd3c5b940bb8b63edc7b43751db7a31facb0db60190eef041d425be66f232185c66ac0bd000b6d63c9e3f4291f9aa761ea4a6cf2f7f998e4a2193829c56650207add8e1e880eba39069bbfe3e64108f65275b39d288b4cb95c5232e07587f4ae123a01f582e8d9eaa54e83f8545f0a0de7eef6b64d4a7f0ffe155f0ca399c1eb84042515546ae5e52113fe876744bfac18680f4f3d1c51be23c93ca6114759a6f3417fded40dd9275ace9767870bc46a8d23ba12195fa51f17693281ada78b83272c118b0ccda4d11edc656bcc3ea17b53f5efce7901bae43e0ceaa968015008161344d3365fbc2daead83d69a6cab0c4f449338471a913c9ee601bc9931a65abda11845b5dcd6c630d2392087ebcbae9977f6d31b09e25358a4d2f030583be2f24284bcf65a8e3a25c08e20fedcf3513723aa6a772626247aeb1639586e11e05ae3e7af6db1fc192f6ed51521d735540463d955b4538a7488916d9771ba66d99d2581e002ca0b42d7f42c07b308210abc3cfea802ffe433ae2f105894fb8ee1de0c9cf7a97989f8ce76aba5cebf2ad797a6242cd40b4de468ce6c831fad6c8a4d6586d9d351021c6da98e10746feffe12a68e0502efee4350e1881c301ff6348392f2dc3a9c73eba30d99a9e4b5e99179aee7fb7c9b591f556a348636e9b7c44ba8348868c1bef66a72ce45a8ae2f3d57096cd685de33a177d5bacc19c7ff3fad00ba83f756eafc8d564aa1ae0201a844aaaefbc03028ad1f88bff71698ab070c5f5ac8eac451bbddf68197c2e74bf5520466ab430a6e1235fabf36f5804c743fb3c5759dd146bf438386c06ada50d3a33bb9473c15abbde34cdc47cdc42485cf63b4493cb6e9790228bbb65825c1f9d151025612652760e57c5bf85d42c3c97ad04cea758f3dddee84a1ee77e1119af756f2c06b1558882f4942958b5a822eb52a0209047891a4a68afebeff2f9d6cf5a8c4aa4a406d05c64824ef049b401ecf39f6c72c4c3f5d2e6e5ee57031741da164bfb84a78f76422c01c810d2d22aac5a40a8eeecad458597fbc46c7c5de1ea0d20f29810b6a25c6262e7a246f9a89936af547c7eab22e5f983b22836138b86fd3e2db42f27ee76861373caec485d6f28d47bfa24c33118d505b47bddd52f1631e8e475dc0fc830e8a6125beb04974c2e51c0d20fcb9e5de55a6b4d917558c6ff907ba591741e5ac584ad21407ffdf9dc50f7362933f920bc75db0318b87c00364109276d3b0301d823623d93d7edc213b9eb63b3005de5e42dcd603554b36f13108f0d10254111d35b5942bb20b127e6d47a89ddd196da32816abe461b3e019b93d82ca9922dbc75e429558c2d5e35a8a3b0204b519661287384a759f0bb85c5dba2e06ed3f65047b4f0b1500b6db34f487d6add23718dcef90ac8547d35f5f8ec3668e1cbfe72e775a9c01bc297058e647e80356d8b74e82451fe3959d0b1baee63405fe2116540e36ebe3a392713a258f20d49314b46e4f2b057cc43e8446dd12e52c55b3b0b19e99c0f6bdeeca8b9a7d070c8e3e96435e8d367d429ebf6751b7eaf0e089d68eba708dd217cef02171de539cae02272b86691b625edc39f3e163b78c079ed5ca8cb0b576232bfe30e5e2803b626cb92f8ac3f9c76da8a82b84b86b868092d12207a4fb9fe415bcdaf2dfa168b1b93a4ec56852243d56817957d0f6471bd855fd8f115d68f9f72a5b88e6fedd390c5f28adf4063fdb1a8432c2c8ea9e751534b8dff1c13b8c985ef85e6e92b2da69f15fb8fcfee344414e6a00089cb82312be07a4aa9c2ab938d7033ba7e7095794f68f4b49674ce48386d29ea79f23f97f19eb09574283d37a68dfd1447eec9824df018e0f91c112de7f39a5061616ae53a490cb107140b78248c10bb42714fed11fe651969aaa9a0f526537645208da5ecf8cda2fbe1e98e02d622580a1a11da23f48aa12b72f0a7a0ecaa1fc16f0da819e3f03ccc61e722bebe5ec4bcbe308b1f539bc6b81089678f049a255addff5d4c02c27fd3126c59b9c95c47a858d4fc1e528b35d9a0a58db09d2768d2d0b3bca83980c4181fe23f71028ce75b420046450fcc8a444e792ed5d412dfca112ba16a5117dce6ccddd1cbaa07b78af822a4aea15f7fe387ccee0997281f35d46ec4c985c9145c8aeae2902e5f5dc0c341a2acdacd2f2b1542ab61884b08c7c379a7116ed2a0187e5c375cada3b91c27bd8e747bd4b786f10b7d32a75bccd5574176e58fecb38df2461eec625aea1965fdc80312d3c7f379712b0c334483b6956f3ee80e8f8d573e993a31ad633c03ca691b54ba9e504240e20abde2e7f8a1d3b63862cca9dc4a2ab7971e7cef8d153981049b37ca756047648a2ae8266c8dc7fb40f88ae199665132c7bff3c2dd74e3ac416efe3773441d62b0a14625abd8689b7318a6eb4bb495515362422bbb28fdd53fbc2a5b7ae0a9676d7ede1d98251371835733ff0932cf058ed63d579aaf1ebacabcf7433df98b0e9c5dc5f15717f55f6bfe10d523bc9525fc2e8162db75b879de88fd0e9707caa37612a469613a978148e279bc86c312353097091e88a7f4d7</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">请输入密码</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    
    <categories>
      
      <category>数据中台</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>数据中台-13_数据研发就只是写代码吗？</title>
    <link href="/posts/2022/05/469e5295.html"/>
    <url>/posts/2022/05/469e5295.html</url>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="55b1625b661d77c57804ac238b1e9192ae85296e701f7fffd3093e82b7623bd9">4e4fc70cc91fd42566446082a751780fd5618d041572b8bed7c41bda7a5fe16038be3debec314ec22c9c0454600299559d86797a5714bcb659a5d33f8659bf5e5c1b4fd4534d45dcd22a5b578056b8c2937fb6aaf17425cfd09bb4b84c026c144a61b95ba54663b29d570a093c6050a7615820f1d5fb9dfa85c15df7406b3b7db70d20400346fb32f45ffc479a9e6b18efdd80333b7bac034ac5f1978f62082e045d1fecf505ce0b5f0200af7c403d9d17912e055f713109b44e54bcb327a534048022253460811ef0aa082e3a5012c76a03d73e5f02c00700b0625e420cb732a4bc03088114075bfc1e5b27769e4cec3c20f7771d272c51658065fc1addccdeab822203837490d0f779335b86830a2b1e7e6c32806c8a15be58b92521cbd9a99376b7ad957488012ba313dbb28942bd7073c3c50bd651986b56768689d13bd11ab5355993a8e7e6be12fb0395f71d1b109f360fafdb3e6b9df217675cd6c33161131de8fbe8e233f583d008294cb78ca352beaa62613a3f69dd75dfa05488e801c95b13a8359affb6709f4f4bb69798c655913f1177a5f0c757c10937d046b164736d18a9bad72489e6e377a92a2d2f269068ceb46ac4e1c81c08cc0c105358d0f7e69dfbf5318d080d85ffe6cabafc7233ae24cf8e68f190c6dac13d6aa2e22181a36287466de0d09f174772dfa45acae272ce9c225b9baaa14b95a111c501928a96a33c93edb6c1a1ddcb70deb40963b5c59cdd6cca280cff41f39db4b0c069894d173c490fa3554b9b6c0c0bef311d331681e69b44c39470b20f87908a1114940cd9e2294e5d26e5b4b7dc61425f3954156b79086ad214258a7f2dcc8e15c7732dc6622b7030dfb82a4ed56294dcacc9721531a9263ca638cea9e327203128d4fde66eed9cc4edf67a3ba92169884d3c429922d9f74dd634f164e3efcc12057c92cbe5d9ccf748800ef2689a1293f509c770ab9dd2737c5cdef40cb45a450bce1df761a2cbccfbcf8fad659b6e9b0fb5c6c1d3d1b1700b167951d4e3fcb374b0561967a1baef9c721e3ba7a7b7fa378dc7e6f14bb4c3c79020b823fedd4b3923e6adf0a5fc6e1807d1c1548e10ae098b4891d60e2d8254695307b3a26c52f496f4820bb760390ed964eae52b9f07065e9de65095fc07036b3fac64628dbedde8591f22b1f5f8770cbad31122b4310a7cc7c6330dca43ae2f2ac201259f29e8a18ca63461daf9faf091cb0358a0afd7ef87a32d3509a9cb43178ef179ca9298fd85b2bac3875fa046975763b42e6153fafd41beabfddcc3eed0d6549dd230ec99fc437b02de4eb71414d9c8aec8e0863315e6251c06a006e6a43e356bbb98578a0b4dd20fadb54f6e1633bc68ae1f048661b8d1872b539fea0b57efb123d54d4d7ba7fe18fd8227df4666dd5056f5327c88cefff24913b7649530309cd7353f7673594df6f0a68f85aac584772eadb0e45852c83961061822b7f5f9e43b13aa7aa8b11d7861abe8d87538a8f15b94617522da9847382727695e6c81d339567a1b5b9fa63cce20a5c8a6f48e55b8d61c7f4d73e20f5848da464ec37a1f849e9725cf8c59a59dfa0186e6c6bc3bdccdb84b55dca49c85144a16ab84fe8d45264983f589a628f6546d5a5cd6fcd17fe59b94823a9a79c483ce4de41464dbea37ddf74dbb2a57112957015e80e558a0059cc3be5eb79b012002569e9de117b6ca7c28ec9e9f0208ac12b24e54262dfa32249eebe0054639d17e50746a9e659089fbb4bc7ab3f41e641848af25fa92e02e93e27a995131a0a4c74ca824103f56c0543d7fa1f6ebb8c881c7add015520d64adf5198207dbc1ae17ac256dffa12d9ece16918338267b03987d1eade1a1d8d55c2cb617839cbaf1f5adcef141612c6170952239e063ed3e7c931e8f0723896a86f574f397412ef6bf7fffe76b44ce365498a15ef0d46ee7d6e31bcc48099e03d6adbf38d7f1847d7c24c8517e364d4cb931ac71061c12db2bf3a7703b01999ae977164b3deab0388baace2d73633f322b72091b8cd887e50f4061ad45cfb0c31824080d46bfd8cc4224569dfe2793fdcd03a9f19b1119838e73285990051c1945ad9c36980f653d5e37cfd555b80f6de99b848471a49cd1b33eb9170acb7f34eae240fafd31e6a29a64ae412f730f98648de8c4e1703fceb5a5d178022d1edd38b8596e5e833f4ad109ec46430c54145fb115759a44c82503a1e8d1091cdf0450a993dfc7c1a39a8fa25de980f46a600cd32a2f9fcea18df9229635e22ba8aaeff1b16fb2d56d53c9b70e51ce7e3051625feef28bb64b0a4e908ed68078b52a9b8dd5fc69f76b5ed2493258c45bad0ce74615d6cf1d22615348cd6db52191d6703f0bcc9730dc9dc55ce0802fb4361e0a4e9e91b4bd3837e4904bb7292febe8b40e0854b0dbd4f7feb4d1ffe0326e7a2cc8f62dbb7d80d1a9f6665554f48aa4041da9478c4dd5908537e1dedd1ea47b7beda763934a6be1e5d66ea98ec85733428babf08ccf7e246f6e041180f402efb310de44b258080eb3217cb1f7d7f26f11bc3824b4fb4b2d331fd73830328253bda4bada6ecd2ec2bc72de7c1939a1962312322435328f8b3713364d56a8205050830ce0711609d7ad3c81eef1b10ea576c18abcd87954b558fb14bcbc38bf61894d55032b45743acbbf91f5e135cc1a4f2aa8fa68a4a382954f95fe903529ca1c4c4966c58673efb0a606cc78ddccc8775b208c594efbb6b091f0b55d40a8513af439bab060052fd837587e769a9be31665805e033aaf4a3b15d2d302ebe6ed4a5cbcdb2bcafab582093ad3ce961ba7e6efd925f1c8f99fb027ac0f95ae95a1d18e65fb91689d9ea4c78de2e7a582cae5b17b65860dae6e368de777ee42f21eba9b22c3448a1478efd4d01fe4c3c2820ae1bdf5de2bc449e753f840d3a1802b877c406a364e95f4c573b1f8cb382938c3e112b7232d7f7c37ba15b72185533029626c4bfe97477e8e3f32850aeaf7888ba897bb05a375f15e95778b23351b50be0a6b55b16cf9da1d962cbba03c0f9d3cecf797fd33c7554e5abb91c08e1d4ddafead4044af42590b36610d4a49df595985d1c17c8970585172b5b789100903bfb1ae982c3fc889c82676bdf5e990cb254e07f54d29180ac495f26623964a2fcf63562bf2827e686e58fcb1aa9dab986ac876983dee2646911b6a608374dbcd0c3a9b5c034cfac8f30c2c4c85f0282fea1d2c3535cbb29a9b03424d1dddc76d8585d4632038aa6fc903f635c6eef9071b52853ffe8fc87e022f0dfee8dd962074ae06bbf812507d2854beb48f4d75c2472e3d538dfd0dca298f49fef8ab35da3a0f47b9c67e46a246f51a05c78f204c2f0f62e7f6f3b313b65146a1e00bff7ea9bd4b65e06012d3c64e70847919eff0c40325669b62e817debd71ff768e08da1be56c84c1cfaea5131b3d0ce962fbbf0f7fab6c0343a52d51edf5f1f4961dfe55b2fcdfe3e59cd2afb9c57ad15c557d9ad7d835ff00a304e7f7d5dfcf972303fb219ff34efab2c8b662a0c119b0e186a39a05826da9f7194a26a6a55cd7368902c67d0a736472683cae6eb5f5f2063553e675f7c71466a78d2140a1975101ba320bb776e8a9655def6298bc6c5a7da31dfe9348c545388ad8433ad663781a3ff5bfc7c07f81d0886f1e9a84d4c8091bd5b60d0ea4d2b45d7dbc81744e25836168480c6ff2722e4439766af104493734adaf130a3c78f2c2fd30686d1b3344d7ae6f1f0b2086e2887dae13a5d1b543572a80e74d74e3c5f03e4232d35d045dc5306154df7a7be312316aa41e731ecd9dc4c3b3ef33f8cf64dc3bed7bc20d6b6322af92d1db7e795268f3f82152032c2a2ad742823df7a4c652ed3ee20862c5f2f401ba6e1b017e6c8f43ed6f1fb328293cf95315789a9ac0ab79993cbe06a74bdbe3bbf3a254f3120b412703990e0962fd04d6076d5931282bcacabc437e0a30484d2f27a20b7ed3cdf65da5b54f05618e1e050ea04afdb78c38c34127b3285405a8d51d779210429d2fa541c90863b65158672b4da7e87e12bb319fb45286573de31973710013bcbb18b681de7c4d0503f2f48bde5820a93f2ad6e5f7c03a4b80bbf50d83ebdb4094a451d31a1d062f428e6b269b87200946f04920562e7566dadc1865cd2acf6c6c26e7967c0de1569063f04beec0bb17e295007649fb3175b20e407c6985ef9c1801659965231b04995f913daebd000a90b1b68193420cf37fb8f307cfc80eac59bf93849dafca114e466f736a61b04032501c370475eb7fae4fe30c475efc746cf7244242af63a3c367fa4f4fa920e64c5f14144179373c50a30945030ff5d452a7e704f69b5d0bba0a3502916c17dd6f76a73446ad4a8d9a8ebd6c92ac9b51f5bea31c9231d7de8a4e5acca064b5dcf063221ce235fbee34ecbe238b2674695e3d1df464dde0ffe3b8e3ba6c2d159071be83ce1f686f3b456a710ab42f1555fa12b6a6be4fa004a9c64884eeb1df18785290d089cf6072bcf526f750adb2ecc417ae7d777ee4352a23bc81fbe0b12bb0474bcf730093ca00df16379e9d46004b1ad57047eda9cb5b812718cfbbbb6c17b480dd68c94d2a2f2e48c51df770080ebd20a4bd35ee4d0857b53bfebb5464e973eec44d6899aa7bd091e40842169c958b22bca6824f3d6c0cb50c9db37002ffc8624ad29e90e2d86e194328d2c2b58845b197688379b71c5c542d83ef2539aabb830bf3742e5b0f3767a9526b46bbc7600d97afc9300f5a930a9145b5be994d3409635c26e431c10ca2a46afc5502ff20ae347e79314bc5911b5181bc2d94591933277875a3d37248ebcac8f33935a695a0a16b388df8128237d213859294564a83d19739419a56d21029209f5b57a04d95e3d702821fcce3bcf435e6a060a090e66c82a6c092201b09bc08d346570ae3a3901215ea77477551582ab8d40958feb18583e58fe514cf09903e5b5e580c2298c14ab396b6b11a54dd509c727ca2153798470fb0fbf0931f29ced45d6de697e86bd415e976b7e6244e7ceaebf9ae7c60bee84fea9b3c60d37ebb1ce246c22f0417bb206301775cf7bd93123afce9c6dbce695152edd0338df61f3573f3279ddd8f58ab0f1bf5fb9dbdaf403e36f6fd05c2847bc7f33008f7778fa847c5b82694fab4589f60953f87a5cbd0bade45081043c6ce0d9d64b25ade1c6b586c53c820f99e3cdc73878698a75756e5fe70f12d786d108869d541d768e05b43402b02579665029da142dcc69b7abd262b376bc71e3bd910601e6aa1ea490602df706b3417a63ba1cf07e9660c9c8cbaf65186f36195489285851f21d35d53e220adfce126f0536305e1b39971f29bf7e1256359cbeff1cb8f94fc3811c71848f7befd31b18e7204235b42d0d5ab5f880fa9411aa8a887e0f5f29c80b414cf7bb8b7aed637bfac5b0c5a067116f5deb41c7015cdebb90e2d8a3d9c3f7b8468940a1586077a93b6e719714b7ad70fc7d277925a5848d0b7f2ebb644f240ddb9051c556259c6a77f85d8b53b127be5dafa016592b0ae4b61ae5d6bb6ce7b5e1671e2b3596adad581af708fe5e01b7ee06aa0a487356910d2056702a84a337622fb230a2059c75e0743b31f4708c55d4fea3a25c08e9cc0089b7e8f43a0a075d0aab7bbad0010cb8f21fb7948cd92828b18489e29a4174258534294d6ef26c4578529f1e481ce440652379a5062a6d7744427da65e25c9c0be3c5f0ac88ef1e2edc23ab1447dfd01eb6fa11f91c96b35a8fee57ec98fd8406e3aaa16d4a0aaee8f38a41f71f03e214d744972435dbc05c07d7a50a18536aac594acd94011544f7ce47a8a95038abbc43ce13a99dd29af05286966470e2f2224b81522e18165394a32d46c8d81c49a35f87f4666c6b0202a0d3c1196ca8df478cec1923122e2eeeef906f8888d23af94b1a1b40affc2cbd26d81c744cc5981b45c9477844b170c81b469b48dbaf1bd2fcf9fafd9ad98a5b4e8d583d6aacd1828b78519ef522dc80fb685ff247508f35ca2bfe3c388d952c0a79194a4a245af0c9d36764e2d0be0b54e2961b3e98698b95a02ffeb38a6630c792581c5fd6afa274bcc79ed5899b981e84ddad558348eef464577392a54988bb6cab6e462ff066649a84dde7f51649ca6ed13bcc814dc9f3626b450aae2a12b115aafe5fd84754d643baf1a5c20230629465d3e34e59a873f68f0038780ccaef0a8773a61d61cca14fa84d283027fb263b19ecabb373c17c1496a21023011dfe4ae2fa873ef83caddce7c4d80fc63dbdeb799dffaec74bc1612110a13890e5b034e5ef280d07c75f82bb371203a4d056b2b89fd623b9a76d5309d095c9ee7ef1ec824ad02c7cb15d906a4900e47365b0cdaf538b0e157a982038a71cd4d6b023d09e99fc00ea1eed671ec6c2b7d28d6c5b76516a4c4dd411001374b3de1edbe84b6df572ddb8cc85c5f0614d61d21787118a872c350975ddf1270be81f8f56bf456306c1d33e5e9106651b97f4b20851dd9b1bdf89a7c401f1e26afa89fc4d8e9e1a9e3aa056d7c221641c8fc073df242b48b4be543f4fdeab7266ea06bafc1e3bc5d5a3890c126f944ff79664ecb359b38f9cbccdeb23bfab319093d4ce51491a24d0f528ab9370ddc93305ac303bbf5f1e459e9a78909132a5e4eb8e0780500545d9e35e69957a606502e26b8c0e08839f102d0cf76fb5430bbccb1484d0189d7fc4520d179cdaa385dc3ac319907ad895cabe064ef5ac5c19346c13017709e2e7bf2f30698abaffb6d17883968692b96a8c2626549b4d07f7a9690eca24493378f5e887f03b3fcbcc9d0fe76e19b48ad01432329f93fa12c6dcb7a935ce00107b03dcb1a79c3cf4e920d6f27c16c393f3bcef2c09f5030a3cbe72da48e64340e495677b58b8bee7638b6bd7399252b3aa1b2d64100cefe70394ced7493cdd414b1b7b7fa562801063a67574b833099016453365b262c1e235bbf57bb487e3643eab8641ba02fb638b8b54dd7957dbd5301c84174815ba2be095ccd703f28105f33ba1b17ef6680664f2ca0d90d443e65e0cbf87ac12febaa456534b9693a323a0c41fc86cb7e8a3d1410062f679f4402eb184de9d236dc98482d7ce2c073e12ef834d71ca9892fab71959d1e0b63f024c679feb7ee9b68d948dff447a0deca6b0320ec3dfb4caa4dcde5043246a7f1e0c1352ea55c22c06c6cb7d7c2bf85135568c26b6a01385b2beb3f8c631ca2056f80552c548f657fb6fd582229f7af90bf12c20d7f0ad977ff5613c990e5eee7c92c96969b27d49eda0aecc78cef610a0760e5b978485989078cc23879b3e3ff31f72422b3eec18a6b6652c34e5bdeb0269e7a8a3ea61d5e69a6ca58b85e3306200414e198a00142c99ac3fc153becdfb414ab5dbe48b12030fda2ad1fd453098e83a967b9775798fcea453949f94f48b3fb52d527d12b0991e8242d84e3621375453c6ce77a92d8b21e7d3dbee83d1f2260f1114e6002a7dea237e90ebddcc9548bc7ad5caf0c0fed1eaa5f9c4e54355a46c28de003184c3e062ef2d502c8320e308893b92d572ef11a270261f6c2e244b85cf40f946fbb2699aa2d796d718f949a1541dfbde621ff6d5e9bca5aed61835304128349602cff769f3cb73122aec406558fbcb0a3409561e3455f5801968d00e9cb7605e5720f67baa95256571a5f83c768913d91c45ebc13880cfba23d90b06dc0a99725a11a5b8b8746d5357a292511cf2fee4b1b81a02d6dbbeb737f08dbb5b98f0e2f1d2996c41262ad31ce261b4a459a92ba976e0f9246a6113117cbd2ae046cda5aaae6466682baae67cce4abf418c860b1e1cc8ce94aaf660d450eda9f75cca909f9a5e0d83f6c7e9f00f27fd158175440eef752b30c6c4a90a270e828c5a3dee44ac20250135e5258c53343f64611c4212419c27621c77d489a13b24a0f04871d7f41d2f35377a1dad464512f6d0afb071007f0710bca456e6d318d6fa14b5285842501491f3b0a2c6cdbedd0142bcfeab60847b0d7fbc0b70c79ca66435223e17a8c1e2342c2e1f8b3a261a77c35b765bb5e331e2a5a8a92edc2790378493c58b638f7b44a27c190efbfa6c2971094a946b05ad2bd1a808744f92238696bf061086605798fb41c6add8ac5decfd9266be44cb305c10a20b9a3b1fff80608f196dbdc44236831c809c7989a7b6f23d5fdb9b200d398beffa228d8eeda2239831a4f56c6ea2a77f039e59e099b2960c413bfcaeab2042fa928dc7a235b426ddba71367cded2f84885136eee14eedb9f18f44f7133d01b0f6849f0315b7c407fe58bd79663d9c81828bd8709a5b6140183aa3cdd5f0bb9f7f03a13f099c52b046249d5bcfc28053092f72f5e1595a42e285ba9e24392be8d3a129d9cb3da8a793870d7aa89453db03415e2d87570528bc114443d095e53794e2281851f88a3e0b63c6d2ee1d44c1b0c17c09ec2586d6826e15af1229b8283ab213c5c244cb51c55282aeb928e277f6f07185f64f7fe76ef6006da88c24cefacb4b0a3fe4d28d22624f3b219ec5302e39ddec04b0d9e8596549ace6043b8e583a789f4182d069943c281f81dd22569d69ffa4a3cd06ea2b001139e392afe18f53a9a436d3fc0640c065cfdc276a42c3f816f3a84a5acf3cc9eef25cd0db25fca535bc63f8cc5c48e1b1f2de9ebb1db8f1cc1d6d90e4b90ea7f7bd1253919b1b4893aa26439267a7371150dbfa1bdc0e5cd1491da961e0a3465616e7daa79f28daac1a563faacc55527afde5e953136737efec9f43f60e567600bb0af1387bbb1930e8dfc99a8198abb25f1a4fb1be69d34e0204c61311d2ead4ad13ea6a39013ce3146a4d9edf55756e04d96ceed84d551599d1d2f89e0ef5263d60af66eb09adf9153d547c6c7b21871148f2e72a0f110e0b2201dad02f5ee4e6a6b1f81ffc61b217a098677f95b8c67c2e502682cf5f305c76e548166e072b30a411ffd4ede33bdb1d1ab761347b74dbed98b92d9a86b45953cef67f0f9863c050fe9618c7c8cb3e1effdc7fe1e6ee3bf5ce39e94aefb2554147202fa553e9da8f635fa7985d10aa2f23efaab868e1f4b6711e794fe330c26abbf1cabfcef7834d27024ea032605cab8b3e1df623bd80532be2eb71db0ce09da99b9d2ab9bdc4f5639ba7e4627f8578a6d2a822da1a89258ea7cb7a87b87087fdc73e3885a8382d7033722d2b07e4d0343fd3c8d7fcbbcf08e49024a565a6216711de6d958367029c77c2c535cfe90a08573ec5ea7a90d84622649d8c232f013b7e65cbecdfb932eca24745c8ea78f35eee0bbe0d4863b2affb2adf1bbf5adb51156127a86ee71a6d8f64b8ee60057ca650857cb1bd75511e01f77c3bc8245c655e1ec71958f935116f6e1d5f64a6d8d161affb513d3f0d59b5772ccd477d94a664b9c857f2c44ce0a75700f242953e183705cf3ea8be6aeab5540cc6ca9e8ee447df570686a360fcdcc927631f67c4ddc6a630c832dff0d846ba5005b9c8f71fb201627bffb8bde902813a2b1b1a0594a13a6eacca7569cc762df62659ab927802f45feb2ca6a7cfc8ba3e862b6fc6c1b3db12ba19787e43305b43bcb5440af5d488d32f6357c05339ff20fabeacad5585d7bdbbbaa5903f93159e889fa9cde6b1755a149b26ba2e28b533d0c1f4c787b14e9e2f58d4528b827bd5143943f1a6a42482648c206c110043e16871c984d63308f3dd9dcee06bfe05ecd4715e4c59c576f302aa2596902057021947f9b581cc1171e4319e751fd3c2b8567e3aa8203b2d2b5e512e305cfe0d10058f8d7f43e6bfeca09b64af887083090fe06ed9729f9078a631251bda487c6b79ad2f611de24f5254292fdbd59680bc47fa589654cc263767982111846bdd3fe672c5faedc14efdf2a403692065d56fb167d2bcb784bfaa863a5ff00bd3e0c663d69b955a422134324b352235366bd1f6312b3ec55f4909639827e021d781940cf680b6cc6c2488c4eb1b99c48075b25fecc2b5589f384370f3142dfd3598f00db6eb5c4c7b96be4b4f2f96c6a8afd0c24bbe6f03ab875fb37b5015fd4585eababe5ed07540feb4ddc7b0a83215aa829af730dd76e2cdfaf79fc3a3069181619d241fddf189d73ce540959afdd6583249e07048c1d2b4c912662963dec18b0205797e18d2d43d06e8b5154be1fb01056bd6777d2cead3c1aa95b5f6486a29d28f03b7e15756a3f7dfad0afe6a957279e469d60b2b9b7b24163b3f0baddc6e9fa94880cfe795137045675a2beb67e1bccbf675d46270f69a56d71fd5d63a905d0dbd926b62629bc3c0c1217cf70f6fec515532782f90f13a4650a486cfdcc3962daf071ce26a004ec34e95a4797cd8a37fc9f46763a6ba8b6cba6c15870ef6751c29b11d8ca6197f99247eab185412d69e005c3a9684dfcc98b7df5b76bd5be05c7fdecadee0f506a1fefe2a6d9e46c85f4f1c1f1dec5ac5634c2bb8f5d7b9a1db15eab158f0968c96246f9a4e0e95accfcfd6a3d0058c71ac7bf0d8ed59852a184a903c6a92296d5a007e81fe67b022dd58ff82cc44a08e709b475220dda0cb964d43a73da992f8adfd9f59f887539a67dc8e85c2a2e9210428122239850b0a95da7c20ca7e85cac3f6ad841244dc948f643839beaaf49647d41128164c39157fa9eb6b6f5daa3fc48a4cfc02d8cd6ba45ba90b01bd0d977d87b7dcf436d5409513be6458012348cde009c7950e54cb7d276b9ead4c361d88a8496893342c92506993d26b507fa674980c7fa6cdf6316ab713ae6a60a374db8ca83792a8fd2864b6fe1b04142755cb972d5e61a29701039543e119129d526dd19d7fdb76391ad74e1e536769e6ea9e72be0e5cbeee4d5aa3a3c583801bbaedf4df2fda567b51a2e7111da7aedcef7dda692851bf3738999fddb0f77e1210fad82dae79214dd5ba11e8b5930df3de8fd34b9a85c9228b98432bf444640e251b40949875ac4846b184b7b21b8a68bd3ca7c96781d10c1d065619d885b73310a73da210b4693d3c1b9dac09bedf6dc11a747b7c5f0bdf501e42e1dcfe5907b4e32ad608d1478897024999ca521b215ce88c34185a61af48a3ff7d4c55af0363e614db915c47ad707a60cc44b5aa1f8829f119274b25f551d75db92759ea206f4eded7c52889682aa0904a5b5a06414ca0ba036bbc6b21aa381fe7dbb1c214edd60d736206ac46fb33b6a0082c1f67eb07a39575ab7c4b7eb136322b308b5c59cbbb2da649683202ca83f30eb175f608e19e76723b99e4b2b0b3b5de4c84ddcab661bcb74f840380d1c30c41c706050be579dab7cb2928c2a5f17e36ffdd431890f0a7bf8ac3fef12f2c87fbd9980b89ca4b4a6c51b56559bdece3b31eaf904b55dd30eab0197401db7e734d56fc94bf83f71b903352de9a509ae66f858dc45a42fd5051be65a60c5f07468e70462eb2f7d09d5cd42220f3a67394215877c8fff014d0d9a84ed808e4b79f4ee3623d9ece75b51d22c14f699e4ff836e4af599f074b7907651f256940a07a834a0cde97d4661db165374582f4cb8978b6b5e1c6162f65390cbb7bbb569480ecc07da287a94c42886b325a8c8c69c14931d7f8f6f38a68553cf65f5314d35d7d0f2eeca1547922934d871adc27369baa72a7d12eafe4a6b2c10fc809fa3862b119376dba97327ff3e8f49cdcfe36ef30a3d8c9dab9fbf3adfca761810da7caa7f30fa6737ccf3d946dccc6d873effd663dcfc3216c1fce21ea0494b9795245b090d002ee3fcb2886de1823babe5e5c5fe8b6756d387c81f8069c59785bef66dfe5b18d789379e9bcba58194299bb4d1d923bf5685bd426ffd1d5f8e949250aed6415eb51bfe2794888a58c2c1d8a5183bedc7ebb3ddfa6b4678a6aa1b7e0dd8879ffa3416461c2d322965eeebffdf5a1e7b05aea5e756c0007f851da0ae4b3e408c5b944a83eefaeb6b4859a4c5e70b1ae2448f98f3909fad90d4328517f6bf94da301ee969eed85a0abb679a960ba2f3329cec125bc4c72cd397abd75da6616eab4d185cafacb31eaf370932cdb1317bf7728aa59b67fa1a19b1a8c088be3d81129b5a8726641564657ed471b3440019d3dad158cd2588c90f3d7dbbf519701c99324bf3f109ae1d721e52336facb3aa13b77ecf84209f7eab46a299556bc6c8f31662593be251e0f137195db3c2a3db481738086f500953780d45a34f47cd9795bcc180d338fe1da4cc58b1ee400db07e6708404b869d49a1d0835b4de9dcb5a43d4062febccb8e60f5a3066fdeff3b7f12ef75d893b8a35a03645fb611c72f0e8a7371a989045acb277f72706bd3f936dc8764e68179eb2192327d1c1e2d5bd534d3a51ad2a3da2db8c795836a0c672b724afe6c75482b6c83af2d8b869500a728911ac8da7bef9e73a62bb3bbea692bb68049f5af2f29b0838201ce97229bfceca6fc007b9bf4ff9191d5e8e874f5a4fcdd7597113d52a2956353f9ea81734592b0d9e62fce2fbc31d1b62df2762f30fd3d7457ca64aa906a60be69ea5bc2da34a1d6eee0f6db87c35bac9b7c44d71bb2509c63be9980f88c8f3f609dd2681dc81a7586bfa7b6ab47592154a23a04203b5572066bd4d0c33ffa1884e5fd9c2fee0e131c2797fc66f5b3722562c733e9f56f464c96ef3ef43a8787f7ec95e76ee3c79668b6f2476bf8ee8b11fb112a41232875cba0946f810d62a0842d910bdcfa553080d49b6238d2521b9491a131dffc1ec0008fd8536cfaf3b1706715536cff679e9489a50a391f238d763e112e6f3b057e377258d1066e90c447185400424d45f9164311d67515a4b7f20179493482f2582abae9743def59111a99db352b244928c3c6364d87de7fbed79bcff72659333dc331bcb8266111d3fe40d13393fceabf28037ebc5e082f2e8ea1517d0c5c8354da2b6e80582b0a22dc08a937d0734dd27fcea04411ac198e228695e1724492934d845e060450bf6a20a5f8548feef54334c5a3387e390e397cfd925b4e7973863e456ba6d0630fb8f0c460b1bda5870e02c7df160b8b966a1d0fe63faefd3f86bfa307d0d318fe50919c8de1371ee22e8936ad592ccc2b4db3e7aad8fed95a15f7df9d79bbfd53335fdb178bcf702c4bf387f5122f581a0b8413be8fb1fcf0de793ff616132ea06d428b78edf7ae602a1c1bec461966c06fff868e9fa058640cfe73dda6d1f82119522fb55aae5e9ba45f85e4cc3a6077231ba0618ee9d732c8f003e5c7b5bfc2fa80cf2b4da90f1b2dd7ca876baac0dfa3b4726d2514141dc35483cba86dc7a817601e3f12b921630872ae35b9725b96a072b82b2fe1bfcac4ad60168b5b5cb0b62842001d070463372caf7fbfbf6cd94f32aa4b81baad19a80f49d09c5dd318067b3d0bfa51bd55fef3c4d8bedaa7d41cc4392fe103761c504510bbcc65717d6c63fcadac793b1aeb3c0b183b891fd4815c52e472996db3f8ea06e659792c828c64bc8e5d8d608f0b87fab45f503595034cb6c5a029268d9c269ab4596e3cae41d6fc41a3168022d0ed72ff7a2b90476230fff30f67db7d8563b97d514d02f1a6c13be23c3221a00b29621b3422d022c1f6e7c2691e7b5a0409de54fab699da4513435ccae310dc07dd263ded0d729479082015be486ed8ca26790399c8f667fe4b6148ebc92380f2b7e32a542bac0c575d35003819d0e85c4dde9d190555b39e5597e5774d8dd10aa3c3b8af7bd74b501090818274a38b4cbb1ac4343f18c4bd77f3a676eb4dbc44a62669081098dd94ad2e1741bd9b1f083baede42d1f541eacae8e55d438d0736f8a9210a924a14d27e645e8934d47df194ed59a76462197ae0ae19bf44b2097ac959b9ac5d207b1b7ce09b9b5b6c32669d45abea29ac2b2540c6f64d7d9ddead053bb1620acef0638cb01a2d7309572ad29289de9fcb468ae2b9ef30a2b4f23aacf8664a332f0a639aaffb238cfe0dac49d4acc2b2db16d542ce0c2457f1a075d8edc8f1696f4594c22423991f03b23d2a1d34173fc5299fede4ca118b0411b9ea6eaafa718f744b45516abf2a42c1a5dc6bce2c3430f132eec491eb834d663e8da6b809b2e44c478fb1736a3132ddbfa89d4fb3a68ce84a45272405160713fc521c96ea4290e86153a86b69617cde0228d10fdb4d08ce4a1a4f464dae9159725da4bbeb3a2a10ecb028f3063f6f4ad3a9790fbb5aae130f649ef0e468afcfc8b89457a607e4de50009698108d6eedced003e87c035a968ee47cc6aa2edf93b8417e9fe12e5154f7ca06f0daa0c9bf3ecd6fb79dcaac71d65bc932122123e2aae57815b0ac29d10f9f4dae16327308510ffb92233ff86294f0084d1a7589299e51b2765591262d3fea7b47943ac09159543e9e097987aa4658e64e2ff37c54dfd1859c49f6dff278a1fa65189e8ee1a7d0acc32e36c219810c76d03cb0f72fafdc937e3eb5a966ab1f0a5cd5cd5875432623ee8ce7b96833646d00b27056f022713795a72c338fd4ca175fcefa0a4b99d7342d20cb73dc58d44c6e9420fafbf602f73ffd653087d0d3241d5ad8664f7834630937322c093b6d6c314c82bf12059e7167ba77ecfd91277502fb74552e7e77a320af4a507c65aa51658f811b7f1b2594e328338b5ccac43ccc77db41b2bfaa043e63ee39fd87618148dae9f9744289e858c9c4a5643c4177425fe19bbdd5ffb8d3ca3225b8df7c2b92f5b5f42dd0aa6202b93045ccdb7c2e9774640c4ce741f8f65303587fd23db58a9b4d0e9c79a09d8dd6cede4efaf06e3c46380f1dbd72b441d4c1a9e6ef6bb9c695e8f948127a083ff672a878dc1cce930bdbc96552b437bce9ec7c555a20fe71df35e1b364c7af16e35f2b412a5da6df9fa65023465a40ac3853ee20a4a86deef7191fd000ddd5554a4d1ab4078137610dc29bb8344dad61932ea6066654ed94a7e3b6c87abfa426ff510721686356d02e6e80ec9dc7c1bf467e1c7247092cfc6c3e035e750f78f76680d358597be46502ef2d9770f75c04e57cf8fcf66e1cc3a653d772ca670b7c238c427ccf902a1c204c71431cc028180ffce65d3133d3740949f5bf590d1d1a5eaf34fd9b4725f83b1c8b4068b319e36896491f8b2419867520b9b4f10fd79dad3d9b68cba41c797666243107bdba699a4eee1a4db7a545d42d6955329ca89d32f48321fb22e0e621b5a1ca89d91b467787b5fe8d27d2f5043590fd0b207768cdd3163dc4a3d441d420c4507f7afb33f378ef025a6d3343e16037a6b6ebc66bce8a5363d1451c5cbd2560220ae054446218fe0814f3ede7836d012dda760754d11e799b96ab4810342e09134804ec7880b0096de1a85f86ae320241106b52a41cc2636ceae6d9de6685ca4e8ba2192e948c62b8cfa0f8f85cceb859d78ac4433de1ab5f594c99ada45b7cf6c17c76c013716cc8b73ef5169dd9ac4f2e5b0d7579f7da86f1a1011f169629935491b9cd643fbad4bb533d6bf64e0c455f3556915e635f89d3509ae3f1fff7384d5d52eef82a4c36885c708ab2b6b2a3abe6bc36fbbedf752ab74c8c67450506db954b1b3c1e75627a49e8c929d26792fb2e2ec7a58c9c04c736d158fc83b1f71eb25dbc6c914bf1c8011a9def244eed86b4001b0c08f410a3dc072f360911c5a02b97eb1a1b4e3a2f694d34acf5a5a9220afefc0c705920a8b0404e4c608cdd2c944b3e28cf9b4b2a524a0a1b5325a70e0acbbfe30d169070c71319d0a00ca31caf1bcb8dd4728d3970996c664dc8db1fa607c5d68448ea494b39e08cb67f0bde4b961495d9165a4dee357d9c51113e643b35a527275cfb7d3c5c01b76e845b02f63921ea5e85b0a401e8ca70d5425d6a856ddda36567a8c8aa127a13a03ba1886ca03ba38b2d75d84c7291495e0a7ad628bf613780fe27ccbc403dc64c0897375767079bd393b584c3c611a090227e0d62935f60d7adebc49300804c90abeaa4ebff4f8d58a170f6dc53cc8979eda8b81f2781db7899f602453574419df75ab692c366559a49979dbf530662a3abdeb0eec2d673a014d71627511b383fbb95b56cd3e82363f3e0d0969908be8c0de8efa274723432c2e278b5056d7992c6862b926992ac76cc5cee7492be7388a8efd1ffb04965f2c3c18dab91ae116d6713bf205536569b4a37d7da1a1011d85aa4a8ff817f580d471e8e3c094540477e168b7948eeac4df7bd25077dfa6c0cc607f0aebbff9f5a53afe32f1ca6a63d680d9e84667bd8f51c780aa590d46a36f8e60628b7334ec64935b1f80b7de027703af96c62b6f2dbf82608be70f62fb650476e08d18a4cd6ef3c63ff57c586027a49dffbf281046ca1b0eb525138ecbb581c1e41cea2f53511c1c7d10c328b9ddd6956182c32167884e7d9a2354b8890735fc1f854b8a74b7bbc9d478e3d1e2a93805cf20258949a9e61084aa23d6d20669592c2b0da2f82a9f58efc717d5ccf4bd0898a882d82bfb88c9871e2c423ff2727fde3324ecc882bd409074fb0065ba58476e8d558a61ea47ad2330b9ca3e015ed439021468f08921c2ace2211af96c17e73209db28b55911692e08791dac8a4fb91bd99a3ba02778702899f2a47811cb89df9f9dc97d30cf68ad3eadd44fe92eb478f8cfd81e95407dcc72dab2cbd36de0fe9786c32c85cd68abd81ac2a1e173746a950868b20bf2bed82382003249e0602ba5c18528d258776fcb6f3e04689e8a3ec70cc7ce1c1586c98ca172ee7ff78d13acd5cd9f80a86286f5fa01d869b606d593743cd5c7342496e97ff06b1add46263f8b2002bcc087da8bebf114bdbe7185ad34a8ab52f87e0a16a77a0d34c534ff3ffa454b81f997a0b7fe733ceaf8884d30d026bf726dcaadefcfe71a8a6d4d82bb950e00d388ca5f70567be7cf5ec0a5d1043fd35051223a98ef3ca67b10cafb4d99741f31d6015b3493a9f34315f2dd9d6e9a8b14f0eb7aeba5fab9215b295339c197f3118acc47e6affbfd9045ff40ce73c59b1a1512345c687b68845163c61878d497ca3c6efbc0308103ebd604f768d3c1a72c327934c758ab49426e4c1eb2b1e6c50a1fc7c859b9b9f22ef308a561a5aedadc1a08f3187054c309a6d0041bf3cdea2a9bb1b5fe8152f09ee12e6bf0061d96c28ed13eec4c8541e270f0727aa6048e4a801e9c37f3bce09e2809ff01aa4c26560e8db69bdaff61a923896cd68f744e0e39e27bd65fb64a6bf1fafedf659b2f9d82a3921a8eca6f0e777a56cefd5ede97d96b42a88737a151ee86e39b44240902b61e263af9c71cbc134939d5781adce7240b4a1bbb12cea3917c700bee42f7c54cb658d643dbac679a61f67979b841ebfb9a08ebb5ddc3d77540cd08de8a57df9c066567638d61f6a97bc7918420fa012ade3cbce8109f01fbb04d85f3f2a168096fbe26b0f7c02a54dd4d74d0d433d33d508197565ec98d555b9b1227423b500ea56e3f75fbcff5bee1fc963c7799244bdab36e8cd8a5ab1c6aed08265da4d26d79ba12f8ccf6ced1403a7c0e7a78bf655cdbbfc27b5b52e8bc3ea858d3d1ef59b896916bd029b964f838f68bc4c2d5d720535171347028c2fd58e4f167b4ad2feb8d8d3bdb90054779999a050db89537ba392968e98f9208c2ad485c2118a739b6897a76bee60f9089ee695a2e8a3ceeff4021c48de21a06e3cba17e0e80d859c66e3cf99942150f63ce316f27ccc298bdb0f40e1ee34648d9dee796c702600c422d6585aa8b1496714afdb5dc6e9208032a526864802c35862ba53da0e4980924c4f43a121b1bb9e2b4e694244a698e21174e79d6a5a4772c3aa598d76f087c92e4a7cb279055c7529a6bd8b0a4ecffd68fefc23c0e7602173caef1c7fbf4f549b103e3855e573220ef564e17a555efc31f3f950d0a41f1f880a9dacaa133c66ef687ecaed98f477b739d105e507af8de043bc06b1429a9ee53613fd0158d6742ba7fac4517fa9cc7428d4f4b22396e62bd841f517980479dfc8fd27f97c758f9233d071c8617eb0a8c61e5706491ea3870d9dcc06ea341bfc0eb664c7cf165a84d35864bd907c3e3f612dade7c45b4a5db105718dd0446844188680c720643798291a076fdf817891d71d3867fb868340e09759ae4db0652f6da5efa61260eacb01a312b7e88d4650b1aa2dce23f85f130614710215d303a978226373624246797c3290e08ab0df68514bd31e7b9cd5b3231c7cf19d3809abbfee217ec785cb0adace1cad57e926c87f1b72ad4977aa1bab7a5f670b197efd1c54fb3eefcf59f49e018eedeaf689bb560cd67cdc09a89bab3fdeb9352fb6c1a567d1b1da059a5554f94eb46a84fbb751078062d053d4fd7de5fe5e77bb395a24bf2161b541142331de05b643de7177ea658fa8712d206dcd3eba5be7ceff61647226adc55d8a072f749c4157db2aac652e1d929d6425c368ba9d86ad8728b3f010fa35d5eed18183ef15440b005362b7bee13e8b8b40cf6af846a65680a23fc234aee54b649ad5262dbd72a7d177bcbb783409e916bffce69fb6a61e8bd238ae5ddae968394525f21fcdea7ce34557f0de71c7acd2ddd3a4657750d326e974b3af8abf3e0760508cd2ef6bc517d1fcd2876f1b91138d104f34323702da173a33d21323a2149451d2c352891a9caa78f85853f3254d88f55170377b5fdd6384733bef2a4f44d3eaafaa561e62d84aa5ed73ac0686983d6193e7ec99476b714a6f92c5856b66331379c13aee4ec3b19a730655e3125355a89182b789e6c9c71f8e4766a9defcf821f86b1ec018d0ff768d48dd0b8bc82be5711684b2e9fa172d50a554d1420a6ccab83e27c0d4b05451d269e3d70f115204f06eb6d2e3cb51b775826fa338bf730adb5509c0ae7f5e670eb7e38bd96aaf7ace9fbeefbed780a4d3a2c1f4b6335a4e7c999681824a47716ea6ff9815fdbd8d331319a501404a8fdb2e87d601ed548609757f0af33f43155cd94cbc4059c3a9c48dc1cf58e058be667323224a418bd65b86009ea5664b543be92c5fbe95af316e4fe709d98c0571b6eb9640c1eeef614467c986997b01396fb2a7d545fccd3c62a445c61375ed25c63378f4fa3e0a0cee1b7cf23eaa07d58b347d9ab95fa0bc624f89d56a86cf25316f1ccfe6e058c1d3d49731d635f607be5eb50674de628e387535c91fe7aaaf17d3835e54755423f68667f3f7f40f87170efd4e2f63d4c549b22822255aef8e88b17cf4d6d31d4e60a989c22e9ad06e8f04878c96b888dce66f7a14c433d41c82fe943c412931c28038d312b62c1a23360c653568039ee6bebcbe59099d23c97cfcae89ccb241a09836099e9761074c177adb00473ea169f871bed4ece520378dca534ce6aed6f56931b436e0cc8ce1ab5cb036e3bbec1c60efc9e71219c9e9c57adbdfa635722474148ffd0bacffc5561d77f88c9bea77ee8692dd500f3ebc92a1a4091c29c7fd90a7487e67c0b4ff8c3aa5a8a08c21b015f9824a9b4c22e9daeda11d9483f8de5bb845ba01941203edc9f3e080e85736857dc040c2ae4afe588948ab01d813dac6cc296c08965017bcb906d9799c8bf4ad8cead3c6497837d3db95c4ba79716014dfd3d562ee316f7eec551dc29627575ceea25edbb7c3742f12ff244e75d41e9fe5661b3dfaad9e3e0e26258ac028c42862c5c6118d72966a2a587e265345898ec732c963d47141ef1be077703459eac4120566ee771c27d3f94b11dde3d95056b6844ac857d1bb644f14be283b57106a9345d95db1d83edf122cadebd7fdaeb9ddcf2809a0749014ac653a048562cb975595d7c1ddb0fec404c2919c1f4fcc4d78b7e1c6af11bd75da5875d245101e97ccc9b88c2e008b9b895cbbc0620105e70b25a500406fe716ab9e56aac3c09347419df1e9e357ef7c49676465b291fca6dcda58f6175257811337d855e31cf5d313010c3d418d2f4d35c53e5d009585bb836511577af8c5383053836205a0ae2f580a010181022dc725cee6d17bbaf1393bcee1059296be7aa8463df461e77c1e2dce816e3283df6e18d1e11238ad84c052223f231774ef493c02c4fd6c953b1744ea40d070b332ec993085c2f7f8e050a383f7e74a4d7136e061b6fd7743bbb8852278f93e85d20e326e7518a2362715f29168d15b7acc444e77ba435dda033a5eefcf865b732ba41e5d2374493dd73191a1441cbe8131e1eb40dbbf9d53016cbde405a3c8443a3919806b34041a0dede87f75fbcd6b16f8cd8a67a5d675215f50dde16be2fc6f8809e5d4ec7a9f3d4130f1314ab7bf21c283ddbb56ae0c4d7b7fba0f0cfa5319f44a324568c75ef0680b6b9765b1fc503fbe1191d3528dfe76bd902680b10e8e3f900a97494a4ae6adce5723364b0bc247709c180a93e53a5e74ddb7a1e7fc531e090ea26aaf9256195705d539a211acf5e0e4c5b63c12777d3ffdc3713fbdab6f589e454f533aff34087d9679ca5a887255286aeab761b32d41b2c0560bc531490025cddbccff3a675d237d25393d561350666825ce3f7c293ebad79cf57e54e069f63748cfefeb897196fcf5a1c57d258d1cae996ffadcd90438fc00c77b123f8ff838b6288543b9ba64bd0c74a4498fff87b9d7036e5df4de7294272c467baadb971c9fa04cc957055b69d4705b868718a81c9a944a9c1baea4ce4cb4b913b14fc0a859e38af725774293e323f334e32fa519384889b6c3a29176afe9fd5bf281fcaf23ceb451ec34e7ead1e4d6931156d647c05c1c10a5636611aa0dc06241069e178303ad3be0ec2798368071023cff6ec7d8b042c79d633db7235f8bcffe70824254784dbcfd6e8700bb87e0e454ebc5cd9a9f8d938eee25c3bf578eb6c60f3b65a96a2de8c2fd755f3f8690e12e0d9586857f4b3cdc16273633c1b81aa5931ff742ff393fdd4a87106c09f7dd3a596695aab57f4fe9b72759ca442fc2b4a75f5f1157fa0c274edba28865d89e6aabab866e8a7737b27ca4e9aa896676e24d84cfa704e70293080049d0dbc5f2b14bd3dee87ef328419efe774b06af3c8ce93b1a0a0195de187b752763000f3cb75b87551cd4bf896071c13caca0f61acdd7924288391588e38ab64ae7c66b0780305bb5a6cb5ccff36ef59923e093ce15f7b45bf9af0324ddc18a82123d2471693b30c570fae68c4590ec8792b7a679fdc41f10ea3d4b060c8caf183d47b32aaffb16ef7759c26b5ed04fc167287b100f55d78e089c39d30ebd314c1926c0cfcc1c02bb1fbfce22d7aa2f31386a59c348fdda3d8a9d1661d5a118fbd3871996fe0ce813e3041c31bf9e67c356d04f72804ab87ea2067a4a6ed52427e1ed516444bf21fc23f8551826550026d27a6db96579f41881b490e838a5b62b71f952fdc38d34055ce0892da1fb5d5710f70089f7dfc565f457284800391c0bf1b1e7b7667d430f3ecf5f893cc28346859c896f170c47cbf1f676d50289e87662c1f77805a43228951dcec76f43e4e9978e25b53d828c8902ce4afbbf31d715047efdc820330f3e4edb14b5bd8e18f72142b73d85c5e22d0fafad19ad46c620df020a28da420fa6fc2aa507777f920a752797b06dd0ee3f8eb1524a1dc3edf69ae3d4ff075db9f3b00035e745253f80772d50a812509b58b7f4e97236db946982399d6afa4b68b82b3fc3053cd3421a2bd41f1abace69581dbd44f01bad66f299be09149b133223a114b4bee7477f3d81d592a8e53cfd052bf6e194d8282cad170d2bd4e4ebd350a9d91035dcb6185588630f6268fec7154b4175af4c541c7091c2f5871a71c407a5cd13218fce74a806c0f21dc3add05f10f5c75dfe062bf93c9eb9244c972ca3dda8e02bf8f4d8e9701cc47e8dd2b646d3703335aafd0fb0507f8a113127c3dab112f5ef9cacecf0f3924aac25c004897655691f1303e4ff22a24ee701c0a4f6272b1d62c98550d8d420a45c54f0b8d16a991f390affee4ce677e1e44b3093908464f1273a302fc3ed25bd95f7f7351a68f6004d782c028e012081c54838790347629ebead5fce527f0343b5e90b7bae44d99bbb2be05a6a94cd6c2445750dff3a1ea84a966ef2f43c5f5a71b9da1d2800c169d5573adbb28e8ade40150f3b1e69dabe4aacc0a29cd7c8d240e2783d42243fe76baaf1e69929838e7a4f35fd0d518b82c463b95c990e8fe0596ae0ca6344f3aa126a9a198f2e060d580fdd2dc45796e00452e2103f4802f039dea6d0330a8b00ebf797043b631d3f7032060d6fb673493d46ca3f744109310a07ce438f5a8bd0a647827a9ffbe7f42952e0bfdffe3ba5b52d108592866a6f37f5c58f2c233a951e6152e893e39978dce8900f6810b8b8b3c17394b565305a4ce04e1b376018bf47e2e94e767e97dfdfb49fa8d873b6b8bac7e21da33297bf9ef06c2da1e253e1d2a278741a7fab31597b52a5e369fd7228ffc327617a7c1e34a1c62ca7d18c778051ec9ecf738895e966d229ac739a39b89297f2d73483f889a1762d11a7ee68579817b138c90df1fffa4e22f5129ac0dce276d855946e66f00f885e67672ff64dc85a34cb025dc0acde59ba3057a4e0e9410ab7ba54050d8cf8ac04b438013105fd0fc5347aebb41025715e80401cdba439d03c15b50d34273a913dfa47bb2c24baa6a0831f34a978060f12df8fafad1b1747bce89cb54d87227b44f2b4a3ce41670d8d1955310482b509217974f261c44186222e509db2614eb509184892cd6b4853415908e9789728d97308fa75c2e0c20b45524be09df5afb7da85df0055fe76b4a12af2b1ba0b851bbced5d1878bc38132b759edeac37203e258febba85f4320097241ed682177324cb9391ec51a0820d1664c5200b65bc25ca625d92bfe406a485bb5d7140fef8c822e8eedcba0215c880790aec010ab3aab203aa4d0d991f5a8659712953e2b795d51f90b5189ec04809e117fb2595be50e04d177e77949c2e3c57298ae6b811e087967f2ba358d5c24ab406797d4e8032648d1b67f9beeebd97d1523e7a5ea0bd8d4d00866261b8117e59b7c0b9245f23b6e76306b2216f89032e4c6ef65c375f4945ff8c8f8e37dc6ff2847b6a5771058afed211d782911c6e63b9047ef92e6ea1a00ddf02c3abc5a10689311f4b1e75c7b61ae9464a07430188b00fef1fd43e206e7337a291027d07fc55fea254f4869447d74018d5d8c5164e69ae4c47e38b8ca575701f9a34032547073f7e3f662e689e1fe9a1a90b730bd7bbb8d03b13f3899933e03e80b9be95f9d05b8d5570fa607389b4b01f3a63b0c474e84606241cee52c12c80dfec261c604d834255b9971380d34ae6c4eb901b1f27da344223f54679c1f1f770b608782e9d4175cac4fd709ee6cc1bb5fc5542605b6d6333767ec2b7c0c55b92470c39aece696c5b6ca5a48ecd573d7b826433df8e965c034b60a6b6a6b6340479fe9cfb6058d4df5119a578f923d0bc9cd3acdf7bf4ce52b3c56ab5605b7699205b4bcd1c0d58446f16cb64bee7818d60dbf211066506f98a9b8b621829141b5a96ca2f05c7eac7b047618a0b3995dedb006ed85fa681ffc7b119589794403307dac56edb50c15e3c90fb48b5756332be83e66cae14bbfe4ccb17489222b0b4871c15ab4513a5254531b2fcaafabd871e27400c9789b5e7dc4ef7debf483dc9b8cea06d5eb8c0b2856e4b65eaf9b53ef6eda3df36c60666c14c507943b6834f3caa35fb04c0d3318bcbb4b93c36ee106d2b90fca1515b1ecd661a258bedac0bbf8150a472872f29dc6092f8a6c078af1a71c2c07a5fd6ce98133a4a9b73f58a56af9f3d2b9011c79e9667d7b06cb04fc471e7db2cd2baca089ba2d4840fae6c7620dd86675b1a6246a38384a3ae352b0c7c153b872d86ccf83c38660d716424d52ec46a15d2e1ec5ca60b030d0a503c9444b7a692b4d1d022d50c1e9e8d3621a6e5ad08a3b5aa08909b7beb0b78cbdf6e6d0d583898ddb714c566560d65708edba896b065f50873da034d9a0dba0255f7735a9a5adb885ecbcdd47ed673528453f6641a99adfa245d2a6eb99fb5d27e36b3050107ffe9498c4e73de321602983fb1fb176a2f5b2b97562915d96a29751ebad75719ffc02bdf9ff15302f2da8a262efed79e02576c106b4f528b89170020f4d86704f01379d5c81938e409b9b6a387747578225cdfdb5f19a595efe14ca2a97f39334287b49628b98ffd07afcc32f3f39780ce968a6117bfd2601d7fdd855b4be188526cb5c524c4863a109360c3dc5090796fb8605e043ed2316d1c326d9ee72ac3a5e0b766f28a9a5e14f5ed7d7f643303c9852bfd85fc93eede47954910f84f5e57abcead3a105a185b7cca609447d237c16cfeb5e06de920cff3529d04204aa1b032e15b2d1ffa3d3e3b4cec604e6c7844d40244b13d7f564e1b18495bdcbb7ed87184954544bb5aa7af33ede7596872912094e79429f541525ea27bae9632d352543037aba4f60ba6336bf6d4772476b116c9df6df87e7e16edcd8a75274d271e4129212f21e0eec048a18ebc486d54448d43e9f0b2ef123d5fc35ca9b06ca9165868266cde1b1ea370ddcc55c814b72da3b59dba1ee3ac93a780cafa314f5b5369e50365e43c7bb24fede114f1b4a52cf3a245b4ea9e54e334f5a2757edd9abc91e19038b3d2fba40714fd32136520ce32b8b94aa7b5166a9997b1816dbcd39738d298a8acc9937c4de320b10d83dddfe5627be9920672d3e8ca15d729f0298a975d27ad0553c2c2c7507791ae83265028e6997e45c0cb0af6da6d50273b8732ba4528f1594969e505d33e45a95a4808bcdcb08424dce818693d0f0c17857827162a542a1f5ab84a86ae1984d9d5a81e253813fbd59f68538c0483dfaafb55838482cb413b9dfa064b05f36ad0ba99f6a961051a5459dd06bb3d69ef6701b7a7e5178354f9d96b8f5a28353452c4c618bc557c89694e32e682c3165a0fd05856d24d7912256280e0a163421a463e04ac95baadac413e1c3185c9eb030fcd779daad1cc1c</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">请输入密码</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    
    <categories>
      
      <category>数据中台</category>
      
    </categories>
    
    
    <tags>
      
      <tag>数据中台</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>数据中台-12_数据的台子搭完了，但你还得想好戏该怎么唱</title>
    <link href="/posts/2022/05/4d9316ad.html"/>
    <url>/posts/2022/05/4d9316ad.html</url>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="ad6aeabd58305cb6615a8c0f3e7edbadf216b2986755cbc47dc3af04a777e4c4">4e4fc70cc91fd42566446082a751780fd5618d041572b8bed7c41bda7a5fe16038be3debec314ec22c9c04546002995545fb1672ec1a69e4f1a798f5ac2a93e6e123f4cda751da777cdda94bfb2e03aa454cd518e72c6eac691f7ea0e3c00cb9314b38df30a9bd4e8eb99c11cdf240d2ec96ffc39c596713633ba0bce7004737f996c772ead5f519153c537380e50d8e4a2b5398663c617f8182448745bf497ee3d8e084482d49ce6e3a6bac7af75e400ed47f95f6e8af62dcfe4ac1ee0875782ca390dea8e58126d539b2dd99ac0df73e37b19436a8ed57e9759ae836dc5bc2f52a159d90849f6b7e0d3fb3a8f994b4fdfbbcf97f1ea4c42819e3d53a0b35fc15990ce589fe365f693d0fdbbdab9ce7ba8de37f8480d2c167dfe7ecb011020d5d1d8be972c9f436e660ddfd10686c36a750a8c55c9c224f3ea9bd826e867d1c032b31450a244500cd870a3d6680fc6275d9482ecdfde81dcc020baaaf4fe0ad5ac26bd2291991da921628ab3ee3142957cf0918df67c7363433ceadb35792f0458da50e441fb540c9a70149d4f805f6deff96cb9a4176266b6a9323162966797f915c5201697fff034415fbf26f4490cdd8f537bc450bc15e789dd0672c81368025e0feaae4f53ed154d3859052a653a6a571608e83eda07929c0ef37d007a09e42201b766389d23054fbe434fab94ba9563aacb3b3d672fbd01822eb2f33624ede084baa5a80dfb09a78b5aea3b500161f8ea65b860218ddea9b162f9905498c1bda492aac2dcdc57a0d2a3235da3cb00166b8f8b3908655e0fa48a972c6510f0097614cacfd532f468a83f319acd30f1c8bda44ce90e9059edca017eaca363efbf2ea254af5719c6d004478da8538412e2394149cef4163484cd128d16470b480f953d7f644276df918766f8a9a3b2b3f28e6aa271b0269f06191e0e46644e4d2870e02d0bb7c4ec5c6d66bf933e973646613a20e1fe5b1859ba8f92ae20347c65b54c15bc693f3bfad57531af79856f0eb32e6f2b2fa0bf424454b76ab7d532a3d175e5cabd309f5cd36d5f5c9a64e17cbf5c00676eb14fe9a6514f4fed7ca9b3abf046ab50fee47fb2f5893531ebfa46379d159f9065b9cb5cc04ad5b5650697e4ec5fdf5a51a505a9bc292aa7a35f3bd61c43d8acfb5849c8a408d3465972df4605b8984be6709f8aa5abf5e3e15b242b86affdb8b037020b85a8823a9983200c333ba85c20d903ff286b892604d6d90b80e496573eb13d4dfd4e1694a242511e61ac7f3d6e5c11ed77901ebff0ad2526e22ae2f5287784891b2e79d26f6a873706daed7d4fc30994c65ffc9128d61b48b11a245d7e2f8cdc2673ab51c95ecfbcc981671839bdb8e8d3245c1ff03077282fe551feef358f8fda01fbc0db5579764dba8e746a93039bc203a26839cab3d73e55021798371ea7e9892aade25e7475214861ad0d76be9217541ce556d18e95fdaf5ba16cac146fd2956faaa4ad0a26b9310e97247012cd4aa6271f3c133b2c208fc93c96cd2eb9e1febc9f4f1a63e0f558a2a5812c3fe05aa6cedcb2fbb87d332bed9af61b7a90f0f302608499b98af3703872fbe6570eac96a1c74d37dc21f03bc305f6c80338d89e31193836660de0e15c56a10a9960b779d94c9d527659d5ab00fba6c568169ca91b4139af133b669b7f1a4aa53ad6a05807905a03410bde9fcb3ca37302cb871143ee048b7f131c700d99249a2c332b99493eb31a23f460e69b540124b2faf2ad52e17e296a7b8bf8ddd18bc00e55945cdca006940d0484b05a466afb7bda261e21752f6052c79f71d0b465702d0fbf3b3683754e2b6128e97db8810d55109337f168ca65bfe5256021554864a24871a57f1033820e7c4b8976ad16265b68a9e46b6e7479388339ce07ca7aabcc7b7abb2edb00e862e43b0afc82580ba5ad7b88a1336a1d531f32be5cd6d23284890ec9f91d51af898217bce12816635df43c47a7648abc9c266253e178299767ca9896b9514d93ee4b4a633439f135772c581aff8a988bf0007155a6a1e1f64ded587cef47024c20a50ccece43835fedb5a25359ebaacc3df140e2f92f4416c1374f3e700543ac3ee43d1057488a580dd238383b15eaaba4358aaa330e8f68cfe3a34741b7aca4ae8c99cea07af322234f40d7ae1f323a30f4d1599241694160da45ac4d52475f3ac5f6c30b6fe5086bbe380f8343ba7ae1687772366840f6f175cad9443987c1c2a383fb44b3250c42d2c6221cba7f7944a4c12974f61f490a71095468ca97ade5c36327851587fe0b9d0e270c695cc1a2a1e4e0b39c204ef9323903f955d37039093b82abc9eeead7746b84f8a1f9159218fb30d3131fae0064af545b8e92951db2bb02ac4732f309f8e23a64e079926ef88838c29bc60a995f7293480ed0be5764b615bd70f7941ab860a15abf1c313fae8ae56d470c6a80b7249cfacc0e7522d9dfa5a0b26577e35d78f04c31c14e9a6633cf932853e387e10fba9b9f869f3dfd6932f8a187593feb0b12d5cab6f5238d099a02fc311b54a2e2dbe7d7c7319eb9489f64e78f040b031ebe998586575b65020ca7b9eca4f0dba63b0b4b2b860e5a51dbac4c4bb693e55363c04b312148b30b321e5033648c8c04e7969e74fef8afeb0d3f9ed6daf77886620c47c136bacd1051a06631647542a7fdf670a23f776c2c1ebf89e3fb3c94557be6f467087d186ced5036c9a90a4fb57dbdabf162c9d90221cb45886a0cd1db6bd530555048c5a2ffa18fcce493c2c830a83c4b69403c7a9a457496ed4493e0acf5fa2ee2a080bdd54d4f899396eeae4a74bbc3e44c448520e72f68a604ffdfd7076e5180eafb398b28b445c04e0771573d277562727ceec85de96048c64b605be5f3764303914a4718d78f3251fc28f55b8c239ae72f4ca01fbe5e77a00056f87ec89c3ebace9cf0281aa7cdea62d3817acc1a655482439726c1014a357d5e3d8e8e6465199e3f71ea74e1d9eef355099c797f30d1567629c1c1271dee2f816073d4b8c2736bb761337d36a131877565493ddb09e62aae4855061a22d0d9e54a409be035a64958a8a324482b0aec13940a1e221f11d12026d72a6afddb16c954e21e2e7e8ad70cb16238b1b38ed395f1af4f4ed8bac0e11e2a130072317ac1a3018db5dda81c2dde8e930cd56ba54a8c85d7234a4b7e5a3f8a4e2e5e22660de337267de7038ab39ca800a3926eba744734311f542cc8b76c27eaaed1aff7f9ee71d8acc333c8b9516a660394ac3fad484b87d5f009bc8a0f39cb7b77f5d471f3a7362ff76f415c723ca3b7605512f686ed3d6c78d8dbee4d4b0000e445983fddfa06402915efc61333dbd306174c6da141fc914517b1d5a93d999ae4fb831332de8c31e9fe55d01b385d10a87ed0d215da7d957e46502871747c4c63b58da1116d674c6566b97c68b3747a7d1e0808ec73bccf5b820284f452907456493a39069270dd58113459584d7ef45c5f8464b2f1a5fa281e473b1465e3bf65d34312491e7866614299979f33591fb804539de9097c9251d3d692d6eab6e37b038647121233e01120fa04929ff0985e4201a3dfb7cc77dd0127197cba726a3c561d4bf54171cf7015baf9a9dd296a47696d244da40d72613c0d9cbb0e089a3b3b8d62323aa4b594c38efa92cca50614ebb0c939ef819e6e54525fdbf6e069d19223ebf6bde17d9579a914a58b0e1b425b13c2b117037e0943af00c26c4fcf39f3b8bd899e42307ad95170b58fc3c6ff6e4cbd0991b6c84a17233de60963a568e9c4c6c22460cdc3a2556b88ce8921d1471cec8183f170476adb20a72ac83f77845690637d54c31dc28ece4441ea2e0a80d4d2ab0d6bdab4d26644dca2b35cccba99970f7a93abe6696a0b667e4b70bb12e0f4e37e6bd4f6177570999214d1a08e4028633939daf1d258a89b1ae6c3d8731906c5b8e0e0b7ab9b0af167dd0c1f75888538d4af71b00ecf20052666449b8aa325ccabf5bf0dabcd8e3fc935942600ef32cc121bd40406b43450b0f0b2ba87e77f698064e0f4934489277be1013fcb892c79747a87afe5884c235bcc058250d920a60416b93f851b887c210013895627afa80a1b8918d0ea428f4ae926eb17c9368e9b50447cb71f1361b8a6d7a6f1cd42d89b95ef586f25d550b25e2639b373bff3ff2ead01ca82702a45eca110d30e13e654211f95f5159bbcb67dfdd64ffd325f884e1528a8482c1bdcf6437faac3daee3692d5548fe73c6e6173ac76d5765431304d28937d2f03519cc5d8422f99afdf9adc971207e6682cb3972e66dfa6af0bfbb8e805f873890f06d5474b5708a2d41cc8d609858a81fce4ca3918a26f74a6235af311d3b45f407eb749f9dc1a0487372b7d6693f83e9eebda3dbff024f5ea45a653bff4d87c066edf25db6faec054c16f8d554ed243bd9b714eac012658b327f4a3bfdf10759542c699bfc6296a5fc87484c664f1df4f22eba688e836d45248a0ac3c61927a36d8ec7807776326a9a6e25db223624b2caa944214aef7a3f5a224a71f095e09dfb25d0952b7641ef1d8a7f1609868b1caf804659b7c658f53fc91830b12d48d8e97bbfc84ab5492f44b92214f8aea54756af8a90c6a1c24b5c190ded4c5d6ba142d22f93d9655f0ff210d29abf66e8a68a9efd25bcdb1f66934aace5a9157b0785427c4b51a984316c811c055f3e5653f654985a1ffaad1b073424376ce825d55978deb1f9bc23c7f7ab7be7f100ca27940d41c456f1422613337dad173aec75968c9b8235c74d7b3eeef9219ac12927fc5ffe890d44aad908f514910e524d703b74081b265b0698f770869481dd53af53a95cb240e0194ee0107dc82ed18c748d0b86b8d3b438537170722a2bf9d1256fa1045fdb3de8833a33f4c300e221e3338356ecf38988cf8d9013d5ac55fc53ad4354d80e7d99907d60f0fbdcb953a95053f3f0aa9c52f49adb7b7fcd382f78dec8c02274bfb03f7a0634a2b2a5945c5dab8ad4a8044cea5cdce5c108ce522dc9f7fe4f0cf3902b9ae296acbc9be7f57d38d530651747b005cb76560633a2413d3d76b4024b25ec17136ff41d9cea948d9a2f086ccfd41d483bb6d7112804de40e43dbcbc8dd9bfec981284b7515952f2e11e25dfbdf759d43937ae1e54104243885f3a5e5064df72a09bf488aa8195da2a13aa37b66506177d72d8eb5f039028b09b15ea55c809e015c52d6ba72592fc359372f8309da86be4f6b47c329d9839afbcfbdcd54460bf2fd0b1483b1b232d502d010211fa4a7d96af8cdc940852a1d934a686bd022712f0ecb4a5fd85e63cb72986b8bdca4f14dc3c96dc8c544c5bac1e9ee0cdfce9d552843dabd4678db3b54ac4c1c209070a7e526007c6f7591b3220ff9d4695f56f2e680f85c1350af9f553bac97be3206de7f349a489312813e8b27015494c389b30f44389fb2f85437ceed9af35d67322706a7508794c3b3d38853eca62526273333f126b11f6fd5e58a540bb8d9f08c63fe70e69f92ffc0da723801af96c1b71909c986d60a2e1fbfd9037adc8fd02dab87109c2acda34c355d66e45cfb12930269a660ff015f6ea102e292c28a76cddc1b14e701a04e95bc65d41d7dcc8ff7a097e1689264de3ee4eb7e13bbc7d362e742cf472356f73c4d5fb85287ff194b304802fc5f88943f5cc8fe9f1e1d5c324d5940caab83bd22e94c02eaecef0c054dc86e4223853be21d124d5e5d61bee561cce5c83bd5b948cd47b157dc0e626f4cd71cc2d1a793e40e5eae2cbccec7cb5bc01767c5017d7f4cffb2942c1fde1a023d6a02bd7380c7b2a68ad46b01ec0c2a163bf265a14fe432492e3e09d53d6f4d26e69326b38d2848f0bad88680f10de38fcf12e25f0f24fdf8d82dd72a30cf091bb0ce696b27a75bd90cfd618e480c9f07a91b17da1d3192d7a728c687fd5e3ac10f67b6d8d95ccf5480b3b65679f889a01316700a911fc08015c6636db22618746eac553224027466e3e981ef8af384ae25677b9658979a5be6b0b482ffdd47999890186cbb87c1e67d0bae9d47a5c450e81764cd1d0c7fcf3a9009b53ba8ef17dc99c2c28f566394cc5cf18a4ff61230ce00a9d0764baf21cdc12faa56662fd976af276488b704f5d3929e7adceda7b566dd1fd1f26d64a72ce51f072b56c4926ebb90f851aa3971c9f3df70ed1cc1c36841585f95c2b3f70d2fcfc2a5533bae84f8367623dff7b8066a57e4a6710e24ed4486b52e4655c2f9f658282c1afa440fe8092a9560148f77b215f5058a0de9a80c6bb6a5f6bc8423726bf57667eca1e1d1be6bb620a9d5ba94d2f4946e91e9af898aee1b81e1a83e2c3e7611e0041ee3af977a05f8ae37df200c231e6f7261ae737663c60d34725786f9d81fac8f91a43936907f9a5c0b6de0e8f3d67744ac134703b426ef1ddffe4e87ffd4e23e2e977ff0fcb73cdcbe3e93f40ac47d3b4d36258267faae86b8f6bb79758e8f394291ad9df46c6c12e701ebc4593cb8469cead805b207a94186aeea87a287beea809ed792bd48108e67a7a9204bf33d172c09c18c4e618e54894fc8aa3b90c8ed010d7abf777e61ba4b4e51da0b92341ecd62ceaa25ec4600bbcb2acca3dc9f79c6934fbb18a7d7e584143170836cbff3ecc6f96951bff4ec9ed23e95c43e825f1b2267f26da5c4be4573911174671d3eb40b5989f9b63ec1591c40a1d51389c4896da348a7ed5f213f59874b85966baa6bdf9e30410f24590b49a5f0ee9d24012d409887604a6f5d1e300183de6bb21c8c56f4445462a45d492364f4625123abb225ed35ccb60128a66366d63234f1b92785988482a190caf8ced567da986694589e9bd30f5531a3d4353ec9311883b14106cd9030c7977564ecdabac3166289c458ae9e9963b8a00d8f0404788a66d23d73580cb9867e708087a3d55a36e9e4a0b0cb1d2d8441a47715b287080e72fec66509b375088fe281d66c70ac0516d5108b8875523ef6ea7a6fc08cca7211469d554aacba34bf26d53a5136f01902cbed10cd7e90d13afb291bf70cc11bbbf9af23535c309c181828f0e6d8274accac3af62bd244f3077ae312f9849e8776906dd45a7668a71d2d48b3742747ee5a6d61898c666c83061bad32687a090b768727b9b6c0995d9178bf2e3763a4ad743443ccc9d63ecd2a500fb614eb84011de34c4505d085f984dc6d1219aaba219033e2329691b5653294ec99e35bf086b2fbe27fe61c3b28121d62349fb424350b36f67f068de1674783d669dbfbc5e20f778c2d688deceb1cb9022a71a78ed6c2d790b45637da647369a3d44d9e9b45392b1d286d91e507bd6f8dd1ebc9fd51671fd7da2ae1dc77b7162f5fcf385b9460b03897b6c2a74e8df63f65702a9d5fd5fb9e8e10fa5d5b1cdcb749b8e6df223eb7fa14b91ef72a93a0b2db55d8fb84e693a295cf6e44fa4125d6bc2bb752d80ad86b701d863c929069929ae0086c33610de13ccf21b24954264403f8450d6512d6596ae9dcc8ad966fa4db9deba7892071621494aae9027621980768d45050ae6481e8e30594fc89a074b42f95b357bc0807a2061c6e8e9b08275bf934cbc6c1a8bf154e15541206bcb4a19e8fe0863bebb7d58f71e4d5fbdc7898a02f3a390748c32df67096ced0a7904a2366499e1469a5ab8b4bdf555ce188b732a1f4caea5f0d0224b3e74ac53ee915fa261684d613719580bf1d959cd436dff967c34e51f13d447a52c9823f8e1c2d8645a50143b37d8a7a5b6f10bf081803f2b9466d11365cb0c651c8af7ea39ceb99f81d0ba0a86587bf3ad342c21477dd926bc3d51ae0c801f82270d0d358432f88b1c10c705ed2b294f2c45138285ad37d6a5be183b29b81cd118e712f412b91010cca0967162e5d99aa4ef24e4314432a4ff72cd1d4f3694c4a3170a11b18b2cc39bee535d382e66b6e8fce01aba724a0213219ed8e27ce20a619429f48f893a5ef3b67912a57b2ca74c825aa6f8ec88850ed8c9ebdd55980e264a39404471065d8918b8300360e5cc30cf79a3b515f4f5aa700e93baeff8ee23c5ec668e4f1374572110f45e3ea0b02de48409b64040ab37b1b89401899e6437f170044f4b35da896b7d60a3d3e77388fb6236012d16f79ef858684ff7e1795bb6e4055f4ef4995bf800cec21f75b7847d17383e4b50c94abc86a6c80b5bac11e820287c6d6d856d127fa5f87df9aed63e6a96ab27eaa2327554923f2ec4e209f44f6680946e271726719216242fe632417a9950358f305994240829ff4f96b8ed4cddea00b16c3442f6ed9161d10b773208c15e36b3b4025e27989439f70330060097dac75fc0cb964a8ab84345a318aedc72fa19c8cfb8be9daf3a01045d22455ef894151c24dbe9a7f66a6b48538a199cdbedd71ecb4855ddfcd2a69953aa769263b25a2afb1c4fd12be68bf24fc61a3a45d2219e6c146894854a0ebd948cf42e33df910c512848309268918c2291db7f3a28d6b06bebc033077ef86edf6ae8df5fe914e2a22dea647a0395579722109efbc89db61e98c1043d915e55c3f49156d3dedb619a59b5cd9e4295fcfcdcd49308b4f8b6188ee4f8cfc8d8245eed33fbf89f69844e9758e80f2588b0467a9c11f43791bcc30544946e7ef2d3bd10f8318e8413174b4aac4a41b164aee52ae4be0efb122e14fe21cfc06b64d3e6b094f3e8e6fd4dd5b881b8b0ef8c5ad8121e72b9bb2f5ec0ab356a145fcef279f02d04b0a251bb146cf591d34a7759eef589e20934b9ad32e201d02f102fe724b6fcefb50c2256f767e77bf4768f67fe5409c956e5e683228457d50a3b7c0e39bda591bfb0b6a1c6c2101b910c30dc8a91cdc9a70dbd0534dca71389859f1b346f6427bb30d6435994a577b3a722947a9455f8fc30d754de66239947effa9eb533cf55ce6333307b7c6c249b9fe6d88ffeaad1e2212d5a98bc43e2fc6d1cd12f51a004347cbba49673628afba26d43975079d49328865b68a80649fb7e8552b3314cdff77e76b70d06dfa23db28804a0d9d5c9084c70d82daf7d264a853ce85d93d79075f24bc3de4948e034b11e085be9b2783ba8bb463399c3f89ad76496fc9d422b358811828254f7ef0659ecaf4949b8ebefc23641be86b2c336bd38a199ee3ad35ce2d175971d007b3d0a47d75ff1f80a7009c3f0ae4181c7dd61b4865a1283ef590adac54c77855c0ebfcaddac0674dd10381815008b8747012c9fd0238e3eacc5d08dc26ec352055e89fd476fc865fa82be3e644656d3d14573aede3d81c31433f631bf9f27a15206a951a580d98dee4233c5f53a0112ac8dc9d40b4655ebfc49a988a44b4f7c39e8e92b2a9d1ffecf899d76adbdfb2b31b77a3d5590cf12a87c544ea87d7a367e82639a50ed263825f545f8d9b5d19af44c1f2f68b5b821df23aaa4401e1b52b7b25af1747822c79dda32ee933f37f99cd5d8ce1bdf5b61ee83d868d35e5d4e207065a223cc314ee9b07f91f1f4b8c41011e434d2490ddc20dd76dff47ff04e95807450031b06de2109475d5b13d4597f5f8cdfcfbe5b0095fbfe21765806dfd86d67b62aa0e3f6e9f2a571e7c7e43751dab06ac89875eceddcdbe740679d2b74964a1438326d8268ebf36e0c0e4ebbcd0ba88604a28e51dadaccd60c7d8f3d37781f462150497a879fe49068dd26c57f4fa3261b6575b0b16195942d42071bab90d77718455eb70d8be35c6d177cd07f2119584c1ea2785947e6070d38be76ac9cda0a12d559b3a45216506bd8ee819bdbf10672a0f93e451d7a35df1dbe16b655c9a41a4e05d4604db9f213d4a27b550e7e6b2948cab16d8c1aa13718ffa8b946b4b8062ce4487dd1a33b9b55ea4f5c60d9660f3d524bac519ecab2cfb2a104684bd2151341b9813aa84ee86db9ddf5fd6e9b5a511af2eeed0a72a2aa61c6aedd3ebb49487ca1ecc5b572ac146ddd47b419203d299891d641bb5e1db99b933fd24ef7ff6b1242eb9fad6d05e9d1c692cf83f3e6553669c26cef73ff19ad18d483fc817580919267c38654ae2601a7234d5754f843c9cba9d243fb78591c6d43c7d1ccbb73ffa0628839798e95979e43b3f94339ea5ba9809315285d1f52497f97c8e935bb548ce4b219fee584a64bbe3014342e4ef59a988b016c7e447c2a3bceca668d7ee9cae686b69a7fe6a5f3ea563a16384addddc8ded42ada9e0da715ded3146e056d2dabd364b3d334e646842f756178b37c36f8b6133598ef815fe4867fce02c1301da4469b5221bbbef24e0422f29f29acdab2441eb86d73ea185794c32aa0ed68f0d1d8d7482d4491452d72342cfac6ace464d0eb45421d8032c2d778f7ca6a8021f405866b4a4ae42b6731774ec14b0f41039c9e159d705846b0a33901c4613303d3481e8a2b02529c866394b188e29b84b81a7684a7311267ea47da5bac5e0ccd8d975f2e56a168bfe901490679f55753abf05097355ccfb9c967ab431db72d91df94b1ab65d0296079551ac975d6d6356012233c54a1479f3ee6d9babba4b055b0bf58cf803da47ec3144994f493f7fb78114ad7e6ac65507ab7c8d8669a962d406475a4f74d142b2e77eb8732a914bd208a593b89cb52a00097106bbbebcccf31824a7993bd6186243271eb12ccce0f25d320c39313afb3ebd7935bde22ae93ac872ebd4c7a0518aa1fcdc718b209f4e9a227c1a31691c4aa78b9bd5b6f2765e2c4082d21f1088350d9a31078658bc1cdea937834e44291964dc013aa0163507510c536af7bc551be3a3032a607429066ac298e757b5f9c0b70c774a2da55c93890f39c1852c8d328cc521db19ed6bcbb921c94cacff133e11c9b14f337460b444f3b8c6efcb7b2cd9c32f0a59fa626ebd6c475e13df0521e9dac13c52b662129d453072daba586a9e1efea899ba28e730d52c375491b17fc8f2af9670c4db25a0a18dba20031c853686a36919c3b1121fbb523f3b6a92c0d6bfa260025eb9a1d02d8006be44f0a7806c8945e918d5720eb75b24704ca1f4569071dec87eca4dbcda65005a19f03574a3e96355133e653c6bb18e8db436a0902146d65562f93b65a64420558b0a8dcebb89cf27f27ac2d511319110d81750e13b985aa37bc534f39f6fc556d5d994f07b2d27962470308b18351f9e4dd6b0afdef8fed96d940d0d3f53748fe50ebe0b7b1627d35eb84ab1191ba872abbc29267429177b97482a0c3af37dc781bfad9da6479a16ede26ceaba80dfb526a13576f184e7e215b98d3fc0f9258b710e97d6a7c666e3a6cfccce272de95345a1212faf9bac5e139a348d8a8e4fa1185ad48e34a0824e3b1e55405ca1b88e8ad3c59e35fcc696055f4e4df08bde87d0d05631bf56ca88507d8a5e8983e788d00df6e39807994d474a6c6ee5a84da08239ed23343b07586435cd988e85dac162a4c2a82cd1bbf827a710a1be6c3b4f0575a122288e2c23f40c533c753e32ed3a5bb219da1e22961cb3ae1a92ab981d6b95377e2cde3d8a2a4b44f8f7ce90e4f5d523be97e359899d2fbd7e1d1e8b896e0284af1b954fb91b0727f7a78fe72664048845b03a231e672b01b3d530f72e41ce37fda22dd8149ff553705fe0eef82b40c5268ff1b21f2dec92af7d273779deb76b346a183cbbc7591074e6ae871437806973f84e5fde6a4120a6550f96e1a6a41576585e8a630ecb48d1d9e979be2613969d4fdef214139d52146fd36557301ac6d032f4be2e1981fdd4bfbe9e2a67f020aab008db821069f7627741984b34d145fadf62f6f15ba1f2503b8e41faf90d14e2a7fa41f5d6b65f52ad6067a4d7e62b5df00c0d4d8468a41b94b75cab704e926d042a6f2876c34123c04a9e1ad29ecd6d026abb5dad1d5d7428e8c02a262ee3af30213537209964c982e6e15010bac1048a4507979334eeff4074ab1b8727db7e99c67bd7d961f3aaf5ce34e5d424157d7b87006f0de4d09bd740c0bb17278ef4cb6efc19b018d060eaececd9f5233dca8e193a3c05b483146b8c2929564b3e32c7ef17e88aa33c0f548f82600ca4cfc899fd10251ef56e8f33a4034b6e46750a62b08d334f2619c9f2bd0572e0445701197c93498a81b3437546a8317b1a8f7ea40b87b5b59309b703f65c579e0aa7d6bff45f5c7ca9421d7b2dd568a97cac74bf467c59d096e65faac5ad3b4e80c40d8105feca850264418b0fdb39f5c655e2d7580dbf4a204560bbcce7d7a6cba6497aaceeb73a6656f9f28a07f2798a499927e42e4cdbe11e04c04f846d560aac6bd0045291089551f04fbb56f7d6812dcba55436dd6dd0c1436767610762c7b4f3247f2ab1929d3caf2c66132cf0722ada91e8cab09333d1f33820e0505dbcdb42d4999e1934e6b66e09b9dc8b406b1653f7ace49a8a63c5e862bebd32e8c8e5e05e169a07ef88bccb73adddae143e542d1a7f30977b857b6b80321a772dc121ef73e8d746f939029a183da17cbb8c42542cabd8448dd0a6a68cb106ed69d3d215ed5efe10716dcbfefce045132accdbad34cab645124ac2bb23ea1880c86825943dd756c523d8e64bf819caac7998ef3d0ae9dee58e4e36fa174d6d28ae62b63d115c3c3396cd28456f7a8cbc76591625043413b1074465cd57a41b7cc77745c9a845949dbc873e1821ceb4e560481c7b5a28d84d961518da57431139d92e98953d865275df51efc6e38f178f38bef1718600cd0ae4f6d1f9c0049c7b44164e5d67af52f23a8b634f0cdd5ffaf305fa4d3701bae52d030f8ea4f7fdb51bf695b49cc855004f2f5952d6f7c19b4962b73afa6db7a9cb57b2a4c4cf5d1448b74aba1a70c47efbff609e65829137d81306505afca2ca2fdd2ad861bcb85a429f63ad9e2a8c607f083435829d2d790b5ee1353d350a907566d585e7b783a3780bebd63383e84a5eb43844eecf563ea38b07605fa3d03a4b3f846366f58a0221b63a5abca6eb2c15f08bbe92f21383801bfa6e904c3f6146d7b31e8f20fe4fa6f224942fc82a87c1e3ffea10fdb180b62282189873eab02cc54ec900f67a06732d60e703bd59e8bc717381f9d69aa828efdeb42e8f9d99157fa9c4fd892be66131b6395bdae3a46ebea0946e69b36a6f540daf9daac08993a2389f30c8045486b2382c836ceb317565a38ba3363b6b153cc4ac9297db055bb8a3b30dfbe55755903be8b76b6017aafa9e7569515c4322bd94a0d11bc5b33ba0772957f3223ac6e57586a963818c5bb3f92f6d1fd8edb9dac24c8d2a499a5791ab955a76740ace2c2d943e05ba4ef4670e4982d5231c9eaf799c8b64f23aaaa57eb4f56250f735b11344559a80f1972f94ed3dfde41ef57971ba380a58b12a2e7e319f62d0ef0e00dfe79a19679a6160118c55cc8cf2cd7a0cac46ae145893b845e7e96b225a3ac3af57fc3c420eb2ef0b382dfb6195e91c14b4dc6034647063b3d60f988de9a7a57bcda3ef4c49a56b38ca0fd87b0ddd6d62b8207fe419b7518ccc657f7014d07674e4cc177b1b4def8acb961d487cc73dcfff982e8b75472ed3a5bfd505e0b4b9dbea95b77846c044c03559528da6396fd227d5c4ff537499854c5548174b4f3c6d02d9978cf08b45d45296bff1bec2dcc93a54892a7be34695bae5467c51b1eeef1af0def7ca4ba26984b453f3e25bef48d0f2c4a8b2939c02270c4ed1fcba4a6481e92e40c01e10befd77bcfea364022a2a9dd359370451ec58e70d9549d6c9859f3a7c655a0dae8e5e9c7c5c61c738be2e7ff4d0d0d4f3a0349b82089863a14eff74f674a02e0cf7914ec0a2a847861f032f87c0e3296222cae5d619fa3bbf7597f0bdaa387ffb84e90cbd41383958d02ddc5d401e041ccc06fd3638cc9265efb9d39a512d5d0146c0a6abd62330237bc4c750de000fc6b2377628916eb5ba2c433f768bfa0dc7f563442b3effb1968657efb791bf943926ca3322f93fb810afd1b436f6f9391d4d658d6824003c1ecfb47b20c61f30da9f48b9ed4fb0cbe7424c483971223967468b6c19d977cf02d7c6032a8fa356eb60c9bef3822c197a2dfa6e4c1bce7d8049f691fb9ea95d42bbcda403f42559905968e1f157bebdcd5a0b270d4129982f8b43df4465c080033b472326bbc27de5c1f657462897ed6535590d644d4a11b83902637b0a68620b6b6bfc7a1b2a286ebc1dfd58194c39ec257ade278c2fff34b880fc511b61d0497e554ff09c528509bbca092fe3071ea5ef8ec2c1f3061b9f93ff9fe92ef04f07cfe716413ee28501e8b519deb81904611e52b4060a6a1e003b6cee9a62bf4e26d61c3c899eee4bbec7dbfccc6bcb0d4c9aeb98df6409e066b90b3a0ad8e4bc893b7571ff7f3dbf9cbccab7b02a1b28ca45680893028868f5cdc127f24143f726ce41b16bd27200b6e1fed7ce3bf8127b6cb4e3b9290f23478b2215d58f34c90e72a88cb29a0fc8dd3655abd6c0a9f7badfdd19aed3b5921b2165f6796b24cb12a144669712e396071fce4163a14397165f79c05052ed3e5f1c3680ab2769b81a4e73cced302f358018202bbb3f956a21a0b47a6ca7c664a6ae43483446aa10374a41ca3a63012293dbfa99d3a94d1249b14ab083378a77d59ded17ef1b53afffbddf0c17b0546e148b175378dcc536e52e2e7938037119e2a827d3a416752702b941528a936aef6a458d24b3b2b8eaff304d9fca3141b801bc47896aae2584ea07b5a0cf544e06afb49754f55dc3070ca793ae81e44b3bea7869bd5e78d3557980123a0296a552becfe319152c784961450b0053e09fe7be8b5838f62dfc2edae0bdd9fa67a6339e076174e68653f0ae11d7d14c565b9d734fbec4c63cfbf099856ff3d04bf2f9a2a25234236d248e9e75f90b7c12771c1c2d0b6e075bca8a36d72f7876608f8a162861f10c571272e26f2f8bc747946f579d3a99cb4b96e2f86cff1709a6420073c2dc2ef9d376a27b12190f2cd1b73e00aad5f49cfaddb39ea7f5ba522d0508f97189bb22838e8c6d489e5bd489e26d9bbbcf200d19a7388c0e876602f4c01449fd8e00005c80eb5d3d1260519231cd72f0241fde9a10bcc651bd4a7c37bd43f9384f68e74daa412da348edb1b57bc8264bc7730209069e99253abe2cd8df1a5293d96720e08d515676e244ef0e4a691738d9a40490533b340eba0fb2e0c701e1bd533fe65d6711f1dbec6fb764dac1b3ab60a30a6736cf60ce2aa040bdbe688680adcb402acbbe9e73269fe167c4b7a51fcff912e88bbf179cbb8495ac65b1bc84afe3050debfc59c2ae4d400c584e11264326ad72949d2d4453e53a344769bd30d86503629a97485f8cae20c380d7dc166065e8edfe78a7da5b60f741bf4d6b08b888aa761b40e220019969bce29b6bb2ad5d3d02d2f382ac8b42b6267ee1f785b99389ce58103074b92ff42af54291310d26ad943ab324a6f2a4ee1de9841d417a8c0388a7b413c58507e20fae53b987852e158c06c7f9d2588ac19bafa7096ee3ba0543c1d30eb93a9cc1077ff0253184386e08ab5a6f364545246726dbc5f34331a77cb2f4f212edda18a580c6abbc87eac51f026a0106587bc40c1815e0dc66c951215723965f7cefaae07276deed415b34dd8840873397042112d829183cc58e7bb3fa3360426656b98f369f27e561f4d673ea12685277c04574e62ce5657ef205da991fabb5b836024da1041efaa99f9b13465813a0fd769d88c48495841740e335ddce08e568e98b0fd6b172040e6317166ba28c8425c6856be068d54cfd38b38f72db17a3c18b1d4282fc490d8d6b6fb3b051727de608f09a5426500cbd3ef6c7c313b150ebf7e09f027a1ce75883434ac3d44272e9a915e3158f44d1260d15277b15e729fc397f4021a5deac4f7851e0dc3cce0e25df6d84b8dee19c11dc208641a5b8fc08a88421ffa9e00be70889ce1c8d01cdeb01d0c060240230ae82d6164bd246d8e1864c0211681a95538b70c85957391589ae5b0772803aada8ff17708627381535cdd044180804a91cc5ab0e7b9af20905b1968e6b75e5194dc35f349ac8a877323633b8bed6a316bba173f19585f1127183cd0b4f9a15941dc9433e68a0f5909293bc69e1e5a6dc7b9ea73f11ba57ab33f28f899ec77bee30e060db0f5c40de72a7d5453bd5319892ffadd276e35a8cc6500f360f0009c7aeb99120add24ca6ba66443acc5797c72e18b8d1dd36149ff7486e3e31e34bbfef256ef882c0f72b2004ae384db810a7c321608e974f30d104ce83246d6452e38d9867cde3af4e899b6d69cd66083f6850e583f789304f6e0e4d7ff0c6e8cc2a443dee3198ef1d15056b8853920c4f6c8affb65936d5b4f2eda69096ae80ba667f4c51492a8dbe2f09c1cfcccdf23524db056ee37d0d062e187557095005150b587dba7998bab17fc84a1811be5ff5d7075d755e004f5c58e20024f82ca1a006f73d3e445aaf7401414974ae0844a492faddf62cfe7ced3a7ce5dc77b01bd678b7b719074a6e9af303f9488c198fc29d6b0f59bb0228c96f6151fcb9af3b8756040d90fa3aeb8d48c2cb2f8ce8de9e045aa5c254154cba8e8f5133bf9f5cee15f42cf768622f4f426e708b7ed3f8d0ff5b26989342e2481a1ef8321df4bf6b65ff976a511b2269343f065d86e4da67a98488a0c958ab09b1bb368d09d95a2fe7a217dbe141683d1580fda2da6bbfa314092cd894f78870e09187ab10eaa687150d724f196ea1e5cdeb2b7d01aa6180fcfc700fec054bea0205b4631e1cb61e3b6915f697581095b30f1dc7236b06e7c0a5e884a4ff92d48316190069a3f0540239eb8ccae0e273da866cef1865743c2871bd009a7f08d9182dbee837f2dee8be45e79ff0bb6f66f424c8047ed44f7eff45543a6fad65a507d07a142d6575713c91372f9f8a4cd3fa6d454bf29603a64ac0d0e876c854a4c489263f8ab333f4e45f6ff1b1b26ca526f248a71fa2f9b919bdd423650a0489e9035dfd7d2392ebb63575c48e8312de48cbf6965ab5e1f486a53196fc9f9cc5c5459986cc8bf85aace4792e10cd33490d9b2268c1ef243a7709077685d14d9d50d1a0f822f632ad9e04f29b37e775916c054d7c4844b2822666823a34aec9539d35394c86605f49ebcb3f4e83a91b73bece85af4e7730a20d6bfc54a749180b621f552e6e421d51c7923910fc1d3f9a13ee08d8ec129930c6496c29bd4ae2dca707e3ed21bb6da3c10f85d8f0d21b99cfea4dd169e43baa802da9b509a08d0bae396078117444989278735fc9b073c758c4a7be1b65a67020e58f56fc35530a133193ca1534b1bcf465ced432bc15999100031330b71b54d11cc7e86bf5325b59d307e4288e236c66f953a38369d1a4e9286f84da44f3959005f3a369a344b57bf27ff821cdfb4bc36172e0dfc88f87ae9e2072f8d603ae0a59b2e69468b2d2ebf96e398fb915dfe608144d2ec2e97c23345d3dfbd1cd1d3a8bc8f41e6ab6bbb3ecb5025bcb61b0c0d59aa0f8817026780e056d017f8ffd38e47ceeafa2a6d44e63509135e739b747a838b62b1e3f7ab0a4ac4dea60249ae2ddecfae5bb8e045565265b831835bb745ca3db7589590d979d7fdd8653a518767c32d3ca7efd914db66fab7b6b0907021e5bde9a6e5f0d00880bc7f2ccaff5425c59c6d3395cf8a5cf0d56d3328b35a9921db5253c310155c6138a9b5ae64c4045ce518d084708cd7015d4066f074e72f6b14ecd5dcf6746432c9e8cfe66d0d5c9748253c59e7b95fb4650e61e84523162ff5c345d2b841e63a68d09758aba80f1d0f5cb654468ca93d0c99de67908d724511b0c4ce1294ac3b30edf5dcda88ee23fa86a75defe9c0dbb12af69e5f0d4247268bca555ab3b462df201e027dda12fb9f0bb63509fe929b4f5c78d66e8ac5d5d42a42916e838eca7672999ce8036e8666248702fe0d6a269197ad1acc280473fb189996d32fa410d405afe913a617fa8519426ead40ea3f5af08a101545c0f7b98fe3bc3c0b5c911769594f8ce916afbb3df6d12654c6235b5f2c223f58d2ac33cfda2f11f6f6ae3766c6cf7189a87e3397219f6866c0930e86fad6e0b6c17ceb996323b1b90afc12ee022ab8db0ac7d91e137513c4bfc76f6cab2ee71ba32d303628463d0381d814fd6b8b7712aea3516b987c3f5d9cb51e71e121439f40335f80b9fb40f5907787c5bb0790c49475961029bef4b3fc913daaa7898bc9ea016d6771a3f0214cbc79ffaf0946e1142c04b1b5d909248df353ae7d93ca37311358d7bd7fad0bb004c64cc2ef71f0ef46f5ac7ebe8b6567764ae8da6ce62461504716bf41c74cb250dd5f4ee279de6d0db814c114d5e2117d44b2f99e13a284525cb07523da3d29b033fcbf5d40dadfb951c3beb6acdabeec1fbc8471bbfad2009c1931996f690c2a9c3d3da913a93d5c9c1f70982a6d29df915bbfd6ebbd60739ea81c67663809320c7c2ba2bd4077e33ee64a82aff320f95151f4e571a9421de99b9320c272b5ed79e4494d3d254b5d221838ba7c3e3f126b181510d05f3714b8b7af05967aa8732073650c3ae58ad9390fee5032f575beec61af85f3cf54c0548ebcc4401ba98077d9deafd36edd741f9e5b8bcef0c44b3e64e8c3d3cf5fecf79c3d194801cc08d934bed9d14c636383fd6222bdf8849c3feb1eeaee0b646df2a8145993fa7be14606e5273674dfa8d06aa563c81064bc5ace325720832908463aeed1a0dea2d9512b9302805e179d4a03b58e7afff6aa1353eeb7851f9e955d2c6971c96930570764c4ceeecb7448cf6e42bb41ad1d56ec190fa138012fbe494350cebcb8e4fda800a78df1c1164b86accdddddfc2acd861510ed0a8b79eefcc120e4a3e73fac14b9c282372617887f4ccf83af962d6645978a3e08162df5e444f16fd777dd8fcfc5e21e70a2d78a2f0d0abd155fde6e91ca0ab1ee4e47b19fe07ab6ac276509a2703cb36e2fa5669eecffa78c8594548c100741d48935c14d1ca5144a35d47b3bb034aa1c493b03d0f27cb99c6f478a460349f74951de9352df9e0117868f3a572e9a219e5eecc7ba80195f67c1852447fa335a44a638ba53fae99ecfaefb7fb27870d4596c0e90f93c4f6016e43ac141537b61f3305f901082821aca8e5018e1f199675aec3c42a2f4599caf74eed3d5ce8fe4b76f824afa4f8d954827e892cc87b04745142b180f74f543ba2955120bdb3853d390d34ce313b226e3ceaf7cf2b4d4f5410db1365053478bb696f6f561bf4b2f65b3a4fb763d1f1111a024b310ddbee698aa1b755cf21c28b3f6abac80398747c9ea6fd5bb361030b9f98ed72e3c08f2f8cc690a3cad0781cada29e1cd7f9df184811cea2915cd6d2fbf1db3e262ecf7efce6c07024ec0b7e9f2e1f1d334b1e10a2491007010966dcfbcae77becc6651b6fdfcb3ce3de9427ed234ac24d730f79460339e571c40517a517987f33942039ac334d8c51f32f89c2cdbf3b9aa7f3328ec1b80696cedd77952d4bf696e2404982327a338d491ad4bc199a831605d1ea41839482dcc47904b4dac8520905ee1761a8afb750a8ae58fffa0a7d09997e2e0de5c77f03e2ebac493c271c4f31d2136434445844652b2e40f3347b58d5b832098787c8e2e5ce2233088ff3f692347ebcdda0ff64ad960c5863121b41705a371c067e5f64dd5f02b2705520895bfaa5ea66c027af94b772024360a047587cbd7b8c1496e11f9ffcc2f1cd9b54c323a9ad5e0287f9f82c8034a2659c03dbb4485e1c2d1eafc256a605e9bfe49fdd16af8230c06f7bca49eec4cd75f980afaa795e94d52c11e1ab4ba606ea87c30880066f7a02c58b16e6f5dffa6073f083d26f436143657e611abbdc8be9a21e3f6fcc44edd30b9ffa8caf36d9c5f698b1922e85da1b9631c01d3cc989535ccbe045c66101038156e57a1e368ef5e1c7a801600966104be5bb9e9bbd0ecc13e6516f8db640387d56070ff765ec54f193c395b0b74f692e7c796117c1ee7e6d73d7e862a27e8327e052f6e3d39e8b958a8a20baf8a8a16ed0096a23b39db5798cbc35548d4f7ecacd5c44575376d391ec481b913081313c7578b1ad655b30eec6603e5a6139f8f349d3b1bde365b8e51dd61033c61af7dc804bd3e4effcbdb6c0e98b6b3ac88169e7cf9d01343d302bc3604fed33171c015bff14178940e3724b8125031518dc57d9d988ff7c0258ef5f9c957aea71bcb4379815b4c871b2552a0dcc5fc71a6aa0d2848b845e841c78d9fb8dec4b7bb7683f2026f463bab7922d34c9b9f0d64d8bba7d77fb5d6435e42f3bf08ce22dd89a274497b984ba131a4d6bdec3a3aa0d2efc003a6bc3d28a8d35158340ab9a0a5e69230f295d3b46a81e0feb1d7c8358cd9293c472fd2fbd0f3d3b2569090432a9265652f8f0eee504bb055daea20ac3a6b153f111aee576d5f27904d8beceb9877da3364e905fba2155542a721e201802bd401ef00a0a64255f005dccc4acffa91be54ce725e03201df3e1fa71a14155c0468b323ee24ef65edb615fb060e4c12b26d93242a6a9e01847fe21643b9eac745b2793b7e204f50cb4af53fb3dbf6030af29c83402bf947732f460e35532862e9df09551b795536831ff6bde18c7e761ce110c3d56e25f73d42e0416e5bb8d2f4f7afcb78b226738c20e711cee23c10d7f217f4db4daf2073cb5c6d6b3ed5c3b7fb28afe9ab6b58e1d52b8274585151ef67a1c344f5509b65b7b70c79b17fbdc58df7da5e9b9b7db7cef8b61a6440a54c50e34458654c7d67fe06312943984f2a957f4db3bdcb52338593867df8dba49dbe23eee75dd93322fdacc46a5667dea28aae1ba02a304e4a3855e9d0a1a1e6d7565b1ac31712f8a9eddd641233bf27f9f7f3710addee6cc1024a79841aa61ef83a78ae8772af450fa67e1d7eaae68c68375560bb7585b615b9f92ab70fd342a78bf74213c42206bfe717bdabca4b1bc622e039a81dbaf2092717680c7a2845d3b3be938b95fcc879eb75a6223264b49667549fa4e3ba147bf859e8cfe1663fec75d05c6f7c8aef2a247021cf376634296e3cdf721f811f9a195585c5b14e6823daba6ef59db6e9f87ee36b6be7aca1c8785c8b2b29522aef267df00e64f188a6d82cd52a00402aef25e2b38e89fcad4cfd1efe97e10a57b31a855fe375918311a91d4fd35f342293a481f670eb3ef923b346724a033218475006ef507713d90f7becd1ad0b60a9fb3a3dcbda98f9de370a1b9ad6f9aae1b0250b0855b83f336c8cb10fbc271df1d2e72f0b26d0b6fe0d815e8e80a56af18163a135b5e157387913edf06f952c6cb12869080bc5e219f2ed04015f26c23946a32e7fc15ee3e950745cbe59bc0e038e1cc5e4ecc42e25c4e6bae90918d316ccea7079a049dd0234fd06b8dc7e3ac5227828f9c0cad57d543e3e942b1c2eac23c0a8a063a9e9872ae836ea8de7b704e8cfb50e39ab74e6bf443fdec4a6bdd3f45672329841f9d3f2144a5aa695a8504e122f941c675950999688638d4b772d0f40c67b7f0c0a4bf7ea0fb84f2a0c8e2738c0a0c8d26fc8a8cb491e4d87d8f10b30a2d0443f3b203c8359f54925bd3c2e72315be728c32488a9e72667ec3b0825ff0ddd260abfd745037c504825c8e141044190b3a43fb47e177fd00afa0d472d1400a759be6b20432fcdada5914cc70f61f33cac2e914145f0a26967b4dad80aab5a8192f1c4da92899506f5f2fd286e4fe1b5b68bea10db230740da7e9d42cd03b67d1849890e665c63262c39958e9937b3e1e220318738d19d1c7e6dcc3ae8b34cc43506a66ba75df92d45c694d2d85b8119fa60079ae5ef41fcbd460ff6235f21c0c1403f2961569caa5fab822a553ab067564fb0832f23cbaa4e51f432bda180b2e7fff7456b3f7bd5f3b0d82c34702f2d269792a64bbf435ce1c618a36455ccdba244f5a45d472b0804c656ee1099e26f46f26ffab18ea20cd1d317a91714516216efd2677e54c41bbebfd833f5c0251e5c05307fdd0e5140bf5f99d89774d85644eebaeef7d4f09fcb5204582cc326236c1f39c5ade5cef901d1e07d1b98921aee8fb7ab240eb4f05b59e8f081dd7fb3ea0c3c578d39a3c1b37ed65082e1849d2665fb59fa4c30e029f02bba8c3ab58f0dd74ed347ec63c662924b645979dcc8429fc354205d1cd87650ce02c27c7eb8bf5e982acb6df703f7f5494870d053651717147f6544b51454fcecd4cac231bebdcc849236912a5bda753f5db879554182d3ebadb9140734f15618fca4ee79a658cc14bb9ef69040b6e606ca19bf8462949e108759dc774d5afc9b482126ac6173d654859de83a987244bd1c93ed0f8a7c793a6026c6aa123b218cd5bee8a3a746b065e76b22d6a82aba1e302fe9eeb8231278cc222948682071982d2ab2c380b0a5e3995f23d7e24b92e26b056665ec3c3769bb2d36670fc4fbd0d55ca6cd7c2524acbd0da4d71ea608e9dc86e98670c40b0c5998e404f2ae05c9eb76809d06f3a069dc09b74554076f551d8d27f5f3d3e0110cae059a0fc07b50a7e0580df893b61874349faed3672f8d83eb7e978861cba0aaf348633ea6ee5a3bd39ae54c24c22e6e1f89c5693830133b55c7ce2adb17ba076f6a7055fffa6719be3bac01c635592071a77dbdc77977f6b3411bfad308ba060ee0aea8ff26904a8c6264c1d948d72029c5e9305a824c40b2fc187716c9e14342d9c3dd4ab593cffcf535e2ad9d8add954bb87a0e1a1cfc54e55d13a1c91203d49af31702babec712e212644791ef75a629d534d5e33e0d499f6f99ff6329796120a63d09fcbd82dfff326887e8b1585c70e00a24851f3583a0acaa295683908471497d375965919cc5f86127514e4f4449dc088b25e21b9086764a182759c956379aab67608d969111e4a8ae16b2955e197d2e66e9e2accebabe9587fb122611a6c172f4c15557e5e9beb0a92125a71c7cc6c991471d2b474c1db61b7d92768342c2f2e0696f2e440afc10276eeefad3af63b708a584685497e6498255ff2abad001486f46f6e59be065de3aa100dbcb50e0e33e1afc8d9c66053e7adee7e3a3a346fe4b041a80091459977e8a4c7c4502ef0e50abc2b37036567b388945eb3a8d70beee8488ee7cb6ee19957ca15ab0fbb19d31b3def501c4740474fd44228838cbcd9ef9a4dce7a2db341f5b2c15f5a74d554f1c1d7dc110a43b96e0706959a381f8828d2d5b601f96d9dcfc16bc14bee93bda3ac36a98054d2c3c24097840096c2f0e40c434a260935a666fa4c1a6ef74f67dd75adfde93c1cb35284a878080ad0444d99223a815cd26d401ebaa0eb15fdc71c95d537cd101940395ae83fed2a27fc0f73cdca46be035d3331ed1a9819caba5a06a7b589309c88ba00c44b91c543e00125670f4aea509f09ba76960bf76fd3509c3b7bcd03ab5452f53b46d9f1d8b93281738cb40bb7265f8b5930cbf42ee89330354aaa72ca4b91a2402e859660491eaa153310680ed8916c2094a0de9ea3820813679759fa9df28ab12af59197401837918e03bd43e658103a5e017786446a89e9e9bcb8b11bce0c1d90d54805cb739192f76b8976f400e76fa575c8da92bb6e22c3e1614f7025b299a4106b1dea9ab1a32dc3b8151a1d4164d75975753be557de5a4e514bd2647fcf1d6c72fd8edefb522c2fc29e98e0b476aa7c60c6cd9f2929bb441cf011aa2a78489611aa15c27c3444c10b61336d89d6cc32aee7cf1b6e97936d181e1b676ec5797d6fc9807ed9ea657f2019070ef086d01c1ddae66e6f5ad8e18af3b266846264473b14b5a4297fd0cf1bf4fdf2a6377be42d5aeda955c72f43d89ae81182ce5627187060d9d432c54cd019bf23d24c5293f824d49d8431df98ce365a14f054b18982f10e0885928394f3bece526c724fa7c43663652adadcbe297716f2574549e9c4d6c3d039bfefb73ce491b13700507d2db2b6e32de8de28aae608a3b99a6fb53008bbd93d3af61ed32fe9a6723d7a523e5cea7aaa95a72313accf7424303f62f4e5c0e39fa35f1d757d49405a7d33cf534d933ed477705dfccfcbcc65f86290ba7960f508873e7e668f27e028973040e121767856a5446359cd08e2cdf005f9392eeb78ce485a785e265e7537fedf9a192fb4dbaae1397c6de3f12ef885d3e84f454451e366e6de15969f975c37e7c15215358b5d2f855c131ae1932212f51624c6c8e199fc3f70ea1b48bb776dfebbca31a72313420a9a3d12671927945ebd79d7eb2cb0ca45bd75f0f15ef4d37c63a4da432dbcbec8520b520fcd48c852d4d6699146c0859f8d5a245eb0e46d15024ee8aea67f3d531c5a7d6bb886d314e6d0ddd99b98f0de9b80721739520a3146485405b89c6300dc3348322e3e8bee39cc911271844892ba49a1fbbaf846f31faeb0912aa1b9ced0918d360adc58fe4cca05de0db07506e09e8a8883ea11d2db44ae812869751e93646f206171fcfb441fc4dc19ec33ab79e1035bd2e1d732eff3f0d04f81c4d7dfce0f6b7d4c594333db295a0af927f62d0ba5d0b5d8484fe0b2e37e55d7a6b93daeeefce710afb62eac601f991b4b8da2d9445e2573db6e08a035ce0db77e66ac1c302f65a0dc192955e5c490e06c6841c41dacb221de569a05c9556632861de3dfc669bfeb72ab56bd6c79d4a762ba0b3ce441ac780e7808c42b1322c75c17e8e4f90556d69ccec9f7b2a90ad7fbf8da2238b9208b7777d20c55a7fe1fcd758aabb84161b8949093ddbd3aa9969cd18aa0c83462166a651ee4fbd5fd806d85a21bc52739cf5f964c250f0c7230c24c96c69b59a9907fb6375fe93b35834d0cae4fe135ded7e3d9b45905529d57ede8474e75212f9b627ce844dbce2b815e0c83d862a6ef9c864a002a22b7102476670bfe13cec02d27fcb84af74fbbb7889dee37da04bb7bb6a14c4c4089ae27383aeff790673c7d04191f7dc05366968796018775fb80a630a5994b44e8c88d4e9f37d0f22c9eba5f993cbeadcab3de045d2136fa428ebdd704c1d49d1d759bceb1f71c6e621398479f2c83f17bab5ce10597c5e54c181990c09dae6d0fd688cc86d03832d734fdf4b6ae916f7e73383d6d55752bdc32e0d848188f3cdc473aa37cc80a2a9a5e5bdb94e68c5edbaa0a7c589814b629880165753dd2bd643ade3dc566b73f9bd36639d723684f251938a917c365b7a28f527de4f5ded09f7ea2e739be1b9e676fcdd68ff70d92d84678fe435795a40423ef977c7aa5e4cb728baf64737ab8f6e9a5b71c4ca8eafd5c666d4020d9bdbed900b7a87144590d4b7cb6750928fd0a93e4d47fab26f35b3f44b1e7d5c6a9ad56a9978543be32d7759a169eb695db451b22455617e0b46ec8a7e65f04b0c3302607a3631a3661db7545e0e7f44381bb15d057666809c74ca6cae46deff13a766c89b495b834dfe597acb5853d6e92ee63fb2c78d7c075b7266b8e9b5b882216a9831787bacf4da51cdb9a5551a152aa418dbd494b65be2609ad34ef8754588bb32b7366e0a305134dc816d1e9a29e2e32ac856f07909fe17e8f7dd97d43041001eb08b9ed5f3d599b691840ed6f23f46672070429af06decca8b39ded96f10ad35137717ec935bff7463af89e92a66c05b05e1b778a228434f2c8e9b347f203a81f518cfe177a92733c5109b12462be1c5aa5df1dd2d61dfa4a5cfc70aad291512ed740532764e6dfb87b02e6c9856da80543c03089d9e6d3a9d96d345393c2a31ed5f283ad5857aeaedf8b37b7cfdf7fce65b525dfab0aa4ebb76ce6002c2b0a0a664a47741c2b8aeabedd6261123188e7700c0a61161ea8ed7fae6d202941677639c104db267494c7e98f8ebf5ec85092bd0b61e85514b4fa54509c48b2e4f0811081c13477845472d5857de530f7e457a765ad845f6fadb76896a5236c5211b40e48f7804608fcaec8775402772054750a046b112619c0fa4cabe72a700bdf1092dbe2019063e7a6d2a05b1e6756076c41f914767dcb15d3367b6ec55c619d0bba2d1d7fb21cf7290a2aeb8e70b608472a912e3cd02e1d981a001a606d3bf0fa282af8ee9f7b2bac3cf225d1348d99783ad101896a1bf6b794fdb6bf2c800cd0bea885b06133ec1903e539e9d59ec87d2065fe0d03af89801810e289840a4a62de07bb7bae3f2009530331a506d04ef6e7f60ee6491330c76b6c2fbaf27f534dad8377f77488d8aa5c663ef0cd5fe5a5eab245397d063db31d07f4e2874da6ef341346ef302f24bacf83fb07648ebbeb3dd8a1f74a9c60951f6cfb9dee31ad97d6ff31ca8024f11e5e06d3298da3537d5031fedab35c74115938f21b6bd1c989d022e981f7b8f87884f78e0360fd811c8aa28d10065d18c089c99291a4319983344c4f7879d35ce1f70e60cd9b161b66eb88ed744aab2e5ae48759288bec5ca779be20020b7e8ce8fdfa0abb83ad16cf976695d796e1ea01c75eb5cd73114ca5e222ad4c0a17f0d14d8196817009b9fbc1cd6fbe19bae0a8be95bbfbe64b79685505233537f376b9511dc2d62f62b1d5734e01fe8fd711d568c8e42a22c17b9918fee3221ebd1581b4326210bda14381d84b1af0f8004df7faffc35a3c8ff3c593154bc3ac085f150dae35a923dc830f36c8425c76d86234d74571d4d3365a7cf609a9a54a4db431b8a30c207c854dfc3542797c414c097fc15cf81a433704b57ba951bd11f99a2f1107a53a17f61bfa10e23638d506a2d8344f7a6e8d13f86d9daedde0ca9e2cc2e1215dea2c720e96eb5e258f4a75b751cdced18257c93ed47a42372794eeab1db0ad1c9cf0ad33aeb08967ee10ac7a84e6ce4fc2d258a0cda0f6201458fcf11869e719df6cb1b3082e82fdca71277dc7f28bf27acba422a42cbc0afc871386008c8e7721650a2380cccd8404ea54fb2100561334843d4ec9d97149e9a5fa555356fc13b83e234ed5f77056fc6ea1131ac32f904cdb5cdd453c42cec2a918dd295cf65c490c712d9b60356b0b7da803b8b0116e5dc6602f73684be4e75475fc4a3a9cc95ce71366bd787baadb1746fb4d7cef5c44633df992a2ff85d51b899dd4c4a4700aaec4675e24c7c828a13057e880c10c0a75fcb042f31b15bdaf00ea33394c0708a5f1854c13527069d321fdf7807d000b4db313fa8c5ec4779c626a6988850912abcd63f59d9a8bc102d0a7bdb3066a37f7631ed0fa753dc92e046368ea442c24c58dcad672b40e5d3408c16c5ce4ea4202f18a58a166bf6fac8c4be1a4dcc52b11280625ac076e097a3210554fb00486a717f500b61a2dac852a6eed493e441ea0c93240c26b508dd96188fa93b02e400f1774cdb0087c333a85d46088d62dbd946846718dbaed7e3cd8cb39c296d9ca1cb08cb949bbbc41d58acdc4004ddf5ca1ab901a20b6b79e0a27eabfbdcb6ecd1a8fef6331733178a66f2bc00f26a213d378b676d966a9c61130c1728ee76eedd790cbef59a26feb3f99fb0db92ab6dff7283305a9a98bd4cbb34cb348e408e3c7c7ef25db99d18e54b8f43c2351cbe95fbbb4506daa67fb1347d2a096d123b1053a780f0e30017f9c994e0ba5c13ee105069f6394b7f381f3355b13f595efa7014fed2806f37ee85b69d0597c74fca6a6258399cb27675f9e37fec3dd9b88c80e0beb6eb5aeb84b6f1ab68a2036f4eba886cfee45dc971a3e64fda487f0f54c28925204d0a641f67e1df1be0b1cc0b223dc60f64b75567b70b0efaca014e114f7ae51df0d5e8b12ca535ae9f17f48df4438b84605a6337fe21a140acdfef3f81c3fc574d486c55f3b0d9b6f264f8d682bdf861c96340426638376d356ecbb7f707d0a6c796f6f85945fe9f824d8a52e3097c86b06f7b5baa3c4de6f7917aa9f47a7c2c82939b2c530aa6a42852c61de68a1989fbf6b7189d31b62369b31baf331bae22eefa6d6c3dfdc1872eb12b37d8bd60674accd75992175ee5a537a6fc69f7494712e47bef652c79e3b4a04a4f5045ee330c5258f78a0c1571c3daee1bb202fe59b4e6de4a8a0ccff10923c63de85b019047bab8eb980569ab22c574ccfedb88e26aebf582912ffa2d35616c482abb04486c35e4809709c5c2b741cce32c3b339899fa596a6c36f29a0bb7e6062c0ed5b90ebb89d01109df155f1eb50a35d91bd79fb9a4879008d0458c2c20a8b69fbf912cbe7e43337a31ebe26695dd18b6e02c1bc4982193f5c5a486a2c928655b9e84ac490a5dde1c90f4b3f771fc4f4eeadc53f47b9500143eb45de5b0fa5bf27b64e661c9bd619d3e586234d01e8baf8c967489e2ce796135cff1b24d833b88e992d751ac8e3c9ff5de383d8515fd340d5e790dc92c531b3a52320ab2b57fdca35bc17f0c9d8ae568ceb5c50effa2dff00400347d6d7f595929689b758377a4272d61de7def48c740a8f678b4f859b1ce784020e49b609a7be094dbff079657775969a10074a7f2d3ce2ed868c3946c9a109b637af6ee3c2d5cf4491160e77e081468a7926af89f0a789a32aaeab947ecb4bbf32ba279de1ca29dd608d51e3e1623c9c308224284c1370ca01c88a8ba60a3b7d69a829cb2a907fbf8888678080d741066f00ece463a16ce093874a1a84d729e6d10a75c5ff6ffa5f99432aea40e27458e2a05ba56382567d2d82b3ec491cc9f37b1ca0e99fb5a82457c7735f1861b705d72f784ae8fd6a685662427e12c984196509ccc76125610be4ac059957235a898124a865a0a5f6a245d363524b1adedd5507513b23e37acf347ae69bf97fd53da40c2e41194506f677dcbd57cc33479438fbcb7516b1d3ff940262b1a72f80fa9b258ec0a7243b103a317c589d8a463885da0502c6462a593c538c32955771fb889d526e847fc13099667aa8fb128d74b657f3df52fee9afc473d696376612b9baaed18debac70282e8946b4c1561e74b17b6aa54780808c5285292da76663135696ebc1027b6c03ae302851e538de1a52c2038cb6b491d1bfd6722cd8d7e283f5b051aa2bba9eacfdae369633808f1e2de4baf9e1f83e6a40832123032039f2d7b19910de13b2e9276b41092877426361877a654e837d6860fc731172db9da1f43f0822b4bd15ba58460d25badb2decc0ce9ee6f229bb4e6dd8a5a8901284625f9a488eaacc52e75bf84df714218c36ad8b21e7f8fd6d473b173bf1e762dec3c26e438b3a37237c71e46d5950940a83273fc12dfc4fa5707f5918cb015b3b2437802cf55ebf41e8760b8ae37ebf529bdafb5bab53a475d76ec504b4f4e17c15dcef385126285e13847fbc9488edbbb16d336552217e62414b24a2290e3fe0dc6253a98b59c3cc216ece257c4ba8228546f72e9f74f76bcbd213896fd672afba3dcf048a12e82e2b27526a5228e6c6d15d81691b7399249044d7ce120f137328d21b99e6a6dfbdd24451c7043c90093b2a6b6fa9fac14f2fee04a276a65cc8a81cada34c3cff09336c69249a84f5f3a08e45e5c1d3db6c158e41d6cc51d4b1d5b2bd769a336cc42f4f16fd229418cd620d7f2914240ff89494fd90644ab835e87da6fdbb689e7cfbbffc388a506086f8ff1572ebfd82ff421ddc299623de2bac1d3ad22a4e75716ee3e717d3ee9d2a996c4a14c9016e93fdc7c90c0f34d631e6f3825c694ad691701e5b7d28585c4851c37b2ed290655de57e8b360e00e28217c02edab9022eb7b753f37849224e88a1083e10be817ebb6d845b81630566c36b67bc3fb047a63545d4435cbb676580213e2e5917ef791677eb9e0abebceee267a0569a53fc43c6e7250c97d15e1303c1bc9c0a7d0e260beaa60a77eeea1db6f6bbf2fbc89d95ccff5a2da19f1e294e44df77ba5b7cb48e7629db6582b2afb4639b0811b179fadb74c345fd5321fc644fca1e2415d435b68119afe75c89e9d8cb4a4776e051475aa0b65b6fd779677f0b6deff6b91091e7e65364ee3481270b081b1c9a8bc487546712916203537a6c967f7a829f419a66eb5b62daa71ca6bd9448fc1d434d2c738f75d68e7ccb23edb715fd3a2d122bf4bc28b1d4b242f956ff11eb44c0d945d0270c9d51d0daff6a2020e26035c8c94c9f4ec6dc9f4b3287b5ed6611b926ddb3abff5350fdf94242dbd9c37542c78975d7c4e8dedcdf57480e07ab5b9a42ef0021f3729bacba7508c3ae2e30f225b3c1ec289704966dd382607d1cd76de8bad3a642444e0b8833fb9a189e893570310f6e6031a49c332a3f1a151eeda8c848d16f5f5b9d82bcdfd160b64c2aa586ea3ee431208541441944f77a97a296ee80a765971b1e34ff96cce218e4d1bd3572b1d7cccd855c6894286d7006f41341382580e9d39e07df319eb9b199e31a3da1470b0ee6e77f131129583312fac27d85a4bb92ddd886bd8f45e73155b5ab15a067ceb4155b65c3f132b88bfd278c25642a14c753a8df7be195f49ec1f8af4edd3cf35baea747c5326464c7d51f65af0c35db0e1264e0b3d5543ab55d33b3772888a640f132d858867d588737f2835c15e04f8c3a59ca9c0b18e5effff3466881c1ab989369f8397b9a408f551b5886626cb5611f2a41b0dc471cf2d1f356c1c681ca02cc4a2adb9a0eb21fe18057607366feeaa02424b117fec9e39dcfa04470f1fef9046d2f38e23a6df9afc10b6e228d864afe8fcecec30312a784ce8106caecc6bbcf05a12d6bb0252ebf20b39de16c38f97fe16eb480b3b091b521dd2792eca2ccecc04ce79a98501db224c37539f8dfeef80e912e896cf04dbd6a6ea824112157bf97f4e08bb721cd748dd390991fd149828972989ebb69357684d814defbbe799030554350385a7515178f24fb5619a65548a8f7238a18654aa2131b345434ae73c707e842bd8b8aff30de0caf2081f619</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">请输入密码</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    
    <categories>
      
      <category>数据中台</category>
      
    </categories>
    
    
    <tags>
      
      <tag>数据中台</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>数据中台-11_怎么一劳永逸地解决数据安全问题</title>
    <link href="/posts/2022/05/58b88f53.html"/>
    <url>/posts/2022/05/58b88f53.html</url>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="a2d8f30cab51ea6c18146eda8d099571c929c7d5bad770b1f289d7ea941292db">4e4fc70cc91fd42566446082a751780fd5618d041572b8bed7c41bda7a5fe16038be3debec314ec22c9c045460029955307c0c195ce5e59dd20fd8c27fb608d6b89e198436bdb323a1a3e4ac393eed792e2e616bd87142f643df9147395ef6edce41979c40be3ce09da8e14bd0b0ce2429c9aeeaedc44034fa2bc0cb34fbe286a8e2fd579efada9e9c3b2b99f76345ae124c53155a71a4e6e7ecb641793353e8056da22541b6ac05b64141f99cc8e2c9e1ac4fc453ebe223682983276e1d5b46e54ca48c54d96a77183d3a22cf6d6aafb9243317ab0718248c4ff46eb3310c4f6dfe562a8ef696419744bfee96a6ccae8db6c5399aec95742a15205f49a459e95e2231e52ab67da678fcc8bd063e80a2c7a5acf5fa7fe74a48ebae0421ac41114e98460496eef0ec1cec60d9c48967f5668f5a4f1c1a93bcf6a764914f1b471d5739418f4f0707d23d28213a6e1e53f9d771312a2b507670f27013da5b1d5ebeed5e269e7faa9a7f76b9fc30515bf8e469809f203e0d18b362b69084b93954c1b86c009e5560110061d73118d9e70c9f35bb8f583cf3d6ed3ba24c3a4855f6b98fc4096a8a325d714bf88d9ccbc796ef006590a6800ec34253c1ee0f758d9e6ca8fa1d351e3d6bcb4a9b9be1db86a605f764ffbaa50f84a06cbb3a232b142c7e660aab277385b9bc0b19538ca09b0d595603264783372daa1a8cf5fef6e5fd814fff71882c4093e444cebb8d9bd26bb28461a8e19ceeab5d0754d59c241b977f6ed3069e12e03c297489bc507df8b214ac59a1bdb7d6fb2a675a6d5ab68f5477903296a39462ebae9004be0d1932bae080ea4705edd5e051bc941630b9c85b8252a65e6f993af7d51f47011ee119309201c0a13b49c7d0ea898667fb4bd5cdc3cfbb257c72d1d9082a64d0c98f9afc31ab371636f12f310fdbcf3edc3b0387b302496c72720d4b233a32dea7333d1a52e0cc24044c01b6471346a49bebc87cd1e7b079b84b0aa835275428c9bc95acc1944c9a734403b3907244b9602755b27bc1440d9e86b90111117c45d6aa761d027bb174f313f82d3781ace0c42b9ad5e0b3702653e76d56986c1cc976bd5d3649a30b7be1311b83968349320efc5ac05cd875b0268ae88547c5ff609e0912affa5a955ac7a03f6eba9c818047109bff38734e53f0080c15aff652c6b44e58e3c482376c6fc5be0b853f54855865dbb40ce3a01ff75ab3e27a2726dd67e5b81326ed156ecbc6b860d36f8fc59affc562f6dcc02a9a1891e7a78e4fcd2fa1283218c2dac9455015bf26cba56db810f9b20688e625b1a472e5e331d36c6301a3f520eb973041f4a49ce3941f1b09c557f7b03ebcd1abc26e0989ec6f755524e92a5f9a33baf75ab69c9e8edb4903cfb96d32a8e961fcdfbc19137e98bde777e6afe7d88b2f20f20b680a1059a22ff159d603cd04add6a6dfe373d253b9ada6ffe917b54e3b091f5040b3fdec2345a0968244612ad8a9d19bd9c2874fb09b5c9d7eb4c19d17f105c5500600b99650c9c3dbead33375606ab96789765c51eae625b918e81124e5a7886cb99030d1a0fb7b398b51d57060ef027e699194bc229b1294eacfebfd3038a355402c91a77ce785a196c50a1e65f5fe36b99c0e589efc86abe056d1e9fd695719ff076e0ec7abd55ca5dc7895746cb8f5c141c391d8abef6fc8967d8ae92b261a213e3be55b862b5f6807162929649b14560377b605dc72ef2639ea66f794e31dfba87c5314abc78d1c5e472ab9a22e1a104aba02753efc8c4cc249a2d5e70672838dc84b48a361ec5d26bf60e4ac2af609326a90d73fef0335207b2825f0c42ca312c9410f83d6552005b83f94695a779edc6bb9008d4de1c67b8ac5efaf13cd2036bb289ac00ffc902a1a689ec7153feb3de397a51f5419e36047292e6725dbfb48c083c32f15a9ec2344156b8a5bcb13002205864dcb57c3aae53f2bc356d50a68ac48db312d6fdd7a78dd1c7b0831cdec54148ff44e7029040fec414aba06a6bacc5fd24d37b584a3b700ed69c69fe33d73e8c16cf11a1062e03f95f481f5a9639960a1240bf6508264c3656c8b14266b38ffa05553f1ce74c47e7624821559815f019a7409ad1c6d258ed888e58fcc78d075c99ab251dbc9ce2d218741e36b7ab9fc74042a198696b06a2b359a783b018d47f5a753c4aaf2dcf99a055338937a47cc7a084cfc72b2ae6e025e61a800e0f2c5fada0d14134217d82a138fade7ad72e4bf94c3cfb192cf263d5c3aac2014b1324ca594f60c4c5209abdbae28b6fa68c10256782a773520cc279301ce9dcf35a9beed2be569d9ef805298f1031995c942376c237d300a1693269d29a21af95179fdbaae4a350a952d27a9582e7bd0c4dc2cd8742ca875bfa84aeb053a3bdb069d3df2abe3973b574f178b6a3cb89d021637d12a2d40dd2d9729911300ba2eb10f9b615e57cb67244698651a5ae47bd843ba12a411c5d0e7154403f1a06d025f19c8234d9b13cc19448e75db91efd8dbb901d59982024a0aa0f9ef8595116d4359bb6b4f766330d6a98944e46017c4f789eccfb79fca4fa7e223d5dcc3848b3e77b92e09913b369688b48e68701dd6e655b3ee333bd64c5962af8b5307e154d98b378f364c5b594cf9b606a3ed799a070976b975fbba3d227243f6591908c86a41e27883029a5ca9e8942cff1bd034c12126d56ee710efa21c12ecb6b416c25bcdf466c2a645fce9010780c906916336eb4e539ca00fd0903c9b779827f6bfcca3a6d99823e29b53433e0e9ac2f97fa76b4e2a9bb421f9e3295f8044ff42cbed79bb43f0a80936886df96fbf148d5a8c836f834869470da2abcb4b62f08181307b4cb91acc83c55965320d46aa3a68af21726305d80464ae092658ae83bfd229cc04ccba3420541aa0a4110dcf6a518d0809bf157083af55939ee9e7b9695fc26fe86aa962e8e301a4efd2db677113654043ef4e3ce141736d34562380330c5d72b88f3fea015e00965f2b3f3691e0de98e3e6866e62d24e5e8dd3c337c892bb84b42326235b7188f7faab5ad392de3163ce7a460bd9f024e8c6789a679b4b5a7eaf72a142cdec62e05c1ab84711c7f3403c917c40d9b8281d5a305b7b40f28aba0d26be14ce9ec0a4d40b178de32b1cc700faf6dd51da0d17e684356c8dca07033012b0b55184796a5ebf4a0673c6b772b2328d20a3255de7d61c102beb551a3d5320ee423b8e9d916bcf6f77e28bb157c277ee3c8cc5782492184ca319e4e6edca03696ecff577c63968fe63864c43ca7d3e3c76e9d3d31b1fbf587499c90a1582c5310effb3c829584496d6eeff1105a52ee696e0b4c560218434c7c340dae857339582a30c75f4f2e98ba69ec4d6dd9331a65c30869200b2b334837ea009d59a7a76f0df814c965c57f0926694f4e0dc19cbcd6d129b0dec0c677d0387213decf0da98922a7c56e046c6b6533d8b0c7648582e1189669eb4e81d8ce612c304a24af30d37a5a5179d86990f2ae1e5f47a90b75b486d18ac666383725fabb16df46f9b9f1f89a0b54c08a91e41eed23ded47e4315cf6e2679a940e7adfb0d7176430b7399c058011b4c1306132b823d0acccf03a551a7b3456575e16669f69153b55df2da7ddd6b3d329688fbe9a881d9814b22f74d3199e0f9a234f13c8d0ac4bb26e31a771c3418f3938a0f5c27db6f911b5e29f988e0d56675d6a838577c52c7ecb506f7f6e77b21dcc0da1dd21cb8db6da6c02178b650ea6c1c6f84056b1f724d93f8bb79fe9ef39151b184ef167235de3faf7df8f048c99a73e832c786fa59f2fe7921332bc50f60bd40412b6c8d98b04c60b302df7e054c8c06adfb4245338ae0d88e7c7722fec922274094d5840299e7feb2803b43fdca44be0f7f9b30ee94a3292015cd8e64717d4f92aab1cce893dc54870c5abf4a3054cf67c3698b161b40aab4c2437bbcdd08e99cca1c730076e21265abcf259269eb75ffba511d2065e7b38a06ac22b85e83231f92497a0569cc3b47508c8800b86b2a4c221130c48a4699e67770648c938a293d349a71a4a96e5f61ebd27c01fa68538214026d7a13d55730cc9fd95c3ab1e1c56b8c69272ad6706b90d7bc3211bbacb50642ff8aa0b6807ab8be61b94f01f8d0761781e17321d50ec6e8c3c555b4fc15bd75867ca4bc68e6f0300de4982340b9117275eb02ee1f78c91da9e862124da4e2eeee5ee75cb0c8e968bbc196d35335c40781e7ffc12f4b715f34c949e5604f88be7878487ff1b974a3b8af8b694db0ee810739e1f5f0f5ddbb0d76d36993dd022fe91a137fde6fa4396d7e6c64cd5b72464005e10afe3ecfe40b0de9d573703d7a61686777bb8a96100859438a2dad9df1bbdf7e8dab6958cdf8db4ef445187719651cc178c0a0c133c4c6a4bdce22a83b2b0f3bd12e1b354431e0ea816ac659887e58c81d3456f2e590881d0d77158f0f15654e197d6193e8aeb17052e9f0baa3a8366d8f24ac9a03d8419aa34b5ae2a7523db50cab8f3420e88890a13fe19521b5235fe6ea77b977d659322904d2a913ae8435bacd591a073d161d5b1d960c2019bae4fcec4f3739f46d2f70bfb7ee432e670c6fa395d24c3fbd7f683bc722fc055e517d455735649acb726a6f426a36c82c56eac30c12baa599eeec51affa60240f1b824bac4470ab401daff2642d62444e1c077c56b4b44ae37d83b8f263d1c3e715df457f2b9738041a69510c19f7396fad87623b185682b7e7dc09e95886a8f9fa4a1f73fc0e8220f8b759401f5d39992fc4fb6c43954a963fe193fac06d35ec20057513af0ebed79800568dd48395cb55fac7e03075edcf2b8ac3ee2601ef1250fdbb69496b6951bf10960d53232de95ab29a2c56ccd15c8e3e88b6b308cb0e749a1c63d5f6323fc7afa13409bea8b08367a77dc135b1fd87e0b801b2e83034ed3f9408d1890aab22e00cf479682d17914235254d072d8c535141ff1daede905602f331a5285b9586b9ccf93fa81a11b541fea5145f1423dadb56ccb24c348a8b6c1056a14d2c74350e8e26b162d8d952d112d49ce05a090ba5a3038a92ee4c26cb29724fc168a2857c6d6a3b7e1b29159d12d38f60e7fc12c9790b4e797dc528d721e55d4e4cfc906b623fb08654f1207e6bb2c8b3bff02815f94d924b1effc42857cfefe95c7552002fd87cdedb7b42b3fe17f75083a2afbab67e2a1d524b34cc5145d248116ebb80dcb44763a6ca5b21c18cf9f9f444b382df763efac865d515d5e485e50b170182b636a1934c85327272ab6d1c0536a78e3e5dc25a2a52902cd89108d3ba6dfcaba130044683398c2d770e3027b2c9c34b755ba33094008a727ee7c35433a1c8526568e1add9c2714d33a2d843444b9bde5b11f6c807fc4647d30ebfea6bf7d01197d7124632c8c655acc5b38551501ec3bd271c666a8b17cd6c10f102332bf7564f9a14cca386c4afe11db063ea7439753c50b6f786f0cd06fedad56749bb8daf40b62257047edb4a03cec29318778c594271e0fb28f434f69c9cebe3dad4615319a981e3eeed6f2d5ba3e8593e660fbb3af4b21d7f21a0c9cc7dbe51672e78521995e761120bd012b56efe2290a36bf3a231928d0f4eb0c308e26663d49a3b4ff1daec1fdb75b8ef64227530c78188324c955f4eda62c63a0b7457eb65310940e5513c6ef561aecbf57081004bf311cad7d36a2851dd5714c310131fe7b2d3b7beb45c90250ccd761e10ca9bbd38ab5e8cd4622b959349cc48ac3d43925b284015a10fdc977b03889b9ea306b833be06d18700b8995faa7e75f80d3b3f93a50e9f17bab324cc5d14ff8d60f3d82cfa16067656ce7a6c69aa1567c3ccfd5e8d15dc8a0f5045a85ef52bc7b28f32fca6af1de14a7c5d1fb72c0a2d6cb75febf394b10a9a5790f2652393ceec5db27aef4d1c1ab0618333b8ace763c16e265813e25a1013204c52db0b19e33ee0fc0317b497c8405eff0ceb9b49e844e9a6b34b74973b198bfea49f0f9ad0157b1c86a6be3d5f244b90ebbdae2189543ab9e2d1b1746fb264732ecd1834aa5fbbd6de5c69d49aa49d44839f6363e8ea50b5fb486a2f8aaad62cf6375fddfb700b9d6e1408c00483b53206b19d416adc4a7c9383d9b240d8251b2128ce548197062888ba784aebb4b19d293be1746df71baa03bc05bd54d51383e843eaf6bafdc44aaa39da740abcdbd0f9df0e44d0ca6cf4145e0255411cef4c2c3f5d345833d2e5fec6c810ae98cbc90954980825b7c2a0deb23e39321afeff6f8f4b2c3323e677d8aa1ee7482048c3386f6947d82d7e314bb04e81c61742b97fcbcf31dfa8a3e865ebceb996123c7ed63aea9853d61a0f33cdab6b47fc45bb5b11e6bc2a6d2dcc66340fe0619544b2eb468253d02ba52a65ef60e7708408a8bc167c6a9dd221ab2933c345b12abcd59331d10da30c98ff2147d63e93c61577f506e688c5516906f332c17d65a69945fbb504424919bc72cfb169126c1985948ebe545e76b1fade659aa88a67da0ff58d5fc76a3c47c9b11817df6cb425e815c999ae3803174f64515169c35a9fd9a77740d18f2f0a8caa9187d4e4de2574f5ccaaf92bf0c737e6b02dcbedac3cca26018174ab382e0aa1f8d7801e8fa7da0be3faf3e188fae3d671d615720f007704a9fc83c330d60e66fc84fd49421c5b9bd27eab7ad8dc5c5ac45fb1225bb75483cd66cb145b04734b64f6c72de934493d8dd62647db819ab44e69239a0800d0ddc990faa25adf80149ee66cad236b6948023a1d80cc276650f3e9f788a3a2f423de40b495e07858a22a5223cde763fab92e0a3e3041240260e4acac82ef911aa6360e9ff56c82b8cf9ddce0bf50a609db94fbc29e030fc2bc7185c9cab1189387395d09fbbd836789d7ccfc9cf0f7cd1b460caa280915f29c87cf5146bc6632d3dfae2ac2d57c25ffa9cdea74eff8e991e54461b60fec677bf936b8bba08b57be9a9d63ae9c8f882b769fa1b7cb3b55555bd6c71a73626710fa7ce18b35ef23c149af1da732ce61050a8cc335e25d6c1e242683b7d50e946bb2ae6d7392f199f5fce5906ccfe27101a992f77df21757b0f27ace5e743d0e332cc9d144464cb5e80ad4510dc97c0bbd24e8ac29d3fe07180c33374356bc0e44521a96ad7c76e916e06648416116ec2edadfa9d784599f371f998d25cc7298737686108c8a9be99496dd528ed9385b9baf347c9d83fbcba872ae9fe3db8733aca4adfc94d3731d48d7a495658c73ec140c2180b3272a4622e47ef7e8c9db772ca971e5739b59efb145b7d1aa5e5439fc78c7d010f4e635404d09610e7f338766e13b517e37dd234ac18cd7bb86a4d2a4cc696bfc809da035a1d2a3a1a72e65cdb496c6272067f84a2346ccd4a4e3556cab7ce460e9740172e9c7c39bbee93122505262a7b7ba4c6792c6c0e45ca196bcaeb13723a9d416ed9644ec1a8c878dc1b53c201280eab2bdbfc90a1f23d427da60f896fa2ad56896461298f23d3dfe2d733df0702fc0774fd8611a2cd79b77d17b7d508ad05c35af5312e96f861b20c4cd1613a38223f429fce0adca7e3c811b7b5dd02cbd0ae49e235846fdccff217c674c98f9349a13949789b5f7ce7ffbfb912cc367cddbf8ad6096d80e4a5a0730ee8c13eadd26d00a1218801acd5cda0c65a4d975adbde8f542326a49c76abf09ad88fcd0d7dabacec5fce0d913adea55d8b0891af838f60fefc607f8617454217b21fa4d1dfe91a7c2e0db14f4877c301eb6f120902da6974d95b09a5f89d71865e9dcd000125a591f4e3dbbf0697db3f86aa707287b9919f24eb5e0c0a591c2041fcbf3a96b9ff8cdcbc0b8c9659571af268e11450b2a424b80825a7f457440b57c5cffc3a232aec11954446ebc802040e760601d54d44383bc90ff4a761639b97ef78d3b278b9a634e105c2849ef847d75682872000ad34df05664e1852e89d60bb4b8dc0b1d75d6287b90ec8a6b61d8ad2cae1ea1fc04edfb6b7c5a51348bf028766dc6492ad17d5d443ae12395feee9479864b19948fa8dbdb8a4e9d946981fb49ebed92936ddf562d490174450ca6b01f5f0c9887ec4c44f59743d63463af5058ef1a1e496e0ad10549deaf46f135dba8dd0dafddc1358f89c5a545ae84dbd7e147eb420c1dd3759256e5aa51b70b101daba721ad1cec9eba21f92f7ca8be319a98a846066fcf3c045678ff4b6fe85750a4fca6e83d62d7d398b43137716e17c018c45b1a859f52454c5db101b88977c2ac3a06484e3a956ddf37b100bc37f05630875f5d575ee3874b7dcd57b475c455775fd2b0deb88e8cc83058ee6287817e64dc57d404cb9c26ca1a06fd386ef6b8448a337e06cdd0f06a25731a657034dd17b25ed34510434d188ede53f5b551a13a8600006b6d2504d96c781d83e190c4319da12ecc4d947b74b8ac50543d5fee95ebc22759b54d2843f8a342870256a9e0962ab3f7cdcedad34432a90a6c31b05c5bd71b52bc2aadffb155c54e61daa8e9a11fc8eb3e7b0c721540b4c60a93fcbc02397d48b617704225a3498bb45e127086a5d34b8e2f6f2640fe0678c173715d663b4443da4ebd15615e7e4d88b579157dc246f2154f2b268d1ed042837784387c2481a71167c91da7b6395c62cde0db9e9ddeabeee92670137512f40bc454756ca2d9c6c5840de09dca82e55ab40b82dfb561d0d5c20c8aaaca7a7665f2f9081ed003eda9264b4c9e4dd66eeed9e508517d5445559890c87fe14af25f8c60e2b4cd29e334b8ddcd440755ffa7e52b5da5c3915f4ba9d5625283a29056e16f8dc889a8c02e4270ac207676ea7e212075a08b731836c46a26969eb3b48fb1f0dda007bee01975aaa3725481814f48cc9847bf6f87068fbe75c381d940b1179d66d926e1aee4dac0d8150f8b8e11c7b3c7ca7f9256b583eff32046ec6d60c6865069cbb2a1e37d645444597f85e2dca666b835452073beda8d4c06aec632664fd33d8a676ae6066c6417833b1e88ab5db2bf318793d44a552ecf3e7638d1c22589e07be67430820da1b93b1d33cde5ec510efdb1655ee8d38ad3ddb3d6628a2486bc2b2c0566c73d4212904e9926988cc42f797dba5d3daf3d5c0e9ab72f6eb0e53f9675d31cf8965a635a1ced63e8ad203589e31c9186b12ad97f222f26d6513380456f906a25c42b424bdd81b77109ef2c3843627c5cf1254960557df481703390473f97ba99638518eaa076cad7b09fba320a309058eb5af6412a7bbf30e1dcc5ea5cbfbd9c9b6dfe216ed7208e6433f6c375dacdf3ed274c7311af3439ee1f228c38c3f7d3b2277c11d59f6bf322fb413ea88acd41c67e93907288e86c692120a5c47453611615957f07bea70e17e4e16a4cc12d1de06ffa0821b743214d9487e14975533e0eb0f8a6bfac79cff2a362447cae50f9bd703d9ef40f5ac307eadda27191b33b5a866e586e4685927fbbf94ffe5e76e54ede4d58a352503e581ae7e335984173d7358f14cd8833c82989572821f07ad053d815f87d71c15b43278e96eb7d44c9ff29f7567cfcc38ecc2dea9657363b58aae6fa24126df4c456be5d029b859d4c9f2eb9877d3fb71cfa8efed5ff658ee06d00c89f5ccb2a7a4ae042092c65151735419c4a78bd872d35e12121e3721bcaa81d24b71feb1e18aca7cdb8a173c6d31a1694be7504ec57ae1309fa265cf7434cf7963d69e0009e60c806e9a29747e2742fb912b019b40224faffbe7b232f6cf75ae27ee63aa267a9ea530ba17728c266102522388368d23a2a469f3442e3c9ba19a4a50927db6d0043c88642e3dbd9ce08bb8f84d164a2d8775fa91116dc1980dfd2acea193a7494a8be6a0c586e82ac3b65a7ce4f4b4a34ca2171115b7f08ffdea79839a28a24c4c0349d4b78964b6e199a8b87dd36139a5a65fd7f7bee8c4322a5f171188341225dc1dade197810be2c1b7559dc8bed4ea1be42f0c729ed482bf8ff8f90eec946d8677fe61ba9f59e14cd513c1e6a89e7b3470a356d76b9a13899e5b1759ba47bf6be5e236b1916e6dae916fe53a27669eec0eda038b47d14c06ea57e84b3ece5535321e7164a25a63c2c3b8d621ac23c1e618ba5134daecc5213078b792baf0350c51b80e13035e7d2419ca6ab10e71c45f66a4ef3599f826af66c6c6fd94b3f9e135aad101a5ab879ab0d360d49fa9eef68eb2304ad8fdb910283bc00ecdbc8877d084009c6d7d030f2068f466b1d2b659754a7818b4479a13927851f420c9e045a869e4af69b53a66520e924846d16cfbea0561b9038275ffc36cd61f40a4d0ea7bc49b63bfd03813d1bfc4ec6883f7b0c8a39066cfb5bf5ea41adb43a7df7d65509d136d7637566525ec7234eecd648b314f8addf229a05ac81d22194b6e4b21273312ea5146bd0d8427da1cb51cb15dbfe859ad5a3454bba8ede2169fa12a9eb6298f77c69301f8b32a1d2be42d1dce60f3d6a9e365823afacf8f91398dc33ee6e73f1d7c8f015216e58ba611a18e60efc8cbbd020b01cfdbc0b34079f88ad201a30e05eb070adac18373a6a3843ddd1d9813c1b12b0ae2939b44f0d09631eb04a78c803307067b2b44014203218ae5c9489ed51639ed730e6219ae492b7b0616a64f71ce88767b7de333e0069efabcb140b67e2402efb4f901155f4e3e4d9c9e87ee114486c6e187ef6d5d1892e4d97b0fe0fe3de5eea60e88674bbbccf50ef668be3a566cfe64d27ce0f64b0dc3a4597bc393e1c220f5e6995c4ad5255e15d30a3a530f942c9a28fd0ad4ca9748173f6369e867aefa27fd17521836fce427f2656e5ddf170cdefa8dc959dc276f3a22edb2dd8ddf80a313b21878de7405f2eff124b6b3ecf56833ad4b788147753b034a478b9cac33be632ee7ffd09b4796b34b336d189046b632e40a198cf86c94d7aa448b4fd13e85ae4960a537d0a214f68d2d42392c2ea0f61145c8230903699947e9b8bb64e34a449ea1adcb02a64a44431b07dc5acde297cbd9851ab86724d3275800e07439c5bcc572465a11bd835ecebe90fc4ca54abf22624ed94c7bcc8d595f72bdf9f5caff2a7bb4b771d6783b54584deb31d09816a0a4bdf912d1b4c5763fa3b71ccd32672d7c99331bca2fa8147e7ab1508483d3be69e1f0d6a743535ccaef100cc3b750b19dd033d45bcbe67ee180a7da68520e3d6e1d8689d2b4ca136ebbf8eec12c4119b7c45e692ffcb71a43523d4f9ec836bdfa930c7a92db510512a2ea2780fd2c75778b83b4b03db8a155139ade4c8e2e603f40e0caa61ac774ecacda3f30c8f8a639d9b8abd1513ce02a869316ade99dccac720356e0661a95c2533e9797e024d4cbad2e8a71c8397bfc0aab9406275465d7d3e1b55de185cf4777eb7f0da7840f08dca13c1ac558867cb66d8528d4f88e3fd8ff4f0c644ee6def4b5b3fe476db1f4669ae9090475cb1e68514f915e5a84fd629ece1591a0a446ebe2857742f583469284ef759a336d366273ebfe74bdfcec3515a634847760c4d8c39371006b969ec78f666b77c3506a150eafc8b4420013052b0afcbd344e805b48a5f3026d26394751a89f27f58d4ddaed09bd470299b0b5ae643cb5775aa16567f3b3db31be74c8aafbdc922e51d1f078054b74ffa7c44286d6d404849a76046fb355ac090cbf1f989f9251160a720f2b3e2eb67252feeacee9c6781f3ac76fd9ede541ad7941da6060326b9661b63424195ed20cee315f50c1bb0e3d336ccad92c0d14f23aacbe0bba12dfa548aaa35957083085a224eb352053c4691f2c01c9e4b627d1f8b3f93d2cfef6f8b36329e0fb2b71049cbee7df0598b63bc3614eaaf313d0ed976d796f3c5f2f4fc426a1706ce859f2025bee7165834e4374da4623cf645b8001b69dc17cda7c79e3996ffc06c0a5d49882e6678c9ba2fa4d39dc735c858c3110b0d2f0203b30f8331e375eb577d7dd8dada441291f7e4d333d8b41729165ce48142111a35a37d4abbcd7569b0342c53efd9a1260ac38608262de8dc84e1b5b4f41cd8dff2e3b4a87d27a8b15154957adfa9a95f467acf13489fad870758ccb18b1b9ade16d8673ad5fc2a28e8d4dab6cefdd4b9d4e432332544b1cd885602d5fb42d9384098c11e40f6ad36bfcb7b4e08acd2b9598cb5df86a0a960757aeb514d6c11f75623d3313aa25c50a3f4469b5439d6bfaedc2701c64de703f65200b678bd9eeebd23f8b333c65bf1c96201762c41ac3932f4a2de0849e8af07f379027ff27de72c846f2d735912fc434def7cbe4101c7b742a98041303c07ec4a22fb6fa06e0c518a22dd091aadf5f3482c396f142abba1f00955855339354cb0cf055d45b44536388bb3769502105050d71e3846c9c43c7a912553d30a91d9a2db34e14f97a045b2d5d116b2aff2e640a5fdcef2dfcb0a8acfc4ec31b60784ff270ad80a6979f5a77d01f2133948a066ba51fc99288a16925d08307c83f3ad29d48da67e7d8feb3759f1e5e47f60663794f5c90c974deab1a8759fcf610ad5412e2a10ec403a1e14dd370c72227d39aa1cf7d068db00b589bcb2db87fd3c0d2aa79d4823e4b77352b937901485f80277b938b149a86daf36f85eb0284820968161d33a648f5865a8e2f049fb8102d5a251eb87d47fc2fe4a2d26da8592612c58a0eae8897ce2072f1f4a3379df2bab69eee3eb0911a311fde3593f55f879b9bd90b4d6b6de906a0ff5ee968bbf56f782459e5d585f1ea533344a0cded0d1ecb264fe8c7606eb1b310eff95781b96f93196c985223399ae4e1da42ce571621fc734f9bcc1f5508cb8a6e3d0de329e763104095d569a16c6decaf53a3017a53b9503ad55c4a9a012f550d6cfa0606912fde251c0f4376ef2800765cb53e164176ee71ffd9e4b055318cdf9ba19f752b3607cc5a9a456be2f180cca73746eaaef2dce787e10478e2dc4ff187fa2b87d1b0b413f94273c3293ec860800c7604cdf53b563ca650fc1eecc0dee3067fe149e98d876a9977a9c7632af0aa70a153c58eb4dea18d8a130d97c147549d58841edf018c71640787cc66f8aedccc417b2bb48115e76cd1a6b562fa2da3f77f094a6d0f125ee36be8eb992ecf308091a2a4771eda92c5cc4e479135bdddcf4c53811a2d43aa4c0ec3d4dd936b92a6ccb147c1e20449002496360de783ed7b7fec23f62ad71c1bcde4c9e5f0eb93622e7eecea200a7a438bae1b9919ae30f0c381d8ef1e740389618a8ab0914bc8861253805cdba8fe6ea34551b3f593bf96a11f1abb0e6ca67ddc207739de6cd34a37241f0df8497d81e3628cd593c30298bbb08d32f71b710de6cc3083015629905436b9c3f3bddd80309487256b8079eab6ae194f5ce30f011d5ea24c8a374b92de0bdb93d649f9c8c38026e41de11ec94c91f326085db9c38e2df9a5cc75c89e36acb44d263109cc8034ec9f82514615bb163d09912d46514f17f81bd76d2f9c7c9b5117f99999c8c2a0fca4327e246c3089da7e159446d3c3000d02146244ad809b27011e2ecad55feb449be53196f8da9cd43978fcae6d552b515ba2d08e9668de3a842d34183217fbd017f10348273fe60952afdf4fb7fadaff6c1bbda75ff859624f626cce468b0b78debbe3a2cc253c282247b7f20189840fdc226fb7fca8e3438c690f98384db23b68303b125537beec0e4cdfc5f063abb9f17acd4228a5122de01d9fc14dc0996f1e30c71dbaaf4a8e879c9f07801048bda289021cbe12a3b64348a993fa47ac11dd4a3c68dbe42401e3e0b3fa307cb4c3d7fe1ab0ff382c8564a98d2632708481142c6eae36f0d7bfec586312817ff737a8ea08111dad68cb8e070caa3fa2126ede0a2d25181cfec51b635a18751e029ab03f814b738027f34d2a62c142125c0382a45db12102d071673ad5440d0b4d2b850e997374da6997a6c07fed08905a532d8f6a321a5a1613e4873ab938a7be2f87336242c45ec0aa084eca6b8dc70931061a006bb5d25ee9b198539307cb637a46b7a2d0aa232be130dd2059f549bfe043984706a123955aac5caea93a7afbd767141e6bcc1c5bae56df23c6dc064945288fcdbcb2cdf1f994125a768f6899209f8454754ec98fb474c92041a9d1c4ff61e417de93a94dc9c28aeb455dd992858e013ddfe5b3afd1f6cc5d231cda22e3756657fdc525904b1d6482f3ea6454dc613348661982081b2360a5d9555c4d45902fb7eecf5df7679b1f4b7b56557db6ba0dfd9d35f70fe7a2bedfc3af454dbfdc5b492fa7619cab54300930938782f2a8903805bb1abca56fc26ffabf8e46a7251724120ee7a93a405253decbab858f7c7eae13f915c90e73e0045e31ca0ea36c4efac407d62d9a15e6dc8d3027084c7c1f96559d16964974cd67c300127387960bccc235e2685f4c8b0cbe4a007806f16392ee7935fb131d94140e37356f3bccda3ae85f32e43500385fe8b85fcbc901eacde5e0880391794511152a883689437c868f02ff23970959c9723246f454e0d4a4e42cc2687eb8a93fad49d28ae6f18f493d8ee219b35f7aca6e90620c8ed4eb093b6118bb3815e65e80b5db1f2d0d479b51bb254c3a09a314994c174f8bdfcc4a3b46074576877fd8eb424dacf5c6371e7392da3beae6d9e059b980ad062ef25120bca181265e2f8a58b74744b747c31389e3478c47346d88bd70cb44a7a86d17afc6c84006e52f1f44e57dd4df43691192212e36fe0672b9e9b04cbab4b558eefda1d155929782c7bf032256ab6a834459428b43722a202c21d0d953045d1f715573d9f51a5551f997ef5164b4f25e7b1933b9f15573de74f1910245a71fe7d604e0c6dca5a114512032dd1f17bc2d2d96d0dce30ebe3a0c8e345e3945d62cd1a8e041614c917451b1ac669c1a32e2f627e5313b6fd17c009b1529f51817ca7efb65034ec460d80fb99a11215d378e3cf7f05e51d73f1490353c5780f3e2b2d0e712cb407cb1b6654122e01453cd2cdd090c7a4237699589750eee49a10fc3247fc08aba1aea3ce780d963f12e55a91fccffc8e455e886dcf07eb2295c084e982cc6a4cae4ff8abc47493dbfe6135d5cc5133a37e3c65ff97d779e067cc2cd9b3d1af2585640cdbbc5684e337063a0c88b53cd5320257fea599d2e4a1043cff83be5363132a8c0bdf25341ea764a3a503b6d341f737c1476346fa26dcaf87c7bae8dc66e00429916ead60905c81d4d8aaf7ef6d60f14bb115ecf2e5ac82dd161132b442b10bda9daf2f41b801e5d4de4d507e2eea85e25d66322c9fc8d52cf1d2f492f978e30175e17528d5c95ccc24b98cf4fc9df4cc234358787896de928941b1def5bd70afafb9a5ea2e4bf5b7686fbb06a0d2d4b2ee6c9bf7ee3957216a6042f07f70e430a084166dd8d66e3b5d74ba3e34548c1077ee6e2cf2d7065df80c64a554f81d7b1cc7a4520bb10a15881fbacf3d6a3d104411eba102531fb7972a1315f405ec4de99b8b013eac04bc82384b1a6db93d535e00b6a865f7730ad5c449daf0d9caeb5c57f4f143dc712efd795ad1df9b69bd4dde2e240fe05fb7444adbc01048de6c468b294f91407d8acc7fb4e3046892907ac269c276e4c92231ce80092631340141c1f32123e5e642336e9217ddcff3fcebca1fc2536418f5d93dc525a7f436abbfa1646ffbe3f2dac3d1f4cad8ac4e9ea420cb4191f65237cf3726787fec2ed09c55cf2c8322ad9a67c9437d741453e29bccc4db6a7ba7795614269ff7f5e8e8e217b4b3bcadcc93b9272bd57ef1e9a9152e2cdd41f6c66383e04c4e4b850ea2d5a08cb84dd823013d57f22ef3221d698ba970b0bd057c5994a57aeae39eafbb55405ab9a6f19dff59809c741597315cbdf5d1e839e98d2ad88a40466b1234183b418b6a712c8758a6757d6ac323263e4154dcc65fe659c8fc181431c9117ab119ce63423b727ea46a55559752ebf8a9f5fe811603300b2ce15d2f783181470b5a8b9070988351fd8cfb2dd1addb5e8f2182da2691bfcf7615e19a77197309ba12180fec820c45700a808dd8162dfa9fb0d4a3983fc40f6dcca928c16f10c835d27de2bedb051a9fd27bbd7225364421da7f5955579b3842a42da4f7877e4ff194743e3e84ea16158c3ec4d5627b75a083ebdb126ef1d0f4c13bc71796ab0402358e0612b70c6c86996f3ec85d184108d078f2fcec5023a1dee8cff7377f7ffe631ae6c05864730b44d1e252445b51ed78d0ae0fc46695f5f8442690f5c1bb08748942c548b62e1dd16536f3ee00244fdc4044563a718a7d0acc6a9bfc70128abe2250dc6741f872685f531069d6fbf90ff57a642e98b59b9724f2957543b5e9b55085a541d52e7e4e199ceb0ae2e8c49256325cdea46ce6884bbe4f832c49ddfc38065a2ec0f61207721812bb2db4e6ba8f1373d3c83193a98a3dc25f8d6454b552fcbfb2c9b96b030257e25f3f6bf41a33451c9775dcd616a5305dbaec1c76ec78c8bee0ebe6878147230ae5f14c4d84dd7fe164ecc887956bb794d52f0568535036500842276d2f4080a312564087d454d0839d13cb09c7bc2efbde6d3de8bd48f5891e3a26db3486cec9c602690e3095e0a61cb16cb2005232b033dc33de1118c34aedac4ab7e64cac12786d8a71e22951cb6a318871bb3704f3b48040d0cc1313625c8fb5ebacaede0619c799eecc20e81704f8d445b06d02d8f0b372816dbeb52d5b9f1c5dbf5cd344d2b1e0d045536f04bd2ec8f2b2e33a52ddafccab6f9dd1daae13441d41f49828ee463408c4d0687b65517490eb4accee303653b886e1433e6594b739bb3b6deaa1ba7654c4de2e28ed3a2a3c2b2aa6f18a9769941668a918fea3da24f8d0a4db97ed5dc20ce50827c78e305e3f808d04058fee13aa31629d836d6507754b9772c7c03f5b2ef12a48fd22beeacc92f9736b1e5172afa2a49d89b181436b968d3bd0106b37f2c60e853a7a464060d5749f8cac9451d6f286470f80e9e791d177c38abff28a5b299a707e9c3100961e9dacfe2afc1ca9782f0695c54542f7f424f8dd14af86b4281864a0daf6ca4f3fe78a7ea5eb5f73129986d91f676d800e45d88b5420a5a46abade898e67c7a3b716a65806a98b362a979039b406543a917384671384c0ff338460001f60641a9e91b3a83058d783f8f70b86fad25771c9cb242f342096b317d4a242febf972aea285569dc39c7db7918ce575987b2366942852d47e61ef432132a81e48823ddc98a5b79c4c8e5670145a4c92fbc6cfb993ba25fc2298288f6074ed484eeaddbbb248718621e13c2ceb8f08d78d2d327e3a553474b44a73777651e657e53d4016e7fa36425aa22522bf59ae3af08dfc6b34d1acc95ee215e6419206a120cdef597318cac8e845638afe8d3d3b088446679b0bce0c0551a25b6e1b207f70b434c4957b50f7f8514a4e347c7282cdedf90d080c4547db3ac105d60dc47d76e71d5d72df7423a113b4d7ec90dcd087b6571f3c248eaffb733ba08c7e0fd64fd8789452bea7cf639c771ba3c19bebe1b33bc8946178eb8a25114228d69a895286e60d5c6134b2802636eeca9dc3a0ccb62df14454968675556b125213a2f0df2aab56fbf3427ce6f43673d6ca81f24c520f71597b97dfec5c504c986f9eaf695c3ea54494f0c0d5137e23998958eea1d911f0f857e7196997cf4e890fe9bbb1a6c378884e0626c51e8b11a4c3473769fc13359c8c00f432dc717116c0b95ce4ab94bcbf4d7a544d4d9c954a2dbf1ee16d548dd1bf5380abd39858d21c1684300c4d6231a39635f34cdcd71655245ebb72b30dd0ece2d94ab1c866e770e6e9c433145acbd6f6aeef04d1c37ab494c595f9bb99afae94dc073654e953e8ec80a244ea1265d579388a427f78794328da9f07cbbfe792904125b638f2cc3756ce2021aee0448d1e462edaeac2a8799050e2feb688ff2291f49e794afa8b19d4bb21be4e06b2a20451284aa5505f7f317320de37be01a7405032b9716c3fa7f9d794a9099b553748d909fc009c3fda614c9c47d48b7d0eaa91c0c5c0d94da26369b2b3cfbbea50c3a61ec1f3c80a3bfce9c3118a0e1fd1d67ba409ce4580b83fb1d93e4cf443932171c09e5cb510c351f8a864e7e4c56de015a0f911cd07cc12abb2cbf8e4d5da9090fc44b5ed98b035dcfe949f64aaf9fece2c839beb18e4c89482a3935d06fc58e9cd602f584b5a42f94091ea70fb8f0d942de7d8d975899f923ed3c8d66a1a5a93272b76e35c7e44b48adcba219244bc10553933609434c7d314afa080c46977fc50f24847228e9bff33d5b58067e7494feb14411490924255e85e8d64bf2a29b58a8bf66dbb6726ad692707427ac2d83eb90d0b72d279eb448f25760ae5b16622685936a8dabd1171590b46589544d65594e903ab9cf63f20f965e38a35fdff59855f46870f8470e4137354d28e4576730398f22d6366b3ebea71542deca2dc0f25f2c808a4c832566bc7a03de1665a8cfa60be182a81a0172979786139846a06a8c02e593bc33343ea089926aef48bc823cdd5029fea19cf79b38e45ca7009ee39f689e7babc2013df18b30b7424f474db372732d3db38fee6922b0995bd255fbec4ccd657565576be58072b1e8c7891cfb22fe99ca6af28b54276ac6e2ccc7655f85da33604a5d2d54d59bf2b8ca3032738e3a6696e30d192e45f2a803b0ade667a6963d85c2f3b04ef564fe7cbcdb6b15fc6b412385e225a1593674e5b48aaff478a2485d89256b6364223e890ffaad4fc70fc2ff03f985f8362f61575637d5cddae078c0ede88929412bcd5f5fe70d74fa3603fd36794564ebff84e7bc292700c8fc447b0b719b3f206ad2759822f6256ea9ce28a676a11729f25cdfa777b0e2009631c894cd2217a0e0722e8da48297320e86b7c7f888d2d7af1c5577b73ec8e6ecda0409d7eabd013fd03a7e803e54cd518a24299c0604947fc2e3b8aa8c5936e19bcd3d6e94383e9626cd9f932e8fd2bbd1bb868b318bd12624e055a09664d57c787a3a9f00209ec7d263e95fc18d38d6295a45c1fdc27df76c4ff3f4c0a3e7a8ddc3a9e1bcb16f249c5e43e6c2a824c32c6a5168f725ecc6d49c38059067766021a54d0152b3ab9abf88a6a896d11bf8392e93cc0a8956459cece8458e561d8dd7b807ad7629541ea97b33ee0a1f3966ad8fd33094dac23ead46d9200b27ab3a6b52d4570473d2d21b6609559753d4f96dfec765e14acb50dfe448a95f3a51c4497f38b8b010a2515721f734f9f7635d7c032eefef1f885cc96d48edfcb7a7830b5dc29c90beef2cbe21e5f76bb5cb85338e8756b6e135a48f158e88374bda18d27af3447091c67f3a4a4c13983f23b54061952eca8892481ed0379c88c85910f2dee09c2a4ea1a4cca9769a2784c42af3ad04175dd031d87e353385a4fe4238e5d58e102b643f45b4198159290a465c1c6531b54308b2c4cbe16cc15093f3807b288b5b31c0c726f009da0f6c928d3b86b2236ae66bbf1d812f7c9fba1e38799d0a289e053239a2b8dccbd606f5dc1ec541025910b757746e649562defc59a91c43e9f3a0dfd44ef575560c3137ce8c86ab593352b39ec1abd815f780a3d94ed3b5a83e1a1ecb4e4d888a297d40f504aedef06d5767a429821c2b45b4dcb17d44ef8d35818f6cb419ff17722aaeb7697e8bf29eeb62c3180a6b048e353b7509b82d128c64a493caf5145e3215278e30d2e809691c3060d5659358d5eef128c30b2fa7b0baeb8e2a4cc0867f9d81def5a7d694cf5b9716dc4c7d8cb8c615ae70a7db35f5858a07c74e3ece980cc8cdf3b7abe98afb508ff466bfe7d15d8b177ed5cc1e8080164bd27685466e39e9f4d1699d75a32e33460ccbe9e953ac6a350e6f61643aaa17f54a015f036cfcb06be324a9b6336516eb44d21c294de322b1db1665280d8173a3c10c03d717afaad2c17c517040f7323aaf06f2928fd4939fcf3e04b965102401393b216d770ae1117e16e0505f9dd676cc6fc12e47b62501a48380b78efa829da4632942fcc320822c77c8a6e7207f13fc21fb3cf46f939c0994fc6dc913e1cc9983c84adbf8a4e45594da931f224a77305bf02c1e38f7be5a9a93f9645b9af188f28944d0c1ff4ca4fad027acc30a1a08e67fc43f73615f3dad0b2974b9604372e8cdefbe88f6c0cc844ad6a77ca871fa5c7e97d2fd66671e60daea5fef1c768df7fefa939f1584c1396307c9c2b7104d6febb16e989e1a7f855ccb91e5614137cef542be6c9661b56f1778be9a28393ff010a34fe7ac7a76092969393d40d48f4ffd3099a393849b4a7330ee0b7cedafa182ed19227b8f43ead341d8ef5f34a6ca872a96bb8bbe1dfd3507b04f8a1ac27f3419a68c4ed44054b9b4198e5cee9913ef4114d7d6859350c181e32353c5ffa8f3c86877cde368da7cccc6d4b1d03c56c67b7e163844b975522ba9e712d68397d6f847c05a752b83cccd1b39a342e8f13fb7cb7e76392b6e3c56d36b4d5b5bfc65a788b5292903fecf657c16f4f0fa8526310cb7dd19efd982719cdafbc09cc759628f86eaf75f6c18c63204e41b7a601b2da8d3d9b3e2e2566b6262c032a58525caf24248083b29385cb432a6039598f2342653c4af307dae70b4652868fa0f7af2fddc70b463b86a83facf54b7145247e2f02f996e9eb66303c8919b5dad23df8a846ae7c7a1d2d0d4fd078e99b204038e3563e72b1c4db4b79401b76558724717738e2276aa1055b175d029e87cb8be5f3aadb2a827cd3a55eca82dea64138133d1ebe8477a0f99bfe8312dcf4e5f0df481cd416371e3278f891faa1ac4617cda399255ab4e276c81a6b158b84503d3115a33f1e207bc70aadfd8fd4027b94d2358b7d52029aa4f12e845de31a6e942f58417ff3f37a909f4dbb95c45fbd1267502dc6c4b3d75869d01bdcb6fe7a62c502b670106e3eda5cf4ab7f6d43376b6be29f647f47c93105c17fa8ca86689ca14f7b33cd811b8a2c72674eb244fd72ea73d8063d4502c4c423e08f527c57ddd2f4e49ac20f98ba1bfa13bdd8346b671eae2c66a61a299c13210e25dbcf46e2d06018abc26f2b028b0d323f3f48adb103aef4c22f30c295179b19ab90c7f128f9731fe4419fbd3b09b47be55cfd7187ddfa6e80c9351fc4087cb9cc46a5def913e56cbd91dca8a098e8e4c41d5974fc5f41160c33c6c6bacbfb99b554cd8edc52883b86a2861b53ff37152ed1c03fa36c9b8d9b0d0597a6acef83a430ae29a36599bb3d0d1b4b7dcbeeff9447e1b9b6aa855e82ad23605ea599894deba9716c931d2d142db75b3cb42227a3f9398c37c5a1e79d89fa4837fc5e90d3dea1dbfd5cdcd418ece2831edac95164b1ba2c80ae4b837980f4fe8dbecf81f4bc675357c1410cd26da13b5b34c8f3200b6799c923955d581c57f3fb2ff5b12fbd75f103c7935bb0532fca3fdfa1c1601b09086986a05d5f69ac6ab525b317a7611daa87be2187e936ffc9dd1afa45bc6210b9065900422d30ceacd381359b2ae3a7345224c56849ce5ff0851dbab142a0ab7f0f43b6ae26880582a6e69c5d6b31aca3f93d6264f3dfb4dcef8968d27fa37853b0814cfc51004066e90437f77a7392ff6e7e3ad0703eed06094590d1622037c5d4d5c3e802b81a3faadbd54afae87c2e3699e05671abf97a62322d24735f84a8de970468d92a270d7e2e8ba076c4112bac4306392d72aa194d4a4486f10cfec1f8729b904143208f770254497a228d148c9fa3954df35d34eacf7ac4eb31efcb7e61ba69c4a70f73a5f74bdf831eccc4022fc3c1de6735e517afc9ad146954d3feea4dc5ca13fe46ed330eebf6aea17d3436fdbe0c5d8c69ff427d07951cff7f5194dc26e33d3f8a8bf8990cc6a2205834ccf8f5b4c5234593d0ed7964fd032c14bd91af102aac616b86071b09d3e2e740ed76767f970ed10f9a3737c5a0721eb26367c992dd703f9f4dcd0a7e660261f393e0c6841aa12d66563fc186cfe4e7c6c2d1f45aebf0cde9cd7308f96d9c8ecb12a9bea348b0891c929c62053f4ff521322ec3f92e48d3f996003eb3dc8b40d697fbc44216d9387d5c924f126a1722ea99b2a295eaa71c1adfaef2de6de35705f59cdc5e0eff491b86e8337f3578677ffe8df5c805b03546422b584d0e6f65532acee95bc9aaa819b8ef53fd25a2c118035daf71df0238ee7866645429dbed7b3c0e5736fc24966dad0208edf3904db064e7f8a4c43579786ddbeb2822004f87fba0c05303e26d594e2e98a943b933b8d1d3936a8affd83f6fbbf114f43cc831e84f8e4cd342ed880b3603a9a70769bc275d338d1e18ee1b5a071f4707dfca94c88817904be2f61d7185be9f7fdcce2bb2bfd6fd9dc064f29c73dcc54f2afcefb4d137b2c06f29d6b116c7cc822d22952d4e3f9f160e24a790cb9d400c86bec4bb91dfd45cb9c32c849c26752e4324c7752d898b577e5ebf42c60ee520e331c02d2cd224e6b76388069d2efb69248783917ed79c2dc32497476d964563ba714a18b5db9ebbbbfae74dc6c0d5d21c39601d1f23e08f3f4b0b2c2a465a9bfd62571aa4c5005420d2d79c310c50e287bbf7cd495d95ce709b4d9f9a7b83c22ddb102892f971c5af3e55c37421f4c0da9144f5fabf962434d1b4fcc44ea8d397a760d7e483daa6d37d1f0a22ce239d753b95f0bcbb561aa6d6b47b18e66a89d4851508e5415bbe076df147f6c37d1000ac742d0dd66d63e21a18732a84246ca1d88d07a013a6422c7a8f942ddcf5e503b91d94b030eb6affba07a1505e638fa2b8869e6919639583979f9c7828c4d469ca45ec6ddd2da17c88b5198a59ac46fee61669b1a66d7aa1a20d93a365ac23bd1fb610470044b0506dc463424f01913ab0460d92f3eaf3fbdc95c3fcc08969f7a575ef37ef55e73719f2414a4c63be66f7f100bc49bbcb2ff9fbe1eb68c5e42925ca820f8b540101228fa091cf44d1836b524a6af68cfb30d225e0b72fcd5d4483c230068994380329c12f69ad6589ea0082cfc105334c3d7a5d120c9a91424be4181f8b2d7a03ae9777a1d6bc2e048045036181ba6b5bcd0b03f7d45ce0eb7509952d2a91cc3f03d5f085f46bb37cab9a94db07daedb423ff1b3b8967cb908569d4182572cdf7a806e87b9c19156e9eb5c52fa0467411f604ef11259b06cd79524ca512556f9b733343c5b718de08987f4ad389a5d8c21053dd0ec81c7918668bcd06233b1212c696bef1b04554274b27074308f4807b735662a9193f4e03d24686f183a43f1f01da314f96fa94a19e3e53251b3a16f1b5a929f8650650e6f07ba3c699407f0f21dc755b5843de2cc6c7195435e546fb2c8c4d68092d7b75db30e9e85cf721a1741567de294d6f55d4b40713681276731b93c1a3e0637c40ecf434daff2fa5af1294beae6c1af1ee315ffc5a2866664ab2bc47ac36b43f7e239f156bead9e3f5956910bfb33daf8c2c802e771e33e8dfb1a7e640eff1e1736f20e7dc0af68a90dcc2204024b0515286fad7a30b5ce12573251bcccf58c236564b8e4117043dfea53a726842278179b13fa51f273789bf4799c55485e6ddd230311f0f5a12b2a97a5f54162a7a3320b597f7423a4810c741945f3814212503b9c5fa6a79c237d789c55376100f23eb3c9825960a2b1b542f787b3bd274f73ba1e481d8e8683b0c8fff05a07aec6591d0a3b220bb357c68eedce5c28fbb686b82e9db8d7331eea51af2bba3a52366c5d941df046c469c38187ece09a3b59bb9ba0b790d45eadb50ef622573983c8bcf8ea4875ff072902d47f29178010c5c1c0cb0c4d854a033889d603d2e7a78e4ef13adf6993dc94525ade13aef9cb27f76054f855bfdafb6301892e031618f6ffb0aecc88adce6fff58f5d5e4616b973e44c6c462ce2df4e5fe899ac53fbcdb29a7b49e504ad410472fc49725152df23dff031bc8e352196a987efbf34c2c14c72c88494287aed0e6553140d6a61cb35826a8daa98292b399bc8bb18f41bf06c46bc6acf86b698769b9b57992a413d79b43e37a863756581e56eae6e199b780a22928447ee05c87bcfee185f068eaa5391065cd6f27c0c6bd5068951b72ecd8f36634e256dd50baab05eac1efc6165ad948fe0cf700daae0bc9f8d25d74772e958fd235b7abf0016c249a0e485147165ece6046d90096f041c6221afdc9b1f546c9746174d7760981d15dc0b786304a0f9589c36a0767027b9671db990885aa26b4606caccc2d6d6594011e5591625629e01973b6a2a9da123f7c7bcf16b46f60d2c3baaf6230de563cd774995d90b1259cf152c6d17af688366a83b181ccf15f04b8a21d2944ff0cd06a1b4f3ee33e906907486b2b820eea4ea97dbb4c7db61b2cbba7f70d2cba358d40e9d84647b957aee12279f8fb695db978cfd01e84b6c32f1d9857f81b5d109bf4f2aaecba12d4e81e977ae24090b6d1630dee6128fda7028d0082c40526e1daaf7a06427359df16172767482e60230bd25480409d917160a363b66cdd7c073aa836c84234c040e7798c157ce386571c1308c5596af36e68b8fccea36aceea4fda3356093b7829170031a49cc4585027a5fd97a53c9272f7e6d42b980edd33dfe7df3d5c06b9f3e078cef73b5903863fc3bcf0f245ca642cb69c251ce03451c927a139ca48296f142e8508781e8dea5ec015c92bb3fdf823475e0949fbe035481cb74489d86f7153e2b800b8847943ff219a957a040331e4fcdc018efe8443983e09ffda5e8fc49df128daae1d6591b06b4321e5e6616bbbe268f90db92f3dc3ac33ec0ddada831afe79854bb0a5bb84e8ba8e02c8a95ade84df29e9566cc213976052815b6bf7865e99c68a13be3228c11695442b4b02d2dcaea5cbca79f8f59a211b75f833384200859ee8d5d062abffb6e34f2c78f37db1565530eabc182f71277f7f4037d2652136be23359c25f6c59bf508060dc3e9e0586db2d5a6f5fef0b6981abf741f9688ba5c94985a85704dd0c9127eaec8b722b604e3c98ab201dd61efab0bf367beb71bce4678f74f13d1d9a29adbb3116cef87edbd7e70de7c2078894520fb06a8ebb794537c70efc416d44e5df9c397d151172ba34324a6bfee87a5e8a5b9633ccaf898720559c7c817ccc63f6c8a4c80716a151bf4273f6be93935418253ee3d836dc2b189a4acd68f531f8e472700570d98ba0d7180d6747c4ea4b8534bc9ba86f5cf2942a57c06d8bbd0aa887f457505103ab28f9090938103c0a57ecdf298d0e2716bf4d162366d14375d4bc36d5fb4be58c83be4c50862e2ce32cbc1d91c58894b422f07f498dd0c56992afdeed69ee0c4f22a5d5ba6971ca9c25dcb644e2a2de1430e353d6ab019c994164a6009feb4c4848e1c45c1eb56529b084568377f0fc8a332ccc1dcc5bc2678d17779760ed9edbc2a9d6a33521fc2d8c048bb6470d715498bf3a0cde3bebddcc1e5bc5d2305dbb3b6b49a45c284bada41e298afd39444f42cec657953edf6a86a79836630d0be5b38b77f2c9270c342c517c6f32dc8b1a1d313bfaf9b3278d8cbf7cd62189d32948a2f7bd06b92c3e2fd7b88dc59d8a7fd7520b3b24a900657413089ba5f5621849fddbee0fd28bc5e1774c3f8d0b1b1eb136d4b1d8b6ccd9d73a67fb60500e0fdd6989e2161628a12a57298ea2d57b040ad27e2519e6564508488ecc197bc7f3bb1873e9d4ca090366dda93f5f2a3319d3c4257f58b9a322c8a65f6e6813f76864ed20586fb7f3f4752373f118d5fc4df8c0619a2e53fcd8a05b0131d480c340ac4da65dfcb5fe0e974de27808411ce1ea60de0cf1168ca362b91099e7aaf4752166a177a5c4d9dcbb3596f0b4caf01852a925289b1a77623159dfaf772fcb0ad9ec0cd145a474433593982d374f9ff6f4acb6d37c50c4160e4e21fcd88065ec91f9d0b9a35631e8bb51759acc8922ab331816eebda747b9d0ab5a839ccd2a3e16ab32f9f16082f6d612a8239fa1c18388bb61849ebfef810f45e3ade48f988a3f1de44725d8eaa9b5080996f1cdd4616ac747a379d7be10375e963e84e7601272749abb3c27e59504a8b37cbd781f28aac30cb890c4fed41d17ea21f8543b54622df951c2510656b9c13e799c9f5dea59e8c0195e7b51ee5fb13b46bd3eb8b63d8940fc6e2d44f5849cde76ec1295844285b5816d48e917631d460cacc9ffc26ce5d34e6ee68ad842197bc1e0068834769d9940ab348fb99b24aadfdc35135e4055cd845ec8db5d030a6fe551bf7c43723ed7ee7058cae39a70e3edc866a302be72d7492c9f0dde0d977f71620c98d1a809af9a51cfa9d0fef8c54ae592626b49a0dff01481aec0dc372be046eee859de2ed0c1b5e701240041a04b105f91cd88f0daf8df0aacfd3bfb6a063585bd92a7798fbc4d4b69bfce0de05bdb9860c4f70743fb84cde44e5578cc5c856d495581eee0e13c2ff9ad9b6f66b4d768dea06a806826c387ced5962bce72be80f194b0bc6cd3a746184314f2cb7cf58cf23a1a61874c0773dc2877f0da346298ce32ead9cb492e3bafa2aee9a876962659ceca49d01d49b894c32be21714c33ccb67f0b7af881a4b1ca9ea41aa7c77973a8079a65430d76c7843c3af884384a216e8fce2f2d62f90fff614e957c06d1ea5399bc9fda45bb050b4f1c59fa1705340dba10d343eca7cb31d80e569b04b073b9133f264b77d302f9f4c47785ce2d67faeebe6d46975f49c62164bbb68289aafd44e1cc066760682642d531e43acaf068b3cb360067291ecfdb697ff5d7b37a86ff6ced96176e308a65dde5ec9ae198c3d8708291571fabe2beff0b69f238fc5118d8c527b1fee4e1f28016dc1a81f18df2357122a4ea48ca19fba64594e43da1050ff2ff46a5a7eec423cebf3df4a6c35205ed0e502097036c8b534465c8450d39a42ae04d616c47aea16fdcddaa7e1aa979c67de72c04a1f478e8d9b4b30dea09971cc8ae0e24f2e72603fbf50e2de530e6a4277d3beb9d352fdae7c0be05e8a3cb9ab67160badeeb068e2a137a572db5190aadd2fabaed7802c076aeae35bcc0c110902dd9110be0cdf5a4ab4f0fd401d220c082170ec39f517aeb54a0b88bec85f754bafec7c2b42dffd6639d88734caaa4d9372e38eb740100d409096e57bab122bc3ef9dfddfeadd39e3d1a7bb8e51d397ce537e61af354ce6c6dcc511148062d93e7fa44da7fa1459427213af4f33dffd53311db0a8853d6028444934adee7509ed8a9040cb5efc45b59d8012004f651a317df36c6db5b5417df0e4b5bffafc37cfd86909dbef2e9fcd83c1d63a0a021bfd176bb9641a244ffc22f59e3aa6ad7dc187ca423911640be0913a8e7d3542b15b5f3b8d57c4750cff5650c3bae23bca48240e335973f6cf454a29ceeb1f2fc2a8ad9dec35d6c58a5eb0a676fe8ec083e02b3424dc36a4efa1402b70349224270df5610a1d5b28b69eb56be4d326779cef905f09382d74ac2e250516302115c7da67231242b759171d1232d04a39d181baa7b04a993db2ce87b997c17f0ef0f256bc57c96f7538cf9df05fb33f1a4938f6365aafd99d391ca25ab741712d455d13cb7f8b649d25b9f31c8e086098bf0d21b62f6adce8fde05dea53e33f4f030b73edf11d74a5a84473ad6142be0959bfb14551cb2fbc7a0a883717735523d267bc1355260ae97bdbfade18b10c5ea10125c2ceee8071a1537ea364504950fe67612becdf904bddda526a7aa2d4a5a54de4151b57fe768ef3bc7027050ec829b1b171f4765a685fbf63f6f2d8036c4ca3a2993a32a028b0e59c0136141b992a2f2d83a3fedd4c019c45e37d678b039b6fd27985a6e8f3183a1616a03b24981f3aeae6e5514ef30fe05a0da3109b2e22c8517b581a76ba7685b79c1c32d49c166b640e23d4845596047e3e76d97a320db3a17bd55053fdb609738f2e28882f7c2813011a3735524a2fcfa40b0101dd37dd8f9883a6d7672648abdaeec11f54b9fbf0d674fa96fd2d06ff2f77dad685ff1588e318381cef7756fcb8180f67e9553a051e3d2d319298ab371860ade23bc3d7de30e978f7e18a18580fe8b5ac66822aeadaa9f3ec7526de3c755deb9c71b4320352bb336862cf67c16bbad113b12ea2a312a6c7a615effa555809bcd6259932f7f59f0666d4e6594295a5b595894fc99054032fc52e8ca71a9920eb18d5a5190f8ff8e78636678a3fc4ccdf2fd2e6c35c321bafd61e4a249f71dd276a1b39313e2b3c8dc9d040a6127c195e5df58ef75a0c8d4ec8f32f54b786eb3c6960a666d909455e74aaf80f66f1797077b60c042dcf1101acf93a346812f6b019fe727091a3d9079873e4bf7291a55b4b8ae2f0ad12ce2fc2c283380b49f3117b30bb471922b3e9e6bd25fa686c57626511e6d8eb78b9faa5e79ccf5efb768bc2d34df4d73152f48467dba9f3ff925e43d0871f87963893ef4ef9a0ebdfb5fe93a92ba96d248364cf5581cc4b2f7929c8f4cf01efb1ae12d7bb97a02aabdc08f7fc52e1a6395f5463148abbb4786dab3b1dcb90efa902edf6a2e7da3d264e4b6a59ac1d135c74ac3d9fccbff95d7b4d7d7bc7c6966ca5c3624cae26dbb1cbbe3042cfd0c20ee834adc8319fe2de7a3b9c2cda3144c21971eddde62211ac46ca5e3a1fbe403f78611cbfeceb6403bb6f7a3459b60923602ad25cf7e047becb9443a1eea49ffa8cc6855966ecb72ad3b74a363f803c7203c5cde66e6b537dd9b6ed5d9a9626f0c1cc5fdfd8feea450e72220c947206123dd10d897af1005f16ecaf058c3165e39f4c46a696a761c6e89b31a93843c4b1fd68d27f9297ca17376c22e41b18401fcbd6e985b4e273347743fbc535641d9d1bfc5e2b72fb33735fb04634bed21b415981135e29dd8d3d265f12f97c2e46d2357807f09d2c76d763e7129d467d1bab98a3d3ad91a011a337a073d74e857b3aaa33c24068fbbc8156d8386eebdbfdd84e8518e18216a7d1ffcc04f941975cdab6aeb4d10b333e63ea88200029f5cb86aad65500fb5bc825fcd7dcda38f29cd49225d9bc163611db97d1610900355e605fc892b059bcf15caebf739190bc587220b77717f77a67a8e9ffae8d7af30526031850b8e47319c1a55beab2ad01e72cf94c7c72449e755161f8cc5c0ffc3817646b808f35bfe4bfa165a6688eb24df61a7c4caa03099dea8b7c83813d05b2c0fcc24f468cecd1d425ee1f215a0c5a4909ea13ea3aec16c75a0796533611a4e25bd6c0adfac0e05140a0a01f49876c014ee0a48e2b28ad2f367fe99935a63afb548bdb2aee20cfd1c0c5efda2b5c720fd8532e557c4484f3f0f0be6d32a0d696123306d43b7a305deb5ecf8fd87449ae729fd02108ce06831a303314652c6412d55019f081d09063e2e0a83c29a537f1f573398bc210b9453e374969f023986c693c4d238a0856a4637677b8ed9688c3c13143b3784c595f05bec862582b0f47430b52f23862120b65f0cd383e21ade178672d0a28a85f655cfda63b00aa4831c65b59ab33c66f85bc22b9670ef5ca4aef23c94f695b9e6366a953b6d46c00616b0a15b3631c6ad8713cff1aa2bdccec3885ec02027cb7562d933277c4102578736cf52c72787c094c80e46159b601fb60526c766dbdacf151621b66ca1e868cfe1758fee344c63aebaa5058c29e47bf849d6ae34f7f015422d214e0f0b7b7835b6bb5366ee76cbd8045c7472c23250f4c77e37318faa8a10fcf3f076ac1fea41a48846a667d97ea528bb7ca92e98e7aa5e49f72b6ec88177de7b45541e0733a24c49f5b2a7894118b7269ab0d5ca582a19dd1b6ca6d644607d58f75cb53203ae93ba5b029b0eba5c43cd9248bf910237f2656da3c84773192d59a0d60b2a3de400600adad48988b1f6f53f3285b1adcbd90eda84623ce2029b476346bed5520a6773012f4335f825f4052ed839119bb6e7e07154eb404af28889313450caf511b4d0a6f8711ab3da4a78d86e49651d6aad602df4fdab23c00edd4f6e920295ee83258fcd25aa880bf10809ae6a88a2b6b366a42d62468224b0df97507cc019e0e92671c3b200e48b287472d47d0ab266a82f9eda8a330458f80706445614a6c1db508499d0d3850fe4b2c7a66d832ff96ea33f3b607eae1fd6f314ed730314b015b822d360713feaf9aca6e061c383f309fce2ce48d67cb9fd6b12a2602d6fe2e7a830d7a264d8f761497d35450cc2ea24e6ef16400b50df2d64f4ad58d83feeb6126a203d020068e970ae78c359161404cf74b3c2b72cb43a582ea003b770d18c0f72b241af3ca12d39af76368205f8f7732e45815dc668983a8f6fd9549c3d0adf2d98d695eb5ed500fc2ae98a41fd2638c512c181c4f2a9b6760defd716c702f0dba9bebee64cb80255de18a5fe6f0aff90bc0c0f03e9f9bcbb76497d46ac128c6eb6e7a3dc61e040fb0028c2b6fa2219803d17f9f24c6fba4f6170465e9f4e2cb4bfb36e48d0600c1c1534f5c9214972d1c8f057fa0eb60f00f8df63a5c831735de2020f6bb398253ed4c6e88361e53122774890973fff80c00e99997954c02461bca2367c6a9136a5fb9f36853188eaf18a2a9a0b126e2627061b4d64ae851b71041506c2276a8c381798f5b186f05ae57644022279f403d4749b1b6bac57a3c386f07bf1c107cdb2735f9e28f2e10e2839bf979630775e04843a117e716189374cad77b2b921dbcf81afc3be46034a8a1551b19cfa87bce2685e593b50eae8f89d9e0bcb016ec03b4849eacba61765b5d260848c3a1c085c669667f30cabb99c6d288a40af0b37ebf1e86cd042038cedefc442407c2f0aa9657653079f80a7b4a61ee47e5bd67b1bc2a013ada857444b64875287c8384c5e214dbddca37e58c68d74a7d97153ad713bf462771ec5c7b9406c216dd5e36e3cf7bcf053ac46d54ec1b6fbc66ee460e43004eb0685e9bfc68082ffcc239a2cb6188d164beffd01a38d6e6e6eff3c143821d6c5754dd7eea3ba161bb5866ced7bc781b77c17b67778ea223716ff7d6495c2005066bfd65a01b65d8524d85e8ef5fd9a35f093d261e6e89dd700376c588a7827e415ae231288ca39cc20dd628362e19ed6c5ba85f165a4decfeebd79f3430483165a0bb39ed136fa56d568060c0f8dc930b0b24c4c314be82bfc991d5631abd88009a81ed94d0c55ec30d813c5f60a32e8f48a3f862201dc94b2a9e96e93b6947e9b75bfed78ad47dd51362ce956a35a2e0c4dca88a5f4299ae61e9f3bbf7be4710c26733510d77559ac4352433f02c17b6f23301191cbec29d335491748227ff6d090145af439c556b7e15869bc27cd4b6ea4bc970e8a8925c00a08581cdc12aaace91b2e4a077af260f3b535adea677f851045fb599d60c0f2aea876393ad087d20a997f9501f30f60ae0f84faa6ae36caaae656135917a432604b6fa78468adb30ec1fa2b8e055140eff42e66b6e97eb2fbd8db47cdc07da827a0b8225ec3fe70d6271408a874ffe81f1958abe537232258fd49e092b6da494012f1848436d2ea9a8bc99f8ae1d82cc113f27192212f34e81c4886aee22aae9c6856f930c0f9dab9f43c3555e877f56d062e55ff72a23e04034eb3dc4ef9cf36ce138567416a2b71395e3dd49debd32d13829c87ab729db26e03bcf6027f4d01038202fa2622e3f6b7fcb56a4137be090128820c254ce27969f8760816ee8a392dd8ea93edaeca8794c16c5c1c433805ce8e88e97c870a6b176ff71f7a341d8f1d1877aa179dd89bcd56cde94e874081e89e8b5121e5f52d94e0797f0c916cfecb98b851b5059265c431e9c5b7fae09dd4ce9d794daba6573372579f56e254d905ec4738476e04e35bc6e6a57dcfca1d1720717cc7c7856caa1e9c325dc2a5948e19df7910728781b4ca67ac65bc9d151bc0cb7a970041d2c131e8d88ec16de8d9aab0ed7b5aef9b6b1cafdcd8491e5ad226bfa4176a78ccee06f807bdc8d566db1bd55f3506cf76caba8d5e7d75ff4b2e666ecaffca952656f1ae9d2498fc7a1a9ffe60abdf2e63849eb2af453c15ee3113d947053b92fb7263a9b6f90319668e1fed1ef931d60116982d91aa8112127f76b954bfce9e0051d8308efa6f7c55731cf65863158439740e78abda2b3b1121373d0da118e79c4b24252ab07b5031a472aa9ccf5e4b939711a479c3ae0ed1c26a6779f1b613b3a3a548b01c57e606d48e46c5fa3ffae5104b26c5f44c65ead57715a6b4ddb85b3ebb015c8ed62f6f61b10efad77d3a1e75862d6d1cc6dcb62f4689f6c78f750a099baa4186eb08a3e0bb3cb3eaff5e48aac0868173ddee1d60d2a2a75534b5e42727bbaec54ad030138626257471c445539cea93412d83d90ae7b8d2b0434d5f8cd011ecacf75dbbe8993f8d546457fdcb7d63e06a153bfc79b9237f9c7d088c5420d09ee7bc47d9feb74cb67f4e549b31739dbc232e3b18032ead842e7e5ce4ab60991f6b55ab889c3f4a88470d05bda98e45911f9678ba7daa124c4f8d6a2da28a92c76929c1917121d33688fd817ba9061f839cc6680145a2e84ce4757bbecc35b06738c3918b0a5210de381d65ec05b2a091a3697e5c33203ffcd63b34f0b803ebdddb6c091112c12873db47ddabce331e632b244b440d8b460ab17528e3da17446d4422898ed6ed7bd995843d22b082eb89aaf323c360f673249a655aa984e5be68e0d779c3cffa722145e800837178ed7e0a952d8b9c8710a782c6b1bc363f5ceae3a3001b0d12d12bb48dd5f2611cf0a3bb58fa8be35f7aea74f370a67f0e8ed61249c75c5dc79a95bc542acb470119fd7d3dff3e894df470b04e36ccababc81f17a25b4c1f99a486fbf25255121dde088aadacbdac2af4575f17d3b9a7da2e785bf19386498e695d0977046cabb928484ecfae03bdd4f75e88ecb13921ac672fc761eb7bf6f57a98c1de07cdc3693628042954a1a075e2bb3100b60f4c063ee23815f446e8e9fb112a6da9d4bcac9346dc649f0f4e270b0b80e7b4f707c245dc2652405c7749daddcb25033aa5be374dec3b5dd2ebfba229dfd3ae46462867d3664e547c37a38b958e1dae2942d6de1da8f91c050203aad2151f46c37b726c1cfa32d374340bde42a4c1948f819840240bddc1adf5da9ff6689e93ac0cbe6e0f21ee6f540a4b6540c3b064cad8dbb6174bcf8c348844dad8b57b1643dd0ee9a4a7bc2ac12f8a519af7f3c6c38732b1d6c3e66e16fbdb9214a8a490d0c11c54472944a33d2f4b2b14e22ecec2ec0bae3ce4824925b08874ab4cbb8f11d817d5d5e2ce91dfb0ee2d200606f32be5af92bbecf88fa9ff2606b7c71082623421af8ca5d185b7b16803c1203cbc707f7f7747295692d288e32654c78227c9c584899ccf02bd7faf1136bc2caad6b8712429b95b1d0cca3fadf8c96e98c10119fb9ad662b0efc4269428aef8a5a92cd2fa03013497d68285a6c5533dfee97d0b9de3d1a47ead44c285447a469b7151f77fb738f9445e87d92e9b2709936563499765ab1ff1dde8108a1add47c810b3bd4e98259da2770e8239ee8e0c0c619014416d4981b1c1911ef5104c5cdd4054ef28984dfbc61498c89d1bdc7e75c0de0497c9dde9843382f54af94152189686a4dd46995e492f896e88789695c1f1313a62bac012a76891ceca019142e0f76530fe030f4e721a0c1f3355a51547b152531cec8324f0794de0b2893e661c62d153a39fb69c33735a0833944afc666c272176a35bc58e43add2ec7a9bbef6b5f33ffdbbe420f9530279f06d9e1d5efafdb188cdfbb4594f8d7f8d68ff9259d664a85b418f88e0f58f8b840b0763b6857787ee4d361e4768d9f9ee3b1e2039af25ee22e2a882b1c8392be767d6933d6a7c15dbe6e15e73f544ffa2af96c8cf020449f9da9b21c8ec4e576694917f52293f8aa44115e3b4d23858a7d70590405aa62f7de12e144029486bb38f51f33e9e0b8019bc1fc9dc694de3f1fedf4e21e7d29415126516ee5bb3638df7af13eceb05e4406974cc06c127d8387af3fd553d0fdfc314d450caac66d107f9931c7b0a7a930142e45929897bd0189789fd8e43eb024867446774652c3baea2752fcafb93622dc237af02db340d312131e7e161d7a7ab15400afa1a3a012d7354eb37d20161b4268eb6acf0a78d718ab3d324b4226074186e29199dd8e6ed01cd31ef8bee765e607ea1777ab862951adc995e0c71eea0931bb8e75296d03d65f488c72fff2cae088cefed41256502fffc73e17835c25a6951cecd9c5fd914f64f426cb15d155e01222f3bbdf749508447fb9d621cb25a360db99e8002c26c810215dcf0ab51739a6798485bf36f6223d010b8c9f19253e2e6509300a14dc45c5e3f6a6bfa7687158127b730edec71246cbb9cb1f1a67f3defb312472b79a91125c592cb37fe56907ab361145920079980282e62297c9ec22c2c14447a9bd885a551414cafc1668af809035ffbfc15e3d94016ec5fdc44e0950fe524197fd3fe98f0100f20772aee83e941b6db4c165d7211ed34f369a52089866a5477a140fc2feabc61028c372a3697ae39776b2fe95afa9c16676f64c48d3e534ba2566b5a263e25771d0a5519fca676851d538f25d8c6027df2d77b0ff85b82a70cc20875e52a9776a5336e747db08bb8f81216b98e39f31ee811a96a4c5a13bca63343c3c4ebe60958425412dfc3beb013fb485e574e9633d5fdaf7bec62aa3b6cfe16c8ad846745b6134d5603503512b8c964a5980c62e0673e4f3c97427f2b9b7421416b5d434cb39361ab5405e1abe4e5c8e9f9be986980be54dc25bcfda6e692cdd41018dcefc947691e239dbbb409fc435a560363ae79fc35c2fe79ece8753ba91ba7fdfedecda8e3d0eb498e9f1b5934f5e1ac39d79de3afb9a1af7bdf545cdb0cfc6aefb0aeef7c159ae88b1ad6c43b2dfa69dc34bd7d332c1c28becf50d3b7721f918aa0b96329e27791ee91cd5434ae5934013c53e9a90cda8d4101880e2879e2db381613e56659dcff27786d2f6d504861a284c9956300cb147e693a2c2128816777416057de4a08b3b1900e1ca1955886d2c69f178917d25246959190cd950a2732a95bb6374e3a40ec50ba7f36779e2e9eb5448110e78028449166a2f291f4370a31ebc6e2927cd1cbd93fc37fe75fe54eda64f06cc4140f5578d59e3ff3d84d896897d78dc5325ec23e5bdff99834c908296db8cdd691b388fdd44a5eda13fcd4076edac192c878cdc22b4be52cb456b1ff1c2a80e9459b308e4bd1b6d86ac4e6585d5526bb889693b4224f3d48ba53fd2816f6b55840db26d0293a7c700fdbbd1527da5a4e2b0b32169d60999adb8cb65039f8933b9ff802bd4d169d1e08477c8997f13de4466eb394b446edf198a6e767c86289faafca7e4a1500996a56cf13d92eb921801d623438453520fe15e13c708411856748f006d8813966a77f94bcc4c2d22718b33cb71434a706792c8c3f484ff3592a1c4e9af6ee7991f1c64de3d2219131b3345c9e2ebd25ee6599c11536b7c7100ff65d08dfe9d409cea516d073e95c37683aa4253d9d71ee85eddd86955355e5762bfe5c63480a25a4b77906915fc98f41692d760383524510a7e8bbf55db6bb7a53bd16ba9b99ef8bf6b544f2989493de1e1f7bd931c0f19b8b9fdf585020d461206163c5deae4bb1d244ccb27d232b5dd7098a604fc8ca8614c61192b29f191aec419eef1c15473d9da3e59f54090f64a2ce717fa97c0ea3b81d4fe2e314855c49d230fdbe550a45db63c0dc37d20bd2332b45e07ec3fe45add18dcc7c306668d55a8607e08cca32584fc91d73cc329d9197c810f968ca55124867bc73288e96665f8d7c5dd51b971f9142f65f9447b6dc1642de5b15cd55f73f7983dbfee84d9f9a589b11bd9bdd11d7cc23be04c4190089c2e90f63412831fa0ea893c0a735708a6dfdb228de782fd2106cc27e85df208e4168f2100f54e8f2b47f7e4d8e4475c754f8d438bfb1c55961d493f01f19bc86394aaaa5d7e8f333ca219418033fd77051eac73c913fa17577564a194cc260be4bbb2dea421661e463530cdcffb684f12396f54b18ff407f2ee8de1ff0c5d2db2e1962818e1f6201088775824cbe973d09012db575c84bb4f28ce28b327ee70e8bb49b1cf8ec1475400c7e57ed48ece26577fd357edc2cb01feafca9c2a7b84eebf452c65952f38f5fb77bd2ef27eb613ecb2fdf05fe90c910cdfcfbea59bb1b82182115a95b4223a801fd2029ec80c64ee02f76739e9b04c24c7559ca5899155f2b5aee1de3881e5c2d4f176f37960450ffbc7612d347e7b9f8f326027e0b90a30c86749d09b753888d0308119e9fcade9bd65708a47f9ce852575518037a8062c1792e4f95c6e1f1dc481da83f20d9f89ce4eed26600b112f7d537aa45d36b81aa3cd85506acebba9cae3f47c40446c33d53308eacefcc591941543fabbb18716f9d29cf83410979ef6d51e58ff4b6b8b25f7396616331d77a6d6d8c699cb204dd768f8717935d24de9fadb81ec7196bcf5893b54865c8e385896aa5701f51f07ac866e6183d600de666c461768e941a1d45e074482845007b87a69ebc437862436aa43f420ab9b96fe0560ec455e57d39e7043d0eaba5baa6aba0b191b697686ea82e6188a0b91ca5786827f11c12c9cc6ee93c7880d87c97c271a3174a180487a6a4cc85c877f478efcadbfbbe0c6ca48b8065052d55463b5cabd9430ca9b584deb2835938924566496c077563efc78f77eadf0470111d0d19b97dde34290099164963eccd80e2eb90aae754065fc5e672395267051e9bef113cd3b207d3e37e8cae3d0e8128ab277faf91df948bcec4154dc3e0ff2af51083694fc86e47705d0bdde0ad99fd3077d2c22b6ab5cabfc8ad426924346730ff5e96e7aafd044d3fa40296dbadf4e7e65f40aadec1cf6505aee1ed1680f6d158d7caa16ad8927695c3deed9a4aba1d525ce92116893993d1225e582e2ec301bc74bb5cd642e20a943215ef80c5c2e8bb049a5ba9e9a2283f8a5ebd0fea0e02a80d534a2a5757bc7ebd019ba4d35fccb898b3c41da62bbb5f6fa95a70676e37382188bf163ae335197247a1f9774f79dc1c62371db33db17a8dd22b595cd19e94b488df186fac63e8c735edbe3f5f638aeab1e9ebb05fbfcbcf431bda80c2f51eed0b4032dcf738a5ed22097962da1ee25c7fc0f32840ede3cae63f0fdfafec4bb02e4f1b6bd7377860286790f169bc3d9f6acb3e7b81d9ed4a1ef625dc160e807a681bd386da5a169d27d6f094225065b695e90f5f3fd4c366e8754e1cdd4b43e2a4851744a34dfd2d31a2495c382a1e204aa9ce36b6267c653fb8011686eca1e1ac7733bc4d9ce62cdd8f7c429bf5691e9a5b6276feb94eb1cf1f6a7e6f4d115f863f073205df14767245453282e76d832a42334f10aacca2657c5471aaf4f0191db490931390c2cc931119ef27e58c30f808da2364611854fe6e279dc4a03e3d7263b0fe26f4754c0b5f8991501250b97dbaebdb5b5e7a4a4d3925fd6bc3c4a7d1eb0f6956b9642542591ebd36e24fd291377bcadf2d3d2ecf6bbc5a77f1abf69e297d3d9a4ee730f167c281dc3c5c30431d156158217baf990760c2ec17702eec37400f6338469060e64d5d48abe781c0bb921929825e52953245abca39a5c5cd47bf99b6dd414631d61a7d96266a838df050ef1e4c82b134909c344d1539621b09fba7e5ce21d6d13b7a64a987c31df6de7e0e18fb542b8f5a953067b95bb29885659a4b51d86a2e73d583ee52e16a8b8002f3468f212b09f72eb1040d84eab58817c9668fc009b13e9e1f79adb092928f0eceac35ee4ec64a64a3d97fce6fe5e0b85cd7ca540989e51dfa147808ee42d3bdc943a87e60a69110c7b914147db0f6b78ccc8c250a069099fb27f07c0</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">请输入密码</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    
    <categories>
      
      <category>数据中台</category>
      
    </categories>
    
    
    <tags>
      
      <tag>数据中台</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>hexo-Fluid-1-主题-页面美化效果实现</title>
    <link href="/posts/2022/05/ca263f3a.html"/>
    <url>/posts/2022/05/ca263f3a.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><h3 id="添加鼠标点击爱心效果"><a href="#添加鼠标点击爱心效果" class="headerlink" title="添加鼠标点击爱心效果"></a>添加鼠标点击爱心效果</h3><p>在 \themes\fluid\source\js （其中fluid为你主题的文件夹名，即在自己的主题中进行操作）下新建文件 love.js，在 love.js 文件中添加以下代码：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript">!<span class="hljs-keyword">function</span>(<span class="hljs-params">e,t,a</span>)&#123;<span class="hljs-keyword">function</span> <span class="hljs-title function_">n</span>(<span class="hljs-params"></span>)&#123;<span class="hljs-title function_">c</span>(<span class="hljs-string">&quot;.heart&#123;width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);&#125;.heart:after,.heart:before&#123;content: &#x27;&#x27;;width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 500%;-moz-border-radius: 50%;position: fixed;&#125;.heart:after&#123;top: -5px;&#125;.heart:before&#123;left: -5px;&#125;&quot;</span>),<span class="hljs-title function_">o</span>(),<span class="hljs-title function_">r</span>()&#125;<span class="hljs-keyword">function</span> <span class="hljs-title function_">r</span>(<span class="hljs-params"></span>)&#123;<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> e=<span class="hljs-number">0</span>;e&lt;d.<span class="hljs-property">length</span>;e++)d[e].<span class="hljs-property">alpha</span>&lt;=<span class="hljs-number">0</span>?(t.<span class="hljs-property">body</span>.<span class="hljs-title function_">removeChild</span>(d[e].<span class="hljs-property">el</span>),d.<span class="hljs-title function_">splice</span>(e,<span class="hljs-number">1</span>)):(d[e].<span class="hljs-property">y</span>--,d[e].<span class="hljs-property">scale</span>+=<span class="hljs-number">.004</span>,d[e].<span class="hljs-property">alpha</span>-=<span class="hljs-number">.013</span>,d[e].<span class="hljs-property">el</span>.<span class="hljs-property">style</span>.<span class="hljs-property">cssText</span>=<span class="hljs-string">&quot;left:&quot;</span>+d[e].<span class="hljs-property">x</span>+<span class="hljs-string">&quot;px;top:&quot;</span>+d[e].<span class="hljs-property">y</span>+<span class="hljs-string">&quot;px;opacity:&quot;</span>+d[e].<span class="hljs-property">alpha</span>+<span class="hljs-string">&quot;;transform:scale(&quot;</span>+d[e].<span class="hljs-property">scale</span>+<span class="hljs-string">&quot;,&quot;</span>+d[e].<span class="hljs-property">scale</span>+<span class="hljs-string">&quot;) rotate(45deg);background:&quot;</span>+d[e].<span class="hljs-property">color</span>+<span class="hljs-string">&quot;;z-index:99999&quot;</span>);<span class="hljs-title function_">requestAnimationFrame</span>(r)&#125;<span class="hljs-keyword">function</span> <span class="hljs-title function_">o</span>(<span class="hljs-params"></span>)&#123;<span class="hljs-keyword">var</span> t=<span class="hljs-string">&quot;function&quot;</span>==<span class="hljs-keyword">typeof</span> e.<span class="hljs-property">onclick</span>&amp;&amp;e.<span class="hljs-property">onclick</span>;e.<span class="hljs-property">onclick</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)&#123;t&amp;&amp;<span class="hljs-title function_">t</span>(),<span class="hljs-title function_">i</span>(e)&#125;&#125;<span class="hljs-keyword">function</span> <span class="hljs-title function_">i</span>(<span class="hljs-params">e</span>)&#123;<span class="hljs-keyword">var</span> a=t.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;div&quot;</span>);a.<span class="hljs-property">className</span>=<span class="hljs-string">&quot;heart&quot;</span>,d.<span class="hljs-title function_">push</span>(&#123;<span class="hljs-attr">el</span>:a,<span class="hljs-attr">x</span>:e.<span class="hljs-property">clientX</span>-<span class="hljs-number">5</span>,<span class="hljs-attr">y</span>:e.<span class="hljs-property">clientY</span>-<span class="hljs-number">5</span>,<span class="hljs-attr">scale</span>:<span class="hljs-number">1</span>,<span class="hljs-attr">alpha</span>:<span class="hljs-number">1</span>,<span class="hljs-attr">color</span>:<span class="hljs-title function_">s</span>()&#125;),t.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(a)&#125;<span class="hljs-keyword">function</span> <span class="hljs-title function_">c</span>(<span class="hljs-params">e</span>)&#123;<span class="hljs-keyword">var</span> a=t.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;style&quot;</span>);a.<span class="hljs-property">type</span>=<span class="hljs-string">&quot;text/css&quot;</span>;<span class="hljs-keyword">try</span>&#123;a.<span class="hljs-title function_">appendChild</span>(t.<span class="hljs-title function_">createTextNode</span>(e))&#125;<span class="hljs-keyword">catch</span>(t)&#123;a.<span class="hljs-property">styleSheet</span>.<span class="hljs-property">cssText</span>=e&#125;t.<span class="hljs-title function_">getElementsByTagName</span>(<span class="hljs-string">&quot;head&quot;</span>)[<span class="hljs-number">0</span>].<span class="hljs-title function_">appendChild</span>(a)&#125;<span class="hljs-keyword">function</span> <span class="hljs-title function_">s</span>(<span class="hljs-params"></span>)&#123;<span class="hljs-keyword">return</span><span class="hljs-string">&quot;rgb(&quot;</span>+~~(<span class="hljs-number">255</span>*<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>())+<span class="hljs-string">&quot;,&quot;</span>+~~(<span class="hljs-number">255</span>*<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>())+<span class="hljs-string">&quot;,&quot;</span>+~~(<span class="hljs-number">255</span>*<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>())+<span class="hljs-string">&quot;)&quot;</span>&#125;<span class="hljs-keyword">var</span> d=[];e.<span class="hljs-property">requestAnimationFrame</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<span class="hljs-keyword">return</span> e.<span class="hljs-property">requestAnimationFrame</span>||e.<span class="hljs-property">webkitRequestAnimationFrame</span>||e.<span class="hljs-property">mozRequestAnimationFrame</span>||e.<span class="hljs-property">oRequestAnimationFrame</span>||e.<span class="hljs-property">msRequestAnimationFrame</span>||<span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)&#123;<span class="hljs-built_in">setTimeout</span>(e,<span class="hljs-number">1e3</span>/<span class="hljs-number">60</span>)&#125;&#125;(),<span class="hljs-title function_">n</span>()&#125;(<span class="hljs-variable language_">window</span>,<span class="hljs-variable language_">document</span>);<br></code></pre></td></tr></table></figure><p>在 \themes\fluid\layout\layout.ejs 文件末尾添加以下代码：</p><p>在</html>标签后面加，完成后，点击鼠标时就可以看见效果了。</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- 页面点击小红心 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;/js/love.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="添加鼠标点击显示文字效果"><a href="#添加鼠标点击显示文字效果" class="headerlink" title="添加鼠标点击显示文字效果"></a>添加鼠标点击显示文字效果</h3><p>在 &#x2F;themes&#x2F;fluid&#x2F;source&#x2F;js 下新建文件 click_show_text.js，在 click_show_text.js 文件中添加以下代码：</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs arcade"><span class="hljs-keyword">var</span> a_idx = <span class="hljs-number">0</span>;<br>jQuery(document).ready(<span class="hljs-keyword">function</span>(<span class="hljs-params">$</span>) &#123;<br>    $(<span class="hljs-string">&quot;body&quot;</span>).click(<span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) &#123;<br>        <span class="hljs-keyword">var</span> a = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span><br>        (<span class="hljs-string">&quot;富强&quot;</span>, <span class="hljs-string">&quot;民主&quot;</span>, <span class="hljs-string">&quot;文明&quot;</span>, <span class="hljs-string">&quot;和谐&quot;</span>, <span class="hljs-string">&quot;自由&quot;</span>, <span class="hljs-string">&quot;平等&quot;</span>, <span class="hljs-string">&quot;公正&quot;</span>, <span class="hljs-string">&quot;法治&quot;</span>, <span class="hljs-string">&quot;爱国&quot;</span>, <span class="hljs-string">&quot;敬业&quot;</span>, <span class="hljs-string">&quot;诚信&quot;</span>, <span class="hljs-string">&quot;友善&quot;</span>);<br>        <span class="hljs-keyword">var</span> $i = $(<span class="hljs-string">&quot;&lt;span/&gt;&quot;</span>).<span class="hljs-built_in">text</span>(a[a_idx]);<br>        a_idx = (a_idx + <span class="hljs-number">1</span>) % a.<span class="hljs-built_in">length</span>;<br>        <span class="hljs-keyword">var</span> x = e.pageX,<br>        y = e.pageY;<br>        $i.css(&#123;<br>            <span class="hljs-string">&quot;z-index&quot;</span>: <span class="hljs-number">5</span>,<br>            <span class="hljs-string">&quot;top&quot;</span>: y - <span class="hljs-number">20</span>,<br>            <span class="hljs-string">&quot;left&quot;</span>: x,<br>            <span class="hljs-string">&quot;position&quot;</span>: <span class="hljs-string">&quot;absolute&quot;</span>,<br>            <span class="hljs-string">&quot;font-weight&quot;</span>: <span class="hljs-string">&quot;bold&quot;</span>,<br>            <span class="hljs-string">&quot;color&quot;</span>: <span class="hljs-string">&quot;#FF0000&quot;</span><br>        &#125;);<br>        $(<span class="hljs-string">&quot;body&quot;</span>).append($i);<br>        $i.animate(&#123;<br>            <span class="hljs-string">&quot;top&quot;</span>: y - <span class="hljs-number">180</span>,<br>            <span class="hljs-string">&quot;opacity&quot;</span>: <span class="hljs-number">0</span><br>        &#125;,<br><span class="hljs-number">3000</span>,<br><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>    $i.remove();<br>&#125;);<br>    &#125;);<br>    setTimeout(<span class="hljs-string">&#x27;delay()&#x27;</span>, <span class="hljs-number">2000</span>);<br>&#125;);<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">delay</span>(<span class="hljs-params"></span>) &#123;<br>    $(<span class="hljs-string">&quot;.buryit&quot;</span>).removeAttr(<span class="hljs-string">&quot;onclick&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>文字可以任意替换成自己的。<br>如果想要每次点击显示的文字为不同颜色，可以将其中 color 值进行如下更改：</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arcade"><span class="hljs-string">&quot;color&quot;</span>: <span class="hljs-string">&quot;rgb(&quot;</span> + ~~(<span class="hljs-number">255</span> * Math.<span class="hljs-built_in">random</span>()) + <span class="hljs-string">&quot;,&quot;</span> + ~~(<span class="hljs-number">255</span> * Math.<span class="hljs-built_in">random</span>()) + <span class="hljs-string">&quot;,&quot;</span> + ~~(<span class="hljs-number">255</span> * Math.<span class="hljs-built_in">random</span>()) + <span class="hljs-string">&quot;)&quot;</span><br></code></pre></td></tr></table></figure><p>然后在 \themes\fluid\layout\layout.ejs 文件末尾添加以下代码</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--单击显示文字--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;/js/click_show_text.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><p>最后就可以看见效果了。</p><h3 id="自定义鼠标指针样式"><a href="#自定义鼠标指针样式" class="headerlink" title="自定义鼠标指针样式"></a>自定义鼠标指针样式</h3><p>在 \themes\fluid\source\less_base.less 文件 body 样式里写入如下代码：</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-selector-tag">body</span> &#123;<br>    <span class="hljs-attribute">cursor</span>: url(<span class="hljs-string">https://cdn.jsdelivr.net/gh/TRHX/CDN-for-itrhx.com@2.1.6/images/mouse.cur</span>),auto;<br>    <span class="hljs-attribute">background-color</span>: <span class="hljs-variable">@theme_background</span>;<br>    ......<br>    ......<br>&#125;<br></code></pre></td></tr></table></figure><p>鼠标指针可以用 Axialis CursorWorkshop 这个软件自己制作，不同主题具体放的文件有所不同，确保在博客主体 body 的 CSS 文件中即可，其中的鼠标指针链接可替换成自己的，首先尝试加载<a href="https://cdn.jsdelivr.net/gh/TRHX/CDN-for-itrhx.com@2.1.6/images/mouse.cur">https://cdn.jsdelivr.net/gh/TRHX/CDN-for-itrhx.com@2.1.6/images/mouse.cur</a> ，如果该文件不存在或由于其他原因无效，那么 auto 会被使用，也就是自动默认效果，图片格式为.ico、.ani、.cur，建议使用.cur，如果使用.ani或者其他格式无效，原因是浏览器兼容问题，请阅读<a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Basic_User_Interface/Using_URL_values_for_the_cursor_property">参考文档</a>。</p><h3 id="浏览器网页标题动态改变"><a href="#浏览器网页标题动态改变" class="headerlink" title="浏览器网页标题动态改变"></a>浏览器网页标题动态改变</h3><p>当用户访问你的博客时点击到了其他网页，我们可以改变一下网页标题，呼唤用户回来，首先在目录 \themes\fluid\source\js 下新建一个 FunnyTitle.js 文件，在里面填写如下代码：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// 浏览器标题</span><br><span class="hljs-keyword">var</span> <span class="hljs-title class_">OriginTitle</span> = <span class="hljs-variable language_">document</span>.<span class="hljs-property">title</span>;<br><span class="hljs-keyword">var</span> titleTime;<br><span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;visibilitychange&#x27;</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">document</span>.<span class="hljs-property">hidden</span>) &#123;<br>        $(<span class="hljs-string">&#x27;[rel=&quot;icon&quot;]&#x27;</span>).<span class="hljs-title function_">attr</span>(<span class="hljs-string">&#x27;href&#x27;</span>, <span class="hljs-string">&quot;/funny.ico&quot;</span>);<br>        <span class="hljs-variable language_">document</span>.<span class="hljs-property">title</span> = <span class="hljs-string">&#x27;╭(°A°`)╮ 页面崩溃啦 ~&#x27;</span>;<br>        <span class="hljs-built_in">clearTimeout</span>(titleTime);<br>    &#125;<br>    <span class="hljs-keyword">else</span> &#123;<br>        $(<span class="hljs-string">&#x27;[rel=&quot;icon&quot;]&#x27;</span>).<span class="hljs-title function_">attr</span>(<span class="hljs-string">&#x27;href&#x27;</span>, <span class="hljs-string">&quot;/favicon.ico&quot;</span>);<br>        <span class="hljs-variable language_">document</span>.<span class="hljs-property">title</span> = <span class="hljs-string">&#x27;(ฅ&gt;ω&lt;*ฅ) 噫又好啦 ~&#x27;</span> + <span class="hljs-title class_">OriginTitle</span>;<br>        titleTime = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>            <span class="hljs-variable language_">document</span>.<span class="hljs-property">title</span> = <span class="hljs-title class_">OriginTitle</span>;<br>        &#125;, <span class="hljs-number">2000</span>);<br>    &#125;<br>&#125;);<br><br></code></pre></td></tr></table></figure><p>其中 funny.ico 是用户切换到其他标签后你网站的图标，favicon.ico 是正常图标，然后在 \themes\fluid\layout\layout.ejs 文件中添加如下代码：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--浏览器搞笑标题--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;/js/FunnyTitle.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br></code></pre></td></tr></table></figure><p>之后就可以去试试效果了。</p><h4 id="背景添加动态线条效果"><a href="#背景添加动态线条效果" class="headerlink" title="背景添加动态线条效果"></a>背景添加动态线条效果</h4><p>在 \Hexo\themes\fluid\layout\layout.ejs 文件中添加如下代码：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--动态线条背景--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span></span><br><span class="hljs-tag"><span class="hljs-attr">color</span>=<span class="hljs-string">&quot;220,220,220&quot;</span> <span class="hljs-attr">opacity</span>=<span class="hljs-string">&#x27;0.7&#x27;</span> <span class="hljs-attr">zIndex</span>=<span class="hljs-string">&quot;-2&quot;</span> <span class="hljs-attr">count</span>=<span class="hljs-string">&quot;200&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br></code></pre></td></tr></table></figure><p>其中：</p><p>color：表示线条颜色，三个数字分别为(R,G,B)，默认：（0,0,0）<br>opacity：表示线条透明度（0~1），默认：0.5<br>count：表示线条的总数量，默认：150<br>zIndex：表示背景的z-index属性，css属性用于控制所在层的位置，默认：-1</p><p>之后就可以看见效果了。</p><p>更多参考：</p><p><a href="https://tothefor.com/DragonOne/325206433.html">https://tothefor.com/DragonOne/325206433.html</a></p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>博客</category>
      
    </categories>
    
    
    <tags>
      
      <tag>hexo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>2022-05-遇到的人/看到的事/读过的书/走过的路</title>
    <link href="/posts/2022/05/e0ba22fa.html"/>
    <url>/posts/2022/05/e0ba22fa.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><h4 id="先看到，才能做到"><a href="#先看到，才能做到" class="headerlink" title="先看到，才能做到"></a>先看到，才能做到</h4><p>最近看到奶爸微博上有篇说的特别好，</p><p>优秀的文艺作品会加强一个人的精神力量，会塑造人的坚强的心灵，会提升一个人的生活技能，尤其是在做人模版和为人处世这些世俗技巧方面。</p><p>比如鲁迅对底层低级小人物的各种刻画和描写，在警醒我不要沦为这种小人。</p><p>孔子喜欢讲君子之风，小人做派。</p><p>但问题是君子之风，小人做派又是什么？</p><p>人的学习一定要通过模仿，具象化的直观呈现，有样学样，才能学得会，学得快。</p><p>人的学习没有办法抽象，也没有办法通过演绎推理来学习。</p><p>即，只是学习知识，技巧，方法，看上去好像懂了，实际上还是不懂，这就是我们常说的，懂了很多道理依然过不好一生。</p><p>很多时候都印证了只有看到了，才能做到。个人成长需要有个好的model。</p><p>比如说，我最近的项目组新进了个技术大佬，有什么技术问题被卡住了，我通常会小窗他，有一次遇到了Doris数据库的一个bug，刚开始我不知道这是doris这个开源软件的本身的bug，后来在大神和我自己的共同努力下，定位应该是doris本身出了问题。</p><p>大佬后面就去doris的Github官网去提了issue，提交完了把链接顺手丢给了我。我点进去赫然看见的是大佬contributor的标记，要知道在Apache开源项目有</p><p>contributor的tag标记有多厉害呢，就是在计算机行业说出去能够让人哇塞的存在。</p><p>大佬丢链接的debug聊天记录📝，看到周围的role model，就是会想着哪天也能拥有contributor tag</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20220527235104.png"></p><p>这其实也是先看到，然后做到。模仿优秀人的学习路径，成长路径是比较快的学习方式。</p><p>可能未来教育孩子的最好方式，就是言传声教，让孩子有样学样，从小开拓眼界。</p><p>最近听播客，从零道一，主要是访谈各个优秀大学在读或毕业的计算机学生，其中第一期王浩然就有提到，从交大到卡内基梅隆，这一路看得见的是这个行业最顶尖的那些人在做什么，是眼界的开阔。</p><p>看见光，接近光，最后成为光。</p><h4 id="在考虑自己硕士论文的研究方向"><a href="#在考虑自己硕士论文的研究方向" class="headerlink" title="在考虑自己硕士论文的研究方向"></a>在考虑自己硕士论文的研究方向</h4><p>另外一个题外话是，第二期王尧提到机器学习，深度学习运用在医疗领域的一个idea，是说可以根据机器学习和深度学习做预诊断系统，大家都知道，医院专家号挂号非常难，这个预诊断可以通过你的描述，给你做相应的诊断，比如多大的概率患什么样的病，推荐用什么药物，这可以极大节约挂专家号等位的成本，特别是对白领来说。</p><p>最近上海的疫情加上妈妈👩最近的身体不适，让我切身感觉到医疗才能真真切切的帮到具体的人。就在考虑我研究生的方向要不要研究医疗和计算机融合的方向</p><h4 id="Bionic-Reading"><a href="#Bionic-Reading" class="headerlink" title="Bionic Reading"></a>Bionic Reading</h4><p>最近还在木遥微博中发现了一个黑科技，就是Bionic Reading，就是把英文文章的单词前一部分加粗，让大脑自动补全剩下的单词，会大大提高阅读的速度。我尝试了两句话的阅读，发现真的很神奇。读右边的句子真的会快很多。</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20220528005442.png"></p><p>另外比较好奇会不会是只对我们这些英语不是母语的人，会有阅读速度的提高。对英语母语的人是不是影响不大。于是去问了下外教老师。</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20220528005737.png"></p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20220528005808.png"></p><p>没想到对母语人士也是kind of crazy.</p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    
    <tags>
      
      <tag>life</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>MySQL Data to Doris(通过ODBC创建Doris的MySQL外部表)</title>
    <link href="/posts/2022/05/d5f55ff2.html"/>
    <url>/posts/2022/05/d5f55ff2.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><p><strong>注意!!!ODBC版本过新会导致Doris BE服务宕机，目前测试下来 8.0.26及 8.0.28版本均有问题，降为 8.0.11后未出现问题，其余版本请自行测试！</strong></p><p><strong>1.安装ODBC驱动</strong><br>首先我们安装unixODBC驱动</p><blockquote><p>sudo wget <a href="ftp://ftp.unixodbc.org/pub/unixODBC/unixODBC-2.3.4.tar.gz">ftp://ftp.unixodbc.org/pub/unixODBC/unixODBC-2.3.4.tar.gz</a><br>tar -xvzf unixODBC-2.3.4.tar.gz<br>cd unixODBC-2.3.4&#x2F;<br>sudo .&#x2F;configure –prefix&#x3D;&#x2F;usr&#x2F;local&#x2F;unixODBC-2.3.7 –includedir&#x3D;&#x2F;usr&#x2F;include –libdir&#x3D;&#x2F;usr&#x2F;lib -bindir&#x3D;&#x2F;usr&#x2F;bin –sysconfdir&#x3D;&#x2F;etc<br>make<br>sudo make install</p></blockquote><p>安装成功后，unixODBC所需的头文件都被安装到了&#x2F;usr&#x2F;inlucde下，编译好的库文件安装到了&#x2F;usr&#x2F;lib下，与unixODBC相关的可执行文件安装到了&#x2F;usr&#x2F;bin下，配置文件放到了&#x2F;etc下。</p><p>验证安装是否成功<br>odbcinst -j</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgWeChat1bbf57433c7979412defcdcd21307146.png"></p><p><strong>2.安装Mysql ODBC驱动</strong></p><p>从mysql 站点下载对应的驱动</p><p><a href="https://dev.mysql.com/downloads/connector/odbc/">https://dev.mysql.com/downloads/connector/odbc/</a></p><p>mysql-connector-odbc-8.0.11-linux-glibc2.12-x86-64bit.tar.gz</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">tar</span> zxvf mysql-connector-odbc-<span class="hljs-number">8</span>.<span class="hljs-number">0</span>.<span class="hljs-number">11</span>-linux-glibc2.<span class="hljs-number">12</span>-x86-<span class="hljs-number">64</span>bit.tar.gz<br><span class="hljs-attribute">mv</span> mysql-connector-odbc-<span class="hljs-number">8</span>.<span class="hljs-number">0</span>.<span class="hljs-number">11</span>-linux-glibc2.<span class="hljs-number">12</span>-x86-<span class="hljs-number">64</span>bit mysql-connectort-odbc-<span class="hljs-number">8</span>.<span class="hljs-number">0</span>.<span class="hljs-number">11</span><br></code></pre></td></tr></table></figure><p><strong>注册Mysql驱动，进入mysql-connectort-odbc-8.0.11&#x2F;bin路径下</strong></p><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs excel">./myodbc-installer -a -d -<span class="hljs-built_in">n</span> <span class="hljs-string">&quot;MySQL ODBC 8.0.11 Unicode Driver&quot;</span> -<span class="hljs-built_in">t</span> <span class="hljs-string">&quot;Driver=/opt/software/mysql-connector-odbc-8.0.11/lib/libmyodbc8w.so&quot;</span><br>./myodbc-installer -a -d -<span class="hljs-built_in">n</span> <span class="hljs-string">&quot;MySQL ODBC 8.0.11 ANSI Driver&quot;</span> -<span class="hljs-built_in">t</span> <span class="hljs-string">&quot;Driver=/opt/software/mysql-connector-odbc-8.0.11/lib/libmyodbc8a.so&quot;</span><br></code></pre></td></tr></table></figure><p><strong>然后查看是否注册成功</strong><br><code>./myodbc-installer -d -l</code></p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20220527225051.png"></p><p><strong>3.验证通过ODBC访问Mysql</strong></p><p>去配置ODBC访问Mysql的参数</p><p>编辑&#x2F;etc&#x2F;odbc.ini文件，加入下面的内容，将信息替换成你自己的</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[mysql]</span><br><span class="hljs-attr">Description</span> = Data source MySQL<br><span class="hljs-attr">Driver</span> = MySQL ODBC <span class="hljs-number">8.0</span>.<span class="hljs-number">28</span> Unicode Driver<br><span class="hljs-attr">Server</span> = localhost<br><span class="hljs-attr">Host</span> = localhost<br><span class="hljs-attr">Database</span> = test_db<br><span class="hljs-attr">Port</span> = <span class="hljs-number">3306</span><br><span class="hljs-attr">User</span> = test_user<br><span class="hljs-attr">Password</span> = <span class="hljs-number">123456</span><br></code></pre></td></tr></table></figure><p>然后我们通过：</p><p>isql -v mysql测试能否通过ODBC连接Mysql</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img20220527225217.png"></p><p><strong>4.在BE节点的conf&#x2F;odbcinst.ini，添加我们的刚才注册的8.0.11的ODBC驱动</strong></p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[MySQL ODBC 8.0.11]</span><br><span class="hljs-attr">Description</span> = ODBC for MySQL<br><span class="hljs-attr">Driver</span>=/opt/software/mysql-connector-odbc-<span class="hljs-number">8.0</span>.<span class="hljs-number">11</span>/lib/libmyodbc8w.so<br><span class="hljs-attr">FileUsage</span> = <span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><p><strong>5.在Doris创建外部表</strong></p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">IF</span> <span class="hljs-keyword">EXISTS</span> test.external_ods_esc_goods;<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> test.external_ods_esc_goods (<br>  id <span class="hljs-type">varchar</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;主键ID&#x27;</span>,<br>  goods_id <span class="hljs-type">varchar</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;商品ID&#x27;</span>,<br>  expire_date datetime <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;有效期截止日&#x27;</span>,<br>  spu_outer_id <span class="hljs-type">varchar</span>(<span class="hljs-number">1024</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;外部商品ID&#x27;</span>,<br>  company_id <span class="hljs-type">varchar</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;公司ID&#x27;</span>,<br>  outer_id <span class="hljs-type">varchar</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;平台ID&#x27;</span>,<br>  update_time datetime  <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;更新时间&#x27;</span>,<br>  creator <span class="hljs-type">varchar</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;创建人&#x27;</span>,<br>  modifier <span class="hljs-type">varchar</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;修改人&#x27;</span>,<br>  create_time datetime  <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;创建时间&#x27;</span><br>)ENGINE=ODBC<br>PROPERTIES (<br>&quot;host&quot;=&quot;xx.xxx.xx.xx&quot;,<br>&quot;port&quot;=&quot;3307&quot;,<br>&quot;user&quot;=&quot;test&quot;,<br>&quot;password&quot;=&quot;123456&quot;,<br>&quot;database&quot;=&quot;test&quot;,<br>&quot;table&quot;=&quot;goods&quot;,<br>&quot;driver&quot;=&quot;MySQL ODBC 8.0.11 Unicode Driver&quot;,<br>&quot;odbc_type&quot;=&quot;mysql&quot;<br>);<br></code></pre></td></tr></table></figure><p>或者创建外部resource</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-meta">#drop RESOURCE isc_mysql_odbc_goods_oc;</span><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">EXTERNAL</span> RESOURCE isc_mysql_odbc_goods_oc<br>PROPERTIES (<br>&quot;type&quot; = &quot;odbc_catalog&quot;,<br>&quot;host&quot;=&quot;xx.xx.xx.xx&quot;,<br>&quot;port&quot;=&quot;3306&quot;,<br>&quot;user&quot;=&quot;xxxx&quot;,<br>&quot;password&quot;=&quot;xxxxxx&quot;,<br>&quot;driver&quot;=&quot;MySQL ODBC 8.0 Unicode Driver&quot;,<br>&quot;odbc_type&quot;=&quot;mysql&quot;<br>);<br><br><br><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">IF</span> <span class="hljs-keyword">EXISTS</span> test.external_ods_esc_goods;<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> test.external_ods_esc_goods (<br>  id <span class="hljs-type">varchar</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;主键ID&#x27;</span>,<br>  goods_id <span class="hljs-type">varchar</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;商品ID&#x27;</span>,<br>  expire_date datetime <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;有效期截止日&#x27;</span>,<br>  spu_outer_id <span class="hljs-type">varchar</span>(<span class="hljs-number">1024</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;外部商品ID&#x27;</span>,<br>  company_id <span class="hljs-type">varchar</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;公司ID&#x27;</span>,<br>  outer_id <span class="hljs-type">varchar</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;平台ID&#x27;</span>,<br>  update_time datetime  <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;更新时间&#x27;</span>,<br>  creator <span class="hljs-type">varchar</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;创建人&#x27;</span>,<br>  modifier <span class="hljs-type">varchar</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;修改人&#x27;</span>,<br>  create_time datetime  <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;创建时间&#x27;</span><br>)ENGINE=ODBC<br>PROPERTIES (<br>&quot;odbc_catalog_resource&quot; = &quot;isc_mysql_odbc&quot;,<br>&quot;database&quot; = &quot;test&quot;,<br>&quot;table&quot; = &quot;goods&quot;<br>);<br></code></pre></td></tr></table></figure><p>验证查询</p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> test.external_ods_esc_goods<br></code></pre></td></tr></table></figure><p><strong>6.创建Doris表</strong></p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">IF</span> <span class="hljs-keyword">EXISTS</span> ods.ods_esc_goods;<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> ods.ods_esc_goods (<br>id <span class="hljs-type">varchar</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;主键ID&#x27;</span>,<br>goods_id <span class="hljs-type">varchar</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;商品ID&#x27;</span>,<br>expire_date datetime <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;有效期截止日&#x27;</span>,<br>spu_outer_id <span class="hljs-type">varchar</span>(<span class="hljs-number">1024</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;外部商品ID&#x27;</span>,<br>company_id <span class="hljs-type">varchar</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;公司ID&#x27;</span>,<br>outer_id <span class="hljs-type">varchar</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;平台ID&#x27;</span>,<br>update_time datetime  <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;更新时间&#x27;</span>,<br>creator <span class="hljs-type">varchar</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;创建人&#x27;</span>,<br>modifier <span class="hljs-type">varchar</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;修改人&#x27;</span>,<br>create_time datetime  <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;创建时间&#x27;</span>,<br><span class="hljs-keyword">INDEX</span> INDEX_GOODS_ID (goods_id),<br><span class="hljs-keyword">INDEX</span> INDEX_COM_ID (company_id) ,<br><span class="hljs-keyword">INDEX</span> INDEX_SPU_OUTER_ID (spu_outer_id)<br>)<br><span class="hljs-keyword">UNIQUE</span> KEY (id,goods_id)<br><span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;商品扩展信息表&#x27;</span><br>DISTRIBUTED <span class="hljs-keyword">BY</span> HASH(id) BUCKETS <span class="hljs-number">1</span><br>PROPERTIES<br>(<br>&quot;replication_num&quot; = &quot;3&quot;<br>);<br><br></code></pre></td></tr></table></figure><p><strong>7.从外部表同步数据到Doris</strong></p><blockquote><p>insert into ods.ods_esc_goods<br>select * from test.external_ods_esc_goods</p></blockquote><p>查看doris是否有数据</p><p><code>select * from ods.ods_esc_goods</code></p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>Doris</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Doris</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Mysql Data to Doris by streamload</title>
    <link href="/posts/2022/05/1081c10e.html"/>
    <url>/posts/2022/05/1081c10e.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><p><strong>导出mysql数据到csv文件</strong></p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs n1ql">mysql -e &quot;<span class="hljs-keyword">select</span> tracking_number,order_created_time <span class="hljs-keyword">from</span> datamart.t_wide_table_waybill <span class="hljs-keyword">where</span> waybill_submit_time &gt;= <span class="hljs-string">&#x27;2021-04-01&#x27;</span> <span class="hljs-keyword">and</span> waybill_submit_time &lt; <span class="hljs-string">&#x27;2021-07-01&#x27;</span><span class="hljs-string">&quot; &gt; /opt/tmpdata/wide_table_6.csv</span><br></code></pre></td></tr></table></figure><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus">tar -zcvf /opt/tmpdata/wide_table_6<span class="hljs-selector-class">.csv</span><span class="hljs-selector-class">.tar</span><span class="hljs-selector-class">.gz</span> /opt/tmpdata/wide_table_6<span class="hljs-selector-class">.csv</span><br><br></code></pre></td></tr></table></figure><p><strong>XFTP将压缩文件传输到Doris集群任一台机器A</strong></p><p>xftp的传输速度要远快于scp，scp只有700KB&#x2F;s，XFTP稳定在2.7MB&#x2F;s，另外传输之前可以先tar压缩，数据可以压缩到原大小的20%以下</p><p><strong>在A机器上解压文件</strong></p><p><code>tar -zvf /opt/tmpdata/wide_table_6.csv.tar.gz</code></p><p><strong>Doris streamload方式导入数据时对数据文件的大小限制为10G，若数据文件&gt;10G,则可按10G来切分</strong></p><p><code>split -b 10240m wide_table_6.csv after_split_wide_table_6.csv</code></p><p>用Streamload方式导入数据,直接导入到具体BE节点</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">curl <span class="hljs-params">--location-trusted</span> -u root: -T <span class="hljs-string">/data/tmpdata/after_split_wide_table_6.csv</span> -H <span class="hljs-string">&quot;label:wide_table_001&quot;</span> -H <span class="hljs-string">&quot;max_filter_ratio:1&quot;</span>http:<span class="hljs-string">//10.63.40.54</span><span class="hljs-function">:8040</span>/api/dwd/dwd_spk_t_wide_table_waybill/_stream_load<br></code></pre></td></tr></table></figure><p><strong>由FE节点来分配</strong></p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">curl <span class="hljs-params">--location-trusted</span> -u root: -T <span class="hljs-string">/data/tmpdata/after_split_wide_table_6.csv</span> -H <span class="hljs-string">&quot;label:wide_table_001&quot;</span> -H <span class="hljs-string">&quot;max_filter_ratio:1&quot;</span>http:<span class="hljs-string">//10.63.40.20</span><span class="hljs-function">:8030</span>/api/dwd/dwd_spk_t_wide_table_waybill/_stream_load<br></code></pre></td></tr></table></figure></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>Doris</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Doris</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Doris-Unique模型标记删除</title>
    <link href="/posts/2022/05/138e8901.html"/>
    <url>/posts/2022/05/138e8901.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><h3 id="指定sequence-type类型"><a href="#指定sequence-type类型" class="headerlink" title="指定sequence_type类型"></a>指定sequence_type类型</h3><p>目前只支持bigint和date两种</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> ods.ods_esc_system_oct_buyer_one_sale_goods      <span class="hljs-keyword">ENABLE</span> FEATURE &quot;SEQUENCE_LOAD&quot; <span class="hljs-keyword">WITH</span> PROPERTIES (&quot;function_column.sequence_type&quot; = &quot;bigint&quot;);<br></code></pre></td></tr></table></figure><p><strong>显示隐藏列</strong></p><p><code>SET show_hidden_columns=&#39;true&#39;;</code></p><p>查看标记删除功能有没生效，当出现有__DORIS_DELETE_SIGN__列，即为生效</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgWeChat3f59fb18328f3dd6235077e0ace81e6c.png"></p><p>若要将数据标记删除，则将<code>__DORIS_DELETE_SIGN__</code>列赋值为1即可</p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> test.<span class="hljs-symbol">`doris_delete_test`</span><br>(a<br>,b<br>,c<br>,__DORIS_DELETE_SIGN__<br>)<br><span class="hljs-keyword">select</span> <br><span class="hljs-string">&quot;1&quot;</span><br>,<span class="hljs-string">&quot;3&quot;</span><br>,<span class="hljs-string">&quot;3&quot;</span><br>,<span class="hljs-string">&quot;1&quot;</span>  __DORIS_DELETE_SIGN__<br></code></pre></td></tr></table></figure></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>Doris</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Doris</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Flink作业从checkpoint恢复启动</title>
    <link href="/posts/2022/05/31b925f3.html"/>
    <url>/posts/2022/05/31b925f3.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><h3 id="Flink作业故障重启"><a href="#Flink作业故障重启" class="headerlink" title="Flink作业故障重启"></a>Flink作业故障重启</h3><p>flink是高可用大数据计算框架，在程序中断后支持断点续传</p><p>这里人为kill掉程序，测试断点续传</p><p><strong>kill部署 在yarn上的Flink作业代码如下：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#!/bin/bash</span><br><span class="hljs-comment"># 需要传入applicationid</span><br>yarn application --list | grep <span class="hljs-variable">$1</span> &gt; /home/appman/realtime_warehouse/flink-job.txt<br><br><span class="hljs-built_in">cat</span> /app/tmp/flink-job.txt | <span class="hljs-keyword">while</span> <span class="hljs-built_in">read</span> line<br><br><span class="hljs-keyword">do</span><br><br>  <span class="hljs-keyword">if</span> [[ <span class="hljs-variable">$line</span> == *<span class="hljs-string">&quot;Apache Flink&quot;</span>* ]]<br><br>  <span class="hljs-keyword">then</span><br><br>    array=(<span class="hljs-variable">$&#123;line//&#x27;\t&#x27;/ &#125;</span>)<br><br>    application_id=<span class="hljs-variable">$&#123;array[0]&#125;</span><br><br>    yarn application --<span class="hljs-built_in">kill</span> <span class="hljs-variable">$application_id</span><br><br>    hadoop fs -<span class="hljs-built_in">rm</span> -r -skipTrash /user/appman/.flink/<span class="hljs-variable">$application_id</span><br><br>    <span class="hljs-built_in">rm</span> -f /app/tmp/flink-job.txt<br><br>  <span class="hljs-keyword">fi</span><br><br><span class="hljs-keyword">done</span><br><br></code></pre></td></tr></table></figure><p><strong>在hdfs上找到checkpoint目录，找到最近可用的chk目录，点进去有_metadata就可以恢复程序</strong></p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgWeChat66c38674c9516b8990fd6a7e2726c12b.png"></p><p><strong>flink从checkpoint启动命令如下：</strong></p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">flink</span> run -m yarn-cluster -s hdfs:///ns/flink/checkpoints/kafka-to-doris-esc-buyer/<span class="hljs-number">033</span>b26776f576c08f74b4b5368f5ae24/chk-<span class="hljs-number">825377</span> -ys <span class="hljs-number">1</span> -ynm esc-buyer-hk-kafka2doris -yD taskmanager.memory.managed.fraction=<span class="hljs-number">0</span>.<span class="hljs-number">1</span> -yjm <span class="hljs-number">1024</span> -ytm <span class="hljs-number">2048</span> -c com.itiaoling.app.ods.Kafka2Doris -z esc-buyer-hk-kafka2doris -d /home/appman/realtime_warehouse/jar/Analysis-<span class="hljs-number">2</span>.<span class="hljs-number">4</span>.jar -spring.profiles.active pro -sourceSinkType <span class="hljs-number">2</span> -businessType <span class="hljs-number">3</span> -tableName buyer_kafkatodoris_batch<br><br></code></pre></td></tr></table></figure><p>当是无效checkpoint，flink作业将一直处在<strong>INITIALIZING</strong>状态</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgWeChat6160ae35c3db6f09befafecfdf98581d.png"></p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>Flink</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Flink</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Doris副本数修改</title>
    <link href="/posts/2022/05/231c35b6.html"/>
    <url>/posts/2022/05/231c35b6.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><h3 id="修改历史的分区副本"><a href="#修改历史的分区副本" class="headerlink" title="修改历史的分区副本"></a>修改历史的分区副本</h3><figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs autohotkey">ALTER TABLE ods.order_purchase_order<br>MODIFY PARTITION (<br><span class="hljs-built_in">p2021_05,</span><br><span class="hljs-built_in">p_2020_12,</span><br><span class="hljs-built_in">p2022_18,</span><br><span class="hljs-built_in">p2022_19,</span><br><span class="hljs-built_in">p2022_20,</span><br><span class="hljs-built_in">p2022_21,</span><br><span class="hljs-built_in">p2022_22,</span><br>p2022_23<br>)SET(<span class="hljs-string">&quot;replication_num&quot;</span>=<span class="hljs-string">&quot;3&quot;</span>)<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><p>历史分区副本数修改后，新增的副本数据会逐渐同步完成。</p><h3 id="修改默认副本数量-新建分区副本数默认使用此值"><a href="#修改默认副本数量-新建分区副本数默认使用此值" class="headerlink" title="修改默认副本数量, 新建分区副本数默认使用此值"></a>修改默认副本数量, 新建分区副本数默认使用此值</h3><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> ods.order_purchase_order <span class="hljs-keyword">SET</span> (&quot;default.replication_num&quot; = &quot;3&quot;);<br><br></code></pre></td></tr></table></figure><h3 id="修改动态分区副本数量"><a href="#修改动态分区副本数量" class="headerlink" title="修改动态分区副本数量"></a>修改动态分区副本数量</h3><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> ods.order_purchase_order <span class="hljs-keyword">set</span> (&quot;dynamic_partition.replication_allocation&quot; = &quot;tag.location.default: 3&quot;);<br></code></pre></td></tr></table></figure></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>Doris</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Doris</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Doris表创建动态分区</title>
    <link href="/posts/2022/05/4e0202ca.html"/>
    <url>/posts/2022/05/4e0202ca.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><h3 id="Doris创建动态分区表"><a href="#Doris创建动态分区表" class="headerlink" title="Doris创建动态分区表"></a>Doris创建动态分区表</h3><p>动态分区仅仅支持range分区</p><p>DDL建表语句如下：</p><figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs autohotkey">CREATE TABLE dwd.`dwd_cdc_t_fin_trade_record_detail` (<br> `trade_id` varchar(<span class="hljs-number">200</span>) NULL COMMENT <span class="hljs-string">&quot;流水号&quot;</span>,<br> `merchant_code` varchar(<span class="hljs-number">200</span>) <span class="hljs-literal">NOT</span> NULL COMMENT <span class="hljs-string">&quot;&quot;</span>,<br> `order_no_business` varchar(<span class="hljs-number">800</span>) NULL COMMENT <span class="hljs-string">&quot;订单业务字段(包材费时存包材号，仓储费时存批次号,操作费存冻结记录id)&quot;</span>,<br> `trade_date` date NULL COMMENT <span class="hljs-string">&quot;变动时间&quot;</span>,<br> `trade_type` int(<span class="hljs-number">11</span>) NULL COMMENT <span class="hljs-string">&quot;交易类型,1-线下充值,2-操作费,3-仓储费,4-包材,5调账,6线上充值,7贴标服务费,8-退仓存储费&quot;</span>,<br> `cost_name` varchar(<span class="hljs-number">200</span>) NULL COMMENT <span class="hljs-string">&quot;费用名称&quot;</span>,<br> `merchant_name` varchar(<span class="hljs-number">400</span>) NULL COMMENT <span class="hljs-string">&quot;卖家名称&quot;</span>,<br> `source` varchar(<span class="hljs-number">200</span>) NULL COMMENT <span class="hljs-string">&quot;来源&quot;</span>,<br> `trade_amount` decimal(<span class="hljs-number">20</span>, <span class="hljs-number">2</span>) NULL COMMENT <span class="hljs-string">&quot;变动金额(充值未正，扣费为负)&quot;</span>,<br> `currency_code` varchar(<span class="hljs-number">40</span>) NULL COMMENT <span class="hljs-string">&quot;&quot;</span>,<br> `packing_material_name` varchar(<span class="hljs-number">1020</span>) <span class="hljs-literal">NOT</span> NULL COMMENT <span class="hljs-string">&quot;包材名称&quot;</span>,<br> `is_active` int(<span class="hljs-number">11</span>) NULL COMMENT <span class="hljs-string">&quot;数据是否已被逻辑删除,0是已删除，1是未删除&quot;</span>,<br> `etl_time` datetime NULL COMMENT <span class="hljs-string">&quot;跑批日期&quot;</span><br>) ENGINE=OLAP<br>DUPLICATE KEY(`trade_id`,`merchant_code`)<br>COMMENT <span class="hljs-string">&quot;商户余额变动流水表&quot;</span><br>PARTITION BY RANGE(`trade_date`)()<br>DISTRIBUTED BY HASH(`merchant_code`) BUCKETS <span class="hljs-number">3</span><br>PROPERTIES (<br><span class="hljs-string">&quot;replication_allocation&quot;</span> = <span class="hljs-string">&quot;tag.location.default: 3&quot;</span>,<br><span class="hljs-string">&quot;dynamic_partition.enable&quot;</span> = <span class="hljs-string">&quot;true&quot;</span>,<br><span class="hljs-string">&quot;dynamic_partition.time_unit&quot;</span> = <span class="hljs-string">&quot;MONTH&quot;</span>,<br><span class="hljs-string">&quot;dynamic_partition.time_zone&quot;</span> = <span class="hljs-string">&quot;Asia/Shanghai&quot;</span>,<br><span class="hljs-string">&quot;dynamic_partition.start&quot;</span> = <span class="hljs-string">&quot;-2147483648&quot;</span>,<br><span class="hljs-string">&quot;dynamic_partition.end&quot;</span> = <span class="hljs-string">&quot;2&quot;</span>,<br><span class="hljs-string">&quot;dynamic_partition.prefix&quot;</span> = <span class="hljs-string">&quot;p&quot;</span>,<br><span class="hljs-string">&quot;dynamic_partition.replication_allocation&quot;</span> = <span class="hljs-string">&quot;tag.location.default: 3&quot;</span>,<br><span class="hljs-string">&quot;dynamic_partition.buckets&quot;</span> = <span class="hljs-string">&quot;4&quot;</span>,<br><span class="hljs-string">&quot;dynamic_partition.create_history_partition&quot;</span> = <span class="hljs-string">&quot;true&quot;</span>,<br><span class="hljs-string">&quot;dynamic_partition.history_partition_num&quot;</span> = <span class="hljs-string">&quot;24&quot;</span>,<br><span class="hljs-string">&quot;dynamic_partition.hot_partition_num&quot;</span> = <span class="hljs-string">&quot;0&quot;</span>,<br><span class="hljs-string">&quot;dynamic_partition.reserved_history_periods&quot;</span> = <span class="hljs-string">&quot;NULL&quot;</span>,<br><span class="hljs-string">&quot;dynamic_partition.start_day_of_month&quot;</span> = <span class="hljs-string">&quot;1&quot;</span>,<br><span class="hljs-string">&quot;in_memory&quot;</span> = <span class="hljs-string">&quot;false&quot;</span>,<br><span class="hljs-string">&quot;storage_format&quot;</span> = <span class="hljs-string">&quot;V2&quot;</span><br>)<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><ul><li><p>PARTITION BY RANGE(<code>trade_date</code>)()  根据trade_date字段做分区</p></li><li><p>“dynamic_partition.enable” &#x3D; “true” 开启动态分区</p></li><li><p>“dynamic_partition.start” &#x3D; “-2147483648”, 系统会根据今天的时间去建分区，如果这里设置为0，则历史的数据（trade_date&lt;今天的日期）不会被插入到表中。想做历史数据的迁移，可以将其设置为负值。</p></li><li><p>doris默认会建立未来分区</p></li></ul><h3 id="Doris历史分区不够怎么办"><a href="#Doris历史分区不够怎么办" class="headerlink" title="Doris历史分区不够怎么办"></a>Doris历史分区不够怎么办</h3><p>新增历史分区</p><figure class="highlight plaintext"><figcaption><span>TABLE ods.ods_esc_system_oct_buyer_one_sale_goods SET ("dynamic_partition.enable" </span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs ALTER">ALTER TABLE ods.ods_esc_system_oct_buyer_one_sale_goods ADD PARTITION p202108 VALUES[(&#x27;2020-01-01 00:00:00&#x27;), (&#x27;2021-09-01 00:00:00&#x27;));<br><br>ALTER TABLE ods.ods_esc_system_oct_buyer_one_sale_goods ADD PARTITION p202109 VALUES[(&#x27;2021-09-01 00:00:00&#x27;), (&#x27;2021-10-01 00:00:00&#x27;));<br><br>ALTER TABLE ods.ods_esc_system_oct_buyer_one_sale_goods SET (&quot;dynamic_partition.enable&quot; = &quot;true&quot;)<br></code></pre></td></tr></table></figure><p>然后可以查看分区信息</p><p><code>show partitions from ods_esc_system_oct_buyer_one_sale_goods</code></p><p>查看分区表信息</p><p><code>SHOW DYNAMIC PARTITION TABLES;</code></p><h3 id="分区数据做替换"><a href="#分区数据做替换" class="headerlink" title="分区数据做替换"></a>分区数据做替换</h3><p>当某个分区数据需要做修改时，可以通过临时分区做替换，临时分区过后会自动删除</p><p>– 1.创建临时分区</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><br><span class="hljs-keyword">ALTER TABLE</span> dwd.`dwd_cdc_t_fin_trade_record_detail` <br><span class="hljs-keyword">ADD</span> TEMPORARY <span class="hljs-keyword">PARTITION</span> today <br><span class="hljs-keyword">VALUES</span> [(&quot;$[yyyy-MM-dd]&quot;), (&quot;2022-02-01&quot;))<br>;<br></code></pre></td></tr></table></figure><p>– 2.数据插入临时分区</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">insert into</span> dolphinscheduler.`demo01` TEMPORARY <span class="hljs-keyword">PARTITION</span>(today) (<br>create_date,col1,col2<br>)<br><span class="hljs-keyword">SELECT</span> create_date,col1,col2<br><span class="hljs-keyword">FROM</span> dolphinscheduler.demo02 <br><span class="hljs-keyword">WHERE</span> create_date <span class="hljs-operator">&gt;=</span> <span class="hljs-number">20220101</span> <span class="hljs-keyword">and</span> create_date <span class="hljs-operator">&lt;</span> <span class="hljs-number">20220201</span><br>;<br></code></pre></td></tr></table></figure><p>– 3.临时分区替换正式分区，替换完成后临时分区自动删除</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">ALTER TABLE</span> dolphinscheduler.`demo01` <br>REPLACE <span class="hljs-keyword">PARTITION</span> (p_202201) <br><span class="hljs-keyword">WITH</span> TEMPORARY <span class="hljs-keyword">PARTITION</span> (today)<br>;<br></code></pre></td></tr></table></figure><p>– 4.查询临时分区 SQL</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <br><span class="hljs-keyword">from</span> dolphinscheduler.`demo01`<br>TEMPORARY <span class="hljs-keyword">PARTITION</span> today<br>;<br></code></pre></td></tr></table></figure><hr><h4 id="List分区，不支持动态分区"><a href="#List分区，不支持动态分区" class="headerlink" title="List分区，不支持动态分区"></a>List分区，不支持动态分区</h4><p>DDL建表语句如下：</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> ods.`ods_esc_buyer_goods_ebay_compatibility_model` (<br>    `id` <span class="hljs-type">varchar</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;id&#x27;</span>,<br>    `create_time` datetime <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;create_time&#x27;</span>,<br>    `category_id` <span class="hljs-type">varchar</span>(<span class="hljs-number">200</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;ebayid&#x27;</span>,<br>    `site` <span class="hljs-type">varchar</span>(<span class="hljs-number">1020</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;站点&#x27;</span>,<br>    `model_id` <span class="hljs-type">varchar</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;车型id&#x27;</span>,<br>    `esc_category_id` <span class="hljs-type">varchar</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;esc品类id&#x27;</span>,<br>    `<span class="hljs-keyword">version</span>` <span class="hljs-type">varchar</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;版本号&#x27;</span>,<br>    `update_type` <span class="hljs-type">int</span>(<span class="hljs-number">1</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;更新类型&#x27;</span>,<br>    `update_time` datetime <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;update_time&#x27;</span>,<br>    `deleted` tinyint(<span class="hljs-number">1</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;0&#x27;</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;删除标记&#x27;</span>,<br>    `is_deleted_flg` <span class="hljs-type">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">DEFAULT</span> &quot;0&quot; <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;是否被系統物理刪 0：未被物理删，1：系统已删除&#x27;</span>,<br>    `ts_ms` <span class="hljs-type">bigint</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> &quot;0&quot; <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;数据拉取时间&#x27;</span>,<br>    <span class="hljs-keyword">INDEX</span> idx_site (`site`) <span class="hljs-keyword">USING</span> BITMAP <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;站点索引&#x27;</span>,<br>    <span class="hljs-keyword">INDEX</span> idx_category_id (`category_id`) <span class="hljs-keyword">USING</span> BITMAP <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;品类索引&#x27;</span>,<br>    <span class="hljs-keyword">INDEX</span> idx_model_id (`model_id`) <span class="hljs-keyword">USING</span> BITMAP <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;车型id索引&#x27;</span><br>) ENGINE=OLAP<br><span class="hljs-keyword">UNIQUE</span> KEY (id,create_time,category_id,site)<br><span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;品类车型关联表&#x27;</span><br><span class="hljs-keyword">PARTITION BY List</span> ( category_id,site )()<br>DISTRIBUTED <span class="hljs-keyword">BY</span> HASH(id) BUCKETS <span class="hljs-number">10</span><br>PROPERTIES (<br>&quot;function_column.sequence_type&quot; = &quot;bigint&quot;,<br>&quot;replication_num&quot; = &quot;3&quot;,<br>&quot;in_memory&quot; = &quot;false&quot;,<br>&quot;storage_format&quot; = &quot;V2&quot;<br>);<br></code></pre></td></tr></table></figure><p>也可以指定List</p><figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs lisp">PARTITION BY LIST(`id`, `city`)<br>(<br>        <span class="hljs-name">PARTITION</span> `p1_city` VALUES IN ((<span class="hljs-string">&quot;1&quot;</span>, <span class="hljs-string">&quot;Beijing&quot;</span>), (<span class="hljs-string">&quot;1&quot;</span>, <span class="hljs-string">&quot;Shanghai&quot;</span>)),<br>        PARTITION `p2_city` VALUES IN ((<span class="hljs-string">&quot;2&quot;</span>, <span class="hljs-string">&quot;Beijing&quot;</span>), (<span class="hljs-string">&quot;2&quot;</span>, <span class="hljs-string">&quot;Shanghai&quot;</span>)),<br>        PARTITION `p3_city` VALUES IN ((<span class="hljs-string">&quot;3&quot;</span>, <span class="hljs-string">&quot;Beijing&quot;</span>), (<span class="hljs-string">&quot;3&quot;</span>, <span class="hljs-string">&quot;Shanghai&quot;</span>))<br>)<br></code></pre></td></tr></table></figure></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>Doris</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Doris</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>数据中台-10_数据服务难道就是对外提供个API吗?</title>
    <link href="/posts/2022/05/f85b2740.html"/>
    <url>/posts/2022/05/f85b2740.html</url>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="8fecc3ca7361708660bc6eab3b964f15643f5e304e7cbeda8dfa849322008fb8">4e4fc70cc91fd42566446082a751780fd5618d041572b8bed7c41bda7a5fe16038be3debec314ec22c9c045460029955f073358e93d5787a18771b110dc4e071212109dd1473f519c31edf2cc810ba33164826c48f2dd9fcbafe5d09fb072fb5f615a6d141d040f66adadd3266f3f7c00f0df3da2932740a4c3e5cda3cb344b13dac9dd104eab2a536c8c3a0b03158a217a5dbebe16b2c472a430477357447bcc9f26d2fd3c6066ca02798b9601678b51b5ad9eef1afc17839936d665d1cc16562bc556ca328cc499982e85ebe1caeb0371dddc00b3f4b8bf2a2b510e86ef7b46e479f012189cb716c9e2b0517376978ebe8523df2d6c8901a9914e11927c591b3d9ef48b378160e48c385dc87b537af677c3eb0e409884dc360aff1c858597eef6b408f05b27cbad91223afbb8e2462a601167ee69d3bf2e6e08224afba687a3704461860bae447700cbf58710fa71e9a6d9131d2fed17b89523c53905e6ef21ee07cda366485afa01ee4c9aa69954dcf3decddc79d74a20add233e9adef311dcf93ffce74ef0e74f89328bdd5f3236dc274ba7fbd5e7dd3d86db57b194c5b35b2577e52e0efd9187214177e209cbdae1285a050fc1b02e690c8062ac55efe62ba2c98fbb91fd780db1c348353a49cfacaf0ba4f73532d0f17e50aaeecfc9f7a14d72e663bbf1645040e70094d1ab19c25f7d9931d3178a1c8cda4ff69f79675f0e483f95273e710ce80034c4337677efe16ab91624299538a36f02460634546cf9c576b30524cc0c7ba14bf2539670638fd08801173a824c8e7d11d21e270ffc3faa56e7c86c2ce5e729258593795633c84f9c3cefeb005e57a781c222fb251f8c2aac0718de0099887fae8a1621f7c863f431a9183988819fb8b97c4643ba6a0173184c14f21f92f2b29fc445c82e0994010cacf323a08dd2289e8dc8caba6c4e587f68778aa44a4399ce9c4a9a7f42f82926507247f2fc3da1404fb076a448a0c36ee8067a629e5334f505d7a3c8ae878374156a8107daa1dc7b3a5ab3c295b635d9d61bb3f329d158e364bf822b190d4039991a8c6c2868c95f396a7d846ba611cb4d21acb98dc5d4a37b9b8760c783523511a95a53b63fa6fea86fbbca2d8ecf25b25f2e7ec72a2533015093565e69da295f0a923f5a43e2c1253b4724ae600352c655b0aa8a11b6e80dc56ff3cd99a7ce9be8e9929c67b932ade2b7e458e8c636d26c09bb1c2c8cfbc449d7a7de3b0dd1275d77abad4cc417442d85aafc6d6ed9def9eedad9f379d3ee8eef8bd734ed95801b3a28f1b7bce95a30c11ae12a58968790c54cff39a415a9e7d7e2aeff2e49140bf67a87528cfc8692d4a9bbad51ec58e00e312bc3643501d309f10486c4354e05163185939326e67b8dc7b7dfa04071263089c577dcd2a6c94eb30b962ea2014d17aa406c00901ea6b4fc70c4bec9cb263f73aa46f6390b7d043bf5a5eb50013f2a8980bae3103cc593e307dbd540c494d355add6cacbeec258b7d1c3379ea6309ce5135508550d49be1cdafcc4b66ce70e4055c92c0029c59752bbe3d26825c20bef7a8b73c6bb94fe4fbe8de86d33921c3950bf30e7f84b91c405c2c2eaf8edbd8c871eb3ab48df65f119f3895e42300c1001ab99e825d1fb905a91d6b9bc7ec2f25a39841d222012723cae3cacba7849c840d2be639f92d09f8388ce14cb4a113c3219875d3a02a0052c26be34f5374fe4b6efcd8cd80cda1f57f5e727631f8a51cdb04f28794edb40881c57446fbded4e3e75ed98add353d02e8513ba40c0f961f71b9b2e9b5916b434c481511336becbe824d1c9a525abf3acb766b49659ab66fd293abe94d06fc74de3f3edec3649a66ce89c9cfd736ce08ad64028263303e98bfe393077b2bd697babef1a1fe6897e1b5d78f7278b85bcac6e29d385abca72b03d0017cda28a3093e97f274f0fd7841991882d59b705d54c86201ca7375da3685a5636409c1b3d5885fb894bc689dc08cd9d193c61a4bad5650665584163b3516161d8eb07722cc9a549f8d32002dff12a8e2e43fabf1f20e7fdce2333324832c21963e2d9b86ad37c3a2e8e17de17b5c8414f2a19513daf04378f1bdbd5fdc495060c76c0915c894220a3c56db8df13afb5297b97a7397a1a6810bb3bf49542eb6d7be21c39b3b5335bca6623a1a80f49f13699f3aebb8432db46245bbeeef0a439520eabe7820ee45f0f4b993e0199269def3a75ec6dffbff8e26aabe32ff4a20ae87ac42f0cdb29e9d55ae4e39243a2d5eb399983ca30cf070f9722fb25f04a907e03355f77a14942e525ef56341964a7f688696bd79389c3e23a4b27b11b073338f97150391054770dcf489033a4a2fa8296af9bbe54ebad4ec41457003c149c93bbda3d3593ac78ad1edbae10c90cc3eb0c088dac0c4e89679d59f51eb33a225c146c6937c899706f9f7cf4e873abc522f79f5bdd80c785b3138522556137faf418920e8c62622b1ff05a4834673d031bcd2b116c80d3d19cc1c9fb782a7e83f8124dc53aa3ce6f77426347ab23863b2541288809fd38a718e01cf2874a02ab93fe452c1ea95f0164a37f0772199d6ef4ed2ad86da6caa73b034281236d2ea4c1ae4389ef501e9b757517a00855f1e50e25835f347632eb96061792cb616853a4ace74af6f0aaa35415c9e18b2e25759caf985471d1c004e8ac235d2e6fa8f04da6a74295c58b401fe35869b6edfec6f2ee755ba66173984f58c5bbffefd9bc9e900b256ade462d93f07d0d9d3f5647992ebfcf217d8b40873e07769ff1167867ef40fb3125158121e52b955a30f1f808d437f25190b3ff5096d1cb2806a3b9f55b60f42d63b62b483ad809d1e73896aa4d5d8b0b21e4a2b04062f985ff5f6367b7154ec5340e3457113805109a370de4d7b69317c61b7e03c6bfbda269fd269d82ffbe6467e563e18bbe1c0577d5d6d345a6d5f54a92ecea291220b6fc28c69c037a5aed348f8d12bfde10d327264db123aaa3496b58c5980bf5e26320ade9e962457963551deb852a3663b0a180810cf31f4b2060c0fcc7edcc55699a04343119c9ac3fd40ef7f3ac3420ff7c8d414188a266528bf23c4fea97b0027ff2a2336cd0e7493a31885946c1c6d3f5f3d5fbd7cc7353c738b44ca6ad5d857095fcbc2020018e2c70944f034508891b73a4f5309b7f255bdc5efa316dcbd69bce74bea9ca31a0c8fd55e983c55b39634999bce0295b43469799b740333b07cea470b77a50ebeff0a68494de6304258e7575c40aea1a2f8621b03f29a3c3c934bc6d25d13f054c55c1d3d0d98c92f1ce6c10af2c7bda471b0c42c63d33f701e73c4c5c8f2580ebbd18e0d45b9984db832c6c5c9fb0c0d60373c494ac93aae231292a526db3d10dd3f5cf0fad25f6b312758fb117ca0c126dda35e1bc043d083ecf5cc6e17363e2a8503c5761e812ba554d48f28850243c83d9fa1e7c864e7c1107a9ebed0302dc22cba943059cb5ed2a09dfd9b4675d5669f59550057417fa485d5f4a5c66c3457256e32f919392dc7aa9bfdc7b99a77a81f4c757718843242480818600471f80a1b3438972e8731480ef7ef13b13dd06889f4968a3deea16b43b4175ff2009aa88bcdc1bff2635cd8b4c92057079b357d97ce2d5dbcb980b61d4ff1224b37ac5b2afb74c27046d8aa0398debeedfda1b4768b6e57c598ad0488c316093b5c2831f9942dd422e9c5ffee341fd71de3a3775e7826cf10f4f609e3ce8e0def8137f02f0a6405a9eda322337b9d1b2ec242ca00127c95adf9ce9a259db5f797d8da4149f147a73d03fb9d37126e8a41d68407d9d5dc007b1a1e3f7d40e203495b2f38bc71242b55b74e0b22cce495df200d1dab5ea920efbbb808c2225c10aeea5bdd5612ed720b8574fecfdec0de2088196e11e8818f8fc75b54981674d627f34e4870fc994af29209d4bb1a5723b2fffe1a97b2f2652797fbbab8518ba11937cea2724ceba3d0c7e39d924c69d957af4e329566794fe4d64c135aeb206252b68e7b548c99bec45005a111d79b879af936eedcd2628f15b534fea345eaf77ef28d2793dd0f2ebc935e9dc00cd63bbefa85d509049d5d311aa1ce04f429cd76c3fb2562e44c0c4c478d26a538a2fdb9c7bb437f371b364950e82dca9f251afd897bd3740864a010be096838da6dc9d33d8de690e9b157880a37dbb05f482be8f438640a3329e67f90e67c1118083e5d702d4c691d9c7a0b4f1884d911ef778bf7bc1b6b7a56fe568180b2bbb765d6382bff6544364d643df6167c22b4c54e4557d20f53bc9a28da12aaeba949c235d62f8cccf8f2ca7822b808c448702d50d64d6798daed4a6b4af6a5dba074ed55d72b04d1b18f823d9340d3dad318607ca4ab6cc1b6c6612d7975aa75e2f699123d63aa4edaaf17b2830b7e06f1f49dd1ee9f629668aab9b89f9820fe9c820147e61e7423bb8ab20605b654d4de821ad1f6e77044f973c1a4220aec40c3880cc6cad2a03e60f8f72dfd4177936075b499070b24eb0c137abb9cc981437713a198a08a0c26a0caa274bdd74ce397f4ad4c59aad6b14c6d13ed53214616a42bc35fee3c0a12dfb5976fbb7d64c6628a3f53bfe151012be415dad0e82fbbc74fac5642176bd498b24c8e2d36a0d0118460528190d76d3fb1d1f3acd6e7086fc484e2e3132bb084e46254991c4e20556f7bd185173f4abcbe8a019659747c889ef63caffdbf842f1b5fbe967370f3f1e2630925633d5444961b2413b74cbb4459bd8b15d0c40acf9c932594ca8e14f701463fe9b0893811951592f785c4af0ce6f7d67655a6380acc170d5d45fdda5585903dfd4c6fb5bc8ffaa26780824520335e90883858fdf70b0c810e9d09a81fed63aecdcea69cf5d8193d2043a7a9f08a4c305fa28426c69a4f097873f9a76e02d24608ef6593b002bcd2976db12f88e2df800bc64c7b7698070670f8bec1e4305afdb47ac6f649e9951b32ee2dd854371443fd0fcad5eedde79463eef7882fd2672342c0c44af6f7f38aa5dfc5c51607f5013f8781edd490d895d3378f941082f48934456a0fe5995b7047a4e8ca0ed36dad7102d669886e4389a7e33b1885843ca751491f13dd88b31c94f4c5884f6f3114ab18427d905a177320fde51dd5897043ae6da981eab7c8a7871d57478f3c70363e6edcc3aecba284fbd1f1ed4e263dcb0c8603e502564b18cc0b424bff763fa5d7ef4367228fb5fb0da24348006f417e342c8a0a774d9e17b1f194ed698d56dfcfd1f8361040caeb3e930510413ead50bbe72b6de468178a456553e71248d751c455e282a32ea8ec56c17637e08504e8d0e89db501a9be98171db960e80cc810d0f00670f91def2ad6e20a7a1d30dcbd2d8f452b568563110cc0b6aebceab1009c0cc33c262e474cc277c90b4e2b3ab356870195abda88acb5a1bc2c166d0165a3bebe0782fefd126cf7c51c4bd0170973d70ff007f37239cb645da98204370dec0e0033ccf3faf12ab42aa992a8229935da8a42743327da48efb9781e665639056214c5fde4f9d0e12cc4a2ce30f8f73e44e03a35795349d749ce72d87a4222ccf0b2171370ce7fde9f5e9bbf0afa935c13c92a186df504fd479877da479ff1659e6c38262320e54f1b868cee6f233250d14a289261d6996f12fe04a3419cc13beae6f47f3ef8d993f3428068a42e4ad64955c7554ba73477d2776eb71ef6c1150f4989f6b32c96be8428f29bf46b2dfd7546d02322f883925be9440c125cb3a1b5618f7e7f6f97e9d6a5fb5e0c3c3b978f00d9a5255ed8c8a0828cd4f8c789f278f820c091088462522674ee9bdb7770e69f2dcd9d2153d7baf1143b2df0bd67df568ad63bfc6eb39989a1624586ddb8fb3dbcf521abf9c6b540d8acceeac6fbc8e5597caf44337e1571b4f04a5a232c2404e6b256ee56cc6406748cb8367ba1e988342ba3e522b693ab791341dfa45eb86250f7bd69f020f1b8aee1dc18ccb3e3e67f7c0606705dcd8b7681de14170d7f30c72fa3744f180192bf9a70861a277440bb2dc01217e4d796f393a20247825116b1b3acb445602132504e11092044ecd1f77cb0d1426512c79891deaf2548f2585e6c964318523adea27c53f08a9f14d1c29346dd03158a8cdcdf4001c6bbf8d31a4280b867ea77eab3a38d87b9f10e0c1cf97bb99b493431f98247624ef92b45abcefab540e31c5a59dffc16b72a8e6037522f513878d41df884b0bc5030c69f646e00cfe6396636ab1380ff3088f4cbaec7c399f684a4cbd515113f1750790127ffc02c752dd26681f961a0013d2b0b08d7742736fedce9af0e4b519f05a2f4c8b6312be530cdf093f1fb0ce3f287c5c5fa60c11ed6d94a010ccbb1e4e6ef01f7531428bf2deca578a63ca2cbd16aa8a1f6af399284048fccfc2268d39d3b507f82220cbfce556067fea70a7d8988b434a39d5af609c902253936161be4ec8b7b87cca9af21e4715ec9944a3b3923c11573cb76d93a3e693193715a0c796dcf1194320f033049057cfc887eee83ce7975be2e28f47890c1f8ac5fc5548da172d9cc23c2f0523249152936e1611cd10c118233fd05081848841d30db451550f594c5635dbff9787ff0b6160f44f88c2a0cc3e1cc89b03ec81ac2e9f074e1aca0db0df6019958a2728e18cb08ad8b04d0097f153b986a11e85c9b9a67dc2ea60349da185b456d086f7231e2e5bf7f5f9a8e0f68b8930adb876e6ac1787493cf722bb1d9e493d6462b310244dccfa2bc69f8f02efc1c23d3920d83031791675e685cf418f8c3a9a7cae809bccb816f93ea6d9e19d6767762f95b616cec628cc153d452fa796c12e1954ecdd952ca29ce008883e0159eb4078e94683cbe4d8486f03be8eca7b914e160df3ebeb3fbe36c506fbbe985d21e4abfcc898d9554f343b291bdfcb6856e8d48fc19dae29b99b9d8724e224278edb88a0dadca6e29059d50d9590717b90d179d81e532a096fff2c89785d3eb8fa55ab0c6d3fce205e9f9d2ca416bb0092179db29f08405024de0c783b77e5e18eb13d04258c138b32569653d109292898c98796905dfc206840fcd9b19aa5fbce3853b9aca9c3ef93b50de7e711eddc3804579f1992e1094a2f3f2752b8dc4128e2f05c1c7ff54e44c85971f4788cd9f83f2291baca698f94c7a201f9507cc3b042d93eba653504542b27e1e6246a42e50efde4047e305319ace692e686310840e092cc27960a95cee2a3287f9d02d7cec189f8d06897b5fa75c8cf0c9400f50718132dde9b95a44fa60d73ce9f695afc7537ab5d67a637693289971c9efbef15a8feb399edca6958c54d28fd9288a225d526bc2a581729a15f888e2ce8587f5d78435d6c88eeb506c1f3af45e1d50ad9102c2e3af59b201cd2b361c8e4a6df2cffdb2f5598280e334119f917fe4d33a9c2b1665477fd2ee61ab9ea03abd09e75624146acaccead2f597426759cb69aa52e54aa2ad4895c5938fef3bc69fffe793e1f0f1466b9cc7726b5f6c665a393554014b2423ba4544cc754723e96afaba1f3dd896d7215cd36e613828a3f28f7585ed131c796c634881db8c0b8b07f17e411412b576042dd742989522304e906a5eaabc39c41d2a3735708a859e4cd71733edc0a257739b24bc5a171903c29a8fe03f0f4d477556909aefc588df145938181bb20cc77c276fe31aace1f1d3e4865264995ef72cc5501bcb4d5fe6348e86f55b63789335915e3978c299f4fa7d743dea7bd5b4987d8de2e132029d4480490c89e2721dbb18d4092a535fbfee2f9cee6664dd935c0750f05d1da6b28f60a917742596377dbf8cbef06919f2634819b57fc6b1601569804004d50030d94c7e354249a4b0a88c74ebff9c8892bb2bc880abd5a24b1b905fb2817994f5871df3b1a37d3f923fa3d24588130d687bc221a6afeb4db0b0329e69b6ffa8f5030593c66bf2e917e85fa25f057f136182ffd1923e56fb1a8e8804385b393ad8c32fea05004940f4937b1a32eb7cdc6256b8ddfbf69a071eadc9f7f7d60b746c3f1386fc49a4b3ca04402aecab4961ba35c0934a4de79f2011022317483bf90c28e0ef074a6ab9e6362e6bce193b6e87a10003a48c7c6c6f73c49cc7c4ed05c6d1983785a2a7d70926730bb14342f7e90db635d51c40292563460027ae39f3ecadd49855a7b7be8403484bcf0375adcdef542318ae6fd5d2eec524c301210f3dd5112d1bd0df596428c858192ec9ff4c0d85c03d63a06f46509b95035fa1344d9a5f868dedbb8ae6dbfe30f8a010ddfb7b00b1dc907acd4be4f236a5882d9ccd91e18308ca5a26d1eb453fafcc72f8d24e58c77ba5b0374de2348e723eb925b102129006f699fdeed819063f648801d16a3573b78835a3322243bfe983aac3688552027dce21fa667d6e3266e274a383f3df5fef0f8917b51aea7cc3e39473d3d2584dc4e507abc65dfb7915f3a8ac3730031bab4fc931ee2d19ecd8aa34418a219d1231140856a069372b39bfb42e3897679a326c5606f0e5f422d957404c1236f1c559a05e2bcaeeddfab9a03a9160758428df9ad037bc4582a0b1bd2483e99ca93fcedc29dbec51da48993efb0db3f1bc0f09475db9df3a504997143ac9d45968f702db960446bd8f74be707664f32c97aa33bb15632dde557024fa7e1a672ef9cc4eda4c5ebda73a77a4801b59cc23b06e1a9d72648bb986e36122ab7cfdd12e5fdc46b358a5ef88b1beddf0102231d2c17619845e4d3890b407d9b432f413112c77bfdcb5d8c2665b4bc2526e708a06e6d96a3a808bc09acac2c73b2f8c58e42e483421752ae78e3d50b3e55b09ffe28fd950200d175cae42782f44c3a6e9473f29d2a5ffc1f160d92a3a203e1470487c76e66fd7c66eb0bcf54f205a5b16707c6b9bf142479bcde8a1875f3cf18f37c84eb8ce4536e21df93b2eec6a7fe6b5ebc67279cc2eed117b21f0d8fed4cb1cda214d17a8a749a38539e9da14022eb6e902cdc33106a458130d5273732850ad5d1cfdefdd0ce647e16e4dc17dd14b37468dba32414ea0d7f30b4f870071eef49e058996c31bc0c625cf0d832f39863938a50cb3a809f450b9f20ce13614bdfdf91199b27053c46c93c00c6208c495540b82e42ed3ce982571e22ed009d5cbabbe200f912050827a918a61beb0b6c2d7a3526b0c2713aeaee3354f71645eea64e75f705dc873d619362f288cb47f561ecb8d254229e0f9d204e58cbc9f7ba77af3be10219db80884ceb6d96dc34a372e89394002bbb813b4ce982755c4fe7773aefc567aa5cbc4f1b0fcca95f3dd6034b4f145c73f59498f85a952f85d8ea70fcbeac5100519ebbe1ea23c2fea411e9b66a89d11d305b1c8f721a8095570f42c60d3fc5032540b435c1a1a90e73bae2d61f4b3e5166df391d5f4f857196e876b9daf9a804cbb2437059a5883398f9db549812083217e0991ef829785b0d1e7036b674e6736923ae91d8c0797f35f21abda44175134f6c866bc3d009bd0e1e9e029e1b19bf998bffe35f45ab99574ac215934f6abda5270c6cf10c0f35662fe7275acd44e137fc487e1e2a3c549c6ced95d1d8da004ba95d9e86945e8d504fc46a11c983ce7052fde15284e83f28f3a98d54d82ed25115269a014d07744e9008b1adcf574974b4d384b873bbe9fe5a54212ab02603c370bb68b8d14356f6b1500a0ad79fc08d6ed7d3e5bc21ac4c076108560d99ef8a4148ce8bd54dd02f9cb44bdd584d5a696ebc09b0c80060689c32d7a4fe5c57fc1d9e28f24d42895e03952a79f9c96bea84c82125fc736b958cf3284e83de274f2ca5fa61b8aa7b70a25b384579e9afcb7bae9bcfa102746f04468f998cb484b03e8c39ca9d32d10f32bd193a1114bc66b1779457211673d1b839d4403c29641d446be38aba9d5d6f715e46f3e1f44f0a09aefde7d9f7226ce2139d956b2bf096e02164a2d091cdb310acaf9d519c06ccbea1ae4fa564d6c5a7a97f391dcf5b7d7dd72c48b7f1d87a8c973587cdbf5d1d4eaf9387c2a36f92f8c1e2eef029156faedbb9d6c6db63e9c2261a5859863665447440c4ca495b2180c32f9412557554f33cface6fc664102a4b4b30c88923db9d29d5ca9ecda67f360c385a3a63b07e1ab62688ef66199683c8c19bde6248b163232b580b5d8815ad24d21c4a42a334f0f0d5dc0214d45a1ce971f53bccc4014a1f3b20f9a337499ad9169cd72ce673911ad22068b98ceb61dea95653d09eb64b5fb696d174b74785d544b47b5188fe7c4e17be02c226b998d6b1c733a2ccacc39b87e9b8d9ee7a4a1d7febfccd5beb1a568c45200edcd75d9b3488cc6012c807b6bef865eb108c612d3dd41dfe4d603c095d1cbcc1445e2c9d4f7bbe9d50d525c8f047f21c69d887bed57fefe519bb731d524419b83608f48516a9b27eeb6a8cf9858f9048cf60063c8ffc98fdab811d1501eb55a6421b5b4d0d789a600e33d648eff5dc33789eba58701f54f540e77def2be339c840cf8ebbdef2fc8615a780c6b8b8f9488e1d64dd5f093e700b28efbf5a73e0435619a93e508b142a9594b0779b2c03ec775a22d4fca8abb0513c78eb916329ef533137379c6160ec1638aeefcd0afa38cd77c7d0c86b85d7ce9744e5e2cc6ec8c870a89e58fbf3b7df5969687e86a8571f2a865763f2bbdf2710c1e3c733b6e73e46645978ab9c96d823f981f1257c1c1401b21ea3a6eba00ae90285ab1e9977174f1728a2d53e9d9396456449f9b2c31e3b95c069c280e0f419778356d4f0ec5425cb6c1186c0c8357bfc878769e059c30db05eaf5e5e0a942f42741969ec6d0891a0481b9f9449ec2659a821347cf22d7726c77a3279538175f994a1b4ab8d89faa1c7c2ce17e2db9f1eba023d7bfe024c61dc84d70c36f63baf7171706d9c03bc8c8d206570c18717c17b70f9872e568ada1f063e6dda59607ffa0e0b63fe5301d829c3218f2e71cb5ce96f673b108b80595e499af94ee08b7d74e281d61f4693ce000f8524f18d4d443f12a5a4157d98814034d502e79ba276047d0705a529fe7066ded804e555770e4f0f99be6baec8c403f5d17712ecfa066799b366bf6fb15796f6d1c064c28baf65d0e2d2e8a61954f37bba0b8240b8f56fd1fb66e1cbcccdedd8f7ae4b4bc478f22d911438563d2b4b5263bcfdae69b109368ce92caa3e40b7b3608745c61d762afc482d085cef46ef3c6167f88bb5a01f790ac5f36a689a5b70f3d062cedfc72e53613b3e61d89b3c4148af51ac9fd6e2a92cb9a104426d83a6520d05c176ac980306e11573cdcbcfc0081646f4e2ca49adc58e02ed8b1a3f67aff15ff09786df4bc14f066d4c3914c00138cfe46e1b04a555b4c77a074a92d5a5a5b3f2fec0994830126c377efe64720361f69c324669dc3be7b4065417147b4aee4649f93b6fed5edf1df89f1b310364cd77029b10159c92151a800cce32f41e4d0a50c330de08ad3d4effe00d3043e68b9f5133c7ae90260e3a75525a163731b162b0ecc6a51b9bc1839d75b8c03c83764a2c96e84087f724f12dc0d7470d31b97ee4d0a066c18ff7a55e05b9edc39e32a70bfc1ab4bf00bfcdb59325f31dcf94a80809c76246501294ea5b0a569c39611ece93dd9b87e43793e1da153b6ac179cbe28359ef714014ea9cd0b31b743e61ee8b1a5921545fb6400ebb9f8599f7b509338780d4e85033afc87d1826c5eca427f7587552402ae194b3b47687eab60cc3a5d751e2129e486fe46f5336597f0754ccea2f13bfd2a866655ff97b9ab2eb83e12e2bdc7b77dc46a84c05c52e05852b0c00fd45ebd80491fed44cb05e44fdaf81f1a88d26fc957310ee92952145601c393c2f33b9672e66dfd10a864264ed60566078962759fa3678e2212a496c0d0f78318b52f0e50b53a40bf4e71af515ae3469e1c0680005d2148bc0e93b7ec5daf3ea3389e58a2641edcb21f27edbbfc9dcb4cc5c65a9a862278d106bda60b2466765c967c5555b79aa4a5d0112a39f35d385274666e8ad07783e6f081b964fed9456419ec5a2ceebad45fde0c06c14d3d05b2602f3d9fd4d9d97812e93b64fa1cba1fd1413a0197d049246503bd61ffe2c918d08e7d463ab6fca35adcc09ad94249947f0d828ae85d77caec895bcf374b6cb04aaec564185d3bc9e2728c1946fa8fb9069b99ae442022a10200232cf9b0adf62c3fdc8b4326478ff907432a2159297c291207fa5d0f08afdf8fa13e5de446f983358beac1ce517181cf845c58d0eb4931a11b4e94da1980b3719196365a0f9aa55437d0e3586e1bac001a0871ff0d282119e9515ed200d412182b6ded4d04c042f85f738de29a505423ea8bdcb6384a9cf62b3337d17a37685f8a5428088332f4866fa6a0edb83f4ce5010a2019238a490291c9ff184428aa6e6b52cd7bd9666f860e45be542e5dccb482e6290a9bff84ed1755a44b01ecc6b218b1656179b0a72a73e101a9f3b77ac42cdefdef2b30a01589a5a8ce0cd67db6e6aac987b50fcda269c417869316276b34023fb6db49b6fb1cdf83e995716583069452fe8a1263d2d3410c306136fbeb51971156db0e71cc9f98ea0cc8f4803cebb3d939b4b1a3918ef950f80cbf0f81c462009ff3ab8bc7cc9c148d44e301209515ce8e13f0d2625c3ad0a5aa9ab3169c360c1cf38f66ed7cc0af55d83bc0e37982d67c07434c443ad702df97751f3815a8859f56733688f2d76e3662a58162f208556a1c7db3b38dd86971e954f336166e0668fc73f5147205a5b85ca114b2c4e58b10c634ef7304e7eef584d115f6c7c6bf6d8358e16e980bda4d2029752d67f1daa997521667d7873cc53b022720dab6da2c08a4c6edb710e6fe58a9272b3843e48d80d2e488abeaf02033d76e1fae6f4d1988a8e79e8c1ca15c70eea54bc774b86a35000a5cf14b1cc4a9f15f8a5b51376788900f1b1f6581caade6f7189fccea29d6b6ff60977fc926d46d68f68f32c57419764de0a5ae9f27df76a70c769fd59d9f78b2d988e108c828f489dcb052b0413084c2a77e9c07f3a78c418e04c870e243c8bfcaa47dc4dc3fb3e048c73ae44bc93da6f016113fcafef45f01a5eafa99201bded87e2882d9bbc0c6b0524ac939c135e72652c6731a759ed8ae62079c0f6b521ff68f2552ccf9cc24f5968a659c9eff5636b900da3d30a30e5908f493c7e66c07a51ad0989d02ee9c80aa9c1d534a4b33b7301daa587807ca45c9b28ae20cdf961b76ccdf6aa0695188e6ede4fbfea34ead565c45d84ac534903f56d0ab49c9b1904b48d1a2a1d8c10bc993a4441324f45bbb668d5a59d85c845dbc15c846b484442331d8074eefda7b968adc4ae06189266a16ef6909172a0d9830f8b6bddb5722f6262f444bdbd4a723d208119d4ae7de8a8dd164bb4ff52aa96463f0b56e81a943395a11e034069e7caf2fe78bc2ea86d0d81a4c0ab9caef6a5168fabd3df225fc5b42f261a04a3c18c95759b4073fb1ebc281ceb663cbb26f82cee692cab1457778cd8c96ae516c7b2673f032e243f632c5dbd9a8d13ae6f483a93024078fd4a7ac7046f617c8f4b66bdade56e57d8ba110b596ba5722ebdf697eee4539f741426fd458bbb4dc358565a41dbb81837913a876d10048ffa051a05273302bbb976d880dbce5c0b71e8fd331ffd4a78ffc59d054fa91d49d0f13ed114c69541bfb6c456807c83c202a0682eaa0c2cc63d6f633d5260e82fe258402c61ecb5004a612f26efdd9caaf359b358132ee564f838af4c5f7034fc31133147c44352c56e19871aaf85e5b18fe7eae771a6080239e059044951699534ab7f17dce94bab783638b9aab9c5530f3895f7883bf8b26e440cc8983c82f3c3c74b424db531810a827a3a83d844a9f5006a0af980ebc446e7d67a91eb0c07a3ab5022df4f77b36a432290e9caa1948359888efabbcd3555c2e9c32f65c7e736ab7e9ae2b6a912b2b6d812692a81c6b69829438f80df73a2d689f28296277aaffa87da6de88818d4728e65afc97ea78e6041aec76faa04b0f9ad9615d44a2cbe0aebc8e2f07cdf5eb5de3b1f49672a6ad65bd9a0484452577ed7155cf1f1ebcc852ee2fea9240183bc5fb62680665bc763e6959f93621724a737ec07d93826ea54aa47ba7fdf0f298f51f5aedf0649f0cfd163284e759bb2dd2e0f7f6add78027c2b073c8af98f7dd2e147d403a983976830ee1a7a38b0b81784fbe37c885cd7381bbc28441f021d9b42bd8dcd8f9c4b23e2702fcae98419c7f784d3cb43110ecfa30620a5a899dc657a0f5ebdd8176e47356c5eb1cce9fce4f75d29b1242e430e04868ccaf7a7a447879a3fed512452e62309863175d373976e5f26b2c7ae59e5ab8368ae00ff11b0d028dee279b5e33edfc8f176c8e87aeaf1b78116de27657453e6a8e577ed4466ac4fc17724a8d6e995a79143ed098ecf9be20a9fdb01b68587cbb8c1d982332efbcc9eeae3731ac64dc0f5d3940d5fa3b4c203a136f4211154bfe2f0ead713faca8113f7b592f1970702b0db95c86a6f62a0d27d8d6485c93e0a4ce9580110a48a7d29462673cc1e4a3cad09648c6185548d8aae3d4c4a5cda74c35ccf5024caea9e68318614babbabb63648f8d6cb4b9b068010ecf4da51bfec19d4388006175f1c56244a77858041f5740e01c50696d2df1ba5c3e48ab825b3d5ac873bd8374a4b6ce4445dac36a39b36a2db381f7d27f57269b7f31388c2f0a01d5eecace5a334645a303358c390c6d7434de5f679108962f5849f7414a9a639b709f2c7ad3f9c471f48a294eeed8b753c0bc41689e91fb01ddb5510aa3d9f60192e93adc9a1157fb07f77e6a51cd1069a27fd4fe51a708ff5ce20591dc60f9f5e2cb73d3bb5c9343bb141d3d673549993d4ed816d749108d6fa08d49f56c134c310e4f5c454e70d8b781ad2ca17a897aa805ce03c740066a70d40d6336ba88c7bf79328bb0e53ab036e82845c317308d3512bf9b450c8d614447ec442f2ea863cc3ce2965fbd6d63136d8f095bfd45872f57e9b2661c671d06b08eedb9242db59a0e9c5c224ea28f7de2587f525d3eb1173759a6e754328e28a186013fe68098808ca6ce9300dee10599483594c366810c275e3eaf7c51028baa97f3d7bb721038f30034b3974307633ee23cca0974608e71bd39c30e5dc6652e66f9bce0561eb8a795c9a59d729f5aae8cfbf59611768af79840bdd5f60b482632e5844cc4f31c6ecbb59fda302f954f99804d4beee7c3230e4bec4553151ec9b6c840f9161a99efa8daca6c87943446a416bbcd80371f63d7765f313cc0ad34385856bbe3a7e95aac6c9bc50a919c3f610d7e90e7dd21c48e17f8faf540375d76638c196740241e3b4f3215f05a7c053ccc26595e16f74c7f72bf9b4a6ac8919290667c435a40946e642f9c37ad5f2d64206ae97c171360df0aaed8a460e037b6671628780c02a30aba07362eb98f11b2b495e12cffef888b58b33a22359e7f4fe83ebc299d86091bcc6c0a688de53d4c75cc04b9560c90b7959f35f91a8e99083e457bc6281fc1623f1b338f557dbe300f56ebe8b75a301c22cce233e329975946fea2cc25f522a189c67be21c091b2cdc0232dc7e0b70a9fa6346ad9d180fb39fbdc35bb5eb8537b4ddfa51fe10ed5bd6ad76c70f01cfa074dc3a8557012c647fb4ee26a7adf3b4579ab9c32fe5e88943b1f5575bc7fbb0f3d82d0bfe50f5e6b192d155097b93ed984de8ac2384f13a7e40bec45af78e1122b19ea5691f60e1ee391f5d6aa441469848d607810e87df43cd300826dc9d6484aa089a1ca699aeba6af05384f0cee91acc657cea3b08ee38c3979de90a9a8c6eb0fc6e23247f00cee530d5dd8fa057a27d3278356fe659ae3b92dcd03274215d5458053dd2434d0b664054033323f8fd552a4df3b9fd7fa776a89874e642860054b755408957d0b3284f834741c8c1a49359579169c6dbf0a85c93f6d72d7bf2dd06cefe47bf99114dd463ba9bdf0eab138516025cdca990ed909e87a8089b8f7d77f7d406cbc1edc149c2a46ef448dd7e00ee274a76acd533e990353ca53edab5ce2daa41e23649d004f93009b512abcc1f88a0ef65e0c692e5cb1d80cca964ee0289d213e54cd9525bc84d484ab4efdc2a3cca1ddabfb53a6ddf8794cbce66b500265178af505586a3600e5a4e11d5f7eba5c41fe39ff9f14ba650cddb35c8ce72dbbee8fd0cc88d705451978a7de46449235e0d31b2fb861b4ad4073da629d0c168e550fdb08e1b4c052e7b6bd725b2d0b7115a3905073b715f4f69223ba04d1127ffd8205990e857aa68b7be9d0c828c0df85a46e77171d6e40b24a80414e22f27ca72ab9dbc521c1746865047218989b00065eb8bab188d088a2ee7007b2427c97e8303e5ae46b56517f621c34c259a207bf8d385271745ed6681875c7331fcc1a6ce754264a63c3c85a324922e03098887037a77d2aae417843e017b17f6fb768df2c7c08156f3af0542bc4e7d518fec679699c5ca67988de2c698e4bd203d614d5c110612e0718a5e9fa420fa3f5b95287e247eb61d220d859c99506a1deb11c8dc2731d1ea6ba3299d0a1a42e00e5bc3e27871ce8ed0153014884a88c2799d812741b57591c00ed7d23d6b21c656a04b61495ed58b2d3bb632bd9ba8495904db7f331fe8cb0765a16d2a74204290c37780fc71ad2b49b58f44c5cc08468e9f3a8e03e5c9a4a3cdb966886fbf2fa06e8e18df1268473c188564665346ddc6d1523f5400a56aa01a5a9838bcdb3f13053f69241c08a66afca7c611ddc9d5be6ea2646e6017276a0ce5858e67e58c55eaac074362d8cb7e3d5f76a9d27ca3b270801e6b2cb01fc85b2a248af29f26a0c883991faa899ff82f01b20301d73c06cbe94db68ed3e0989b902d643654b29285366cc57379018e6c92eef29ebd376692b39a1dda56f9a8dfacd6c67d59958258df20886d27232302f20beca2a8a10d2d44b64f832f7683caa49caca9a2c741b37691c9ff3ff1c2bd27728fa7a50967a6ce88a43061eee4c79fd1bf602d747f30958d8b9e0845a70bbca11f969ffd26447c902740baa7a730d5d40ac14a78f2603d5865d3276289cdf79a03d6c2f23d41270fb2c8b4520e250044c0253f8f6857e680ec5e1f373e6ed7edc2572e2af9ab78f33dafcccc3ad78968a61543977be26f03f838425f19b835d8f7a6aa16b051015137b424ce8501baa3b7bd854377f36be0749830fff1d089392682f1d0bc71f937922ddd1fe84b4df3026c1a1dbf308f2cdfc12296bc7318b7a8b26cdd2714b16ea46798f5fff3683511aeb403a60498a0444951879e59e016ccc41c14f3ce13650e4b9ab3587ccaf42a08b63fe51efa84ca804733689f80032ada52c1e6e04b98439854b589647efc574bf80b6b3cc4abffea2b92cd59230fd372fc6022366372598f135272a8e63561cb36f608123e5befd3344bb176c0e4e3d0c1f210054d43f990605000f9b5e865c197a74982c7b6efeee6af83ea98e9b5312c5d33ff10f9993ef5028bd4097b3a2ea7e32a22ad36a3ab07a9654ee670fe0152ac0e448888703f9a2fd1088dd49464e0ceb4a74adacac0d07074919245008c97ef96eda670582512f70953c19d2f5e5ed00203ecd77b0024201caf635823214aeb2bb2bbb4ad61d1185d9f481715afb8e33016da91f387f821819264232608d889bbfc038c90daedc198741de4d0b5305b3cbd41a344a3f1926588de074e3a3321d49d4e4689e0630253450325670529a710f43fde1c0755c9e931f6b502ae93e893b64fb433616dfa68969b811042fbb80dca43e0d37856034205eac5ec572354dfdf4a0abac0c7f5f209b11123cd954bb5eddcae7a165c1257a912316b3af0a179f21d116b761a5e9ea8a8d7ee04f7951d14e7a89a60bb22c6a6167980ac31b72f6e80356c20fd646ffa5204d1023a65ac73610043212b4f179d2b711418867065323b9fd2cb4240d042104ef0b8a3f5bedef9fb33197f05d23f6b6f0120bda1c0e9818299ae71fb16832e90c4343728c48b895992de4196a49737437d1273e9165025b525eab220b06183e9b59977540ae138537ccf010158c411c5103712bc868490cafdce8f5dc8f4ca670802a52db7200706f807cbbe8a13abcc51eafb4f5b563f3ac2162ebd90805d49d5ec94c4fad1bd59496252594deae3db7116780875494cf9f9fefeae0218ebbdceff10f9ca71027d77001e9082b54536d00545693bee7feb165f7ca26cbbe49d965675d8a3dab5d7898c93fe49e7929b407af5f1241e244f18ca8fc50eab89feeaa433afc4a4b06605b64538c8fb1a21f001fb222715f38d553d868bda081fd9eb20385f73f1189aba47d1b8edd5c3b6d225a36ecd09fdf645254c13a232fce77653177eafecf7f74988f2a24f672efa425c554e44a13dcf53bdb2410b024fac1ed6c2fdc3b4fca7ccaedd36b04019ee2a9f68ee8f434f8ebfe0677a5cb088524f1cfe769f217c7c1acaeab9641835e5eafc3908039b24fe40862c2f71ad0400f69ff8c4844bd37d0e8080c6d312048df13380e98a8e0e761c4bff94ac462dde44664c8881ee9177cc7e02401c2a37afc639cbf2d741081eeea66baea8c83135e1c9ac0757b3481a0c5b656a949ef4f93c38c29cf85384601ae3d90fe19464d00915fc01bc8f528b79996f379f03dd7e9c8ff963a2344c8c04e9bca42efaef0259e3bde327041a1008ea99943082f5fc033453c914dce1be1a046b966f6bf84c79293c976c2f2546c560221d796cc33067ade6d85e17f56ae63d7735cf120900ce1b6ac061ac278acbae2bcaca231df619ba4e21359a9fcc8e8c1039c0bdfb2ffb30d05d3d34b8fca583338454a85b1d6d09b6ad8d3fda6d73ff429903e7a609bfcdf28055ccdafbb53fdb5a69e28bae933509e1f7d8961093e544d78222ec8b1689a54e06601077ade025ebef4bcbb6da3ed892e15689226c2031b9569b584f0964329def934219c5ba4236a1a89ff740453518bb727699a671b7970402b6f556ae1cb2ced05274282e14aa869ed76fc593c7575fdcfb147c977f9bfebb8770a0595f350c02646ff217486ce62ab287d7bceed10b8f3f99f16b478addaf1801322752914701ca10c7479299496c48b7cb9e8794f5d3464c2815383913d86a4e8ca3091976b4b50d66d0fe5132e47b30fdd28a1ee39f32c70685d7f4647ece64db215e23d42025fafa4a5a1865a5d5e72406e3af2c870b65e26162b2f92730d7729ac06dd69aaeb1dda46d43cc147e155092b47da7492b606b0b9812b44c6c57582cba3420853e3010947687f3143430e30feaa84ebe9cbfb9e69cb7186b376577bca1c09f0e032fe822f78be7dd6dd2b0d1b012a634a0cd4a4e8c41c787ae6ef4901c745d854f9dd9234504e6e9228f9aa7fd0bce9f36bb12ea2ab372c41be143ab60d387e41de797010c4788f9ea0600cccc2d93f9dcfd6ff83846584dd3021a2d638d37623d016705a1fe33586bad11998c0ed0ba5aec82c40cc209de7f7ea841c7d9f63e0ad23cb7d948cc07aadf6e478a1ebea5d0ab52358f0da1471b4cf1e60f8f86348d2d34afc5a8e66b79f17c7c54126af8d7e7973d67b2b7d93b8f704db15f2b6058502e40742bebc19bf747e24e4b4ef340434df1e77d71bb653dbb1affaa298e49d1f625f84bfb1169569ffcb5cf3da57734a657312935ab34cffb3471f8e8d8855c8577ef2a4b5646018088db8667818232bbcd6dde7d4fb59d86794f23c88c7b057ec79ebb343395ad973bdd953f17b3122283c99c3951e511d2634c07a6c027f6eaac948f640fd5fd640f86cd9b78bef71046c01c0c0a5438817ad390e483e194b29092e1da1100d4c94cb84122e9d7a02bd3e8baa22c4fbb57c97bac123f0e0b87839a263286abc5761004a6eb6c6ebd6f3d273b08f4260234dac7cb510f47a5ec9c9ebd6f1133a068d1a4a83460b61263c45079893875bf79d0acb6770ce3e0a0075f1fea3b8487169eb1ca0c446585ca778b4971185222fb5410124b4754ba9a482743a50e8634e4545219d2c8041a56fcf4316b9178105679cb2a9d119dfe2ae4c8bc125fc96b4e96a6062951218e23a7b68a76ad249543ae94be85489628241fa7d7aeb55a7527e16878d0b5a0c73cc4ffdd0914a5fe71fe2aec30f492d216fc39ee96299bfe2ac01fe189a8da9a2f8f956fd2d3a402de4cd652cfa7c5a86895f061d62b7f18a4d1662528d3ae91c64554139e8687e541e2973dd594b6f66c3e4a5df0ff7230844d6152e54b7c803a3637da0f1d1965c109ee9020cdf6ecc497a7da2fc197e8b5bbdfa72afe60db88aa538cea76986e7513d18961be6122eb10c2d8e4303af7396a7fbcdaa14ea2e65d4e8210f5cca50e48285af00de5a3e9058c8b2ce2c69d380997973e0554b9e1c0419c11a41292a394215405e494a8633f92dc5ebda2e521b6bf74328189c47599d15a9edd2ac2fbd3527f44d89bf57b05430f9f0a564b0f483ec47b7768d7f181a681ff3c88d4f20c3edb41fd14363d800f07cdd5a616f3f5109e2d481735992fceabee9ff999ac292d8945b5fc6e61b28e219fedf0d7e68396c99ab6668a288b6e4819c24f2e027b6522b0645b374c7cdbbe9e723fe69ce21b3f02fbe654e9d6a849053f04a0bbae3c25fd7f9e86c975dd0458a286f79ad804e668330bc96d6d59870a3b33d103b80ad7bdf5770fe15c5c07c3671c3ce6c9cfc0b1733cc73699ce7a5ad007f7409f18088d42f941e33b5abf2f080389a9aec369bfa0531964e171b995ded9601f08422f4b58e271ae5b29c14a4264b30e6d81857dbce059767619dd10de79f70cd256b28420948e3945ea54c78bfbff8cb6857f9e18ef4f6d2945ccded125c0e11aa65ef8915b0a359bb23df069d9dae896cc3c8910a700a53379adb344906991f2d6564df259b0cf68842de41445082b74e56112405e2b77923c2303f316ae2ab9dcb7729b604ab35c07a825bf3bcaa23cd519589aa7a6e98b3f7b987ea86a41548ba79483d79bdb7738ffae42535f4bb3c441a812c90444895aebceeae22930af4bdfee0dde80479f7865d26374c7cbaa9b0f29d8be648e27ed4e67c465a35d80d837c44eaff4d28647bfc25fd9c41542b963d2f7429a1b1d24d4168bfd1ef6eebbf43c03831b3a3bd0e9fa9388b4d921850a03276a9f64f0a1814e8d735c50be2711740f4d0e259e9da2ea9a8bba37fed520bfaa2e61a83fda1094e856c05e02f96903febbcc7e9e766f85f4df50aac27d7c8c697baec59158942807a3458a7a71f1df5f98eec3781fd00c66413ee6a305314ec4cdb2bdc96dcc8b7b5794fe371a8e89d3cace71d7e31498a50a69c7e6a2504b7d17fd25dfa9675e654f24ad44e33c9c15f0a8e7a2223ad3a7f0b5694d98b54ba2bf9c42aa7dff3373a8d9d2b282b305264dba541427090e8513b41cc3ec80cfecae03772b62c83f2ec70bff8facbc056e6ff98c522bd9e5da8e096ce244488c962ed7cf21d0246cbf6961fd8f2759412cd9a9d138fb6472756fb6756c5f52f25521b94c8fdca79edcf858c3cf846077a91ccf9e8ed2bbc7435afd96cb2c9c575661e3e90420f2a676566404dfb4faade25eaa4c7dbeb8a0ca611d91b9c18b8fc74f21e45d5b792827393d42533f33a0ed018b767a1dfa1a0fecb0bd617e852b0144f86aba60801af5b5e77d7895cdccd270f27869e5261c7d4e9cb60e24264a2970ec7a6d647abfa7dc65fcbe8391e8dfbdd44cd0a304456d16d04d3360441d75d878dc7d11a032bf406472b509486b056b19c6d63b5847cf0814ec4a720aef6a912b6345822fbc3c137243170ce17d39e29451ec3317e5b04e46015d1b86924512f6dc2c14b28abaee46220486cd04aadc0cc71681b54106b0d433cae7a3848edfc83e251754a7bdec62b122edd55c3691ba7326aa4e6dcf2210906d44aea3b8b0f4e5a72c7fecfe2624859cb2eba8a4f313d7b4dabfe8631bd505b7764fedb9c225a690a8ca4c4f8fce8eb6e490a0c61025956ad86e48dcbb12a3ea1aecfb7509701027364eca6d462574ec9a5d1e2354c929f93b4d9976b475b114360f179317d73e1e77f3a1812b975bc6f2d5d0881acc71a394387daf910a21fcd3fbdf9bb1760827e0f3a39f247e655b0642f6886412fa01399bcefc8bd1d6b4340e82bc45e897afa137475d6eedd39bbf7dca4cda14335f352a1883f3d13528deef0712e4a53a5532c7c7f8f61bde9354d815b0323d07e75d1b68fdc1172bc26391d3577aa0af4e16b6bbcbdb74886d5b1f0601e33fcd010f1ddf6a27dc2aa1dbbb6afad0a2333062dc0ba6f8195e01baaeab8515a33ee139d52f2772d862c3e1d6b01d1565e58cd533d36bfea907d8512bc17d2df0cf85b9846b9653741d2318b7c71b6953763341cd24774015b98b082de2f97f40bb0ba3f872a51bef02520853b86155768c841f5343fe7ba84f5e846e80a732705490d96fc42c1755e90374f39a34dce1f1634b5b5853a6cf46ed0e75c6ad655b6b53c97772b234da6626eed8d209ff664370855d7499d5d735a27683d6730e96a8df779974cbfdafd8efd4f44b09b4dbfe71ddda2b81c872410c8592d8a25596dfb68248726a8ac78c2f82b6c126f07b04babb8ec6c20d4123d9e0da74158c3686a8ac55facd3c3e8a3363ac9261a4d9a44a647af3b72d7836ec07bb88f20e40503aa7f7ab4a1c9dd73cd9cdf2cc077b9b165fefbea4500a8ee4a65702ab7b64974605a4c8d664ac2e596567fc3720d926d5f1cbb5b63617840093467c810c4537d5d885e456a8c3768daf3c3a43030be44d09e672bcd042d8d2a39ed32eb006a2255b0e20360d428bb4636e0ca179b01252054f5c3a6687bb5f8bfcb5619e790272c704ab69dae337fef4c3ef025eb20fe2990529e357c92bbabeb753895d090550dd4f1068af2e583cbfa30e5ada66c5113f554201bb5c4fc8fb84acd35af6693a5b59bf2c09d1f1ff35a115a42907278afe98fba9409fa439a322c47d2b321d1702295c20052eacea00bb8051ae9e37890cf33718d61f3805893f614e12e746bdf9b25e7a25fa8adf822db915f47662b033d5ad0af0ca0086c3e5692f026efe77a68f1c4f4b2e7c666cc11ccc22fd2c87dd9bfd928f25d50be65ae8c240d2118c7fea40e7836c0ad1e559986c4789c9380bc27ecd6737f3fc6378579c6841a9a64691ca66dd2bf4ccd9f104be0ec4e7e2b37529335811affc319948ed872e97818c07517a0554c23e628e7910ffe4e99bb64f4d9063fad7c12ae8b3a6c596b52a9570ccf7c7ab5998a5ab35d64c1a373350d62d40186d6bb3fd84f0fbf58de03e541ddd1ca87c301e7b2a34ffc7036fc3a6f411601299ee02be96781331b2a3138076733813532f52eba3c82a5304d7c6812b78388793824fe89dfc692639b6eb9ef659efd83ce2e7fd121385c83a12118ea1d7d2ebc68255c17705977c7187a5a45d5a61560ecc4668a5d23a7c8177865458a4b51d89234c406aeb2fae2f74201d3cfcac69886b5a215d40f706844b75251c29eef853d510ec467d69c3428eab6fd9bbd38280fcf07776416f01203b64aee1466ef6377588a65fa979b598596978d6f573974c3d319c1c1e21a195038a6020a7068a3b57381e7f8030c2844e888e5587e05a64ebf7d9ee7e66da2a03cc17e27043d9b42c170bf1e38bb8055590134dcec9d1c3838a8fe50fe4035130f9c05da5c678bbc9ca434504eb7e693a46186f9663d8d980581780b1e67bab3651dea4ba0f6374fc1272603bcb577b8582317c67c2a19aedc9ce4cfa12eee8ac2f641287d1e4d4b6bfc31b8fca8556bf03f685ecd8d1d51c388491a56f158e0fdda1ca40d0f08d35efe0203778d1720a67caff390b6024484ec80f66a5b94ff5c9d18fbdeab2137c9641a53efc0c5ecea5a5f224284445dd616b2cb733f89589b77f2e2d7dc6568ace671a3935fb958df36e03323308cda029eeaf3027c41a25eb60d2c6cf35b53a633b94e1ea9434bffac1c3afe58e92084631a2dbb54526535b47ed369d7e8a6b60f1fc31dd73462d0c74639e3ac34e30a40a8fbca1d9197e22afa21facb96359de1650a6d0e2b78ca067ef2b102eb4b4a5e20d2d9ab7af754cdc38cecd97274402705584858240467749075a6bbfa4a55487046a7618cc91aa824fa4cb11abfa22bdf807ffc24ae22fa1eec286edb123a1da560709cfe3e22ac22c3ea02ec9b301cb0918d646b08fd6d3b3a3a63fce4876a2afffa603326e026879578b37ffda0722a0d12e15ea47e04749ff4f600601115762273e868358cbc7084fbb2ec391380f41c8b8acf6b3e9ed2514fe5f53e00b770f95af01cc809ae2cbf5907e44389f7ec3bebe8a4da708a93bc1aa12dc24974acca347d29b7f3adb2e6859398e57b65b96ea79da3b9a2689e6769a562105c168e4aa39ab701d606ef0be72833f4252e6057b05d44fb7ce2907dcd8f86da414d7f34f82d7fd1e19390f4e3bc009e33e1aa9a48e8416a72ffcb7bb874a7b56003fde6fd07bdfce9a355a9639d4618ec815fc6d88d93fe213a68d081661a4539c7b1555fccfaa98842c115c81e5a8b6bc4c7021d6359bd4becb8bfa95921b95e0fb5566b744ea664af6213f33fb139ff5eb18b0b2c5399268670cacbc52aa5d0cdd9059e8694e5288a3ddfd8e34907c33d685a422ae6e86f9a4d0370f2abf042eae454c1e72ec561f1522289e2e371f88741efe2f51077793b335df9743059cc7192bab0aeb6ea94361bb8c16a36958dae45174365ae1c4b8a74709ba251e888281068ade2bd34b96b3a42738ba7422562fa0d7282ab7523d46397050fc170a3a11e8f4c380393f37da3c4b274c84f07ce9adfc7130a359a3b1f83e144556f1bb83e2a3e958da5d5358888479c60d6a50018dd2d919dcbcf77db3e184c725dc636103269e6bec538d3eb755dd6dcdba72be9ce347e05e5c446d1ab7be05edc4f6554f8240a7ff1eb3474a76de9cc713360120c921f127cf28cafc5f32dff9bd1fdeeb754f50318992c78917442fa2a910c56ee5af27a72b9014b1c21940d35a1856b2fd7b18e568a303cb15ed2552c168a552899a215e68aedaec1166bffc1d57d6536c7518577a458f48a4b8279c5d438d8205f34e241a5e056313d04e2fb1ef75287e6f8722ad8992d305ff839644f2c0c68f30bb6fccf8209d42579f0e7858abe3650532ca028f32dd71883944ee6413f854c85dcdd6bd438512a5395003be151f7a11286b3def234f2042a352e3d8c0e3cb01791e2bc085e9a9a76384c4b85dd60d2d3edd30fad3e3c7c70089c359549d10abfc5d1dff7807e710f70addec792b4a9d8edfe31221c3efbd3abee364777f5e09816d701d75635d2b2405916d47c957ff8e73e4a80b7c31720b1bcf4a17523031ef741f4ed861895356ba383a66940d010a77720dccf2b163cdd341445c54ccff1ca8e44f3e61e0bc1095130e31c0c202d48b5aa30a5bfcde8c0307b35dfcb6e26e367144e1aff820df07e10053901d630cdd3dd28f6345400cc738f73a5a1e122bd7f329d5773f50c38f2c902fab04a9866f1813fb2c5b7335083612d3c73db6c372c532b0ef652a3d9546049ab23e2fb0be81e5f51c6fc316c5a3770c0df0d0bb9a26e9d05fbdd85ce8d86d7104c5d44d0f6bd99bb6a48c807dbf3a1328d2d24f546beff7e75ac7001af2996875359613aa818087b0245cb9f9c937c413907a53432937b105b5b8d409e6a4d84e2967d924921f67dfe19436577c7ecb4e0e66072c38edd05ced409da9daac526436e7b586c45e43231368fd104996c1e99c57c87e5246f49497ea8c26ea2819f7e78756ed925a48d644f69dcd7f2af700ca3cdaded0f2839ee8be92d9445b878c12dfa658759457d2aedaa16cd83e4475cc44f40fa326bc3b6fc91ddfbf003f1230ee00e91d4d07f922cfc64a6ff3e677790b82cad5f0b7def240ad3e88a8bdd78ab325af519cab32134c045bb72c258e10296a57c27bddaff4d8583ae75a69f0ea509cc89c27fdaf9ccd6b4f8653e6d1f37fcaef3517db40021f3ff15517e0835be36501353325615d79b1b9df064a525ba0e95bdfa73223a4427f6c5583ec79be12534c610b0aa3a772c60c7acff9dff92af99df9541d5b0c1e4eddbfcfda682ff2ca55b7e382e28e00daa84cd6115cd65b7fd9ceb121067bbcafaaa210c41217e54896314176d8fb55699e48cfb859b171fba526a5c70f697e1801ac591e2b28b076f2f370cbec7bf3954a1aaf4f4cf03bf59ebdcc334448fe5ac4cffe2cf3ef5b618435e1932656c069a64ae6042f886c771d29e63bfee2fcbc06d9804086b48289f31a032d588b538903b4015c679c3afdeef1b19a59aaff7c925fcbf55a456f1cdc349580eee675f7cb9f19e1d2bdcbdb515b594a50355c5ff07ecbe550086f695930e4da370ed66abe364998435b4a53c403f63896dafe9c5a7980e98fafeb46d3bf080849a6a4d80658925a34e2a99e8dacbcbcf02bc26a5f2ef1299da61eedf8e3d855a19ceab9ea2bc5c237bdf2266401069fc4d4f5508dcb1eb1e11e514ff45dc6fd076bc96a7779ba7f0ec903e3738b59ad4d5d48b5385f33bd6fba288021dc38f6b0cddddb5174df03e0f5ec08108288806baf59b3fbc06c712dbc6a718dee01c48cbf537ba7bdb012e52c82c23f147808a57ca75c90586ed26b6833ed2456dd4564b894ffb6097f3f1eae4b305e2f4878df8c4bbecb36c0b639e02b65d30bd8bba6675166c4519e511512a4a8063c8afc4c32b1f63de9d8077a375c8fcfdac573985c4d287cf1d93084962996eb60a49c55d8f490158f0c41daddadcf4e3c13200e0abbee71c4265b1fd0ae226e434a781910ed2629a4cc389ef153100fe638e6c9d4e3cc7630d512db0b47faefa86db2a08c5a68260d9deb38f2878a17691eaf2c426967e856c2dc9c19f0140</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">请输入密码</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    
    <categories>
      
      <category>数据中台</category>
      
    </categories>
    
    
    <tags>
      
      <tag>数据中台</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>MySQL错误Illegal mix of collations (utf8mb4_unicode_ci,IMPLICIT) and (utf8mb4_general_ci,IMPLICIT)解决方法</title>
    <link href="/posts/2022/05/f8627087.html"/>
    <url>/posts/2022/05/f8627087.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><h3 id="现象描述"><a href="#现象描述" class="headerlink" title="现象描述"></a>现象描述</h3><p>在执行SQL语句中有比较两个表的字段时，出现Illegal mix of collations (utf8_unicode_ci,IMPLICIT) and (utf8_general_ci,IMPLICIT)错误。意思是遇到的编码错误。</p><p>表a是utf8_unicode_ci，而表b是utf8_general_ci。同样是uft-8编码，不知道这样细分的意义。我的两张表是用Navicat分别从两个xlsx文件中导入的，自动就成了这样。下面说一下解决方法。</p><h4 id="方法一："><a href="#方法一：" class="headerlink" title="方法一："></a>方法一：</h4><p>  如果数据已导入，又不想修改，可以改一下SQL语句，让其在比较字符串时先转换一下：</p><figure class="highlight plaintext"><figcaption><span>b.* from a,b where a.pid</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 原主句：select">修改后语句：select b.* from a,b where a.pid=CONVERT(b.pid USING utf8) COLLATE utf8_unicode_ci <br></code></pre></td></tr></table></figure><p>两个表的编码一致了，就可以比较了。</p><h4 id="方法二："><a href="#方法二：" class="headerlink" title="方法二："></a>方法二：</h4><p>如果想保持SQL语句不变，且以后可能还会经常处理这类问题，那么，就考虑一步到位，即，把数据库编码设置好，并且把已导入的数据进行转换。</p><p>先将编码设置一致：将 表a和表b的 （ collations 或者 校对规则）的编码的方式统一为 utf8_general_ci</p><p>然后将已有数据进行转换<br><code>alter table b convert to character set utf8 collate utf8_general_ci</code></p><p>另外说一句查看数据库编码的方式：</p><p><code>show variables like &#39;character%&#39;;</code></p><p>从以上信息可知数据库的编码为latin1，需要修改为gbk或者是utf8；其中<br>    character_set_client为客户端编码方式；<br>    character_set_connection为建立连接使用的编码；<br>    character_set_database数据库的编码；<br>    character_set_results结果集的编码；<br>    character_set_server数据库服务器的编码；<br>    只要保证以上四个采用的编码方式一样，就不会出现乱码问题。<br>    另一个查看数据库编码的命令：</p><p><code>show variables like &#39;character%&#39;;</code></p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    
    <tags>
      
      <tag>MySQL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>数据中台-09_数据服务到底解决了什么问题？</title>
    <link href="/posts/2022/05/612d90da.html"/>
    <url>/posts/2022/05/612d90da.html</url>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="7304e2a50fc30ec3b70ee89b9c2f2010d9e1725ff2dd7d6425d9bfc8a6ca0b04">4e4fc70cc91fd42566446082a751780fd5618d041572b8bed7c41bda7a5fe16038be3debec314ec22c9c0454600299551c808c806d57ddaf6b6b337c88a68c74390f4d0e84e4d47c0125a07468d525cd58ba5eee358e7fdb184891426bf6ecba0ebc11fbb952d111b1117aae18774ed2faff3cd96a8f533a6bea640953d1681160d0561e9e6b1ef3ed7496a5b896306963e467083187c3a2f9fbd2876e1365628e9e1c6827981b6352891af879a0bc75b7a34a3528ad107f20c56e6e5e6dd197c6e9b5ec48d9624c4ce51aac4d26ecf7c63f9da4b8d2c67e86784f41a2db9d3bd04763afd29f1da96d60ca8b5134c56d711094bfa367b466e6d2d46ecb760a4cb31a0b17d4426305c6f5ee83222ece37ef0f53f83e6eda51b8d06b207bf872d4d06c517d6af2b3684966639d91bd58ed6cd7b8404b6a4988bd609994263608fedb4dab2b3380a55ba39ece2ca10422520d3e7900551295dd8d4a35def773d6da1c3112a156ca8cd0d2cd43ff4ef49843aefaa7aba75dbbccdbb328363ce5ff42d1891440b2431a4d41cdee23856de701d41c02dd0606b5af2eb82962faded5c75c66d474a173545c0664b43fc38bdbdc05d90b998f4c97543a6c0ff1e2e3fc0a877484166b2d47899ca747a94d090887a025302310bf6abce94aa2548cc273a3344a75ee4b7cc38ad3c34e16a677aa0a7ccc152476086800470026119615f1f68e69afc2fc25420207d26d2412d3768b0a9bbab68fc984af3f2c2cc3cda004a225f7ad3a63975471ca6a32038efac5fa6e494325e644deef6b9ce0c48c6211c9fa530fafbd3e63295145ef6b5047d086cdbd9fa3430b6988c116701f8e7809a56888091d3735e9df86ff4aceb2f64c652d2836687c8e7e5f0d18e8eef26944cbc101b618b50c38db3bae4328bbe1c46e2c3d66a1e9ce7fefadb88ce0fadf2d712903cc5adf2094007139095e58d04813861167212dd9fc23b756ad34b0f3b1ba6cab371c64b0de86b79a1935e287b700b3e0c140122380e515b75682568669d75974582af4451c61681e25c699b0d3e97ad4410638f2d9614b54680770906123b7d342a6d88d887237ce056c23ea75868eab686eff80f7027f1b2fdab95db37b6af783e0062517f5b3d5d79ce70b7ab07de846af628b188f7794123a6818f296b70e07ae96fe61e6b9a0109686130ff2079bb23911d2c97e8afe7cff0e64788f620b15650d0fe42f446f143b482ad07bb2cdb6fb37914ef33566b697bfbbe52e753cf79a2d2ccaa7578f1550d03333b718b0ed43c0d6147ba3969a4584d51f54c96c8be766b62e0ef4d88adec1d2511617d5acb26a31fd244f65449b15a4c30e9a46d1decb7d4590b1fc2cac76752f1605c5738c03ed443d1df86141d4fa503a9dd69f66647dfe5fa1bb6fbdcf79acb6dfa4da844e34e313b0f7ca6e1394b3333cfee83ff2c5bf153a659b0ecc36a4cd8f05c5b1fe366bd4601bcb284fdf76a64b83387a0473486d33e48f02310cce16c49f63e8537ce86ebcc8ab2c0d27eae92e5f554b070d3904f9879603722ea752ed545867192e14ab5796cda0a66a285ae7bf7ba8299a6a2207c302ea265719c587f4ff83d44b98d6c0992b28536dc8bd954d61bd66326a8e381cfd4d17d929d4b0582af067f965ae6fb783eb1afdc7f58f7a8bac9041258308d31c94c0ec799ca70fabd1c831ee4d6d5800b4ada168b0ae357476209d0e962af67dd075cbf4b35d1dd7262518c9ab6c7cba4fc1b66b68a5d3bf16ca8bc71857ae246cb1708e4e125ee551dbefd440913fced8afd820a123678d5f9344a425b5692a4aa3ba59854120c7c1b14ddc87e52f9f43521a9c78538f0a5ae56bd2c0f871c087380168a50934fecd8c5ad886ea326cc5dca4a324473873f4777bc8ca10c888b173de2adf90dde74bd66c6cb43cd37089250353af85f4f7f9a4970297495d3ad56a1637a779771daea435232dd75869b3ae420d3f4f720ce165fcea654767f427087e1aecb5ccbef8845e55468728ee4e243f90484459fd4039ee5f2aacd048e51f1be6c4215c3d48ee52ef003eaf2371e0498ea04e738372c2c25041659713c405eea33f10b8b3e3a1e24fcf530e919d6699eda4d79b9d8d7d24b01801eebf2eba800d45ff5bc3d46d621eb657cfe5ee7565c1e2ce7499e186382e4488c122a36c62af352d4aedeeb16ea6d995d195bb64f19138aa27850509fea5d9a3bb5620e4f79b9211d629046e2d9a79be0dd13fa9f293707a3b6eeaaae0d5ac7e66bba0e7c77dd1834cf88581997ddc285f8d243b105df03d19137489f1cd0b59ec64c89d5a1518b1d05a8cd6448122bf421ca263b5f1b4fbece32763eabc45913d6145261888cbad6d9d43c17b79899b2136bbd912cd7d8851dcf6b1137a27207cebc52c4cff84d384d4954c56312f6055c298aac43ba66ae0d243ae3aa75d6a639c823d77e7a7f5880d5f5abdbe1605ec06e98d2394da44ddfdaacd1cbfadbe3669c4dd8d7ebad5a9003eba6e16946b9454459e67fbded0ca4bdb8e5a2b6389b5b47eba899804e5112238794da05978e8bf4455bc4fd942ccc67ec6dc9bbd963236c93cb2cce733cc15506bb314d4316b122d4632ae0ad041cdf26bebae3f692d34e4b1a068c9270cdaa314301e2bae18e4fde03224ffea434a4a03e2fd06e07c7586c5af3191fd49960e9326f456356b76b82c2e338b84e9c5f9c65449b0cea261b6a3338611693b5b05654b02e71b0d2f07d77012dbbe2926a1c182309779a41bb8dc4ef7c769e0bce2850bf99ef6a0cc2c7fecffa04f1c85ac02aca0a0277dc52d913d7aa4e030df486e1b1cb19120cdbfa859b294e02fd0100223a2fec52946b389eda8de96ea5bd3d89f0f84e6f58d395178045267f112d5bb752d0714753c0e01ef19e74693a02689480e38871af298de26cac0ba9ea2f9f65918fef0c4f921f11187d496d90be885272c12379774de55abb8520cd8dadb68899f9ab5e877e52cdb0f275fc06d2bdff6ea74c685a8998250a480882e4d5b75436f0d718db404f16f204c90f5d8684099ee9502969fbc1af57c69c641934f4931b565a40664cacc9c9c5a9f6dbdcf531dcf9b3d883b0bf6c27b90e5607c3f23099b6bb4e2f82b2e47c5e07d9022d8faa6ee30cc24a699eeed9097dc21009627e383cc0293d401ca0da44caed37abb59f06539002637fb96a5f529bedd0ac30cc1518837f78c78dad15503df14eefa2d035b55670bd3f249fe090716940a02c4e3b27047d40cd90d53eaeab6c7b84673dce4a2e0f612da853e117e340f8a83094450fb9299177e37c59be21fb6bf520ebf1031ea204cbe717d5deb31791ed76527472686c7a957c1c7b2abee2521340efeb827aace2497f5c40a7820ee61024381134f330ea8746f7a5679779b62567b48b67996a9f8938ac4396bc678a8129b8d8c92d93f67aeb8cdd24397d866cc455d3a0d9009d701e3fb606f37e5612c876025f7d17cf9f49f15f33a0e9bd05053558901569600988922d3fac7fa1ce608707ff5416246d6aa100b7bf1def458166660ec0ad69ebfabf7a70eb1251447893d53d462242f7cb10491f4f80dc5d1fd2452421bb713cbecc0966647ccfc741d13e7048f6eeadf4f89687624678e630adcf095f4e4dd602d1c6e79f5fdc7381ffaa95d188afaf3218a910428dc881c4bcc2a17a709f2c806c7cb12694fd842606dc6743d934c856b71381ed8dc503356d7940a24f589db7d5b8f568d480d4c8479ce8cada8d7d4d2a728e09f50d6b69b879f71185a1640111a402039af544ff3643a2954943f29bb7ff13f548fc2eacd880c87c9a77a3791d212b2b58c84ad66adbb6b9370de6c200beddc39aecd7d64761daefb8ae7a3f025797e1a413662e4e1258820ef972986cf4aa6f1e679aec53edea7a57c1f687dd8993d1eab3940d8a25866652cdcc62603a1797477926b47a5c4915fd8ac2c66f4d9a442ed004734a1c27864227cccf103f46079ba84d9c4867b485477f285b239e09e9c58a306eb7d23bd5faa7fe0213c7c5fd814323c526e9e1c01ad1cfcbf314079c5742d485acdd26cf3ce7134f37c80931659de02466afea0af8e33062bb1350db93b389913c6ff9f7a2a026d7bc8b392e3c7ec9bfd308e90f196e5e04af5306586a8dd7df262a50cd53a809eaca2733437e984bf860d897e8c924c7d167a2af5927ed203b72f3cbb488e9609242ba815e341adcfcb84afaf2c30af3d67ea05f9ea1f2b05997a12441e75fae38dbde7a190b481638480b2939efc9dd17e876bc8abe8129757be610e063a88d87643d39e3bcc28eca3210980e0be53442b8f3dcfca1ca0e30196e7acbc48db516359b76c5825806b50b01ba7784378d61179ef4fc7aa924411e9a078e754386a492bd6b578e7de8c03047eee16df39bcfb54f90140d27c03a6aec195b229db70ec645a9a8a6c715dddf38d68d90300ff3cf2f00ff78c3f7fb99ec224de670e00e87a17328ec3ab51e04c479c539469ea5cee5f9cab3353dceb9a1c522adbbf7ef11158a27c4da511e880def159d23b20918267d3154ac3723440b4a66c661c3bb5cd078519939ae1c4a532f7ae95c9aeff007319ef671e8ae0b6f15bd5ff5a032de91c8209cf8e045a49022e4d3912ed71c19d3303095002d6084e6030413808b1e9271d3a8d4e9a77fb8095965a5d156e326568dd82afb815d610d45a12275ec6edbd959ee7e1e6aa4f8cac986f2b72c944398831d7da631e45d110df8865c8b0f831ee5dcd2b1fd7b0088c6e83bd25184225ae911a774ea6888ee7e81dfa796068c677df2c2eadce346524a1b00b899299094eaf781bedc46190ee4bf70d558fe1c2a895a0c946429980886c3c6101dd2f38b83f32d5e5b9fa6657e9dd79eb8bf67c25bb53c2355b46a8811683715b3d0b31e3a53ba6be9d5b5413b461addcd6abb0b4b9a10fa4123e4f83c0b7cad977ed2c9665a8c60b28b557b80b0a6960b4296249ff2b6776becb671e8d0c0b489a96695e094f88001000da6418369842c592392df65ad5ae76d44802b1acdda583e6f1e5e316d3f26593c0eb24559561f433271b0046ee747b6fa660b0529f74ee700631c643d11b886147ebc58cd68fc2dcebe16e3919a75c43170201760f13398f9132dd8e9c1e20a67b02bc472ba44f303aa2f905bcf90a1745160f007a35b047d2cc978e301f2e3a442e8d283627a4900bef054f77748878664b078901d6c453b0a4da0e230d44e031c3df53230a63e338dcd6aa07183913dbc81d55dc262c7bd9a65a5a44932ee2e42f471fbc3c0293c0d128293300a54e711537546e7122f8dac1523198f7f3ca4c6d221405e7e59b5c0dd79a5a6ac8a4fba4dcb69a899a4a56b6c133c5647c96512a049e3e935caeb18fb530f5d14e17c6492a7489aa93904fb438fc99320b53ee7c5f2139049790c29bcddc9eab73b93b58af7071e39c8e0df9aba73ba1a5f8d4c03869bfe5e0fb331aaf89d1ec675ca0e61258d6cf5f3ae022d32a7c18c47b422d71791e08cfe8fa0f890f8450fc10b9f9cd4a2758d58c1414f36ee27f1be0e66e38301b7fa78d02a2e3117062aa02725aab6a5c2dcc22daf358a3bd32f4e97ae12d03ac8b1740c90c0b7252bf2c429d276f152db99e7eb8d17ae458df4167c634f93467f61cc0e5fe3445e4d17489d817bc921d93daab8d8917c583e41eae3b648e1c9c72f8dbb504a9f7d35d2b2362d102460c56d332f7c4c2717226aeb53cb69d863eb54e7e4b67abe2869dbdfc96fbfd1cd9c7f68bfaecce8df920bd0f8b5abd84b8b42d00ff9dd79186874ea72bf94e5c487a192cb7c4459767bc5a6b71cac03fa47165becefcdbc246d63c6050e978143af239c39bde87a6f7f853350212b42e80d52b68f22ead36de02f1dbb91ea9563c21d372dbcd7d477011e3675749220965dc0f9a85f5041518d6f7970d1bc2d11eba9149a18e94c0c366cf8fa6d526879cf1341ef47e9b082cb128739f2c1f8ac751d79de80be8d890011708de824cb9c7bffadcf7a464645e169de6c23879f128dff7096aaa4851f1fe84ad792670a9897c7d9077931c1948ffeeb3f3d10c261e1ae905c91d389f04e0f625182ced4757ab99d3ff5ccb819fe3703409aae0817233f49dbc3ce8b7bc158c52576aa273d9508be700c9ad14ccc7f4bcdda33a2af8d0f2f29880ef11521f888194ebb33dec3fdfb9b22d8dd155f6cbbf4aad4e5c10e12c2144b3cbc544fd7351b34ba304bd3605af9dc22ede9fad8db5265474689d26a9896d4ef1e71d11efa06db236cdd6d8d1778744d9a2e6d65704a5c4c4844a3bbb6c8522943e9c26a91eebd4210912a5f72e52e807129e485a35e9a39c09bd54786fc055d3f1f9c68cadc9e76fbf9ff032febe84919f351fd2b2be08489f9885e86340cc0fcf1f7987a11c965861ed31966207c2dedfcef603bc7c5b2ec070cbbf3d4e17d94e8886b0b485401deb7ac929e0b2934b455b30f7fee689cf98f7a0ffe13dfeffaa7b0aa0ddeb02e0606ab49a745ca7903a4f331aa80cf7ebc56b185eddc0fd6299cec3fbbff0cea22cca5e5c03481f3170af6b40914bf05b24f01dfe0a67ad9cf75be92be97644446487b790e28848c047f4e401a70de6a2a5ad7ae7fed2ddcdec89e758dd43ad631987ab4ab4199772b0957192d4494bc67cc23d16e4ef66865a925cdd6d53005f2fb8cebeb1b2082711d2b42294cc56871a4057d3161ab6a670a6322bb5b5c008b9db1a58a7740c8b75cc4c57f59e1cd28f7921ff117262b7dc77ee651c7323c8085cd4cc9b08c6f8f89e9fdeae83e3341ec7aae699830f1aca1cf3cdff2cd112331439be900349c476017b07a9731a15e2896e7e854653f5debf8246b2b2c7f70226c2ba0433cd770f495b31c78a2fc8b812773d2660c755d73b549092685c46315a77973cbe5f29e2efd24e806758268a1bc8ae75492123eec9db3fe7b10bd498e19d999b9cfff84998c961715b38b0a81bd6d6b73ccb77e255073a8bc422565e209389eb8612cde0840188d2709f107f1b99cfac8ed819717f1d345561f25da998e6ba9bc92db6b0aec9a90e4eb5a8dd79574e81a312ef67ec3046b1b42fc0d8c431d208460d49d9179ebc12b760772bd9bd958d30fd8048478e843006693e2ace11f32ed6b647514a18bbc5220223ed675a317b6e15685146e543fc2da5c8eb30b2d40226d44eb49d92799923ad1da716c0993fe989d63fddf267b8e70328952b8ae35a915e8103ba4fb828ab0427f20910dbe77405c2a9b1b24c2ecd059c9ec2c2e591aafacf55ef10c408d57f9b3e68efd7410e46b0ac8421fbcf02e1603b5698f8f1bcf5884097b5431797475f0c3bcea0f786d323838c4839caf81b4b0d8af8c17e1dd91f8f6cf62d3d0ff4bd6aefacce78a1449d307a4e43a2d5ae6f576fac2c5571e1ed466060f3c3abc1ea69ea2de38af55a19517ba10ff85e5128639be70091517283d17bc9fefd749cdb7318f2bcf532b4d73d5d9a8a0136dcbf0641914e1ea05a7fcc4899e92dde7b9a26ee297e904f71bad029e879ddaf2ad4275462d60bd2f91a4b73df15b97fde01c70547528b241dfab87a58acf674657ca395c2e67b77acc8f11def5eaa5fd8c3f89ed9b22d642e23b2ac437a50493608b4195e7379e76ec549a6ed752d2fd680cf2abaa9ae7b1f04e2c0381f7371aa76f5040ab825d46091c9cd3a10caeb61fe2ccbd20aaab4dd2903e7549b8461c5bc972a8ece414436d020c9e9ce856db3faeb63ba8d4b8761f4a28919fec215960eb1447c78974c7e69b035e456851f64d39318aaeba67876fca08c352dca7173175c49444b0ab432061381861ca4277fbdce2a642232239c0a84879e70293be75fc8d1cc82a28a8db7beea5a1c467c0a9c9fd486daffb45da925132ac75336060d3417f9db5bd5d04b708559b2fc2957a5626e6c4e00a872875410161efb490b91b32ce800ddd45196079815eb2a427a775a65bfcd1b6efe8eacb26ff17cb8c1123eb5d088be6c16328dbdb3f73e1bd3554aeecad948eb46426adbe881d1a580d22b221893cd65d6e092e595cb67dfa4d382f8e4885f9914f56cb5617d5705537d9a3d9c2136a82737ff7b1e0633b3b19906656141778067ca7aa89b753e75cab0e65ad8ab092e86be3c17f0c9041bbeb5e884e5f73778c9597334ac28c22fc2b43192bce69b05e45a27659f74808c22e31bf0c1d9bca4342fe4e2edd4cc5b9b22998808f4ea98bc000dcfa5e15183259d28aaf46e3ae5f85a7a6e2b4b234e2072ac56bfb018d8d4dc7c94e911ff727c722be3c9fbf3dc8526567a08639f03a4fbe505315d0578816f8914812618a3c1a758305efab1d4bb7c7efb367fd28f5e4e5648217c753e30f872286b2cc1a118e17c259ac57e8816d261e06790423c32bd686203bc43cf9e46bc565af0b85994325a2f80eda6049fa3cb30b8d32fc6c09d6bb5674f782fad4a30070b8e87a878d69e18aa8d50bb322c3266cb20ae63b5a042d9ad7afbf251df363a3442cdef3ce14b318ad988238b82f98a3eea4bc5545289f612cb9ae4298bba2a60eb974d125f2f2bafd2c361027bb863d9741317eb73e996ecd67afe0861f1959f55dee5b006eeac89fb0b1fc4f0174c0c01a531cb2d117463acc72a8883e80a7405f4143c246cbba88086f4a0205dcec0ba9a2924756bb7d5f669e3673ad026490fbe5c02746437c53a756265749b757f7fcbc66ea57b4c03a4efaf481404b929155a03c6619eae0305310fcfd1b6084be682945b37564174cb5ce2fee74ca5df7b0d63fa1f3a8ff3922d43118f1588e6ab0c4256fdca12117257b59383d744e24f005e3b3137f9fb25827d964bb46ebc7de00a78882af623674bfd7f1da0d2fdb0e158d3b3432c4d1d9657c85eda8525b92ec53bed700cb40f278f445a4bd971177a68abb11bfd738b9bdb97530b538695aa71bf98a3cd969d2fe5ad8801697da4e21f66a1ec0d982c2dbfabb06efbd1985456116ce883a0b2fb7da8c8b6590320827c6172ee80e39849883abf627c4c89232684bb8cb6143f567e6e65997914747b6dffcdc702491febc5887929989e100d0195e490c9a58d4215dedce9e7dc922a10ed696f2d3b3a1e3f86ab97094a202a382d5503a608aac98b41eb1a8c4f12e3c197f82ca9bc7bfa00a7580136248b9c467e4d9b9b18b18e74fe84068531b04b3cc5afd3c9d68a42cbbd558c8a16ba169ce7ffe2133d27fec8bb526d5bf831eb6373af05655ec57c0362a896da1ce63a0b0e84e28c67b3454e811772e4c572d9ece0f1a4d2ec258441d32e36f85520ffbd3c6007011143e07df93dd0ce6058f24c0103c472b9fd985f596acc7909cf85bf5d4f9cf98c1644f7ebeda64784946a7747fccc9346d555edda2976e38c4d999f061fdca9f03401f27dc47e37878d5eae06358b5ade4699bf58ab55558a1d55393b6e49064d9f77e01dbe89b676145a9aa65580b0ae2f6a7f1b97b6325c11f334960ae2ebff21258d3ac1ce8d185003da090e2750c12febccfd7119f2bcd0ac87aa72a5d3ec99daf80be30659b861833ffbe5bdaf5bf9c2a252d7a304cd6c1b6c8b31c3f6a3c7b44e3e28040a9e11761b12b6e6584f6a4b1277972dfcfbe486fadf1928cacc31b2c52c806419bfcdb73b6f0282288e8a0b356d2a3c62e01b11b0d5b1ede376179e087981cee7473e4c3fa5d5129232638030573c0e4f96e1e7fa6fc708cb6f61d8bf0b8c5907311b2aa7d8ece5c1dbcda3651ff81706f951a6ed1c5972b77f247154c8b5ac538e35d864d454416407ad6a73c5b3a37fc2325d89e7ee19bee7e2dca17207e969f8db8cabd00c09dd3f9c5432b43fe0771fa3cafada95bf431f99da612796991d3daaa468b456dad4c7c8b51328dedc42a4cc42db96fb9d93fc5834e9412aac046a10c78e44e5c62b5e6072a124f3326c2c4f2c96d557f263928ef80f3d6f95a6ef2adccf007e57b0e244de90fb44086b7b8828d9c26f84a6d6b39ec3cabea52a434c9b05de2e917674ee17ee84a8c502a3f305b9179c505f149d08d595c1d1758518946dc1211cdc52b79ee28028f33e4df858a32e9ae59df883bf1a88c0f4c3924d1d53a130d03c8ce95def5d6060aefd74aa8749d046ff01c797706a772976854531178592076607de7e79a9fe0f17a01524d2411aa0428a8480c0a91429c73e983116fb4c14c6db2a638003fc98c86b961b5eb4fcf0745b7c19138fa22fa12a5e4d17d1f7632996f4ffb3ec6a443ef6fb47bf528a9a2db260356cd2c9323766797c802aaccbc56f2412aae0890f370b5dbf7ca917d0cd26ab6f0baff653bce07ba37bc4c73db0798b00530450238ed77c160f9568bb7e6e1b93d4d2cae2996d3904674bf43c2f88a7f242fb2bf645bbb431747997c0259e43c02e581fe50debbc8fd213932a4015d383d8b5dc58ff418824540232d43dce33bdbbf391f49d277e2d03d644eaae0bc28977c2f3f9d69a75853f67ca547c8271b1ec645fe74ee6eb8b6cae9f05f64219836ea3db97089d36eb07fe75302703af4c9e22305f5f78c0d03c3124639351cb626dd6ce0a7aea6696a9a402968dc67cd9ee20ae4db9de2364f2d7cda675fe538b76984256442a9f4510dd1e77226fd5a151ace566098892b792a1717171e9fafa3381e4bf18e5dd8085c72213de43f962345c18fe20513c076b28d710cf7be0b61705ed088d500299845936bb1251da37b415e35f64a7bc8be5db9a2756b95023d67c27eb89d1c46c82f513549ecba42cd940df2bd63da247e5fb4d3163c15915aa659dedf3008786c47a32381d3b3c0c9ccfab2c95b669d0a5fe4ecdeb7fb9008fb4f32e057da725081523b8ff4590454029cc79df6f1204e6602bcd2b306342b80e1fbf8f53ccd3b32b23f9e6a13cbf1c0caf7ee52fe591d996f4e55a8096df386292f3d96aa9b23b2bf1d5830ca0c4853aacdabe73739829f235835e22f96483d06708f32fb08202e937dfea527e1fc533c4fa8a8db50fac90bf8222c5bec3c263a1a2952893459c789cb7071c3085392a4cb1a25693fc7c1fdb63f01ba70b0a283bac59c8e515ac002ea91bf9ac6eab5b9f8d140b82475a764513d8946fb324cb71ba6bb9e3d537ff0a5d8980af4b9a2ae5631d86acfcf39ddfb1b7110d33de1604ce5adcb9ec641c9feac1c50c92a18cb3baf58f69b2269ac87d9a23b776000a3a47cfcaf10f78407737b0a0da16ba29cfb60cfa1d88f26e390758577719364fe8cfefffd218fb25aec242ce1e909f4b1ca470a26c33b727a1effae91fcb00baa810c0d5a6e718a8dd2d67041dfff44857b49c740984ece4cf1031e8e3dffdd35ada27f205013b4785cdbaf9510a904729ef2fea6db79a11a9349b9c52e3d67131c2368c2a24f77a1253bab2835cf5842c197f6ad0302be08ecc0e6b5a2f78c25c061a0a066ab3a6c3fb264dd748493caa0f0e130706cdbc12db010ce3025ed74e255c9e114ae1f203932f08b29c141a7c1081ae89ce76e950f4c1efaa35f8039b416a159fce1d04a5a5b1d1e62e77f04bc28fd5f6dd071e457cab760677924968c64ef069edba2f55a6eb539e6de72d57da13bbcfe67d24ffa9414b06fc2f0e2cc1cab6c8183ae2abd6c7f878ec4bfe9f94f44484d39337c46fa8391abd21466b19432e02ac57a3623858c276aece8b4b24069455e0bacb3d01978dd2c3a6d14440c63673324ed8ac42f0717989e6447ab73cfbf6a8e654b033909291c724ad9cbed2ba8b055e3ad8f8b23eb6d9445ffb51054007ca351166f9e7fc3e65a789327ae563f4bb44390c1fdc92f9f9abc14eb82278eda703bc78613c81cd78360800044d1c1db620731eae355489f047c52c0624845ae5f43998160964a71c3e4bdb263f69f4e537ecbe211bf6a20b1408231aa803826c3bad44584355c5d40fb732887e61730189166b4555a3abbb01492e846508eb80ffd0ed294c931b82cbfde0850e2907616dc026fb8081e77fc5d50b73fa30ff1d622d3aa0f4382c34d4063c1d105448560b87dc3c023c026fd6d4e1e5708744edec33dfc9813609bd15289ce267b24ab162e552e1adc9b7551a34a75f933e2bef600a7b4fd284d68a5388003953f7d702cee25de33834a453726c3f6cd414ccd66f4e9066d5095953bc67750c7f32d5168bd3e93a8e93a5fc7bc551cb1449cb7a1e1a78e1b36eb41de860ce91b726cbbc24f7e376e0d9dc085e3c1448269de349e38770a1a0a06214ac90f229aa35f2b0def8a1fe43a37bd0a80f273311b4715654d47d41ff2a4df12a24b784e17b6c139736f2075aa87e8272312dd22c034e7788f9500c55a3abd4854a08ea7ab4e028f5b16d9e7e822e68e373e8bd49f5a2efd26c005b9aa37a0d3b4f4d02d464b93191efe521d1614e964a3a5f8f13b9ab70f619bbf7d0ecc2d4fe620194c9f633d5bd8597bfddeb251f458eefd78d677da37451f8968abe43135015b24180a51a5d65c6d5f46df538c34d7d384c0ba38200ac7714f2e0b81faa1185354be0cea33a6d7931f5ba7d366e9669b143c049bd860e0baf65944a8128c080d3362cd54dc4d3c1e940ffd45e5d45b669e7ee6755278590b853e345906310dee422772f9562d23c6364d89d7c324c411d4a6ba6a43a01429a9555ad66e41d12b5f5be80be4a5dbcb9835aa0f496f4a03ff62cd5e86dfecd3dc2f57a2b6eefce83fa9fd88872ea678e2f849402eb7d34fab7075ed5cecf398255fc3ac830cf832c47ae9205c1d3181118b8b358694e8b0eabe0dd5223af5389bbd17e297c78b655173ead48ca0b1bf54438002ad41163b40a6514b02de054465fec4327bbf878783cff6cb4f2512af325d404a3907e41bd95f3a6a3b56f4a145269923d5d30d1877d6dae0fe8edef00e78b1403faa3c425d086ced5b84b53ee31047ddc2d1fcc6c8fc3f2b1cdd59ad1c9becc56e9fbbd441e72a19a67dccca08f64cb0cc2d264b810fdc1927edeea71a19c132dd4f06edaa43172c7196c86dc1a50c2613d33402813ecfc14ebb1b33388caf7615260f206f56aeebaaa666d8712f891753beef9081b90f098dc743bd833960b5d3625dca4e3010171e264921632ace26d8ae849c2ba39ac2ed090e3c30c1507ea1ff6c74cf0173d40bc274bb6c29b6cc806ebfb9e66d874706a3d02020e9ece9f795ff859be50d619282e6c3219b826dde5be642bef608dd979fa67a92b95eb4fd5eae8beab81f0424c8f7120aba15832cd9b7408afc7dbde59334f6123dd7cb7fb7a11ee41aa3600aaf1b83020860258c86c49510257ee295479a79783288a26188cd4b9065759c38ab33ea08052963048664cc6cf8bd6507d1cf476168fc87846b4b07dbcb90c96d2d09286daa6bbe2f779af5ffe161e39a8c1eea00b0be4d01451e384bbdaa6efe88fb596a3aba6aac2638c0ac7264cab80bf1bda234820cd8782f5140cd415a91614ecf3cace869dbcbc3870ce360de62527799a1917207314a6e36defee30fe832fed79d6aee9295db65f40961593279072b057491a72b9daaef814e12d002a5a8657fe4e4a4ef4f2ae834a7d82ec2906b07dfced15130631415f9cba10020ac206ee763abf6c90f4e9c80d7fcbae7c85f11e30502af6398d46b574f5bf9b0b33bf24979b9326aa4690af2a5971c3552ec238fe3e8bb738e8244f4d7e891126dffe5cdf1ee93eb61a3d5213c8a0250f64a75c098ecce8ed7262930c967ac837044b5941fed6a1a5502651be8c0579e44ade526055f5de78de137e0e7c365850dde94ec19e99d975e6bb6f0dff5dece3a470e90e088753c353bb734005cce606b296bf40c759e4b58c902ad64705252030c73f1e73b8b7b188b026ec5708510750a45e8a1c76f1a2aa42c325d5453063b9f75ddb12039c291bbb5a01ec9f4d41b4e254ea30b8eef94ca4635827c235a5a7e12f9958e7ded4e4c85b9d11c549c068383b772ca1c40f44967e09876bddc70890d781df3c8d310f5e71e2eae893778e092bcfb900c6a328e77e2a8c8437fbc143f17a7ee534d4269f9bdf7c77e8308b035a6a80aec1b832b7026f1eb91762e4fd3e231007f2fcb2bc647240ea5f7128374bd01a2238fe475c68e35bb305bd37f650bd4db40303d3fa4e065dc7608a1e24b087c4acb977a90232ca6477a8aaaff8355858d85adf1ad36fa136cb483922e3e7d6345550bb141703aad518c505a20a62c65687b679cded89e7ad6aefa78eaa1abd9db8cbac0cc49feb106a16387b19ff915c4cb8629b64addefe7835421903bf669490fd777fd8ca3bdc326275f44d5b28614fb40071acf3c9a52dffd80966d89b573a4e07d646aee185216da66ae41e9523b3de12c614a82ffe6027f25f86869272857c7c88fe5aae6aa07c0101df66e55204cf60d6e607c0cbce1ce4fe66ab2ff4ec84c693a925985a44eceaba39d7f920a4522c2bd8773a3779ed34b0ff3103e8d788e162af40435554d09e194448988e4f59aa474aaf410ffa1c6d089befe977611ad3627b22effbe74ff880d5e841ad77f8441c35a39a537d84d4e706fd3804d417c5192fc1f150359b06c0e1edd85b74a8bd02f98a090db50a44fd5fcb39f9bafad31556499fd557b34ce391485e09aa0cccbad58e388a0516f596e67be4e4788e5315f75a111af3ee4db14cdbba85a64cad36077a7d677f88df5e41f1504e998aefedf18407af401a2221ff6cbd43fade0e200985cdfa008413d274673b094d3c23d298e338693a911f2710e84a060b2c8eac459ec8b3ed46ab45a70ef5e55131dce701d51ebf8d99db4f07abf09363454fe21146f2ed6e006f131d73e03b21b3b372eb716fce008d87859a599cdd8dc10faaf665ccabae488b53682702ac03711e917ab67c4caac7d763c50403d5e398c7328ab00ea854bebfe31c1a71d5283a6ddaf3e0e1047f3c6eb4a9a596b855a0e06f6397b4e7d089a6f00f7c70856a9d2a0eab433860765a95a4831fe9147943032b0d49f6419cf8633f59df0b6c9580d0fd3a068dd3fb2b9952850a9d5945089b006b8db0180aa2e42d18aed09900027d1f044314d4f406035bace32570474535919496dc97a42594c08c8cf0f32ecbb76ba2a76141a2b11b47c0fc3ea6cbee35f915241dde97899fb91087dff947e519a454d48e597a9052eb6418bd57ab9599f34e1aaad06bebbf3502e37dba86fc07fc2b09b7f1fc736129264079f8523ef34bbb8226da8281ec7d1c39b0a67eecc328c2176fdf483fb4664fbdc0b3a65c53ef2975dbc1fd477bf58681ea9f836a17766d016657db709a90f2892152601caf54d7ff37c939e0dcea27fb390a1f6dc8f9c611eb7f8347d6965b6e9fc1eea71367f2b78d16607ac9e0b1039bdaa9a4f9238e3bd26c49abbfe5c3cc0307a8d6ae9dba72c8f8b0c3a836778f308c6b69c61b21b1f49a1ca8e5d9c38504fe9df70aedef3c6e04394ed3ea900d3e5587238fdd52163648781a0b07311e6705b5a1d1e8bafe55036f05d5abc6a59e4dbccfe1586087e2be8311a9aa657bf293e4f76947939a834ecbd28a10ad65eda3be2815ff0bf7c68e6f687e9709b808ac42ec154492ead5ead44ca9d5974379e1add7ba89de8854120cda5ae6dbd04471109a710f14a0f037f1f1391829892891f0a412d369ab0b3c1c55fbc7670fe6c19b39c15b716f75269307c44ec00a82e5a7889ac6b03dcd7a3e1d83ed15796e7a150fe30cc855aadb342a22940990c37ad3cda1ca0b3e8285d15288cee7f048352877d77b654e29be2028e2f0b6e42e1db34a8b9ff668</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">请输入密码</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    
    <categories>
      
      <category>数据中台</category>
      
    </categories>
    
    
    <tags>
      
      <tag>数据中台</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>记一次Flinkcdc调参</title>
    <link href="/posts/2022/05/5e397986.html"/>
    <url>/posts/2022/05/5e397986.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><h3 id="场景描述："><a href="#场景描述：" class="headerlink" title="场景描述："></a>场景描述：</h3><p>利用Flinkcdc从mysql中抓取数据到kafka，再写到doris数据库里</p><p>mysql表结构如下：</p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">CREATE</span> TABLE <span class="hljs-symbol">`goods_aspects_relation_detail`</span> (<br>  <span class="hljs-symbol">`id`</span> varchar(<span class="hljs-number">32</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,<br>  <span class="hljs-symbol">`GOODS_UID`</span> varchar(<span class="hljs-number">32</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> COMMENT <span class="hljs-string">&#x27;商品ID&#x27;</span>,<br>  <span class="hljs-symbol">`COM_UID`</span> varchar(<span class="hljs-number">32</span>) DEFAULT <span class="hljs-literal">NULL</span> COMMENT <span class="hljs-string">&#x27;公司&#x27;</span>,<br>  <span class="hljs-symbol">`site`</span> varchar(<span class="hljs-number">32</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> COMMENT <span class="hljs-string">&#x27;站点&#x27;</span>,<br>  <span class="hljs-symbol">`out_category_id`</span> varchar(<span class="hljs-number">32</span>) DEFAULT <span class="hljs-literal">NULL</span> COMMENT <span class="hljs-string">&#x27;品类id&#x27;</span>,<br>  <span class="hljs-symbol">`localized_aspect_name`</span> varchar(<span class="hljs-number">82</span>) DEFAULT <span class="hljs-literal">NULL</span> COMMENT <span class="hljs-string">&#x27;名称&#x27;</span>,<br>  <span class="hljs-symbol">`localized_aspect_values`</span> varchar(<span class="hljs-number">512</span>) DEFAULT <span class="hljs-literal">NULL</span> COMMENT <span class="hljs-string">&#x27;值&#x27;</span>,<br>  <span class="hljs-symbol">`aspect_data_type`</span> varchar(<span class="hljs-number">32</span>) DEFAULT <span class="hljs-literal">NULL</span> COMMENT <span class="hljs-string">&#x27;数据类型&#x27;</span>,<br>  <span class="hljs-symbol">`aspect_enabled_for_variations`</span> tinyint(<span class="hljs-number">1</span>) DEFAULT <span class="hljs-literal">NULL</span>,<br>  <span class="hljs-symbol">`aspect_format`</span> varchar(<span class="hljs-number">32</span>) DEFAULT <span class="hljs-literal">NULL</span> COMMENT <span class="hljs-string">&#x27;格式&#x27;</span>,<br>  <span class="hljs-symbol">`aspect_max_length`</span> bigint(<span class="hljs-number">20</span>) DEFAULT <span class="hljs-literal">NULL</span> COMMENT <span class="hljs-string">&#x27;最大长度&#x27;</span>,<br>  <span class="hljs-symbol">`aspect_mode`</span> varchar(<span class="hljs-number">32</span>) DEFAULT <span class="hljs-literal">NULL</span> COMMENT <span class="hljs-string">&#x27;功能&#x27;</span>,<br>  <span class="hljs-symbol">`aspect_required`</span> tinyint(<span class="hljs-number">1</span>) DEFAULT <span class="hljs-literal">NULL</span> COMMENT <span class="hljs-string">&#x27;是否必须&#x27;</span>,<br>  <span class="hljs-symbol">`aspect_usage`</span> varchar(<span class="hljs-number">32</span>) DEFAULT <span class="hljs-literal">NULL</span> COMMENT <span class="hljs-string">&#x27;使用&#x27;</span>,<br>  <span class="hljs-symbol">`expected_required_by_date`</span> varchar(<span class="hljs-number">32</span>) DEFAULT <span class="hljs-literal">NULL</span>,<br>  <span class="hljs-symbol">`item_to_aspect_cardinality`</span> varchar(<span class="hljs-number">32</span>) DEFAULT <span class="hljs-literal">NULL</span>,<br>  <span class="hljs-symbol">`aspect_applicable_to`</span> varchar(<span class="hljs-number">255</span>) DEFAULT <span class="hljs-literal">NULL</span>,<br>  <span class="hljs-symbol">`aspect_values`</span> longtext,<br>  <span class="hljs-symbol">`is_active`</span> tinyint(<span class="hljs-number">1</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> DEFAULT <span class="hljs-string">&#x27;1&#x27;</span> COMMENT <span class="hljs-string">&#x27; 数据是否已被逻辑删除,0 已删除，1 未删除&#x27;</span>,<br>  <span class="hljs-symbol">`creator`</span> varchar(<span class="hljs-number">32</span>) DEFAULT <span class="hljs-literal">NULL</span> COMMENT <span class="hljs-string">&#x27;创建人&#x27;</span>,<br>  <span class="hljs-symbol">`modifier`</span> varchar(<span class="hljs-number">32</span>) DEFAULT <span class="hljs-literal">NULL</span> COMMENT <span class="hljs-string">&#x27;修改人&#x27;</span>,<br>  <span class="hljs-symbol">`create_time`</span> datetime DEFAULT <span class="hljs-literal">NULL</span> COMMENT <span class="hljs-string">&#x27;创建时间&#x27;</span>,<br>  <span class="hljs-symbol">`modify_time`</span> datetime DEFAULT <span class="hljs-literal">NULL</span> COMMENT <span class="hljs-string">&#x27;修改时间&#x27;</span>,<br>  <span class="hljs-keyword">PRIMARY</span> <span class="hljs-keyword">KEY</span> (<span class="hljs-symbol">`id`</span>) <span class="hljs-keyword">USING</span> BTREE,<br>  <span class="hljs-keyword">KEY</span> <span class="hljs-symbol">`GOODS_UID_site_out_category_id_com_id`</span> (<span class="hljs-symbol">`GOODS_UID`</span>,<span class="hljs-symbol">`site`</span>,<span class="hljs-symbol">`out_category_id`</span>,<span class="hljs-symbol">`COM_UID`</span>) <span class="hljs-keyword">USING</span> BTREE<br>) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT=<span class="hljs-string">&#x27;商品Aspect明细表&#x27;</span><br></code></pre></td></tr></table></figure><p>其中<code>aspect_values</code> longtext，字段超大，估计塞了一篇网文还持续连载的那种🤮</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-comment">--通过下列语句查表空间和记录数，以及每行数据的大小</span><br><span class="hljs-keyword">select</span> TABLE_ROWS, concat(round(sum(DATA_LENGTH/<span class="hljs-number">1024</span>/<span class="hljs-number">1024</span>/<span class="hljs-number">1024</span>), <span class="hljs-number">2</span>),<span class="hljs-string">&#x27;GB&#x27;</span>) <span class="hljs-keyword">as</span> totalSize<br>, concat(round(sum(DATA_LENGTH/<span class="hljs-number">1024</span>), <span class="hljs-number">2</span>)/TABLE_ROWS,<span class="hljs-string">&#x27;KB&#x27;</span>) <span class="hljs-keyword">as</span> recordSize <br><span class="hljs-keyword">from</span> information_schema.<span class="hljs-keyword">TABLES</span> <br><span class="hljs-keyword">where</span> table_schema=<span class="hljs-string">&#x27;isc_goods&#x27;</span> <br><span class="hljs-keyword">and</span> <span class="hljs-built_in">table_name</span>=<span class="hljs-string">&#x27;goods_aspects_relation_detail&#x27;</span>;<br></code></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/img%E8%A1%A8%E7%A9%BA%E9%97%B4%E5%A4%A7%E5%B0%8F.png"></p><p>可以看到整张表占6.04GB, 其中aspect_values大字段就占5.8G，最大的字段长度是800+K</p><h3 id="Debug过程"><a href="#Debug过程" class="headerlink" title="Debug过程"></a>Debug过程</h3><p>flinkcdc任务提交在yarn集群上，没有看到任何报错信息（可能本身写的代码输出信息比较少），以至于在taskmanager上没看到任何报错信息，但是kafka的topic就是不生成。</p><p>尝试将source来的data打印print出来，这时候发现报错信息了</p><p><strong>1.首先找到yarn上刚提交的applicationid</strong></p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgyarnapplicationid.png"></p><p><strong>2.找到对应的applicationid后点击进去，可以追踪到ApplicationMaster</strong></p><table><thead><tr><th align="right">Tracking URL:</th><th>[ApplicationMaster]</th></tr></thead></table><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgapplicationdetail.png"></p><p><strong>3.点击对应的ApplicationMaster进来后的界面</strong></p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgapplicationMaster.png"></p><p><strong>4.查看日志输出,发现是GC overhead limit exceeded，也就是超出了taskmanager的指定内存了</strong></p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgGC_limited.png"></p><p><strong>5.尝试将ytm参数，也就是在提交运行flink任务的时候的taskmanager的内存提高到8G <code>-ytm 2048</code></strong></p><p>发现可以正常生成kafka topic，至此mysql -&gt; kafka这一层可以正常work</p><p><strong>6.在kafka sink到doris这一环节中</strong></p><p>由于配置的dorisBatchSize: 5000，报JVM heap内存溢出，暂时将其调整为dorisBatchSize: 2000，报错消失。</p><hr><p><strong>后续可以尝试调整参数：</strong></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-number">#CDC</span> Connectors <span class="hljs-keyword">for</span> Apache Flink<br><br>scan<span class="hljs-selector-class">.incremental</span><span class="hljs-selector-class">.snapshot</span><span class="hljs-selector-class">.enabled</span>: true <br>scan<span class="hljs-selector-class">.incremental</span><span class="hljs-selector-class">.snapshot</span><span class="hljs-selector-class">.chunk</span><span class="hljs-selector-class">.size</span>: <span class="hljs-number">100</span><br>scan<span class="hljs-selector-class">.snapshot</span><span class="hljs-selector-class">.fetch</span><span class="hljs-selector-class">.size</span>: <span class="hljs-number">100</span><br>debezium<span class="hljs-selector-class">.min</span><span class="hljs-selector-class">.row</span><span class="hljs-selector-class">.count</span><span class="hljs-selector-class">.to</span><span class="hljs-selector-class">.stream</span><span class="hljs-selector-class">.result</span>: <span class="hljs-number">100</span><br></code></pre></td></tr></table></figure><p>个人理解下来是减小每次拉取的数量，这是在内存不足的情况下可以尝试减小fetch size，chunk size的大小数量。但是我这内存充足就没进行相应的调优</p><p>参考官网：<a href="https://ververica.github.io/flink-cdc-connectors/master/content/connectors/mysql-cdc.html#">https://ververica.github.io/flink-cdc-connectors/master/content/connectors/mysql-cdc.html#</a></p><p>还可以调整并行度和slot数量观察数据抽取速度</p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>Flink</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Flink</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Flink作业调度参数详解</title>
    <link href="/posts/2022/05/8581ac79.html"/>
    <url>/posts/2022/05/8581ac79.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><p>本篇文章介绍Flink作业调度命令，以及调度参数的解释</p><h3 id="flink-yarn-cluster-模式"><a href="#flink-yarn-cluster-模式" class="headerlink" title="flink yarn-cluster 模式"></a>flink yarn-cluster 模式</h3><figure class="highlight plaintext"><figcaption><span>是否使用分离模式</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs -d,–detached">-m,–jobmanager 指定提交的jobmanager<br>-yat,–yarnapplicationType 设置yarn应用的类型<br>-yD &lt;property=value&gt; 使用给定属性的值<br>-yd,–yarndetached 使用yarn分离模式<br>-yh,–yarnhelp yarn session的帮助<br>-yid,–yarnapplicationId 挂到正在运行的yarnsession上<br>-yj,–yarnjar Flink jar文件的路径<br>-yjm,–yarnjobManagerMemory jobmanager的内存(单位M)<br>-ynl,–yarnnodeLabel 指定 YARN 应用程序 YARN 节点标签<br>-ynm,–yarnname 自定义yarn应用名称<br>-yq,–yarnquery 显示yarn的可用资源<br>-yqu,–yarnqueue 指定yarn队列<br>-ys,–yarnslots 指定每个taskmanager的slots数<br>-yt,–yarnship 在指定目录中传输文件<br>-ytm,–yarntaskManagerMemory 每个taskmanager的内存<br>-yz,–yarnzookeeperNamespace 用来创建ha的zk子路径的命名空间<br>-z,–zookeeperNamespace 用来创建ha的zk子路径的命名空间<br></code></pre></td></tr></table></figure><p>举个最近项目中实际用到的例子</p><figure class="highlight plaintext"><figcaption><span>run \</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs flink">-m yarn-cluster \<br>-ys $&#123;slot_count&#125; \<br>-ynm $&#123;yarn_app_name&#125; \<br>-yD taskmanager.memory.managed.fraction=0.2 \<br>-yjm $&#123;yarnjobManagerMemory&#125; \<br>-ytm $&#123;yarntaskManagerMemory&#125; \<br>-c com.itiaoling.app.ods.Kafka2Doris \<br>-z $&#123;zookeeperNamespace&#125; \<br>-d /home/appman/realtime_warehouse/jar/Analysis-1.0.jar \<br>-spring.profiles.active pro \<br>-sourceSinkType $&#123;SourceSinkEnum&#125; \<br>-businessType $&#123;BusinessTypeEnum&#125; \<br>-tableName $&#123;tableName&#125;<br><br>flink run -m yarn-cluster -ys 1 -ynm esc_goods_oc_test-mysql2kafka -yD taskmanager.memory.managed.fraction=0.2 -yjm 1024 -ytm 8192 -c com.itiaoling.app.ods.MySqlToKafka -z mysql2kafka_goods_test -d /home/appman/realtime_warehouse/jar/Analysis-2.2.jar -spring.profiles.active pro -sourceSinkType 1 -businessType 3 -tableName isc_goods_oc1_batch<br></code></pre></td></tr></table></figure><p>以上运行的jar包为Analysis-2.2.jar，</p><p>类为com.itiaoling.app.ods.MySqlToKafka，</p><p>给了1个slot</p><p>其中为类代码中接受的参数</p><p>-spring.profiles.active pro -sourceSinkType 1 -businessType 3 -tableName isc_goods_oc1_batch</p><p>taskmanager的内存指定为了8192MB&#x3D;8G</p><h3 id="本地（local）模式，仅开发使用"><a href="#本地（local）模式，仅开发使用" class="headerlink" title="本地（local）模式，仅开发使用"></a>本地（local）模式，仅开发使用</h3><p>一般可以使用这种模式进行远程debug</p><p>直接在IDEA上运行代码</p><h3 id="standalone"><a href="#standalone" class="headerlink" title="standalone"></a>standalone</h3><ol><li>flink run 前台运行</li></ol><p><code>/opt/flink/bin/flink run -p 1 -c com.test.TestLocal ./flink-streaming-report-forms-1.0-SNAPSHOT-jar-with-dependencies.jar</code></p><ol start="2"><li>flink run后台运行</li></ol><p>因上面代码是直接print出来，使用后台模式会报错，这边修改代码，直接写入hdfs，再使用后台模式提交</p><p><code># 通过 -d 表示后台执行 /opt/flink/bin/flink run -p 1 -c com.test.TestLocal -d ./flink-streaming-report-forms-1.0-SNAPSHOT-jar-with-dependencies.jar </code></p><p>flink run命令执行模板：flink run [option] <jar-file> <arguments></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs stylus">-c,<span class="hljs-attr">--class</span> &lt;classname&gt; : 需要指定的main方法的类<br><br>-C,<span class="hljs-attr">--classpath</span> &lt;url&gt; : 向每个用户代码添加url，他是通过UrlClassLoader加载。url需要指定文件的schema如（file:<span class="hljs-comment">//）</span><br><br>-d,<span class="hljs-attr">--detached</span> : 在后台运行<br><br>-<span class="hljs-selector-tag">p</span>,<span class="hljs-attr">--parallelism</span> &lt;parallelism&gt; : job需要指定env的并行度，这个一般都需要设置。<br><br>-<span class="hljs-selector-tag">q</span>,<span class="hljs-attr">--sysoutLogging</span> : 禁止logging输出作为标准输出。<br><br>-s,<span class="hljs-attr">--fromSavepoint</span> &lt;savepointPath&gt; : 基于savepoint保存下来的路径，进行恢复。<br><br>-sas,<span class="hljs-attr">--shutdownOnAttachedExit</span> : 如果是前台的方式提交，当客户端中断，集群执行的job任务也会shutdown。<br></code></pre></td></tr></table></figure><hr><h3 id="tips"><a href="#tips" class="headerlink" title="tips:"></a>tips:</h3><p>flink的slots与yarn 中的container以及cores之间的关系</p><p>flink-conf.yaml中有关slots的配置</p><p><code>taskmanager.numberOfTaskSlots: 2 每个taskmanager中的slots数量，在具体应用时，可以将 slot 数量配置为机器的 CPU 核心数，尽量避免不同任务之间对 CPU 的竞争。</code></p><p>在yarn中提交一个flink任务，container数量计算方式如下：</p><p>container.num &#x3D; taskmanager.num &#x3D; ( parallelism.default &#x2F; taskmanager.numberOfTaskSlots </p><p>举个例子：</p><p>parallelism.default &#x3D; 2 ，taskmanager.numberOfTaskSlots &#x3D; 1</p><p>提交作业后，还需要1个JobManager，所以总共需要</p><p>container为3 &#x3D; 1(AppMaster + JobManger) +2 (parallelism.default &#x2F; taskmanager.numberOfTaskSlots ) </p><p>Flink 中每一个 worker(也就是 TaskManager)都是一个JVM进程，它可以启动多个独立的线程，来并行执行多个子任务（subtask）</p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>Flink</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Flink</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>数据中台-08_交付速度和质量问题解决了，老板说还得“省”</title>
    <link href="/posts/2022/05/5a1e8297.html"/>
    <url>/posts/2022/05/5a1e8297.html</url>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="31483b1d144bd3b066d40b54c5a67396c57daba508aa80fd82c523eb18f8029f">4e4fc70cc91fd42566446082a751780fd5618d041572b8bed7c41bda7a5fe16038be3debec314ec22c9c045460029955f073358e93d5787a18771b110dc4e0711ed0cfb5c125c336360ee7bf0606c7a6747526e3e3021e57883314b15365b069a1eb6de97c31f01a62c3e290a14c540a3d4d49dad8d4877e8534e9874210a221b5cf6ab2a5a7b62e9ec0a55aacf1626b7eb92a34a2b663adc00c1e4dd92ade361cfeadd52cb5d61478e2020bb2be615bcec72d2c2210161dc2a0dac9114ae198c3c5b0fc37fba9a4f4391189d0cf1dd28aac872a074f6c7a14662681ca26e89cce1f0c5abad443e0d98d0efb72b68a90fc066866c179cc26446830b888753e353c018195905d65464ce444fafabbf1ae2cef084ecea26d2c6feaeaf38e64a8768d3759214ac073e5104b12db4703461ab62805e2cbd8b873bba1d2d63c7dc4921a6b2cef919e3b71991dab5d429d8ab0c9d68d2f55f5b096b7f7dc1bf2d3413cf40c8807ddef629d7d1b3fd3bfbd2ab4811bbd93b5042d6c0e886eca7e534d5b052822e5a2defcda6dd749ba05362a92f45a89e112c5f681ce827082d33b38ca08dd53c8d464525d393b5c01315f9b7acf7a5cce7312269c05f2d22f400e475f3eaea4af055130891addb39c32747598934352bb54fa56a1ba151182c58f08a6767fcfd414fdc06131d2deb26f4476f3a23faf81fc0d6639cb563ba9be6911d77ca6004e9ec2f707b084a66a73da5574412f0f4b78cbc724b977ded5903ab98aa6af70598b659c76abdfb174d1590a28c3170fccf95a5da16838a6a5e8ae4b1a2f01ecc4f387f96e6619e66121d444404640fb4d5fefa1d9c59797b23eafd1492798cc393d70292ad6903f24033a749b7ba67f32d1e9e356e0c943af8fbd5b535e07d7c64a2797f5f9b1653c0c4d9f147d99e89e1333f7d64052f8be1d470d62ce5c693cf69027d9a0cb0e7da5afd0b80f72603d7327028e75c5d8bbac3ff04be14a211b6299932b32f1355124b90278d485d21154d3635361b3d37cd3852ef3cfd4a2bbfef7c768b91ad422c7fd00448a18205af3dfa8fde76165d61b11104dfb4e2f0dd72627d40585dab16462ff76c721c546c01d04943cacd272aeecea799cdc99acb640d341c210f8bbfee58cc372a19a4c5c02b975fcbb33105395ce8b7fe3cdb3908081ca011119485ad1fa64508f3eb6f05ed1758d7353d380f7094fb23caa80d545baa33e371a09b93fa10f7b684e43dbf3c1dcf8bd93cff0edf8eef8be1384a6970f327dc8808a6f468f18796c7c180b35d02f5dd72902b6f0ec7ed6bb2fbb47b18ad0ea9f6452abca214553b82d881f496e9179ef9b1271cffae353c3ac3ec41120f01fe13bdc19a8ac1ffea610812d25ca16c74342fb588cfd13ffa37815e2d16671ecd42e295f4dae4e252bd236f8f710e4c100730a04e9bd0721616b521d78a3cb1e45d74e4f6d0706ae443ef897a263476048e7db3aefaece464730a725a99df32a137d62c5709f26a048d5da72daa25dfb1e8902237bad0e0854c2d4cdc2b788148f243073a2a54de3639ec032d2ffeb1b74fd8ec8fbecf581af873e0364a9f744583f88d6c8e62d88e6f904e3aed1b7af27f518167317b76957b0996ef6c631c27159091989e992995ee8e8f392454cc0bda412fbc2959487732cf6c91b25bc65a3431d3c793ec756c10797accbbdf55f86f68f1e9dd79b412d857de520be74f87bd1604f8bc91cba72b2583418256cc834776e994c4f8838859de9756bf0ab65cc6d2e6bb385db9e410b0faf27dcf929a8f5fed3e606632695a490f73edee38a466cbb05de457b0e7031312358ec0c88717b99a7441ef8718e0e4edc8045105f6c78f4b2126e10f308689e700c0cf878a4d7b20ffed1abd0f092e9f17f87c2fa71e4d3b0b833d9c395580a2856e4f51a00b658a87ff45db29af74352425aa8101b1dc211d89af57c092d791bdfe79361275ee3b6403ee54ee5a87ce3a7afe4e023cc795debd2b644edb6fa4162d820e6293fd60f657823cee7f156658578f60d3648d1a82694ad3e2b4d634d89b363e616470c98c30a3bb5013bc953bc5d6730fac89d7e6e5e3c290a3917040fab225cf9258b8bba43ad28d78272729d5045e374ed2fe9836e9ab43948c6c1676e4780a055d5b28d1181dc31c202849c107bd3680b283386bf77ee1082dba1094131c542cbba631426f47e35edf86e1bcb1200ca7671b27e22db70fce3b60f0b06d67e97865277ff4aa1f749005520452e372bc1d24acc9bf23ea4f5c1264fe61c361797df24f2b7d1ad99e638e5d389b3e697134ebc3b31258d37dfdbfd0df2bee35c0493447fa0d2411c720faa8edec3434b266d64eecacb832a72fcbb59e7f917b7b9d67639427b4e752eb15c8b8c67b42d5fde7a2005152c675f2e9b6b8a9359b72515e616124707806076f47a579ffa192e4887a91500bbf24ce4474c0a41adccda4bb42021a24b217a5cee18a7cddc5af91dbe841bbf85a9d0e882880e83904bcd596e9556fd3b74e08db11f80a3ff51fe8d1416557b73e430a11e97239f4b3eb6e25b6bea5b5adfc8d885e627d85bdb629ea331be36872411b831118c3d2dd5cd3cb53bb6ba7fbb6c49e15ed6b2a46f0402bc447c27821ac847cb786c7b9163a043a02210a152c17d19d4966374fea1a1ace160f95ef3eee908fd97b740da0e10bfc29f0fbaa06c023ff389f14914a84657d51e84128ce78e72516818c46668f78ca38bcab65a91c9376d5614d6828a3b4db5203b8e6a108819ca8712507ddf966cf4930ad752e57f401d9a771550c87b5f9a8169d2c5e5bfb40ff881cc79aa9aa63fa41e0fbadc7a581260777dd364686816955e0ba7b2bb89b95ff12c186914b9467cc08cfd212519997db79ecf2d4cd776101d087a57c7124e3f96083bb9dcc145fc8dba5f827545b30631fc635a602e19a37dc601806e8dd3b1f05def5cadb1d887f4d3e69b15990d52f5bc76ae8eef51e65bd8dccf5251b95c86aac28e9de0bab431981ffc3e049473f8b94bd492c73cffb09112d0dbb13bd4b5310f88cdff7a0b8d9b41f2d3bf678b350ff21aaff14dbef4bfd91a9f627d5f6d3cb8f96ff3a213b3780121900ec8f9f9cfef0ad416642870a4ae5bfb9a86e5dc0739a01f83cede48d02c83dc4ce3fbd3389fc8a5fd73e5241c24740ea8902fe94df90c6400ddc5635af79acd8d50785d379b3dbebea0f9bcf09e11757400c07d81268d5e44e5a49db15f9224511208262fa23bd9ba23872155b86513f9118699fff70d1a379fd4eec9abdabdbd37e73b1dab1670695068307a0839fad845372d81278ac1f30ead8b5d12f757c67a59befac5343ba7f19b34c44c0934228fcaaaca8ee721d88f84e94c82b26f2202eac5f3b20e3aabc0348a18bdc1c4b8b5d8a41e38533f5f701bb5d2ed8c03df8f4c04ff3d10cdf7603b61f703f5e706dd577da4a62bca5337bb61cc1484d7ff77f3015944301480a7acfd7ebd7eadd3b5baabe676eba5af93246133d5b16af976ae31d4cb1b64f47ecdbd91b0cdd1e9d950588b0497b45d9fee1920df48af267f5e3d7fe35c66def6b375ca418c65c415c3b8223a54bbb67635f34b8f72f110d2918efe08d198035c06463d7b0c139f47f33b9468176e78bbff4515e5cf756fee1a1e8f1cb469dcdd184c2afb5526cbda1e1740d5813b108daca6fa11a3dbb4dd3209ce2608da2c1bce714f21b9828768940dfa96c4ab4afc9f4db5008803900d357abdbb89487d6b2506ca3a8418f94995c24b0a3dfa108627c13912e6e80e15bcd1a3b5b5eed289a70d9fa6a8d25cd6d6acb302b7d7d0846a015811736dec6cd9e1ee09e90df8fa622f11e3a2d0b34e5cc984ea7eb4f6c64896a965a53246dcb6c97a1607000af2a13ae8cb5787ef1c1c5048b156f2e720c79c889269a5c22c7095e74f6352760cc92e54d8b7254f8e4e795346f96d18571d1d232a82eac99ba256ea5d1fddfd4a43d09162a2dca4b6b53142e27e9fa9ff99e3db0bcb4bd6a876e0f54accdb80674f4f04aeccdc14633ff08a4c6a0d1ea7e63cc0732ed1d9144e25ff5a436cb80fb44b3ad56b957e02830452f97d80956ec86572c90b5ad98b5cce0baab84618f9c93b0bc4a0a461184f98809c8bd588a2756212b34fe41bfd95ded03f90d94cdfa786841e381fe980d409f49ac72cca5dc7eb6648d1f5e50ea7c4d32052c9a80b533c7fee1b9b246837ec52a13b89f828eef4a60fa22b49846de9416e68e22cbc400c30caf20c223eba5c89254cbdf44350c3cb079035bde9881c14ba13d3db12b6c6cfb490e0c8961adb4c4f800f45c31a55819bc54a9da717dc8678b7c362908c38772f18f499fcee51a7f7e21cfc43d863dbc27aff43ea6d92d5e021d88ca846c92346fec33b5843bb7ffc108cb512ea0f28a79f3fd6f74616ca72a886b80bccf26fe6617831beca69aa5ab63ab35405f49d918e148e5ce72b2b5cc86203991cb5c910ec75cd5710277c9dfc60ae8e1346a67bce0101d556c1b3273b7c6334ba3ed3f7a0bb8b99e14cea9cbb5f0f078fd87fc16c1a3460b8318dbe13ee249bf56384d8c82de6274812a391da96d936360215de16de755635a5bee0f09c589920b1bc4b792ed09fb489595e62c508a9c1d731b312245871a7c2a03a95c29b5ebb4f836d16bc177cb5cd45b8122447ce43dce9cde5a36dca172fe3d88498bd0ad407c07e09faa148d190ffaac24f6f7e4624d2286749dd75edec74c6785deeb442bb423eb1b4c3e932df6637fae800a4f02d54070b4ca6dcc0b49bea1f69dd10fca0ffc1dc80ff4c2d454938081a0e65d3a17de51bca7fb8d2307c64921901c60602725de96a67ecbd85bd0c8b4adcb5e23883724445347646a7ee4fc7d9646c163891a4ce730a256077e01604104689b9daac1695cdffe3720eb6ded75cc049e073ad006a71bb3f865e9d1022a6bece632b320ead6e2f1d808af16e1a48aeb60ea5b60b2ff8b16b6000c43f1a5b0e63700f1cc8604a7f29b16814924c79730d394334a147a3657d997bd2c524b38363552f4c7deae2b379cfdd29bfff0c648c98caeba12b519226dd25529525da9cf48798cd13c35b0813ce139eb57329ef9b186e62c11fadf500bbec6e7bef0f075960adb4bd312c8225e7462adc8d0a93f0f890d55127b5ce6e986da91ba972c664ad9c62e622356f30fc1edd75bf6870db645fb111a303c9a672a420341e52d3216ac93ce69418d0e5f5df4ff50f636b6335b51f5cb7c90ce877defd20213f621f81088a06710d91cb301b95e710ff80e240797f4e45c63ae12a05b661840ec1b343070f533bf716d47ff11641c18784f2eefd8242398e34b8e452f13a2ad7291313ab49f2edc53643436f94c60c5a83509251cd62bcc0cd98629b32371f3ac634a8f432ae5c8f819d4d58ee61f4424ba56c9ebdbd703f5c1b7cd6d24ccca1baad8cbbada7aa962714055a08383833498a958d5821400a18854a3263b3c87ef464251f75b83d185a51d3e5397414814b5aa77e5216665d7d54466c897496aed2685175291df432336bd9664ea5104c90cd413657807dec16f4111d54d552254e496cae4f27d40d812e82c627de099adf9704710deee4b10697c0da478b08eb871b5502e80dce635288f3534fc09a26decea4b1fde140869941139162ef20ae94a5195adc72c9f39196aa108dd5353bab1f13eff95c23c616a8e3b443ea925fb566752a56937a2abeb8508b3672d42018093528f4c3a2f0855206d606f690c1793d0e8a55c54683bd76ff2663e025ed29586fdb4b0e2b17b865600da2724a3a16b1aa396cc2171cea8ea27061090237ba1745d5a0c79f8d21b3e122f59d35ec9f8272e020f8ba85c32a7466d367eb63e5fb2e8a8a27eaa8805a458e5fbed375b7cdc4d887ea67ca648cea63911e3e2d4e379192a0cfba7b6bc128089536b262ce64bc67fe1c73289266d5348394ae3f18f2d9ee5f56826df6b9134da5e54f9e708d2fb92e3a49617f0c7f55197d2774cdad284c6383a8c19372ec17e549fbf3bdb310aa1713ec7de1bd32976b96313987166edff66ee560f33da649f6766876185196befb460d1021203d5c609c3dbedfdf1cbacf926849ed09e0427676334627f62bcc847535429b9c1832516ad25ac354b1f6f2ff450cd70c37d8992086837b3f210dfc1b14c59c734ab3a422be58bdb30b406f13d1eb9bd0e7e84c7f5e87ea005b3241362e6a2acfedc0b5396be2a17c9dacbc68554a2584eb2b4fa937bb71a10e6c2097d9934a81a90bcad089ffc6287363d34568df6a610699f3305f09b7e2f25e15f5f7cf23faba98d9be069355ded09c93a65becf59e7674270a02ac6b837d09370c9f6e1e2316c3820e3cbb3ef47459fda9a8466e5dd24893f452f8ef0168f7541c9e379925062541558a0b552e8cb2e237accb433260860919115ff632edbbb7df37377ebe793ea82682ce5cd87ac13ea855abfa7471206f4126b09545083ec695ff1bfa867a03a5db4ce58989d300a7b67e087bb24173f435d047aa44fc668c65360621b33666925aab93ce091711421ae52de0c00446e5bcb44d2644fda8544c75ffdab9a1a55ae90abdef23bab05dd1362a15b1de7134ca60e135e1506336b67dd9a3a23ea29a41f87636c4afc926919ca4029c6cac0a6c135770417470fabec63d4f06f291b3da8d0ce32fd04515469da6d1de11cac0e811ffd361312131b29ba18b574e33d6df0866c6ca95849b34e3e7d422b12685781ac06ad720874fe7cd89156c1bee7e9210ab3a8200a5b4b90a8a3be4863f120a5479bb786fd77ab8b0b2bb819d68243ee2475c459bdcb0066ee8998aebba759a71efdb2f2b127edcf70cd72070527c3d453dfaf584ced04fde7dc505f24172774655b280f2d0d7422b3b13f11ea8e8836a73ee67738a18f3e575f6c2099c3f754825ec39d1308cccb95df81f783a6998c115fd0bcc9243cc10602e39feb2cbe712f484910bd2f8c21a3a1ad3b08892f89a429e49ac29fe38b6e41194e4eab2707f4fcf4e4c87c80beae90703162c074535c133a81e29aa9a35464381018c706763edcfc5c928de4b3cd3fb077b9f5635e75a1e94333fcadc10558bf99cc9be2a0a60e0976ceab5dac7d49ffc49230335f3ea67b2294f6e9c97003c42dd05ae901a4dd9ead38b095e775518febaa92903212fc9e20770b4cda3f1dff8e3d2747921211e7b931b3b2a5cc47eea1cd2dcb5a7a2e968199985a8e9d1b58b3ab69d737a5e2fb2989f01f956f87ed999f8a3ebe9667f91b8f057c391f1e8ac643111f676c8b6c5d4160d996288c165357e0efa81a5cf8b6fa25c969e744251ee1236a6f44b8fc0bbc9dc2a1173788c1c3588493366b91fd1970ab637d3aa14095a84fb7c50555fde0e085e3e5c61b708104f92f4c68cb430a762c38ff9ac566f1d53ea8f7f708edf51f0ae06f351f70f87679e3ea897aca3449c0f87be343ff40df68d8b89849fd1116dcdcf560839fdf4e8370ae1ec9514bacdda1ae5cd96d67bce959080fd7d0ef99322bebde8b58c37fc50d3acd62bb0d803951383f0340f746ef066ebd65b1df43a319214e697fe3fe15a9091fa4ac7f4eea8626a250f30049475571a67e30008c03eefe1780e3afb90b7f26d9d46aa5b572f6170163c6943e63c47a1769b131b634a9ca43341927ace79d70f45ca335820dde737f3232564d720d6b7a0a2da0d945c56b4afebd54aaa4e50613519db243aa154d153e29a9a4f72e8b1ccd3bd2cadbdbf17c3d81555084a9fe6c28c2aec8937904136d01d5fc8259a2123561e4a39656e30c0fd14feea62a85fe5ca0b3b607185af81dd1847cc1008a9a31f2e7c11ffa47e32d5a0148c7a2b8b6cd875b3428a9fe63db73c13561bbf581becfa97e3b5d2b927f29eacefb55e0edba9f78cd414d5ec6f08080cfd36a646ef46bae3ab4e6a6d2850a426fb4840a6855fd205ea160542495dc76f83b588b152656aa8905194bb6f7cd882a023177cbd653ffcb0863b9b6dabc692bc9c64222f9781b7f6c4ec61504ce6c88c1373e2507003e086629523a3c7a6d26054c53a9364009f8aa933bc4393b82e3ed99e376f8d7d4daf8a62b0a400a7c4d22c9d69239cc3b4900b6cc0049495655054478913b7cc53251953601bf5b33baa12749b1d8d1115913e08786c8deafe8bf32754188d5e27705a5c9813fdab2a005c7735e5d953e90a9adeb4081fb1bdb325775e7725d585c7f1fa9207261b177b665af34a48723c76da55ee2b1458c7044ffc05bfcf227e0e3bc61827127f472c7cf532459e0d40d8158f9c397bf73df8a2b61c3efcdd33f923ce6808fb2ba8060c22c6900ced7521c19b740308238710efb8491cbb1d692976014aebec890f395430e397a249ad5e9c468b7a1ab8fc7b40b2f030814534ca890a7af49dc6317916a3db70ddd99f222f3ad39b46e0da0395466825edd8562be946e5bc95cca5ff9d521369eee5162ae6f8ec75d6d3d2c1e503fb3c0d17501f476b7d6f8b9344bbbe63f9f30411a9365aecd50b23c31edfc6e32f6e107413b8f2ad1c88cad396a3f8540fa66cd760d6da731cac6097fc760231e711585777e9a80a69efb34b4418fceb00420593a94a7065ea792a936a294b1907071934eca404280db0ec070d473a7f5ae09f89e7722fdd99ca756c9bc2035290f862711fa931ac2da87b3f085574be147844f43d744fbe8b5baa6ee45c4aebc79ec291e2fcd1f7109378556b4db12a0c08e0f254b19bbf0f2c004351290216ec13c924359e0aa71a77fb76a103a6895ad41e70dc6333b6710ecc5962408ec7b521a89e9b179b41ec7f4d404e30e8e295bf9351b50cbed4c514e90af411ca428cd0eee02bb49f90795c395c618c1801cddec9f92752c227eb68b674252a8c3fd74bdf05aecce176c8e33e9b8927b8215edc19a89b05f2140930880e7250a44a9641dd2bb533f725cce0777fe8dc0de2683038f1809ebc36c1a9728284c1094d6dd41bb9f984de981964e2b994ee24a3569b7c71578d8dfcb7705371910e1e632420cbfe8991561519a865c261a210e05adab4c0f49401049c95541cee244f4cd6f55e74dd398749d81608fdf36e79e555eb4ffd370fa38a6e34f38dc65750f31892186d7ca353b71138cbfcbd70e053aa9155a3294a3b6bca5d5c92515e1576ffd415d75a092bead93d68b4912ac1939e885d2fcd601a28915db6a07566d392c22a44f2497b59e56850246de56fdeae81b89746fbbef9e9be03765153b09bffe184518b80f4f8e8ca256e0208b2c4f30f13d9ec6d45c89b95b317c22d473636cc3b9d2ba170062e896fe2c266494640e785acdd9414b876aaecf1c9088b27cd122ae5bd5a7d564ab95cc83dd4c4402e0e9d3e3accbe0b8b113a49aa3a106e59f2ca5aa915417e506dbc18d8c56d0a52a21ff7a7820c6e3fe5334935f40347029a0c377eedfbc497b01e21f1b952376dff2d33fe602a892912425242cbb0c0873cf748aa725a79b1b496331bc17fd38e0c1da03fbf4144964fccdbb12ba5b99b8820f72fdfa2006bbe86e99a15fb2deefe32403467165fa77ce4d652beef2b64995afaba303970b7ca754236361f0e9f204f2715f2d02588df5c682e42ed249f8999a495b2922c6703e76fa1e926b4cd6bc85f3371be9cd511e50f35647c782992ff1da7a614a6ce8181aeed3d887899e572eccae7ae4b716163d1f0777c0e253cc5afff7313a4c576e0e5cebbeeec3db901cf0b98f8cb73a606a2e620e8244b2dcf86a3da046eb13d05a827ca42632566cb265d7d3dd679e044ac5f8fc71ed2c54c302e8345172bb7bdfc4587684e7085b2bfa96de14469e1642fbce42cb1b4892391408f3c701b96b5c1557e8a74b1d562c8126a570bdbfc57b9c4b57f849702a88a7e279efcfeaf2d8b72e6fb7fc0497ba1121fd30aa68f5ff1dd9616c87ea3ef130a7b9f6c6d940dbf51843dd2d871e280ef31cb8c283a6b2a589e205815b08478217ac353242391623cf137e7431e14987f2946c942b6a1acf45f333e92f77676d26d7037c70a1b3989fc60716143e28998f9bfec96eed5a85b0f3afe728c07b80708322018530389a050ddbb5b44db14ba4844617576a57f5498c320c7cdbb1ca980bde7d753d4d112cb68e28a4010244fcfbab5e269662e4c56423e9711fe097b0e017c70c08bb2cd47fd1d6b9e890d02b10c118819be5219372bd1926d5b21d0a92114e128f0197dcacd46d6bacd40033be68939131762a870da0cbae8c7378488cfb12eca79d4933661e1bbd2dd2cd7997b3d91a1916ed479daf43c7911153c9d7de6ffb280a5867bc9e2115d3b2637a7edfd230269dc3f88088db0f3a7f0edf1768a36d3827ecc1243803d72fb5196108d0c1fb8c810b6282fe9e20db85df7a09247c812c692d2ff1198c54c9dcfbb44727ac66dd27cb4ba5f03926bf784e68a977f6d8d09a0242b86ac52d655a1bc0a113173479b0ef424fc138d975579a27fe49853ad2b9895a930a49b0717a44a0a3ab73376d3586ae21ea65bb95734435b82c6e14aaa4245bad285f067831ee11f6621e1387171bc120cedbe1101b910cf498eab9682990de3e8d14a2be00816dbc33befeb7b0a085ad909d9db85f56bfe4de009deeb9a96aa9563b82995d9a9ddedd1e231bb423786592ce3a6b9ee9b33bb16d8819c1e5eec2985e369c77f5c67e9bc2b0cfe227a20d2ea4e9a932831ef7b57cfffaa5af7eb32b2197277eeb1b493484c1f15f5754c0b8e8b20280c5a7425ac8ebfa665ba373ff898a59fed65c7e26d186c601e497abde64e0a649402b000c5c2220728e9105ee1b08abd0406e0ad6d5e281d853b3bddf6a1a3356c9486ae66ff8da7260d9eb25b92c4f0b704153a59537f4333d483d3f69f22725c301fb4181fdbe58dfa58face73d62ae2e43fe7895e2976a913f412b40bb935b398ab5b9b3b19412dc2d1138138950f49d88af8249d2f387fffb1bee6106a6fd3ab1cab26e43253e025801dbe6ca02940f6869db76f015e5bef3ab36f75ef323dd4c801232b67c0a0248f7300ddd8587732a43f467b1daba5cca12cf441bdaee3ec09dddb813b9b9a6f3531b1aafc757f4246bdd09b7190f384e6ba2d190de2ac0d3c56bd8eb51c274d1f03d1dc61ad71b34527053025d74e270c05d077412b6d8a55096e8945920eddb80fca84929a0c46a497548c36b8b45b03cef7d825c2c59781d40be63a8d8c6b78976c8847f4fbcc16616ea7ee0eef8679af92cb72f6be7bc1818d73504326341f53fa60ef9504a35ee4a4c1d69e44a7898511224b2f24e2cacb56332f8e7e25cb1169e129a86c06535aa919c8965e6b52c30126ea1bc6d8d1a6ee54e17e3c68cd72cebc04a4bd5747e99b9c07f0942d8bd0253a00f4b62624ef53fdd37583efcef2a112ae1c451c04807abe9abd5495ab4ed4aa65d2a0e0755e1e305699c6109dceb9e5b6e48dfb5a208acc1e456bd5624dc1b8450c1ed13d51c278878cf8ff955cd4460f63e06687d33530f42224128aabcfedc9d01f1ec256421210591e1618d894dad38223f217e926ba28c1e55d2f5ac5ba8dd2f2f1f40d267c6920c6336070146614fb4da29504d446455d070d4d827eb1794c857dc23876e9986c8806a5df3188c4a9f91ecb567cc177c717243df9349fbc2f81ad4dc9d001d36ab40a0318fb56ccfa4a556b664db2889cfc8b03b73faa162c63498bc2c00c713bcbc7aa15e7c35a9721b003f0b3aa926e8a9259729248b1acc21cb365abb367421dcfd4f773dc4380e0dc67f2719e291084b1e4936a36f91c6cfa057f05c22746ab128d738eee272a579d252fa852e5642f3fc9f682f255bad6daf2314db29d7663b3bca5366491b5704a7035facdd4a49dcd57f7c5228448768c23d2e3565becb1d3d969becdba9e651df8b2d48a724b5c956cd5a48b1b67f47eeeb952caee1f8985b3f3ddd89d721fb8f45bdd36dbc3416c6b54a56bbc05ffee4a5a62eeab8ed2406a26c197f9f53001d7a4e28bddd75e963f22d76de74b88096eb7de15d9827d92a4681adb8911e090ae097dfedd89fc6508dadfce939e04c356267780325a0e95530de0520a9b18042d0c1a9c1b4749a56f706599451d18fc1045c060cdcb8c43ddc588cda6363188860c251b05e67af5375c3e37edf9b82d713ca3c94381db4fc9aed3185f6ecfa40c16fe4fc41fd6d7c4c72d0f7d77adabc747450e4b7e5ffc9e736b2804f1e89f46a608047a41bfaece15f5c42bf05759d3a1d62d97b3d6573e6d117d8decd4d4af6daf220dcc694deb42f42639a78afd059b930d4385ca01bbeffb1bad2031343b8d9589e099fc5e38648f87510cfad48c4790cd542201f42081d5b972628f5d579c448757231ed868f7e0235e071c98ddb1831a04b10ee0adb824a408adb45f19ba81958c5f93bf8b4d0302860443afb20438691e115550927e6ef918b6ae9138fbb6300ebfc39fa7d110fd5ded57687f42b19c3990698dd533b17477e3f27aab147aae2248e8ed9c513e2ae0ada4eae039a8fd09a97a5ab427a027cf3cbe5fb980f652be4c3034b0e0ac96355f60558abfc09a024461b69652ea8f2056784679097066130a20dad59307308d9728ac25b39d35de32cb35d073f677c491ef0ac60ef9e55214517bbb6d6873f56878eb2f84093e82d509167e936ee40523f48282efac333ce2d1353e165db039b1313edd9992ee46f02fb40c58e02659d81e26edf16fd40751798859b3d22e2b1f828ab303602ad4d91e6a5bddb9de9a410710886010b3ab2821752d766d47a6d0c364292abd91ace025f05ee7f662118eaebf110a840a505124efdf8bf7f1e5597104d22502f3636ca00df476c30de78ce6e76e2a74ebfb488c556d9c46125a766ddc5bb0c95d2ee48eda79fd88952cd0b8f35b49a8dff011dc0027b37929dbe89b04b20943d0797716b156a8fdd5b759237e48b49485a3aa6d684099cfb3dfdcbf666c61da75fec37161d9f5d2131d6e5090094311a23f98a1e98a387a43db679bacea1a41a2e7cf716d8550805379f66783a49a5c1e9fa2f9ed2ad212153fa4f6d001e771bc96697e335cb9a58349f878bc1af84fd78d8164f3d6939a2e41661b0796f7d52095a865590cd68739c81870d73428aae940685afa82bd5572ba53b1d5f898c57434e663c19731b8a6e05264d798892cdeadc167f53087f54b308d4a4ff211b73963a8f27a69b435bdeb5fe82c09532edc004fc7a71234cb8b885028a75305721b982269a4e60f0cdf6ac10fef5e7ce7dee28b5ee0235caa4434079cb1a3f90dc4f279366e30278b87dbddf9ff1cd26d2fda1f75c907f38c5ab0e0ce2b07ce12f45912fc3090dfdcdcacd5a113e87ec527582562703eb0a355a8fbae2e42a04a1033a48f6561362b60cde6a6099c414a4388cd9af89313c35ef1a8fd39fc4195b8770517d9c24f08180cb52198ead8d1b5778084509686ab861ff74e642d5067dd460699bb4d5dd33b841ef0d5c51b828ad21a50afdea8443a6294ddc28bc576e7c28ea1f82c6b7a87f4ddaaddc625a3f7d4f73b68209981e572a86bd38518d94b32423eae1ee682e3a718f091a92f3fc81bdeb8191595227f531450721738d6b578334dbc9196d49ba0bafa6cd33b9c4755d8feca0e9341dedbfc52878eeec387a6df1cfb33bc392a767d27df28a1f3724f1a46c2be25cdb07423a878cbaf4ae48d3c9506de2a13679c51677e328feb5fb32b88e2ef848ddc91915bc46eb4cd1b05643b228450ad10ec3c28c301045c1256d89fecf01c193e567e789b3f36fa877402d030e4e9809656156d9b29adf071f639d08443d633be9dbb8e91c8ec5f721ee656b3ac52c6e46747edbe5961ff6343d2eb7c66508f3f4afcab8dd1ac797b9ed11213c8d0a4d6e62457392be06d90655a2b01a1767a6288baa040d3f5d79244a393f55831a52ffa567b83634830cd163cc9aca05eb4035ba438287785ea22a9d451cebc80e413ba55c3656bd512212c1f4bc0ef054c5e2da5e4187aea0bb472385dd60bc30408f4f555cd21b971326eda81dc27d61e0d8bbca21c77ac6af180b8ee1f87c96ce5c33e80c864b3604e2808bb4ecfc6fa18b1cfd045eb961b30a2098d860ce9b891ddf45d8312b4201324c5648fab5c88b47e78648bc0b07e280c05bf46991a2762b8374852c4c7628c7b6f54f86be4a9dd7636be8447241f4cc9854e817a67ef295f69b518da8cbf053212ee88f2fba360c18f0be1af8027cc9770eec803949b5ac32df0ddef11212aa5f13f04d3a54a0c0f3fcb8b6b74ca2eb4255aa47b195f59a49ad7ee5e0483fa89351c146c5514524e032c9d38245d904710dfb06b3e52bfbe3a2aa3dfd6fbce2b0e6974b5b9f25e564aa558b8d2df7209f07aacbbd1ddceceda6b1874246a2239f1be55667d51ba427bfeb74dde94ca64c94c6f138df1f52a418fa713e03a4aa8166957b5204b7f2c4f726861ffce69597dae4c9e9470622a83a66e05959f089d5cfe1bea30342deb7a4dd45af584aeeb0d8731532e3323778d953a78b8e20ba507c8636487126df39f02a4b27e23b9f1b3b0f2aeb18cbf577f64b6594e90874a4c00fd5ca4266905c65de2c3d707a3808b12d99306d99d2fee5a471dcaabc25bf306b3d94becf57cf4beb676a0096d316b16588385cde02dce3b0cb84565c00bad8294a5a5ad4efe5d703af368530af9633e58c4fc66247e0be9e63a46c9845f420c888f61611924735a35ff13b8e1ee7874a449b3b2e2dac938c9e7ca85530ebb207338af1add81585cdc648af25e068d2443999af0fc67dbc4cad2dfbe13303b91bc805aca1bc19d228b737c348469031c22850fb862dbd50065acfc73039f59f59a24838f83b5ac96f8e4362915759d139ebd9c74efd968f6516c0aeb7207620f2ec9881a7390e8a50bf767e9331d0424baf989c0d804e886dcf018667ac62ce457d643bd3c3e33a2a85bef67ed30af549aa6e6804fc58bba8a2ff940f11beed08b53005ce3552de3d96991e30a3f3e1ff3db7858ccb63c81cee8063f54e42c754b3677c78a922dce4a7ecc7de311d57d8933da203afe98ce1eb223bd789db9117f56f9cf5d9ec926f57186c5c0972c4f207900aae5776ca14816158d6872348d50d592ca90821adac59bc0330adff47f008f345d43b0e8fc35f45c091256207e3e0924ffbd00353cd603ca212779b11ccc006fb72d3cf9b2013c670619207cd8d15ff7a9c44a491f13bb6cd9c9af03fa3cb960dbca3e6a7921a8af56e1ae009094dfc050042f07943465ad7c885b79a13bebba5f172b6c326aee3b59225057cb9e54394be9df9500334a5485117345f285e832d3089b0c9e7662827ad07d60cd300263f045a459dc725f656b56736453822ab257df9d8c32cc0a6f429d5c8357cee47d946ed195aa3513b3577cb6aa4c0cd947d59b5089ff2287635a1a263fab2866cae77e5d6c79106504f0a518bf2c424e9ed3206bb66239c64f3992775d278d0f03737b5f9401aba57829525e7752b3cb700b69f926420a4601f62afe57d32e11843fa0cc9d2a516edc885d753e3bf459de958c02a6f377c89f9fd53a171182445ad31287a2f4680defd924c9a35d9b3b0755e33160b8af31431943e9f098aaf9f0b91f3e5c1896bd6e720dec563b24c8d775cc1117b9645f05b8bd90022bbb0c2b8c252ff16859d3d97b90ef95c9aaba0e32271c2e354f83b76bfc532e5c0c5b6d469fc38787bbae24bbb36dda31e0d8afee69ba165afa5fa02fbb1b2ec82fa4a70c3fb531a354390228a6d23745d52609102c33a1bd9160b5220e4fe97ebdba064506db68e8a860d7d9bc59d5ab7003675f2fa7f7400bfa2f574df6050484d7e07059b05bc4fde0513c93b7aa44ba4a4db36cc62084390a3597cbd03bf4560c8070813cd867ce0aced7656dee3230af69d48e78ea867791f2615c52c771a1d34f224ced092508de593e568a59498e16d584d0d043cb98139b17b34dfd44a1a48ca15883eebc4e2ea8dabfac2102b99fffb1ccdcc7647eebfe2c8d50051a423f3ce1452a7cdbe6842f4b032555e387904bc9a6ccbeaeebc38e224317ee7d20b92967bd422af53433b25e481f09276e1399b92dbec55cc389d246ae7f1f6c60fb3ea80c2fc3f8733c92669e7d17321b9734dfc0ac160464e2c4f42532900cfc4c97b20f79cd7752dce9b9067deb648d6843df400d19554312eacd763495a3ba2b8e10f6a578b058846f7fda840d58299ff292a4ffc47685141ac5566346047336f60f7a0381c539e7620132706bf1426952c07d0e4ec171cd4520738cf9adb13ad396105b60b28e09c27e7d8b0f7adfd72104e7159619ada39fe192869eaa3b5acfd0e3c7078129169027fd487e59366055440777180bdd84896da1313a9fee8e61ebfb230dd60e50a267d171b5f599cf7e30df8321ac68df5d665f14c50e87830226d0687ec12238d6161f5feb596a276aa61f41de989e2d312c5183e58632d8ad3a0626d55a941b0d634b2f0dbe913a88bc0c0b9ad8ab462964d6c35887c95c0bf9932ca0440c7fd3f8976d595973d3bc5e9f141de87bcc20902571c341ffb7f31365f83f20a29c1b49b43b8b6903584d4b639db9071cf5a8cedfef59a3b63c2ac8f431a16790c19a882273971da48f6794353a8536c3c2fc13aed4f9a0a1c3b03cfffd3205a4fa2d884bfdda289095f57d79426c58b0ccf506006439fefcbfdac2013a1823a7d55d50a006378a9f857c307ecb3365f7af452cffeeae3a5a6e6d20e87cb9903ab3c5290e51b5da1392806b85eb072f8a670807e2a2e1ce69055acfb7a1e02245740ce5f809ac486c13ea3d5877caf576593d9bfa9572393443be9152bb69fa30a8bf44a28e782ea91b84219bb4f20bd4529eb142f3713e4ffa207e9e7adaab1dfd7a5394f2c76a707bb4859aec26cec86a95099bd4d8563e1d652f019118564b061a0477020fbdd291ac35352631f10cf6260f199c6c92bc740275837b1e1971325b4436a11c6e7be1f219a8e3973ee9217b9efd77101ad4ccd03f3931c781f8cdc19c56eb1ebd7ae8ba73b79178d3dbb8dcd87128c68207092a48ce14cb09a2a66657832a3cd4adcadcd81e6a44f671c1a9e0441bf923ee1f2d96afd0c998ce708475334d886611f076a96b2b3696b0fc995b8d4aef5ee240faba6eb90f29f7c54965c0159a244c8a62613d5f3eb98c3671a284781eb10d5162077f38c6cc141af38df02c4c66e3d6963bfde2505cacc75f0c380588a9dc48bdc212fd4dc9c8029cfb89bfc9dceefe87270f2191c697fa0064efef2006e9fe6e085c968a41f600262ceb359aa55ed71b1b37906fec05823e50241464cad10ddaa2a52e2407365a7039a71bf8bcfe9e72e01ab4328de1f5ffc9f3300458f55f5a5135f177e390ff185e693467ed5d205ec88bb19e1a0c9208fc4d365436a8fa1d2020adfdac4e1e9e40d3972df599e1e10032919f9f1bf5cc5f61691e1b43f1f2e48c72ffe9439250c766b3858c5d4146641acdf9a0a226a7a522ead2ab35968ec59f8798d932afddbc4b9a8f5caa8d7dd8259154813f2d76c262538ed4adc64d24db52b9217749ed3d9bd0fb9acd4432157d96f21fc91ceae0f6840c1754d87b42f73f30b05f94ddfbd26c65ed2017c537c47a1f3a964fc469ec4c812b71ab9e366d0e4894335868ba2db43ed1b6b0338cf3e97bb5bf2b71a642f6af07fe17237473886e2555c4b19b8b0a5e0bc610e99176605f819e6b56fc9f11a0aa451181c19ba0bff35d34b6466d0d6ffd19d31170f2e84b5e39f01f222a9726a3b6893b47f809f76a303cf4902ab06041227d6d5c6e03ef5407bd157d9d659060567afea4c3adee6045dc4d33c8e93cd85920268acc3ef645867a1ded3755ba3997a1b2c957710f2945ee6ef14fa4aa3573e6e35e447c0dec07916be8c34ed3cc6936bca970413d1a1dda90a35f6ca5dc993c5f228b76f2e1c354ef5bfbf6d2299a687616bc571a472b5455aba72500c700f65a8f729703315362f1bba83d6ba8be23263a755a82b0268efd37fef897d1a5791b6cea717f8a7593f0fbcdbf8c6801eb13a6614fe57e7385818d82f62bbc54161dffb8169ef5f01a2e38fc1ebe8c0fccb05e96425433983ee69aa02b53eafa7b507f71c04a9437dbfd23647da3181108a5f6b7aa0a27a193d038b87f23ff9737372b7f0b2597a85a3e4fabb4f5a37a422e5e9656ac40d5bad457b207ed0ca790b5f590d4af89bebc75682acca14154703ed924a66de031c7f42dfa958c344dbd6e0edb4ff4971b0413bebf0cc819f181ab6305b526b1a62a00d167f2b04de31232246fa09949a3312fcba95876dd3e8e6668477925ed431f7cd5ebdc48763849fcea6d1da810ed7d475d294f8fa63b8cc6211c72066a1f285ee41edb71ae9ac0d4f1f729e904af8632acf0aeed64d1b186af850f01297418dc8719587ab87796dde0f9d0d1e5dfc2c130f58113a8184c61670ba8f9c3a2026977bae0dbc89196d9df2a30a974fd721ac969fb8b0651e563da67b8bf47b3582663f16689a50051db396322133e5692d3fe6c43ac9b4bbaab3e507c7102bdcb3f0b8d299d42a44868c4b6e3e63a64dbc3f3affe5c6a25d7fdcd7f447672c3271e8e142590a79f26c73dd736df87562c97caa8faf6435296e3db255b66f99313eadf0c15f6895174b5461ccbc62850f4a2ac464a3d7662a172524340eb854cbf2fed906ce2d463372ef82ed5579757ed0acca610f51b88a4aa9929970a410788c1ddf2c94bf1aa5059c544a8a8a7d47b8b4d56af0a46695123e6e17ff54860689844397ddb8f471fdf4cc787f54851dcb2f0383dc9e8fcf0ceb8e8c03c53470a0b02f917bed6ec62f7b37b10f3825efff896c645714c0c77408712a361dd1764bab5bb4a78a200af0253ea0b2ca31a9d37597cf13e25403d936793eb680b8461066a80a1499ba13b38baaf50793ab7b108aac259b5a4b29cf8efb040593e36fff23afb8b5023ee4ce69712d53fa9e937b647173e93f79fbb2d186d35d97aac98ba9351bcf25fa3e6a722c36f2f0f16f2295d4c82af3e73989b49461e12baf805785e58842b41fd3c0445e3d4479ba72dbf5cb1aac748d47e94d2f62f3ea8bb56e15d0148725f2aad47577582838c080cdcc8e8c0ab1e32bd3d9358813946e0debdf00530eba1ae4ee04f36974463c0d8f615c81060bfaabfbd97f52ea4e42792a53839320d4ccdeb9e462e7b80635864a5608d4bfb0d719bef120a7f8b9a161f6d549d9490e94ae9ec1230915803bbfacae90f4416396cd9c74b1b645fc1368ca4ac9afed2cf7c85fb3e41c2070a9df98b4b47b63fc8bf0e0679015fd250090fe6eb86288371988c2a3306ed22d706abee60c15c7ab460ec33db62773a96ed3aef7c9834ed731b40a8729ebdac958a1b9c21e4d920291c351489afdf13f4f4a6fa5d03e2b7ded25eee4255aea93ecd41d86f99b8cab9f51ffaf27a08853443b62a41170564674bd68f7f2c1840a7723a445a69fe8d15c4386f706c3a1b1c3b847095a59ed203f96f893fc0018ae12d000e56b99f167d22371ed04b4ed7575dfae641857dfba6ba2253cacb82b764d445cc8566da373ab3dd9d344426f19477ad28b18926d83e3dba1ac3e2f79c06f6abebef3d1a6823d3bfda06f79ef937ac17aa4102fb2511dd576f6bc1e2fecb6c06d47d839975765c3b4728529eb321abc0de7fb293ce89865d429387a01286e30b68ce299924a95d16f630efdd1dba904197c702f159f3639da44b5acbb500e42b28d89878eba82f0621e87d952f3d60e5ff4a5fb6703b09cab207a4b799460e67719e809aa0c348cbd0adaeee9b03704f08c53b49a8c4b50f0b124d67005cbb49e4b52478016eca56036ab0d2ede3cc40bcaff578e9642ed0a296df7d20191cfb6837e1ed34e5d675a4b0faa0850fc330bb70693a00a5fe4bf222b682abda1aca4527de65d8972de08e6ed733246eb40396bf44170826519ee1bf1609fbd65fb5f6ec75f9b68bfe2d0b07153c4f0b1f7337cd3403e392d367e1ff6fd81a8845d9ab89f08b18b6fd1845e4db9501717c143d423c602e6ae40fb7fdcc03b8e12097e7e360e8cd85768bc42908e39b4ff5695d6a15225cc79f725d2c10be6b930309500b584de1eb4aeac0223c1c6fabf4088684c395e699e44d40538c3a8c53ebd9750e36f792f31c04f6f625563daf767b806e07ce1ca506b79db7d01188cc921be43ca46d072f744b92a2b5b1239a8b91e220f9fbdcf6cc1128e05c895c37a53c96250a3e82ad9bd049f491472b6a6c3f66925b769474c47bddccd77e53aa91bd5aecfca755fbfd88330fbfd7a7c471fc3c0379e5ce723d6c9a90903983095520b38aac3cee8db622b508a5477815abd7a25fa343787d4c6aeea06f08cc2f35009547dd09be9ed778bd1096328e6e11cc0f4e416acc413cf699f467b5e69fd71ae48c1627f744ca8fe98a908f0a825add2fae35a9c4475de0cc1afa69ead70cb55ff4e336fca45bb7f414fc8d8b4c60b7c05b9e3288f31312509d8ef72c95896bf9f229629f606175777f35770315c687d32c817057da7f11958a126c2d01131b126f689ae0f261c760f0df2ea2e3964cb2dcff2a481bc22b053c090e584d4b0b43cd6a67248a37c35d21bb9fac6ded1d56e6175c5b01082a40e6530d12b453909a34fe24bf71ba0e2a41761995672be187d34459de9c392cd587cce9b3f67c908280363823f7b70916437c4485de753cae26f96be2c90177285d8d1bccbe26a3f92c610f4c93451d51239a93fb383b431718fc94740e972996d58487388182693201e1b5864953602b4b12b08166d239115f81c36e2d529e58e6f83e55fc7c82a637acf3e17e3a446a025666038175c8e25cf4a176e3e9f333a0504105453883628ad5f1d238b932ced0ed2ba4879897195740071b25abc24102e1ef6b1f648a29613746c2d2ead948eeb34bfdd7efece00611f4a148e1e9b4720db57d2cc5e6372657e3d44aed6f2303b87d14bfbbc0e9da66d85347f9ebbd05e5336379c20225e3556e38a842095ee65a7c9593f6911b8f1b03737e525e7a8412afc05d8ef9b4ed8cfca30823650c5c210f2357d87633a28a2cd1280ee695149b61798bdd32ffa284b8e95f345bef8749f106e68a9554f63c859acadb10b2c07c6c6370a8eb060f41bf6829077ab1a626b9f534e7f9b5d832dede4ffceb52a5e56f4a60bd961e4e90def3c8b1c7c33cbec95a9e10688e89f8d26f5949057432ba0c71a60aa291f0d873fa69e866455ffe4cdd9971be6a0daa1ab964fd9e9b1e97ce030160c414d34a8731ebc25ae21276cfad647fa6265c058b8f9441644d404056ef77260e3d78641fedbac4227cebeb2e291f6c49b024129a6812cbb281b55b506e54ab6d5dcd67fba46cbde6937579477d2137b73fc74fe1815868521b160cf53d4fdeb7455f114ab545ae2c7f30f0b2eb7a3683ae8a28c81d6d728184545ebcf27dcae34b4a17073664ca55c7ceb504cf2cf6b3d4d06fdf80a0d1ad9b4f8d0edb8b5f3808ee0b9e59ddfddefc53ac92605e2376e5e183f4df6d79c4c340c6a4f54ca4c5e969cf87d41e3f2725a5b45e311de5b38a6af9fe80d04d76459667364bab2b6cbc32e6de5c7c7395fc60ef89621016106aa0e82046d49b7123e105d864d2da0fc4e9a852dc5f7cf2d5f6ed382053dc3c631eab663e02481c96e17101f5182b9a7ee326ad5da546192636d4652afe9d7931ea6e622fbf308cf352b36591403acca273172f72d28d656b500bcb8ff122df8809235b28dfdc3534a3614b92aff460a43550e3979ee1560c96010cf2687430e12972fd81eb1160c6617456ccbbfa4e9c63c6cbbbd252bddd6a5a9b4506cce8190fefbb81a89e8dd134c20dbdf20dc62102bf8f6bc5a317425fbfc15ddf4e9a1edd055c52703c70db122ac389eba11a1569fe65f08c8435247e7a15b3d97c31c0f639c1eca92742ca124ddae5c1f39879f4bd04508b7f04a6ca7c30917434b1785833977016683bb63e34a53168fe81f90dec935f618701d8cde8f02fc8e527a4fce10009f13d3b9bd8375d8b18083221afe929498ccf20b15b1313ffc1c13931d5521be4cb92fff0f4749af69d800af73486d6c90b7bdbce8248171191db19e3e4e514b065621ce096517dad020a5cf5d3686c8e0d5828d7541414b2c38b4d0d65a3857fe5150b2050fd9be7c9917310f0e41959eb98780d0447f4019b6f6af965ea03567047533e0f3164025e4bf40a7ed75dda73c00004b9b23a78b390df3b1225c51442faa252bb8f980f6f575eb2605b04416361cb115717e322c4f2b6759133d5d65e7617d92974a97d3fa254a36d96b9b389bfe1c7c98b48d8e5d69310be95348f0e52c37f2115bb7cd89e1f70d110de3a3ef70c54dbfaa4a54deeec47477a921b3445819b37b37f6470a64104acd35308b3ac23a025b6eb4eb8116f985fe509e050969ecc0bc9242d4cc04c1fc02c4b3de405b11e06b9c04c2404ef3ed22bd21255bfe56c9c0a4a2fef0392d1536865ff454c0b4e1906e4c5d2aa25594ab7ea59d0b0c616b18261a9210b27581c0ef4b48b0e35700cae98ebef8ba7fde8583577a37631fc170e03c20c93b3b023fe49b2acd7a72eb69bb68343aeb5dc37f67f9fbc1229a9394e7af98997ddc015499546314b594b44e5776f4d67a572e050c539e0d1fe981a1393a96b00ba2268b1cb65740592b746e3cce64156caf219345d4f3f44657d436c6bb55ec6f44208fbd8a23c197e5ebfba26b1b59637eee591ad9a4d1021b88efdad9f991ecb21f06b2e0c847d5c9b327b2d1a7a6cc220bbe0129932c1f1ca1a39e3f7580e781ec63974b2d18be805ced33f1a8576d6729af3253158921ec480f72a92b5f2e57a60ebaf36368cdf15e28913f7e26acbc8642acfd0e5a085b046ec9ccbc2ea45eae2b4142202f82e09cde1c1c15185443e9b4047d228f61eb3d3375b2ac190472850bed6f241c606318ab5647702bf6961faed0abfd81f2182402049bd63f015cff48e99f55266bc9d15e7ee08cb1b883b59d414c26942e33ba71a7a27b9c021d3a7d70cdb014ee83da71dbbdeab39559cac99657b8a399a9052878c1b784acca0f8762361bd0f1747ed88dc229dbf2ff3083ef52018f2796be54073fcf15833bc50e18e244c97e95fa12db66299c393720ea2a06dbae5b2e549f4560f097c6fed4f81ddc8cde7a0bb099e3cf898d7d9ce7db6b02e1080fbf6119c0eb52e615edf011b66a0733754a6abbebbec6423d788c39aeb9e155dc33b8a1b307a025f503f1f69b20873517a4cbf3c6014b6322d8494996276c025a9adbd06d5eb870cf684b8f648593f98e6d61c3ed00cea59f99934fd7d875534a2f7e70a2368e4cfb2651b08f73a38ecc845f01ef1e7cb8d8c45306fdcd4d6dce64813c3e238e31e369e4b4e3197caa88f62b1bbd4cce18628e760b72ca487b7573c0e8b2d1d27d1428bd7a08447f46040a51dbdedf6b966ecb48dfa91c8fdb182f4a187530b64d183fff4b7378474e28468c601e676f98f6c28cca62a3f6c0852a31314e2eefb616c55cb341b674d081ccd77876edcafa603dfd604bfbf93d2475332ca7b26113ead7d8e55c7fc0c0b1f1e14aff486793a748d0014a6f891e4003cd60b61e9a995544a2c5898fd923639b0adfa84f44e3dbda5e14c20ca3e1c2eb34f5f675ea5e9863406bb2f1df1f66abdc777a0b447424673e299d6df9078446a76b1297e99092c5e8567d54e1487aa99b2f0496b3cbbd6ee171fedfb07484cc1c240b1982121a77267615c96e93a25b26e435fca66b80b1f8933fbb6e95e48ab738475c297fd68c93f59639cbb4ba68ea1f56513b593fa9b1fc9f0334135a3c0dbac737a1068c12048529c2ea067ea7bfa810ba25a18b1d2c17d6ff3a6050c27eff260435b7f9c7b784d749ad73e09ea721d442f91a5cdc1d485724999672709a8fb0bcab2bd3b9ff8e729da190d0703f3bf14f062c59263a54b005d808aa84753efe51d1fe089ab64c20df42bf345dcb7ee48ce497935a8238434fec95666013ad9b6a22357e9e4f1d586d6728e30617a20b595cc5612e4a5b159249282a217ae470eae48255b4c75fa1a66a9be53b5c1071e7d1c136d6b4005cbdeb7ce77b4192fc51451753c98a2dfcb8a057203862298285a7f04d77f0d6efa0b1f0556e6c54ce9feca394d5e07223daa85fdf07e8d54e58467a306fdbfa233db13a3eed0f8cc794b2bc6a66b46e097f7719da7862371cdd195d86ec891608a1c4424c6cef7ac4af32b44c96674d48a3244f4bfd1493eee85f8ab28bb811568c65d3624e679d059d85fe58e9a501873c772b3b2541f6844cf13daef4c444aac79144080c2ce8f63d42484b8cf4c9910345deb93aaa6627312aea76efaca2571e46c219737bbc70ea7484467b9ba274981d7041e4bf7475519015ffaa74c77952212acc5eac79d95763304a9675c996919dd6c94a7f8c9ddb5fb1a302144d2a7f27694ecd968775cb3a508df974890003ff18d26911376b5a5c487e80f0953447f9c5e9f353bdb9e59f7a5dbbdb80127d45fbf3d9a0febb85959f577d046ef1e6f4f67e43279aa8be604300f82213a1b7f79e32826495739c03f165a3bde15de8ec01751a21f66edf018ca9e01134ae7cdf89d0a5f003b43da849019aafa04827255509b7cacc151dedceda9a0b313c5b8a53138fe690537b9a5708dbde227f6f559246ab22ec7a564b1f87666f01112e4c588a9b855d24e8c6f879d259218a469a589ba92c5df5efbb5f144f454d8405d7e69f3eced8e318b0b9e2dcfdd9e817a645115d5ef6a6f148f81840ea96be15de345063aae23150f72646464c8b4ea5cb5c3122117c15eaa23889bf55a38e445b7c580fbc0f00465cde4649c339d5d14691f531b40f002b718f38b729e8087bc2d72877f37ce14ba9eafb1812e38872c79c799223e33dc080d198308da4dfb34554ebcde8d26940e57df51a0108a293d6398b7497ac0ab5913f26d80d9a8d5f9bd76d8c51272772a4e55d76ed95728f2ac84eeb2613552ab5974bcb78e0385338bfd29dff1857779d604af84b11ae0a9fae85b88734330fce5cc175ea96938ad278a3aea11a05541fda3fc9233caf5a0b79ff9db8840ba9cec24c2ef52eed9b192ffad60a9fcbdb0a8e6193bf8a55cbf256dd730108cf353229ad5233b48bd604f21ce03266b165b25b0d2f6410cbc691812e9e8df6ccbd955adcfb7aa4a3fe6451198381f04778198d62225ce83e0ebab2af8166fcc6add65a33cde481462f37222619bbd8b0fb9ff2201c0b0136d23ef838b85b007f972b87c68c077968bb2863f121f50af40a7c6929d463d6a3ad41ffe6ec97396090816b7a8232f423be3ffc337efd41490c1472bdfbb006ea737d717da3b476efa40f961e7cdff0453ddc1c052cca3dc0c380471b666aee06aefc5f9a5de13852bbeabd9715491949bbe09858951a1bacdf58248fe39b602f5cdf11217afeb17be3c9c3c02a61f38b03ca4cf87e12ef66a1f31e97e9b23d9a6e130fa95e8ffc93bfb1f88e31f3f1ca613df30bacbf79d1a0ee09c0b4cad0598e39392d7ee2432e5e7ef726f31d4ad6c1f289872dbe63dd2f76e8cb7bdc519aa27c6ad588832508db891919883416d194b4c1e2c01bdaba5ca57c835263b94876278b57b336ae4abca5104f992597d4d53f0a3176f55e3fcbeb80ab0d765ea9565f343fd00a2b7a88faf13009e23e0b7458f5a4193baeda2d3313327f96588bd5a91b346c92f50a6b840824c309ffe57202437ac38f31d1adbd1343b81c6394e071de539c892e9b2ca08723a56ac4c68118b6f16f6bfd78b3f4b90a189fd4f3033daa2f1ab22aff13a58229cdc51fc2b7681f27e0b426d4e9dd94fd9f988a797f45f8b00f3cd93f9f74d8afa8a4716abb0d731c724cf0156ed0a3277d4c2843059aa359c532fd3b282a4e5ed6694d58855a5bbd9826270833ba628199c004b408626918c0b970b9399268f9a58f3cddf3010df0f7f01c8074679098cbe88b134d9f603342f7fc1bd2c839c92bae8614d8c3119e5f84b25e3b88740561aa910e41a840c76647b57a8bca8b01895bdbb61ee0711446721d9b59cdbbbc2dbee12bd3c717adc40cf7e0b9bd4297a7a037e31a2a13681801000444b6358721610d9b00da5077994bfd64153fe193bac01786646f40decb99c868cf2a05461951d978f7ede2a82a9e216c7635a54ddd94bfd76574048d22642c7bd5d16c7712e81cc8ae5f5792035b71ba5176e9d59417f8db580bc0d125b36b75a412a6db03932cd1646480031b5a44f174ee11e552783f63e1c668cab7bb6c87de916f399a6161c9c82028973f9166452a115cb33aae2a0d1eb5f8d38d2b8143faa3b0ee12fae1f4e0d93fb55de502066c3530fb1c01c83b3f5e5973148b5b2e831a72bf6739c2a000bc6a1536585a50532b7b3922a24a8d42216f611eb6673a68a40511424d23fe8f0de35fceb05a5a1a9b814ac92c275cd3eed6ff98c457f9719f68d93b94a1266d7ec6cb304a26c08cccb1ee837e0da74a863eff4116d79e2449da2071b4b144564697b94582c0e3dba86a58d17d5dd3a5da5b75228463d6180fd338005129a356fd2f08fa4a3a8899c14d3c9fcd84e5fa16bad121cafa56a7f370060c986d2e0861311efc4573fb49e0a3e906009d18fa3f5527af1e919bda4e467b0426541e6563bab8127f5d97b9572b28d71afd061e6d28d4d3de887f71c98b39b311d91bae4eea71e7d345a723e60805acfe69bfba058784fae9add57cf91706e40e0c491047535ca8fbbc4effc1f52376f1ad1886859e47e68c382a9b9fd7a0718feff2e590a81e922bbb6905f6e0088d6a9fefc6b5398cad8f4901ae137e4666c027b27f73b657b3e45e7a1861c59de0075800d65f4c1a05d154ef92e8a86370179fb94ce9456112511f0a49a64f3602ff5007b7265818986bef4fa9705edf0f918710bea111d843f8461def8ef89a3c6c618fae56f490f82d59dbe8a6321d9fe3e41ff900db131aaaafd09f7ef8607e8654f59eaff3a877c6fd57fbf8fd946a620c8cb8e614ce4283fe2c196f1a9dbddce8c23e2171c62cb2bd03a9bf5bd92b435b646a6e05221524e96a72215bfb85ac38cbc3fdcdb5329c08749330ed94480003fe6e9123cb40d8170c771c31259de95ff81b1aa8ba18a82c283b19d6ac2940bd00837df2497b59f3697bf079fdced7fc8e0e299c6a4062880e5d38520863dd71b3cd1509f821febead357579250a2470c1678169e169ebb517e175b72416c2c42bcc6b6306f9bddb479c72c9a6b1ab78bd745b3bcf61daa3cf553e0471f50a7832a1049e8224402384e6efb649f10850556ca17f3b2d4d75c2c3a6dd995063649b59a4c4c139246f59952c207d988e7586005edd581a52f19fe8389d9d5243124baf411f8a3941fde026a989f8e2ac85ca763338ce2b251c91614ce3d9f30deeae2ceca510327ef7f21d55fa468eaeac499baa59b4c750ed62abec2deba1d4d67455544edac4fbb85efb95a88b73548759165a3102e79a006affc20ca4bf98f830106f6094085d11ff2fa14a89fba0adf732e7bccb45968d9f46a3a3cbe8c2d67e03ff2436d57f195722c833a0bfac52b138878e88a4acde490a96328831cbd3d1efd44b91272b01103ad3058284f183b91e6e008cad2dd47c9381ca8f0391bc71d2b0f01cd99cf24a16a4163c22c50e585a3c9c001b441a276c2f2b1fcdb14089b3a78500ad33ddcfaab94631b9cc188943b32f1d9e28c5ba9e0f6dea177fdbef8d9cbf1a2722c246735c9dbca68a6884ecea06af574fad1cb9a66a938cdef8869cc7618d04b581941f68c24d05ff651f802e6b87afa335f5e6a8ac57df8c83bcd96940ededa6e5b0e5267d71fbc70c7d005fda472395d7a84a4a0071fc589a1884b7a973d8a0aa9f10a6221ba575cbd71033d2366a4b0f55b1242663350695c81f2e258c836e63ff23f3e19e69ed80921f201018c10c50972d67f4d6ebae66737a96b1fcad130a0d6f959a84964a67264d84c1a3a748ba9254990e56507d4ec5ff2ed93266b075e10d451f7f8ca9bec2dbcf1417ffe623d061c16d7ff9cf6cfc7961c956b4a9256acbb3befc2e81deb1f6181e9de550073facd4d0a98c6eadc3c325d8b61d557d957f2b50c9c80ed770f99a19f49947de51c6bc18e1091dbd45a7a3d2886e19e5796536b097dc92f70c6b85030b6e862a3e899eaf9b37439a3919d24a01708717052473b1d8ec7d8f135bc2633bd98dc50d8e57a2006bc473783f9a568824bbd0dba052e5e689497cc927e7b71978548420fc570f4143edc47fce9e2004fee6030dce5a8180ed3aa39237d0345a3fc1b4933feef3b4033777f49f0712754b23006e0961c716caf59e56c4af37024f54b585a7b4328862a4e9d2d73436f0fa30798e10cbc0418bff801702b9ea98551bcf2ed81831d46e04f9b81673189c10dde487dddf304831e31c95d0ce21f58a4ed6bd3bb555c69a0280527bb95906bb70eb10be492147997da817c3f6391fa6e31e974fc0fe64190d1092638037a3daf33aa56f87d77a84d970ad5b9a78a876040aa27c54b5cb6cc278c99ae33da2a5c564aacd6ae2673f4babc03f67b77b859d9e2dd04b70505f7e13080b6d3296176d46a015023535804d2b7391bd7a914fedb07dbd8498d32c571f61b09adf661ede47f22be29a009bcafd5312f2a2468f9fe2c75fbcc2c14f90539f1f40fe9ea41d47ceb8044f44e929833cb0ed05ae3c3c94e10d2cd3d833d2e93c430e2a0b17f0f8af78e00a0e317266ed991feb2d4f65c81ae932fa70b3f0dbe8e4b4973592f660d6dfcb0246be306e895d3ffd5994006b432ed10740424690ece1872b4548ba716c8ee147061cd8a5cf6e7103d53b139468e7f7f1b0b5ec4cb2bccf60ad9c1e59054b7d8db56ec797f00be4b5ac40568ce1934af9335979278ee89d387ecbe29e5b8dc0dbf384a3c32c55cacdba82793b96ecf3c511e617ab11663ad4d8240834f837cd15489eda5d0a51896aa02025a7ea3db4f2405df66e4fd02f8f8998ca6dba68b2b37a9abee404635bd283334e1fc73f499baf68f632c8f6aace5d18dfff4de8e7142aa4b892a83e960e984fb029f835f9b605c2070b4955398b4dd7cdac961cf4e0a7390b1d38df164192dabba3d3744ffcc3e37dbad073168177e322ea031b97ad9ca684cdc846430ec0b089daff5f0c61a99138515c836dec317ead3d3bb1afe9ba9f35fcbef14a01d4069eb3f7251ee61bc2441c484e87c922b9c56ebe5e33abe0dd024597e1f006aa4c80c19782d9b48c88008602a73ce639815a8e99245e1735fd0c9febfbd009f35b0ddd3965336fa6343e893fa25c6d7884f9aeac09e27fc299a549c3fec11d837451af0553d3616761018e1741935c361bb9d794f162775fe709a91aa326766b7955bb1a7a191794dc296f18e308d0af711eaaa8200864ca2f26865e08582be455a90163e0c1e721cad623cc07c4890153a31b1042aa33143a4e5893a27b8e82055c9822cba663b90c55d56c4fe2e0961c79b8263a75024640cc637c08825114a8d1ea3283f034346cc442dffcc5b968b6f8e435c0373ec0ea8484161f24f431c05cf2f85b6aa972cc911cdc6040a98ba3a0cbfeb427ed68ed08a3a3c0f152c955379739f5875a8f766a991471f8886d0a87544bb31183b710da3f0b1cc0b3aa745ba1e0094af52a1e912560ad98b733ef9849c0667caf6466b0d7c37bd7471d6ff3e407748852003ec199f63bc2f00580e0c536378042604045f12940fd6dd100e11731ece1c090771c5114f624928f4d45e6a0236a7212e4224c9f5b50cb68d76e273ec549f2ddadfebbc0924de53e963657fc70bf3b73e05abbb22ccec3f965a47183ff430689e8ac970bc0b11927ad55ce86e08730504aae00dd115845f96e750391a3bf5dca8d07628d0db76d876a3316e5dfb63ef71219bfc336a0bb77b1b86b6a0681f6879cb401ae1f5d9d8bcddb322de91e384f471714cc6abf98b94423317a16e5e7c4bedf8b71757ca460cd8e939ddca6781af11a6a2f32632320329e70558451c94a2a34c43d0b2da21f1ba5efb4aa775ffe8462e99f7593d870fa940142729dddd5231e0c8e7e3bffe12d91eb6ebf928c9296d97de2dd05a248994d59414827fe3eba162af41c52bf2bd07885f6cbfbc6a8b53daac6f56db1cd6a19d4856dd5cceea89e2f91adfb97f37d2089ff36d78c8bc1078997c11c7644886fdeeaa4ef0c08a565f50e44165933ca63668b3f3bd967b43e88b52582cfa2be39e56aca85c2c4c87f8ac3ebda45042a7ea084c1f3ef9ad7b79806f14a7c7e248e9f23dc9813b2c6522f1059e5ab26c8747779fe70d443daf84c9fbb8fe57704fe0dc78cbeadfcc01f319cd47f6b8375301a64498291e681a0dbd418c7a7b166a8c7916fab9a8c9dd1794338f45fe4a3c88957ad6bbbadb3be7378794db9ad84d8741cfc1da20b4d3973b13d062ac92d389c5a3a69731a67c54a658f0ebd907ce1b14ec406b38f87c9b4a44cb014973671c81459a0ec810901ea319f9bbc1bd912c49a72ebf5d7c78205a89e3f875d215370d95f5512a26f8f2f3494f31e145618976250147ddccb206b2d504500fb52aed4ebfc2bca7188b4bd68749b355859234d4c9897175529af784aadfbb2a07e35b406f7cd2ddd2c97a94bd41697beb91b095c7b406d0d59e623154705c5f3510e80778f958c4e1863833875d9ec9a8bd6b030651e2556780140870424c8f59071fc15b5a0513f6c16b4cc6ecb1f85b806566abd26246c52332447c6d9ca4724fe2609dc60660c67b7372ee3339d888ff14cdcd9b0bae1fe835dcd4e455c35d04d5ec087fb32e03bfd1ab727a22797a93f248a3c43e6dd7a48b8d43441b63ae9eeb60491df01b25dbd025ebc639c167bead846ddd73e628df750b0e5a415cd52bcb889c8f5f853e6f34781589b948510108395f06a9486d114e642802f36a45f78607ff3f7d3073c897b3ec4ac0616de7f72935b65d00de6dcd7036a7b46779a05a7a75e6aef1d47a8fcdb34dd1afd5b5970477c5f7d001d699dc7b62fcb84663b0d041d2fdf775f4b3e281efce3f7722931221d7dfab3b0a5df9ca54ce161c09f298cd46bf02dbad635e7befbb18c4b35767c240a84f00ddd98ddc72edfdbd9b55df53e924b4e8a02a09a0d63b3383d7cbdaed4032e29d312819a2b71ca06d6c5611668ffa4c9734fb86e0797215d137ca4542deedc4b0991e5a5113c9e9447e0488401b58beacd06e77c6bed0b2a9c8e8b93e066ac3c1bf88de75c820793aa9877acfcece771bff88ff793c018b1f16e3fe07ed4ed01554b76c002a399bc190d9b1376044ead72c8565b9533eab897f7ab47ef082bd83b7bfb8c2a4d549c7481d644a7bcfced3aa2491d437a6d28a53137bb05aa34a8d6bd08aeef7fea0374bb18dea5d78136df7b1eb17c8a8b91f11b4ff39a38628f395b1b29e726eaa173df17041fcab0a4612d3380c1e37f031038dba20a3a969f1bba9f945f0178bd3af4ee6232943c58994ffe5dff71e904fe054183d59f7561168d3cbed9e681c1cd3a64939e774ea225354ee21b2ed7312cc674216a5a36cea4b5eff4bbd52a083ac0ab17db39fd47feee3f5db8bbcbb8c20fac1ad3010e90159b7c79600c2fc9fbd489314cc9ac1a7488cf412ac7760b4c9f7a62048d5bd2bae0a78717683fd4f08e03c7e8eccf6d2d223dc0a3e5a8bd02e43b3c43e78f280ad887bf5bfe807ce4f6813f70a66d83a3dbdbd4c22614da97b1b0f821f94c54dbeb137ac04169800805914bca71266b92918ed2e81ceaeb54332c08585eec8c10a7bf521e4e82389d3c5be84f3e12d8be9dd83e27a4e09393fd58e9f4c6da1647af595bdfb1b2423b53daef7db6fc0eb4547e3662027e7eb9fe53467c50602f4494b02c43ee14161fc088a1251ff43c123cdddbf2514108c83ffcbfff08b665cb1ecae17d24b536882533e03153fb3d05608385928d5af4a9f53ed5eba621f7b4559be05e4d95bf90d836a5a1b5c78a6345d5c88526682d7eb84da2fe8ec52d9f4096d8eccc99b9261354aa91ccfafe18c647bfd64a2c532db172d59099aea89fa4bcecfe2f23cb777320441cffc6111077263a83d57eb143e409c605d0157560b889e0150e491946e61ffb71b269954600faf48ee4fb6a9520a2a5782b0774596888d98a4a53ee6cb78a6854792a85417f271779a01b66c0d66e597bee1e129c97d637085a6c1496dc14b3bc1f0bbfc081878dada6dddbb32c7c65fef81898a5e8c0f4cc857cf080de340545232d53349871d5bb090423473979698882d8d6730ebc261b3fbcc7ce2d0661fad14c6a4d6e7381c03e8c7e3e662ef5dd38dd8c0942b03f80e7327291198cae86aa943fdb213f6d60b0dc3ddab4699fcb6883ae20021540106712ef22892b39da8e206875f4ae9e210352a449b5afa45d3cc56470c2d39e2f75324f72fcf23d1cfa730c1042f31d3350aaaf2f3ea0c64dea47d545716146d91a7e093b6d1b86b6a80dfb7e82dfc6dd9e163cc20dea57dcf6f304dbe5f4cbf486a319bbea16435e8c7c27ba560f2573e29f53896f52e4fadb4b2c9020674fef8ed3aa82b8be1417bc925369a18709fce0645d0f7c0503a012d3c4779e888610231aa5c483691d48e827d416fda51103ceaa413f9a4eae86e6d3dbbce836552b34ce26506fb4db80a84dbacf9c406cbbe5f2192b9b032c256effcf7c977748c3504fd602f13dc1cfc57a6b69d22eee98a7492effe4edbc29a1246abb27deb40995928a5ab3a3833036cd6672c742ec4775f44e6e62865ff136ac349942a9a93bd28fc38ff3c4532cfcd049fe9fdafdfebdad62d372cda8bad679dd6b5870bb5bfc680b2fb47104aa9a576e3c6500bc26c287ee6086ebed47f0ab6e9178a9e43414b4e991d310fad9df48ad41631d1f0cd39003eff560becb9ae2ed34cccb2966ffca92bb36792f444896518d7ff6de4846db1a7b7db7005ef937ed97124d8363e499891d88acc06a867721ad0b830bd211b38e80551b5591fe8fa61730b14e18324aef615cdb2bf7ba61e330455bcc0cb80bfb2a414d4a4b0bbdfc5e9ac8f3b530b4733bc6b83e12f89c7abfb976cd95987870423a0584f398a6b5cb5008184081383fc7aeb1cba174918532520d729928fbde55ffe312972bd15ba24839735c106ba376275113eb4f815a79af55d5bdfc408596c93ac04e82c7928c13c646938387e4b67b02175475d760c7b5eda0d76d0791916f6eb7ae54d1d11700d862a26b996bb60b00e058b6a13ef45b6009202a31e4519e4098d0533e70e3132645739c512015af15dab8c0163af823dcb89667636cfebfd697959df8dbe48b30d9c35484c29621db50e8841cdc43966ace6eaa2813749fa39c1230584212e7169e05dd4b07636c4c100fac9d771ea96f90bb143cd2282e541b676f710a7a7b77ad7ddf628c7a1295ae4a1b3ba55a7b84347b113f228cdf68be393d14b38af0f86e3a45074f7a3447e94f44307b1b640258032488898f72c7f78c57dbd971bcf0ac4b06eedc5669487cc1f9400a5a45e7626bf24bf8c84e81c4ff1da12fe2f8f80aa03d0ac546d7620df276788d3db6a09fe9142c43eeeb3d206162fd66beb0c912b846ef4544e479743001b68ce15be15ec5611160a9e2f1b4268cea342fa619bca209398808ea99efb211ae0efb216ec4376de187e8caf8d6d761aa54b823d91e4cde1dc43d75116b1c7c93bdf88797dda60c53284c44ef6e3784cac90705e6cc16bf987f6453c73bbe6ca50c51e22230a602b66847e99ff1c6dcad304fea704b7c6005467ca191be155732575dde9321179ea07db0a3870dd20f29875a55514588010d1f6fc11f6b8c59781be05fe06e2d53ca38262c9d798485af95dab5ee97744b5fdd7695a7c26aafeead7c2b78cdccaffd861ed24e7480cac020b8f96e230a22ee20dba77b039ce40b3e8c140a261ce7a7422fd55dc476b62efacdb080d9a08a89d1419fa3dc13745978c954fb46127399829d9f9b1067893618bdb04ce0781f4447c03e223b843a511603845df068807d9d27a487475df7d41b12207c5ecf780eb64a6aa1131f67f6257e1dfbba9b8b95586aaf3c0e002da8e2457e28ca6f9a5868963a0904a1c3caf81bec04ccae6a908b5ba8fa14043b35fa97da9966b4b4997b4292ade28f1cf91d30a7cec4788ab4bf8ce522b215f069c6fbdc2cf0d7d38a16ef58c98ba5ce98d07da3a487b25ac2f86964baa98d5a4d456bfba2fc0a6f4ca8bc3ccab0d697acc2370aa9635a3b5d480c3c7ae666f8c7920ff8178dae88b5803794247bfbd1d5bc7da9f69710cf3ec26861ebe130687a52b62b50c512de87779f6c1b1551f2d9f33c7383b33d2c7988347e8262bd51529784fb70c9c396939a5eaa54514c0dbfdb818c9bbac5b3ed930aaab590892ee58e36b49111576c1d9c988dd25101c1ca67fb65cc77282969c39bf70aa8f7d374dd1900aed4a10d6653d2431da374598a47b9e9875198986969d72f3e41a978bf56a79ceb52f626087c3691dd086af72464643237326bf51bd1a006b2f3dae86e8c082a5dfa304753758e1c6419f05c24dd272b4dbfc7b70ef3825544d33478c19f396072153c6a5d04ebcde8e30a84b33519f16a15600d8b339ccb28b4aae42db7a110e0119d5e40bc445fa25a7cea4d8a96c8e760e7a479aa5f9233cd387d98d1ca1fe54eec1b262c8d1ce78e038265b085fdd427718047304eeaa3136035a3f1f2a6c4b3efeb2ff035b0f74af8b4ef3e37da34e5f63f0339ee2686d4736b354e046f029ae302e3b4f2fd5453bcc1c494cc93e905e9948107de350a7ba5215450dfd65d1a39162713cca9395f76332dc9a5838af9eb505941a40d4ebc2730dc35fc42af626413ed4c544ce9af2ddc853162e802c387aaa8a3a53fc9b7994c3fc731d79f8139bdb514a835eece6ec1f21bae1bfba41b5618819273de001f51562024006df97c22a97fe859019207e0a94053ff2f265a9aa81a1a1d2fe8ca80db9f727876f13222a0019b759e07c6ca4b452b14ee89e279a0c5c2d864c393ab078fe874d3de95e926bc85859536e923d0856ef9c1b2e4d40fe79df3ac45fac4fbf7fa23d4753d72e7a1f8b5559ffba61e63b8803f3a4a711bd07422c1f06f057a89f426cc28304a082842e64ca7861ded338ba97cfab8386914c87844095c7651a753710996c490e7c80a9f2f35261130809f53bda9c4232da74d9f62ed9b296260d5e46fa2778011c85515e1b885e1cad402a8248aa8c9172c2f5bc92fa3985748ab84bbb5f753ea0a624382335804cf20e883a132e4397233758b70a470c095eeb4b345d81125cc0c01d7a67c45c5b351054e72c9b0cb38551079ad323d63b09a557d47211f44d84ed5f72106ddb131dae7e44a453aa440a28433cf2966f3db56115175d164a36f7cb63c2faf0e33b242f3c440045b5d3e078f7adf108e6c9fac54cd0952c4e3009147dfe8849ae3738055025c0700b1d5c68da50e2bd1e271a905c3490ba7d18c4124da5654a17a0d53d21edd17451cb288949973b641b65e8a9ce16725c0fbfa5fa01ace1f3f1647066b19199f2773500cc6087c664bb0f56efc774cee74e35be6c9c412c69eb0619bf9bf0aee1fd49b381570cdd29d75ff435ae9e997e871524d587ccd49a61f52a133d72de8ea84db2b74a8b75714229ce9ff458b8d6afbba85fc1968d56e3a48a5582b1847dcefa5d3ccb231911a2c03ef4a53bffd8feb12bc2a9fdb3cdf8e83ee371e12fc466e0f93bda17261296c4ddacccabbfb456f1c09f2f748d20a0f02c556c71f589f8c2fd70a04047c39d2e6f21e61b7b064584dede81634cd252d7ff75bd0d6693020e464592c56863cdb44d360da721c0ef8dcfa15bc0a0816d8bab920f41e0068835be9063a43e32f3f84068b68d3c6868e74987eb21a9b39ef432ed53dae1e70a23fe4120e4ede59589502d3b3dcb445253b5739d8529d10d5c8dfaafca27552450440c75d063e79eb7050c49425c822ba2e5c46a11dc89f907d1f9e5d0433627d6d6a8aeb9c69c351cd635fcc1c556713e3cbc2ade9fcec2f522595648eb228bc37b9d585d1c12db30eb3f8469a2f137205ca544e10ce5f3fb04c88a9c1e109b55699f5e1ac684bd68c3dc214dc141ae858c30f679b349c6aaa903b58130bdb402141b525b7d72accde4c7daa08c99b8a13529eff193df69b116dcd5059476ae4ec1d1917134ef99ab12abf1a2f01d1b556fc5c44807f04b311a6dd181a07cf3eb1fe2c5c14f29e9c83960f2c00c15801eaa079b209f1812a35be617d2fd76acbde72d38bab713796626497385dcd4592aa41f1c6f45c0ae9bb031f8954699239110e497904496a61a6a8fc409ca91267530eabf011bd58924d8360346811aa6cf02b3523e59c99038a224081dc5bdcc7eb602f80b70516e0ef2cd06fc97ba33e2e726d28fb506b01b4d31acd40c847f3950b2c3ab2c6c406062b6d48ce55acd3dc1be9a1e73e90a0314dd5d8d76892112f22ea4805705e70b416e49e9110a513ac7ab9eb5e8a9c73d905e1687ee33c1ef3500a490f002321287b83d9c0bd470b1c629881c8c2eaa0f03b7da174e5577a698b6bff1d56431b9f02fac6267d82c7ed32f09cdcd3225eb98ffc54ebd79885a5634d15474d6e0162848d1cb17e76da537a2bd46f93aa1dd143977950a1eb70e7cc9e70ac940c8ac84f432583150fb315d7c6ae72cfa98dfd9d14ea5bde70db52f5600b122e8c852d6e27d78901d1132358716eba5f8acb3cb338a5c08eaba9c939b0e863a9be30a569d1b2960b8334d4814808841dcb8d04e3e90ac403bfa00e4ec626551774c4c41b6698b94a53337aaffe4e82518420ba8f29427f5466b670bfd1e124fef53a8804468993a04092b1add8649dd2cdc78444f4c6e30a6c79999828a46020f34fcb39e455c5e1244aa6eb6032be6b800760f92194c8764245dba04cbba0c16dfd00e93be876a31d8b0295a604944b416d0ecdd13aff01f7cd8a9164e833a7b0ed3b157353e69bd35dd402d7baad67ee27970cb101f24f40ee64a9dee5ac5f31c03a11e2d4900fe68bfaf5cd4858cd062f1694963aacc27926d5771452c8e315396759bb2ca575f4540af99985567250750905447d8cedb07649feb79e9c85c4d738657e469925cc9c1e8bba0bf7ee42829639c3f13f55fd01af9ec0da87339ba727c5eaa7187fc1b3c5de61f3076776d8963041e92425243286b14c02c4c824af61a8375b736b1430d20afb9f91c06f3ac828ca8b1d4742f3dd07cb28d5641ce3c9eb672171ba73c89cbe07a72b3decd8a882aa03809ba1a51b60cf3d2e4961e04771492d2680185e464c46d32061d86a3f2eb4fefd0d2233b47769fac67dafac339da9abdb0574f461567b8a078f79490fb3cc389289b609518d1fad04871b4a7dda7c734c53a46a0c40be803749c1cf4ca197a9a66f23711ea26999aa52c7357650eedfbccb50dfb6600c8a41e29cdf51a505553bf80422c0a29161c4f1bf9a88cc0085054376f4f0b776e0ae5750e76d252b37d9356a2e030fb1d4fc8fe85775d900107d391131ec2aea561eb124427994c9ed61c0a8542d2471754a871d97f817380e3d85ff6a812594acd020d0036ff811032bf22194db4200c1a8b6537fe2bc8c412</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">请输入密码</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    
    <categories>
      
      <category>数据中台</category>
      
    </categories>
    
    
    <tags>
      
      <tag>数据中台</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>数据中台-07_同事老打脸说数据有问题，该怎么彻底解决</title>
    <link href="/posts/2022/05/b453bd2f.html"/>
    <url>/posts/2022/05/b453bd2f.html</url>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="0d23d37f683f40ace17fdbba1a1ea33f4ea711183d3acb623e44f7a46103885d">4e4fc70cc91fd42566446082a751780fd5618d041572b8bed7c41bda7a5fe16038be3debec314ec22c9c0454600299558383f53e34e2d04d342343cc86f8a881b9ccc8340718a6d3780430e481e77002796131ddc0a841da0787b38e3f8e1b8d69d29a553b47a28e9636b445e7781a463a65f5ea4ca290510abe18eb569da0f6f73dce8819d0dfd76ccd5445e380719c87dee2e69b3fa93b19acbeddab6747bd6aa152add888afe193b104eb46e0825d33c6f5706f2d630dcb3049a77b0b27942f312a91006d864268873d85bd64a10937126af4be7edab0428a22ab19260e757deb76604423730864786eccad3f6f4d3b4f1018be3ca9003f34810ce01811e621175a9cbadde6709f37c8b8d3b01facc6424e6b83eb92902cd29069a92cebacde9ac65050aad0b603154752654c51e5c059c3b0abdfa2d9f8ec6dbbe0af7790f1f3d1b650dc23d9399a5bab0639bc6ebfcba945bceb38b5b2e2d6030625fb5489c4d723071c70308e63fff7ebfbafa3a561b6115b503449bcfa436d2223679f1912ab22e2d4699dab225b1cbfa10f3e2ccd263b6301b2f85ad8d0c794b5685be7e9f2e20d834b9b4adf04743ec034e4716e1916b9776fcca8f8cb93e6cddd624b669efc11dc45201df82fcf413c502afad3d05b30cc1bc138a24367169f29c52aac050090dbe581aa0b723cea66d68e37eb2c6ee9e544885cbd2e42e9256d1fbbb1e5f0dd1a6599325b0361e2de2f7e413adea662ab8a7ee3374dd33774a8c8b9b532aaf0ec04d854351e5348b16e89805619dfefaece719469a7915f4a51e084036812bef973f0d996f55e68ec9c68feb8246e577ae2f393c2eefcef2eed55db6ae0894b8278187036397488c09bc9789622e28cf65dd0bd9f1daa3e9f5e641479fe820ead2ff4f62f30ce1c2e98d8a90c92f0a20a10957fb39124e6b4839f9974f1eceb1206a3c00d5ab62f7783ed29ae8dde643c933ed87f5c128802477edc5769c451f54319a4f475ff3d052ee80ef6968f62c201854998087c244ebaa9dcecfa05dcfbab759144e7e652df1d91dd9f159d3a82a806f399aa215c8ff9238d077cd8eeda80a9a92b813ddb5e843460d8ea8cda6c18fb3d58dffce2079468ff6db19b310c6e6057096ee2da1478edc3a6f1147b5f7da48e4dcccef1ab5d52e8626bd125bcae87dc8ad415c0823c0256b0b93ea5144b82c317450a68b2b37beefd22b37ea290e66fb78278c46ca037755e453ddfb2475f1bca43db4aa546364f52371d0e88092cfcb94a737047d0b64139c199cd1a8185a52bf4691aec351b51ac144dbe9332449d53dcb7b2bf6bf97532914d14cba16a0ef903fd56374f309d5d7598996c5e3184fa5bbe90bb03cf17e69a530230eb23c01f3420b45b03708d1eb36bbd602700ff966d3a994e3ad3f069e3b74edc927027f0f76c05a0a518a27b2464508780d2ca1946df2e4c305565dac9603b127c850c9c3e16e8e9c556e66ef9983f09a25d6b703fc062cc8d2b5dc17e74ce0e2bc40ca799a70267ca829c9784f41d7f64dec7e5ccf67b993863fcd188b6c3b80103e40beaff163007f68908039f9d9de0d4ba32964de79ee531c0e409a9228015344bb907b756d091f78746dc47380c66ecf457838ae7cc18e92fd8f0a2ecb836e3cd57ad15c7b150f39f0f6dc636ceb2691f8279314d46662b33aa84922140c4a0f3e004ca317fa84b98430b4993ab36236d703c095686fcfae44168560f2b8c10c1cb77aeedd8defaaff58f40f24a3fa682484abe334ce2294054d0672f2e4aed4c33c4560534759e9f5ce7c47342ea717b26e4f17bea431519e9ee2edd7d322bfe0bb059ec1201cb278fca3d29c0ccb9fd5d2a83802751d17bf877654c22d6924be67e068eb783df6fe2f887dec05a77758aa6ac24f11ce3d5b6b3e8cebdbd6daf781cdbba8941780a7e1060799a868e6a2fc5e191acb1a0804332531b9f4cac19fdb238722826693816d58f5570cecec03948fc9e678891b5429de8e6308b601fcb441421ec50721dc9e94449ab34b47854238b144738ed83a54efb8d176603c373b88d17519ff4f60763b02cc02507e8b4c4f1510029fde5ae752748deb8644eec4a7b19fae8bfc9983cee257dff591e272bdcccdec93bcbeb3dcec528a9b709fbb9b1bbc9ddf8548d273f6f19c24faf61679a83f1eb6b165652acab57dc019bb80abca1d92ad947c76601a11b4fd332df8b67c9d79966f7ba7620d420163a068a6da817a25790b6c97bb8d2cb5c30bb6930fe314864a7d58753ba47dc2dfe877700b0e6849f88af2c54e9a608c5fef112c5b874393e786e79391720c6044ccfb83af8a4ca4f84eced1b7bd73494d1b66b134db7bb169913d886aabc25f18056360f7d65f310aa89cd4442ede4be8ef7c0c3bc2ccde51722ccbb44071092c6b7d2726e1c846ef4082bfad19f7f7d5a9204434e1026b0da3d3f1c39cb97f11dc649e1670f7fad545b2eb0d45ffabda74ab2c900939f786e1353b9d8b07ad4523c62f219ba07f610416c969f03ec5343f6f3f43e2bb6c64d2bf16c5fd694353d835c0f7d5343fd2dbbc787f0e01c68b4636a36064ddcb01e6df0d3014df5d9f2e1634b89915cf0632c64eff280eb1c9fde4ec18643b597934e65382ebbd81214cd9f9d49a30daf52e6e006ab015bc39160816503348fe05c52b9877e6e14ad8a3deccb1406b548c6aaa7f7bfac92f01284b21d85a70200d4f4e3bd03ea939d34f85514f1b98cccce94e702728364864bef11cdab7704f08991bdd2d8b83d98905acf15ef5d2bf6b1cbe3126545b20d770b27163ca7ace8d23810034c2157aeefcd7f2e060ecf0e5d636a0e60147afe824beba3b94024fda4a5a7c21762ee7d83b9f4f4703505d19667bba46310632d7fb148d32ec78c6de63aa04e2cc42b9790dde4745a60f3613ed342817ac13bf001a56a5ebfc2954343d8e23cd8da6c13e2aa2afeb807f7c21b31e13e0c9cdef6b57cb549d3e9a0790d95526a165b505acdd1b27e6c4f9ede51c55fdb728d898fef07c6f65786bfc5b37906cbee31251cb644ac3c8a069633612fc3f61ae14d252278a9bd1a5c5c6860abd8bea1ef995190c9429a8b26801e0deedd883eaea139cd4891eb3e1f75815b6b181de6bd01e539f9890292f46f5053bcb6bc0701143f3b4aa8ee7bc2379c6efdacec7ff19a0ad6b7d40e957fab8c41c82c56f54fd5828642ae1e178a68ae1f04084903bc8cc0c9d5cd621924cf6cbfbe7d9dab234f8e9ec9999f3447d9ea3c1172ae14e9d1a09a125ebc0cea4cea611deef680685f97ee9ef101ab4a6de1dd6a303001c0fa2560dfdbba5ca18a743535f955dbd6e83ca4db5ddef439df6fb440f792da5aba95855cb656b26edbffc78fa55e10536e05dac1ec0f16161d4d2cab52d1699a90894a173a14852b4a54aea73b143205f8743f4de2b2a7c00293392f5f70e81019a4af116544f66bd7d962b753f1c52dbd8126611575709349ed1dba98404c6e9606b19dc89c2d09d6c1b28ab4f71374c9416039256abdf6666f073c837b0d4c088401004096c81698bc09f06bd7124f7f47541a3669c9afdcc607f64cbbc6b84144d0d62d66c4a4fcf3965970814556ce5774a55ca1ef8ab155e6e38b13a02c8ac18ed87d43d48e37bffffcaae4842687c46dd20584cd87ab8a06089a8358f8eb3f981b2e4e667ed616b1b69ddc7c0b82e567ac29232f6dfdc211c8836ec95855c40abece15c5b6f6761a0cdb229a60ef1de78cd58f6a51593bccfc313f76f8cb52f981a8381aea572ebfea15049c7b56c546257c7fe0582b0a5ceffb85d656a77e010f4481a3fe29ff606b6a7c5830069c06acf50f80b4621dc049f488298011dcc8c6da9bf7bb50bb8556a1ba8bc71babf71b0c529cada1f0fb67f61d5f11c5e87f3bfcc9cadeeecf8cba4faf6975bafcfca4b7df0bfb6e4bbf03d4dc9c56e801cfe9ac565ecac58a48931b04a2a33b8e4f37326d542757eea7bfafbfa29dae4319c4ecfbf01b92925619d2c14748b7f3be9ebcac6c82daf85f2e6eb3ebd5bb3a5cf9e1c1f151aa878a02ec5bc28528e7b5f57334c72e615d32ff28f5c09d557aeab229d1a2a824f8938759b7d29b7ee3838ec8efaa07de8428962602a356a252caa5f406a00fd796bc437f71f840f0573554b6d597153a71156d248be2670c2a0df7a99c5644bfff2ff27face6d5d3d11e84f8867c8d8d37e487256c2cb4937855cd29c0fa32b9ea5d294b2af5262215b1101301777ef445749b7075b2afe68e028292f3043a938996ae33361cf3abb6f456ef8e11e431c868aee0177e22116fd7e3ec81cbae927506ee955391176486918d4c495e8f8f0ddd4cdc8681b9fd73373cf2dd957c38ce222731264b6c3cd07f8f808b18e16e90129dd91f6a3d8415e1c5f96f4c8a5d9f46c4c42b8a9f62c5a23ef8b551990d543e11081183c7555890f9ff57362db70739868f642a92068ae1312ceaaabb8cc709b5c4c11e95bfc2811c71cbe1e643610db0342daa0229469f2fed7d76487cc262dfdc4431766921c715883e92db68e738d733f51f7ad45e40017546a3669f8b8bcea14d4cbfeadeae876f0cf823a59ec1464fc96cc5f8cca294cf29a80ffed928ffab1cd335d2d187a48faa752f7ba95d0c56be0f4250df64af208b67849924433770cbc6fbf07efbde2e38bf6b32dc47ed526ec613408809b971902ea24388e643df2a9b6a8307e362d337a74f447048bed0e5f1dff545bf6f30bba9279d567f9c20525c1f1db9df86356edd6513d6ee0844d35e3fa1b08bcd29858bfc5541e07211a9e748ae9cad62656d61d5022f84f5867fc3ab9849f40e6d59bbf46018bb48c2b6d22568c6b1605546f2be065a4c0352cd979e65ed47b23ff75b1b4e8f98dedfafbb5fe282d6ccf59b8186c3a7a880bf757bd4a3cd28c0041902d993f780c62b21ec6f87f7e730f4b26eb211f935cd40a1417538acc06fdc608994606eff9347774dd0c63a29cdc0826412b6dd3866d1ae3ddb81aef4abc1641d39a3d446202f4883c3bd52c00a94e55baa574ed7b4d69e38e250025026b0a0ce67d47e76ad45b9d655fe651134c8d5241734c25acd4ec3d44fa11935e118fcd1073e5ca93e5de8d116b79c9d511dcdc17970df3aef6adbd2dae14b3c46bd45b976b405bac70f7c2a3975ec9dce4b07a1366aabd41ab5313b4b22c1a8c58501099ce5cef2bcf8f2f8dc37340f4bc92e5bcd8bf68e2f0195efeec6dd0d745d44576a5ba9ce0fc99fe0100e23c4149d3438fb37b3190c5a779f4fb6bb7a1f9c386012130701e869d384836b7bfe10ce8809dd67878c5ef58806ecad49b23c15341c9eccb09f89af35eceff37866b5b5669d2c52dc0c96bd26ee78631fd37abd6369195e482990897a4651f6edd2b94fe8723d331fdbf431aa5c7f2f7c34f24a1a71b1eebabdfc4a0712f3d417e452038aa64f53dc2f74355b3578810bdc5a206698c55e89a5c64510e815ffe80139091a9acf9eb0146d1d220532e5c45542593e28907e673a7093b93d02dcd9c4a51308bf83fb264abdb7250b08087093c49fd7a116e4b08ac12f91d1ada7814f6d6243a5902efb341d4966068aafb149cf10be7c268ba0df7ad3e31e029874a88a25c1c64d9dc3b33b9fc76df37d51356cf9bf374c83b74a6812dc1e9c1e9b18e73eb109705622016022acd807b8941aec653b4886dd27462c5123a0b38f6cc252dc1733fff9dd5e4f453cb20f992d9e08da52dafa69225ae3cc979388c6a624590511e787d9ccaa6cd93284d1b25cc5163f5665631ef167abbf484dd8a8926ba9790a7d73126aae30c2a821d94e7e201f70f9aff6e3419c84828662336603f697e15d5a057dfb4fa4a8cab3c3e01d388d2689bf3f0d14b849bce93e5edf872a8e06b4655b33372fe4bdf0d4d70eb5a00b02390aad00c9251343661ec8b54a20a20d182e888ae9300dcc5ad34267736f44ec20b753353b6fa4c232071e19dc98511ba7bf4117b3014fe0c25484371b195534c16576cd16210236e923ba906d65c9c8df31527ef174005585c05b8d0fae0bedc89078755e0c481470e7862b6c4c17ea6fc1f762d01ba871e25724493bd76f5d2a809745b2ed42523906e3309f2f42dbd206be2f6ff59ee899fd0803c40812fb1e3452e5d4c166494a8697c6dd4056dd3b032980a44a46e2b29528c17ad241f8271171b817934cbc43521ef6d7c5728353e1badbd5e1ec494839319be0d469635a9ab25ac643406d970b70acdf5d0db3829358288bf2b35364e910170b4aa698db056c401d37e2e122afde0fae417527f76355227bcac37fb490e436fabb18fafad6cb513adccf8dc363d13f47e0347edb966dc73397e99326d2454b522c5c1e9eb172527b3f22ee2e4cef18cb00952925cb1fe266e56cc45f211c81775e69892ea7d442f31635446eec64dbdd01a43673e1554e786e437bb7dbed80795d6807250c11925749e43bcc2f77fa25dbdbf8aefe946b486e5e866ff4d2dec216f37ad3128f0c0249cd60520d2a9b6ad748bdc72f3de60940fde80cc690ebd21f16269e340f6a315ef1112c5563c630be5124673d04aa0309c86ec9f17b590fc5f0ab687ad9418ae5434e80bdf0e7b1e50b8d65e7c559be62732907fa5d4e33df7d5d379431d716db89517c6184f706398858acc831fb2be3fc97e9fab194dc83150c02caadcebeedf16656972bb18a628def6317bfba4ff0c0b7ae73240c313fc1adc83dced8690b0934ae8659f3ef538933cbe75ab2c32ff202bf1e416993004883f0b73bb2b2795b2b5f4c25043952816446076490905cd864dde75c40ab46ddb1aabe4cce8106a361b363f50a7bc8fea3f7505c5303a83ac7a0ec6263072964ccb8930d89bf6eded019c79ed18f5693b1b66e53a82b25bc9f4eca09d4b485eb4223eb3a2f43204f25e80521b4871c7dca6436a213df68cd3093737a726d4582170464e8757c9f069a382a8d2dc418d3b99740fdbc9f7b386938aea2d3f2bd116c7c6a870267000e39312932938979fcdc354e69493d35ae182b247de263dcf9181c78e2543ea32c836c4a0aaf92c01f040385e74a85699eb2f2e0b18eb1b7b229dec659de2aee5d8c8968a5ff2c26130e63171792f18fa8156053f6f7e7721a36c89ef2d79519ec7389ee0ef3b3af2b15836aac701126a84280dbc084328bc52f170272f855b89ea83d93715c1b8deaa8eb429f84e40dbce20bca5cf01c717517a60a955cc000cb82469c1b53ddf6e75ddc323b06f9e3f00776f617d1f9f700db0b29c9b5f62295da5ef915932a2af1ea1d0c28b4db8a9d8c4d34431256d2bfbd8f2315cd02aa66d380e99ffe1933ccad7d959c95b9c19295c0a97c6592b615f2d0b5acd5c492d0809eb52e3f1a275009dcdc8abaabd04e94c7b2ba4dfb72df55b2f1ab35ee3638b646ad04ec18be06d6acd072983e243089d21ba5115aa8ad930d36e815422dc241a0195288e8af263003c01cdde794048b9bf2abea0b7c9f810eadfa68e48777b1bdf906374361ab7834c5f82f26e6ce2c241307195ab8988d831575972e3fc0637067a49f80b9dd148e411c9c90f29e275e0d5905d7a70d34a94da94de728aa9776ddc41006431884620e9a20c7ea671b62c884397841cd1e29d95d3a9669eb03588da3a43d2b41b366ddaa1a65372f0196f55bf659c4947fa632dfb20c8ea0b49361c041f63b25382164c56dbdd3ee3a50318450d553515557de32ca1bbfe7b0c36d7c08880740ac6cb5fdb0be4f1d17cb21669e5bad56c01c2e7fe021ad05a2e97e37e0ae1d53538b4cf5aa8a193df9113e0c390a24f0a7b89ad645d371ebb9f256f83429e85a771fbeaf31a5a63eb5eb5663248a7c782c09b5383ba8e7b6660d5d80f4dfb88e604604283a40f76de9897fff2e69cdf3ae77e7b4bb6f27d16728455c9384b0fff409c53b594c71971f6f81acf302f0c2f0b9bce5360516151e02318e223f13ed856710fd179b02830d4497054da65e95bd139a32a31b89888a83f6caa2c8ee9e07ae3648ca9ca833db3a32cd268793523622c202af26a6b84d7b20e5a90a2da84cf699d0fb413588e99cd2bffb31307197d3ed50f18fdbc2dc2e212454edcc57e66f3297dc71052fb26b49ba83a60eab0a40bf28eb7e7ff7e8387eba84f4a002bca7a67ea18a242673c22d32e22e999ea47edfba37e5be3e70baace7e8b74b00a41e61c5484af08fa891a20d28c94de560f5587b339a5ad0ce88efb014d9c28884bacbc0cf55136729746a8239878595a9d7d405b741a1b8a8f7bf44434cb21b32e44d84070c0eaa5ebd9dba6eac287a3a2b4c1868814d38a9e6e9ccd3a3772fd6150abd0435aaea2b8f29bb895933eaeffc375797be6988a9d557e9bb1fbf3bdfb0bbbaeeb17de5289677b6352e9878a290272f75509ed3ba8c3805bee66dc4d7da498c185139e99b080a12a6699d96997dfcb5a82e7ba921237b3d292c2fdb6ba9395ac55befabfcbf52ffeee088e2bb0568234296ed0c30601ee09631e4fb38b1737bf0404ef3a1d4dec2c4f5c56952f42f9b738027a74cd573313dd5373e9b25afe4becb29441341ecd5282ea31d2bd6056399f2a3fc725ccd48b685bdb380aab4fb9e4e2c918ee7e30b40288ae4e3ccaf9af541bd1526319844675f71a53a08b2cdf004bc3d3a686427f172fa47ff0602ccd0e2c1d5062cbd50907f7b622b585882fbd1998eb3b3060701d63f435d298d0e3707bea762ca1d1571a616aca8ab20924f412c1d6cb7ecd713c384f814444401ab506ca60b1ec84ea84b72724b706a27cb8f8ae45bbd96c943d7339d3b0a9b46b9ab98f706021169f21d8925ec86622b7d2e19f2c0e17312add246ac6604e1334bae4982cca5f90f83466eac523078c35ce259f012bfaa44bbba7725e33439589834d29dc5695678c1ebebc448711f1f0e80ec4f8c32acf18b9905578ae814f0efdb31c51d9cb2ce5f8ab3ad760a89c3445653bff032567a778000d1d024ffe302232b8266388867bcd8aef5d243b2a30518007f2afc1e8a30115767bf1362bef6fb4c209ac07b0422c146daa4a833e7cb8ba955f8ed42e3c1f0eb4021be099645dc7b75f89ac5304b3ea333a02ff371c2e56113ff742fa1ec9dedc7fcc4ee41f8983be6e4543a36fc8b982ab355975bc441aa95653fd42ca9900ea82ad845e28a273d9f648519d15cd68d9c7a559a184f1ee3709ca416439ae25b140ac352713fafe79a8da7eb314d2147d92b4737ee301c6f8e02dd104c6f25fd6023c03bd3eaeba2dadc26c3729c935628a7876c1fa422a76b6376e4c985dc009c10bcda3beaa3a8923445be398e9a475cab9bba1aa635c3283fb9cb677342fc91e024f59a9887d2ecac171e80fd60a5e3f639dbf4be77309ecabb1a88375084f4516892112fda7f086852a96329ba5c2e988e46f03a2f2daa7642a91068ae919efc2593b84157bf113c82ff505479900e227127d7b2a120b86b4f4d74d2e8ebcdba224ae584ee2f049a12224efa63540dbb9647410f6cd533ba39c1d9aa92fbbbf551838f2c5efc3b71273af7c82e0e13ada6d7f33b7e4c3ac347ce0fffab31561a2e523f695c5e7789a8da7749244868e6ee8bf94994b2182d87998d6ab9ed2aae08506c2362920531ff3011f73edc25aa26bf5c6a5f88f9c414a30fa9c49b7a5ffba52c8f4a4bd4b2ffeea1b93c68947758d07fa4815aa757cfb70484a05e82b2348393b3cb1a2635ac717eddc1a5afebeb8b80268f7c191fb606269961f72ee338550af5e142bc9ec550144f024a3faeaed1abe8456babeaec6c755112bdca5853021120b6511cd8993d1fab52c4ddf5e6fd500d5aa83a8ccf0728d5f55bbb6f9cd2ecc0e153e0345e27d2026bcb85c11638f29124d0fb610589f70809c01605d72f31b7580250a8f69bf2c03f538936e73536f0a53fe9eca6d0e22ca7bfdb89c42fa3927a552d3e4ffcb8b85a1e156788e9204c5d6fcffc84e138364d41ed77115feff7eba158246b36ea4c5ce4a56d54e66135875f33ee4a892f1ce1450abcc10f62c6925c69b4e1d491d827881fc210d3a698b8030d2b09e55d1876c5533abfb51b04f19d6d8fd5d4f71f78974d55677f86e94325412054c3f658c05cabd3d25a7a3ecfaaf0b8a839b29d93ea2b71532bae441e0a86d9253494d71bc1891cd71b478f921aa1c2d36fb6583f64a4e803650db38966300e9426ca7fd7565e4ae2fde0c8eaa8ac44536b8a14b8696dc23a6801058e2dd7bd654eba41bb58cbe6518e5a97f894e6595048d5562dc356b57944ad5fd1562ec9b94c82dab7d3fdb5d239b5fbb78890938490a72be34afda065bb43cb05e513fdcc7727aabbf1a3849c5eab87e277ed1677fb0b3ae2efc092fbe0632facadb1ce217485ad85b1e9595405cb3e62f7011fedf2afb5fe788f228900ace8f00fcd7a595e4aed9b43c6133ef6bc3731341884d5d457d89b900edb28e4fe4134800dbb1433497f0112ddde5948c6e18a2c2fd93cbf751083f6650fc3b81d3d0fba27bc07d1e204423bbda069e3ab0b1ad6338f73302abead9e5500873c620830f3991def9f83a4345cd38bead107fde8c938b7c0eb2d515c6d183dea68672c330e9f17d5d20f27f072363918723b7ec653ca2c01679356d1cba18c96ee10d7a8cfa543fa388614a05e23d04c2e4f111b39528ec061d6e980c16c32be5e7058271b10fc53e19bbafe78401ee8a56ec67a62c6878c3ba5c2a615fe2f247d81554689d888bf0c4652bcf0155fa40cb4fba1b49e85a46c0ecb44ab24022eb28d965fcda201947721f9c642d05d0b664424af81354f9643d3c228a414278b35a7245723e3e8a190494afbf7431b0f75c15f9997c78f2eef42690bee49403bfafe76b2627ad8b11db5c5b04c587b8a20fdc2f391ec27b463992818d0869529ec8715b0afbbe8944e606b6f79c269e191233cc59e7ffc55caf8591266092110f17526de4c770895f1b1bfcee9d3915e4094f56768fa52e072434818890b48115676e8dd0666521073e7966c0018ec227869c04251589125f1f0baf51136dc2fed8cd7b50e7cfc2d2ef05a23b52d416de77eea86cb2d20bbe4230d640930c7ddac4d22e6b613fd0c8c5c3e6710f79b23492e9708d7a9da8c299589e73f2ca1983d8ada08d0c2d55a2579c3ef45c251dc84fa38c123dfdbc66bb20de39e003931ce2a878dcd433fa0fd07dca45fe3f9f8e4445931d6bd11f7028226610d4ff10249334b18547b661c25154f8851c15f0cf2d722764e7a9e659223ef7957350edc224ac929017ff20602b2991a499ee5aa8bf59e7a4777037997bc680740afd5fdb66412aa21f54a4473caba11c22f3115a36c80873ff90925a41f2106cdcf3bff7d000c52191c46adbe91006d676079a3467873ed8f12616fb674e3ab98cab0fcfa7212668db75a3b7e0df1a5e6ff74a1fcd9bc05ea7d6457bd6b818203a345032a684f4ca4c2eab8ab4c734360ca8bfea217ddd862e045af92d42dd2da83836b13450b10fd51d7a45f094468e542329424ef8a60903e2c0b9ca67d62a807637b6b0be668236068013808f5257960f92cbde628def8b2237fe74d9958247dad14cd0cf4e0c56013756e6b96b599b8763f9a800c88bbd7d567895b9b4d6d2c755cd2c414a1e65139ad2a9097d4321c6623dd153a7bdcda8b51266b3af2a6084f48fb216928f11ac250efc5bc1b9c82d3225a748520665f8381fe02841f85a0067f744a3e5b2da05fe98fb2cfbbe28ce8b8994da0bafcd4cee828d4b96dc9f185d94ca3fb8f077cb95d9c18adbddd61982497edee3b0b3facb7aed925a863ea38d1ead8d449be506a7f14e2a06999bef88139a60f81602b987586bee9269e027a0b728ae97bcef195aa8b233d4b902f43a5e440c6084ebe5445b02baafe079b06ca47a1e7719f9cc2c10cf2960246af8e7c877907d4b077a41f78cf63a1e2ef3ef8e9b0f25d5ca0a39295cdccf8096ab502bcd8e947e7bab96a00a16320e7b93905dad6708f80224a917f5433d80931666cf7c45786382cb5b603d377576c0059d9b3d65e1197b3945ead3d94e8fbce1ec3c6e0191803746f29cf3168edefa2ec5ce2b1ec2665856525c9a94abbf2dd26aacbabe2754aae140121eee42ace688b37858b350009934f5a22b61b35033d2246df52f384444a1d815e24e6084800bef96b179c95e8578efd9c2f26c3e076d0f02f00a7ead0d9349a97a8483023caaaa4aadfe31188f9027ba7b9d393236853ba54b5b8c898e187713fa06c1bbe5ddd2bb6868b3d3b6948d815762f8eb0afd8e4a4dc5c0b054379828f0cc6df97d57bf71ef1a7379e912544f4f73fdc585789026b7927e63b642c831a0c81dc1c9cb6e94121035180591e1a76f1aefafed489bf521dfefbf2e42f5b9f271db8883efe8974a5233c44bed52d1de7e2b5f4fdea510fe0c37e86391c558f83754979a963f49103f4fb5cda6ccef965135655939d44c9c9791529e09ef38f1a11cf1ec224f8a67dbbcc275d8d94c8258e05b152021038a0af753c5a1c673f1bee1c009c411a7af6a6ce8fb51a603ee0c7bfc9c3308cd4b38d396cf009b95443207674acd87d814f9c9297f3831f9a9b9d2b030318c27411b0c4b20490ea6bf6648e00960809b2b410df487959d3f95c3725872e25e195173bb12091da82a69e02ff733547c2f86c493b3c2e68d0c9ef921b36017bb55e4283b43e3b27461ef283cc2c7ea05aaf24a4495d67233b4f61671ad9c23e7f5cad8ad329b6752c24d5af8b1729e01f5687c183e29917036043612636bcafc284d7ba61ceb817071cfdedd95043887f6d259ea58d1b927aa9bb5df9f3e43b32b735664d92595a85163389f7996aea024d42a986e5ce9748a5718e5a495fc415a3f57ed079739f58237993a5adde304d7576c60d7feadcc7a7a970ddc26017866c6deed9aba4d1c177e230b473dd0a92c7058394703efac3c317927915ad54e7876dfb2a015a370e60909765fbfc1f6af4e380c8fe960b647ae4543f6badb51c2e1aa46ccff1c0c4c597449d9e6b5f206ea2c4dcb39a66836d887009ee8c7b23d01553418e7f24f536fa862df792f92d37d9409b27faaf9bbbc5e13daac23935e829a56d8885095f3d849c2552a7e3d22332ce1bdcdbe2b137f69ac5bbcd4c9a453e9bd3670cd95b19eae390a3aa7f241fa74abfe3dd2e22e35dbcb66399a8e5429c3d4440e42c3bdc4557a7b13f40d7fb5601d4dc34a52ea8a8e7d32096b72ae0d37bd1170420713152a5eeb305adedb81d433ef933ab094eb5cd32c0f029ed30c1ce054a653c42280de0301318be1e7e2fd09ddffb1b5aebe6cfde480f7a1fcce0f8a782cd7284db0ecf11e2ec4275ba1322b0663e8cad2af0e88f9e70aef800dbe0eae509f2f1b9f058f508f54d8aea062d8b4600ff00446199af44c832327e8f461669761e705cb3902f5fb14b4e9f1ffb610faf00da121d2aded83ddaaa98e69cc46ad95d7ba71f37c268f110c7701c5f02b23ffe4b70c6bdf2f7c68499d6a888f08eea2ea4aa466a1e816069514402d188dc7e68b323ce0dcd4e26a1e133617e93a1aaa6d4bcf81ae3a519c82946ffc4670b1b22bae0eaff0fcdd604fb7375a80cb24af40f81ed4f8da004664747dda0ea6fc33d5a57940a5b3bad6e722902a016443fc68465d26f078af384fc7dea9e9b19e91fbdf27d0f738222d238cc42743d9e503a0a0246a93f79fc04ca2dd97399b34c8c01c8ddbe4744d50f70621759f95a30e7270bcd86ec63966310d73d7f6c605e341ac84bbc2cbdbcd180c0f5fbf05d9d6d7c9b3e5cb04996ca1f4c385f326b255677c7ee6afa37e12478602b5c64dcfaf656456b08d29fa80164e9440ab37cc454fea23ab0760fb56677c2ff1e388b143e3ac3a79fa3f2bcd4c96165320b966498ce9ffb2113cce48620a5b48232a778c16bf9447e9dd79eb6c91dac4eabb52fe7a7f0d046644409b4f7a67af7079030629dedac6f6c750ffe262e8dcc0d1d8c52a3768f5af104e692e29e63f48f18c9d3c5fd8a79e50c7a3d14c796b76f145eb53942b20a3de1155737c8116872474eb17570d068a799b0d52b1a69b189239b7a30c07fda0872fbb71093d293da8903ecd9414902b8fb29679daad43a918109b351b003456f8c4870b74dac82bd1954295aa0eb823e384b67a826ad170abe26618171be3f3cc0091597175887828d112720999e002d217348db11aaf35ad8fb1e727cf9b6565ec04ab2e0c11fa611f77de7e55abb64f755b538832ca2caa840a8a9066958740fc5c12eb243df7ac1f1bca69476520234bc21046403cd1ab109ffd43eda4037ca484c5d83bb4f474296b9025220def46845b2b6f8308f94e40b8c9eec84e503496983eafaa2bae0e40fc5a3b15c95967e635e967d61cd662296da2ee7d2cf9c002f7b5a218a9fb4428fbf3fe305fbfe58857661bd275ef0eaf8ada4389c80286c6c7840aa3a1d8217acbe94b7832ddbbc29f4b37758b3e044cd1fbef3681cd518c82fd6e8d1202111b07849ec9fec894db60d8768775918c88f087e7b84e062819157cffadff1ef49e2289551721f09b360dff3e7d7d4db258bc260dc5324e8739486a451c66302d13902d5158bcc80dbd0bd9d4ce0c8ae00a6b5013782aff5828167e4e169fd29733c1c371fbcb58c33b05c7248ac64edb2d060cd55948d59746488e0d9ea5f79e15a90833703483b650e09af8880dcd5eb364b2b867fbcfbebeeae14703268eec53fa4b42a3ffb97545e785ad7f2dd33e76ecbb295119f85b862253f3bea879898953f5c11b567e7761907f5bdb9b8030e9104f2337a9ba016aad7e7a7cc4e337aac34f6a254441f9b058ecd4a7e7b94cc2481486d376362702a0f63320eeb82fabe41b4114f16cf6dd165409b7b2f20f9d8856130ed118c936146617358d6a42b9f0fccadb35aa8d4c682da1327647efc1b532384eafc41335a3380e132d29e2995a5a0bc4b849f46612653ceaf5eb328cdcbb6a6c74bde9fd32621b7d38632374bd85f6652601119ede3dd9a94cfe1c1609e486235cd13409abf85947ed3d6acd09d54493de3efc9525b452fe928f94cd5e55b24dda64358471b725cc57207b3309e0359c573c57a17c3489828acac09a1e42e6f0712cebe2bc42acf1a1f1fd92fe947c1fdbad2b76027add8f57a4a907c24136cfe77a8e779498a9929aa10425f26f3fbdefb50a29a5ae04ff1abe050a8c4770479a122680cb52be503ab2a484cd9d708dd373e1948c14da070474e666061a917edf0faa4df2fd728e9f9f8564ecab2b94611d57161a9caf6db1d2231f1fefaacc2b23b5c78c2964b38743d45ef6736d8bdc0820ba4485ea5c35e63f58a4b1d999114736fa3d3490c34ee5b648d83999f5947ab13838b524ee3827e3420c7a28a5241900d4c22f7dcfc6256a330fcb4acaae4d6ed9df4fdebf18ebecbe0a09c7c4812dfe81fe82f9565863a49e7d105459134af5016a6d80f75c3fba8b3efc10d6e65ddd4f39bce53e5c31e95043d0d758894b381940fdfa928def03d860fa67502d15c9e33f0eaef5a984a037cb655d9a220f4259a2a2a5b27385a7879719fa8cb5173000d5b996ea53ac6ad698a4993918b3c314b8a7177a9125c10fbe59501b1b6b3a65f028edfbc7651c7013cd60bccf277aa5bec7f14fa665d97feaa6c365831e7021ab941313dbfaea74bbe6ea32d435eaee69bd55c5e304948d5faee9720c5d2cb959065e11c6d6dcdee32e37522882b4dbc596bf619254d4fe70becd2016c4e49762ceba6bb59d211c709df31e960ee78eb2e063dbbe9668004c34c29a5a4305d38802d5a71680d7be9bb35f73e016da8351882f1a13f667bffc7f67d0ee1f3693d1bb42560108a1aab93fba02f5e41923dcedbc75dc0fa22acfecbf999262b164033fe55a824bec81b66ce9800c94b48f9a36f0f0612a691e77864023174fd3ccfd6993cc15bc78cc6f3238f98f7b5f0ff9930e148e2b8db1aff30ae6ebaeca298141c1f8c60337f1eb99acfdb0d9c481e49f82193b7a9c769d4874383098ee3a6acc7de8114f1c3c3471a16e8be15c9439543858f533b7a4004642175b69c4427c6a1f444171374a7b5ac561f17a2000aec060685339c6276255560eff0ee61c9135783d1f8b3cdb48706712268b8fa148fbc5e016f1d5a019edbde6ee3d4089ac7c6e643ef76a5b2fb8b4e4617a419971634c1ad00999988b7cf7ad7bfc119b450896a8511b6269414993e540b717863ab09a78c7f10c4485ff66dc4bee5433e67db604cb3767a368e7b5e4e7fda514a4ef8ea562d461fd27eac66484ffcf298c7b23eeb26e8ca478297d93bdcc213817c9cabe7caa75d13d75bf69f81b6ba476cb0379c1b85e7f720ee7b2a9c73dd010873f97ec0319f51d56ed5a6b8296bef1522fa410db82cd995b5c7f118f6b6c15819a0e0b7d6b30b94c5e8c3df5ed6c63ea5716fa67f54eb2234f176fc6f2ce0ae94162f52503c25c2d752282e38da101786086c842adff1de94f1c1d1b0a1feb1cd6bdc4052e150ed4f025b15078eda100534f4269cbef98ae1550e8ff00343c4ed87a09a63e43f0baa7eb9fce95f8fa625c63098838b34bf137d38578143d2c724e4407afb143446e6b138dd0cf29440153768f0700fee7a8debf388d19298f4f8f79bf50e42e21f91f351dbc725db210002d1c6758dc8ca9b34d649b2cec2448956da5b483f7d41cd4c9113dcca801e85ed25caeb7fd71c25183ded6f742f2738e5cc1503b629d1ba61e0c81fb0c93bb05bc5f253e18dd3eae69764158d281540b80902bead046ce1afd0074d11ed08c9f8b5391a399b94b563bc96c066df19898762e8faa106ad1124d80f21099859f844a16035bd26c193ca9765f8b814d33cbc1a124e06304fe48b6cf4677624bb891e582a47e5494ff5cf8a58ef8924de390053febebac1bcacd3eb00d81782d3cc3d54740586773209440ebc1a970840ed4060b55ac31c30ee4cfd1d57905464501e3b269dd192d88f994bab30797f84e59b07a08105c27d27ced4163c89acbf8cc9e653f0c409fd45946251f2cb77460ae30dab896ffb60ff10dcd2570596d6c9283893a90d1a23690b99b8d0e9230c63502b50892a75322536019d926bec7f8da074d518af22e0a9644315b948ef86393ce60f47e0d54d89cecf4f06920aba3dd89543991083dfa457958ca96241d5b79ea3356744b6928be8a30a207c2801f0d3a77ad1a43f6bd2130ad7ce32c75af23ba29698108b0a3aca371e313da0fc9ae41824e1e3758418810c03ea5dedb5c775415f129e08906a4b4d566ba369c82bf59b6ded8b23aef1ac4aa67f771b02328ae7ed5d28906094a40ff3c4a564b3ad03d0308353947202b848c8a789083d3058d9884a95cb3a432abff9e8e3de23d6ee72ab63761e4eabc97498950df8be9d40feccd371fd64e4764c0867aa940abaf00f3aa8943d214da12c4a81ce0ddf4aab8d973ce5507535beec087b6ea155c566936f83a58e89d33e69f633d0204b33766fb97b421cb6d2a0a441799c24e2dff3a42ca9f2b92448820c76ecbcb6d02b01296ed5f169f81296530f8eba6928532ed10391b0168581d2e67abbaad0f890945c9192f2d38b20684b504879dbebae75ed442684b707c10cba4ef67a4cd6a630ddf976899859320fc86013cbf6d28372c3053157343c03c955d6618a6fe28f5e2b6048f5c4718ab04ebd77ddb873566b3260031a6f0a0d631df3493838efc1d569ea393163d91d2fe93b565c3984cbd0b4054ccbed06723eab291bcb93dfc243c87d499c30006485b2ab571f0a72312934615649a45c0528f33f23000ed9449f5e7eede6a075594f61f0d45c47b0626d1ce2bd9a490fee48012b0fa31ad67d53077e99ad1fa94ef7e89456fda7f48aa3ed656574e34c77ace013a001b87b123135b0b3500c12bef82f2cdb91a22adb682b46dab04b6f62875e5016dcced2118b908e985b59db98d3f138a63340b70b818b0e8d07ec96812246ba69ed58ed0c8f3bbd69e3e226a5344088c44b394f35ff408415e255710414b4759ad156db55fcaa728ffaadab08fe754710a64415837e7da160110cf290e6225487e3a9b927bc1d17c5fb10c7d774143e3b71f9e4a773e4745d45c7a5b70b134aa245ff1e663b7f937f60e9833854d380ebcb6edb440065a00e432a2d01eb3146628183c1f0413fa3884aa69631df620bef833cbea4a8539fc4461d267439bca978082ec21aa74a64d10a9633db8fdae6fb3d3c575d8161dc4a2dfaa038ac75f879877d5aaebd09eab4e81965d498aa042c988b67b5a4b503c72e41bf2524133ba620d6514f5f04091cfbdb5af5f609555be2bf310a1255dec7988565bab2938e3ec426134edb9704b294d2386c8f628ec03743994daf6a994c0f5e61e85f4f536d4b1c7e0ad563d76bfe1be9ce3e2513b66fc2fd2e473787f5c1a9de25b5f89ccef380b4f5707eb2f6815e029600e8fb4b82959733657510c773e26a200403e8cc58cdc42d79f34fcdb97ed705c4ce65cf5da7e046e9888f0e7cdd37356ccec4a829b5d35ba718f9e5b7a8a4b9e43e0ec905f3fd5fbb90343261a56ed1a2a575960306f7ac8c8f3797bdadba5181011bed3c043fe61579a6d9e59bd307b225a8071e7e900bc363eeab64e8ff834f46c20b70c0671064c3bed5acef6bd4ed3e4127c1475db39d0ac667cbf5e9782bbae3490dbdfc34fb55c078ce1d94b763e9d011af0011f86eb9b77df7cf9682532e3e44e2ab3bb87379580f56ac4ec73059de01798e4bedac42a851a2333ec857b7af90da4b8e7eae89de988a817905b63ec1976d650613146ff6766221d73e6606545eea87414a0f32353157ab2279d79035d9b6a9f1505e02c61ae579709ddb6106a9e6d3c56166aa60d7284d7e13c57ddf43f8d6f967d48e3e767b75c504530c2e05ce2bc31a475a67a5ec6e29779484daa31e5c4a5a03b23ddcc53ecefc3c783587a9a287ebbc7433c5f780efe2c0e5fc967d4bfaf55016b7037c1017d97244ff4c9ac423d57a860b58c5d149bc9015c2ef0c95477299d9a0351349853beefd96c8eaa0d36c826cb3e79edc8be631cebd5dc2f89e18110a00745803146cf03f7d1d2d16f408320ecdf30484a2f85441fd4982c52c047ac5eb3811d9ed332c7c12d1a5517f0707bc3a4df57563f090342bfed6a640b2f6656ae3fbb424ec29e7d69316dea70c61fecf0919343a9c79accb6eb55650b895bfe5b1f6189e3dd726f3495b7bc7ce6305b260f1c913dd4ac10d38987c3171b7933aee66554bdf04d7793f12f5d90b240c065b60a413d7987580b0c5192436e4da9e4ff0c589a4a2273ae609580d388c16d5379d6e157dc36b644786441c4de0747a02c3bf309973f690a4a45dd7742ee083f357755e5189c3b8e6e9be35e4b87f9fd0c0f34f9582fbe54698a673f3e18add4a45b5a72b57bfed96b40f733af48bcf68e43905e3c4921cee2e9b72e4a20f1b07b5a11cb5b0cadef09a9958339574693319c7a232e5ac54695198300e7ccd03fa5905d7acfe7697846dac040f73c0ba1a4afd6e1559f02f07ad686db4c7e7e1833087f2c11917eb01cbde8f9ba8560c16e6e34675da52312013f058e491ec54a81d318abfc4fee4a4a543493b653b0e5278819a1c0eccf185ebc785e6b24ff0f7599172222220be76672306fb50f5a11e10c4c36bd1a006141a484227c0490e2759f42c33b2f9948e0a690eced08656172fa0d8692ee0164e6c1239c80c608512eab496a2c1eb0d732ba6705a395f3f61e37850ee541f8af8bb390b15d9ea5d5fe8ad031246e8faa35084c506d566e67204890bf73dab8b4dd393f72f4fbe391de5352e4cecce2281e6459edaf80296cb5ac6180a16f0c33ca47d238f515f09a4e7a80ce8a4a51f91ac69890f9be54cbe492b4bdf9ef8e10b8e3a94eac2f29112adf71c6f793f1568bcef348c1abf4defd189a8913c89b1ec437ad4d9779522a42f2d0f1958e6443dd610d87df034455f8b164f278b7498be33035eba49bb081d3522824ab366117b0d4978b1f73b099c89ef19ea0b530718fa018a4b7697c58d23339f4a436bdc990f5e001ab4ed2b777bbe3126da22be818eb9cac6cda82be1ffff101c5ed37f1d33e5deb9acac10d4b411c58b8a1194a7a302371861facb06bb4bd401b4dd875712c223b41db7aa591d49f26da50a5ed60d0d9836a3675b84c47bf4c185da2d8f229fbf924ba3f82a0c0ba09393c0d2f9c42ff2e3b89977d2354403ec58b1413803afe761a03464c7a348e2199768dcd370f703330642cef74a1c65811cfa47315e4280b490e56454d7fd42634333c6d9895c5e020461d0a1eb56549cd7ce43bfdd8cd688a901dfb31839d6b164aa4f5dbfafd7ba2d167f62a6484a2e8f2d6f6f3054dd48acb9008e0f90a6709f6033f21ba8afdda8f5e60337b57961b20a1e09d6b4482f710785fde08cbd9c6cfea12fe6d062e12e5701653b79803a9cf9495ab03414edec6582a7ca9ce934e58e4f77839698874b19652124048f7567785462a88e7db3f9f983a4e18fadb2037634e6f3689648e58087c2a0f73a52d01d8306a227a159e4907562750f1414c3e173101acc0ce9f36fd522504010e3a619518d50f15dff649e701286264185eebd11ecca1216a1a622f96b285e008429eda23113d3726c899713062037bc451860c02431cdeead304d9b3a0ef99104b414d4a26a48b166b7da45e29132278c780d575eb6a4d1ba8de11cd414589d62697afe900e1e18e2fafae291f22c9b246002ddd6948496e7754a9b8545f4982f3f0f6bdf7e42d3a429763d0e46f954a8cbb327de56ab0be6f49f00242ce8c8ec4b436fbf6928e60745158a264ddaca6ae9e31015fc07042c73e30176a64dc7b18d921f0269fe245102e86bb9d386fde00c04d507af7f670f9197ea3650e09f2715413c9a0da934373361f8226609ba82e3035e6b962aa59d0f3a3023227e8f0ff6f48d422d6be31d0d4409404d3860cb41b99744f2f8db59d36d056711bb6e5acb903646102e1f90b13928686beab1b3ee9bf33bc5b2d0ea0c280f330b225133e7796eac346b6bd8178c6a03e0d50e23305286cf06d33d9dab09788e879afcf3ee840c4b1f230a12f3292fa3f3399a7fb26335432152fc0839b7dcb405cd1a4fa3b048915b7a8a1a06c5b5259658890e1503dbe50474eca242d4e1df01c0abbdac52c7ac52d6596c9c0c05f2c242d05d0db6827c368dc09efd193db6909c9c2cb9935732233f50a016ab2bc35590daf239337baf30f33ffa12260b4079c56359a48f727da90344d54bba30e6d422a0f3969f1743fa8154cf72616a7f37f05b2dc9073539e6b9242736bbf50b8fb108caf72eb2c0a1e5f730148cfb2fd2553fc18c75ef18937aae4b55a0b3b27c4bfdcf609fc5753e5620cdef12d98c6fbbf7443b8768cd910c004b0af499c7e8b231de6ff5706f553622584633766a74eb3e1215d340dcda91576e3b2f6384a9198ac346244733f47ca15b49a0d20ec97abb8429c093a1932d63ebbc5cfd21535c3b0f60e54be499dbbc52e35c04647ecf445f122b4a010980f597646f2bc053b1b642f69c1fdc7fdd28997e63bcc78134cb42fc3a503a1d6acef2df0a56df46266db635aa066bbae91441d140a3c55301645f68b934ddf393da74284d2a06caa8393efbad601fb391d104fea57f98902cc85fae52bad04af52a8e1eb7b324ff33005278f5b2437823499380ab4b9517ff2d537bb9195f28d7fdd1cf5e4fb803fdeb2f24461348533cf072fdbe236e4078f7a519f5470255252b171b62d262c745eb1fd534c243048e551db6f89eaf30fd15eb43c77fc941439b656016787911a74d8be70da5bce927966862ae922336ead572a49e2373243f2baebf36f2ef63d3e8aaf039bfb468079e7fc816a1c99ea79c1afc0ef3dba3b9dafe34f333e088a3f2dca71730297be271a49a1c7ff7e5bc19606dadea0647817d34b0d962474410034742d47ba1586adb44b844a8550e1c7bf306cf5ac3b450fc5d3c08ddf99c1fbb126852e5adddb58c66ca4ce3e7e71cfe57f33433a2d669f2d34c93b72365d0a313b6c137a387c82858600e6fec70eec989cdadf6c796fe8c9e04e6de1955e0f7dac174d64967c52d51451fac2f8850a296e14964be3ea773797ca6aa53eee9668b245b62de2ae5f2382b8610915977a642617037905351a122f571278f0c8d1f80b0c1d040f3757491f6262dc96d3ef097d8cae80c8fbf99c25b976ca5674510d40eaa2cb0ac6dedee7c45dd97d080e7cf69431ce5681af59a0a045dd8c409894fe21df21ac60502857df264498f7fa0e4da7d26c3bb2607283ebc02d253918db73f65d09853d45c2f802782456d8931650e01875bf2d41152c7afaac6592c3aefd598a4edcec17aa027d8a6d7e17d2b40dc7191fa5d78cb73fe6645aaa96f1739bb86b7aae41dd904be866f6832545a7ae62aa62fc3138e00e064b488bf03280abb4db77158414032e7ff8b3bb8a92027b6306ca598654a121750c691409ea931e01f1b4959d9c01e7d5c4c896c43fd8b5a634b1805a5e87db8f06eeb113c7f915a36801054b5cff975db77fe803d9da04ca91a8292e43f21293bb0dce7e88a77caff5a80681d2fe5a4afb86883392ee6e1bd2c463d48424ae121969cd6aa56b9cac816d2766ce7c7baac7b2590b3d03c422e196b9fd6f01765acce08c2f8e841255c18278eca897ae6a858b3d349c8ae8051be18215f5d1bcfaf150b6d62c241cc8bb145d324e3987b1bd52e8a3ff7fde29ca8fe2cf4283972dbaa09a7a75f93ba28954ced1dff10a48399ae2529d6a1033438f4df0b4040e2818a531356537fbdb99c31f64f36d9e88fdc8000553e75dbb66410f5bfb8d45dbb71a329fc649931193dd43cee8df420a73323646a12250b9bff64c1f38e950c49d1cf2efb9162c29f46937328085f15377df9c2255677395ece16ff70df0c699810b201372eee9cb43e33526c59154472fb7a1935959969b2f70fcee7262a3f3d3a947429459f96ab92eee2612fc4730fcce74c0c506f592dddfa5907e429f3afb6f750cea4b3d1391569268ddb8f94f8363208f0ba1e4a5b89cddccce3388af68dca969ed3d7aa3484892c9fa93c8cb868c5fd45bb253af7c33a8187878e1fcffa44d8ec90e15d2a8d5e0b0ad6f020de352f985cf782fb535b27c1ff51fd6750feee831640f83e8f0c21b41a35e3400f6b77ba71ac05d396d141642169795d84eddcb67965f49fa742774670ee2e4e1445cf8e5aee7053f7dbcf3438bf89551b8b526a14cc479e8b67e1a099a1d02021a613be78134a020e492ba6104b9663391dfbec05d3203fafe3cf86fbc30fbf0d11604a935716b5a1cad36c620b3cc90db7ef151eed9e7159c761b6ed5bf853c4aa5bbada65f16e0ee5a06cd348eaf4f0d10afdca72409fcec8027553f8ad9c2add096cfeb17e374090459959160dd027a298272a35cfab016151bbf16e4caf80368d84f61fa6c5880e963c27adae99e61f5846fafc169949c3f2b14c6be0d2bf58f211433529c6692567777c4ce3cbb548829ad44f960d9294c09491392525623296d1b0c22ac4426c3c1f6f2bc4ce83f80184e96dcf1f64df06ed345e5e40791fb3a6cde8643acf55fd068beb4822cc3e18b26539f6459e635edacb3bfc0d139c442a9e87395ffc6e37bff534bfc2fa27ea0a820209776a1290de6b8c1e1d304acc861eff7b489ec981bfda196efccfd2ff8c80cd9eafdffd0016ae97f3f240d23637fa54fee1472eebc9f0e4101b6c6477a0a16b1b552bee944da9efa67393e3d83b9fe8dd9cce0b3bac38a39365828d6e6e349fa7e75be43596c149d5a41df6d638cecc8148ae22ce13c6fb8b0ef868db3c61b8e5fcfbe857d2958390cbb6926fcfbf623f51ef368e737e591836b340da734041f0e7b53c039d4eaf089d2ef58e5caa04ff93c99e54498887e21456de0242bee57ecd65e5d48a24bb933ca5f47994820b3a082f609d16b173b45893ba2a6377aa83fcea1d909b5ec21bf8d325eb8662d65e66e16a9151ec0dbddeb0aa7f7a45eeedc9476c31841d6cd0a06adb369283e0ca148dce9280b8783ab90243d5d5bc2c1b8a9570237b34cd39cc4ffaae55432d1f06dccce1d68f4c9a6d6ef4883e51e309e6660066f95d8efb13fa56720ca64ce4befd95c8e6125fdac96ec8f99658a6c49eacf061118cd5468b7c2c03b98693dd3bd42d3e1e0689f693a0cabdbcc8716dd40c46eb8efb36e4d375ce9c67ad968f2e8ee614a81c014205d6bc5366adc361f58ca412d2ba872b2e32f3278626871c5b239585b8d5ccc4f201ebae490e45f75cde28ebf534b57c61fdd012b0e707269bf5b74fe7188e3cb125f1034062d210b5946551b48c52f5c17fa227bd27ef4b8d196f95077e7eafc7fd587b598c19ba2917b1d55a365c8fb16084efc6366c1f08742d36fa77ac99f19f113f0b63577b268fd4b5983cd7141776c2b74002acf15d65fe5c299307d4e94db869b087a710fc482e0c8f54cde84e3a6f6a11e7d18c112ecdacc1b15186254cd04189e26ee5898f19ffbfc156c62f7c9e8841de1308e36379c45cd04b0fc2ede7f1eea71b9e79d62d441aba3ebd01aa16223315861cdac9bf46add94521a625a035b8e1ac6fea7fe9dda68bad5758e08a49f1aa94107d3a3c6639184d38d8cf7687547a943f494d1ceaf11bc921be958374a5018ff876705fd821beea9eb76da1ef8eb14a5192534550417cfff8f4440879926fcc2bce95ba5fd653151329fff53df0b29b27e94a89ea57d49bbe3ea9b006ae7c51a309f8f98c357b8c9b1379f525c0d74e9a0bbe00f3829737f18202dcba84edbe8b5027c5dc76d29216da5d4d0b1080e2ed5ae0b667105ed301bb78b6482cdd26670c70085654634aae7c5dd6b4b87e263c96770203c5d65690d7ad1865bd685f47e011ca59bc9296fb7a44b8ef50155366e57a059366de9b08819367688b1316c60d4e37d49fd019ba6cf7cff15492e2ed97421548943fc660cd6b0086792b1589302d86f4c407192edcab136a1cd5d36f530c136b4071abe10da5a67e614317554f1d2f2532f35a3a6a68a324875f390b92afeebb9c58193ca63cd109abfa6179cbf422d54e069c1c872fd74601178d300ba0c3586bcc1f4e4ffc1e18ea4c2e5b26181e9a9f4706ea8be76f9ad691356a34e4746684f00b40429a0ca56eb8c6747dea32cf318df100713ad5c445ec84bbfa696254bac3d284d71eef9efd5ef90bd2e4c3aaa5531e7303da69049a98ad99cb03390f8e25f9ad592c85077b143c9e753cd65b2b10c53628c6a5dd9ad53b46f5064f8008135887e9b552a7cb14041458a8c6d02169f25a37aab0235c8e525caa1b92ee5d6485761d6cd62a306169554b8372926fc958b94443f3ee82421b9c07d3dd12bdbb3b329a8e948b858a51df61e88516a56b06726a87385cd5745bbcfa6efc93be8e9eafd61ffac38b5d36048cba38d538b462c568931bcac536f3cce23430199f02dcf904512c23d8b091ff622a9db2b60ddf87db572aa2d65447741ba71f3e3300dc4920134bbe59804b1b1a1566dfaf53f101e48e315e3d5c56b4aa3b0e9d8cf2cba3e71865ebe96f7c192a0cac8c546de6a0f19d93fad65a3581ec4e8d1baa34675a56cefac0c16e21ee5a59cf8391c193ca6bf62d27a5513c52be9998309d00644d86ba336abe1a47abd042a5ed2c2a9e62c17f1ce3952abb812b0b951dad906396042f82e73377eb12fd5a514801f85db0cfa12a909af846dc5619428b2f545adc60c75d5637ce71c273b0ca10a20cfad95ac480d80ee9862c675c13f403ef735734f7d6748c8e909c84334dddd222ebb90d9820499632fa243f9a1fd1e5296027054403deb20170584d301eedd62aa8ec760fc1179c293500c13a8d464fa731838fef0ac5f5e89223df72fff3cabc082443f93590468e0eb833d13170394752b7a3861b1d6a4af1621b178b67d6222a67f6d4d21650e308f4052dec6f25e44cea996947d6ad3cea5d3b4899fc3832161af874a71e94eb91693ad992f49c459e34c96efaec2bcc0a7075877ec7d6b2c9d1d90b668877cdf6d69d810fbf8b3fb32942be995a39bc77bd340ec5ba90c773c3b352764801e57a84a3ee0411fe8c732aafd12543b102fe63454095ece55e828324684803947fa155ce71d54c37f891e5945519c9d543d80058a684c24c2d772f7e31a542e5a2fad2f51f6f5b76b30bb63c0b29221e0b8dfa3282637577926bdf97c58533f544a3b3c57a94dbd6c003014f59512176011f7e5b25ea4a27bf83eae5039b4ac5f35c6f55f731ddb4c6fec6ae3cfd1ad9081669ee019a13f7f8f3ce3ec665a4b470934465e07d4db024027208a176ce6eff2d22013cdae0138ec60d3cf37ec6a39f3a82916de3110ced5f428628eac59b07ed5b7554dbb3d8dad676574ad44858e841211956c55b1eb972cdfd500ec298004b59a7542ff8b367afd3c3b0b4a7ec03e6aa975a438c58d0d6ada0d21ad3290c5ab0e1b1ec55e74528d04180fcc681f5140b18d8eb31a28cfac843d2c3d83efeca49c2a4e67a7b82b5ba9679f06341e46973be0f07ed3cf037ef2bfb040d8345b7ba482d84f19f8c1550e75b44604224e22ca67d3209955a62fa76201c6713713c7e733b98e1e33eb843ecd199aef1c15252e911d1c706ec0785f2267904797dd3dc175d4db920de4dd3fa6a249103b3098f775c694f4d360bbef3f581d536268963c0e85c0714d4494f80ed837a955213bc185cb8e6762cca77f9627898c1153699145b7ee43b3b7de055ab8242eed86abd10c349ac301fb8f9dbd103177101ea986ab2bfa9802bccf0890893b15b92883bde7279f58d52d252dc0509ccc0326482df22f5d8008f175c10325aaeb0630f13c305278c2bc3b3d7c861ef805b22da9d473646f5ae59b1d03646a8de653fd2ebb7da2f037c731da8b47c5f8219770162ccb36fbae0a1165b6b6e1e7daad9b542b659ffd6b662508accda49731de3376fa7273d7ae72171358090992450a3633f535ab586c9b2282b5f7c7cf87dd1810c54f21587631757ada8d80a45426e349f010d333af7d2d486aa1b678336d0eeb1b48bdb01ba0c7099e31de8f03623ac0c8314e8bbf35b6142a2cb497b85a58eb976edc5bc918575671f953c5c4da3f4234a24970047449fc3b68484c7a24a27dca1af29503888de5d83bf83234f15d0dd0688f67c37b77a88465d135e5e66d78f5495aa8a813571a24dea54aa71e4007d2309bbf976f9bfb8e6932ec559a59039239efa5c45e53ba8a7ed541ed449bd9d46fee55c8525862b7cf4f2354e07020ebb464a4bda4a2ed843c72fc6e1f7e2d139a9f9864812726ba2f98e2a5cd568f3a88f4bdae6518a6c613213e3b34852ab6816bf804a1ab9c96a1042fe0b8c4335e8e11d690989cbd3bf987bbfdf69a9250cf6357525a546c8f3d1202b0d24144a6a346d4d418935e033bcec8dd7707b332c1d7825f4a67c2ba64ca70126da76895a3841d238df5554ebac3f386d786350b3b48411ea3978809d73d210f95d29be31d2a91f48311ea657286481ad7a0ef1d400d5aec7c520c590a71ba3567cb45f012d04413c9e977d89024eb4429b308c7f99750a1eba30dd22ed7e3f3d2bd4f97dc3eaeb1dc999c4bca77c2e1578394822e5b258c7939939e05ce6824d1e6944403daf786edd6636627b78328ef82e0b30a49d720865ebb37e81a8516808396be9611372f54b7c731af00c981d6bcd0745a0ddec3cf83f214c26fb5082d79a5f8064b8408cfbabfb36a17c4e8463b5f9c88d9ed0738564b0d6f90976ddfc8cf2555ce92d358cb373c65e2c76704e3925648bfaf4086114e51ea0c92d50b4cf75b50607e27d24c81276666a8cad52ea1c2cf2803d483bab3b91ba2036f81de22835930b55c810f3427df2ff64b2f933e0b8d2deda8c9a5246a2cf75e9b67102eba2c380e99589fdc2ae24ea95e416a9bc4ee8b3c8a6fdc60b5dd60c63d538aefa221e631d96061c5c984c5e865c05177b51caa710a9146cb29cbdacca2d21051977d6b2005212c7e8bb2c4c868948925ee6cd2b015b0a59a64166be7ebcd8e9c96fb13d37cd97d695936c5083395fe1d1d51c5861122bed04a6eaf01b89c560f178c0f7657c67372a5ef307f8dcfe7af3ccfe0f2e82effad4e8e47b096b6ebc153e62b65067763d407bacbe723c03392b9b4d7d116d2642f313722bf7682ce000fde5dcbfe045278f0a9eafd5aab449acdcc391716e6ec6a5090c7be641db5a3855e83dfe86ea45e19ae87107cd0235ede8295cacde9e74c57e03c1843a42421a600e8eee5609cd3271da2f830f2e05d74296b7f27595f5fc7de110e726d0d94bf7c559f3d2b9511405fea7cc6a01bac1a1a155d74cedc06dc12cdeac20e4e3bebf6ecb8f447630e6a447b2648e9c19c73edc3ee5e976ac5e7b4276002c0b9a4a6cd7c11c5654d79f49fd6739989118c77c48dcfb86dbc414fa23254ce04c12d329adf0f14fd6f523c4bad22f8313c39ef77de7219921a9c7603fe7f089b66dccff424640fd05a8c471d153bd98e31dea2a84f0a8452d6904424b90d3c7245abbeba18eba4326ec0fa6aed009f12108ac421dfdc93b9cf2a7a168f0fbf79241ff568a9ca99c3f5a7fc522678ce274c67119c0332e8564473f32c1c5a8b68ea8b42db181b2d3bc0e2e31e916b09a40f29346b5bfce003be07dfd1c70c8ab87735b9870dd623f5eda69405a7f3dbf0dec8272d94d1ba9ddcde2983977fe461f4ab5947907b67f2425ad5e05d52a1011644953be65d3d610a236ccf033209ba2a72e7f8fa1752b0aa6ae963de88f41369da3c53fa1acf6109bb2f1d2ff70c679e96aba018338d8f3e4140689d2bc243a13b9271ef50a0f16b17052d94c637aa5e6ee258decdad361cb3d74e72ed12ca71062843b989dcbcd4a0778297a054e7ebc35115a30ce134bf070b301f0f851a43244ae3294eb7ebbb8ce63eac08f355a2de4348a3c27d0603af0facae9ac2af341dc7f1ebc9e064e52ea2247eb6aebc3a9c381094cb0897f034c1ae0b75e3466a6512267c65b9baf12b5d2e8acbbc7a7952ffccda5e29d61ce4a9be800c53f4fbd168c290271ea0b3b73c8b3609d73200380023e04b1b5e10ed22ebd69eea6df007cff9a459873cc92bd79da081f0a61ad2bee46f7f653b8580889fbc542d93ac7eba516a54b5b41b9b2d143c5771e6fc9469f2a9561a606212a84796a1b173697194d633377b2c3ef7a131b77a3f3574ce83c620b693ccd217995672f67deb712146c07baf4cf30cd6e1b9c6534191239aad52b3cba1aacdeb2f7717f52e36167ac08f7498311df89b43aadbbc337fbae94d54bc8ea2b30c4c8913b2832781deaf9a32a60d386448a7280dc11de12e5b58664d1fe05605e78c8806277fbce2929abf4240bf8617c21d791bc916b0e2bc4dd6fa90d7b259f15e12c03cdf25c8d3416d4087f91ca3c8fc3cc27b7bea2d3f2b9f0bed2f6a3f9807dbe8b734ae8030813c64105eced99387a5cf1197c1f</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">请输入密码</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    
    <categories>
      
      <category>数据中台</category>
      
    </categories>
    
    
    <tags>
      
      <tag>数据中台</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>数据中台-06_数据模型无法复用，归根结底还是设计问题</title>
    <link href="/posts/2022/05/f2896995.html"/>
    <url>/posts/2022/05/f2896995.html</url>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="df6981a9bfce4dce2b6d35a0f8d0214e36c60406ca0ad3fc2b829a199d4350a4">4e4fc70cc91fd42566446082a751780fd5618d041572b8bed7c41bda7a5fe16038be3debec314ec22c9c045460029955816361d8531f18a4a27a471f941597295a65b4054b81b46b1b6d71d03c9c085793848ccc7869f739de75739d41099e2a40b3b8c2a2cef6a7fbe31f9f2d51f63e5fa60cf6b00cb33b18dd68ab0217cd6d2a033380c2ea192212a969a108f1bdcc5b4bf65e1af25e70d01dfd5205dbe2b12dacffd33cc557c55f8ce76bf1373c8c64bed90a053633ae91eb66bc28cd0c7c80f11acae0ef23322635a6276e3b739454c312a8d515ca9ca95d70c9d5efd5b0f203aa07e068cefe17604e59f33c0547bf1be8272540fa17728d0bbc2c82bd6b6579c2ba4791319206c1f388588d304914ddefa0ba1af539ed27053625c7522ec100dc884ab956a7d760aef20dff41ecb8f31087c4258aba080e61bf1177cb657f961a71b41a664fdd4a316cdd5792162c913893fdf32f0db543e665992f02dc933c169b02d387964d28b4e3775c9381b661d1fca2501284b039cef9e542e03d684f452a7558e805cc7404dbb752a785e4253b3869a234b537df97057e8609275447fb2d763223e766a780ff73df87e0fdd53a25cc4aa80d4c6918ddfa0e82937703ce75e768a49ef62dc2ef80add77e5bf491064202f6a2aedf68d98a2e75b79357969e6018acb93b5308958356600c442e8d35db1e07ad90d30bedffd71ed005e296dcc627357ba283b46adc0fe2205351102c2f35807e20bc847d0e403d6157b39ab6769924786af47994501f43324abdfec956954c521b2cb8fc49ab54b56f711c8e61fb91448e538de41aec132c1b8a860f22d404a1cdddb93d2710f9da2e90dfa6b69aa630e6f56bad0377b3f830c40bb20a7808817c9290f0bec652ddb7220619d38362171fcdcdc87829a24a4cdf5eab67a815f90a3dd481185f1bf8b57fff321bbfba1f3a3dd327be06db86ffe3d4c9a3db5900e42dc5d62b6dd649e4a72f1aae038cdfd9179b9a0ff0b7196d8ef738ee7452cf0afa0b43c79622e1ef3575b012c1cd19ee0113a87cc68264a5ffafa40e9e4ee0aff423fb9994494af199da452e8ea91977c1de38e45350f61f413e8d216324f85e792a82b6eecf09335a060a831313ae6df6591ace09161ecbf799a8e7f4b68519cbc3f428cdcc1253d87dd99904b94335099b7f935ff3affe505faf32ad89808fc64f5209496e88a5a334110bea83ca689edcb07718e41d63cb8b2da68d17a92079761ff7a1863c657771e80763a0cfd43155f8a2c1968fe8db73591a31fdaf3db1b90e99eae6bdb8d3f642e4f29bf1a25a32f0c8d9e63c16688cd9018dded12a54d88695a889de81f4f394f22439482d06789158fb7651e32f8a1aaf30525ae7e0f8deac67230f0befda84adfe1819a60c4a60e8b18efdd6bda186e23ed6a96387fa0b9a7a299df5285cb1e2ca0a06cfdd20e3b9b6d6f91a6d9a2fb2125a4371ebff6ad5e05207b00eae0cb3fa1eeab24f8a86f4c8c3741cb078cb48305a10a27edbc76a5bfac88e4fe70bd07dd48d3372e6f8c45be36b63268705099dddd1d15feeaf66e819aac3d80876a8f853c2b9f049280d1fea28ae2669e15052b671b607692c141802b73d254c9fc6014a92fe5b81571346e07fcca5fb0448abfe79e3f8d214432148c1aed598520eab1d5bae009046c11d837617937e801264e07d9d113cfb84678b34a626db0330b7000bcef00236ed51927532d4da5023c01cad859ffc6124835860356974f939559e6099e4718233df17b18e707ebc598fb86a74bb2c6c22f4e2c4bba1541fc6926e8ef0cbb3fab934c242f944d94874f1ec36e9bc54d8c6171e8c277926c570cdd47065ee26333f1f91ecf4e5b292d24398b4c713a680544401974d141c4979450bfd1a2f32e9f918a391037ddc4e84b435f84a7bc1414726c56493745dfd8f708a989721cb9f47ce98042d5162fac58cbeeccc6205f67a396f7600b2e6280188aa59a84c046a438a0047c56b020eb6b1dae6b16b472dd03b576090f6896ba1ab3820c70da91d8036b125d0979f469c667d1a4e0e59492203be872cb99584d11b7c89a901295ac14c5dfcaf73e2d935f95f67c35ca2f1975410c3d56d8a0897361f30a7a53abeaf61db8b1803165ebf6f4757c59fc928c2de22cedb7616f194dbdf1f1474bc28976c3555c25c5b7d95c772b97d10da74ccdcf794557205ac955daab7aba2136bfef9878fc85c1300ddb87e03c35f6cb0b5c16e65b9cea64e0a86f977be6176804cca74e4aacbf0524e19a95dead18b4b4a06e337b8a5fb2d24d7cac5996745232ae5d899dd39ec2319b792aca508e1d09e8afa078e479b4aa489f34ece3e1bc069639816c5c88e0eee75836559b4de6c0b151b2812ead13f60c849f3ce2549392d2038e4f15f78e17824f12cf5c5bd4b0c9139197328a58b43e916697629100f042a59982c145612169bd74d68c45b1de70791c71a7724b40c492b32974cefcfef3a2f389b5bc3fd2ed2e8b6f2ef9b897393450447843b1c8947d750f4c63f491c96e89741e6b887d5a519fa6081f2db5ecf11392bda527c8b2359b258138e697302293264aee676830044eedeccdb24ed3263c8e9c85e839f7e9eff727ef84dde81fd80fce53935fcbe5cfa0517f8c01c4979d2af5327c24ebb6d83cf32e85cc92d5e87d9b0696086d7dee7b3285369b442da7deabdf1273d2908c863afd186dea7dccdd34e5c6dc80d6b6150d3ea45dc52793395102fbb0776dac98833f87229fec43d3070fe798167d587ce05c9984e6917f1854ab199e8fb8cdfedbe7793548778fedf5dab08c8aa28aa168332d0d46f208a779c34e2bc56b74e07c61e306ef50f480b49ef3f6775daa9c6bade9842de6edcc344343e586c2e577f9ac0be972333ac24c8888f13e0bb12416befbd8ccebeb65b822bbb7b0dae5d9fa79e5e6ead3828943ccd3c2ea045488b9586334795428036747c7605d8918b23a7d36a23ee30a4ad6976a4977a828607f294455bbbdb02dc1c9ef65372c719a594dd7605f00c9d921abc6e6725b2e72d38c3e486bcb41048576ba406c0e7a892735e88e9f9faf503071c7ab07421b8bc356705e74dd80d26d4c478aff0334cace50c934ca36f487a064d651d195434aeb5deeabbeae0d22fb107106b5bb52a773181b45fdbb63ddd2248680a12cc4bd1983f764d90e4d142cf33f1a42a5237ef6828e373232b540be130d13b8ce30db6995040d59909a892964a1734419378b8f21e7496a9e7d3346436c75912ad8747e8ac10c9c925e434a88ade82737d10509ea895ae66312db99513e7197555f90e9ff8742c757058b8dc7564bdbac8147fc91038479e1cca95f8677c2e25544c7667ae67a8c4d95565a8ea1fa543bcdf789de46a209400aee313d829ab0569ca9f849cfe0f8b60a6ced629ca89a10558157e93a944295f722c19c7bf74cf8c26dbd49abad18a4aedae50f05b7d7e33362968b3b428542898a75c8e94a7cf6c4d97d0eb3e8d083f414a03b9ea64685d8d4edfa92f30d6651cbb7ca68852c825e5ef6fef1212c289cca91af8302062681bdd62d5cf367a94b0734f93c698f32299036261185f989ba6403bc75835091e620e95d239d7719a3e77d87a0ededcd48ce983ff7cbb996b30be7cc101854d33212aa4aab5900b956b81590a39abb6c0971aa59a025bf7adfc04e3506b2c4889c6a758564e0b45629ed41b7531260ee3be74472c4f390cf7980f486f73db5a1e1bfb67705e2225dde8beb1e18cccc940cf952dd7ad3ed5e4b228ecb3ce3fdf18e9bf0aff91b168dc27d7eff764d7819f7f82531b961369a4319c876bcddc1514d5f2bfb61b3d88ac40525f2e32305ed9fd2e6975c4dfbe0a86cee4690347dd1e521a940efc5e409cbc07eb59731fb5ab3270a650b0c4bbef492553cdbebb72613f2ed6c0b828ffe599123db59f530066f3fe15580462a8def19dc4097ed81548a33b7039b8b8f6cbc708ccc7ad2c7a14b21105e48fdaa12e97acadee1969afc94d6a1522234123f292e0342088c8ef2f10235320cf04ce6fd2910ca9477ad52adff794e18ce69fdf9e1928809bbc46b1fdae5c0d4828e0004347d3a5c4ceb1a049d98cf4d9f0a5edfe3ca45d6fb96d4cb9af02c821b7514ea45760278e5dc217e904489d16318620535754cb959ba6cc939f1385024f4ea5a0a456544167a0fc8cb9cd7128483f05c743657525212ca96db5d0295dc4fbf601081156a5d1924a16efee54848f40914cc2207387165f8ed82826f77ecb1880cd5862502013ef95deb93160f69f288da3467156230e0971f4a93ee0d529e83f9b4f37f88120b7bd4c7d97550c4a4dffb712c7917d5758e7f03a394b1ae4585a5e242a6f363262bce4d7ce90f593a71e23127bb8aa8de5dc89fe0de767a5c9656421b1f14cb6d7abc8b9467e5ec16421c8820f2f37e63d487bf87f4f195cc3f19207224e13a9d346be2631b534ff4fa255451fab26ffb8eb1e0ba10bea5c6dd6380df8235c4d7e0cb8222730251a3b6746c74d1aaf707167ea4b4712a43bc5016a4ab603c2bc5a1b1fbcd6b427c4fba8c63b102faa42b963de7f5a1a1e9dd85d8c6def3209f26f8d9fcac924b7a127bf591f4d8a19f0eda53dfd9c3de3130802b253edb5d1c6bcdbed1bc7be23159432565db18f04eceb3fea8f72ead0502aed103d4a5877338b18f0b0063e77ef2f823e286d1f43af8c440b30a26ddedc08bebd05d86af68057bc3db6ebe8cc4e5bc83a11b26f178d51b5ee3f20517f121c447e6c27f1857bc8507c0195bdaa24e865605f63d2fef5343ec90e598af65af900dc28114226251c09cccb050a81966ff6a61cd65a7a6c323315cbc906d5abe5ea4a36f50e819bdb42ff4aabb5ac5f9c8fd0f9299ad5d5a3bfa3802936c8d28d3bf82b8e18e4928bbd3499bf52cea17fa09d2761966cb79f730c523729d6355f9d105bf379149aa1a69659c67c3d3bf6c0191fdcdb17d0ba1ede7821ca2800110b141f4e40dc57b1752c33e646b5a7ef31031f03ce6322449b574330024689d97980f9c3882fd348166e25a0e6865aca2befcc5bfcc263b5b5a68595c363aaecf8ad87a2c66e79d90df09dc79c34af08a7ac21d0f1efb86e5bbbaf21d11724a0c0ba3d0a3ef3a75eb0ca520082e836096494793c1472bae930f845cc6a63e6a14c78ca7cb15e1233e273b4f5334968f0c740256b0142e26c01132564fb7f34556a90a832f3cb4f8128b89d5bbb2ce102cc9b223cab2fff5deefcefd69678fb5f075419170e74142106aa41bc8a780a87d6713df37904dfed5e8ca31615af4929176ae4d4bd045ba71a9c40aee05eaba58e8b27c2b39c38fcd8a522aad97398f36b4f23f6563cd2a2cdbd0cc3c3f1733abc6ddc0bacd028560ce99726cfbbee76d3123ca73e61c67ff7a58cc8829f62b11b736d994eb7ded346d8f74588595384a2b5889d7bfafd01bc69180e5aceb4ec2a58d794a546628fcf67b012df919d2bc85ae128a96c3ac00c8ad7da644ba24a46a63a599620d60cb30dc85708ae70d24e8cb76c239a1cdee3146e83930e0ce9d26dc26e203ab37e40b775565da0abb1756c9f32f6c6a5e4623b29b82f30f2e0ac34b0dd60fedad6cc23a99a42a196cc5d34de15f8157ead134b7ae814f142a488ea6a4643bb2f7f2d9d46e420a58f61d37fb5ca4994cf085fc55b8023d3ef5a11037c6019e3b195f0a2ef02d19ad5693534cc11c095b4c8ac66dadfc1a9ea0d014443e8645bf472bb042d4b7254dd60f20b7aa6988520547310a34672efbddf1ca57d8eedbe97d6df6e2b88b5f6903d7d4dcb0a02ec10c975e00efada5063d6c9677ab559b5db236edf61314ff25b3f70d532441447a4e2f0f77b66efb3f0392cb12394749ec90f2b00cf2f6c21fa7b43a25bef89c4318ce36caa62d76071c417829fd5d0779dfb4d33deb030a00c576e39a1ed0a1aa5faaf22207c18ca3b1c253645e4c7cf930a6b7de48f4673f59479c15e4436b9b8c048b10af7ca643471f4aefe8494b29bb86d5e6db966680657150da5b2fb0961a1522163610c4d35cee2207c97edaad02bfb89878b846a88843df2ff1296a019da7ef4f259ec6197bc4149c6535f89acd23828286d4744a898c913f94300e3f19c967b1f3d6ced4dfcdc85d52cc421b583d016e92fc7b0defff91baff2ceab6d0165f99c599a51d557b05262ff024ae5c932a6ba4219d3318436b63fe81f49c7337d1cc08d0be64bee3a8021eff6eb3c4e6c92d6cc9d61761e25d28c592690dacaec095a218a0a3afbdf246d640ea61f27767564b0e7c6f3bad9c372f42b4b7f197fa3223d2472166c99cc1986cd0ac8972f4ac59f4d25c7102de70432e3fe2e55bb5bce5c79f337cda53b435796c61cf6c341bbd4bea5ed607b78dc39aa7dee3511d732480a492e26ae1c3820bdcc06ed1dd534a3cc1a48733c2c1b6c4453b8b93abaaecc40af16c785b97c7ec9a998ceba296683304088065e4787db5e6954be359387394bddd35ec0dbd26c519c8d96ebf6d76177d3df1abd23283dacb9d77b63b4c6379be6a991cff95945566eb62c9a2398aa5728edaa73f784a6bb37ed84d3f539d35a736cff4011986ef07fb03e6e5670b5ef9431892ec2d124c34edfaf465c36e98947e55a8d750469a1587590dfa5d79aa50aa93e4c25a5f0e6d45bccdb700a784a080689b903d88991c69e26f1616c5c9190642fa38b6740f8599d2d1c01940dc696f51a7ae7413433b0c55f58b98476d4d34ff867a7b849d44c5e0f98714b543072cb0d2fcddbe7c4b94e70dfb66d39079c2e0133b950f619daab77aa2cc6e7166d9039829d98c1612f3dcbbb0a0ae37d11621c7e1b727c18a30d3c9c7e4ef06636e2fbc4b2bcdc4f720aa7ec1b584c431d93e697be90cda1d2929b4210fdb7daa0a9b93366c3b50739948f48fb9e3d231651471dc70de1b56a786285dc80c11462d56e89b0f23183ae3e62bb2808a8d252012b888d3146cb7984a69a035a993c0cca745c004edcee2dc2604c999a85e771c1a259fd588b04339eb9c0d3cce77f39455d792a6e225b2ba4d2aa84958f69c99ddf82309fca2752c34b099fc71cdcf7a36dc48d1720084672275e48e963a8c4f738a86e3f3d69f383249dbffa80efa62468ccf2677d0a3bc7d4d630017215321b6a115cab44b2f9f8c7d45f6a775a0654eaa189f06c71372c2ebe5dc81727005ce2779875811046172e2dc309415e4870ed9843821dab0f3021df732eeae0809f8d930a1603827d3040d677adf4a6187cf8a372663391fe86e3f35ff19ba0b922d99d01bfebdc8e5c4a0895424204c2b89024eadac41b94c98f838e58706593019fd4a479632cde21bd58e57cf8d8f9a7e20bd2fca64396b1ef3bfaa1fa8894be07625f8fa5529cc46a81a114cc03e954dfbe5f147d2a6ec602b00d63436073457f4d84f555dfa73a1b015ef82c5c03a405714a0ac39dd9c8b9aaec81bfb7db2ad7a7144887585ce1bd44ee700c17b923bae38d3aba91080836e013a0e567b2e18fa7da58ffb8a5180d6437f01ae7d96e07cf7edd2efef4370d040217e40ff704241dd747679c33f3789bdf6f084185f451136eeb1c7b91c7118ec8b575447564135ef345f01bfefcc1d24fa3cbd41bb92bd59324425ef44714ca14b27e23f03fed23c63c36c13e6ca8568fe9d2a2061dedab1c5addd35b3a681296fb57d4e76e00fb8d1e720b3d0964182976c96ba565d8987be257b94334d85fd94e095fe74319b837868d9ebefb969d30c31277d01c7e64d4b29093327e9911c22dedcd8e1db82650d47c2fb13827c5ce1d869eaa8c89bb95679640fb5351bc7546a2d10c2fb12ec8e65fd594984535726bbec6b0d47dcc99ec8f9efdc6fbe6bbe5930ada1da87b4eeedcf66eb177c44672a7e684aafb7a89db25790b39c78cbd6a28ca940b8026da7eaf253ff5a91c6b2063d1ada0f04381edaf3f1a24bdc7e188e790db3a610ed6e4da6d233eb5f736cb6f071b395af184ba92d9abf8b1e2a620b02cd34d2778d728eff357cb6e4761cd0fd5877c0f45b908dc5dd2272411f6a851c8992103bcb7cbcb1c18d532e20b23d44b38243c14782849d59e0f578930b8cb76f349873847a8c7729921c145b23e4e43adbfdfbd1bd20f08271d8f87e8fae4cbca4a6999af33a20ff00507ae512c7ce3a9e66157a7c3ef64ca958abe22e94142cc7fe68ba0b175da9bbfce4b611e00b637c7b30258e64765ac2ebd61e3cfa63f20fa55e6ef80e8993828944e88c6ee40fbee64de9e75e51017ac4aafbc30e2f5d142185983cc5b97ff64e0f081793c90d8b521b81d5a7adc5e2f45e54050b83424ab5c1ff4dfbd689f62519fb35485497c813a7c4f99046622321fbb93137f6d8cc6477bf11111caa20e72356ce40f87cf46e598d82ee89cb63aaa89b7097a66b62bee156a839582a10a5084dc59e5b3be6107d6b01033a295039f579f1f6fff923104200a5a831c850a80a952debf6a911260ab1d4c206a564c0d46b08333b6b86098bc65df29173a43283372a1cbecc302f16b4f361ef92fca1ec3bfd6f9a90dfa598b41f3d355bab4576489e25d07e4e58ded4132922011efa2990bbaefdf1a3be848d0387a1e8d1a2440bce89ce67d7ddcf43aac804145f09e2c7d43b7cea82c7f7eadbb393d2b97bdc983baf7f002739ab971a65dd42c626890af8c597f8d7c56f42f8f96ca67de7ee94ad5961f389a390b290ba6a168787c18febcc34e785666b9cb1f1f3e2369a13e8f8f065c478d2fa27085cb7a60ff35969f7b97bfadaccf83601479863694fbe4920b859ba26f171caac389d46a901e551a95f93b0c9185f0fd58bec411a1830017589a25a6dc54f96b8678465a7e4567b2d009550c3c23ac6ad2ed3871d637c7fdd64601f409bd134654672e4847cb0e60b18cf45be9d5491c08332750edd18985826e814ce84a62414890104dbf70f5a7b05911b45c4e477b0a47b73bc61f1db37067511bc7ff463cab982103bf9c585ed2260afae3a78a10d1e344dad3b85a7d363d79daefa00713bfc16223900ebdce0b3e996c68de6cce49b4d99cdbdb5792d408cbdee8dadc860f6d8c84ff1fe64fbae2356d37e7fd607053804ad2e1b129825a2f3f32cc7437a03776e21034e37d5d798656f7f558ac3a7fb4177b648a34a00be0b30c7aaaa6bd5c24a1a3a4a034a076c8ec367d0bbf032c99f3f3f25adf1a8880573d829a9f1e07bb3a0c13f6b7a3dc16804e0d98df218e58bb1eda335923bbbf5776c01e541af14ebceb435e3d991b9f88db96467452db79404b723257e9eaca1dafbe75c5ec0107d97535bbf72f10c0362316ffb5341df34777c502483bf75cdb0ab55bf614fc55bf33b2d463ac1095146e019b82474709f53d3638b7e76bb2be739cd504b88dec46e27fcfc7649a49be55514db982f9ad06c10350e9571ec10d460fc7d6a940bbfd570e17e1c3af5a5e730a61c9c54c4949f38bb583f2d00ad3186453e44ac048e2267b9c0edf0f555f1ec2419d2bfa2459d03e691da1fb09b97a0f0e8bc98f038529728360f315ba84b431d7bab5118f3e3aefed9c0bc7d65436db5e7562cd91090988013009c1b0806c5074602864e2b3945050e733bafa17c0df92b3115aea893617d92a845307f1e67db6d39770649338271da35da1b90840ef5c30672fec7622d9047b3154721fc0f9f21f392d2a720a18ff58fae7f863fbefa2c8fc8d4c922a10db0d8059b2b6c7f417d77f0df34fd0f83477deb86abbcc4697d51094fbb5f7903e7d19f4fbf0962119c5f49d124ae8a84b99fc8a853cf1453458eef6f1084312ccc99bd2f36484972540e0937c4cc5b7909627bbef8992498545d695e86b78f564e69624a0e0bafea115521a960f8f44d7bbe0b20d8363bdce406bcd0519aaa4fb27f74d05e804f35ded7cb68befe65a243e2b250ec3b14f5879eaaac2c65503ae198c0ad8b042f366e0840d0955484e86710e63b79847548e329bea9255818dcf925ecdb834ed9976e8ee9bacf0ca238439edf9d557f37483148988a1becc00c7d08d269783e37e16790dcf3d40b4e2d4deef1fa04bc3a5b28919d2fe8573142ca84bcc710ae02b4cd80478040053c8a8e54715cc43138b89d1dc4c1e4c3efd5c245959ab297409a1ed71def3b3769345e3ab54c5097364ba370ba71f7733c2debc213863684004bd75e38ea3ee4d7a832b051c265c8e933c11365d43e588b608acd36d8885a65cef29f7c787385085586a6532810e60f147814cd572bb99c28def0bbe31b37d5e462dff591948d573f8943e582e78be7d24505ef1e415b0f5cc63fc0e34596b5c8bf8ebe2314ea649bb794a34e7f44e704f133749039f46c027bb18ec202d6f587b32296364c4a8df676b4a36e5239ad7affbc1cffacdb0481e6396235043b66064849f2145b31e82df2fc9ac8b3c6a14117ced4a1b8f5179d3907fd729536b0ab2bd6dcb4791fd1286f6297043cd901628cd838f23fb30285faeca050b75befc6aed2989191faf27cf952aedadf145a55ddf10737bc01a7babad1984d619a5fac32f6927eba65c3ebfc860ffd4854c42696fb245e09db082f8fde7e0993127e302064033564fb106daa5e683be97af65661221f7867093678e85705faec327a828aba43e08019400a6cf7b1f8f635192e4a5cfef7b254a297c4f7bacb793ee385c6418f83ed9223ee752475289077dd684c3750a715f7eea004f8df6175fed830bd76636b52648890350b6632b3233f8568fb44ba3a11d51fc330317fe4e102260f427559242c22829e48779ccced52684ac32f139bc80b9b6afa5b79da2c8b90a8ff3633d13bc89cbd57c568386bdeb7c2f3f53688b90fda79dfd8e141643db91f79459a123b3b5df236baeb5bdffde6cacda998f84325bb59874cd9253af3b7c33e8901157d8a871dfd4945bd282f7427d89a2c809520164e93fa6927323558e76e7b3aac1e9600370b69f60dc0b3194f1e9cad60a2832154897bf4d33ed98f193f0b726b102ea5a49389ebaabaf3991567057fc2e55829c2d8a8a666886754e3fa306324d84fff25b5baaced2f601fc993c48be45b8aacf9c70bb02c5bd3f494d378ab9a402086c690c3b40b7f032b9597ff3d9fc5091ba02c5935181bce2a48b7267af248a62378ff2b0c22901541e64cdd5f0e55389326fc0605aaeecd3535b9b4d89b9bf6579f910c943bbd374fda981fa6d619b641d7be4a06832dbccc4fb09e984fcac439773da32c48cda014e7195d665f3b4276c24561ba59ede4596c2b610de07c548ce9047edfa8c15ed700848ac95c689bc1777b76b5e19a7f7c593bc739962a801d3068f13e96a054aa76f85f54403f91788fd9e82168db95609b1eb0adefcd90348956d778a778904e97c46b0ed54bfbe65f153dc94c4686c0711a844c6f4e6c183aa3630debdadf88b9e1cab9eb4a4e9558a8f76c618a9ff07ae761dc75ee65be2f1804bd4dcc0fc20c1f1a27d8d68b195c650ea92079e2c96a9fe41fdf882287695b5a1b9ffdd0685c1067f35fd83230ae65f254c95c149c32feaf8b75289920eb0fb91c8687b07a2da51c8ce47afbc44de8de75cd49c2942a658e07fe4f7e75ae8bd20eef3c114b1497bf351f5ed24662d50ab42382ca8ee7e51562e7b4e6fee6e0b52853d86d583d18b3c5e4e3b1cdbdcf2ec953ee4ea3bbba3a69f56dbfb6da9aaaad06a425125e3ea138c13856c2753d3d81b2cf58730a323aa68dc65924dba0e1d350f46d6aa1fcb48b37e5cc5f8a81dae8357f810b3a4c23e187583aa10ef8eb049ed28f09ffa476535c66e40576db81053790b52739490aae149b75cd42964d667bc93507c9240daa8da6a25d59ebb1af80cd3991f603b8a54d663aec99fc74824c513a772cf9f4355fa0723b262c71e45ab2f81a7d122f51e11bf21d582b7fe09c2319d0173a86517f987aa94f5a93767c627bde70ac402ccefa7795e2de16d2b07f2218f597184f6904164d95979a9b68c2f8f8ccbc55c0c6bc93022f6dc5a3a7c5547d29d550babc5e668c321398e78814aa3e49a0d2f62d4be5e314109913d85858c2648409bb60799bbbdf58e0fae0fe4f985130882d5e2684c4b50cae0b0379603f940e6590b5e52fae024cd5182950124370b70675d7e927162b6476bc18822a4b5c7450c899c347884dae519d2fdd719c1b8bd36253f722870d78ef58e209ed3987f916e3aad04b1ede6a145dca9c4e6b967232275c7f3729db10c3b07303fd6b2357f52912981e3e881ceb4454f1d01536b62d6d4f3de5d68ec0de9e913411313d73c4fa2a4fd02d82debe9c0354a899345e5a534e85af8f0193442b25c3fe6c2b696a77573646e36cbebfdb3fc6c88b79461de9cb5a7d7e1202c4e1196334e8fcf5d17879e30241dd71d733bfcda1c9f81b0c6453499d5ecf9974f462109494ac05158630ebd741b4055cc017a986124800f52dec8dd7e5a8285115a6aea8afa82b6b5b563bac8f7ff4555530ed205f592e5618e6d38189926d2e10201a097e0480fb37a33dfdc015785c755b7317b02b272dc82fa86df211eadfacc0bd9bbb92ce05e53bd9ec7e784203bbc03a9db1fb1d761f8833a919b494da1ce43198153b1305ef8c74ece9427def6ed6dc015f00ba8da88ad21814b0a65bd98c93a80123fc45316c8919a9bde6c60d649d023db6e832a6c2b4a198fa3fa1b394259264a4ee337a35283bf99689004bea709cf49cc75062aa806eb4605c22f428dc2a9cbc7d66016a5b1c2ea8a01d929fd9d06fc88a28f1cddccf7fbfe0aa6a663990064a68fc27d826bc4293d1fbfecf1038e969d940489ee41ea880654260db3ec9a0519005c040577dd327122a45afbc5233ef1f7e0db0289fac336dcfb071d9bf43532606b51744b001f56ab9d61c131e667920a0eee0819de9df03fdd0d89a0c58778f0489c58e479ce4bd5d1fade3e553fae5c069d231794560e965d8285c8ba0ec83810f508000711ceb0980bc31cb525eae50df0a070f9d7f94ffe0fbf6154ba3a62502cf495809ee323976fd8ab836f4e250518e3364e9ffb6305eea51babaaba0169d309b834480e11140d5813fa319d45c546cac2ebfcb5e5acb222bd9de786564b4c81a74f1c2d3a541646f46a6f574ce58e30457149bac2ac507ceaacb508669ed12c729011751c27375ca39fa4f379b8cbecee605577dd68ed625afa436a54eebd55bcf968dc1a979154031b970bc8f1ebced8c9151d9c414fc0c06b04e0f60cb4db1bbeffa915aefce3292ada67e1489a9aa1967247cf8f990e5f311ec95c6f95db3e12da03cf92f7ad235fb53d67fc87c30e1d23461ed24b8596079b67e8418c0d237b099a77bb52afd734a25f52ea36a16229cf4b0136d566d68f325cacc2127bdc36d1dfbb9a879587bc617347ea29024f2ee8973830f07f362dcc6592ff64773d0153ac92b36e42ccffda77b14b69ef4c66971e95a12037a8a6623dd0d41d327ffb494363e6b2d524f1920e662f6a4205ac5048cdef683890fcf35e72209ac806f047c7ffc2ca558f0c0ed0d228cddfc0c90396c6e70513a01c2cb187f47f87b872bba0d4b6cda7eb423e7b87a34015c42bbd3676e8a0525872fb2cc9f5677507a65593eb96d4e252ea20c4eb7940681617d1f960eed67f5ec75af5ba990452d4a745845d206d4224d626fd83a445cb5d67f66887477cf1f77ae3c48f0bfc9a733cab8cf75929171a54b864138a9a9990b22ce940a417115af4c10978c2afb6c4751cf2d97b049cb72eada596a31bfc215ae81b6246fb3551cec02d6281ee99350806682e87a1121cc6891154f4b4a1fc5c536f895ec6746b0ea1584fe8c4e4a349dc3cc8845a3a23a09ece052173f4522f52a8bbfbcc6a890d9aee5ca6b940720999ce872cb45a7b9e41c96c2a0f528d92cc03cc51d40c3340565ce205e0d204fab7db826208ec270ac5ef92a5523e28c938695a0e917fc0c6acdad24c961736b45859284d019b201467226e27105be57f2e631db2b00152aac6356d17d02d9fa2727bc175a40654994a5da200a9cc3ed16779466ff556ca9ea872bd12f093c6864f16bdc1aa97902c21066b881213d12ed15cffd4ef198a644fa3e189dd52ad0e30776ad39962b3dedd34d33064701532ba69a25cd9aeb265f1bb4a03bec52b0a189fffd0109271b828f2f75c1159b0c61ca9f276bfaa3f57c56d5e2ab77e51be1e764752b984119cf9ac9a5535471bac7bbc5141ba5c4b49e8c7a22210618d88bf73e8149435a87a30d5a72c534971698d71834767bd748a5c487ec871a1513ae8cb78d0af87f56577dae5471b0aba193c9c3b6441372aaa915e3bd7cd8f829194f4c015c4c8569d0855027a1730789a3a732e8ed71feb4c9262cbb7d6531b9fddd88b7088e8dd23167b41dc6d4c9711b520b517213ae4e05d380a17184e543bc5a3a5400da91d869ff32f05a19e92e661fbc58a12a383ec2eb5889b49f70eb6b53c95adb29dc0391ef6aae4f289baef41b472c5d710747f839d48c9b46f35ae5b46b19e8992bb90d0108989a076a27ddad2de78ea81ea3255e768971a9bf997f3595d515d12adc0316a099687cad15e8bba60eea615b8b104ad582a2c73d5fb5fc6754078cb6d934c7dfa245cc5f9f45f6eddf25e92bf5a737baadd946c1db98a87b846bd94f733d5fdf9096ebfc48aaf00aa582cc2788f5ce9ae4ec97692621a0773200d4c3cc081e9e62a2a0de2a8102df65dff551177d62d835e2f030dfd5f3997329e29c09c043ed7229d20b011780738f6f301b9b7072dcae135ac5b8e88f74a349c92afd14f478124db76946819975669e414b6826c2e7151ac1232e1f49a4c6cce364e88a4dd29c90c76dd5283ce4fb381d38d7ffb37f027a30fa8b590c25e41dc229687fab2402ecf0228ad015e1711257b94946cef7333063618641dc4bf9364a4bbb0e4188b5a69477d934f0861f326d68a4fbbf38829c8d202e72aa05f142dd6a65c0b8066703d04d32708e5e2e6426290a83c34223f48059fa449760116aeb81a6bcc2c0d8e97c80793b7b628ca20c7a1662a3c821954e50861f2bae02f2493492588cfdd7d9301411268d37e7220d32833e83423d55b3273271092dc642b4087615f044a2c82780964065dd9ca49cc00ef9739d6688c06d235768ba091e75d3030469e9f05b33f87fb576ee1a117abc51c75b8ab27d03033cdcba8c6e2186bd73ed5491644e6281b16ef86b7a09ded4b540776cbcd08f1e64ca1ee2313de339bef74cc56377c65f0e693154f42cf06b0c76b0ec45966a88c3d7bfff20c6feebab6d7146fd4418d3e7d3d6fe943076d140135fa6727f84c8a5beffb8bf3582daf1f70306514e1663aa26cc8b7b4229ed89881c8bd84fe64572b1a69bc22383b16ec355bc92b4fffa29b996c8c4768bab701d716621b8372ead92b325d57083dbcd913686cce5aa363e580adfac4e05f05ee01b69150e4a5b3ab30724afc884cea63eee81750f8a495351ddfb91c08515be86c0d2f73912231f80584362b5bdf558ef9a336d90ea42c50a7a2303a801f00306bae33c5707504dbde6e17a4b3a11d8c016a0c673caf80f4208ec993c4a4356bb6b181fa5bb7714a7d8d0dab8f31be91a8084dc1c1b4f6f5b97104b17732b9094e09405df9d2fd8b10b18423d4dfec19fd9b04198b75636986c8fdea827ebe7ec69d14d118ea5df7e3d925c5744050810de921428af36918cefbbd8136268a0232cd3be5d9b30ae078e097ebc9bd7bab31a03cd4eb3ea5dceb732239fb265814c1a78999d5e936b7e55f9de2ceddb68e1ec381e9d5225e88b05ed1f0d128157901c4463f4f4c62875a97e02650e53ce917d3c67cc30be715b3f26ab6084f26dbf504c1553434b464f30e1df0562873048a391b991ec694b133ade4c71ef133edf9c574e9a3b0b1d4ec7f4823112762c997324f8968811ff0d595e47582352f9499df932420e20d86b24ea06c2e8a383bcce743a74c99f673b37d081a2ef97919fc116b652a0b641315015da3fcb0412af7b44f49c8e813bf9156db4547542cecd4c0ff020075a2eeeba184d3e04998656d7b752319cce7fc7c5b3f8136bdcbed24aeffadfae260fcd17e38b5228434ff47866a55a28b0633591b50433a4210c11e7a794d6a4119799d00710cc76e4d20d833cdbbdb6ec4daedb21c2506889a4a218e76f2da1ab4cf81a77fc0fa75e64548911e5e87b51f056b3235d9e745fe874bc57421159b5e609ac05ee721f7f06eb0369d425f55f875894b3a51da1388f63eb27a52739b1dd402fffde8458abc72cde44e1de6befc952ca4a895f31e2873bdd773c62964dfe632f6c5c976c8cb2b76132ad73df1f5d6b57032163b4d570740ac8deceaf1d3cf80eac1cb068e5f4d459429c79851097219d2ed80827c45bad6fe1efd5be5e738beae3a8f15d143065bbb7198a2a1f93cb189bed3d0106d1074d6f8da4594ef2fc976a4c1c4759eb6891592c66c67824e7056801c3653bf421d683de8e2de676842c45e8605b3e19d6f5067ed993b017d06a1be4c871529d8d5f1dff60814893dd9979e859b4e0dc99b85169423b7cbd6565541bad38692d97bed78d346372051fe9c7bb8e099c083c8a52d0a9cf887f7475f17845fee53329c9d6c2e500f8f4c1c712e170e03b7c931ebb1c74f3b9334737f3437bf7743a39d470796fd39d8b767a32b7a299c4678b2e5ad64e4d8e91fccf64f46bb343bd75866f625911d5bccafed6873d71ef4951bc34500eeea46f912fd3216d99b0ded8f65e0d2a0f2c207abe014305c8c6eff9383f5ac1f37fa24a65f46095b2a323fdea4342bd61b6382c092d168636aa2b34d65c620370ae019a1d5058866d287ded98c9bbc32b56c19e551212bf03cf0815d8451791f97aafb5c78837a7f49e6a8edf6a3400ea983de71d8c6b12d92a471cb2c29904d087da9b73386808a7fa76eb59b988a1358eecedbf2765a15a162886fe6311f27382065734311b7f1f2d21d395e7ca03312f47792bab6685be0b5bca9316d0252124bca2ed7b03a10f2bcdcb165598f7a732154c5ce66afaadacaa11fa8dc0c4859a146b03a450a9ba341a3df84de327777e4d40e8dd7637822a14334aad245eec82c640bf760d4d0ffa2c0d28f8661ce061273d1c7159c740059c5aede9d99f0d9f06bab135a438d90d3cd7e019a9d32d757a24a33138d3c0786e383d9f5cddf2f12f7f9e012ce19fe29652c8de8ac18e2422d7e29c1fba1d5dfbb8f1c033f36a20f7844dbf8c8afe817a864ebfeff6e18bf49b905c363cd35fe62b1bb61af2ae632e9b5a63b644efdd135fe43e9dd5f69d9bbfbe84e0f42dda1186487793ebe87a0486d26dda00dd9f029b686289cdd49a2ac12651169f55f1ab8dbda732a32cc4e4dcfe35314bc0a0a4ad282517a36d916a70351560e92122158ff7b048968fc54eda6b68dade0c36bacf3e1cc872495a5b421ffc0cda205fe9288ba30afa6b8c1a2b2944e4cfd70bcdc38fe8b0361d711d3cde0a8386ee0ba9bd599f1d141d7d85b97cf5fdac65577bec1cd48d57ca39beb686c1ed56ce0e8ee6062967f2bdc611df29f95c6a7da9142e1402fe7ed6d552a228f90d4e447e0c92aec5446ee3b6c3ec4d3a1f2b3a35e5bccdb7d1ff786c01ed2a3fc37bb20dc1b013fe5ca20a257759589ba8731d91362f7626c199f3cf02a5fc0c3ac4aa8734144b8caef45f19689330eb5664ee54f1b716b30be525e527114ff02df38cee3ff387432b71dafca9391f2ec1cedc894b08d21a7fd074ce850ab79763851bd049fd816da865abc8a94ae725e158c56f5a3b2b967f71ba8b856041b7f3771055829cc4e14a507b9996c9ed5ce4cfae9a278c65396ab925fbc053fd142f4f043459c82356e288c34b09476bb1bccb558836d340cd3ee7f3f4c0cbef6405425ff81e4c52e820ba5d814aa5d70cc38a70ea9b5ee3385dfbdbba834d842801f429fc02bb90a84a734638cddb79cf2312e27a7ade4dab20ceea68102792856a7629cd9f99c6c3eaf1d65dd0f69da525bd6c391914de6d6a29ccd6f773463321b860a87dcd0f6769ec9f20a16ed3ebde9ee53a6eb63f732487bf4aa94255a61d49c24b26a7f53f84f45d269e05572a9a493f51b248fcad77b14b38569111c52aacc51daa6864c32076fa91cade2af1fae4cbe15b313e7c20094bde0f1a2fc296f83cea0b51a5971b5fe25439b9bc60eb81c5f141ce2698fe6b25ae44d99b253e511cee82850bbfccf2dbb36c0573846ce0ac9c69e40236996f19a62dfa8b6ea3b67121ecf92764516852307eaada1aeb01cb746eb64cb5942402aa728ea51cafef4b8fcbe1f0de22351c4a20a9ffc0c595653afe099c33f68b3e0864f498187f8f93d24889aae97d3e9232f3dc37c402206a0c1426a60099e7daaad1eea4e751db8096352c6e41789aeec44006ee7aa028ada1051a803ee5ab4539c5e6f68cbcb48ca576f29e74870e68f2a5f8c3c4c604ff50c16bd049b416f4c76b3d3972d2ca353d8013f167b09dc7b9a058e96f25d1b79d54b6e137e37127c88b57a031ca6d7296202e37319525aff9e6d79ed7357710b6a80b16e341b0b7f30b6feb4a84abbaf8d4fe625c57d8ece2fcdeda3d6d63bc02625d0a20e0e92488061592c0c40c1be325f24c02f1a8533cc2ec976c5df6e70b46cc5f0d9e4309be95a3caabcd3984d2b7652f2e2df1fe25ecc73aa8a69667dfb5e4818205c992e11807431ce2c5d3b358f7885624d6600466b50726d78dfabe71d929047fed10cd0ebac7afa76fdd95af95f9c29b487d9054f810cd28507734f2e34a1f7f2dfef3231a3c048097b0f32f8b640f112f61f0bd4b1435d77bd4aadd75da597f854afc05ba74f1d2f751c7bfa44512bf0517b7debdaf577bca5bc6d99f0e64ec30a2ee12d594228339d7567a5f1c13344f2f632363c008dd0e2cb17d7b05d4085396fb797260f897209d1abfeed2174fae0d56bc62edaf4d8863a70e119f587ac41a6140ca43833ed690fb049d1d32b8eeffeb53e41766b274c4485b3cf028db5da91de3bc995d3f865b02c94e4029358cb2c5b78b60a5cc26d71974ad5376b8330398dcf604b46795607dd670054e76c84430838e056f29105d9b2b2a3c529353ff16892ecd429ea61d4503abc9b86c8cf6eb1ba60b98314263600208238b35e7127dd6ede959b1f33d81b54c3c9d625b1918ef265f549d588c0d4d106a5be602ebae128ed4dd44651fdade9ddf08350501885a378b88a2783c172d9686c2b3a77a139b3e88bf728aba764de6d68f6a81bb2fb43283c7727fae2721fc387e2a9842743411a2e2e2d0f7c27b581df024fa070e649c085fc39297f4d8b68675abf604ff401209ef64659841613a3b299afe06a56b75f012e16f0620e76765a1588ee8068e8128a59cb985c3a03cb949121041d88517f445ce1461bc140af4fa4a33104cf3a257dd94c8cad641efb0aac58f7722ed2b9fed3b3496b7e4dab158ab2a3d05465a36b60b91282ba1e68c4849ed32527c834f555446d4649d852f04aadc76052ed426894c87d89a5a0bcff3296a0be4aae706af0491c5bc4f233b2e156ca14546dbbaa7bcaae03aa431078a0c78b4f3668765db4692cbc78d0235a297c9a522fae065d36f668322ac84bfca0cad45a73a5f5282f4f9eebafedaa2583210a8ee2ac89d0263adb29788000ec2511fda95bf903020189b6845eb139c3b59d13e0cc2a41bc5ab7c0d556c658c51d53e78ffa0a9de52657a335450024441bf5cb4e4d864b6782be78fc629aa79dbf54193be4d4d950437b4b6d5a07c3c8fa22020044e937dfec26045a101901ae768fa57a50ab5564ef56007245227d0de991f299970a82e62974071d84ae4b1e778d308aceca31864e4bbf314a3f88739585a5f494e1450f7cfaee2754adda3a51911a0c07119aed1c4b5e3d90dbd1fb079d9d2c194f0e90b2b2d5e2afd20d503fa844d535e7cc2af5a4c1dc1c66b415c24e96362b4793599635269c3c89bf7d203184348ae1b4f011a713aa79066e1e73ad1d84cacc72b23e4d7d11729c197943ca0250d14898641e66f9cd7bbc0f9db6ec562792126a3981bca767844cde5601ea65a3dd5150b93f9e2ef31d5d9f8487948987ffff9abdfb2739b99c5358bc4fade96c16dc9e78f394740002f9ff819ea3ab1d2297af210ef4a94af689ae8159d1ba8ff06098082b78921b1cb18e71bd277ec1138dbb2312b9489ce5086939e1f789d0b4f199b0ae81ef36cd825ccf92e77a6d4b7fd7cde6965b6b1c8c874c927ab46851c2f51ed9dd0981a45336aca994ec0eb7b83b98c9cea45b2fe10d21aead9bc3ec7c1e868444b9f60fc5b6505a54bcf8f1f13d090c40a454005faaa890585cfb40ddc09304c79d9832f98d374bbf97bb5e8163a4590f1902e02f8d67f1d0d40913e1db599cea91b88a35f0bf1c3a5ec13cba6c829e7a4257478c5f04ed12a36cd1af89fca1c07a72cbd1398d6902ce44389dbc079f3c105708588e55ffa31f5338cb25a10199a96029b9b65003bd1ff2bb58a1fe78a3342213e2cd0df3b7764607ff8035463ff19ed826cfac1c75c739e56197eb58ebfe76f9e282bec7a5ea95fd7ab7790a02e2607579dd0338d459c19ec6f4b3b8613fee7176f164d6eb1422d8ddefb8f60d92b5d46d22c14bf4404068a2e0881d0aa1bf83b25bf40c9460a4db5fb24b92405f5b3b805a2d88fa1f2b361aad5e6c7c068ac28bc2f9595bdb9b6fe5f56a0163a0e51319a2a0cdd95c58c3ba7533fe448c16b132ddcf522d680d4abd8ccb1b37ab988bae83219d3483c77417b7a6e24fb974f8510963aea7782fadd0fad1bc20227a982296a577b6ea68795925e8228537a043bc52c08635d30b3a162535c84826786243683cc8009ae5eaa205bd1655a266fbf1ca2da6932f03ce00fa0f43d6657b77d71404f531c19d3b98c43a517265fbdc2c4568693127cb7d7d7435d691e6e7cc4838c23f103c3c71a03d21a8497c8f0657ef8ea70cd6cbd1d438256b81fee73c11c43d830f0aebcc1aa9d2fc3bb6ecf660a0bb62910678c3ad4e686a3ef4f5413067b358e5843eabdd42f80e7cfdf43a6e5f13fc08e584eb10081faf6e4d7f873e3cd4e9ede4c0ecfe5201476cd88b087c429dfc40c7b17469c53562195061e2f1d23fa18804407b57beb06229ac0115e84d1872ffb05008aa4814f7819995ac9bcdd008fa663d130e1067643cd224b231e0d60a178dc1af7d897808dffa47f0abaeebec0355d4bc5171d2c9ce2ac025969d5aa5f37e086f063159353d199a65b28c896719b81581436362dec787994aad6141d839680357c153b18b83747755bf28f83ff3b4efb81ade2f9ac32dfd9d30d91f35b08869d4a141b4fc835cc5203b14e96e236803a0974c3e9100259f89586ac694eb0a551506bd423a52f9dc5c692d7b7161b2f1bb819e4ce519890297a6d2dd3d6a08589f981b0bf7af5c86cd276a3fcd1e3d5096fec16ef3c661d30ba721ca384c8af3d8514ff0eca8684d600642d1e955928bc259452995fa06dec9bbb8307ac1393dd00a760fb563dffb8fefdc0b79633d94b8f86f9176a4f6d329da699016d98cc28800df171ff8cc9b76352192943a926b0b9f31b3217c6dfcc02bae5880538b3118781f44bb138b020cc796b13dea4b68f216d65ddf1321c51b1902ade1a9837b1fb4a94dea3361e5142b70ff71fc1465bdd3840d524a640864d775323a6e30dfe3d1188435480c4fc67d045ce58ba5574ffca39710c1bba55142490a22e126c3cf9c5a495598ceba916e2ed16bae8f2461a1e83412e43926e0a7859d2bb1bc339eb727e6b9c0712bbdf9d511e1ebf63b954db1d34342d350bf758c957c43a53cfc8daa0f29975d3ad996df582c224ce7f19dfcc57be7a60b629f3c1db3dbfa396a343ad1907d7fa31a2efd6ec0f03d32bc7b659b74d5610feffe235e88082753f78b04e5281f1d3edc2609e06487783c72fc98744a4021431e1dd158aa6bc2acf8f86dc4c92a92a7b2fd932cf3eafef147303b6ccc5f4fc692ea285bda61d58c6831bf90e4100c33a57d9d7e7b68ef812c83c77fecb8c0a376962b225787828eee04cc28723735a6303ca63e2328dcc04292a04f8ec250a88667e78f0ca91627e527c5d13723f9d0e2a90bd8d231e3573fe099fa04cda2707015162ac3d76fcddf28e28aa0d11701ecfe9345022fcbdff038ea09c4273cc2075e3b98db4b0d3db9f24b6259d24bdf8856464cf3a1a375055421d25183d4302d6c17f6b3d0665a301193e0502113073b4a2dfb501129a5f0ac67d9ad95fe7cc29337cb02d65398051a85ce09df2dde683da1fe32c86cdd98a52c0df855d73523822c67be5eaf8294deafa0b75ba7d7d519c60bc3acd39a07e8c8db91e4a1a34415bc66af3a62cbc982c6a57339fb4bf1e3162bcb0db8a9e97da47557b0a90624bb0a33191e6aae77a9e584f7ddfdb678947dbf212d8765e317ad2f5bca6156b8c8cfcdb13dc165c562f774108f5c00d52a8692302f6d11677121998d4a194f09e0b73b554680c6ce37a6ba4fc1699af957a243491f9e1b8b5f816635e77155e8bdb30df73631dbc30c50fe93f9893aa0cb051a72c0257f6b0fd5ddff3a9da5d23ce179e5928c124ef9fffddd4cd9481e2ec454ee85bfa803db7dc128b4ab3d20f49c8f9cc1432db3f248e7f0f057b9d7cfc84c733c3ffa7938f107adf0aa024b9c8c69d1362d0cba1ed135c015fce94d533e08e35be8cf94a0e9e91552de352e5ee21405b3e7ee41da2b519a18cdb3090fb7102002fb45b410a43e3a259c025fa9eea841dc799536af1c0c7b9753410253bfd3933fef5a7c279efb566fae55386fa98a3968bca559fc54f20f7ac4a38766d29abe2d31d76b2d2d293d466f693b587f8190b36d4b1899282ddaf6a9a2bcdcf3aeeaf881c25d838e0d4a5b93aed5adae0647356ff0e73a2f97115420972a70b574401418603c21ba7fa5c296a75f537c894acc40c0176e4a9a2923ba28013cfc90ba9be5c3c06c5a1a4dd9dbf71c9a34d9c6b20952c44f82e7a248da9e71f5666e84050b9d8fd03c8311e2cc376e02d50de55eb50d6401dfd0675cdf872bc844047ae51cb8dd4c5c831f697829373f23dffdfe1bc89daca61db48de6bf71c738f128252150f80a68e521d3962fc3ff3628a5312431249ccb5a44a9a357b849554dd7ee7edd3364770b74c7f3807eafd6b69686b3c9d2eeebd16f3e6218349eb7dc6d504659899c989415f296ddb957859effbc56688b8484dbf46c0403265e939cffad0b4b265e8ba40e90c063ab8c848875a4721adea03029f53f0f124afb1ace9215a82d53cbf7091b76c6f2037d1c83ab8322e4449b0980538fb28db9f1a743d52f4aac672a9201b8890ee48472318bf5c294f323317bd97a448cc9de849ca597db238614191e204626f26653979057f8777bbc2326065b6682233aed59e5e12fd26d54d6895855f6858cf47a5ca2fc1da55227b84dc49b59ce2230dd76996d9e92a505602fea1cfbc6c29ead865595c57a346bd5bb0f8f38c6e9eaa09911c7f69de6bd5a5f770167ab4e6dddbbc342e8fb4057a9cfae7a1b09ab45bf58623d13f54ade929f3a34b3029d0a26f3a2db1d571ad0a47b91946420756fd8d884dd8922b386fb463eccd7edf3a8474f53132a7fca211470a5de59f956f8ba74d1965cefd51ace06526c06f4afd393d352cf199b3eb4c35e25501c438f2191d464c1751ce863f2e2fd93dc60a72a88647e05328db0b42226cca5904b28c51363507c94727023ee94a024051e44daf2ef33c577fd01882baf53debd8c70a2d7e2eca69c69cae3bbfef48413e7257fffe3fbf7bbc509beda0a6ced612113ae027a6e925b6d1cd09c8a83c08940534089d9c0ab940f8b9dddb02e67e50f2b1824acdc18f5bea7be0e07078462dbe2615a3a22228a4d5e3cead63a96c1a85e0a955a2cdf225c3ffd208c9101531dfa9826084133f3036d093e8ab037a7a7e8d26deff1519a97b380379555ae11540dcb12fb6082fa527f4c91ee1bd4d7cb2fa0aef0639c7e217c23280e3a759133852f6e15a571b88ba9bc2f576b001248a0b37281c5538a11ca980a8372d0c745bede104bd275bfa95f7016b4035ceb64b7572b48c0204ae3decd1ee889daa2f4c810d73769ac5f70166d8a7165755a1f0a2f5dfca3bdb712f21b32631a7edce4d97ff230e900826b605bba6c1ec4f514adf7af5cc384e3e4ea02da0f5aab46e97f900b67a1ec7154f06912d4f8e142b46812e1731a6bb214e76948d4e789ad4a57e89f8ca40c776716f9ff4271feba733001b36e69ad4677e0a869ec1c5ea429e0d1c2406ca622f94600c031d9322313dcb265d98cfe59b7b65256dc35098c6bebae4c24da0ea7bea2003724902c5f8d7a72b0a4f88a58cb4737d1c0aaeec7fab92114d5934dbd5ad448336d5355d4d46aeba7bb81df22b765bec778e7e59d5c478a64cb091d5e8ec0463f85ebd00ffb9aff2c0b963dea0308cd643c4c6bfba8dbf4ae4390cad1757a7808371f42e58a8d02daaaf58ee9aa27e8740c34c006b2efb441cf93071f5cad16d54ea4b76a722d8cc5824a51d2fa9a03361d8c5d7d0f13dcc3081ab61fe60bc374fca279c9393b5a27b89e12eb0e5492f1ec116f552c74a2c0a2cdd53b470e0817a9858c20fd89ccbb305342338bf8fce9af70156feadbd35e9402005fdcdaeea03b26dc290147da2ddb78a4630ea5d398d1d6a094e16ec0babe3aa80aa6f5c51b64646a2289ff503031f45fc75fc3164db1aea3791e127b8d93f2f0f86cc533528580a5acdbdffabf8d7be122e3933fe4460b55e2e4067f2a43f8023beb00bdc67eb414583e433ede26c8cc1f6f7663221e1c4112b5b484d327a6db654419c990b9ef2755f0126d12ce7655919c3e0b42d621898fb7d3664d6551a070e4360b9891b94764ed6d69990ca9670cdf95cc49573319e5c2363786e2636c8eaffc629eb1c13a563103ce1c082454a0d6bef07b90795d3428b8b31c3771cc2fc54d20d18d9a89cafbd03b900c9db4f951f3c76b22ffd3ee75e209657c59575f2c0ae549140e023613a0539c057f200917109b0a3787682b4f52db6cce0222471a465aac0e2c19a3211a7443c7bf3cb9a835e495664d6c2aace13996d317b19bece38feba9e5e6a8fc430839d350783c7b57f62cd70738506b65fb7b389167d53cba274eb76b808aac1e3f0f3b97bcf58dd68369bb425cbc3f29546de4d83976ca0492570c48c50887a3113eb33911be58f79baa52bea51a120e7d9a0c56f1e5461041c66c752a5394f4fc83365242ec9639d721d1cbd34fee847c3059c677e2cde051e3683f14aaf096737f0d8e930917f6aa7ecbe83570d32846d11f290b43e2c4f90b291b510b3aaac867382bd231e974001cd6486ed6cb6fbb7916c897ab8d9956f2787f56d116c906ea0607c8583b298f6c2c75f4c87d14a55afb2be84fd081ce502a99365a6dd8771e1c626f74e686071af6d7aa9ab12535fc8efb48200fab2b2cd310affffc007d942eeae16f5fbd5f2bea5ee4a1ded63851265b71bc1d837ab13df4e382289330d1ff2e7342ebae084f844e23beb42dfb550cf1a9d3d33d63065c9c40b62dbb062f49eefa7b6cdb360c1d25526e26521e2ea1a946e62d2929b865e5c7b4b8becea6f070d5a3b6915bfe6643c4f35013d83a4581ed48c27f489a113bcb7b2b3aeaed2b155b2402dce36a9d701994f20216f63e67afdbda0a3c7c3b7c333171968d1d02303de04539c7f55792f63d5dbaa745224710741ca738db7449f9ae5dc3b182d01592c963b69a4d8d6eafde3098b28c217692ace5d43b49d5272efc60c4cb1fe34a16a273bb0b97dc053bfb10808f7d3af0e0c0d872fb0c2956cbce465128cdc9b02c64b08f225f2f8dba998089121b7b33374f34033e6e87206d334f6a4b13634f8837d3eecf93e8c168d4299f1d9af0b32b840847682cafb91f0209345dbd9a7213860ce02eeec1097f900f6e35c315c39cf47af79db8d7e34758178b71827a17499089110288873c61ae59537d2701c3a5c6078fcb3ed4240f975f466aa46992c1a3c58ee09266b21ad4b02434acd30c0490ae14e42353f61e3a917d85dc7be48f8c128ee13bf3348e9534c0036afb44868f8a9d50451328a5736a7851adca2a029cae3e04174340267a6206c2b82bd7bd3f03b30fce26cd4dcf2027d40d0ae83a536450b88ff765ee12a1fab836f4749f52d3e0ddfd7c33ca1f7000afac7eb82815b963f932c3b79346a94c3ea4e8fa684407b242aa001dc39bd855854cb6f2626ca270b55f57cfed2d142490cf1742f2747139efaab32a27a919a2cf48cc4d2e784fc97c1ea1b585032f646a9af431e6f9505555666d10df02cfad7e4caedadcc2c63ff1b35ce5c6260c869d57f8c6d4276f22265d6d38c5111f1c0de4b51a5eb1fd01aff6a281981b62f69d94dd351f07f3c9be817a0ee59def8ff0a82a71be094a54b458d1359c611f5b94b9a5cffa037fb3a2b8f4f46600bab47e1f16c61ef8bb55f8d8600844d081a7b221c6f1cd20a908f980c14ecf1cc2bf029d1e35bba2e5252c39b7ffa1b43fa7abcf4d94720a2f4e9aaa8cd6e3939438772f1a81962f7170090840ac9ffcd76a1e881ce166e4cebeab7b42b5743f9c224e9c82be9c8166162c5380159c97600b9b0a71c057c779f68b2b37fb91a24f795ec5cc7d44fffc66b112615593dc54dc7f39950476500abba20c339dac84754994e8db25fb4f558df35e0e55b30077e561694cd26b7b85536540cffad7efaddea38cf91a20c8175574cd71f5cdf5ab4f37ebfc6019b82b3c4fca8fa5c7cdfb6665c4c3ba33eeb6f158af1c3195fb6e1d7314e2e8b328920ddcae35db16ad75252b4b9b7453ecf351ef28b944550217608af2915476c055a3b8b03aa7883891a704fb70d34360b57333bffa35a4af557040bb535a213c5f13673424380dd38b5f2a8f1d23d5d292281dbd047f5ea6263e47585296bf7dc4c5562e0cf8d21322d6ae7a18309dfad43785ea17344d2c5fb64a59a987c46befcb17ec09456598f03832c3cd8cdd040eecb51314c8623f8a327e7a3600e7a5a2f123fcd0033c4dae6b3be502869a48e7c5c01f7d8411f785c0a8570d46185b99d214a9b7b74243267b49a6f73d2565ba01cec1116fc3ef6667eb53cb8d18360bcae3ac45b07d5be6391395fe85f792d527e97249d145136c999b7575805f83e19ebbc2965c1c1625448a0d6739c1ec9e907b093bcb4ae280b5f40abe0904cc4d45cadd5431f3862943e91c8dc9b9902d3b82662e8ff6d563eaad1362173e84ef59f596d955d12fb8333efd8a0e33e628cf631406b58b313031542f49b3e00fbf1b19334f3fbfbc94003b29abc12bc40eddae44ae34a02f9b5725eab5254ef5cf68119678cc9840cb3af104e6033c07bc6dfb89be4764350c873d055e2a417e2fa31ce5e2c5200730946ea3e0e6a79366994daa1d9d04dc34a16abb6b11b59612c0b3eebc593d61b380a9dea4c4a40d898eb1646b60db0f3aa013eb146e3851318ace5ca795f2058cfa0971958518e7024f745e3204651ee0d66dcba4fc091211aeb0e2ba3ff11c354a874b65920635a209c1545c0d275982c845cd9c8e12a9895a50debdc6bd5257dcdba0fd11500fe55a47b7aeb82a5679bf52db80a3ee99d072ecb8da5228c9b442ed4e03bbbbd6ddfc4259c5364dfbc0de3986745aba833241fecfa22568fd542081803610d1a5795f78fbd34665896fe42d65587942fc4e4a5e4cd4b8d1d736e81e8e3acbe11ca8151fa0644e4cbffade04ab5648dbfb2458021e82ff84e1a4ba6e1d6a0aac78a19038c1296231041cc9ee227f3752e69564fc5076c0011b656eb49276a1a833b243fa999cf87165b21b8aaaf4942776ed2535aa446aa41d15b87f73394a6f6e5cc73786d11b40e620c7a7cd07f0527ce8c2210ec3e6460fcd62a4808362dc2406996a22cbc871a9252149fbebf6acf1ddeb799ef4d9a32797d573c49317fe99cedc2de47609ffb5c0df60ad13ca122b021593b0ced6236d0a5896afe8dc4250b0aac0aa9a0943dff4b7035996b2280c422013c396a5db5a9444835f15b19320c5bf794a4df65bdb809d32afc3643fe3728875482620f07d8fb2213d4d858c277d3fb568ce963e91d5303547dab8dd6f7324faa14870261190b89ee67cc94c1a1f977c50682efbed16eb687e9f8beb36fcce3e838b4d8fecd9bc54c0617fdb7f6747b740fc723d7cdc99e2122641994c75f3eb1a7aa139e4ce79dd217e4f360a00338276bf69b9a4e062924601fe35355b4f034177e3cbce8ab558a0bca9619c6ca740e681d77a3671e6e06e6390ee7ea319b963a2ff6d6cc007b0d173ff398d710e28d6429c9706aa6bd9bd1e3225ea66ca1fe9a61fa041b1819d61f155b0dbe055ebc141e8a0e7c330ac5ab3fc4fe832484a35275e8081ce62774c7256683f9a916b4cee7af8720f87908af939846840b6eb36e7c00f4104822d74bda461dd1df875e80f48f7a9d2c80f1486fa52e635916e024232cbd9d00a561b216962498ed738f33187e79f11bf7886231c61b2cc57115b4a1f0025f3e7a8f8579b301156bd79465304c93d416ac82dd3cf61cb882ac609ac6ec4240ec7ca53c54915da5b83d7eacc5d721601005868399f4280636bad57beb51f308b52eb28f92c911e15a52ba2961573e3648a3f40c5b7c9c7c897ec6149add13ff7eec32e9894826844391c0c974b4a7181531c1183037008e65aa5c00ef9d14d51ff83c34fcde4bf9cf08f59674dcbd937a224ec9b18cd448f42c3509616e1797ae023376d4fe11a01658e8261903f1bd8a2b97ef6e66028024fd5964436e3faac6c77c103e71668bd0820239eec7354d245a27faf90d81dd22fc15ef08d6cee51650fce5ee3305c763ce8ad3869d93f8244253ffa51e81f24ad32a7c303140bd307ee79c341fa95db69299757d68937c6ef7b35800f73bc8bd6d5f388aadedd24660290ee35f21f3194eba66f090ee6f805374990deb6ba2578685f0ff55fdc408369ca8bb544af346bb36e613bdf6ced524ed362e7178955dc0d861bebda815cc0e2acf5652d42ece5b51e7cc3c0cc03debf11a59cb25eb631bec300d847cb12453a6b87c37f864c4a9cdfeb7e014decf751920ca3b939d8a040d81263f0629ce347c31e89f9602cef2ccefb99c95e8ab5d8dd149863031c61349144dd201062df18940de91084e993bd3f34a68c2a8759c07142a22f1df70b69a46212e4a775c575c7cbb1b23ed99b256365409da0e192503e3eead91d11254f6c0dc16d9b30556b665ad09407f11c404958e996ead0384a0682fe477373d2be8222bdab0965ef6b4c26d2d2662197f082563e35aa9f4f23ef99f9b1</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">请输入密码</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    
    <categories>
      
      <category>数据中台</category>
      
    </categories>
    
    
    <tags>
      
      <tag>数据中台</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>数据中台-05_如何统一管理纷繁杂乱的数据指标？</title>
    <link href="/posts/2022/05/c28d1dea.html"/>
    <url>/posts/2022/05/c28d1dea.html</url>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="0524ecf67b91bce97ad27a52149775bcec1b4170bb0e99038a1173316d3228b3">4e4fc70cc91fd42566446082a751780fd5618d041572b8bed7c41bda7a5fe16038be3debec314ec22c9c045460029955686a75c97c53e251f86b5bb2279547d5fb160efad7b299fcca0a1b85ad477b40190c852b630d2d73b5daa5a544773611658be69a855cec196e2e9f443672d32c288660ef728514633a7400ee8ac67b8090e8f5d962dee2500c34a0b09d22c636a85fb77ccb5184112864f39c47bf9c50a0d6b334d0538492039c6e5928734439bf01e3e4a6de3e5660d925c7783620544527c8de1e3bf1d87f552ede92a343a306192f79221ae345263dbdfcb686c0fdecc3c34d9bb1863e67abb4165b8ef89a71021ab80e1b756b84ea3a38ff59367d32769e7ad1eceba1d9aec0a93ba972874e56899f0b8de2f2b3c3594475fa08a93e8f88ae74ccf2e4946dbf042976707154ff6469f27dca18657f379ca99ad1b1fedff4b7a0a27ec74fea911244937c8c93e0f582f7f01da1d8e81891025a0917097fb0d6bb3a86f9cdf8af77f8401149322d0d29ed306c890a0f37b8b03ecb3d164d444ecf9559e8f3fe064563275265ad2f4158b2cdc78fae9e26e1e89f19bd616e90a0e10790c9486a080f0ec459a5b931d1601e371600d2f30a8caf909bea5a7c5fa263c35c1f95837410bf0fa88f53cadf34f646243401bbdf33ad91b9087ac9577923723913aa685046667448875411df624f851f166599569ba65a050d8fbefa83655cf3620b29db39519354197dda93f48d3eb1238a2c2dc667e55a49ec52c8902bab29c40b3bf4940a1abf1155c0d6e4f59e524c12794f3c41d4b2356d333b719735b965ad34d1c8bcb1d8d72cd07b7c4f7564a23ee4d11c897824988ce6193604845c502f8762bbc2a522eee904bd664dd5ca08dc432b1db1245b91c89ab5161f071938cada338eee7498b6d809976e3244d6229328a4821adabc75748f4721ccbcc03556dee3613025ce95eec456ec5b59bd0ecf4a92b9e465356d16a38ec0fab45e3e78ad9e60a0b5caf24e23c38b30264e46c9cf5ce084f58bc36960a43012d017768db48e309e2356e5239d4721adf44cfb5e6b5612638474776d75b4c5908ee07801ae04e592c9f654832fa94b11b38694ecae82331437e551cd4595187da00e77d3120463d4fa225bdbfd86a66accaf516387e2d2d5b37d860994e580544b82e906131e5624b1f72078bd96baa5bf15915f2e5b3f269ca4f46a7a8ad1eeb0f686fe31eee29184d97ce142307791d953bf540e473050ce6c52a03a1ab621ae7172ef9e754fe428b68035c4605aa3a39f0007a0f06e428cc0676db8e83cb518fb34eb02cccca9e983a8976750016890adf791bc371713c64728b6e277ee08e4273c9865c3542d7d0ee8c02abe83f611e6d32fbbddb56088ceff05ec1a61a68f7798a347fcda4b7f684f3bd6c5dda9eddc8200bc0fa32cf942a08a5ce510e6b693e81d33c80ae74dade3265a7c025eb5197c052098b1293704c96deed79dc62e90e163dc87d508285d73fea1f76e860a01b3ee88f5df4dfa6f77e94bd9f752e5649a4c14f26fc58ab2a5b0b775e6560b31e7fde89dd0c46776389a2e1c040c426f973165283e550596aa83a8017ce274f79ec39cad2e5f22d077e5375645a697d6f1808b58375a25f6cc482e94e13cf03243baf80e198beb0151c9742b11e8baddee48d9f0bbe41df4aa1259a6e49547d180c1943a0a8899e587c5b42e4bfca750cdb22f78c54e1a936b95145584aa16e04d482c3e8a8d65964c830205c6a8be9b5f86b51714d23bfd9bd6cad96de99022b659c3ad9f5312a7220ebecb67ba08caef368336e91ebfa3087bf4e666d5e5b508d0b070bfa23c241a2508e4d23abda894b37ad45234ebdd6283e90cf07c8988492400e6f13757a32981858fccfd70a1c22bbea0e33333a3dbf619ad1b65b4364b5acfbbc4328157b26deac904ed54f78bf0904b28eea6ffdccb3441705469e4c462d6789cc6fa0fa553321dc1e73072978066672fb9f8dab8e8e63f5050a75590dce2eec7b67f782eafd22027bf019621aa797941f1f038c643520a5d4ffd6a6b332e1bdb7f432b9d184441f09a434fb142bdde605b57c42c92ffd0d6a3aa4195820cb694dddbedf1efa9204081aefa5c25d7320859adfd27195696282269e7c7c6530365bd591a229ad1d57ea3a8fdfcd49495c100a1f322fd5c78263235a3dd633c62afe9c8ff9e7f724bb48923ee50a254a0cebf04d636988e0e84f0b0dc580702045b428cad10a8d5d8ea1a4fa73be5b955ecc01dc5ec8f95429da85f9bacc4ed18c112c0ff6034d50f5556b93eab45f98dcbfc3e580c6e03ac981a5f1c65c27ebc07595543f378b095a130397180abb8bca63fd725b7270faf0d919b32cdfbbbefae63e66f6233673683e228589c17b55167268d40f3ac55c4bbb3590e3ec58a2a826618749b579a9d153e166e0a993d54d93329bf05fbe4858fa6ce2313ec1bc50845e8bcef772f08811a99edcbc7c88825ec756733274d2dbcc9197c9a52ee3f3503f2538bc29e9f7e0a62715bfb37931734649751d215cdd8789f763b40b1fb59e1d0c6da560a73bdf8dc9b9baf812d78d5e0707af93897a7ff23f358d7f514870e994b3014c0d2173c3e27ab67bd7203975d6d31c28df52db6934421c0c4c4cac41f51924034f31b2a3316db412e987a2141701c7fa3f8a6cdfffff6c28979859ce1a8f2fd876cd057f4622f16ac8ab1884a0df257b26ddf91dd38485a702f336e5e90c47cfd4501e9193e78672f16200c15db15ecbf33b7e242b1482688a2fec24f60472dda8d36cf34d76aec517a17d72666bd4634ac9ee9580a6a1082c9b5aee4e9b03821ee5ddbb500f62cefbf254e8f6a663177c688d0252505b096523f6c694a7a02fc8078afbedc6f01140ca9a610da2d7321687e6a369424c839930c0ef4f05201bb2f9e1d33216a821579199549368916c57d5ea0ca0c1088a391cb09b42b0df3354b07691d70cc3bf42f1770bae516a3bfdbb131c5a65dfe5074e3d82e63209c2f1cac40f85f1c9d881ebcf770c5be9a0df5239cef3c8f79d6f7de85a33325a30d5cf7136330fd0973d5b79e864df9a2b2905b76035957432bd5d7449f8d69dad4ba4ce65e58a2bd8b6476a68a9dab22f38147ef3ee8fcb7a5e3b5cd68f8d665d8773fcb99de822dfcc5eda21955482752ac892275b926eef22c4a9e7e8a2c706553ca61f1fbab85c36be54d011b4ba34420a033be435cf411aca1e92a5d1f43798b538b9cc6f49decc5281ddd0460382b1276f9676f30a4230e197f4612940c158ca1d3f990ae6995fc71729ef434a3e85e6cbb5f63e304576ea0d631c3465bcbcd8ebc6c81d44599989b5ad909858aaba18e1339870563ed578702986fb9b4f6b470897cbccf751f94acc4c9251e98ec43be32fabd4258df5488d9020025c03c70be4d1f2cc28df2941981aec9e04b765179e640abd117f67b9e4b77ec8f6f91e5d5b769cba17c0c0eac741764322e7e3c5ebbf27fce018a0ed38a06e77f260106e9cd4316af72b4587d38be8b2ab865d7929bd3c485b706d05de31a8d8be891b56e1176889b0bf011bfa2b13535f941361d1bd08fabf4a2bde3850e29f7fce866eb134ea99037dc6a57d2297c0bca150a2dbd9fb483399a006132944a36bdaff52551c425423f7cafdd7f4b2d3d5378d5581980d656cd8b63b9c8913f1c14175747ed79be8531dcdd6c07476490235d63b32ec269892053f2b0c66fcbd328c55702cb3d9c3de1cfeffb485d148c5b689371808fffcbe8ccc7120a40f43507bfdf219719fdd3a8c50acc0ff959227f016cf913dd2a7622d2022bff634f7988fc2bcf81a72007e1cc5ad7318828084eee569d745f2f97948463a9e7475d2bf449ecf8450ebfef59cdce7956de41268beca329b8e5144557549f3da0bb67e4a4bcd12e144ccffeb2379736fb89a49d4b98b9790b8d110956b6b4b67dc24065b256aaa31b0f14d511779e8b738e4d3c9eb5c10cfe22ce19404386be5958504b59202d39c0e95afc78b3e174a7286ba8d135e7533c7fe9c580f3c92d16bad4be20690be8fe275515a0493886817742fb91fb3a9379f10012dc93fd4e68ce174935998714f50e950987eaa2e16737bb56ea18c6968c116dbbda0947ccafe4f4323a386747b8d9873853f1ae5ac8b6909ed58373d1880d7575b97cd8fe3ccdfef4b01c5b23f03a5627c8ebbfd6bf806f2a43bcd318418bee771181e743a1649a0c9644558d40a8bc71fb962461a74d069e04f5587aac925eb277399b9a8c3f3f0d01f7386f222b6cf52a9c1b0c1af90c5af7e11379b05fbe13a819dc2f30205edaff6dbdf73dfbfb18dc77177e63909bdd71ce09c7a203327f29f6f0d1c3565103a2e28e57c8286b8e699c6f96e45a91b6a8e825ed54fc713c393dbc237243d5458ce4bb318fac914b603d0f2d31311316367b977571b0a508b99cd7cedc5d6b3faef59d955bf9eef118fcd8e4c5c0131b6da25442d84473d3fd826e9c18cd4d9068df482b203df5dfd0a5f35be1514afa727b25612923e18bf13cbe048dcb2baf4c7a3d24197a4fc35907b03ebc4eb79e7d36cc919c4239f6a77f0f4c8e07a63c9a8ff5b98826b9f1060af2f579079c3aa52019e86de29069501e3eeaff3fa42dca6cbadf62c3601a3a85d3958a921485f3ec53e0c8fffc2ee6b31b9a004c33fd42b6b0f87fad257413fd7338de0e048ac56db04ab180e7cdecfbe17424e11bb3d929059b798700c1d197e71ba72fa8a0be1f16ad4b7448817c0e83244caec0d0e519c82c1deea4d5661975513fabe41ac688c94291e37d11a21c02d63dddf4fb2490ae65cba6bf3d66a62b63b7ae49e146f75a6ff20faa3d5f948d7d1b1b6968276395fadf22e90c24991f8b68ac4a8ec987e674cef013b13656f83d9da9d30f7dec992368360069680990c15e6127ce97dbaee0b8304f5fd952f058c208f206ff2c55b57c20ffa72bde7865e2bef9f77ff836c8e2ebb68225126c605ed613a9dc650f4663bf28cc9c8fd75bb39fedb639ffcfe6a506fa543e5751ed81f2daabcf88b811ac431bc794a09629c15cde9cd51a9e50a39240c3d6966c4e7f88980b126fdb8f09fae3bd7cfea06fa726b26f2c27005e2fc913f6d7aad93393d598450e852e42beed550603eaa36778c4ae4ef0a3ed74d028ee74a83e95c0c9f0701a0506ce7f4452b97fc7b86f9f16e49b881ddef0585dd67b59ca9c5696d01af329c3c31ab0e6dc33a4c3a7a766169bdbd3879f6b8e163e889239a78acb3103b659d159e3d6b4b9d19db55f35bd1b9d48741f61e25d9d4baac283b3ba8e32d73eb069427ad3fadc16f8806e0505bb967eef6d0afded35a394f22883a1dbcd87d033093d9b0594b85f0dd9e7e6178696eda11c34e98c70368e9e0222033bc68d9354efb6a0ddc4ca955a0486907cd8729e27438c58d7617e1f977f15cfd72640dc46f303c3ecbe3198a591566c9bd4235f4d6d7b282359381bef3c7a40058576033947f50c39900dc9e1a258063595a6035b373a76a8d707391aa518862037962110cb7a81a81add111e3ce6caa07f045e265cf45520b1da90accb3f3fce4ef0d19fe49c8bcc1522dbbabde94107f43718e2d9c972b9391f0db38c3e99f5d2092ca2a5660bd5ef8111dbcd78e8459ae8f65fe34278f31031742bf82ff79f12283d5f0bf450519d041467cb9a86f6313643f3d9a62440db6703f411b50d90c7cd7e841f12966e8872c35a52fbdb767adc696556a30a12d2e4b9ab584a929f731dcfcf0029af7287dce127b3d5b28c71299532b638d7bebc80e2253f222da5cff538f87ffca8c1e5d89f6d6550f2ecbf5f7fbfcb12a0453bb69b9f68f01f68ed00c4c9d423e415bf0048aa5e28f5dc0930c58174a9bb77d4d4fe33eccd86aacef111c9e72d9c636ca398b940f3207027946ebccc9520fd41a70aba326fffe1ad124a5f05595196f84ca86e6075a6b108a1e8824d470b22c36e446e4e05eed5e5a9c1d279d244e6d352dcba144454d8983b8bf272d3304767c4b49fe174c5ed75612c58319b5bbd22906e69593d61b557576735ba8896f55055c69092ef9ec4886176c8b9c434a006d7381a4801b392511ef32cce7d6c8f95c6d16b699afbab013d66d79692c72b4c4e26597c1d023fa3ea70004bde4bf4a2d3a2ed53dae63cd2fd6a2d0cd669846e23ed19ff3c49ffc9bd359c43003e851850f0b0930cdd73398715605f5aeffc26380f8a42095a6637a1d6f330d32345d8de80fc08c11141f3b35300cfdc192e01ee56a3075fa377d72fb70df49141e98ba05bd1bd5ddcbd65f4989f4c1113342d2796b7a880f922ff6ef193a12abdb3b943be2ceff4fdd23979badc9bd94dd7cb2bbdc407ea65e23db0081702d7611257bba67cb4fbcf9acd89b51166feda495b39e7d61beb2480ad51475b4c869d67ac42986d95d047e7ad41f89fe0ef436ce163d93d9071419fecdc4e3a39ee939d257a308cefd1a8c4d7f6a63bf9dd2d769296757637829b8109d232b6ce7ff31bcfe86a733d7205a793abf39f88469dc177d814365c76ef157d113eccb5a84fce3753a9229751bec9581f0c5cd3c68c49c330486d87fecd2f360ea65560059f06fe3e6a828e2c61e3a1792575d719c6568a0bfa70879debef533a12080680ab34d4c4caa3983f952c347b487684c511c7f7b7a89bae352ebc4957b6e53f3089000a73418879beb97af40d0fd66e3606632cf7671937dc68ed08d5a97f8fdc724956f2a76dbd0becbb3063a692a6ef9435d54725f897cdda2cecf0e1cc8217141897434d1ea427aea6e10afefdb4f91b89fb19d9987f59f7935a8a4077fc89dbb554efee6eb9d3bbbb78fe101312cd66185a9e66536faa18910c748dcc94a6e7cf23f892f5e854269a7bec473716266028b32c9db07eff74eb50ec738dd92dc62cc3561992673740c94bd659c7e93bd06045d0a5d42715add0f1ee744bd4b7f9d2ce2cedff89a082978646e59a5b03043e463772f13b2580db79618eb3e2fa999c56df857fd8b1e7ef38835971afed47d024b2218438e05cca457750dced63ccc4d35c69406ffeb31d681f2023cd7c4bc9100078e6c1db3fe42d146c2ad7f9ed29aa68daee43f1537acd16c3879aa65732a0a7e25150e343241f594cef7036ada753c0bf326614d0bf14f2e260ad2f9b14e8c5106ae1b59fc9777be3f1f52cc9974ea3a9f21d32f246b7e2cf44ec0b698aa6970dfe4448df094bbf0535431dcab83c0bb534c6c60348336d8d8e88767da0bf8ec3121106131d75f03de76c73344a9e8465669986b97294d6f3983c640e7655fff2c84f5f90a251ea63ebe9095db0dc96d157c0d16b9d8f09474bae649905753c597a6b228b925fe09567296d0688202ea87932f9a12e84953b11ce0e48cf54ba14a3fbd7dfa76dde41fc192603199f1d1a059e0f309e37ea69775ec7cadd7731db3515ea9a6f203c84866d6da83cd5e8874a5599be1de32538b11ce023ddd4bba3b6305427c918a020bcfdd46bf2033c6629ba85048d8b8610472b54416f93de5590c4dafaf3b851bae2f73ded6955beaea39cc8e108e952657c51abc87d7475b59092224ba92e6adffcf5429acc6ae2cbf9f2d2bd4bef6014afe4edd94847d0477a6ff987888eb53f7f34efd3b3ff2ac0bd447544ab637fc586c1a0568c2daa40cb4fefcb367cb31d3fff819bd4f5b8f07ad72d7e01beee360028ed040167a2bbfaf8266abed692b5c62ea3d7a003c20deca7fbd1df8921f88f9d628567b7dcf69c5c56e1dcc8fcd3380fe1545d7be92012e1c4182109852d5ab0dcfdf7a05a5387864b5d2ec2ca28cc3d72605fde925df917de58517d4148b10be4465fad002fbe09553044d1a7fe08c59beb0a0880dac4110be31359366ef747303e288fee922e5c4a302c199e0d8ebd6c3570fc82d70d3d1601fc2c8a3a6a25cb8ae758ea06ab48daa4e48350c7de5d4963dce33e9970ba923d90f355223869ff79a2ba73cfe662a4ae6a3817a0572035a938d6c9a8a0367cf12a07a6827638ecc1678a5e1f7aa5390ff8ace54acaa268fc9c55ba87dc48368bcb808032e58d76989be603e2f16b76eff72c92d358808ed8ddb6ef38df1b780ea53028357802236d389a4a87972719ee2a6f26c3747a3222cffe713a61a06c33013fcf98191687a2a2ab59219bccdded1dbd8cb4dbb627e7dd387346046ac6693a51862ad21746d9560b463ca4c0681b4b0b6bc8366f5aaa45ce4c323c53f624bbe0a12670c9db2f92b0df87ca3a0f7a7560ad6cbcd910bddd762cee6d4b52ab2ab4b919528be97a5ae6ce46fc4861f581880e24455a5f997f118b01382436bd61085cc484bcbb1ed3ab8638475de885a7cecb43dfd4cca593f2a80a5eb9507243b12a41ed0898d76aec3e34a3dab427abcfb3c371ce2faf77568f96b6b3ec222f347c3de2302e3b76676bde3970e932536e3b369fb52708765d72f028fe81e641e6ffbe4fd638c0222dcacf63ac98d7d2f6d426ab15fe3006ebdde99c4b53ef015bb6d5e888bab67498efb6ff118cba974e0dc1390a61c50af796c2b5129f7b59da5d71e4f7bc44b1b08957376f4155c4210c647960b553ab19d842712472461d7594c38ff7301a631b23b997ed82a17dca27bb7d46458c5609c2eb85395a643c3b6d5f57242e327e19a97c7b1124607ebbf24d2098d4a20856ceb71787471c32bef69219f2c357fc6963f0c9881e8f7884dc30f82f3b38e44ca1c1264c06f87638e335ee6c0d4dae538edd36aa998f70676582a4da3fce5eb8e108558471570ba88f19f228d542d3fea84c3bc2bba1292a503c1b59f6effa72519939c4a2893feb83fdce95c2d24f526f253603706d24999f3a73512ba4675911056b137a5bbadac24c10f478aea0a23a9d95aab4a88a460c35991f16e580764a758d9f078430de82aafd7a4ef5fda2e13bba47045beb7c3e404b54fbd0825fa858b63343467ad5012012cea49e6767c1f818cd588ad3b69d4862f07f79f908ef5255aa853abcb533161939cdae9e447cd9b9d956c268a5862af8c1c903d5cf4e982244b761035bd901251edf5e3c7c247feff0233b036aa731b988ae92c8a8f8918b33ed91affd7904ee3f32dd922102f27a82316c8e3570d44b13239d51ee4bfcc50b4f6e5f1dfcff76eb718bfa38db8f577033454e04ac727f40aa9f777e3ebc0a28edcc14c5992569c8058ad1d4b70c352bcf40570d1ea026149cd39b8c67765a17e7d481090e45a989f40a58cecf6fb2c297cba26a60f3be331ef20de6e1218e5cad112a9895a59c7766c836d9f48e82fede3f7db02d6f3b4d764ca2250c5dba2a211637448f8cceedde1991146f80c5b3b87a9006f11e292d2787a3806f04bab74fee88013958c7b66b172e5cf9490e5b7e9ba2d9322d0025599295e42cd7129df3529dd6c905bd3794aad7d3841af5d6903aeb393513218d6f372a4346ea6f5e1f905907cc8c0edec2359d494c063f75c18ad1e78753edfbde576addf3afd6386eeca46fefe72d94030edd9016c2aa30a3ee4e8f3486a4ec85ecb08574058016b910098d531f659592c7258c833766081a78c1aaf5c67bbe6fe094351bafb629fe4966b0010df9a6e119e820cffc7ed0265376e9a62ce5e170752a12bd3b8ed1311e9841508d98be8086d44d996cf99da1f05babe013ffdff054007d56ee946ab28d9aac950179c3d6b699d21e1dc16bab79012a905add44e1c9abeff88773acb718a7e59b168e111f17f4070b15b952b74a3f449d85fa2bd15ad4070af3c44e92ef4ba507f1bfa332014caa0ac6320331fc71684d764b16bd5eb372e204357846ccb079ade3b121885324978def0a18b79f79e8ccc2a6abd8f75eb8bfad6218edf6dde518a33cafd220b697154e90bf05778fd2700cc63451e122be4f3c060e84b489eb75d1b0717e05e21fb49820c6777aff1f0990b59092272f72f0abf54b97e6c15de258d3a0716be745793f0c99d86a0f1febb8e6b74e03bdb164ddbb8072baa2cc3b9367beb6d9d109284f289331b55cc60b44701f535c9565a2ec7d87bbfb9cafdf9b73572c34fe0cc8a4aeb367340bf4c12e94f62dfaf8a7939814a29f4738865e9c97c6fa5a8bfe503fcfab80bd385916b8342069ac2f9b658ffc59a415ee3c794ff00b4ee3ab70bfcd95458767b08a2a4923f8dc57b59b4d1f665bb93759b852d649605695a31856f17335a05c92ca6d85d2aa43cc79598c3956846d005d2370abec4886a83754ee1fec2fb99a2c65c2872ef3c99095e66b5cf8da72f94d6cf83e6120f680182635d417e2b77a23d7f2ce1a8948743e42b2b269e7d60da7130746a88d41ebcdc4c735018c7bffa7768aad94ed5b48394974d1b3843eacaa58045e4350fc45b93ff5256df50b6f45a6a7ec51aa75c385046991bb8229c990c0bd04c09981b05efd1234765a2066ec58eeb9c10aa821cae4896f497a1e1b45c55f388144486b83f478c40e4a6adc78cb4ee614b92d9d53e622cbd50be6370290d73398ab0e77b471a6a2c8011294163b42d310b731e7e95c7b03ac53e4cb173f2d7cec227b4d4adf0fa2ed35c8874cb6f202e2342094c6edf96d6b430ee5621fcbb28b3976bbb29b99d5a6178a86b2b2c71cb1655496f306ff8fe5ca5ea09df6eb96689fcb813ddc3c2ec649cc7a089209a3f1f3ac540e87a9211e7416160f997ac87a63ed07c0636d03f55db1f3305cb49c6dcdfb405eddbc624a3b9cdd97fbf399e4bd4b26ce8c633c22409cfff346665ac70302bd8e97b4149d6fce312a81ebe6ca0b25f95a3f44206fe6afe0abbd22cfc44529bfa9d9e81d3ce65acc48a9ee54242f95d308cfffc74c81fc0df58b2385aca550243039a61f2fc1cb27074aea669af6ce6b61adf2e4a9e75d628cb1688cbd2dc3a992c9175fa41a8e96a749448554a5ad06cc1dc0e5b9cdf56922d08134cc0c1ba4b2e99e07bd0dc9800f90a0ce6718b19580505eb70d2952fb8268ab1474e4924eddfefa63a9844504a64041d8cd905c94b29cc1e2201162c55a1f3478e2536cb24fa04e506b2fd35e79baebdb3fd01a6d7e6dd80fe35004c6d8a384db85434594c8d6caa605ac1ddbe6c0e107adbb7fce050539c3b00d739eb80bd9002193bbd56eb7865328f9e20bef8a69e31e289b15068ac6f71b9b0e9f49f42c8de9b055a688763dba12bf6d19e4ec83f87aa6a8641044a0f7cfa7dcd57e0d4cc10b27aced61c8399f9b6bbae1446ec1158e82c3b7495072b93a8947fbe0cc9a0438ed5f4a46134ce30d4b654a15372062e48afe1b8716256c7f82d39597e0b2bf547788e0bbee28cb7c7c74c3d5321de266d9566c1c12cc5dea322ddcc789d9c9c20900e793d125fbb2ddc9e8eef80bf9397487cb59c48347781adeef8b8d7e6da708f91c73b88aced700de99e2688124cc2450ddaeeb7b3615e89227e8cf702db222897a8d615cc4d56793bdf65108332eb4c9514c526cbbaaeeb03afdaac36232a774524910312e69e62aa0308eef6c7a31234ff0826e2ec480e8aa251bac7e52c40fd9aee382dd67f2b4d2b19c4104a3b16faff72fc6ce3641c8b185dd0e9e8fa8a6d849112801f80e6070d0607af5a2d8fb7af8e1c2c13a0ef0c0a244c6453e5d743a5f7ec19cb966fe1790b4160180bf511a2198a46702b6c1443e1fbdfc0cdb7c0f47d719e16f724037997c304e41ae99e2f69625a8559f016b013a35ccb8e31e1c0f90719a3ad57c4c176ee20c2c7eef9bc488e592a0474dd524f691af423247d40319e977599020bf3d940c0612965dc176f849ed1f0900d0945ab89fe3cf0043be99eed29658a69baea17e4a612e99856cd3858dfa5bcd44e654b3fa314f0d2309738412d49377719d04d9a14380a0960f3d3d8aed2856e2fd67d4374c609659b20cdb6e6653dec88fc1abb997ba4a76379faa297446b754f15733b4edd47e133a109e1b46bd3cd206746d6347a931f361c8548aacbf23c6465badb0cb62aeedc7ae08d25fa9051ddd8296281323009074547f81daf7212308fde2c1f07a3299b04bc3a2b922b1d322cf74017cde75173b7a7ae4e1fff4cf8e3b03e4cceb69d928d3e593330d7d3b27e056f96dd7d032fd7202484dee850fc05e5044e1d59585711de565f1dfdce0830d537cc3f2c46694582f0e12dac83190fc81ac8f31cf8d77be77b945a65b5e2a3e686d91507f12ea180f1461877d2464f9b9bc37f907be65adccfaea864a8aa1808ffcd6c6ea01d0aad1befa8c4f15c15221460c0aaad635e57f2e4a2077117f7c666024b9e00d548e9a9d5a74c3bdbb503775d7b17176822e94cbb029a01d8a8d3fe252105c56c2f4d375bc1a3307a6c3576f57aeed7561f157a985105c61809d1d2aaa1d24095078cc01bda8e88374ff07b3d14ca00baeba161ed10ea6cbbe896eb46adbf97974aecb1c318867d8c7e8dbb41b757b7e3f006afcdb05b3383cd0c821371295a0e955a36961721d2055640c3ad27b57ce3fb5ca93d3ae58b794c8cb869357c3b9e153b651c50fbfab4da1f6d0b09d70f55f0a4e9ceeefdec02c1797f2991e100312579f64fede886ee444e342c6caa152f7e2eb9fdf871c7983c0aef3ce8c1f9449b600f47f38ef5dbdcb48e13834f37841aeb2f32972d5bbebe594db5b89fd3195ce14252bf3da4a0d0e214e5d1a0e02be7ca43020dc4742cad7d94a2da15e41eb0b212aacfdcf9262e8528090ff5b928405e43377afef2694264bd0c552cbd269295bd89a49c4b91eeda23b276117191ee29d9ffce958887ff4067cd0e8474c1b88fb06d380b6ac8158dea2547105e256a443547dae9c93fe56ebf902714233940158fa28b85e0584438c27e5428d3cccf177b708695d1ecfe29455b669df50d48d38b9d05f045b8067aac619d34ccced7eabe43fbd812897891ab1a597598747d82fa9dd41fbc6a7fd56f65c1d88f7dc3b6bbaaa1f6cda14ac9103dd8e97b26888bb780041bece8d89bab583d921e941b9411c6a35d5821e83a5906cf2c3c4e1d7be24e829c46438f7aff445c0583c1b08f1154993a9ed07bc0f9117ff836e731fb24c5974c06f95296fb1c7534fc49d3e64954bb4ccea541c3d37527088bf63ecfe26d15944f782dea8ad1c78248bc943f7777d997aca4ff1a007c7b20f48f9a2fba0705d63d9909089264abece5e47b9d2dd7777be59b80142e3f5a541db856a1c78d102cd042fc1fd6e819ebd6df72c9ad6dd5ea0eaa5189835cba5036ce51a980e85e22f115a6ffd3523732a5fe820dc67b1da9ae2dd6a4852479654a3489bbdf2c784e54e97f74228b90449577a644a74c7550afc104d034118e85e26757fc4fb158edf4b98e3d03befb18a2de72f738a071389187b4b25bf766a4a7b766dfcbd51768202b5c1dbeaea66d24a0af658f1c479db47d15445b0d53cdd143172cdc36fb4b7714d4dd112e32338724450831d4f7e0736836c1831941fe67c2744cd9e87ccc201422ce811646dc27e625ebf59f82927ddddd832908fcf5fd8ca2a7a44c73e532170d1ba6c072b289022614385d8e67f8a279ea9a64ef403a862bcce43a7a3680913519dd15975e3ea1af237253f23cc7c1daa37eebc826658dd43d9e7558533fe1f0b99f9922ec873e1f9ad1b2447926aaa6cb74e988e2c31cc79ef11036d76e61f0b52b3b131e2069686b1233e247608fe2c15d8c3084ef564c729f45128ab42e037177efcb7c4dfefdf5c5ab25d06ef11a69db8de4338a8b0def7e9a2eef8f2d4d9036e59a0b8a847004138c9a31df53e6bc976bc91a649f0fd8c40d4208ea39ffa0e599ac172fe33b74dc0919819988229e7e4734388548e419af3c510c269942919bd511bbeed15ca581beec8e75928cb312043ab0e571fb630bc67403eb70160e54904f16612deac70f5cff4853a3fe3eb71a0656c6ef9871906c909e677e026dd4d86b147eff2171a47efee90907feb8296fd9907bc5843379df33ada227a8aedcfbaa28193bc04c26270056d3663288ef9a6cf5ca90b4bda93efc63635fca4d9c3616f94a5908c30f192193dd7677b52b4dd14f70d2e0b5dee445ea6a9e7b176194e45fd912776487f6433e24254b0ee1ac78b7f0b58c929727451d17a20beb7dfadf617c1dcee6feeeb9308d437346095b3d76bd826f5b05462e2d4ff41fe28bae9e21015323d61e369c42d5c8c923629b27e437f5c403c0d3c60423fd18de3c52a0341e5f87a0d9c6b36f2faa4e751dbe57c03a7364ce4657c9fc0e655db0c463720b0b71281cd50ea735b4d45d70fde9c00309e84dd296b97743bbd6b764265fcb2e679fb4e07d96fd2fd3b61d6228d25d3c0af47812ffab5148a48d9578690b3f4269a89a9be6902b8a8d0c0489c9d41a218add13542c5a7af635c3b6e7fd10fec701761fdb65dabcf5be4d190e92c02e02111ac25e4334dd635c128b40d5dc9e24060274b07d7c683ac347534eeb779b1cb489aabf685a52667b925ba78f433ac63dfde0629db25403849cb3dd40b7bfe59f7b04eab13879ab912c8ee7dfdb451cd90bd34fb2730e11826f49f464a1fd6decd93a11b06184499b447445797f5e9f26de9298cc796344089b826f1c393cee86c0028f32d181e75f224ade953eaf849f7e65a9645a563406add09d8c0a1cb0629767fe09c2a26bd379c39b074f8300301088f7e2d693bc088a4797e05960e7f01d52747325abdb3487fb2b3db4d96c78e1f80ad43d496e9f77da1e1f96e12b076bc9b6c40ee1ba425e9d1233b27a84eaeb26414a062a6778d83163f5e4135dad01983cfb61136baa9165c0d07f0f7a240a110220718894cd444b05b8cfe95ea44934e1ab736c48f7a03660defa08445a8bd7c51fdf846822de1d119d17cbbe698f1437d8f423468aa470f7654fe22049d51811089bf744f8d2ba0322043d57b977e3ef8c4547b6903e4cd955eccb18aee829e2076fa3b64458193e5c607c1488340930050308f688e001004f2854698a1cb9b7c19c825cb7996c78cd1fb2d71c2f3811c4c005878fdf6cc42b53779802127fcbd5da07799e2525f06cbcb623139a73095ecc9ef179b0ad7f989a00bbf60759719745d517c727aadd2fb2a514fca859b233c7c6482c81b380de3266b8c784fc995893ddd04d536fc340931097b1521e28cf6ae5e3df3afce7020a3e883df4e43ff61275c7873d280bf934b9d3dab41e135c74aecc46b1660f80d414314bb33cdf1a1b64c84472f692a8b2acf18342c48f52c99ec58109047236d7f23f8323d7720f474b53e08193f40d66d90eee210f9645b0e6aa660be97cb14d46c02ecf23651437d8a229694b16bde093326cb50b434878b008d5eb398fcb0dcd6791b8a9317714aab7e03b5bb3ec9aae6e24c1d39f8bc4f2ff5e909530df6fa5f38137b537137af09de39d3a036ed8f7a1be1ef7c05b3c5331dc15e7e11ba1dbcb7c07adcf445ce36c2248b0acc36b440134a6927e8317bacb4a569c0554e1871f09f93abc668eae35862e8032e0368790f8094e21111742a8c49e96e228fcfd07590bd4f4fdadb1d24fc50262cb14a4e50c2400d9fbec82ce2139a971c4831cd718cc6f321a74629d4739ad65f0669373e56606a41f667b974c2f0c85441583e19e355ec01e969bd2e601f3fb560de3f0866bbf5e66a6ae30499c19be2421290f6806fbe691239e0177b4baa1bad2a915cf64124afd49d0117ca6e0f45cca186be9cb7b606ba20b45ce4e74fd9e59fe998b1ebf24ee371c72523be1a77a7f770b03799ae5356e0c5d8bb9517cd47ca7a3a00b62f314e9377f4a85427f27083d5ed22f7aa3f7c21aca826eb37069a18b66f2e392cf3345961cd10287e5790fe66eb1e7eb659e9d60f1c5c0b24e9d183a1849173224153a772f9dbe50b60cfa23217a52bda81418461852b111d6b8fcc11b575ab2f3f3f126134fb96766c6e38021887d6f8b6edecc6be0007bc5b59a1941cb897c09e48d5ae89ed5f5a6f8d9b5e7f8f41c0ac8ef16d8cd7f8931d0c2a80ab79768518ca175fa6fa8342e01ded33f20fdd083229964df622c914a8dc8803db026607501b55fd72d11323dd712d984801b33fefc107372cead2c79de53fa47535194b318d0aab61bd30365d67e3360f080564f58fc8c1287faa11067ed1384228aae3a198b54e6b60b548eb7c51447b728731f85ff9d4252389a501a335756144107647686b2611bcee0a16520a090cc0ef28b57d227a22da75ec90c3d5988e97e2eab67c9248e782f3d4c1f475620880cb40603774a296b3e9cec8dbe4cfda55088993a2575abf3b19f84cf2b96de1522d87c4892db1e64fd3b3c676a3aeee43fbdf906b984a70fae76d35da85be7d3889901e5c9154717fcb9e7e57999232aa97adc5d5ddb77d6acd3f0d540beea38d6d9a27db494d2901d7f17f3a21de3b655d53041174fe2a3e0fdeb612060f662f002e773cebe0b2bb9246125e39c0f193571700ff827b9b82c018d2ff8cf63ba3e9791985862cdff10d51ca2db9caebd9354d74dc29dfdb9e62b89fe8bec8f280b2421570f04aac882004a5076692da87eefe28e0fefd2e23673e740cde478b1ca8a6c0a71f93f08c9eb96b4488c2b38a1c751f51dcdcc5f633216d8f8b34b9938a319c073fa6ebb42577213b4ba7ebc77ed999544c3201222f8e6741756b6b6c704865e6c5476c4984fc34d64a5afdb1480c26bb8e937ba1746aea2205b6b66b0518b405176a21a395531f74d2db67d9dfeb4f21c39dcf5d124b01a7e3870597f9f13d66af0f0bfcedcfd121af8a5ebf4e317e00c5166654ab03013290014fc2f8d2e952f57e1e549d30d79b33c2336f0a1f7ed1cffdb4f22310774d73e17e02d0549bc9ab0c48d8a847362a9b586d266dc3765f98cc04fe05919c0feced4aa2516527c4dd918f28e288ee1ae8b46b094a6907c2d40a167414d534cf7cda1095e9917292c0c9db8b024e2c0b9caaaf7f1979b2466af639e84b2376a1fe69f61de75de5d272e5998db02e17206985aa6710348e3f2072748d215b84459c6f569794c0a032a7905c1c76914102157ec964d6807f3895ca4bf02c765015d02852bd4d642d25c249cfc9242c71e873379efbb318576f747f83f600338bc210e1d6181ebce86570486b4628782c8c28cc9e4a3a1f1aac348429518127e11ab5cbef57c115cf8033882fc94a8e1456285ac0f3abd2f65bfe0709301e3f1948213671dca3a0e9974c5dd6567cf093421756d231ae5d029cfa986baf84a9b566aa4921a6a05f734c9dc5c7693ccd6bb08b53d858a086e7a387b36436f7b10e76da8cc99cd4955ed931d9b28d5aadff302e806147398ae3fa0116542f6ef09d11a040c0985acf4b4ed076983f8b122634a3199f73bf1b3c6347b103dc9cba96507122121c6f4d58ab98d4d4ca0a9bfb49baa56f2864bd9e67053853a40b32b5ee1f311a91313b18d4e36e2210247f2de14a8b3e3cf6c7e7f4929d42a09bc0919456f2fe59392816133ff9fcbdd97fbc66e214d8c1246c9fed562c5af300a2f037133096a9a5ead836c3de56bd378d52234a62108093ab147f549c03011f594992dc524ffd5c816013fd7a1806b97e7c1fe73e1137f1e8013de49a709fbce91035385fecdace9d291ee160b9d051375c93b9e8e4e100637841df94dabd55300a8d3980ad94793607f3acd42496033e45909c8b50e90555b47bfa622aa4cbe7c9bae03c7eb7ee70202a18f6ab8e4d1d9ae77cc35acb9a53d8ac6b0535f40e64254554c3dd39bef310baeb8a4fdf8dbd9e796a087d76f24d91099f489aca086663d183810e55ae3c17a583b089a83ae8174c6fc888dd1788c1d08a15d07408aecc31d0e75aad3fd8778847e0ccea0239ac61dce0fab328f7add482b83795229f1a0cc6020d2d73c583531b196abd6477cf98f5e1edb88e82f4bf1fcbf6df350ab8dc89aabfd78819f1ae10c0262209ef5fceeee07f0f801eb532a3ea1f778d1505b9ea76ac1bbe3b829230ccd907ef271280d217f34dd9fefe39769b91abddb08bed8fed8c2c8a41adfcb4caa1ec94e2a0d670f52e9e7f26edd92d9a1946e1ae801b35d60014fde8821194bed9224263ed40152f0d19b1962a05d9bdd5f7b948f850981608bbcefe7f2a0b09bc3dab11cc075856aa1f4daad818b6650ccefdcb5f9c59728352e7be0e4f5cb683bc7d1dca42fdc89837852f65fbcaca6da3bb4939a370ed19dc583b83827eafdcc808446562a068e97b68ba56d1ba99ceb284b59699a798b90ee3217a44d2b884471d018cf83de07c8162beed8d404575873ea0958376582b632b23a15e1a355a3310f41a51f235968875315cee3056aa6d2690ac679f1bab51cdefb9673a993c8f3e8e3126c48bc11e37d5acd16daa28864516e366151b7c9c7cf28fb326d3b6e3e5aa87ae46023e36657a0f9735ea07e4447a03621e110476d71a30c418d2f3736069e738d5e244e38af91877ab4c29a4210c370e2444dc96780f417968ae6ad3368dc4ea289f7107eabb7c5c72785efdb7e40e2dc92131f7449bcefaf69e6a386ea9b1d682c4eb80f3195036405d1e1c4e08eb4368674049780a0759a5dd07b2850b28a486c28b301930ef554e9784d3aec80790639a5b7db0c55ad6c1054f2c52f2ddf080f2bf50b02a5db311f27c4e798a7ece28fedd1a9a7f4e0271a1e4fb031b9ec2d4763ec1de02e4ac09e37df92e8a822eeeef1c09502ede4a7c72c6e31c1edc710d20df4b259e20320052464564450797f421a41b77bb74b922bba6805daf0b05f5ee13b211ae9f3a8dc681e98d32055020bef9d3941bb767ac0f4e4a7a038ecbbb9d8f1d2f2e09e5c4f3f7bdd7dca6c896c996f3bc6a5fca11d32098017a6fe598eca054c4affbf37efac6848b21cfd3ea6f855f6bc10e8ef9de5685a7f5083f951608612b285add32117a36a1bed8b309db93619989e1110fc72ff233aaa5f50ec1902a9eb0ede0ab6c5cf89cdc95052cbc4a5c588bd342e2e1c74d55619a0d03ea85d83d6c1ba8f640f43b401ef73dc0167f80e60682f836e9acfb8e9b402c9db7d01655838e4885e215462ccfc9fa592fc5d97c5cdb53aba68732b4e9af1726aaf9f5ef9461aa5b54c496e9252fbeaf97435967c91ca1e2b721ad5f612a1b119fd8beec8bfa6a4507247efc3425cd184565a374596941557a531319bbcb8275c06c584c20bdbd4d6541dbc4a051f2ea1463d37b5e9f74b8065c5f518cec8534ba7f205e14657fdd4bcd72c3a9ee5631109085291b285bc2ae4dddb343cd5eea662abe48875b87e0912adcf0b3d7f3468c15464abc0ce7a6465673ca369bf2ef2e73a54d6d3b8891563221964a50ff644a8aaada65dd80c8ba325c750d15f58372133d1b9bcd84519b4b0ba043d993c2b206c202efc3e0c8296cecbfae356136e8fa9e024fa8c97cae5d7534636bc59e2e05158d4ec55cfc7b6275eb45954a312c645784f182c335fc700633afa47699c923aac607380b2712e4b3615a54206a028a689bccdf01d05cea45c3fa275c4586289e73ea940e55e0d01bbac416d28eac355ddb503fabd2dcaadaf3b48385094d94383c87329475b0d037896a0e72f4b77b926c2a93b1f0b7836a75c8c78f421106e2abb4e854ed04c8314e4e35450c4c7f88e00474f1c322a66ff81a34237b0dbf0d9d77e8e85eb55442a850b2401234fb0cd87db957186a6ec2a53f60a5eac71cb4612f7a548ea76a583d2bfabfde18d82cc77115cf4e38d2e6f708ed96e0385bb6898585bc9e2a922d9e1e9d56c80a22cb62f141cf8a7b98c8c6a5ff4981deae4e4e783820a8d326bf1e15195e04e524464178ee397369d28f3196f377fdbf95f995ceeef38770fe261df58ae813642059b35578f4b81c042f01b7655d88adc97f729c0a7df7f7bc24894907d6e9702d863be8559f69f764a8e458ef893c03014b5d8f5a4af979a29a6f2825ae52ce34c1de13ca4f59376adaeaf3fbdf6d3075fa17778b2a343fd946ebb24a2818c015a44f58a78abfc0814387fa9637d20c916c9a43cf3cabdc52c4cec1e4fcdf403d4a3c40fad30a0b8ca0971a304a9c58c0b7a6d4ea659aad2b87f02c4fd97c88c4aaca8bd0752602ac5ca6b9b87d7968797a0a872dc7d2b47594fbbe8cfcffd6481f909e22239fbc5428a2b4feb44d2602ba9032a451a8064d11040586e779e78a8f025076192508cdde0db0d4b8d89fd58de2526ebeca3a49df302c09f69bfb7c18bef96089dcbb525612adafc714cb6ec75e1722413bb4aa17bf0167162544d7f52b801ee244560cb30c92eb18bfea1da1e23db898c954d280c7bb4e9eb99a844bdf1c3a83ad5b77d85986a43386b74016aa142ff1d3c7d705130521b98c62fbd9129ffaa9b0f2d4b24dc2dcf84c44655d570f0f3f682c44acb3845ae0d2096d0a53b52dd16762242a768af2cad569a5071cdfd0493347ee078d53093b46cd63574fd492468ecc6efbd571e1962f37ca2101c7c33c87f210ae7780e7ec50a3fb4caeee20a14a4e69ecb8b2fefb1fae496088300176e51ea17297bc3483c556e3d8e3d6d1e3715d6376d50dc700b65fbad55e4b78c17bd431836201766fb5c71a1a31dfdd47add003fd52939292546301d5d8a2346d70aa7a97572ee9d15e00eba8c11818836a6e8821ea222b1f93b0d2b192d2031c4e2a4b6915a9e4976493380f0e494a17d50634ead6cf625b02776e0c867a3e714ae8c0908f2e4f50323a38ac3bf33dbec0046ec500fe10128d5ffc86034409a4583a169c10519fd9509d2fe3866fe38929e279040ec5df7d819f058b7813b51a720213656857dbe4e3c4dcce3f45ae2ccac2a9c4d73a1835d02ca45ab0b66ecc02555915cca132c5d85668c32f806ac7608f2f03cd73abc1242cd5deb30350b6600daa0b7ba85ebb783f7f2d9f21707761b378c32f79eb4fa92ab97917a4cc9806a5a5d469f783c81d84c1ff5d9c45b27e6d90c1842b961b5a63891755f2883e8928f09a9605ae347faedcd3ab3ad3f29cf8576f57d073699c4d13870661e9143b0fbc692bae0f44d4fe823d73bdd692c98af89f878c43e97ea1514ecbc2610f551924646d06b516ba535d7dacf4e2f23d0cd405b1d727e5eb71f3575dcec6909980550b0539f0fa145e5a2814b504bf608b869b02a5759a00b28fa4591b63078d6ce5c8e11b365148fdf6a10b7721d97b01f408df76a5bfe2f8784bccd1c6415f436b51afb6e5cb5a088462a7efc9fd3b750521d1dc3d1691a36942cc6b8d9060ee542d63885e9a9cf6cd80fcf227dc73efe662c88fe8f00db6b39a65e8da2d3d01ba3e96bf5ea7d018e14ec5880501b261d7fc6c9fae5078b49d620b4eb39379f5214d7fd8cfd06833e6d8e39936b706ff83ec230a9b85efad2718a6ce3959d6210be19f3f93c1689f072c69baa247d355ed482d9dcf5a0fdd7b7833c71a6b9ff179bd9ad8c050d6e862107283aa33f41632f1d6fa7b6f422824ee66c3d89266447a138950fb4668676269d6054793c972a1a3d62793326194c516a81589e54455e0cfd737a8e21365be1d11178315da6f1d976a6d04c0ac068f27d0a5e40be8598c08a80ec44404f259f165a38ef2cbf35f46e45dfae003713b17006ed346c0ad2f3c84693b006cd43bfc6464669288f66fb9b34dc559165670dbe8c1758f9f1f6b2af822a63377ab8cf996ceca37de41d1390a06656ef4a91ad8a7d680afe81aa78a2138b2b8a4fda3ba5c9802de9730408ed25a6107052fa694ecaddf315a62c05955e0ba21f5aef62ed1baa1657995cd0b7d8d82ad6eb25dbffbebf66215b8a9ea97c44eb1166691b42a5a6eb8d87cee5b24bed78740c9d5f9be3212234af3b88fc810301898310b14950010144f0a7ecf4f2be50006cc5f33e3807708646884914db693de53d17f2c87c97b6abd84f9cbd78e59cfd9e8bdb7222634989b023ebfc939b96d9c939f8225d708109806290c1950a03ebbfe502a385c87c97b133a104812b9ba61a350eff532d610e8e1fd060ffccb748e159c9c4e2597eeafb636d4a8845b6d0ab070dbd697a1441da6623ba949379b662ce67c4c907195df318b58cddea2bd54599c37d69b8fa3897158aac77655e6f97e9b00fef4da19e0bc619e29f9012faa663012e1965a7de63f9b085cb885fe8f6577928723f42f9c2fb1b0075f92c9555bce80edfceb05c9fb69678f0c2de1e2c293b2d9f60effda93ee9ec61055bfe138f34d65ca436c9bb842fbb28390e2349c78bfc13a68bd8c861b4daf83b69ac4a00a89697cb35811ae5c243693d885b41df5468a668087503d3f21ed73db227834a2411bc2d5b900bedb02a3da750fbffed07e5b2f3e72a304a73892a76e54a53e821fb25cc6c6d3acd548a7580bf253fd674885ef836f85bf12c71bc540fbe3d02207163be029076a141a2dfa8dfa08973821ae2b998298a2e9393731438f63893318d94cc8500731286d00ca7e75b5aa68e72ba4a9bee45fbc671849c4348ab105d34152e7f03cd74a2a8b81416d160412939cd0101e2356891b27544d00f9747e7290211ee5a364743608533e489a04dc805006e73d08ea4ced2ed62834c4e5062028eb48a116526166c7fcbfaa1dacba6b759ae5aeb86a7f99c9a1bdaf2e9359c57c1ff37790f9542df3e62f28d236cab2f931baa2f80493222a267e6ae06dbb7b808dbfa2a25237cb3f09598dd4cdcb8b18f7aa810962bb62721992e21c9c02c82ed2fb09f82690ab612d46fadfbfd1133c1ad53180bb1a52f07e0aaf38b8ac591d8ad662ddb33203a4c4dff0c360407437f84e9f32680f2c2a6cd0968f7aed309b4824aaa8e5ec9f7b58fcb15938a6385970934446ff0877ab686fd420d7b95525939f7d94826a6e3f451148b75f2b1357da95e1aa6d4d73dbae6bcd44669a6c460e38fa180de3634aeb756ab16811fe70547b27d83cf391a90ed0f7a5f855602e1104d39e19062e43eed610e16ea3a3b9495e49cf70ac7c03d679b1bb80c792c50b19471e1ac314992e0e0ab24c9b70360c6713a43d7edc74335a6212e5e4c5c0477303af67e555aa15e42200b1e2cb0f9f7d9d28adfa5be97017ae9092ae6c236ab84e93ccfd6872a43ca52d3b81c05ee99f4f28bdc9907a8ae06bced067ad5deab1e87c292d4f7043705a2bf7ea14445fcd20c66b8b192f02810107027550a98514f11e4600086c9395e708d1421e3e617a4bf49599c063374fb451899a6831687a362831d5df49050f9c149c5278780c4c76e405130a01995222cc65001e9d7e57b613364a7fc63ea191d447e22e0c8d2e9f6d77d7a49d50c408fd4bab10dac7ffc354a0be7d2b56cc2b7fb122235f914c8826c4a1817ca00a13dd00764a1ad5ed8bc8f18e7e98996d0e231cab97d43cdbf22d1d9ac584fa92280a9f3acafa7a718108205971f28adbb618b09f4c695b59ba665f0bdbcc8c45059ef643e993ab4369383a1503e846ced48b4a39b32a68b1c093f35adc3f4176f9a669ecf92db1a4c1598826df1e37125d27711b6f0dbb4ebaf12cfdf52e1deb22e7d16e20ec8582c071d1669bfaf4afee07d735308eea570819a45151fd32b304b7fc24552e718f8a80b17178763da0b8a7708a1c7f1e380ae846aadd299833bc7e9ec8d0a427ca9815aef47f15eef9c3ad7da92ddc657fd6ef43a4dd22ab5fc4e79debb32b4965ae327602468b0ad68419067a413fd6186d37b79fe8c2ef540f2a5e0b50fa2b5816391a95eafc02168e2f9236de02553cac6e95f1c21844e78cb34e4ba2aef2f7fef728a0fe792f34544db79136a614a16582736e13277521cd8099569c03b0761ad2e704496c8c5d2fabd08b70addcf72a7c6c3bebbc47cc3e746cc4facc3d21fb6fd9be92986068f2b4c1e2e972285c34a08a0442e2a8c051cfbad1894ca8b9de216ac80fcd5760eae0859404831071e08e23e5a00935f2736c1f732b14f5d75b1a5c6aafd9684207252266357062ccf46c4ea016bc782dc6ff935f181f13edfb12a50a94fbe25ae6e8d23357a46847bb6b86668e80a5db0a1098abbc466087b956fa44c80d8c72fb1ef0d9096fce3fde85044d34ae5600150d51353c7de7dcdc9367bafdc3db985f863656fef1469bca4ff41d70313d0ba03f698052742ec98249e6d42a91b550fcc7ccbc721a2a2e84e8eae9716cecc49e2af484c068b20980a99b485da2bcebad8fa38b3727c6e9d7e37b1ccb4830ede349485449b96e5d4c54296ed8bf46b4b58757fd05884224821cbdf039e1febee768bfc61360c6e540e02a288ad4bea8b8a6d5f1d9eeebb035af3901b4e63020858188bd2804a51a19617e213832ee09e1c67ffa55610734b7714d8f2658a5d83a4f6898a084a3b846e957824a150c09d5fcbcd95b498bf5dc3f82d7bf6d682363d59fc98a040fd5b59d9844ae15ad81e6659506e07ab44bde78f598904c79dc09a92ba213a460715527306733edc3c023565541d9de21af27ba738d3100217dfa226c26beb0f72e88965a25d4dadbac127cd33944af86c73c9d2a40e9b50e1cdce9bc62150554f79760a1b7eb890c8f68eb03d477fbc34425e36c3164df7100a60a5b4cc454e804e67867d4dd238d71adb48b9ff8dff2f70b8650577824a7ec600d1f974405c5255540dead199a5a558684a91ac113b00a6b27fa8c1e3165facb5bd72f9707cabb53ebd9d978f5d4e9512b3cfbd9dadda6afdbacee35d6983c7816980dd47afb93857c70545b32c161165bb7fea4607015ecc79c845c174642a04d9dba5cc29de6ead4fa15e36b57c1559702a16b3635c4ffba25c775e9222066aa402537955b08cf130082211c9dd1263c4309bad628800f23eba21f167c2708fb14532cf019c3927c7730e70f0e706605f59498ebad892676520d054a10178c1da71bc377a657009448c678e1fa7b30fbaefe2e3b1604f775abdb191385abccf1a5c881f73b4b9e522b96b72ca3630076f239a6ed401b6c25e35045553849471ef447b4997d4e3b55e2a6e5e0ae03fd0a90de863ee025af3b011176301d261f3869e213333d95a24f40489709f5331762b202e9b4cfe5bc798878c476f28e3faa5ab3dfb61f4c30928c24d3114f64cd85c36a84bbf8174a3e932f15643fac2ed238d9865e0296933ddfd251e7a9d94d2b81e8fdd9a62f1ae726dc12e3b156c0e26629cacbd913fb9fb4c1327b9739911c3048f76921f0e4256d666e9a4ebe8760a62898da683b0518e3abd7501f6f9ec76db4e8ce14d2a186dcfd3c4130fa0822f2444a6b75e52fa53025ba14fef3846223e59f247d1904d86407a5beb8344b01c7aeabaf10c8132e0206483cfccafe8f5a7ebde106fca135fd634ecb336bf9ee19596348cedbadab849bbfe1289b6f1caa2ed3278aaa221df2d82e7eb75dba0e22d1a6bad81a88c15c0c9014cc15a6c669d247305fc62df80cbe3c3a9abc1f9fc33c2bb9daf0f2fcf928eca951f843520fa2887d917ff7b47d7f9e367c456bd7cb395e1ff5d3da916f26863332bd26f9114d9b8bece43a88267318a0f9ceb2f9413d3b69df3c284346f351131f52347c091f1fc5cb57061253cde9587c8396c6b714437468b856799b6fd59f7d2181b7d5418623592d059c4c0444ab619138f8cd1aa4bcc14041e144433e1d14571127f3de3059c1b2e6286771f1bc7416abad3ca5e11bda4fbfe062949923a16b3848a22f0a3aea42983e551b1c9c6d3500fff279a6f19b48f694486348ae49008f44c68431d372f947f17e2b3d44c45e7bc766ab3f71adc85e6ccc7ff9bcc95e5bc547c06eb4d1d3ae9238c81ba277fe5401b28f05f03c6f92f7700a3e5ce0dbaaff5d0165d6c4d5029391a45855d364b2634963946fc4c1623d864181fc7c84c22e4e16adc82dc8ab8a35df71592e2259d3625583bc50b6ca504a2bcdf70fd5c5517b34920e836eebec75fa05c4a9468dc9eb554dace91554c0f9ca8bef1edbfcb40c2790dcbfb539ba070fac1114acc89e9cf19aa88f4608bfab96d0393c3b3fd139b1bb2f6d32feb52bd098e79bfb70104e80b3a9840eafc992b0ca234290abab277828c28559428f17a64910646ce36bc2b6c13e5d6579a5378b0f8b52b53c2b747e5ea53fa5a90c6bb1cdec0511c993273b5d666c223b975735f869ac3776e0257b2b3fbf28710bae965828923f354a3b409aaa659c51f5333795e44e1786232015e41bd8680ca42aed518611986e274362543ced6fbddf2ee442a7109da0df92a8ba468606e15d6ae81f390b339eeda6b92c70d5e08165c96abd9e43a299b0dd1ee6005a163206fc8059fd5f125baa9e59c2d340810d07e7036c8c94d9b38fe54ece1ead02f15494152e07c023f976b50a64714b589553c101d5e84a9c1984013249806953cbe315f6bb158b155db2fa41c87a541db56989cd727984bfd1158a183f28a5f572f957e1aef024bb5e78d379e78fbe5bee6e08facbbf364fa00d0f85200bb9eb8cbb7bf81bed1badd4bec7415df4905638822d72e16fa6640c3aef9eee2d95b27e560d34bda78afcb0104ab3c857d6cfd8505b22494ddd075ef48ae126a50b0d260efaa6a7d10a694d7d95001bc76c537e8012ad0427d66b4fdeda0efac01a8721700b6f83e0b9bb17402eb12e47d5f7109864a9aee29b7fae4ea4da209a920d7a38ada8f905da9b84b6704b09d78a3a4d5b2c1a62907282a25cb6faceb717243eb55a7973fcdc6eb172f5b6d04c23eb85de604dabcb4b83f70a804592f7c70f2e86446ac2aa13aff79b77c553f5ea4a58b4bbc04ca3bf295d81b3fd68cc2b5cf1b588464a945263f73795fd4a8eea74048c542411cd705bb952b762a9f87a931eacf884ed61f30483d2cbac8558f45de97034b1240c71f4be0a74969655efb49d6bdbb7bda032acfd85b9cdbc3e70bd4d4429bdf72fa7a15fe57c1d05c76e6faa74eec954b330d496b5d92a7c162e94865d3bd2dd80305a3fa4a4ca1ef752b2741a6158b82942b53bbe35d8798608573a5168bd5db53d4a85c767e56202cd38a2a90369b190c3d45f113121917b33d0df12a9e00d543a416e38ab603d5e7ea57f5b7c374e8bcff42b2236f7d98e942721965cb6b2fd8d108b0ef2e5d11a792d4ab7ef13f9b73284135ba48ea2c49ecd165c9159b04b7c422112b11025dcf1ec276accce0a4a29d80827f33804807afd5b88a56f0402262163714490723f0e61bc07595977d2cb21bab4495a2ef4062ee41b9d6b2b8ea9aa8288d6606c2b051d9add62fdec24efc4585fd911554a78013e3e2eb1570c267903b48c64cc52ab52014f642ab6fc9a13ca6b65924267332ec677d24729ac0c138a97df19056999b36e651b36cf24a24a84b0e4a9cc759185250957286fb16094cc247c1e8a35c8efe64e9f93caf657e296416083e3c547972b23218ca92ebcdb98b483f63e1811167c64b4b016a5e95fb9a136080ca579a36f648f17bbd4e1debe273514961398a083891c2e3a888945bf144c92bc52e9d5636693bf26f908b125ad</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">请输入密码</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    
    <categories>
      
      <category>数据中台</category>
      
    </categories>
    
    
    <tags>
      
      <tag>数据中台</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>数据中台-04_元数据中心的关键目标和技术实现方案</title>
    <link href="/posts/2022/05/db108317.html"/>
    <url>/posts/2022/05/db108317.html</url>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="b6e90f162ed6bec377ecc1540d985c1c740d73186b646070185e251d30d09dbb">4e4fc70cc91fd42566446082a751780fd5618d041572b8bed7c41bda7a5fe16038be3debec314ec22c9c045460029955f073358e93d5787a18771b110dc4e07160a152ce374dd4380abefb85049d76fd1bcea4d6351be865ac3f92af03b4911361ce1ad7581089080fd0c684e13aba0e80b403d5eb0ef8eae2b0eb582a420af4d173a0628c44e1287570045d7e3ffe759782ccac60559bc947a7712d9be9a69ee9129e3d8ac72562348550ae7fd349ab6b14a10dc4c92cbad37dbf85d3d5785615ee5cd9a86ed859b9e0890ff95eac51835d22affa9e7d1046d04431224fe428bc0c911a325a1de2d11ea3f3775c8e802a46f65bbbba018af64b819a34e97d89388e8c4ad19b1ba3277bbf02a6765050b79f622ff2ad7651183daaf875befcccf5e5009975063e5774a9a288fca44012c3b97f69afcf5d595586651acfa51c7c9124802ba0ac659010fdbc913709b058c4712cce9cee470fa65e5f5460ae7b9f57b5c337cbd0c337bfa0d94c95062a58e45a157d5af6eeff879f6778037bec30fac4f124c4dc465796ccf944bf2d7a3acebbfd8fbb8cf0dd78aa1b63f9e9744c609f36ba13e1694b41a82f7121ac3b1b522b03bfce1254ef3d01982d8cafb533056f93f30940be51e573158dc49692f83f299c964a8e352e6017a7827c4e7a113d9b69205195f189e12533c40a12400390d39c0772cae7cdd9620aa617a5da7d1205c61be61a723f052a58b5a0fd4f03619ef98d2db04b1f1e0b45b7a9f5d69130dca610e3712eb2f3d56e5f5a28480f427a47e7a06f760817803107844ac6a3631885d2b12b36f12c724c81578a4df42f0a84cf1eeef1f6267d8f6fa6ac53b7fabaeab6d24834f3bf1c782f3342cf51a6f4589d5857c02cb93e331cc784fda2da03f35b2f621ec052381d675ede1d8a9ab1738d549f1b781eab01b5e2920f20339623e06a4a73878deb69b339f67d9be0d06806cf9a5987f3a6834ccb2a854a98f3dd68fc56a6d506f431f26643714a1cbc16a34735ec916734d35773c6b4a8ae0a304927897ee873ab47ac0690f005278389c1195cc9d5dcd1806da8df9b202872999621cecd53841d898153a558d1ca68e1574a72ad3ad32d2c7aa51ddb448a2f6af26a3fc70ec3f2260c33782e3ee96b82788bd977a354ac242fc69142855b82c37d8bf30a66133dfbbe6545b9108f2fdc5121eb5feb5c54cb3c3e4a1bb4dddbd3612c532c7a2666b66c7ef231eb89338a641bdb17119b8365b5612926d077263a4d18112fa37c2be9069519f3b5647ede11beead6a98a14c9c9833140d7195cdffb964ac63b10d4e48bd7518ea652b51c9e3a0d7b65299c2c6a6267005111ceb820d4a19b818d6e049fa7855b307897d2f3a9c0295c2785bb1130d8f1610626fecee7673a6e1cfab00ad7265c5e4f00f95370d445d3dfb8f080a95644b7eb6e6891e6a875d71bd6d6b438a3651a4cc3ecb37ab30678b9013db00e998da0359f9e0b7a19a6138990f509d2694e72b3d6de2f768d23b0b9057fcd9d64b2be2805bc598dbc17e63e905debe02e272fa76d840ce28e44a0e5cb458e31a9c4629926ab1f220d9e05a787698aecf5ce240905fbe6a5b0fd7c571f94ec00af53555a810fe9286918c66a1aeba61919165f8ca40c8f9844e57e6f65cf5b0082c0330b5eeb5100032df0026d1e3b0ab22016457e52bdfba278ae30c4535dedd98fdb757b46f8a433c94cbd0c3cc37a71dc4a0db3e7f020b080f5ab94685951665b547eab3eb605c5d135d7224bf28dea99419fe70ddeb7c5066c12628ef308cf34c0b59c607d44e32f7f94172b3fca2e8d66200b670ece3c809699655c3027ed71c1992ca1e9f2f638b34fbc701e1b9f3f2f576f3449507a60f648dfa6093ea15456eb257de31a2028c1c77076427be85b59b7fa82eca3c35335cef04826c49d697d2d3fa8c97420fb6426b1a395063a48faaee14a182f1876bd5de7e1c88d5b2560d6497fcb120623823d40cb5c46d370ae5daa7fe02555b8d680dcb14d59d3b375c21aeedb8e1422766a0a054a57af4228617453b8c0e824ba5f42d2a096f5c04213f7188d2dc874733d47c37877560b22dd7946d51dbb75c766b1e54b3ab11bfa983b9a4f113fbeba916397527fba57b8b3dcf9424f4c64ce6bdd840d5d43cba3c741281d54ad09691aaeee6a7d1035aae9214f5ddce60e1938ba25160a614872f7cbb8e1e43313da19292e0fcfe4f51fac03d769883b99a0e71cbe49c94316d1e602eefd3efd0af305f933358715d48ba2186b7764cd6ae6cd6282e1eacd37515c5f921415fed1448e08d4ec7774572350598fe7f9630597cafc65827d9a65bc735169796c51e125d3713cb5bfd55b20ec6f3b9b5d2802cd95633b8cd88a910c663d8313548f2a6f3195355fa78d8d778975d34fcd599d3ce257a96f1adb6f3b5f2ab46b387a85642b5200ee7974435659ebae6355588535b567d5565c4cefc58e9038b3df97c36181fa1f47c037af9fbb4a0d5a42cca8b5fe297103e7364d5ba6900e1acd5a3b7825e6106ab114788dee54c4856f4470a2b6208f11d284de90b28fe48d6f4cc0e5eb9ca6649538cb50b47144c132b32d3cedfe09fd714cf30da9b48836bd8f940dfff64c150492a287c0e2da5a617849384d5dd74260136e722e3b6a69a347687fb69a8acbd49333e1cf892e28138d950699eca65eaf43d665b7ed89d53a575237e9d18aa43599adf671a178eb2b4bc7c1e7d249fa72d94a45b9ba000a6ea39a6de69369df4fc0dade2d337865e47068e2a04c7c8ec61e3c64e2909cd01cbc6683593761a765b725ba8cf19441fc259989175ef2b30c82cd0650b245fb419aa45b58fa8548e5813976b08b07020f7a545830296109d8439d3fd719a539e7838bd1a015e215ddebdf2f93ee5cff27b6f791ca147c2d4a37d8fa201d10cbd31a01a2832bfe1a54bd5d3c2a19958f0efefc7fac095dcd7604c5e3f0a41e3b8dbd9b4cac4c1f97132dfaad5938e80e015051712d272a15cb6b26522357a77f1ff569c2adb1835e17e12bd91a0f9e2e6b3f4aefc7000ae1357b3f3846a3bdf2186d3c11f2465e1494adcda248c746171653af289d42800106ff9f1d88c2aa6c7731911bf5f12437ff26381f17fb5cfaaceca0475439e127dc25731bead7fcff2cd0702a93cb28a453794c5818902356a5a7fcc80fd7cf90f91433e2cda68df6ae711a9913bbc27ba375789c01ec39d862ffee013aded8b05cf26302c6a4b387c1d9282de8b9e00890c8331cb33bc77b01fbfb3e8543382f4458b7dadd6f1914b2d2c9ebd0b97b5249a696acc5222bd7733d1400e232ebf4762cd07a058d77818d82eb1d986fab6282f70020c7ae82b9fdf0fe1c53039307effb1071492a3c9a5e62373d1fb90fe00bf6fa9c6a0b29983d466479afb85553feeb6d478c28aea292be8ab3855c7c241353f105f275c8a040ee7e9d86e48e4bc63fe330c23041e622e2ac9eaa391f0eb35a5eead5831a786a178485c17ec1bc4779571c84c0f3e9c250a3117faf0295035973ae00a239f51036d455ea17945aa35831d7c3f4bb1419424908863752cb488a5f0341898f607b716eca62ed46bc2453e5bb1b53ed86fa3bd8a92e2ebe217d87d0b694a781a25e1dbc5b0da379fbc3330be564d465a39c123481810bc34a47faa2e49a5315904eea1abe725f1fac1121537cadbfca16c0ba1a975b45c64c85d8b0187aea5db8f8568f1b2486e658b7bc903bcc38d8923356e8fab4eaba3814e11718cd114c6f910fbef75d1a49eb9bf3663b02868794f22b522baabb0c3d7a00085ebc25e7cfbd34b6a5ae98b114cad6945cb77a1ba187a712bd118917de306a4406f154d45d175f1f92ee9b8c90b0afbf81a626d2323a7d4b35a9ba318f6d5b1f8568e4769d62b7cc482df4e6618ed0e73b598ee4d61d12d3371a0c42b07399742044773502280fbe07198c4a3b04f723097f06dbc1115b2c2f5eee6d6a978e99bd466bcdf85d596edafb24c30a97a47dcaa7728384d08abaa27494c2031eac61210f1f81302ff4add833a9871ab1eb5ca08a82a305c9a31ff3f0b2e4e7e4a445aa449f6232f77e492049b27dd9d2e11252841e9f86bb15f19d673d4beb38a2a00db1acfba253672ab2330926227f8b2812775b2916eadf1f042f68fcdc29361a9d741842267498dc24d9283bfea3e4cbfe307a7d215229bc34279de47eaa938599d5105521471874cf3087fd000322b33357d51a8855dd4e5e9c5e657ffc2601d6204195e2f6418f82dadf9a46d5ee59ea1aa97b56802c00bbf486a9aada8c8ac5a90297d391e58960ac4edb174b970ef1b44a578a701f94f6f69e4cf32f7431963134b36ea24f45c0d8a2c3f2853e8f33c3d50947c7a5bd7510e88492b1cb8233b35718cf157faa8ad2e061494f29c24f39ed25b6d64e620e505402f81c2e668825625348a3e9dd94497d837346010588845c58379ab6de950dedb432fe5f741b201eb5ef18071f729936714c06f1a893884727e8d0e91516e87f3f16740f2dbda959d302da11c65ae3ed5b031dc05239e095f6be1a4dc149c670c99545b677b4017e51ddcf58f6147e579dc458ac5fb0a4cc83f5ad9e171e5bf7b69edd1b3563bb05a48951e4ab56e7a219a7b75c91b5d54a7e68b9f7408c65859d906d72bf40fe19aacbbdc47ab9fe9cdc311d8aac7a1b93cfe9ae43c4bee475558251892713cb7b779f33d7addf180d315227b72fe81435b804e5ca970645e29a1d9836a78eeb79a7d78c2c4f72caefe1d30a82c93cc94dc8ee61b1171a47aadcd49a658eee36197cd791956f30cb6b2816736b8becb2c53a8dbfb1cd99176f0a43b32d276dc78c81dc7bf9f46e90a9ffb0354d54f2568ba77b9b33f96a071aee1f389b691a62381abe2e93b5681c227551b62c51dd0a13d022fc11458ca5e1380777e928981c45213a1c2b591dfddf866c66468f5ed991b6cd314ad729b54a6a1d92e09f371dd76bd43317edd60e02128204483b48dac3e6f2e777e3deba2f6d3549d5598c03ad8a27b44b18e204ab024c759e656948610f34646b40d284c1213ebd9eb3baa531a244a0450a699e11fb933baab54f22824f5d652d5c74c04e3bc3c90e1f57287db06fd8facaa07a9608bb7363f0c075b2576d952e41842026da14b0ff0983918d64a400c4e36ed67498665d041b2049ae22e47decb726b6ef3eb81348fde0efa0f94fc81fa841c8e413a9847981bbcdc8ddb2d20300b9ccc9a7bfa615de781686257c39da669722f84918e568085e62faff02d9cc8f1f78091b549064f5a020e481b9af862164823ebb01ab09d3e0f9adb9021c09d6256bd6c0bdeb52704d86fc233c6b4d7931552d46cb144c80131565769f2a334c5399dc4d17605a5ad7fd0466c41490bf414447a480b17f845693dc9dc6bda7ca3661a75aa49fa87a3fc3db1e5635c5bdafed2268d3f1ccb148f6b4535f4f4b81bc34c3d8f4934bcf26f7b2a43b8528e472082bd0384917862e473d47cae185283fdeb785391911dce4de3a441815916a2ac4c16bcac8226492f520af98fdce2b7cc448a8c6864c37ec46c1d85daa8d0f124cc913342018176460c1e9ee408bfc8bb6e7b403bc240f19c8814b48900c689ba77cb1cb4b583bb8eb6aed63694857165cdc90571c4d0347d819fba2d86cbcdbed58464b57d190cb403524caf999efe67962308380f0caf37c69540db08f621aa849bf06044002573e9a2872880e7d861e85c4a7df1de128beb8bbcea60e97ca5c92de5810383a8ec3d50dda6617e297630ba97a0819fa6eec47ea88ed565edbd23286c5eafdf3eeb76832d211cbc809ddb41b9861c31d277b8e25e56a5e6e97ccb14c00a4e2cc1b9db414d7a924f4967cbb0c89ad83cdb91700a60caedf0de5409e9d85f7b4329cfcbd009bd2b7eb2b0bf663c0740466fcb0c87a60ef621a0776313e5afc32811189ebcefa81a86c0b3bff121cc16575ef903acc0320c65807d61beeda7e37ffb9335e5c8fb818816da36030f0761decf086ad8544898cf655a9a832db4001c7380dcd9e604d324bfb717fb302b821cf36c271dea0c2b51e9550101f94253b561595c5e13da4626c3aa590f00f7b0fba314681ff39b38b64a430391dd1715527764e60aa7f26ad30b34a0b178014f9f96a9e0a6b1f3f48b5687a74d180f5a028dafefa0082e551f74b9e44d942a6b2fa1152f9ab6084648325259c06b68abc988a175a8deba15d112f57dc0ba1be3a43067308a68d751fecbce4e94a9c8680ad464d469cf61851b9b1445a15526c627e8fe0c0afc820b594cd8dbd48462e7b7158aa9b5cb7922b86aeecc2f0ce730e98d8ad7a14a9fbd55c1f41420574a807d1407e70df007e19b636ed414010f02ead20a07ff958268d2ed20c2518dbc0990ab8b9f99abb7c9a90c0b391059a82ae29eeb950a4019a243ee726b0756ea48d9a7e1cd1c420b0b25bbf8d97cad40c615257e6aaa51dd4d14249a71410c322548c119f23703d487199f396aaf00cda771b3508d0cabdc3b784b25182212a1dab0a7b5a00d79d6617ff49aee34615b0857aa3e1816ec5af587b22beb251bdff05405d0ab985e0fc0d59b593ed1f5ccfb850ef46dd8496c2cdaa93b3f043e84a0a7b222dac6de8fdbaad364f540a3db4e761aa6fe9133d67ceb0adedcc3264667a21310dc959791bc658567560a1e7b42ce9eaa11a69b9cf44fc8e848e5f02a4bbb927477153ca4c1c0fa24830e7a71822b3700fc2a8bee32134a9d4b4961ef321b5dfad0ff3d8e1c9aa24e43a709d9f290a046057592d214976095a427ee0f2916a2f0af8a46ee6e042087f8cb6ee636469ed7c7f0a34174a0bc45a20d1c2ba26f03f4642221245090ae57d8838f1f4c946d8fef48c0db88e1fbefa8106fc43329d1e43d350e2a7786badb2d62a987fbe4935ed8e562c76758cae9f1afcbce86870864c3c3c937578e23d42c11f27f4242df1f96745cfbdda0d41395115a3dad59eac9841d2c25360e71117d567003dee80eca14f03ee851cd030c08c639fd7a74892e0e9c1154b5f2922793ce6660d083fb93cd850a57e5397c316bca5c4e2791807708153550afa4d50738fb466b19d11c368c19bcd00ea0cee564c4100b556ef02a26f0227c4f6132b31f860d3d563c88c2c6a8cdf99b45b2b51f0e0ceeaf4d25f430b418b2167f569fd7b879b8b7318d37f4d8d4028bb31d72ea24da2a80219cdc2d03ca6638fe5c49a530d9d169fc42b3b61cd9fb7145bbd2d39bb817eed6a109d659fe65649c7cd9df700fdd70f96a6cbca0c2da4a5f39b114e3d3f6598ad1ce41eef2bae37b89b6d806bdd879c4b1d52a9732a4afddbace5975e0e0606de427f2341db806492b2efb226ce66bd25d0cc75e06edb3b44985a1f61e6527abcdb5dc7cac69914c1b78507a0ffa50b689377075e00d7c39389488eb2740f3269b9d2280b12a7bd30fd90af2ecdd0a8f29a7203a12088791a7dae7ff22b72eb7cbf0799807dcdebeab6309d560b89787bb7a81506674c195456aca0054ea9eed618585a704ec56b0426558b9d86dbaacd4ea7a8cb5f9f6200de0be180f616caaaf9ba8d71d26ffcfc962ad6bab10b0002f8e8659481e6b88b8142420c691b3384cad29a238dc6f7dfdb271ba1d1732f9cff8ddecf394523525189e27ce4da7716212987b613ea8274c7048caa2c4dc38ab0d78e63ed6fc65ee0689ed119514a5380ced2bfa1d66cd3aa57eeb5596b0e2dacb0bf56dfd811b2899da0e618d1aec70f7126e7fbc3dc8da20459557fba0d8f3c83135f7569db54ef62be9d946ea35830213bf50b4b8d0307566379164f6e70dce046b3fc694690e018f0ba4411023ad6e9904edb793d58faaf1b81f69dc840bedbb049ed43aab502afb26a80f413b2013ebd8b2cb7dc5415001af9c16c73bcd77f3e53bbe12ec4c1dc53170416b9c65002bd065dcc5127383e1c804c591e1601e6575d3bfa43dd52b317d2ae5a470e3f5680e0b2638730c56a27308ad90ad6dd353a0671c38de4feb1993a558d0a5360e180a104e1158eddd88e7c5fa9f06b40ca7f5857a4449974db2e0825b45c1a8751833eaa4cc5a02d56a3cda76c9511856d735bcfd92caf9cc0ebb42b150f01a9195a300b2e3ea44e56866b3558ac9d33a9f5112fab80a82c5479012f55c9f846acef8815fc24fdf34f7434d846d1ea8208aa1ddaedcc78f10808849df63de1729c2b15427eba53442232a454c32fbef424439de6768ead50aadbf712f2c4f60358eedcc5456b2fcca24b7a2eb616c01c3acafee94edb593cf0625f32e02cf14da9ff0d887d1112fbd08cc24f246ffa3c8376d513ad235bb21301936829c89e2909a731ef6cb4290fc83c981a6c9a6a351a27d11238a98f5edbb3c1accc1557a6df6e362aec7a601c6259c531678cdbd2be732408ce4d5d2a580739a555a0d01b9580796f4ae4e14b42c319558941d6a19288f3118fb91418de43d766d15f272c3718d7b05040f6a481a808772cfe8bdcf0833d6d4a274abf41b60afa66a21242cbde1b71412ade9347ce905d41d126a352f4ca27631635adb677b869033ff9a225a930b86bc29d2099f7d60fe761517f116a4cc5449374898a47567054059dd652860fa49cf4993b0d5048a07ad08fce68599d2ba1e6d992b580a1d76803d75a7af7bf3f0427d71474427e0d5556739b30127c88c234ce46bb7667accb34ecc700ab2b779ff80d41fda1338d82b52a815b1c3f4cec643e51913b4fde56cbe82029dfea0da4222a2cf058b77676f5492db9a0f0c2dd48b06c63888b086eb044e199c911e4beaf5e17ebbf6c7b9054ec1af733b89a2e7f120df11a78200b0dec447aeecbd28099596fa180b330a1900a45bd01f3e0931f30d9126f557c15318d04c59d56fddf04eab41e9990c257b8c8e05c748d2c53fd6a1062ed40a4156c0462c7490f09a26b7e19a9671ba2df39556122e0685c28a76f6e70d26ba5b9ba0cad611fb601f0ded558555cc12aaf66a82a381d38405f848bfd1febeed35a172caefb137db1f0bc784ed9f011d7206842e5a799c3b9ffc857829a3254179a5d4238b62a7981760a69f1360e3dbf6bb8fa92230bda9f82f4f4337c7bc1a5b6215002e3a8a08012ee79bd3ea759e3f94f6de50d0d9ffd1253b7f3b41e35be3051cb8207aaae7bb8bbfdb72388bc53f39abb53ac1030a455ac8547f7f638e1a7360a149b4cf4485a55d4c82390e8a19f838918cce636748446eddebbf0e848e3780bdb7efe7e5544135e0c6e1a8200b9051757c3afc7fe20a6732aeaec7483a3336dde82363d6f37f5f8084ab2afdf3fd38f2463244b1b7853e85e9ecfce5bf2201164cb201f7ef5900d79808b4a121a250065456f7d94f93a93783a30f864407aa4da7846765b8c545850e8c341ef099533c3205a1b530182bb73cce273b0722193cbf788a0987bf56364bd1e1ae86f518e39ec73cd0cc62358b8897b628334a6dc41e84d415635079485073901a88462343a97d5343e3d87adcae96a88d9cbe3d2eb4a3e9797f16a67d58df89d5af8383d114ff35c2d6ed0fe6ce1b7e2d981f2c30839a1848b88b30d020c390b2b43fb21f6df9a11c0509189cc9a0c7d53fdb7d2458877ba481ba951e821d9570da58f37b9bc25e8443ecfc4e75476c9d7026119d7b4d4d7cc8599ddf0cbf7348f2499b9f693189de40fc24c549e5ca39de6b3b09e8d0adfb878f0d4af1b5aa761c6abefff24cc0163224a956400a9d6b1dc95be3e7a783e67fcd6b6dcf2d3e0349defa5230b5f9c0fc3a6049e1b109eaa128ffc3f8d0f7b353e1fa435848317900d7d1a59ece3b1c85f159458e7768e7fd140864c23b2a69dabf83cb01d66014cc63ec0c82f8096d283c05b95b46837cf31a8f3b68af46075c794085b1b9cad80462a5055690c7fd6993c50a39a2768373a9ea5e896ccedd2bac16203b9693318a6a7486a456ef89c911ff84e14ad25a41f48e322e39d6a64c8c97517c3fbdc450ae6b3f6b9311a58f2a2e16c1753c267957f82d53f8bdc6cf77f6f2ad956e0b00eebfa8383e1cca18c8ec9196239870033b44af106c6c5c535c2509e21b0627309bfd9c9f08039f7cfb6e112e44cfb2c846622b5c8d6dfb3271d20f029dbffd76e17bfe124792a94d8bb7ddfdfa4a6d308760b4569315cdad3ab36d6b1cb27ed79e6058e7f54b483af4cff091241eed4999c69f6b80ed318449d524236017c823b03c85bf46d130bf2416a30d203b8f1a2043e177dca0805c9aeac9a1fc1ab40581190baf9717a7d1441d21085b54fb0985ec6ab006cb579f291ecc34042f8be7f46154b7a34e357130fb5f0cf1f1f70dc7f4c1a5f78fb4059bcba4efe60d0ec295b01df309e3dad309b7334f822bd14465122d0b9ee195c09eafff66a3214d60a48229aa0861fcaab9fb9ed66b888fb3eb498d38bbe1832f4c23927ca74d712575a8ace8bc8980b78776fcf07c4bf320f6a2bc4eda3222ace454ebc9d6f5965355c8698b98052e477f0d62c21ff5c26c1cfd48bfba0ec3d937e0703e9cfb13208c91fdfa68792a289c8a9da624aacab49c651edc7c3acccd8f9779e3e5e6bdf9279b8f84b1f8ea5683761c7e0610752b5c4a2799490d5b9b5ac2518cde256421ee0d4a05a173a3bf48dc26ee79d1c622766c4e90816c6e5f555de6c67747dd4ca9fa031429b8d3389133293934ba6c069cd1670315e2278af127fdc0153302712619c23f82d1cd7ed4f113e178c69f6261f93df0eab939478c3f2e2d84f4b5af00bc1b0d39b1ca726c65ad0b353061b49ee22438d9190c6445ac45dbc4201ea0fb7c0d23d8f25f0f20c95cb44059f773188f0d96cf23b3ee4dcd2589c2753595b6b22e4d9314234ee560ac4659f651292b3a35fbfab6009b6da4c7319e4a671f4155fe0715bdd3f7a9de61bfa4014a10b0f7ee28ed8631ceaf45d0021f30441acfb126e2d9b1979e3e6f51dd29f477d208544bb24dc0bd56e50bc31e943c46721a4d7580b7bf2c125a34694c97fe2de8d77b772d7b1352ffb6a427290450cce418ebc02d64100e34d3044c78c627a3e9f3600b79543139a57d4d7cc6e3f069cfbba67d1a209db93a86ddbb2ec4bd156facc2e1913505badf2f8e27b94a533d1675518cbed07182c09e9aedc27c86a9ea2cce3678b7910d6b692f1dd571951a1b6eeba46adc230b256c7ac6f3d24b4210e91f4371c634abcadd0c1347c59a7f9922c685d723861f28edf9ce71467cad9e00bfa740c1000e0a101a9eae7d42af9cfda92555499b9c65ffed9557f8919b46dc78c0e08ad1d297a20f27e9a0f7be5cf242f14af50a8b6616875365ce68249239d76785cccf7cedbd62ea44c20501702d05fcfa2e4e7c54190c51418ac4989ec6540c2d28918d2d3489f8ce9b39b8b1a3f546e4e99b9fc96033f95ce48da366057319c6868b0b693bf973b7cdfb857eeb89903e52241f9a14f689b4fd410a163b8b7142b17003bcc68c8ce596228b3558e088b4913dc8de8124a97855b0c578a3c3aac5b2901dc65af4becd1059d0ce174e8d7eef18aad0bb269d12f5158e7059a7583e99f84b57ca7d7f3b4328eb29ab19bc475488987bc40a2d007ff24c683b04cc5f91ad30eedbe47cf288be9d8ffdcaeed6af8507ace7c156d4980f3ff81946ea3af75477989e5aa089dd59b9062ef4e6db5bf71f4e38d1b048d0b91fc758b33551f44a52fc8a7a7ebabc96927589908197be68f132feb86c739f92c09b187475ba00fe7d6a6f682b3516e613ae4c973fb1b6801551f57c2890dfeb6142f809c7f47344ea3ea3e4fc11dd5f77c5adf302d7e34990bcc0499882ec9966a5b6dc2dc41c0a21a637b2f1778b0853a5f08fc1ca2cf6dd232d4f30dcdd26534aabbc116bb84b014cbae126a08eec24b0290bf09eef7d6089a19b01a78f5a0eefa12822299db7be726855dbc877fbacb058fa821dc2cb4d61b6d650091c3efc4918f6fd7c221fa6890bd3ec5d04a36c6ec94c1638f5dfed9fb58a28ddb67237a205d564d3365e2d3ed55339c28cd9527695abda5ff96213d451fdc2a07e8040df59b5c5d448fbaf146411950765cf049ad135a5a552953579330c443b02086270c4c6fdfc1f8abba1d7abbb41ab3b3b1f13aacc60c1aeacd57a5197a29212b85b6efbad44dea6ba2ec76ac21c2d5f83bf51144c773f9f43dea53daaaca64919b679a55d03c6ca068806ea3c6cf8802dfbf059e75e77cd4f431e3774dbf5e0b4a8aa90ef6262941cae5e385a728f1f80bb8164b7a13c81f18a8a4c8fdb033f8151994e3669a46312ac9b5a3b1c098a56cead412823b0e8aa410a3070f18265deff702c01e774d578970fad5da46235e1026ef80885b2518e8e6a48e0a45900aaf320113449ec439725b98950276f4883e31ecfb37981b789ba0efaa0055a53151ae4f542c83f0b9f75e1cd8d4ed54a4a0dacbf8a37f11ad63bd2f2320b40d940bb4a5a9e2ff9941ac19f8598846b74cfbf7b2cc11984638dda4dce75c8fbf7a6b76464d3db2cb43f94aa2b7b15da1f216dc4af517ee21911dca0da52d470c49dbae5e91ca14fb8d91e298ac8c9e04b579ab66ee4a2455bd29363039596a6e7be7238489cf9d5b6bca916ad030f3945b0b7b1fc503cf0ac67e14ac752977d90c25e52c3c776e2fa11100f41cdb3d67a31edbcb62eb28fa12d653067809e6beac1d4b87aa63127cd55636e3e8cff0c61a4cf189283da39398cc3ed3e108576b19c3df2f7446936d63488e756c21e22e8d2b49046915aa31e77dcf3afa964638f80655bd3d176381f6c16634d7741731c6618016d783f8544176c3547eeff0e30f7ffe9a1eaeb5b6978dd7fe4b44a6a3f257b916b6d3b32f2304b2c4eea97c9de00ed1c26bf3f5d9c3274d64da5fb7c7c9007efc6ea2aaf05c44331848ee26163d7f5870c222d78ab9a349235b442b466eb440721d9a5b4937289642364847e7be2004a75f434aca4b91b7e08bf41419a3ff2f9d3e73617c440ebf6e2fc85ebaa77701829f10921b970783218d9d3b11b138c21ca9a5e86e9c93ad942f51e35c7349b416fe47322f2cbb5360c5e7ae3550d153f7ac9e52ebb490d65e1e8657677c7a86547d5fade23137a0a4a42fbdb3583a932e7cfa32166f2273387a8b9096c1c813592a9d9400ebcc118c9c10feb69f892d7a7e27ee5a255a8e376a35cb2cbf4489459bca334aaa3e4ba84d498d4f4597d4dcadc4d95b10c94f8dfe5184327cd88641ca86f19acc395631b7764e6a4a1db713357009500d3983438f7db7698b6ef0a5452a8c3269992c2fd263ce6e18e67aa2dcd950f6401d9a09599cc8d83244349ddfadbabeaebdf4f2bae376a9462882f3198107442b7a71affe1595be4bfeb515fd067ce5751b9eca99ebf64946db354b27bd6b089441bb4d886b5c4663d009fb3b43eaf106cfdff379a1067749d890dfe8b01c41d7734e745b9d9b25f29c5263d4f4ae95bebd4de015e02f29891884b781626487a267cea75f163e9d3d5c468cb3c215f5dca2e5bda97631ac180ec3799deb1d43dd5525be1ba581830807c4cb549d39a89a8bca3c76d239e8b32ceb92af97e304182d8bdb9a40f270406061ab987c7b9d7b2bd7498be4c7cf3b34a207ab60228e6e74d89b36e5e9c593f681f3d110424226eec5b25a9b1a9b02bff81593c8cd905197efc43bddca925188750ae21f80b6c165d3d8e0e0282addbab031672c805d18c71d9296faf1778e5afe39956cf3712c9114cad801de2b6fade90ac213ce598a26a15f7890bd33ba98e3ebc5df1cff89a774b8843cc9c35862c99b10772a1090f288106ff7f0f105dbb837a50a15752da96ee2d1ce1f928ee98f530734c53a454bbf07dc698811627be74eeec54a599c5aad8659124cf892ef17848f67fea07964a9b0616c909b7284a7ed0eb5633f114e4466a142b6d8e0cd455d38b02a80703da3d4a63ffaf4d5e365165a7f4306e73c596a421b6fba030b330d699f3919256e4fb155c96047916eaf807285bdb2916e863a1a5b1873d7e57d7e17be78e5364a60c0e01db416edb69afc058d2ac0f093a77187ee83cb853d495e92ad280090317f777437a241259bf1bde49d638806aa31b9dbd1773e3a1d39006880b29549b4f61942f572d28e346acf8c851453af0bcf3bb523004b167a5ce2cb45557ea28a75fcbe5fc1a94f7e608049c5fc982da0f4fa2592266cb1573460234afb17f47bc0da6af77b723272448fdcc908c0462d49ada6e6a45f069ca1d06d4f7cdaa964b8b0f25fba9e1ccb9275ae92104038c2befdfc87b3beae5ffa1d75c686c2b6596c4b89f4c82fbbb09977527e648a72896c82bac8cc8fd68408d85298d279a0ad09d72b7f32229af8569842f24605baef03e3049c9b0b47cef484151618c8ec447ec0bc4e664ae89fcb53a434f79b8d8f1e5104c29d00a185ad895bf5177b0130c541144cbed02819a60f3566303ccfca6a102fdf5c9ee50c981aa50edba2110129dabb62b92a05f03b0c32e518afe52ab28cd5cea253fa501198250df5b70e99b6f33cd011c825b96355f623f9392e73a9b1840a6c4ad70bf8359904c7ba6a6d5c112ff75bd7a12eef2a2dbe98d606b8768e9ee68807bffafe484d2f1359cb537e3e7b32e8cc77026d350caee644008f771c185d79e50dcf73af93d92ca5621981ca4e2f33054c264f97d36ad4e2db04e9cd5798db37125cb271b65e580e9419e22a44d502cee4c326758c038d32d386cfd3156030d9dd31a8230a3c4ce9694fb376f0bbb045b6af9e056c084787f7f9f77e86776f97b62d59a527d7e6a209c65a8a6acc6d3decf6471d9256362b6c8061138de163cb74633b2cc52cc125f24cbb726c677e0a075caf7ddea78b7809fb0a920df569989f3d767531cff45ea7a1ecf3b5546f04d5f7adf9b78a9adcb0ad72db96c2817470cc505efd324ee5e84591be79fb0e5a6914964d4a83e1ec516a1675b486d2e5be66c6bb0018381525ba37bcc33848e1d9bf5b1e6693f677a142f4957d762acd41b7e28bf1c96891447b31ab3b3147e0ad449807626705af0ed2ef8183b5b4657f4d73f095722c94a580545a9c4b061c25f9bbdef557b7a8d2ce01115d8700a34a05e5f58c9476ae9ddcb77ab904104b8461aa586f681f697e915e2f316838386b92bbe0f91001bc03bd2eb54f48536f39a7008e38ca6c8788b4bfafa5a66e7c4289d0079fbd4e2ac05a855ee0e97b87dbb73e72c94f4ac8a4640d6b9a1c7df23d9d09135184a2561fc8e14bf0859dd80067d98f230571000e92239cbd73d10d99899b32153f2b3a88469a159e1ef7b3ab19e0a2f995ee429acd56bf2b5fa55d83aada6e4593c3ff89b1033924842f889e9e2368c27101c14b8ca471c21ce13d91a22e5264ff686737adb6abe57d8e58176d4a849ff923bda50b1e36c247db1bef20f8b41e27aa2bd52feb77b4f8029c8e11e514e77a5aebbb916580c190a488e5514b69f592f0257205921cf642eb57384f218bbf786bbb8754c585e7451e4d422ddb75668c3ac6b4a3eae08ee1490b5f1d6bff94c3116a21cf0623cb4288a00e11e529c217ed7797abd68097ba6239e8e5203e9fa630d5822c8f7f81b6cd7475bff742d83da1a50ae2477b5dab35fe35dcbb31af2bc19dc2aac58042ed144b889d4cf9924abea129c565dfb482d4e16e6d520ce162493971fe897d5e417813c6169faee693fc7218d4ab2f30c7ccb64df5f224af0bdf50e1e03c56f0acbd6031915687505ce84c67354dc026566191e30a3eed58f99887f924cdea8fc1a15800ba04eb55ca3c19020a6af32b2fc39fbd9014476cb41935d6733aac696859c8e69245c9c8efd3f7531e0cc13b1cbd15fe610d18ba65e68c16bc98aa3142aaaf56cc470cf401beaceb4b55b392a00aa9b08ac351718493e0140d9f4b4ec2f388dc605a1573e2deddafd2ae6579c63fb545293eb646b53e51201ef8ba4c2eba002f6634a7d5fa658c89369a6e8b3a08f2c6eed4b74f65542c36bcb3f77ef827a20ec049bab13805ac131d229ca509ec7e1b23380769c0eeebed85759e4a7d694c47a20ea165ef1dd4cda2e4e0b9f2bc7e605b418132d030123a1f72c7df93009957caa68e432f3957e9c41e04f8b5151670526edd578eb840d5c05d37edc1ba8ff7475782d9fe669e847da1577e61581c6da47e908378e7d3d07d81a14f0755f68ff910a6a2650d34a7e4f5f2bdd978dc197f5c91bbb3c7864036a4bdf285bf31d94499fba808001949da5310fcfe5b23a7bc1d38276b4407fa3bfca9d8723743b2f297e999d5964d2cefe1028eeb93432780a60f6b33b6f41a1a793a3a7a08204f27524191d48ab73800293bc3642934907a1d210695f11ccd407e8d01056b8316e867f8a316b241adbacd34149970af82a9d858e7e022844846d38079f870618bec5796272a79e24cc1eb815f11ab0be09bf5126da196fb4165f17e607accc94c73205b46dd94fe81a4cb0ed4f9f3fe70f8e23a4180b47d76ebd35b84d3346d77ef680bddeb1aaf7372cc91d12d707317ea5d5254f6cb57a59ecdc41faf6e9dc4b44ca21b31c82f95da05c9e7bc2304074819cae429f2def7970145939829c88e64c9f049f714ab5c7235dfbde58617788db5ad60c94b5c976eb66f636957a9e5974d7df47adccf28c2674966798f7b44e540dded71d4496c51d9ca4c6b4bd765db5ce3872778d484e697bf381f7c1432b6c04b3df69eda4ad6383d48d9939f091037118da9c7e9b3056ae4f78c372a532945bc1dffbea8263854191248161ae6f5c11ea2935e54a288275d0f83d374d173d70389067c971b8ea82c0a87928c1fa382dd07be1f694b95b44c03d859e58c8a701e0ff010b436309254f1f0c61e6de0841ccc12586701269d397d11a7f0726940054a38edc58be2823e5ff3b85bc3ae7e5f89d8c7a822366e49667a0048ff727e35356fd758ec01fbdbf5e10aa9fbf1ba91365c98b54e9c10d125696b43cd460a8241d5f89f1c7693d4f890791d4cbcaa0fb836896c989ca40aa3a25df86e56d7fa1f8282ab763413ae8de0c5da5187aad5cc9c30f2b215a4fb91384f2e559528a1624c1e40c741c6ab7ddfcc0ce379a4629ef81faf0595362aa38b47e003679c104eb2a3e634d45a1dfbd069ca34651b727f505b85e9742dc78b1a7a6fa67a4aba41e8833e0e23ea6aadf9b87677c92de60be4e70e7a16cf70fac196dbaa8adc373e48661ca7f6d2b4e9c409c6eddb52f2755a86167301b99c5a3fd8a98dc0a01c32560049b7ead90cb9e810bc8e0e54f73b160ba7c4d7b1e2a2272ca9939241820ce2b9d7b30c6438dddd5cf72f1e5f81e1966fbc286da9907e851688015229c7e60fecfb24c2dce78c7bcf154c4130f16aced7344714381640bc069146a4b5f19d154744379aab7427d28dd7d8e3a76638a093d24c88c33674c30633cfce57d61c15ced233ac80cd8e7c9a926f3a653ef19f3b70851c56e8251b1fc1d605012246affd58837c8d2f6d1bf3ba7813efb417159cc1b5bc1f19e8727d06d0ac2fb85bd1e4b189f390d3de489b7492709ed6c9c790b1ee7d7e407f9705b391ded7c229a72a2e18bed0f70979c5c2a17ca362515146b8c4b7b8dbe60d89313aa756f1a39d667facbe989cee9ed5ee1c19b88a0d448fc587fcf31bf2ee2dcb6321944f6eb68eddce5551d49c032776240d36e55b2c6aec09f15e7a2158a2b46a56b70ed2bf76650903fa21dd07032d29b62703427bae895cd509e434e0b28e1cdceacbe48f85a2177d2f8edc9522627273f92c6245c4280c18f4913917a9ec375a52fe77775bf0de24f4ebf4b4c3e7296e3756c9ac1c30673ee32076ca1d433c1d4ac3a9ba670e53aa06c007cbeb3117a1f185ce8e0c18f8658c59ff7566a89e60957b0e0ce0be26ba16cefbd855c3e673a4c28a8b02f0b406aefbd36b519f6cc516f6e68ea359b253439d1c7f47de944dbbb6d18b83511ea60dd880639db8abff1795e1dde223f9967bd14a602170b6e8101f5545a9a9cf89e141070254a3e1a726b869100d7ce9630d4481223d0bc2e1033e08e06f35e0a3f7d3323d5f021d100d5b65beab742012a57b95f52a28106cc26f60f4bee3a9153072a0d9a11df508ac3a4a5d1ce6ae8ef2df29896dc582a14fdee6cd587a4bc415f77706c954ebd837fc1b3de5d883c7bb6ba327bd42b0bbbdec4709a85b370dfc3ed6b80c59f326c211c6f406bb6106938e0f2f562ed954a89e8377e5cf49c72681d64e7c056e0ed405001632c243d569a8e759295b3828573f553f2cfb207e9774d5d126d47c3ff6a31f00b1e603bc310a8631f10dfd78ab8f31ee382991869e69b623810b9350468e769c452a0e8f11aaee676a811874a39efd70c39ac99aac233f23b2b9531ef8879d9f85dc7a47fc7e7bdd15a47b62c08f3c83bf28f2b41ae005addbe966544ff3a54681c9b5e50a4c6870de3a76ed8c1aa916aae1a2c5ed97ce39cf19c4c03ce5c0e11e36a3a002ff4f3048538a4848f821e45be1de168a5d90a3dc0af0ca53acb228bd6be7087aeb91f85af43dd001914ad3acf52db3d443d87a8330f440f51e8282174441de87e546f7afe64503c3f88fe7408e6a30dfcefd3bbd0c28f076ef5ef10401fe92648ece3dc8a32332a9c2e9d920489047b136780558779eb38dae86bf81698131210c0f46d6d42cab4fe329795154e311937b4cec9e658f116f2c3f4edd3862febde215df4f366d573e42fd90bc5c66f86f2826c85aabd328ca6c3a77fff8dcd724f64390671b6c69658255c6f4d197991c2941f1e6604934f29a83003fa1653e27213b61cdbb3db665c95218f431e6934355cf43bcabfac57b06fffad1d7f7d8f477d571948e7e05f6ec8d6f7b0c67e74086926ddcf72d187a7bbab4dafd530593fff81ab21355cc435958f97ea069176e2a9525874bc727a91ab64f66fb36a96bd2eed8d76561eeb5a7e5b6f3e7a9f819594e64bf49d66cf9a797eb1a12762c4104ff4df7fe466f54030bf0fc413a895ad31d2e17ad2a1266d795f7e6caaa4f2a3106b22797dd72ff6cfe7832448030094d65acaf77892b569873632bab1281c2ced479cc1e36d494b44f3ebd277d40a1597234eae03d80864281093c36328026f47aef36883d850b4395318378a6c96bdaa5d251770152940155e20a130eec98296ef3c05bbdc5054710d35e7230e12b62b6f3dd6b846cd97cd0a2bb52ffefba17ca1922e1bcfcfd690abfe0efb70c580811fe8b294062366fe89b8770a4f214c379bfd492e1fe43d202b7a5bc055849353d8cfd41672151761e0357b00c8a4b255e14fd4fed519300f9c7e16be60e63b403276e41d0bcc3045619538f8f67bc46853b2cfc052c9b183820eedab0d2c603cad867be3b0bf9c0d2dd38fe07fc4bdfa1edbfa2bf292c3b8b35708519bf7e793de6b3a0a256c30682d8d563eb67446b2ae283664e4dfd4055e023fab225fd6b940c081dc5634aa3e52c8a27e9fc36d7d25949361e5a4de82dc122e58a0fbbafae84badfea9289b9b98f03dadf7be89db02d7288a227caefa4c1108ca2c301b4d2091670c91dda8f7b535556d9dfb254a7fcc2b51ff99a926c827dbcd8722ec2c55bf6ae7e52f36e59678e08b559c4d1c058bf1096d965061633def573abcebe5f31d3a63c60b3309084ef4e420d0fb4596002cd32122e603f4bdd54b4c7dd4c72098764df5704aaba9bad2e9915ad9527c83763d2a2471336d540cd2bd67a9d9985f2f09da8a0f7b1d7d226270c87f5e3738c9916afae29b53a709617946b279abb8180e0bfdecfa77cd2bcfc39e84427cd4a68d888f75df8503f69a39a44b6347f8cdb08bf1df86df4d2719d01d846e8cea987b4f028a0ee7e98446262d9a8e626539d9bb824d3259df486cdf5c34cd72d49d9d5fe8965f3a4ee85d37441f27515ff0c6c7c503b2d605fc8693c04183782a10ee74202d5812307cd267dc1753712f64167fc51ad38cfc01c5b647d8778f9f0e1ccd68c2637050621f56946a1d07b3332044d292b7149900f8a5af98e66fdb15bd31a299fa8169b1853df35c8e1d026d87ea26cb4782389a6b8a45463e04a991a8e3faee0c7a87d793221e6352bcac1d39725879322546ffd9723a03b243004254a8602c36dacbcc506dc01bd0fbe07fddfbedf68ce43eca18e5a7f6fa06e2c0028e651974623b8bcf86331178df5c861af2d2ce2a3178f46c98d438e78d931eaf2c96a65e70a05ac946b0a04ad37ba1a1fbd7de6788bcd297f9eea5a5b880fb5516b46f7b3f10ad279e201ddc541d2b13c736b7d801afa01773b0ee0d4e0e9e5c81bc12631e5c9cd4c62b0dc34367607d30f93090dc01d7abdde64b36c93dcb641e762c476920e0431c57526f866816cd6cd30bd4e9f675cc32e2e950283ad811f2390c764a374c1c7e6c057b902550b9edadb2414793b5b8848a500fb2824a8d210c3347758b670de154f5739714d4661a26dc7da934b00af0dfdd78d374ba8efbe6c828cfde43071e026fb21868952cae18c97159ed4956cdff02c820d9cf450da6100593adc52ad0c1570ad4fa65beba3138dbbf51a836db9002722c86c6c5d3d703f9aa009334aa1fe66e81ac5db6d63748c1047ddb860dad88063fef245ef3cb55c417fa07592af802a6db55a874fe167c74c2d5f64202c7184650c40aee45e740be9e1a503666b579bdec5428b9f00f40eddbe445e6f88d3790c14697fe0038b02e41028b29ff0cd3bacd15be9eee69c01829ba5e103b69737c9cbcac6122611bec02d4fb8b2d614687c9d1a81fa047f8da8cbe4edeb6fff36b6d9c450867d56eba9f992f8e119c951424e2544b5f6701f653861716cca764c4488b297add2d98d95f8cb41cd38968d4a2a9fc3f6bc05c313ad789c5de96eb43d4045675ecdefa564c95875ea14b543934a6b5c92d93b2baf6a5087f798a1b29abd18b132380303e6a670c4e0be57212c4b65c4d8ed1b5566355dc57fb19459baaad6644eb49551bca03491dab846eda0b87cb3f0cdc46b5d12f261dbaf1463d191f3b4793db6f101ee0f17d2f7e9b4dd281db38d3fe400dc52d239153fc557bd30a06bb9a4d4c3d584c0c9cd59853cb745976b6c613268fcfc5864a2fcfa3fde3c8f44c45219b4066ff7c8ae2250b32c2ec606a9f49e65cd1b6712c838931dc40591092f58af806dc7ccdf2519f55bd2c294dbb3d936f49d22dd037138d2faa2e351eee88295f27b14542b422c854f85444ea839e31e07972ccb6c11de62be6c585a0232343355177dcb36ab0123bfeb6bbfd47816790b6fa8eb2124e89de42e4c46f29fdc4bf0571b991286a5b1fd44ccb473f35e35ac4bfaf38e4b0baaae660cca91b596e54b06ec202a58f2aaefc158e5c51f11e1a753f9f399becc4ea752c24d8c6a535151bd98fcc59266158d77f969131c4eb3284d48a4fbfe4b303d0db92b05b5c2fcaea127ae305aa95670f13387e30995e7ee836668d3f171a5215287177144e984f96edf3c461461f931ef91c19729b7a18f6ee6911216cd4ad76c4a1ee31bb66d2233c8323e2713d4a983ff7329c884fd9778a76760b1c17962089a8672fb890b1b6fb9f7311e1abc6dd8a00551621b49477b0d998fdf0e4e953a565e3e322d4ddf0f34727662a7273c50046c8a94ad2c51b824a2e3eef876cc73d1cfa4de3ed5b1783105a123503555c148f67822db7ae1e190a344250a7e058994e1e8c054eddc4529ad9d3cf64068cab231bbf29d00bceb8f48aec97bed7d75a7c2846c9dccf52cef47f6f05e56049e301830f32e62ad672dd90c5fd08523821b3b536de984905aec16e67af4a6d46f249d48dfb583e24b7429717028bf91ff4520b5c17b806ab93c217422856c61aa1e9f6b8b350957a8b9a07e6cf9306ab8cd682791f8a1bfa285c4bbfc3e60f9b0a1c591619045b21e7ae643fde1389f7984c2a38ab6d8476e0044c4594c8d7e3657e979805baa7f49a53b646159133888e1e193edbef3d257f860689469f346d9c59e1f7115a93d987ecdca949b74a51a66b75ef0cc7ad362a0933dd6f80a2741e954375144b2f204069ff38a2b92a4c1dae4382647ac45e3332cb47835a82d0cb621ba322ba8a8296974d8f4004bdf54858f1e9499ebb954418fccb4eddc2427f29b53c35ffab5ff8fe0be52fa9e0a2a1010e93a61f6a41bc71fba6e930dae2788a6b001a16253b86f1c4539bf80c7382f8f19d469d83f199e42a6cf1d61c54702a37b20431126584abb531d82363337d09b116596cfa050893ecc00d85d56bc45942db0da8fe2dd77fafa1b4453cbc1d95946313bc15ed73bead47fb1a37da869a188740421e5528adfe9dd9c0cfdb03001873a5b731c99a13b6b7853868d1b6e9c2da45d052f8972678e590763b23dcab436668247d034c32cd412510d29d577b01cd9adc2579b9a8537d49dc655eb8ced16d5d0d97b1dd82dc3e2fbd03d01f5136fa0b99f205f43a4717b646f89c3127313578ab5a080771e2bdf9ea518b80ecd43a9bb8732a17165e6aaf22cd69a6f3da141cd1241014235817347ea830b7a9a4b7bceb2616e31e29ab6bc0a83d9ac3bb7ed4b6ad4d896b96652b675573dd14cbb75a33a47dc24ab2cdcffa41b5ac0b975745c3c9032654c084ee72dabda4e06d725b9b58bce02cf035be0900a5185ee1f71b5ec3244ef1494524d6b551f49899bf5d2dcf1ab3143c025c9439a184f3b32cf3ee9352d3bd0fbf8a40a35e7ee68c2406b2220e5c1082cfae04ad403dd59033e0d5e9b3da02257790c07ed071e5e0530c41fb4013cec8738d01e6af6f68fd414c49288569a811767ab12ef779b83499cac08472c2997d60b0fbb060fdfe43c42936798738800a760e3c957401fb2bc7a082d8626df69d7f9b37a19b312b15d283770507508339fd28d71ee8e386ae7030271d83053aba8d77bbe3fe1e88485cd8adb7a09fe12e10735b8a0195b32a0e6431d3ae85e5737fb9babf7e209838c8792ac711490a191aa458f5564c0264dccb02172f15209f89dee01185126cd6cd8a911653a65050069dad57ae77d70e4d3bd2e9bcc343ec0101ad66beea08af76de323dc2400069963290913152f1e0d35954f72f53b3a27875dbea3005f099f031276b5c31c315531c221bc5a3a564e4caf93a4f651463582447e18c3fd021a4c67a6722d05aefe55f67e4aa247b9da3b8d1c31c0d6fd55bacbc5341dfb5c5c06f46921a662c5ad79127822c422f50d2b8a700d02749d2029aed0a8ed85d4cb96c3171e3469e27c9fe2e55bde5e623c974b971da6f681b6ae15484a506dffb054ca2b8c7161c10ba016bc0eee8afc871f1d46a27d484f2a7d15c4818b8fab7f74365cb5d3052dac582e622b1f2413bc79e3690b76b0e3bb203117765943c2776216fea119691bfa2947e333b777f589217f2bcd20ebe8cedfd8e11dba14305a924700861c88f38e40b0f11d91a2da26b849fe0180e1d2b7851ecac7b3125bb176baf397c200b2a0b55a76ec9e7c9a205e875883cc7497c3f31a8738635c3ff5a162c1664b4415b680f014d2dd5cbbb1dce60b8ffa7eea3b64ace93d79e74850e67a776dd29fb4c5db166d37a3b6c82336ceac2669dd07331800e4c91fa080c3392c84bf9512ba97591bfcc096efc52674d1ebd39c70b7665d159f67e031cbbeeaf061822dc59416d7c54855cb2e7ce71c17a3e94d7074c5a9ce3cccc5006f933c99326b7cf7da5252144db1b65415dab0059ebf48678fa8a8be09c671228ee3ee9bb98ede61a0325b881bb938d678b85d21f10d0b650fd776dc89a015af9f8dc236682150fde55941a4ad52b45ff401d9c1a05c373bc0647d6e1819ec2f0dc64c67ed5bf31a77e1f74e54ef777ddf6e791090a278a8fb803b4e9e8ef316ebe93b4fefa5a375a099c29732f8a77d251efa0c23d2ca52cd9df8cd49b12c5313419da890d9a71b197a4e5f1142af4ecba1349a827ed6befb467d707ff478bded6ab62ed7694eaf3299a8e82272c5ade8d8fa07c686c1e130a023b10bbac6ef60766d07104850fbb87d98b6489f901a2119b154d3446a5f7a6196808dbcbaca5b565dfb8143ed5b96cda24c69547792eec94ac0f8bb29463ddf76de3f6ea16e32a3b976910a0ca6df0596f0158f44d0b435dc8bb7547388de48d961928d94aded437dec74c576e04a4776fc81789791c40c82cc837e152494e83f8122a9fddfe8109c6ed3e40739911af11ac41a6ec6ca20cc5b6ee5b9bc038fa8486a76a5f8adc160aa602df63c6c6228d9149a3dc3fa77222893b8a9be5a86a6c4e7a1d20717188e46936771bed524f6967464b40119f3866f827b73450ac34bf1bc73e97822521424346819f766e2c9154be045937061c65c444d290faa14ea7eb2920ead934f9e9e706d568d82267ae848a916494f20898bf57ca174bc98bb1b8419642c79d607c1817dc8a86bb7f3c62f18d3316e09fbc78648fa785ba5bb1ab2ec1fdc669499826c96b6425e49acaaa0af9e86e123175b7d432369f5e2d8b81a5542c036573c841c3c9e21f135f6a27e61bf28dc79cbed864df479a08fd8199712d02f40529ff0bc79de59533fe138df7d70d950f341286dc8e6e182ee6ef217287fabbfb9d8035cc0c3009098b600b9b27463bb1c6ddefcebd6fd8628fafdcfc4cfeacfc97c77919aa9f170091e1794a580468b0bd7b8339b1f5c5d9ebcb915ef472def067e23d7d2a295ab43f29eb72b18b64fb65a7b669fb7154077096ecb2a7db71d733f72b25a095bacf01f461a838352bab69545297d2ebf93a342bb2301efb4a710f7d47d47d41f56f490528ea51bd2ca7977398fd98be0988b312cabcc6968ef5535b011b1bbf17f42818af562f4205ef9b1b457784126ed3402dd20b65cc4d55c82fec01543581fc4b6d2b3f80392a41c6ce558c90c7d9f23bf2150a3124051fe938db7653d57aeaed0e3d5dba841b06675b78a863d7f05da58969001b061e6f0f8dd091427a2452bdb58823fff429980e9f57531e5e206830a541366c2592f11f12abbc0725ea7d8f71fbbc507d2ab01d7f6aac25e1260a0824044124b3d08c5ac2899b06fc3409688f51ff3951d03c45815410618419ec1437871dd99b81f170ecada4a4a8980f1d6563a0d127f66cc52b96dd32fce90eb2a4f29d7233a6257e3b227f7745b4918acf2010c87097716e0248aa72fa7375f4f1bf30af08b32c7c1a9a336bf82746c2adbdcc028ec208af1fca089c464936306b0a9cc7eee4dbe30f6b03ed53eef59e9654061f0dae161f89cd0511d52fd8cc007fe63c65133341af24122e37f85318e4d00d2d9d61278a08d25e6ea78d268890497d6f5b5b12b9ed656364962d26f70e005bda839be57c91dd53964dcc3af5b85dd478ec568d38d76d986dfa2fc7515d660b611c8e58311833d64f5448e4f774ff272785184d28149d5703b4cb4b1b59fe6bf5975a3d5652424f28beb440aaa43154b640508aa246a7f6de983b6c5b6559ea55253eabfda7f5c7c06fdf8113619e471ae3c29492cedc7435f49a1ad303f0fb21f31988b0ca9a4c71b069f308187d42edfc97f5471d268412f9a41eba6e5b01bca50ab731f720e4f77b09067a1786f54d139083e5e205436b94f333c04a5b0dbdb18ec3aaee1f5bb7a59270675903e478815d655f1513faba403ec13ed355b3cf7d7cddab56a95e394fc94f8814dbca77915f8f78d9920b974fa4cc6d6687e0a5621585dcaa9b9498dfd6509679fadb307ac733106413a1639c853983547174c0370fb4c5a8e053e4d7391d3d7ad8a58a589269c0ee0726f7e565df81d1bdeff9a5941643c0e89878532c2db7db29d89a0e900dc754a4faf05c9d227e6ef49f5b608f4fcd1a962b15e59900de42b1e6d4e61a190b7af3e078ed06e4ff2a804e4c0af4a97bd9e0e0c048afc72a4ddbc7bfcaca1abae11fe7eddd17dc9120b9afa351ec72bf02fc5055dfca2681b6334a992fb02772070d8ff444923acf753182648c2c559109b9779f3188c37041660a87052a59c50dcc994f9d7cc97021815035a9c48269833027b0b65dac41193545fae01a3204816a61e520e1cf8ea509645aadf4f28a677b66cf437b97524cf30e826dfb743435b7f0fd2760c204e090cb2fcfedd0fe9d734acab618e7a37be53f9c1dd66629eea9c5dfd7183e161e0de0058c78370483e13489f21585fa17fbab85f4312a9e4202101b30c618b28b53eee3b485e3d858b416fdc674f92844b55509b6da93403df03d3cc18e0a483aa5d87dc4ed7a9a40edf74f19e524bc3bfc9f84bff636227db899e8fbdebab443d7dcc6a4dfee6d9386604eb12302d30f65503b715622209a2cd19a309a6d87372e2d9d05a7717c5d44b92dd4dd69e0d6b34b247d768b5043e7f9caf2f3b8d983c0db617726590e92ac387c3f2e5a949d7db217125039a83e752aea4a9217de0345930e512ce6bf63d552fbb36b2ca45a637b9eb881de7909eedcfacc601f8b4d872ceb4c46ba98bed8998ffc4c59ad06ef081dcc36516f7e73ea50d02e052912b7043466933df9a5f2021247596ce19f5475b831e8c1eb601b30b4dbbb330c7ce0ef7fc67d0625a0a6d5c1294fc58fd1f96eea71e5585814e427da5e79ced56741a8e8c5933cfc3edb28cfa56a6a89dbe63bbea9743c4e151dbfec9b04cdbed202b0c3a19b914802262944dacca63a421ae17fedf69426d6456506d9a91138f850503aacbf84ce8d604f0001dcffbc6a600806f93279292cdf55593d0f45774fe7cc5a7daf730bf233b3a21f68cc91e11a01a11f01724d6548da2666a5570fc9774c68469094856817cb4162d753ff49a3ca8ed01c5dd36b71fb50b22e86747a8ee76ea578206867bc6cbf176366d68d63907286cfb8cbb4686ce8b3acfa2a12440403d3d8970217f4b31b21bcc9b1af82bb9d8aba4168163936f3481a634f195bf223ef2f6ea8e2451fdc413ea7590cb78c34067520b14ccc2f1f98cd1195dde4d7819428331fa79196372538e742ae51ba40f35802fb02713866b85a8211a3b7f7866401a2d79eb169d93219759d8533b752780988f4844c6c77d0b0ccffa0382d302301efeb2a9c4e6b7314e7d07d425f7b072cea34473e59b16105a64d7764b73cb0c9b833f89520759d59af9f158b0446c71566565c784b01455d9559a5c9ee529e7b5b953ea075a7c11144ef02e5a1d6f2dc872e4c423600a9b</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">请输入密码</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    
    <categories>
      
      <category>数据中台</category>
      
    </categories>
    
    
    <tags>
      
      <tag>数据中台</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>数据中台-03_数据中台建设三板斧：方法论、组织和技术</title>
    <link href="/posts/2022/05/63cf7acb.html"/>
    <url>/posts/2022/05/63cf7acb.html</url>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="37769165d94d01f8a8352326e1429c14fbe1eed32f61b667334189db4b087fac">4e4fc70cc91fd42566446082a751780fd5618d041572b8bed7c41bda7a5fe16038be3debec314ec22c9c04546002995517edbdc7fe8748f9643da1d70df09c1fdc07ba624ded6040a88792f05569b34281c7d4c9620fe61237582c017961c0f3d9c7b208382239de9992e72d1ce7268ce3026a3f1142ab10edc1d62b1c503c928f2506576e1e60c0d96bb3ceb011b9cc006ade90069567218d0b7a571b9d472dc215ead986836c53d21cf1d76dfb0567fd03bef132218e69532b61c102faf00526a4583b96450df6e373da834868adc4cff721804d4974a36d86a164cc56a442ea48ae1aceae6ea2a9d0c49b0ae93729c15f0b9141e06938647393bede951b199020c55755743846cb4ae1075a98a21eca4af803ce87de1b6334ba2821aa4ff66a938f5bcf699c1d2b3daf4c4e6667c8959dfb9be23eee7e0e6d0d3aeb65108742be6d746117a1d6108933b29f00fd43a964d0e7b7b080e35fd4012ac2d39d8f4348a5a7205f4725dd87a33fe17275c44791ee9c6cbd4ad6af11d7134355ff2cb2aea094be92295ee0dc3272990d9dfc6430e094e8df87d7f2b5d435842e16802936bb36ef879d1dfb580afb099f34aaeaa9d60ac60b8a2c76e5547726e8b138833823e4a18c0192751f2b43928c26bb60d8ecb47002e6d073fe064998cd5f7c1e7ca6d64c6fff3704607a87882423cb3eee91645a5ce20bc46df446e3498f66c2c0a19b6580fc78b55a70560d018ce600120bd3ebe31a88dfb227c934cb0bd7ee679d8abb9412f6cc8b526c690c4bd891045468ba2d9c405a108ba8d304081bca86cbabb6c8b6c0c7aa1320075803b47a591eaf5b0aeb05f8be4904697b7d2b86246288b5d461d1cf4878ba50d20b2306fc3725b39c9cd8e80f0d52f33a6702861f506b0bfb99bfcd92ad08d273165cd52ed4484ebc621cb69df1e4118e5feee40b7f919d6d57a5e4034883c31fef31c6a647d8384ae748ae5b666bffe22401be5a5ccdb8b711df65e3254940fa3226ef85f57b3d979738622d202c50756195eb85172c74ff8f6e86c9264d187c3e24bf58ce7ae9ff17af58e492d80619d3361ddeb29c49a1cfd16e909d214b10d3570836cc8446b7e7780132b72006537c46b93a4e3df45647151cf4836e6c4761602df4858e5dcdee48a0e5c1e0866fd5f586bc041f902e9687d7050e8e931b6117b095484588c67c94b44c1b68a29c95777207d6848d7cea43c8f655056f20c72c4d2e9287ea3197777e051b94e7b7d5e514c627a872fc15a9dfc1b286180a78767e36d26af816240aa247d919fc95919e65d6f87cff6c26135ef6364d0721bbce06f495875897d8b3e06494ccd324974a97ccd1a6ee25ad19c3f476240cb128bf07c8ee862905f1eedd3ca93a904dd0daf98e6b74006f6cb08654bee08ee42086fde07be9f1214905ea8968b4f514e1d081f9f53244026a039fa34c9b400735e47f45a978b34ae20c06a869fdc36f16b92f56172b852524c1bc96952624e380780631d5e839c8b220bed10539edb86607f443d8003202f25f78ddb6b376133bd7c4d3f807bd27e2015567709da541ce2a24e2fe7a1f56339a62935097cacfe13ad2de7d493a24180661f56eab0d9ee951120e97f41303be14eaea921c8ee88974f88e0172768f5fbef9ec9b099f81f513ff0edc1ba177ebc490759187f523349f0453ca497ba5245a17c2938811a5a30502ff16fcc165718f217e8b5a1a09a65fc3deccf0063ac2c601e59ac68aa3eb62646962f4c80d9f548eadbd7631209bf658762ab49abd0628e24db66627138c52929c006e50146e9afc05ace8fedc97b173f36957e4dcdf0ef90be343f98118e1e148effc17e63037ccee5607f967a5437833c12b342dda251b11b9d6796ba0e40451ab7f9faf0bb6b1bc5674b57d38eff36014f6e28ca8bcd1b0510266e7b07bb87121414193246a24c403c1f93a78c85706f7d8faf85df58367bb52562b0d6fa3a1e7d8f4f3ff1b72d8cc04840a6f5fb59f81f59737b804188d99f9c4850fc58e5974ea167099bde5b7ee7adec96f557c49eb321f29f4d77cec0ab7793da6c8b19e567ccf61b411853daef18d3c83457e8c9134a5951c0d357190dbb03fbf635344f5841e2f97df26ffc030ba3ef8612285fe7bc71434a8bc7f78ed58727c40203db85af840a3b43f4b9f8206aa55bd607d7b1f71e3ce1211f1fb50eca70bc5420c409dc08a317f77633a9df28b3916b0463ec91389e8bdc0c64d679e74d276b455d603447f47a53f7f3309f4527b6278418cb71588237020c88e7ad229a8a784ec01a353e6fcf966ed81f891b818d82a5fa62a7b365b3c123b7869d92ee6985d030fd79da08d2eb5a60691337fb0f548c243c77aa0dca920b4a9272a5761bcf5c223120ad043e0612eb0316117ee9cba381e052287684d7e8347f5b09f6d1c02bee15f4b5f1f896df6f59405c08859181429074da68b771f1f06a02e12b5e333e0ec083e97eff4cc33842a1849c0dd7a043d2d85959a67d443660c598bd0974d59f6be257fc5de291ffd07fe9073d9cff68053eb2b0759dc2cd3d340c5138ec90b3907e79c7ac59098e2e85a463de1fd227ff86bbfe2e2be0174307a3e643370e0b71a4e0ee9e0fc72e06d9635f349ddaf096f4838b205941dbe696dd872233aaa3b4c346631cca5af3f3f182a5410d2feeee2633e6dd88eaadac35357ffab48eaf0e3282cff1cf8cc32f9672f79dc8cf826cb4a90fd077b8333096b7e50c4b6690653284988b1d7573739666f7962182f8a484854f8e685aa288f772916505e2ea6adbdf378d7b188fa913d80ebe6cd7bb724fb6a4f017ae5df2369756ef2f2eece0dce04c321a944f2a08cf4fb39475d7334202dc4791bddfc36c60fcd0c1ee251757a9d4cde108e7c74c9a0d3518df85133a8e6302d6bac53f4ac5449646c6a3adc9db9d68c8a0f3dfad0e5d319618052a803dec8bcd685e96e0f16cc2cb6ac86d8d3febf9d447113c14a5f99743f6de933c07cbf0332511ea3669948cad2667cf312f9287c01ab9dd017f8d1aefe9c280f97d7bd6764ba10dd7b2d6d5b500ebef7efa4b61516d2675ad25cafec6422315b0fae5bf233a692b678657a8475203ecbdc19297c9b5007a400022d6fab42a0761766f59f47696169c092621c421600b0c2b0e98289ee3d18d2895af8a353fb87ea09174c93a15f1980790eb1ba7bf50c30cb5ecd35813297edf8c5721f7e16e53396ad101865628ff1c5e005a4a17fdd4ed4c5002983306f91f4c8574da66f2c990d6d9e05f561c1b5715f38c2789de7873269d22f0b966d5de082766db5f73fcf0ada5ac04fa0961ef12505f27f44e4090f546d464715d6f89060b92129d375f983a4c15f9d74c311a5412c878340355222ff73844765ffccc82fa59833069af8194cf69930ff512486c6bc7c76a56dd8cc6cc08c47b68c7a840270c7ebf527a9af968a4b0252a8fc59cb8b63f983261740e28eadb26a2f5fffcc060dfcc6602cf49cc93576e107b8a02c727743b9ff76a202137900cd5eaeda0d5de18399c2927592cbbe7e272757c9e247e77a8ed2d71430ef243e0487233cab9436b047cc3998beba02304a751405446e0c1c4ac206320a29e0e3ee21308d183aa4c3368393b8cc936cc7b12bcd8e6ac9fb52e7fc11c3ae5951da812637d1a32519c4b7a3069d3f08ecf4dbd035e09b9bd33f3c0919efc35ea7397f5bcb809d4d383d66f6cdaced734beaf4e7c6b4e9483606f929b1e78f91ab5b4de73056770c3b5d6a003c78376de077475a59b7fc377aec3058afcbd252b50ae70d3397ae738070278576e8b0946b4721ee52bda428cf0a7b27c5a0fd3f71ec272dd0624ebd9c80e107bb93500bf800fd8ef1cff7c11d929195bca9cf51e24bdbe1c28aa8492980137de31efd1075a3b47b6d7ed41328d253e0e2bdaf90b399496808c415df155bdddfddc4a868e640491fe33f138777c5f14c4c590bc78888aef30f90e715ac5ca9b38cb86e0730caa1615c6ea3cd108cccd4ead73bcf07a419a8bea71523401398f507875a5034762949e6652e75c0e470ce59a43b57597540dbfe102a5a7a86161daa4c0f24da7d2be108cb9b1c2365cd8cbdc60d956cd66846afa25d96c22daa4f47db27ecab1516cd857dc3174479ff6560dc64516ca72fb8deab5981a70f64de043612f969267378dce50408ed839ceb799f5de60a8c0e2eaf715331799f84cded7327f42e640183dc4c446fca0fe9b9d223212c821a8e94beaee65ccf3ad03a804e4439e5c244ff030dae699821659fa5617a9fe8493da42b5a4cedfc421b2de2d3e3b6b8850ac0eec2e9513d92453e057b76ee7f6f701b954fdd8df00ebbcae8225cd7ddfb09fc9e2db95021d4dd2a1048e5ae4b98dcb8263ba50a18ee8f92bf0345837d0bff2194c27fcbc2dbc7ca30c845500b5f4ab254bccba4dd3bd07a039e36b883987ead79d55783f6718cd3186871ab91ee6ece5764e20d78e080af7209b3d297103bf999e169d2ca4ec805229ea6acc92876525593dc8e52ac7e689fe951f02e1857b28c92e2eec5d3441d45d1c677fd30a27543a66b796ae76c46f08bdce72e3df270f854b930dabce8363c960f716bc67a6cd1ae61f2e290046f8064faf61a046f37148b1f67ff7e1c104e7157e9e44fc5cb6b17f6798e513dc043a68f157b9575e6242aa901d5e5171ce4adff7cbeb32a51428ef16145a4f2e19299bfc7dcb17b4cf79c756465331a4ef9c7dd1d91cc8dc895e24f928ea97133438dcf905323f0790929d7106e657f4b0716ec90659db98d48aab368dc76adbd42c3be9ef08f7755006ca3b0f74f5bdfc262e2a5b82ff923a594fe5485919fb69eab54b4314bc272b6f089738fdae92300bad55117e2167f45f7b6d40f86d314d41cc9828c6c20a5d986d4e9401534a4c373204a9b8eee7fbd6eb49f4f806d88d049e81ba383f1dde53a591048ab454d6ddc43c0895e7f5b46b874acde6d32f6f65752dadde0e6fb98396fe75aba6425cb550506a90dab94e577945722bbd980a428e985d12bfc85701324c7de813053c39fd0c481fe69aa615e9e41a27e5fdaed9c69690a147c6c4784f91c983336b5268683fcef072f7912dcc829d56b63d3fabe3e2c98fff6ef3cefb00968142fdaaf40b0dcca3a18563168725d76cb5a7591a5a6d3a0a37f0195a75b43df0c50b907779fedb04e5463e07eaccb931eec00295ba8e01cff8ea031c839833ab638efd175664fe3529cb07cd124562abb08eb6962fb14edf0626e3ac254d17889134ec7e63deaa3b445e89d047ed71781faaebe6e3b18660edf397d489d8bc99e8d993b76a90c69a2e6db239396a74cc7c0c7e68ffae618ac86f976773549d4ced6d5a8dce46aa0ba028a374f6411ded82c1f17cd8329bafcd8da659f2d7330af60d8633299cf59a28f50871a4fcd796ae0c538c4e27e30990616fe0c2cc11cd033e1efc43d12083d38690161fe4a287b0d7df02fb1cd9f948e5707eb00b3d81a8ed0b81dd142dcfcac781ebe41d8a548e870719fedc380567921e78363cc8ad6ec5189a132dc72bffcd2b5f92d9c6da7fb15d3de9d1f6d37e8064203e40b18dadc2463529bde8c6345555b8a579535c3ade730d481201627ef964443a89cc8558c01b25775ef134257f999210627ecd80a7a90dd6b23b67ba66935ebdecff24dec9df739ec45c3502862c0caea5d9dc80a65e296013b959a872eaf009a01dd746d59fcaa752a91d1241d71847ea61427c3c727a262bd64719abc364f0bfab0fa4afe3b5f9645684a12fc47fa48b8ecc72959cf5bc7ef2394f9a5e0d45995427fc3d43d29f4315a8b07bc30d58125f0a4c90b4be9a4647339136f59169ab718f37f333781afe1430f5455d05d0853b8fbd4bce20eff45976ee86c4724569f717a9ace5cbe97a396a558d34f33e7dfc7daaa5a2881bdcf3870b7025d255f9814fac9a560d86dc5c8354070103fab4eac0bea4bf25e93579a51ef2f8345eff5727bae038bac19ed6f87532b77f8ec7aa98f91a1f67b1c76d1784b731166a3d77a305436d2afaa75431ad9eb03ee53e9d2d65fe6668fdf42b96ad9eea41272ec753b5323a45ef2c474157306238769a1ab33099941157a0071259358647b3a41e2c61067f2e853c9cc372861f3deb37d76d7b319978d1c7375dbbe143ffc186d124912837f886f703aac22b6923c7d13a4a0ea5e17f9c0850843a70aa5ec4563c25d10699fe8509fd4092feba09bd03c637baa94b67101eb9727b7da1448cbb21977305578e50af90a22b0f66c7663d4dd1250caed884f8f0633b439b853b0e1c639b7c8d8b629994058bc5a1216ec1997e7c6ea2d5036a9c813c8e8bbe2ebfbd036b9f74efc8b7de8566eed023218bf419fa156c57118a28574ea5abdc66a4cb20b1f6218e8266679783027da4972136251a6f188cfa7a5eb4e2ce87c00a3271d3cf7ff38e60982280e8263da32368216007349b7d5a6c3ed419748cc8cee1a658d86d4a4327a32e68898e510e13bda9a98ee644dbaafa80d0ce808c77183e4f3ad245ad62d00ddfb757a0245e97a8ae7c073bf14652f7f0ae9f659e55afe52f97ff30cdd451ea71a2c86a58d047fd244dab0823ce149ca59a53d438c3ec7b1707f0e004c54141e657cdfd956f2bfd3724c9172b95d2151f5e8dd5e30f7f9da74dc9ba3863aecf6c96478f1a152b68c7033b2648a626c902a5b5f56b78ca8641156f3d98ac706b29a9921be25b02ee0fa64ec943aa46b279100a5945f295065fa0dbdc73e184d77efbbabf4216f19d938ede1bfc4e701fba8d68ac4ac90eb2e53a48362c15261c70ccbd894e8a9b6b097934098a7817f9aec81f176fe6a44cafd3db979738cffe314c597e1401ad54cc59b011cbb74526b26af3a159bf2ad68d93acebc6f0180b62ba3b9222c519b52c4e78339ab1ac6e80dbd985cd44f2be22ff1666b5706e8e702305573145c10ee4034e40ed768a8d8e62bfb819cff563fbf094674ae1388e591fbde0da34398409fe05b52c9532c4540575ec6cc693db4c3e8d7537a94886384a3189dc47a00f509a0e75778336d447ffd16d86df0ca747113ef54f7d0667ce6324b74196caee8b8423e90fd09b44ccaed08dba4c950ea1184ce1a28039c23e75909d995cd216221d14da0143254765572fabc52618fd3e897015edc4dd44dc75cb11c3d089a3a3d326b9bda3996bcc696722c3b66bb9c865e45855fbd3a6389b50e0e57c510f58be11d051506e1510a2ae36c0839a481d033760672469283537a866e4d968d3301ff7f9e93fe91a669e3ea2294bac9d12636aa95215981c8975338a7762d26bfa779da275c6b9df673c08849f28104bd88b663ce8929c90633e56aa00fbece954294ba4f250c9500346d7f4313ce9851763d0668514f5ccde3ec1ac30009cf828ff29e5a2acfb670eee0dbebd4ea66f3471b058f27240c394a3831c93d163d3cf144d479ed76fc2525fa81b52d990d05ecbf7804c4b6065b9c1f805853e663a65d1844777907a4a0cdea9a9fa08f91ae8f40e3bc6be609005181aa72fa7a0a607b4fecfec606be7b0dfbcf504b38614180f1be930ca4fac24685f48bb2fc75ab973e79893194cf9d8c3b08282a3c9d815a474c82f6194e0d511496e812026d0398a3f9e353ba8725216c647e4b065011fa1728c6e814d90ad0df8058357c454d92f2acaff3f1b0d2d6ef919db28d9f356db57ac7423d0ef605f6a8aa8436db4de14deecd6cfd422c6bc637fbc948bdebaebb3a02266e69108335d9a9d7751e6ca7c8f28a14725a57aaf760526eca1267e6dc06ace595a41f4a21b2a4f144f8f4191e863b9fda96a2d73ce1b4e89a1768cbfab4c8b717ca8023ce89c801e885a7b272d736154a18e97dab2c834dfb4dac61b65fcdf4accb474898acbe8e043d2988f6dc7284af66af88b442445791cfc2dcbb1f811d532afb958aaacc15fd34b8d9110c5cb0e246519bfba21cef922d59cc10225d4851dcf141efea4994aae5e4c9a20c541f54eae8328467504b588896e284370a3cc2e4a190a536bb4e8e838c25b5766f06a4d35fb24b59a1dfd8ebb7544773b55e36598398337298392982cee41a3fb1b5ec43ea3fdccf8ab3d865449e93bb973f1093e2b74864c647a4b1b83eae3ac8d151bedacc9c5938f6d16eefd0894c23dc3c456d246aff6516e09f27fbe2a66664024549e1691c9bd09cb9c7ef681a0bbe7b00dd35296c3a690f771dfbd74e67d9b45fe6046d6669fe13e0cfc1fd3f573826c9e2ba0ec7394692d8d7662003abea4598856209c9eed50e4edb8ea8d535bf8820f1845f3b36ca73d2588d7500dd2d293113cb265de7571a941cef2c135a9d92e56822b20be422ec3082463634727cc9bacbdea86b2f65eb490816c961b93777e283bc0c47de3a97fa5c33d890c5039a537d39a51cacf49234234dfdab696ae1940b23f14ec69919d733e12205da92b2de7aee3b2763b010c6832bd0add1d94016255690fbb79052d0e4172fcb8afcc6a808d95a75ec84815783d384e3928d3a83345ba380af49e13058727a29315df3bdf9e61c7e6101bdd121b9631a0559162bea4aa11cefc864a51f68acf7c0c0ce9917c7bb98f7659775c979f0e9d216b851aa613f0c06be05a5fc2565baff7f91ce04c69f0c543cdce3f19500a434fef5e9ebf72929830cc77aa4b61bd05db7a00591b011f260769d443cba16eb9617cacbdfdf62ddf0abec4f8b8fdfae4f109a656b62333e7b930c4312b5209a5f56d5f76039a03da5011141aa6ded88dd409d349043dc167e7b1c23738e63d2cf927886e5431f91a9af7b21d117cecfd1728fec6a8bdbfd3564e4302be47d034ac10dd1e45a70fd7844794e03dbe507e997a790ba3d2fad059f10dbf9911b510e72daadf689a57c447f8da106cfdfa925f31c3b853d71172a6e11d335055a8693ca3a44780b594a449f2d9d6bad956d564e66c5710eb889a7cd21a8f7d251a32567b5617039ebfb18527f6f21c700ab97539670a663603e10d1b4ea89c497680eca8f603d433de55878bed6e5826d87a495bd0ca1c4a97c8e8135f368239205ad44a10294bb4f86d4b4a686b621d137d2ebb56897d202d6fa250df1a756a04b5104902f46fa9bca1b5bd3b759faa3ebe10c4de1cfc49e28c9c4167676d89730ad990df1b725f4d253d92c453fbeae8f7441eaae4fccdfd7f8df8f70c1b99b13f13a2662d9ba5d9079ba49cadf90a09b0341e88c92eb04b6716de01986fcd59362fca7c742721b8d9e1278ef6b97455d709dedcd30037765d6f1045b67eda00dbbd763a72636b4d34bc6ec9203058167059e7097a18d61445bc28739cdc8e004528f2beb14a623b1506e53446045b40f8cd45939cd94a5d183ef09d4af7559e236e41deb3506d28f74e3a000543779010e7fc3da28e71ac7b0cd0bf4a7d87a22b0e045ee038fc7aa6f19e20caa6c1c751338916c1ea06d4e62da24507dee287af034b9fbeb4acbc27efcceb89b879258af92d441c3ef234bf77b20a67bb6a9d716e505d9b0496187583be18ccebfc5245818dade68e0214ec918ac9f11378d6b49892f3a3193a9f46d575e59220a3ebb7748250e851d25c035c6553f9ee91b38ca689b9f6777301f2272c2787473bfedd56ad643c94bb2d198d448aca2597ede41eb15cac7708bf6b740950d49511ddc1134bf35389b9666f345e19bbf4534e3f2aa31357cd5f06bad9e7d763fe16ea22d42c35aedb7ecc09a7cf7440f04203d78a57e26fede1a83a6f2ca2340b1e2ddacddc4d004d69ad8191e95bb09ddce19368c8682af787ba9528aa4b2a02a279887bd266805f1c4c585ac8fcedb9ebfe16f5be9b349d88d5e44d3a1f8e5b371e904581f603d2f9f8e82075c34c7c534b65b67f8d6a4f4023b704d18e79716fd0a0bfe3693f4d67ace32686c59ec8ad948f1a90ef64a82f670ef976807be3bf80ac4b03d31a497f86b4a3c1ae43c1e5992efab9efdca5bc616d8808efc90074fe55d495a9b9123c6a4654a3f18711eb5423060733127d996650fb8ee97207e54bf814ca940faeed4644350c0c5cee8da96eb79ff7cdcd48fc35feaeeca0b64c2c1f1f6f87a4ce9a57cec245cb2855f5522b6138708536183624c5da032df88405ca79c53de552a516fcb266347a3265481ddfc5400ea95a4ab8557be8089e5b3eeb5726defc6224bac7596ddd9507be169deb20db99e1a217ccaa3e2b416ab0c97ec230e534a5dbf293ba267f55c260eb86d29c2b5de331eeb17b3ccd6a45c2ae86b61c9c5495f3526b53d89b3db2fe51a9db3c49fae6cd3974e85087388ceefada8b4890f1bcc71030d58d48414a8ba59ae3a6523bad7276a3c03b293989c64122bfecb56c8d4597c75394f6f1da98483f257dcd04c9a02f1cb35d8ea38adb25e503d1848c84157638c275aff63ca6f3a2b78b6553416682148f18f0bb9da9a61cca4451739028c71e49790f76c482df784f749e969098a22ebf333315b0655004f3f9f5213b51d9ad2b137fa37f7f18f5298a3c5bd2a82ecde0f2367ae7fb518ddb5d33ee28059bbb2a25fbc01420f87cc50e11664b7f903649bff6691ad358a402757dbde2d5f18f73b763644556abde0e238e8f83396abd8e70478ac66a4d0611a3c8ca662cfd936237f3fb96b693e3fd0b8225a9fb279d9611aed5766c59e9990501229c0bbb1440a120a0de687ba78d3c9502328660f07332fe2aca394598cbfe0ab7d819025d2c8bd67d612108b9f409ba59fb8451caa60ce0e62cb2495ac2074e8a70a9f4b32ac7ef5acdb3f49b7118c76395957e90d6b53c8181a8c79bd015628f05a9607523b8a573d286eada47d0cf69c589c512f1dbbc8f4ed65c68952ceeb80ade2ec9bfa781ef641aa4a5b44b572640f0e2c34a90543d03b5f4988cd823ea2959c389d723039e77932bd3ec420a4de71a75c096a797b59de0712cbe827cccaefabe3b3a0e408b791b92b7b8395aa319ec975b528335345a96b52ab61a8a4d8b1a06999da9c9755aae7753f095eeb91176a87c8b39c2f5c3cbde5e93c8c57302c094497a15a9d06c53a76c80dca118265d0f6775d4f4db39f1d7c736de7be4eeb04d7ddb878600fa7ac31fffa67e73bbbc50dae46ad01833477591080533bbd897be9c5cb641bcab2dc09842b5801c1626278459937b2fb4ef5c9cf8c700dc70f867682e4f86ba8773b518ac297fe3ae4b834addce8444dc4b6e04a26cd7eb18236e20f0c374b85fde5edffbd81ea9a07adfcb294156d32b774b2b74fc2f27720e19f7385c92d7a63338fbea49754c343992210379b6ac362bb95113464d2a502555d1c3ce17cf24b073149a6c060d6cdddaee8c659adb2c2a36ce002f33c2d4942f796236a8f4013459e16c6a387c7f08c55dde650bfbeee6cc8c5ed77811e61b1d0134d60de26fd22e98e316fbc4747d0b7d8102a2e15bb1624d9677b7020b00411a73491ff7f62c3649ce2b5e4fad6e674b0976349880185b23a59be4dc352497f994611148b1dfc6ba27fd6ae57a93ba0faecb8312034ca10fcae73f50fa96fa1181bb204fb9e943b67e2eb42bc360825459c95bbeca2322c02648dd0ffd1f23c7494cac5d4f5fba221746634935288bb5c973b9a4a9de8d5df989a0c4510383bc9a8b171d66b97c5d74b032f1689bedb1d0a4b196bfd89dc88f157c59abca244f7d57b529d3d270496f9d78c29115bc59552900a2d26720cdd97e8e02789160bd6affcefbf4062dee341a182ecda3170a2479464addb00b783612bcfee3497e21eb735f0824f3d87a6dee0d10996c70b1e00f2e9e8fe7270e3cee453344788d72778582d413231f7177ff838e060b92ec48c9d1e1e83fd4155f204f259f4a97d5bf8f4a8357ce2ad2e0626cafdf0ee065a56188360ca1ac0295289712539a08f257fcb4820ff0e90ce3f166ad1c0f3a6408654b52dcef0b3db40aa0a4135b113129428b2844a286e5836a8ac1f148aba82d04f1f71206b0554b2e2a0eb60470cfac61e2e5205e9951eba4fea57975fea26c4a969963e11a47b736f5f60735e2daf67a90249bf583d5476a138a865f89424fb3975659676d8334f442070bbe7f36f82f669ca53d07225e14fc0a4d97f27d4475550a1611822934537e774f2ab0a5115e770b49776c389abcd0643dcf36113e8ec398444e0615ceca0637528fc7eb2f0bdc405fdb9418931db30eefcb896b0a338f3a57e4b8e2b03af2ac3021a8335d7a51f4cf19c44cce1c6a07db1dfcba875249f25c8db33a9db2e129c9e59fbdb9be1b3e47d48c84c614d82e5056487fe38e259ecc98ccd238fe043ca0f6bc0e5120a2eb5b27d0a0d9208ff0100aa63589af2b7003c6297ff4a0e9513ac1c8adfadaffd22324c86ca08d1440c99338bcd0d8db7caa76f0d1c870a41d129350f389b9e0456847990cb3f4b2d8a1fa467ec146c8622124e0d53f15204405e09c37ffeca12572a5577a5c0cbca61771e1dcb737fce6bfe427f8c103c2ef7d99dc392b78152a5eb5887e9e81e8efbf0123d81c7507cbad73b0683f3ee7521aecdd7e053464b8cdf520a58426cf55a703f04bff0d77f517cce348c1826df95ef05e1c2a0b295b6fdc59d79d7d8a9803e26dded8aae0dd36d120210ab1470beddbe0fffbef2903ab3af0855ad84da36940a0c0e7f9f2ac8ac36d5727fe73a99b3e0cad18be465b6af9f02d20704edf2b68e80ade95af1cc35c7c5d9121fd8b5d36a481a836fd58e2c8b8839d978f146272867d16c1e61f7102b22e752939208436f787f7801d9a2ce288dbc869e868f786d0753f95a13fb602076b0d7dd90374986985907745f31cb0550d6bb62abdaa91b0e8e181f78821db0d951be3cfae6911b8c73a7c8c8c284783bc5a30296654d6a627e186cd706e93ff38a1627aa3aa9d707a1b8a7e4fccb7a12942de4d291b6044aa522ae7d4c48b58bbad3691aede99cf922b1540a7b86b6bfe2a8ffe7cc145c7a25c1a9f81f535576e89b7f012348d935b0b7d1cea66ff774d50a06af5cfb57778b9ed1fe5f4b689b65033e2ed9f8c3cc75e7b0d59cbdff3ebf81bbce75328e32251e3a7a8dd0aefc0d906fbc738d1e2eaf71c2f954533505a7fee71afe87931804b91d104572fcd12124ef195624b8e5adcae711298fbf414fbf8add314bd633e7c7723340514b2bc72496eace53e00ffd2d5efc55ec64eb23bad4f73114f2d8f2206fe0aede3e367a899e78a09697af31d266ab9c61095d55f88238d81b44eae3b9a5af4b98c09848698314752842daac9274b98484d3a4fd5ecff60e75b80075f6525f23f65c8c2bc59fcd32174fa95c1003bca787642dd1116bd6805b98d4f61f70d5d10f511d3b0df1a777ff000b260797549b799f244895f66d0a073ace616039e4f9b4a503dfa66d1fabfbb885a61ad2a122afbd0dd3f0bb7ae9ef208b659e61a1f11fb6e67edd9ac7ba6ec297a856901a124360ca1bf93dceded9eaedaa157baefb02ef89273607452e8317b72132ae1c64151906085a0957c95e659fdf1eeb9a82f2819eeeff074cd5e2241f4e103d71a3b3a228c129e2ee7f3e9734796f6e7f3da9a051f3be5d02e4ab5404ff185fafe820c94c9bd09cdb11cc3d26921cacc80e3e05e4822ef4ce2caeaa5e2197a221e92c819794a2209e2f9b8190687786bfcf8d3c3e6e9f1b772fb8538f3fba70f116c3852c78cbf182ae42ef6ec6c952a95a4ec80094723b2ef07ddbc4ed5e1dd85afcb4b61063a4c16376cb5680d9bdf9ec7d78406344d0dd2f9f51a76182f97ea346e8a86acfd26aa68fdc66490a5208a7514e19b3224f4af5969c57c4a2f4b434e919c5452bc0593a8a324880f3306096cb6f6dea7db96be627620320439d7ce2c33bf31d61b20c659a05f03d945dbb547a9403832408d4695d7399ef006109a27af6680cc6e1656c09e3d0d5b49129e19601fc703b5f0b2b7b131afefef2580912e26ededb5c697695c5853ac75d24ae40876d54e8dc9828319c69a6a0bc612c5fcc6ac731b95eb413d0fca600ef0ba90b4063b85780d483ebd1d6dc3e8b4488b30c9350cebaa81027ae51c15c48f1e230501fd9c2e1617f41392b7fa3774a483be27af425670c43ce806a1a8b8bc62fc039a266e1b723c7f757ee56d7cd0852dd7c22f4b1a898761f91798350e1f28ce3924c9be5a9794e97062678bdf53b499333068492ce3dcaba9ae481c22751df54fa5ff99b79351aca6d011b000346e578904459f25064f14c19251cf38915728a0067bff380ac00358187a0041d8282ad2d8f96a030bf8bb46e287d53142f341767db2a72ac8cdf1320f7052fe566a061cacc13e6728418aa0d858ab780aceb94a27308463d311af058d79f73c9137e3911911cc826346a11330d5b52f95f743a2ea627f56f7b096f48450c9ebfc90abff1d3254aa34b4d8099b05b67ea71d89f9602fdd73f39f37c6e2503582eadf80b561c1f0ac845abe7bfc9fad41426a1f9fabba4f6911d6ec2c3b40c630e4014d9bdddc61b8ad6975c188a9cc7c69f08e2f80e002863e55aaf92241dc0b4c757d2477a17151bc24bb7a4f9525e0d635dc11d2963c9286839f3722a6e99a1c7e4c51b16128c93dac9daf0d90d9901a39f3e91ce676d72ddbe3a833c3d5810993bebc82598e5d909977a646b651af5d0c8db61f7058076319c88a3c88f435111a6dac832e5389aafe0ba7ad32041f8b2921b6ba0f97f894e0825a6f2cb9c6dee96d3491ff2e0aafc9841b7f22588db76785d94f2c52b3eedc2cfd829999b6e7b684f0522d9627b535daa600091268aea89b402e48df0d38eaba8783140d653d70e8e773784e27abef1ca1f57e70dfcb2d6b03dd2edf4686855d3f88f9398e53731d1e431d666aa36a4615bbc2fe5bff0e61d4dc650bd76852ef3958123b410ee703372cdbbe769139d69b95b6126b94b43e2e9db0fb05831ccc3ad7e3bf4713afa560f2a4101c7e95bbf2f16ea7a51ba68b5373d57cc7d0b22303ae04b804efd3a07a0a772b4f099f285ddf9178238cd15e675dbcc43e9a4d836df72bd03fc7c15ae717dbfa91fbd5ff8590a8da5e083c3eacf157a185551ded64072f7c818455533c2b431f7e91a8ab021f9dbde1dfad9fea9559a5e6858479c0ef5a83d9391ab87a4c24a05d338a1104a8c719a0969d2181e260b5aac428ba5afcf486acb3a66966aabf353ca92e5b42abeb4fb15fd7910086636f2b8d5ca75d8579a690c0df1cbc8e44684e72d2ce03e8347f9f65b57a4c7d4cfdddc55857f913d3ac0886b7da1211947a255b854d222554ea3a4ccb61ce4f2e7e5bbd34cc542f23188c893dd2263af785776714b6e40b7f36460057a4efb1a1b65619148cd9dd15c8ba28fdb020b85598ea2bb159303150a6d7b2460b9b9b658e5791c43de2d9a25d61b24c1fd8563ada1f474daea11ca9d6000524b5d5df1ff6c0fdd880e0abde2cff4b547833fc5057d6b3b6523b176a21e7286992c4adc95b5bae5e1615c4c22130cea6d8a8927182905b1b5edf9ec90f61ff9fb197c04345f63f6c6fd084ebad5701b61e21b48867bb1a38815593d1067290be513b7d163eb69b474733591c5608777c659de11289d376655607aff987b2da3db62977e173a99b0fc0b5104a8957f7f05b678eed59fdafb31b2aa23b8decc83fc40336b8cbff30d0c4c6db5fb2ff694e6c11b2d6679267b930bb15072e0dd0dda0022bb50a5ffea66f138a234789ff7f9ce7ae16e3db2cb070489f3b251e7e742ff9afedfb899f19e172c7a0569a0972bb2728a88d6ac22b7b881740b86230a46fe8aaa91bbe17e672bc8fe4a5527ee9be5d4ccc76d80c6a800427fb82b06757478ae0d629938e7d4ce05cd500db4c091bf3d5cac4ba475e88bb46b03ac9008c463dcc5eae97f4784c21cb78c8b1d12509b55fde9e88abd9de4ee78dfc40ca1d80d0fb012637acdb9c9ffdfa763e69f3bb50ff6fb1ddfe1e50834d344c1c9161a00f49b6e3d4a726b934b5d503be1939e39c9a3e35f841f20eebe1f2f8492ce7845015d7c0b3c6ccfe8970c0e0271aa6247b499e3a7085b21f7085e9c89a492282025488ef434ab144a64df8b77fe9cc321675b57754369311998f63ab8fbc777a97e2e21f4dbae0a2de3357c420cc6a168213536e21d447efb5b472b3f8293c1cf5f556dc14dfeb5c9ce250f6c0eafd2e49f498ff83218df1322f35227d8b3f2e88081bcada4e9367be993660f925bdd5e019c5112390491557c315c4d3ef4306341ee23550db6f4b622d832abce4c30fd43c7c99465703b3d95bfff519b61ad007518f0b5096930b1c3660a221ad33df48e9022fcf4f0e09e83380ed1f514344c9953baa86b3ccbe01fe02083ed28a1877cd1e1f746317bce57a57ed7cce19969b4b06df525d2a3f7d1cd953a4a28184e0cdac9d2ec79bd8d846e1adf0b62e9657b18589fdea7d9693ec6454b10d025fcdad48ab6a46fae0807bc9a61332fa78683249b92b4aee15b6eba6c97c5749a2e179e118b582de98d7b07e07db3c771612ed4d113420b9c612dce0084b64bf62393cd966942c68c9b94ceded895187ef198632c9a40cf8a397647fde3e012d190f9ccde14994aacae614bb6eb3ee0f36159376e0195084ec1f7072b3d41c60675dc3c43ea0061e39f0baf5ce8bf8e7c38633569ea8be0019300961f78ee2c98db004a1a0bef294be1a0774a20e97f4254c32a3221ce5ff4c07965dd3559e634bda98cf742c8e4361c401c65846abd610ed44acffe3b6e7a17ef42d8fb750b52fbd78b5c03dc88284b95b24c0d483d8f362c5e779590d8ff05f39b65e5e0ae0a966195608dcd79b8d118cf263a9882462d310f3a2b2e438eb6a6d08206f6a6b037cec26a5bad7bbc27510d955ae740d5e8d18867c966a5bd3cdcb1b2be738719b55ad24d62423b73fb7429818cfd9d7e540241de42e36c70f96b48989027ccfa686e34a9ad683fd72cf90bf89add077725e2617b812fd0bd33e6ed4e58777e8140d68cfae969b86d969cd5c1ab16a1f5a783778a062bd32f7c475379280a7ce043ab2159cf42391547546059600ec6681af3c8f82be9d7b2f92c8d4bbf389fd641aadaed2285979274bb502e1a0193fe9a03d9d237b903e484bd10f91cd9450b00c587cb28d83f186da8b01d9cc2cb949257d31d283ce4090a4f80ecbbb3a120725158680d285c864275dae66ed4443d097a9b0ded38025636f5f5dfa8f7f437841dfd82f6819ffcada2eae34de919a0b223f4610ade27b9013a1e28853b449206b5680212b8d41a0a5a6bc863146ab869d0969b4f55d8eceb6a0d7dc8850bc541fe420ac5400e7d06c9cb9d846efdd522afeb03d15d5626b2e01555788647e6499a63fe8df566bda973a9dd4418e2f7d2a8dd3bc7954e3f5f99da4a8206300a4cadac5480d70ea0ddad8496e5ef229714355a182abc0d7f8931b47f6a89e9a44e7c7c7250ac0bf957a524b93b6ccbb3367176797e017682634944fe08d97a6bb8d7c1108fe3a6d95c5f7deec2ce2501fb78f60f75cba4e47c235f8e8e9389fe2ecdd54390bd3d94d5e9edb63bee23f1ada040158860e62d6540650c169fc1b3b229fcfabcc68e098c8498baf52a53d60a4c752ee37e55d6af75863287885c93ed3343913fe50308a4583e517aeb557eacf794d7b6fd299e6d964a4b6a67f9a9586a4cfaac678dc80e6a42b1d17d481ce2759458c5cf340bb78451ad579a60e46cf609758d4f6160c7103b4a228857fb48645d1b8655df9d7cc0b98e91293e88cd6e8802e0be63313094f3a68088804ff07d0a6cffcaeba26f7792c846b934a74e9df956c2f100ffa4a31d2191c7f15459a7102ae92bf5b0f4b542e066b1969bc247666f12d2ceb6a2e4beaa445a1316428179d76b0e3057e30450b0865527b11ff2cdc2df79f2537ababc792ff2e22a5269ab16788d3850704b5f17c44350156aa08d828e8fcf5c11b0ebba4c7894a9e554ecccd14d08e476c2846d71199e92519bdbb7eb025f9ca12787f0e18217cf0db68e35c7b3625d81089163a0d36fa6c46816c4e4c3b9d153722c909b996929b465c31edce48227621219861a8ba9a81c309e7e9a30965f5c57c2622d1ec28281591884ce9e7efe3923a68ca611d2c9123f03bf93dee2cf8c438cc861b5569cb78f06e960b16b9d7ed8ed277094e52829a5ea6a348e42dc8352d4b36a63095e7be94364e925b8780a3c7b4b96e05bab5d121671c5e92c86733453e5f75b6f649697f9b6cde7091f4d932d8c0336e27c3f29a0fab687ac6cd889b0640fa2d2a09b63d284724795eaf59567f04075732ea28eeebd1489fc85d7533771998ad36ec545a72434e8fc5dda351cfe0e8d1e46b222c786efaf8a71abc6a679ae9867464ed28b9b945798833ab9534ec424c3cc59a9157019bb4f024b71d07e63b1be7617b4085770534400c67ff1cf720a13dde0864ea7a8c2f41a77c54ca49813519685b584fb6fa324a96556d412465deabf06e9b145fbdc407c05a13255710b5433ebc9728ee38271b1218187f2e68bdf9651b5368a8a8904922e08ade021205a5e9a25611fd4b5190e5508ba27ae9299402d141e2b77599073e30b251e2089c5b819b5c8f91052ad5fb856503e92bc7aeecaabc671f5e790d9b62d71e3676fcfdeb6ba5d83c7504406390518923ec51ad4ee0d43b4b6e0f3ac7704c2911127d82b8ec7911f1be8cf17f7163ab5b772067587c450df4558c1b514a268e73107eb947ca4359b3f749c41e10c427547a983d79cc2cc6cc7b8ba69b644662eaf4bd43d37c0bd2de70d40f99b5c4178628580c6aa8a080c68d02f4c9aff78f07c050e50f52872df727d13bc1e2cc0690889e803c5eadb4073b1d1918bae637049dbdf2ce20431e0107dadf6c669c04fb9367c7f7e8eb22aa5c43d605dc451115b23807b6b1aed8f374e108684845f5a718c84340d5146c7b0671fbdd53d3cd32366bfb525b1db7e25fb7cbfae2cb1d7fef52a82b38506360d237fbff90a3cd1cd8a19bb8ec3685aa4fc24a5fa8ac36ef9b2acf4a2d33c7506d5395a743f8c19a26cfd0a7f84744284882ef51c473a491ad2c927d445cd9515c3d3be0bf7a85451bdf3ad9fe0110b64741c2b7ebc9dda457e4a0c0ca73a1451ba379cc769ee155d2a6209da82dec2e85304180c0087e402482d7fc24b146f5ec2667ac1e13ba98919829bd65020f88e871469d6ca69aedf41957ee826d62a89f092abb6ff9ee217273132e794e337c4cd1c2caeb81205369d227eae10db53ac55c460617e0a0002618811c33f5e656d8e56d3eeb876affc72459c8f3da205d9dd72ffffa2e2834b37b4e1521ad60d5e32ec4ee8ac7c31f0569e4849e2ef0d79cc4f78766b89b096952ac4a7c1e05f92243b8ddbd63708dfc8834faa4998c8035df0b8be9e44a43337807e2104bd11ddfeb05c07d0d8be77aca8f9c2f8909014eba056836a373cd2552bc0c553259cb3dbff3d84fa86ef6f4c9db1e477e8c41741f73d1bc66ef2a19b484136c4fb2f608822cee4d0fddec7e3e68b21038139ce1f50953c2afc522e0bbe059607bf5614733fb117cec8a739117eab09cb261f03d4ee6ee11fc965e39486819533082221c8360632d4a3095fc8fceb939e31d7265366689dd0b4d9f84b47ec0b5224aa28992dbb03f99be0db1280fccceee5a68a624b6705a4610bd8875b14ddfa68347ec16639aec26b37cb6791690c4b5ffc0d61df190c1fedafa35f0dc9c4b08af4cb7b1ee2bc4781802a4eac4256b1c4c9b9c21118bad476e6a1b852b1e7a3feaf89f6daa08b2b31f7b4de4f0c968ed4f17247d73be4ebb8427a2b078c0e6aec9971811b497d8f2bbe0bb2ec7973baf79c3de92f9b6a359b154c5aabd48135aca420d945da826b6169f15793fcac2a4cac6d6710b733afdaf63f4c6ece22a2ba4217143356afd14adad60f8e6fa1ca28466c2fc243014323a47665ab817facbe5dc33e08b2c6d78c7d4e903df817fa6626902ff77ffdca6a11d9fba8da47af42739f6a9ff8343dd7fb4fa6c8ef27ffb8741f144fbfaa9def56ba068dcc321f34b71977293dd73174832e61fc733a47c14154b6c9de36aabd743b5a2570915653831f9119fc41ce341ce4a3ad259e869bc6f526b8af54a60c8c277f5c8965d08856dcfce44a17fcbe583f3a0a4b5b6e4d46656e08d0875b4ae9a21a6541c5ad5ed2efec06d58db378b4d706312db55de6c5028d95cb58ed5d9b78c7244cdb90b6467b930d7e3ed392ab68bc80d9084d033969c1a848045dd383f2bb518ef5760b5ed4b181125203659c11737b32890b0335be8ec554818ef92e9b38c37f585e10463f1f0e46e8bd5006d77e927da326ac1d9a8bace1e57564fdeb39d6ab3f5a4aba4f435d0b6467c3acbd46bcfafa416e510479c5e311fc2013e34588b7af6dcd8452dde59e5b0176c95b2a5606121f5d351d3c2d91478055c93b141b0f2da862a726a9ebdad421523e8d420cd0abbca1a3099f4cdd5536638671258bb59e58dab080e797c8db2e1239bfc48d4e4990626564049c905cf58b847eb78e95b494ca0ee3a54e05986e8283f5672670c6bac245e06492556e8f915e94cd315d252611dc1c7def538b115081306776245fdb71733b870b32e1cd6ea587ef3c0028718c65ea216ead50a6a6ab762b1c0d948966cfa0bfe0fbaccdec1b610bf555859e42ca757220056cbd81554a0f57e381c197231777cedb433ff2c73b98e6953855df9961596b606a3d4622c4406a616a82ce980f123726c9f34ba6d02946e9514d815068be18e57c28a30ff399fe84480ac2e60b9b9be3c79711b2b24fb8603743e391b7d94d85d18b5de087075dcfee5a2501ba27bb092a0a3b02a63e9ac2543bfb302c0740efc71f2a5ad34e6dc6e6b8832be394d1848b946abb8f982046a908807a87e7885b73a78e9d9d08f8be25d60b1de7673db15425f2d0284c5e28dc736f075018cfe5537ad80d199dcd659c394009c313d505690db862f85ecc2645e2575a3400d748093aa88ebf95b5f86ba79e54260fc264fb58751db198c219ef6f10b372e424a835835a95efa25fb58dc7affd836a9cb0c1e0f73c08c22cc4fa2c81662120bb01929ab1e1d3a77d04b0c0c518d7687cecc6b9909dbc64ba6a4e79ad7d8d44c94e990f6d9eb307000b7ec4fb53963613c93ff84677c7d5692a65124953fa86ecf720193d64c07c71a71587c2917a5c33cd9bda841c36649e371dadc3a8bed2ff1c3bbd17a5758d4917192c4298b68a4c037a61064521dc10d93936845264ec9cffdd09999eec2675906dd0cd22ebef3c75cf3a0b91ca6f7ecf55cd1b259a0dddf2f5511ed383f1f863fb80c5f7697ee2e362e6a7306d288989ea7ada8a1853865b3bfece4c17d045a0c13b75580689c21ef812a890dcc696bef682284a70e29383f91b08c5f107b55be09b621dc89682475c0a998ecb47a45c4182268d37daa9d86ca0abf8206e70f3be09ae7de95681a7d412f07f37e6703520ee5b4a22f8c5d8eeacded1918496a45b3d9964bfc7ed042a94aea059175c0f5f1a79e85ef22c68a4b8279fe8ecaf8280b4d73a0d74598f5cf969fb6d05c804fdab89e84dc919808b9bdb154668582d36d1dce2f3e468733becc11561914b8d0e9b1454b8ae6c5966d26cc7c925bed908c689f3e11ecb2adb5aa9e566e090ba37b8eb4bfd936d5f4838472d4b6d49f5a264a9d23fc9a21bbd0813ad1b46bd4b598d57194c3b8f5d7bbf25b7033b9b760ba4aef37b270fe93a6becb846985aca166c0f2e61e10eb0945396ae2eb9bbb8728ade2499963bac208676bda4c83db5f291be743b6e0ea7ec2897274bf876c8042be2471e4dc92e5ddfe0c608644c612674cbe464d0fb8c96e30748d4ea14b1100df19b29afd4e849bb084b8cf401d495d98ed459da4d6b9584c1f6e13cfaa575176d0a1946cc1b50f7da2cd756fd72cbd4a8acdcb6dab5cb4aa1e1eb829a4e2787c36d3151950157148147ac24b6c7f09b499ebecf114c19048ee040370e609a9beff6d065db049d28cef5158891505a4276a73279adce09db11cc78f10f5ccefa6d90806d944f7dcac4b1e8458dc88603609a3124a71db7c0bedf7211b63031386171b59bc88310fa588f8028306be6772826b6d12e077f6753ec4a5a0b3df036b3209badcb64f8dad6c9f23ee2e00806ff42a875658c3240786ed27805448d9a09c8d0c5b2c71680b18a19dab69d124569c43b2cde2e591741844dd4821ac9a9a6c9564ea01451cda26254cf224b01c608cc6572be8abe25c2b397e6a6efafc8bf98272b8b837596dcc5e6c14ebdb4ddb39dfd074899387f72c4bc1c31489503fe4beb027568fdca8920a752ef265457e984a171b1771ffd788970c3f32df4fc1998e24693877c48a9ad6d3f7988f91e98bce24afa011daa1df8033ab8b19109dae58c099a4265ea2b8fec23bbfbff4051ae832543f5390b4858df9ee780afda02e0ab16d67d7120ef9f176a34917e8e9363223a51fd65db288df1ea226325ee5d01dd32afa82acc4a3e428f48d59a4d4e3295668817366290e4c9ac3aaf6f8ccafb3cd8d582b14d7a5f2e36387230153213e39c598da99bde93391818b93fedbadb673e6e1b4e4a35318eaf8e73b7dbe2a7b1ea23ef35bdbe1df3e98ba2f63ba9c210370ac5c73265de90c5714591aae7f7a5741e309083c17fe4c10c545bbc0f2ffe719c1b986f53009bd546d6fd2d005c7402f307f242616dfcb06631df1741ca93316fc2b2883436ff6f68f0b1608dff0a851dc5e401ab91b8ee15d1020d19673c6392ba8f9abb1ce6ee531bb227b9a50a8c7829cd5e9d7cba9f74409a00fc777f71d6f823c771de604f3f479e0edef6a3496fe0c4baf5addc963a2485dff9c4dd34cdeb9796024f78235fa8443f083a2b5a2e98ca5b658fa98e5fcf6d4227d24527ed9992b3cf58533a65df804b6cb4490da84a323741bdc9db1a1cb47c851cbe4cc17dfb7b9586a49fd8b63d1bb14a64ad71270c9961eca98d6c25524a46f07f3504691d028eb4947ef3e6787d14842becd8ded94bc899950c722553835724ad2501f3de0e10462dd6fe208f25a07773e3293d9f1975277942496961edce54800bf6463b58e5e3cfb9d32215c13678388d24ce3c93a2434b3e0a9c32303011b332edf583d6d548251384fe765c5dcf5d7e613ae19678a145efef7659bbb89d1efb491dd89a82f524d4daaca60b9a2c7d7c56091a9bbcc999f82182950ba9474e734367561bbbb76dff7d11d838a6de4dda5c67c7950fdd4efdf79396fd013b8f2a931561ee3a4c60b7063981954b3dcc07d76a322e20743a9086446bb6f8633801d256a320498a74bc92ea5677e367d24a9f4f1d057335475714a8d7cb7e760e1bca9dcbdc44a2abca7c064f6bac79315819ab7f5b4a6e350e2a58b54a9d7a3da87aa93b84de947568b27f3917b964eabe3d54041285944d1c5e0c8add30a5496c76b055e4a8ab8239545f14e92dc719d12b9700f804cacd9c5bb08d5f75dfa2e0b810719fcd35073381cfa86f9d042c3a9b0ba5b5d4650b42c0c6106bd1e71dae5bd3ad054c5e8e15c1b8c53953721cd0dcd0a259224142d43d9b5d3b8ec48a08c50fe4b79569d5057e3bc743d5375fe3af417a332765299096bbcbbe2a467df57b7085927bcd3f70707a6f2113febce7aa502b28ca23467ab0aee77e9b57db45df6ba54abc03242e85345e378fc3ee9b59fcf1aed0af1df1ee8b485b726757256d2ad34166747d473dd4f0d21cb3770462d98853102c362adc02ff897d23a80fab421518d9b0e24a678dca13464adbce7a1f8a9ddb2009ea1bcb4ff8a082210e82d1d6fae0fc27d4114158c02a6a5410a0db76398843e996ca166b864f16190e1c33d277545b16147860fe340d76597852ccfcd287600f8980df979972ca79ea87232cd8941b47dcfb77e98a0ee02f8f37a5f999eb2f0bd7ea14e5215b63adde60284df491373b4f70216d3f8760b367f84da779aae389fe5e043913b2c29a1a3b040ae7b937bf11a689a5d9661d41e3e4278ee8007c7dfc36a952b7781b337d9ed71cb1b403e52441152e55ca51f9c32ca0a8bc1190f0463a5a001f4f0426d7da77c5121e0db97f9b588607853ee99b165c48bd3363be10413bf5724c05b2ee35ba7f78eb6aec5311fe81d50dd7f163dbd93f5bc9489b32e20ef3d29feb1744fc844f8088e53f76a3a7f3951110f849ec5dcfce53c42933e7cb506edee8e2f81240c829dffe70d29f1f4fb9e3e5b36b262192b67e6b7418480e8acbb8043b8ad563f09f9dc4a968d7c7000615800ebc3865836bdb90923513b3c896ab5db8c72b74848df6153e798310e6228d91a1f6294e6badb03a2e60dbfe1b4f0ad53e10ed79e177b15652d2c59ac00fe201de652cf1d2cef1fae4f08548aa17bab55d2ce3cc32aba064c82d50088a27fbdf322f3ca9910c6084a566e7b78c278078f010f67d1ffc5747fc4a2c64008bd841c2f7fd7bd8713c505a60331beebd11cd6f1283958fa01187a1c09db4b39a7ed352559611f561d2d88f3cb489f57e024491ec9e3547a1bc52c367f6e270b1174f77bf8150f925decbacd4229232a0a767e60c1e5b9b64df5200ed8fab2151bfec44831912e0f4090f6e5f69b354ac0947be95ce626c9bc525cd4379d2959478d10ce285e83eb2b152a310b6f95161d3982e8e198860ac1164a82855ad03d34522d35a0d1b3b49638fa6df5fa3f4dab8aeece39c4fae9a6d7b767f9c48bd5aac6da3437b7fd2684288702cf22c4a7fe11c671478e9d5724118df1a3355b517c4d82741bf40b939d5a446a2d9e8ef5d20191a2a50f192cb93d5a4ef7dacbca39c956b6c87fbfd2816211b297acff7228e3db91e5dd001752ee9ac1693a2ebc7e570413074aa0a93b8de622d622cd0142127ac59c63af0eac53020d30479095b237eccf2f5d64a095b07122c19e790eba2c8477ba1db0d88bfea96c2d5397ce27ecabcfe0008617ea67046b5f46ccaf5226e4d84db04d18a9f53a547c0b57c6b72aec9f70cbabc8bd9aaefabc7adfabf433320abf2c00b8757389c78229892a3fd03d2ebfa8da6dbeb206f50927fb6ecc65f4a0dde1464e8af8cfc6631624eea3334d1720ff79694de81e000234df006b9e107b13320ed08dff0fc65b8b836e8b721b72c2b981fe3e0f089619c7affd4592d85c150efd205edb2406db3dadb6121472249f8f456aa6c394cb68a3b9a6b6541f4b8a0c8cec8bcacf63cea74f5da9c412775c042eaabc4f42963f9993cfb0748acee555ca378b6e7cc671fee80c14a8096db773dc3460b2dd988b5657e8d055b5265d76daa1b243af89eff386a8dbbf22ef5b23f8c1e3db6d1c2eec1be1e78ddbd3bfe2165fe93a932c8965b3e39333083140154c454e1f7a5659bfa63aab90f46b89da3ff9ef728a7f2d33e2fe8c790cf12c53d8fc89b06188bbc87b2b722878bf84e38c2a9a454f7b0384246e793dc677b00fc2ef68198d27add5f534add6b832f2c189f451e0be92f393d1abd757645c592b0a91193e2313faf633a63b3c2b8ce9ec520d964c843ace6b1b37ee26d79e8e9f67d49a81b64cab2ceeeb7deee376af9036e8c15d5650c895c2e3f314556259a5a9586c5cdf321f4a7125cc3a1be8b6014760513e99722e92edd7b82abfd213692c4dfca8d1753da165fda7e38697f711511ad263ac41433e9d9fb85e75a56ba697624624c7c30d9edb4acdfb32a4fc601c01646358a740ec6b8ffff2e3b959fb13dbec5ba7c4fd7a9cb03ba4c4d32d01df21fd67b6c9e123c3704f1df2449eee6494649bfda9d513103431b4f79deae6ca026c06804f9d83dfedb2257a867a77645d0a722a01a6c56374d7caa9be3f4c53584ff10ad661652d98a52c73721b74625f4762fd59a9551706398a6ed3806d326480262a19597668326d0bb1ff3fe2242154e86b5ed72cc374cd564608ad271ab1df3f24fb1b5d187f055494aefc1ec2817e68c5121dcbcca2d4f476856a0c0a3e03f3ec0c7b9487ee071704db744584d05f3cca6aa06e6686ed95a5c5f6ab1b0185db0154c09a0bd9eac2b6dc6468b4b90a512e4788bd8a4288e5bc0d96fa963f9d5907330f579efa23554468e3a2efe7742b96d99374a52df4c5675bf0cc080ba79c441210a371aa5cf9a9f6d2055292d15e42eb2b10332bc80e83808efabbbb5108bb37fa1a7bebf5d8d0e31733decbf6250592c4312f353fe127de0a98c345c3058dd6616d15063f5cc75ba0deb9b34d7b77d2de7cefe21d1ffcf11750e86055ac98b3f347ee8eed577e3483f72623af0f376fea8a9585830548ad296acc6fbd993b23f74407acb159ae5c56a8da33b873ff4f01de675cdf58c51665c5b9bf44826a4ee8e095072887b49fae8a8a81bed21f64b48bc494c3b2c07638b9de74a1d9cefa08b995e83e6c9e8f2f129601077dcec780f967efa505d385d6df5049e80e7a5f9aa332ede241e136e38d889321bf66794cd8c76d71b5b7ede583fd9e4ce0509d794e0c46cf92504422aa12ba7d929642b1f52a3b87d146b6aec0b4e0086d86e8ad78a985f2de5908318ef6d9d8949ea0c7f46c6bc600ffd5f84c78147f3c24c302b21aeae87b70fcd50819df0ddbe1ae1249bdb2ec806619a5e8fc9060655bb051faea2acc4b6d0d77c62fb258f905a6c286f1a8d145966a3fc9f0643810f94324b4e7846be0498ed95cd3c0980a2af240f39b4bdcc9531410a3508a3c470093a150604f4d6fc98ffaaa924242c202346bb44f7fa3ea4fdf08d72d554c411a1148d8e1661b43ef63e143de9e18894818339b645f9efb517ac9b8fb133ca7c333602076350a0ff892fa929275eee351361eb11560f77dec72b4433b0e14c269c8d8bafd1dae35ab7c72a4bd2a67b778ad134fa7a2ac9b33c89e7e3f53413764e632c603920b93ec6a8d32c8e15c7590dda7cfd89dd40100470f2783df19afb34159e506c4506e327c27cd5dc3757b4d12beeb4</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">请输入密码</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    
    <categories>
      
      <category>数据中台</category>
      
    </categories>
    
    
    <tags>
      
      <tag>数据中台</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>数据中台-02_关键抉择-到底什么样的企业应该建数据中台？</title>
    <link href="/posts/2022/05/6f869997.html"/>
    <url>/posts/2022/05/6f869997.html</url>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="1de563e1d90c95d1085d34547d4dcd92c9086dbe58cb1bc9eea5619b06bba987">4e4fc70cc91fd42566446082a751780fd5618d041572b8bed7c41bda7a5fe16038be3debec314ec22c9c045460029955fa7bf3577e7aba754b179ad08b7de8f2a5a9809ab65f989cb1f6253ff8e2a31adac2d94cda7b337bf28a98d2beb27bc9eced9ffe993df9941d6fa125d598ba6438b1c65371166c374c822c44dcfe873cd00ee2437909ecbd066f96e7fe49bb6a9e7e7f047565c8e4e7597d310d37c147577c247cb35e2b78804c3535444894106edc6bf337afd9634b0dfdac3c15e12f1222b7d8e6631397dd121f1aa7e2a76503a5476f9978fc175213a3b825a82bf11693790b84a1f4d7360854f21bfd7778f201eb3f47466907cf664e79ffb1f8c31961f72024c68ce783bd37a00c46943d90fa1d06ff69ee3a54ca35ff8e37c0d5b0aaa6f05723cc158ef8f5b44e58438c29d6555faf4ec5cbe5e74e160a6ff1f963e6f15c093ee5f84d2dfd3e89a35c550eae00cf9e5fbf0fbeb59121f4bc36c45a95a0f240bc0662947025b421b3236b5f4463ced5762d3d2ea55a9be2c0171c07c7ade2d38ace5cb3a95c168018ad6541697226a2de7686cbb5914448021c28637509e7b39d807001e62a2cc6d200f224700fb47c75708df3e898a64aff63c905941314e37f81cc28d05011b2881ae833e4cc2fe9a14073febd6bdbd70e7fd32ce5baaa4135ea4dc1c5df76b9963fd6f741055152b09f37ee544c65eb64233f072068af9f38b3fe847e663c9e60fcf87af6a944a01cc1a7bef95dfd354bb2e575b416abdaaedc6088a47cefc456338633367b295fa0183bb57ada95d8f1553a65223f474d3126537d434feaa60598ae10b626d7aadc8504a085c8955b1464dbf6f3d67b2fa93c6e924a4557dfaa810b9855bad116037049179a6b59c779cd85e5c24ddc93d699b50eaf96842678b3a70bc4ae14332aa0289100f8fec202f59cfc8163b09f5ed39e4e6a584082a0ed988c584e7a3c99429d9233498b5834e420ea3bf10f77d7b25fa79eeb8ec66b0ce6dc29c2ef69dba11c03c9bed9f655faea599d4ee6486f1e8cac289d4156b83d59370ea65de1c319291f8bd0cb756d214506a860adaa88c308d44f8ec1dcc1e999d00bae08ba4e51b8160da411cc5ad9f2c1c50d7ec8cc49e47cb7101e0981ab5a16bb526a8187697216115c9c836da03c6c2e68042c317c7f3964e7602e6c5cc5a8b7ed9db9aa61f6003557b030c2730578dcb09b9238a2f534b5f0a3aef6e9f96cfda288a718c8dac3c14d055b9fd5d2d58ddc76275dbceaa563a975db7b829b72a9e5be9499d4c6be6fa6e6aff79d1504387bdcc78ae0d61e49b73d492bd69a997ffb9e3287a8d5b6e355d15bf924fd6601e90590a1598966136fde848f150499c823908e9e5185c16a2048cf9191da7ea290dada4d433187dc2a123862366e5eaa8b5c0c3fb13ce09b1bff464b9362c0fd03d14b09bbbc10933ca1da6f36ce65cf14fd9d98c5bb9a01084bf487745e32c0491f269b1941ad6027ec156605149ba45d511b2d2ffb396ca6ff640b731a1ade371cc076a9b872e822f5b5064434f511806d3358d4970f32b82a3032f50f2d7ee6511053a6190a299bdbb5fdd0a52bdaecd3393e47aa91c41de630d820a0532a3911898b86981388e35cc8ea98d12acb5837967c4147889c3301804d1ef6674fb3d70403a05b58fca607d7804fcba9fcd2f15890c3589894218f1e16b0fda17032b6bdbd5ab682d73f8c5971d8b50ce1e119043ce09f3aa336b72ea6b5332fd03f9cf24218e58ae45f343aa47f9d213b73f142173c4cea238490c30112d0b8ff35db3ae848ba961470e2a29a2527bf005137a48ae28df28dc50590673799a3143eb6cfd7e4e9832205f0cfa90483bef320affa3e3b7a55300c646a53994ccc4963d8ad6c09df3257c25d41ff798b383b8e2fdac09a6d60a49632f718b3175b9c00fa773b8e1a6e4e4822a54e2d7224ce0acecfd9a4b0e633b9103f1561160bd3310878d8981bb2f69dc5d597312d394eab55b8adb7e646f4bfad91679310be180b1126a11aa055281d6b02f3a1194fce3d745468defb6e7f4a10c51e09654c63c432d2b25ae094ce730115b0fabe2dfe24d23a4eb4b20842e3b043e08719d33225074b8a4f1917ec0aad08d7d785da93997e9dc39e4cb4dc9f54d3c9c2cd5a25710ed1a7effa12383de328ab39ccc5e424ba9a4744b5ec9a58c6193fdd2ba757e811ca31595d4db5ca6629943bfa0fa6db0defc97c46e7c5e78e17250969386ba84f382a835220be53ac72eb90030255cb7f24cfb8d2a9820ee4d135e8022c4972e8632d15568908b0ca257757e87c59759e5f0d4c3b2867016c0e7554f41303fe0bda3c4d355a9d697bfc3209ac73d1732bf49abdccb2de3392a8c52d9fcc5eddb308160232a18a8945a5b76aa05c668861b4afc2f4f4f8e51692698af11cba7509a6f27dfc8f1d30e02ad70bc9410699c38a948e17577c67703eca19b241e051a06015117e1f6a72fe2f1e9fab7f3eadbdbb2135a8920934cf97a345092890894529b4f6bc4a5d1556f42a15b5fd9b625260689c83d785bbd0d666837b595c5ec1f4539988210b3194bddbba825294be31e36b218941764d57b12702609cd89b00eafafa74ebb3d1a145269dabcbaedb9a31c4a7684fd86010050978433cfd2315f1eb37ef386bd18a71b9583211ed9834d5b45291cedf88b93c734c1dba521d20a57624ac04e1fbd624d74b8d0fcdb2be02e9a16f8ae77224a20ef7b5e82f3fa322b6f25bf5944732f4f06b133701af90b481eebae2393835a6f6ab347e0b0145610f5389d3e504be55fd8c1e1d35a37905c23d1e4948ad9aa78d1159df0cb09bb225e86041640ff8de4b1c80b3d2a2908dddc57a0602a11b4e92e4e62959019155965acff4a364b4d83ad94a825854964157de6413af35bfb93403f8b333a47ce595f62863f0370b5ed4d694a5626e28f6012f92743da7fb81ebc6ce88887fd9e5a76df21c630aab9368979c2c93b4003ecfbaf72fdab19f29017d0299474a2a160482c56fb7ecdb01a92004e7e15c888b9c3b38e0a25f9270e74e479aa1f4ccc96e5b4ced506141aa7393ab1b89136e1a1d3676ca407164ded4c24f6b79c75ad91bf2a5d987b98a78825ddba169ae5f5c93256b71ebf2ff41a256a5d819273142bf0cf210977bd348b02d5cc262a79e234205a07fc0d7dcf170300cf3e22f5b0109f9cb210284ba3ca76a64d6457e3e6104edaa80d0f198e900e252d5ae06a87981d1c67992a8cf9e1e8d93e630faab4d56858393cf10ec3a60e81c48a0003bb689f7f3daca25763ceecdbb9c848aba05a699f0c30940d2ef5415302548450dcee7e6fe16cdaedabd38557cb2cd2faffb659ff371e5e8c0418c624f67be58955f4e6fa20f0eb8c586c843f8f57b7ee8e735148b705b41108685facea687961b7dc91516890250a677dbe12a6c8ef286c43dc537607015ba66e41bf8b93d3946ca90e89901e222427b7bb45a7f0985a06549be47a60ebaf2873e4aad2b3e6d15de23789b2d7908cfca04718e06493131363d0cd7e80672008443e3fe1de542a57d6a77e17b34311dae46329d81a18a8e003211e7798ed2f195d4533c15fc1b2aa6bfbfee857703ad1395987aa90ff7b7375ef97c0c1b87adfaf1fbb76fe672aee9cba35261c3d50852d6be9c22f8508e50de9fc86c4d0b3f8e6eb2b51cd250bb81a02d0b10d65d17a3b567b1fe3183b92d96aef71f674588f2984f1a56963e7fda55ca29ad34c62440fb4f56abc9ca26908a7e6500b833ac43b461fac9128b744325f436b7d2b5ff1a160bce5023e2308ad62168a9d64ca20b64df8be1156900a4e959a0571c9814d1196e3a9cbe35aa2dba74fe09d916c91442d801281b7bb461ac9cc31f5f2d5a87c6716711f3ee2d28d509927d83f809f2d6efd20a061f22f8b5d5770eeb75a0ab242e506516df9bafe63e97c5850b14ba3cc8c4fbc90474b2e7221f4dd1537747bcee6a8d7ea436133eb6bb7f009e37bbf167c49f84bd4eacfc3f04f35cbc709b728b9aec01a67a4fce96d6fe912369b3f00bfb31ca21130c42b736e4c54fb3b4c0ec722755b8bcdef669140b19e81eeb31d35164ff852b9e0261feb4ecb8b308264804ca04cd9817fd1537dead3350ce289a7b5421c4f8514ed6c337c01b663616383514dff1496e622960c56b265a13fcf8ce3fd6a85c90c39c352b199a0a8a06d3e120aabe4e65fba98fc02d170316f26b27dbf02d698966b1cc7ee8caf453861321938e0997418d4f3fe582cf84a6ad9fcffa7e5d6fd76048c26811b1fcdc402a28e878884f5d9ac55bbcfb62f8ccf6de85146914c9c38217abf6ec3d577618b9ba2acca76c862def6f933291ffe062c2030f9368c78d658e7a3a78501c26d3407c879b0615c9e6e4b316e8efff3a9914300165acd2b521285359856d338c74a4d34ef0fb276b1bfe6bc2ba3315f832a59ba1769076ffd92aa8233e06496edeba22953ee1301e5d6d7ad7ea29e8b807da92eb55d61c2d3745e21b6f9b46c19f2324f15555b481138c2355341cf6716786f13e486faccf7f8ce6ab54514fd45c88447b9beea02ebc5b3610fc179d577e94506bb40e91e2f6c8c85aa4f598dd3ba5d0a85c000b9afd930cb5ac0a606c07e1da0a0ce57ab848ae96a223126e354bf8f55f033259b5996caa5b53489e1953efaa12ae326f24978553ab619d381723d5fac5c4bd551e8e15c814b987f79a73ad8487e63a33ae7dbe3a212258b0360414dbab78f1557174b9824fe9dabf48fcfe88170547d06f29d71197c7065b4a95224fc569fa34b8b5f5df50ef3b447a888369a34456a645dd9fd97d04c6f68d47a0c39e1809add4e23f67a00d38fcbe7d7caeb15be9b37f9270752909c21cf0898e1ee58a2fccb8bf5046b384f25433ff78100d62ef05cb68bd29181eade45ade253db52b0c03db6efa87c80e9be16cfc4e70bde7dcea768d5b95d594ac7491a2efc25d150695f5834903d22b09b2fd5aee65e78bd545db73265c84217fce374cc0be438ed5f34039342449afb7e7ae7200a15911fc95d266e9335aa0b27ce6396aa6099e9f7703c8dcb61ffb04ec1d66f4d7221ecc224d018284a7e116d4202739392dc0e4ed35bb0fba563fc5ad05d3c75789ffd8f32e5ef355b6728a7cb9a8e100c73946710d43e66391647fcd5ed0ba65c743bbaf84fdc33bf978a8c4f3ca421539500eb26542922a9a77c0dbc4b8335a680a6cd3e0968676c9d608ec742084379657208ddce0d4c251c249e7054b3d27c302264368f2c8df031a3154c44d61cf44a62a0efd3139592672ef007456df2d747df7fa05888f187f00ccb1a065d175e354d45f97539170af609bab86659eebd6b2e503706ac6a99ec03a5c2fe0d9f9afc5dc059786af0ddcbec2827218dcc5e57e4cc54ffec6a45d6ce1500f6bcf6188619286b200fe5026510a9508a7271fbe0fca6dad2c3928a859056abb90da17b8a452f99528407368199c67cc5afc4f307d62d55317f6cce9ab14f0d523465a1d3795260a56bb7f0db587e4a9fb542aa92ee6208f439f7eb4d1f74e780ce35c875d840adcc8b7ea5756a4d45db50de25ed71bd1535ecadbe8b069ca8ff724a713820538ce5d82cc5e5b35dc93bc0bfbb38d6835b1671d814b63630889523976100b0879fdd8598a1eb9f8f9591a8e11801910398ddf854ddfce1f234f6bbb309b1930040613db25110eaa213a740d7367a80a5068569325f2ddd87af95ba917cf49f5871c740ffb46cc68c69eeb020812f8f00c3a168d8d3dabbc7228f140b9a22b1392faf13ea0dcf4960ffe2b5f0c92ffaf85b1e2003c76c9f202da8cee452e40c6c01ce57b3c61d8ccb16ab4bd8153389e67aff482df51afa14f6c73258d3f4f624d6422351d583a112c019748d6ef1e4fe4f7d69fca2330fe970eac293859b93f864683dfb0e250b34b4ab72bf20b16e1f81a8fa5d1a2072f96be20c62328abd4f0a11446dea2c6c2803d8ea33cce382d5bbcf63323623b5dbf71194de0d3d743ef07d3259872ac83a206513d2c5806c64b5c54fcbcd73094dfd43f92ad56b1997b3a61ca1cf1ec78bb82ad89af701362927e21f4b56aa0af95f5635fe18d597c4b4de8d511f93371f151c0b7e03a750bcddb699b4718ce4734799f7cda2328572715523f469f47f1c44c5d8afa4609eca05c03433cae715ffb5ac8e6d94c14f94a4aee6a7363105864cdc77f565ffeb081ec56869e81a890434ef69c9d59d8e9e561d440b7c870ec754be3f9e6b47d21c87f66bbcd7ec6cd6f6074c38c8e0f4828073dc310f0e211917b1c4b3f63ce63b50eefcdbac97f6b313ef9cd9696a0f7e87890da48db786668c05d58d527581ae34340e5a37f5f7dacf3bc84031eb1e8acae5db0b55f80dacceb80394c5747d2d591d927aeed6da2b4732da49a4cf4617739cac5b5efc771d17e8c15080f0b91bbb4f58789c59d2edc2622f309bb3f7181df68a79f9cffe075709706be32d7990d3c2ed619016f74a706a87768a79b0c0d1fe6b802ee340360ba8048dff9df0326914e8a3db482f715f4bb10b1113b5521332bacae3b3ef8f1b64658e66e1754c1147ce44ed89dd6d5a20b6e4e31a27cabf85d016528fcaa4ac1d9e2bc4e3305dadb5cc4b337a77a72ff7992df02a9b1a32f2ce1d570beb9b8cc61f22b78200a74692ba67707c916021416d79082b2bbd03b4d1c4a167bc66488089e904987b00927473b4d5ef0162423a32dcd8cbcef9412dc15b16c53975d63fab190936c6b4ca06029a7839905ffeae87e065cf756c2162489f5208092d318d385723cf43fbbe78096a48c237432ac93fea92f85250653bad4cc84f0f97e3ad6a1982dc9969097cd5c2069eb7361358847032062f6e4137c237666aa7646d476f558e816926cd0573d8e35f1b4dca830e18158306a0f8e4fcbf406a40afc8640ed9b98b07cb30d9176bc49822a43ec70e297b3e4aaf1362320ab6cab82c54bd314f89a7fa223230563067ef48e12eb1eac6809029a6dd47e62f2ed84acd65b11295adb39f79ec23a2cf6c8aee703ef09722dd6a7ce68f92828bfcd2c9cedd066363fda075b2f51305b168d9ba487bda1d1e79af36b80427567fffaacb1d25780864c7284b17e3db54161fbddc9750f6f3e5039afe6fd5243e2b9c116f7055ead65c2cb7f817a90e38f7b50bd3f96fe09b6ab4145333f8ac232045497b862d8d29d30fb4eaf4e26d3fb9cd66d56ca589725f3565f2cdfc1a7333af6bfb2d0c29f8b42ca9aa2743a511d43f1a36ae8b107985b57eefaac27690a9681b9a6ddc1da914eb4d1d10dbae1ae765731215ee955a326467ae64ac2b8052507aa91d6c0a42239c4956e0b99cbf5dd62ab9791eee24a2076efb9f50a9e715854da201e3aa0cec71b941b33a9b07e4fb0518c0b0951364799a85286ca8dfb0f60260002bc0f4510215b88db68e9ae013ecc744c89c79365c95a5740c0b836589f7d756f28b083cc55f6eeca639ea5d4f2cb53f01cfe1a695367baf7b55618ef1c044ccdb6740a26ab9323794e1065fa31807b1591908b0a7457a7b7223c215449a455ff262944564534c02333dee3935656a5fb2282f3dc946c098338ecbd299c3eba25fc6aa936161e99dc07f012b8f8f6fe7f85f61af86dd51d893fa294faea7ed4ef85cfe9f394671fa45cd35ba30d6ff0879eb22bf0a7167676a135d241e2691224e3684c01dd7889ebdf1b8b65f5e2958334af8c073f613eeff871546d452f19c5335c72b003040a3a9b9a4d79e56687b43a0231a395f72f32a683a41d3225170900712f5203cf0dfd1119ac2f6f2dbc0e860145c2a0dc659a8a48aba4150b8aed324156bc60353d455d666fbcc50320504faf4d2e3e39a1ae5b71c58fa0e3bd866ce6272a6458805decec45446f524062efe81b9490a6081e1a43ec3ad583bbf2c6126191ea4c9b7ee60a50fd51551c04fc2d47a57046aaa209555a9ec0e8b9d6fd2256d6197281af0c52a04fac78303f16ae3c28414c8ea7b85e18dac3a31085ad7cd08bd17c55ab7b96e13865ce6e51250be0cc3809f683931c218772dbed3a29c442d616da9f2afeebd15b6fc18ba6aa47838d04d08e013ddc95a12052a66f1b1703ea3dad29f448517ef2d600af22319b99ea9965ecb85f44830b0217c19bae1d31d75c79ac641bf4017c7c69e60f07f33bf7ce5462a82bfed27f4dbf309f39b359ee0230cb294e7eb1d67975b7f493bf80ea88c0fcc1de45e0c8b825afec383effba8b7a93e00e9c650b73a42cda9dd65f7bf3a54ea93beda02be33d1aeb8ec32b22f9a2414d843afee5b28407358f0d21337de72d82886c82c48be94b100b03ccf9e81ca8bf9d2c56ae2f554dc5a6fcf168d6adf3c340aa24072e0ae113f4e23505772ce5e1350ff73b74485945bc9be2276fd511cb84ab86955412dad6961ccbe411126d7732a36f6a7ebb2351af7245bce70d5d1b1643c83e80173b0be9e4dc8e17280eebab4fa56822fbcb47711eb8310cf239fe40ec9fb2037c8870b00311a64999e46178be5e544a9197a8eaa67bb51322ab085a7ed2e45a41e32f7f438f931e481101adbcf2fa2f0626f4526921f9fbe1345ec1bf636a197f4beecc9352faf1a8bccdcc46881ad62c0e0dd414f8aa972d846f11e5ce3372f4097ec8997c47f1bf673670a22285845850caba913926493849126273e1145e4c9d08e2c585df17fd249cbe783c4a5d3f0fea2bb5c1c3c715711e8cc4a9e8e0d13659485f66a965c814de616ac7e5cf02eb579a9f4d0210074ad9b0e8d813fdf6effb2402e156a690243a399e06929cc98eae5cebfa5e7a0df93f9ba2a00e0150af8e907c92224766408eb592619f448239892806f67f194ee375b02c1d28b9fcd9f288512d2f92c761126519d12b4500304a5473ed27578dc368b910dc3937920677117822ada21bdf6fb9429a288d9d7bf5e589392de85db4c4a0fbe262d89e9f6cef90a429673d168f0ec64e67ced6030ee379e149c2e7cc21c55143380b932a650dc9bee702c7e42e8ad5eb4946285a7f4e83fca74a5613dacc358a8469e1e38a9beed61ddcfcb62287bd079af474d6b74f91f3ae4850c4663ed19224d61be57ad752b49690b0cdcdc474d5147e90af4de73b32a291df6718d833d58cd612703ae437104e8c29bf627e90153048325a94e5814386d50e12159ce693a255dce42c093954c7f751fc32f1272eac4499ba7a47329db85c9b909deb208a15d1b7866557a2a312779d56cd028fca0ca752b422ff286a5b961fc20c5b2240f4b0cfd8b31946b2451cb85859c255d7b0680096ce5c009b1dbe6a23ee175391940273d9625911b3e4ed3a7056966f2c3334e9eb1221d8b04fd91e5876abfb5f27896383ad9b6797ec1dfc55c3c96d4a2035c6f1469435f226a71acb5f5a6bd86eea646835800c459b76d16c77e0ff510f8ad7153efcaa01947129bdc17d53a4de09901f5557385d129105c35ee8a9abfb4e75f9409c7b76f801c9923275e669b6d1df646ff70225c6c72221580f717bbbc20d2702960213b67cc57454cffbe60ae3394ffdbc1b9f6fe818f2f9905a96eb5907d84ca51e1ede62564967cf72b342c295992d734cf9c007276700f45f5215e1e1a551060bf7e8bcd57d70c9744c8e83451ee330d9c87bf4d3f89c13480ea9bde54a24806d7c7e73b188b3e4a9ba2c2b2dcf9983321a429ca3372b36b68bbb818905945810233847935ebff5a6b8eb8ff505091f6013b8cd3bbadda2c84084cdf1c5f6e7ea70c7f75ff640a1ee2f6ef943f242838e299c7297dfc588c420541a29da3c997d30557ab9fa2659fbc5553f1600cc0cfed6b05f0fd9853d1f5a0a40e7377c363fbc6fade11eeacc6059979e484555c775cb5a4874c5509baa71c064fd947daa6c583fbeda4bef0b07244ab572bd4ed08fd107b3c723b3a1188a1107d4ceb0103ea26aa0fa19f5377849324a0c4b218992b122024892a22df2014f77000dd3ba528d3f28a1c4d78f39ded71d3a0ebacc051af690d5f009df6a863ea14127b26dbcee1f07d2b3c7a91ef727d3640a0ba5645683c45dbb3ec815389c55fc0dd252d030f794f2c3d18fb4569b3e766ffc18b7c9043bfa25aefb9a46925cc0f999dec0c518f1b07a91c53d30cee9e783d3afae74697c8094a6f9f4a93c8da921c7fde935d4ed4705ad0eb6baa5f7be0e2c326dfff3d70ccdf541a4b1226c53c52df960b90da713e5ce2a84749533deb06b22f520693f7e8e304aa3857fd168e8511f95b8a8a00cc09124624d940c40f7cda7e0396f93f771653bf66f00bcf73fa45d4ccd3f179b5a0539cc75310a58801ecf04385315feab336a0e9ec074184d1ff00f66ef1c1b3f8768cc91c6f206b42f286256bb78fad5ccee66f4a5f3073df5a736ee4b3b16670a0ad136124f5223a5730050d1f7bdd7a44516b1b0492718338274037f9b000285c9de84c704ba745e7d3b7658ab64b6ebaee596016f23e36214ef4456b505c5c0f4b9adaf8674aef2773fc489fa8addae463296edc5fbf1687733f69a5d544e95f6a87f087229bea2095e882c62379ae04dff7029a2681c1f7bf567b8b637a774b1b2353cfe0ea06b325522a4cfba75a24b5614f46c2fffb6b838c9dd635ac157b71120ccfa8dd2f933bbf1c82b927783dcb44cba457f40de316e7c229283202cb2109fe7a966eefef21cdb8edeaa6be8109fcb2480de95a5459fdbd612267df5b3dd93852284a2f7fc1b698ddf6428f5868915dbb02d180a7a90dcc1c0cc5123f4a5463bbb62978aefac90e4e05381c8e42edaced5822673f28586fee452297d3afbc73f0d15b60884ef68c154cbf76d5629cbfee486e57da30f732eaef10c13ae2d1e6b6a074ca91367ea264c89748efe9067175bfd402a3da76b97f7429f3eeced757faab637afe8d915f760b969f700166786da059060f4f3872c13b00a7368d49e75d525f22951cd373d1e8848d760440d6ff4ad133ab83253c5f44274070aba302937eae9edcfd86119d3a3d9e8a6acf1cc78d7001d2817bce22f0fc781a7f09c7b26e9679e257b0418abf2cf4839d79e5d14e470c9472521007f1225543ce3db32897fbe939f63a6a29508587e244ea0f4e7b5c42d0db53f5ab47ee053e7f16bbed26a50fe30d05600d2c39a332ab822501fa3b2f2e4a9c26d36d97634aae7d5393629ede3b5bf45ddaeef53a30e6a0642abec59bed1da48aceb01d325b73e75acc79faa1534d493c4140b25b18e80a6205d4d4b693d3de5f950602fcbce006369b223e374b904d61db7c1d538dd24da71291f5074e04d927fe7f458c0ac6ea07b43bb3a93ab4c7a82984f9c943ec30b9675b40a0883e6094d5e3d83ae1542e21559a6b1314a25541a34f073839608fd86d640216ae60ffe4c6128bc3884941b37049978e1ac36c1d22998958719c511e9f2788a0e7dd59e7d854ac0aac32ae802920d601ea330f4182fe1a5431be5886908fab30a3ca0fd74187ed2529d5ff71bde686962d63f3f4d26cfe22b9cce5714561a83cb2fd7de7bbe39c1e90ad22b55800cdce7dcf3fdf97910d45938b7c4bd7adb2a16059128efb6a4ab4f5a21e4d57917cb03a2642aeaad2315a6c41ea55daeb5bfd124f8d8bb01c8dd695927d757d34c88c30189708b5e5358fbf503db9dd3ba47dd108884533d513b3b07175c8ccbf9c4b99069ca79abea06c541b83e8a09e98ffb45383043cc2c64c52fcba73af85da7433ba545f646d5d21b6bb34be5508c687b4d26d2096832afab29b56657d1966235a49607e9acc6b79ed9c374dffd0d46595bc8a171b49a51bdd584f787f4c639c50cf23d7006174647ac0c1f2ad1f7cbb53db7f66845bd4a00bc72922085b84edd74533469cb04313f964bba9e00279dbb86ed5bdd8166d8922c3974a4f0023bebc20946eea245abe820cccc6d416ceede8066d03f8c96620ceed38e2cb0c3002c30597cf5af8aad9db0453e68cada93917783dea3bc70ca341f49494dbdb828c8de08f422cc88d94a687c7a3b03ea1edd86e891124e5a3f5883e364b480d13ee2cbcedd89322a6e839f6b710d7b835557319286bab48ee3593300e7007f90358439ef15d0abecb1a6da6a9acb4a70880f4aab2a2851b40831ef1650feb64a48deebc321a9b23ddbbb42e75e7bd6918b115f5c4f6c9841b3abee02ec06a42b92d9246e907f7fd5a7acad8de27e7fdfb9ad0933d1dc9d92c79f234a9c26457e9b12746903f9ab2c078972a83de4d1e74ca0ccc405a77b7c6e2aaf6a0ac1440e743cb01e84d373d201a9befcc4af7a2594a453ba5b4be928b5318905a313676bf2ab7a6bf59166236dae80903e9c03c6411d01981382b3f30df0008947cddd3465ee10c82fc149595e17bbc551e5e33d88a87c90811f1acc8decccd92f41881293887e731af0027017d2214a5a0076c1302124d7ff6c7c251c469a2e754e31feb2cca9d0c23de8300e88aed87a78781c5bdf4e3d276bf150cd8a2e0268f41c2ee60de34778de697a801afaf97c2d2f6767271c3f7deb7be2ce7ac3a662e985a204fa9ef356621c9523ac87c2bb2fcc71cb4e33c6cd9dcba9e24a0d17bae21cda289e7ba47f8316c720a88445626e1e8b7122f8fd219f5317a4c25ec9fd750b6d4be802c331ae95b938631c7c2705b9e5c2de9bc1fcae952b0f5367c82d0da85bc6fdd8770136e4c8259b425ac9e7f0674e9e6a98093615fc2bdf00e19dfb6808819971091701bf74f12cf27accbf400af75c5db5f72c0b471552c9ce18cecf4b31707b7a796041a4011116f195a4ff11e67680c34b309b1d68c44df2628b167ca1e7d5aa79b8e95fc2b0d6f5ee11d98036232fb452889ec6958cc5d7a6d1af13a329bbac74940c5b80e3e4f6b3f88c5565a54309335fee554a77aff6a200081ad47fe4e72e054c5f5f94ad21e806662ee3b96f6b1ea90dbe2be27aa4f47bff7be3ea828554b9ee022d705080b82c275a7211c4ef76a2e5b71697c805aa6ae4a27bbadc5bc260f59403a70fe4367f380c523b643c9ba9cf92d6ed4e6703a84f2c8fae6f561e5f632135fc86a08343cbfcbf1f60a56353f4b461c99cc279b55694b6998f56d47fdf7b775a22998705518993e7d72f2d962d3376da4246d2ef4e4649d0ad86655a503d7a1076df8e50efd5451ab092ed71aac97679eaa61cc997cd2c1a0415fbea74d00cbd050303d58fb522479c042cff5bd704c7923dcc6caa759e17e80a68aea862bca7f62cc02b61a2eddb9871568b570a5cc1f17ce4d2fb0f50e14daf1a88b4a8d686e0253b0838fa74b3ab93ff8e5e959fc48384ea277597e2805428f24170f8fd0875e51399599bd1ff9ef0c00d3b72c1982887ec931f3efde61686941c2d010655c84cb6b58485a36d4bcf37ce7d6dbd88718f58dfd2e021c934df86ba7039f6fbd3147d84f078cd5c81949b5fe8b8c58535b0cb6635e8190c66dafc2592e9ff4781fc930d93f080ec1ae16812074b1a3cd873c4f593a8a6240767b551251762581417c771965d472fdc9c62b63b8507830ddfe11be2945a099c1f47640c562d68d6994de79023feb678a8eb3310a459343d64b762cc10b38fa923d3d95ea526cb2c212ce689d016cf4e8d6aa214492a08319e53e93c41acb1d35029e1cf30149b92b6d31ba540c1b9b6b368c0662c973253373fb863b251eef87cfd209d7182a60b5c84cf63a08a20a339832e31ba3384395824ef21a51c9907bb4e94bb8e9f5163ec23b5787ae7a301286eec425a8e3e9e0ffd98e75a0fe58e7665819110685bbf7206d50bc66b6ace325f3abbf0f6833f587a8c62174ed2aaab6159df19571ad006a7cd128595f7db34a2b15adbd57fe3dc20195ddd1b2265b613ddc1060b9734187b5865aaa829e6ec338a82540c97a58500daa91f538b8d8356803613b1d62f12d096ba2629a7eb62a2266d7a2e71ef47aeaae0bd6d31dbbd3e00b29e00628dc67b059fa652d91f42f6ac6f83785e5c290f2812e0bd6b68e52081e6f53bbed77953a161ddfc52f7e8889c6707c4fcbd7726ebe1f16ee103cd873838cdf9e21ec0e461b60cec20e7cc134e885def514fd03d178e9e2e98e3014b4b33b1283a81c5af7b5404bae8a3f35211ab4218f6b971b56e08246d7ae558c683e6bc073694494226092de3f7f9a4ee8c4cbd8f0d1e2188c9e16ef7c402e65f5e34cf1a41b512c59e5c0438bffedeb917ed8c2183bd40dddd458be09d6e28f9216f4a386f1d1dade201539b735a8b8f7a9ceff49ef7173305218c4acd51f67486e581f9f8ab38fb6a111fea0588f82813c33e468aca084e534ef88bd8eb221201e32f47be9bbd8bb792cb47c8f0c8d23a82faa3a5e91c022fd512f70a23c57e545136716e83274e59ab60bc3629da8e3e881516752a452c7494cae01cc2ada87214c95b58e6cb5526946a6907c8cd45fc243ef85353d7a3adc260724a1538753f57dd52668eab708f106db633b8a378749725b682e20cb19531d2060e30f1c1d3afec9fad5757c722f11bbafaf353198553add5cb30285383c487c239a523d9338e600eb25a9c663fc65b5261bea439f2769f07ab6bb9a9cfd36d40d2dfcac8c61edec4fe948263cc97a1da4a329831e17b929c8c6029aaf6d2d0a94cc8a55647261894f8cc2cb088bd0681ce5b3e7fd6935c873fee584cf966679805fbf33c46d9a198ef1038a8921ed7d97c9595758c68c932e83369d3e62ec33e1e2ad9ff1208cb1dfad41dc505d75832a4b9d0f8bd364428c4ca6deda5ed54460a270a8d4cd73358c5f3c01eee190369d01104965dc06d8dc14010ebf8fea926d97ec94384a8aaa4d566ea88a855844cc22845f1b26d64fd16c11837a6cadb52084349f5599a080fd71e342ee20d447913610af252b8bc305356a331915181dd9821825e9beed7f1f805001e458d6895c764263bcf7622b852b8d470b9f490654d9fd127482cc860fd1ed16c5d1c84a19880f676fc9057ff6535ffe5b5513d4732b078651c6563d554fdfea47a1c6e37a03a92faf2475b3d010361db0b015ca02453ba19f2e24902c8b92032aea7cdfb87bc406ba07910094c5f550fe3a9b6118431fdf686c9814b568df87da58a2f8b68ca4e2218e0b2ce2eb28efda95eb9b0893d7e861cd8eba56db153dfefab5584f68fae887cb60abd9e44111d341654407caac86218a19887ce6f9e73fbfd24e59d613aeb03844c68ac63bd158196910072a872e1b31d78494ce10ab3d57ba6425bc7ee2e2171906cc01b231e68552e1aa6cbb37729a1e6dc26ca6aa5a2ca79ec79db2a32d28f3a001732e2173e942524964f77dd4d1cd06136a508b4240ee226cf682ae6cc2dc72fb1eaf02e40a0ae2abc576c5ea67be6144f6592578d84d6a7bf7ac61699ad2745b25d6474032606874ddf4f381c43519957f769736d5b3bb92fc732f24895a9e7d5ed0d4ec340d8d999efc1f50fffa21b834679210c41512c05912d89e8c0fb67b08f98e1d88e29e8590cd8808e9a169b3f41f8b25fa0e6b2e34e0e99c852627f8a7729b36d0d4bc4d6869fdb660645b41504f9a71839fbbec740f59e4b8bb082ca44a05b843ff5f272a15e1a032d0dd24fa5ece92ca3f826302e4f98b8c76f1fb00a7fe110fc92e7ea835094715af1a13f7a823cc13587c591b784b35ee869e0232bf11f2a2d80cb665c5fe86188269faa60413a75363ec8a30ad5152e4e3f82505827ad5a6b5ef55aecf123888618b0ad524096e90a3a6b0727bbca274e40bf0aae109c7bc16b02105a7f12b88d28d77fe0eca4b515e653051d76f1414ed67eaeb8a680361a1d15b59897f1060f9e3bf9636be30a189237aa794b5870e960d88e5d8abdb30b2571de50a03381e91d2142656a850ff77e359bf9935fc8bb7dbace8099cb1db657c80fb7009220c515ba95dafc9a2bff547eeed99ebb3e9718b193a2e5ad95508c8ad9e36758cebdb3813373bcecc2b62b73d2837dcfefc0f34474fdfb4f9c3c858eb981b2ef6482b699d530cbe17b9bcd00844851d246559756759274f1751bb62520435701c3a041e25f785327dc9e6cc572e3dcc6a737e8dc2f5ae6bd06d7e437f4166eba47af63bcc2ff35866bfb2ddee61455df717aa79b0bc79f8a1a48e8c3deb09c5117f75af5793c307bb65a60971327fc9516775687a83e0b9ece86c37f728ee28516d834115cb6d1636a6a242a8554962dd3c346be9d9c3dde6820dcea1e2ae9993afcf79ef5b206f8bbcaa679c5f0bb5f44fb2376084140c8af5390d0f842a305093fe8a42b1dc7329425f70e7c56d7e6997374dd5300cd4306742552aaf23b7976912cfef5a76594523ee1e5bd6d667099a8f70823d78ac6bbe8e5a7cdcf4b7582b14325c157aedacea1dad38248c23b49b20d78e635541824b2219b091fa32f8fcd17f36ed74203670afba67c5fe85f546a757ac10660c47450f24fdfb263df54f23860425a9f83143121490b3cef6f86199696d6db0c5adfd198fac4bcfa59edecf80849f59f8ec2297444ef0c3633b210ec0a6d367940242ba785b4f07a310254292fde3f1f1c2b7c1a3be92327f6fff6be0cedca696a9a62d3f7b81bf35c8de143f0d6661eee5771e9f4473205a6b0225e2efb18a4d19d268431d37dd93b8aa17046ed4bd56d3f172ac699f849b66dfccc3bb5764ba0fc8022e613d49364a7f813816ec0f89e9eb26762f7a0f81ecb982d272dacd985680f7e2967ec7534c99343f734c2fbef75d017f8a43fff2c4e103c917531212be504e83d416f2c914f7b7eb937aad6ba342dcd1c0c5d5ee3dc414cf5c4934d6f11186f4aa7907cc74ba75b382897dabba80de133da2a9e023f777d441fd04e48f2426ff6202b1509743fc6aa755bd75d8bc8bdeed93533988967390d777b4e3b1d14bb6f71860dcccb8dbd13b2434c6ceb3ca5cd337441efdba472b03253ebef0eaf8fcc29751e8fc7b00418f719550929cf4948449fc13ad62bb42f7a06a690cf085e492de933435ecad47c09dadc7445690f801226d01577f2aa3524029c8899135e3e9d75081655416b9a1be85efa560204a2f1fcb99505d1db75f0dc778d50b55a1a84388bdcb50518be83a0270d353e855182962206495f760efb356bd2acf03af8a353ff36130b347997a1e733742d6848382342ddbeba3f576eb9533c8d9008c3aa8002172799c03d636f8eeea4f856da3234680849bd4efdad04f9d79cd4952867921b95fbbef4849dbbd5f5fffe478cfc94a360ef1cc55c8c111ae38e4e029016602a44a849320dab76583dd6823446b15d4b47227f31951c8ee6c773299fecc6f67f6f1d0e45b4e29cfaaf0803ac608803dcb7154ace0b4bd9f58c67991710ed1932dbe022c670faf0c8f7f1e8080014d83e27d6c5c712faec489fe1a0d4e6e0e8da8e6e8052d3027a1175fe3141e74f327817ce98816dfa0afbe3a9a6019f98028765ff2707e2e532bc8859109882610e652447f5e504160ed7e64728e9009a5bce98f229d1b94b02e26081fffd8d566c87c15bc2347523ffa4388c9c37ee90d4f106cade43edd188eec1e8b6133afb47048b42034b3fda225756c9b72d6d15638c79b05dad5a5e9701361bd14dc5184bf7273cf047c35268f2c1ad24be7c416ef717090f4f8d45f92b8e7e411800af66d04c71de37dc4d54714ae314c4eef9bd014cf42f81243214ab4fd9a5f196b8a1e718b6b99b1dae3fb6c459b645513176cdf5f19b21c10b3d544374a0986efa55ae18b3bd8240b9107310d862c60b869420bee8f6170af6a8d36208a87cdc9baba5e046af82cb000db7a9df624092cb4791ec9e3c920a9bd6454b163d9972bcc0015e846ed59ec7592e0db4aa7f2914d6307de5559b1f69a2b1cb749840795a3fa6a510851e7b9a7338f93fdfba0753cb862e405e24dc3b05fbae72b4a39860024297fe5ac3e061d701f25abc22c38d72ad2b8d3079620e57fd0b304f23f581cb6ecbb127e9c70148bb39ad65cea02651ba072f7818cea1ec255b1945738e6aa5b0f5ac33595cdd8028bc50e925395975df9af6aaadca402bbcbab59cba126f7f8fb0222333d0f7022ad8598d9f5e9a932c77d70f64b54b58f8a9c9b1a3126a8fdff47f3684fbfb7d33479584e135ef1e57fa15aab5c5c0b942a0c23264738faba4442bed0cbc07741f1c62d8bf2b1658c96f33efc9804bb74e340d865ef0d0ada9399c0dac022815be37033f86d11705744a3f6538e7cc068fc45eb08d8b7c86e966b1b0fdb0dfba36dfe4eef9a3b60a4f79fb06dd51ee461809a133fda4696ae22f755f64704b468c34b06c529a3f0228d2e4d3dc92a7a7d5d16f51dd9f6a137cf83fc9bd45b25a14a408d6b7a416d1208514c235935f069b2d3e646f277700ab68744386427ee4f5c84ce027688ee1a546683e364494534dede41e782d4f2f49807ae7c2c51adfcff9061acff821e3dac9607590854ff2317f33be6fb04feb01ca8fd9ef3aa0657a087f8ecfc34460d6ce87919f1347ba6e39ea19b3b9c277599afa7d57716a74c4a0580ff78951a318d6ace9d7e922fbd4ebe55fc73523eb6a575029da349b223d1078043c0e7a4d9f0cd4643bb5b1d966f41123de55bd4f75e2faac761b3890f7df27333f22be8b24ff1104aa8c07a5d4f36b3cc87dd271c58279c86a12ae3b9b3f6ee237a6a8f6960eeacd4bb1fb82b3a48a42d84047afeb7f23a0386db9ff56e0f407abcbfc16a16ce838904dd1ae99d133f7097b21e9b58eed08ea0b25343f11c84fd29f21e319e1ef4a1fc166bbf2cbade2308e022ff101e8ee4561bea8bfd05962faad02677d174c3300efc6bc0a25f8de588c60cf27cfff9d213d2e74593d80797f92149c4397e3b4542f1f3d509176e74b00f23ed11a0cef72f6e35481d606609f1af47eafa6a22cc7e3841722566ef58b799809c8c6444a3e8ae0015c79c80bedcbc89643077bf0158014f09b5310545e3a3d07ac9e04d776b9062b6944c2e8ca978fab17dfcaf8d756435e07c0ec9d2a7a091fb10b860e8665a90a6f176db07d210e77da49c579ee45cea1f5c84396f43b4414fa8a4a3d844842244780851bb578a78a5918dfe7d14aa09b00b798d48e638367d7c34449f3c9d460e4d4338ba36cbe618c2cd9ffa7e947c9fc1fb365c645d333500b11776001bebd3e530bc419795f9aacd3c22b3bdebc23e03bdf8172f15688f658ea88738755e488d99b2a6387ec2b7e4c31657ccc016705bbfb25fcc4e7fa08571551805393a294a42cd62332a5e1b0bf58ce96078ae3126795b8c6ae3ce00a5b7ccfb8ddffe21087612bf05352c5c480dfaa724f01bca36f1de82a13d81f1264914007fcec5882465fed35d012bce1812ad48d71591eb85058e0ac5037275529fa856b58c90ecf18008182acd3cf86e10f18720dde4d18c9782a4bdbd459c47904449536d45f1bd44ce987c292abaada52646182077b7dff1c100cbd578c064fa70acd36cfe440c5241abc2747ad6663083d879f47c9d2fa288f39fbb10b4bbfa05ba45bcb8ef1b286795b7202953580f04ab86ee7ff4aca8124a09a86fc46be35d0cf365c0a970484c930dcc4090696806fd1039ed7fada4ea76eb166a0f7daa409a975344e910357d691f579b6714951be69920ae2c49c5004a46af1b62201e3fd5d17937d2ca206ebfe45623135ef48a904d50ebdfdc46e3272044fac94aa08b2a66e936004fbc00e2e1b0507a0845300eaa8cdb4cd9f0e856a7ca6ce9a6a00a33fa20e8462cb577d656cc71b075ffacdd09b7af45ddc4c2be19978cd373aaf8e828ed0eee33ba2cdf41b2101f16ea9d5274ad1d36cd16acb39f2a76bb09a49e9a46eaae6c9be60a196dad592799b45a0ec1e437b2a8f9971a15017a86725019ffe6c02ac70cd0905847bec2736bf1c8e53bb4e1d7c969f7a3ff4ebae93429a9da16a713bf33ce0aa89eff8b6537e1fd88e9d6107c7bfdc065e795b9971fd098d732acef862cb2885b8e5cd483ee4261ea9c894462b6d2c95b8299766288294803654444c198f6442456cef30e123ff88827bca07a0fb18b94a977b015e0ba730f9170e8cc21ec42cbde1a1fd781bf7da962d284acd444fe3943502591e089406b2f4199d7182cc40964be3bb0775688820e52a30a21dadf650915100b7f64564b53ce0ec827c2214b9708f2da29ee64427da429f45536641bfe9f3a532175823fd9970251c7e0ad9a119de4fa147576c5fcd8b2c73a978690fb22408c5ad912bbfc93c8514ef0de24e189a9427478af6c9bd97d550eb0e04095fa983ecfec1da0e3ebdf2f3db80867a1ffa5b6fa7cba001df7974e299f97b4f1d1c5be31b73424359b47a439af7406934ceb1b8890e5d6e89b76beebeac28663761999cc0fde65cf305ee1b61773565f6e49e6b7d4cd5585591a848e95d82d8eafa67c78ef064d9a85606c6124bee1554e0ca7d924d32ba2fabf5b177dcc7e58abe55f1cc779d14ad4c6a8fdf489176a7b55f81a22e492fccee8215daad1754ba04110b8b3c4ae088d919922f4f119c804dede21f36209c19b7c108eb1fc1150763fd4ab9ac78807bf672153323b9d5ba31b2164812b2122539f675a2750a42a5973aef8cd4e7f12c111124511ab7c4d55a5be580e5ef7621c795d15e9acdbc389715b11d93a60c949d24177cb5d4fdd4ae69dcbc8e205f6e49a8fd8aeba48f9302504008e27803f1ecfe414240ed83000ef6e67c2d3228e9c5e000659a37d3f2ee2415b49ced86490a326e64d33ff6c7e01676dbbe45e66e0b0e671d20de1b02769f451c8318a5b0832511400958de1c711c2c55155f29182ae646cc72eedcbf8fdb1b3a6fc32ad958148aea89d4aae383947f2e5d191a3685ceb592dcb8ad5a7d5f9ab0d51cc53617e9ede9cf2cbe0e00e3f745a325c3dd86007fdda6705d7f3364767e3cddcd84af1a025c63ddb3ce1ae5f25b9922c1ad209eb99570d2ba2b5acd4d2d2d69e1b65c9e8c89aea844d84e0b1a6f64f7f81aeebd9acd5d48b59e785723c2a53eb74f462b93757ab3d89484a0ad57c6593e0032ece058f5eb615208df482801c5a94cfe543dbeba908973a193226b43fb89e8e944e1c2a0ae24f5cfe36c35a4c9f98fa87a06a2f4ad1616eba89d6733839a7b7a3322019e7ebaba6f2723a40951e410b81a1612c30c53aaf20971e708e308e24dff87b75106e9648ee40ca742a44fa332544190c6617b829b0a35ef93af5735088c2353703d1728b09265391aef6648fe1960fe206094b65810d81f989a6754464a1c95a0ebcd46e3a7ce37f4551af581a85a5800976837ab6ef3b5f5212694b2dff3ca30d0842dd1cb745d1597b05c91913a5b9f6b1a9f500d3233f8b73f136f6ce2349329d3f868d1ce59fe0a22f23a481c2ce52f75453dc0bf17be188f8bd81fa0120f857d002899970d251f3c8500cb5f60c29ddaf12ec5ee74450e3f76c7edf2ee34b01135a86ad7e9cba2f81408ac492e28f1a458ecfa657b5b191ab1cce0fe03b73da79805bb60409ea4f34d43b880f022356f47e583524166dc6a29a78793d271598c3c98b6e5e8e916062ea694fb89af45dd30e227451284f70b3b9b65a5a384d9fc5b482d5a984c49581af471e14f0cc700e04c9752c552b188aea601a89edc283b25e1d57d45c3d11b24f6dbbb9928cf00a11bad73d7c6bef74d010b5474bb938b3b9f640523b124079ac36de8c8544c371debfa2fad8a5323e418ed9148c2b5c58dc7e33f0fbe0cdf970e2d4eab88aa9c0f67f820681169d8b1b583991944b6458080cfce4c145928b2d6b2470cad03438476f5ce2a5da0286bbd60180ea287d57124e69a803db46914fb1c6c3672d2733e45a5bf15d4325eca1f3bd3708a664b89e9087f53a1abf8bf1166339bb6c11d0636e3b097316c9ae5b8defabfb0d6ddfe04613cb5a12b9da1ffd4dd1cf0f814264d4da1c73259bf802c3f723b22c9998488202ae2f57807f296a55e1f033739038572069612810f32b8dccb11c34c9763d35f4af962b56675855d3d2c5b86914d99c4729dd2a0df00698a9d39f933518cd283c6e0e283a98f5c22eaa7f6d06061d59b942b2a872496ca6f49570f3fd4d03efe7df56c27415d9ea50caccf603c408625bd67b121f9cee35b01f324bcb2c1639ba8a5ad5d52bc819da4a963a43df05d64443a7d2c69f7c2d6294af24b97eaede4c996d0148b3e41467435c644d684008675d930cc8aa8992bfd1d6af3a9aea1683be14c70c9bee1028aa459f6c41c8d00ad53bb12ae63eb6cb3b37e015eeca3730a762a0035a9502ae56ec7a0b61b860bd34324c9f17e2dd84b6f1d876d95ff50e31716faa5ed3c5d65ab854a1aa73e0402f062c3695985b83677cca4879e8f01f450ea47377d9d7a4e2d3bb15d37d8d30dda33e370ec195c9ba4f78ab5bff4c885efd125d7440941e30298fe44df50da0c789ccb7261821e56c21beca10dfeb9b47be92bb23afdbeda8681b5437fd2c82ccbfb180aad31eab1f935c8e24cdcd38be022d53e996faf67c2ca492bea0e7d4b7ed7e3a7a43b768f0cc7a9f91d3d1e6fd7f312afd99a18768cd96bf3c593ca9f18590a57ac31165115b94753db334ff10e0391055caf75fb6e8412cd471c16387488f2b993fb1796dca5fac7cdc95b93669cdcd5044d37d0f4e5ee8f283b245ee785c55e7ca90b4fb4e0d21565f8b8fcf4c36453fa50cb3a50aa17ef16157eb4eb88ce844428aeff36a9598f61be19428022694dcc47b4139507a7dfc8356c9e8366e5bebfb41ac19263f1adda52291592b6b2a386b9fe25149b943ad6d6ec37a3fcba33c98618108da519c8feb9d08d3850121dac3099f66167d6bbaab5c78cc3842d653fa37685c8eb51c9adf132042cabaf1898b1eb2e91bb076b7cd22ce1e431cff67cebb957a89d7d02f5fd73018c13a5e5841c420efb604ab83edff4d94f286a3464097b5cc07a34eb0dbefb0c07927b055fa2e3c2f420b059412bf661aa641a586bb5c58c598bb56dbe880613685430aedf8a55365af83656a0b93b25024a1ab9b32409eb0e9ff07ed75f0d3b999ee033060231a327cf74bb6e5133bb045648d0d7ef545a5e8389e6b1283738c379b599d32104e140d75289a5e73d71253feb47ba7a9673a0709bfc9956cb94a03d0b8c0861b660d360d9f1655ee9ea025d43944dfc99662fa58eb6b1bd4adef8a490b93771d3f34fd2d87f8495b0e7757c69fa4b2c2b4dbaaa1152a1661dff746b7f0e2a0eb40427f0dc91c0ce723c031b2f86ad23fd21d2863c3923c56df0c740dfbe0950ec494000f27864528437eda1833e1350677d7e309b6b1a54bd7c4ecea42aec6b76ac7186fe8f7cba624ebb12b4a57470765a2605aef1c5900e3227ee9eb59d209d616cb05a8ec156ceb39d13f263d1364b678cf71cd8b48b7fb0f53eb8a3f8db45eb3e9a9265fe124fc816bc738414e6a776dc1551b1540bd78a8105394bab37b87234d0a42587fdc46614fd6e9b89bf950711a28f68c9cba866602b8aea2add63e40d5ca8a26db6fa78a8332ed02afcafff94fc1ed207acb7645245ac6cc5888fc1156d317a0bb39ded7de8a21fb642d18ce11a47479b76ba49d2f43e61b0315e9cf9090dba630f71a72febfb26585bf79c6502bf1b83eaf1c0186c0864c2af72b920396be1149dc8829ec7b43e9022b0a92a7f1ce80cbeb3ae67e4d4907d96d85ac98e2ae48999563f199f8d5cfbca2ec6818002569d6887129e2e2b79c8c7dee516fc123bcc6d4e0593df6e2200a7d0894afdf06abf738af2ed9ddf8f32e29c6aebe2d1f9e866bd67e591eead667868a0aec1ae6ea9be725c49f5521de88d0223e5f94fb6c12cf319e2982db32251f872dcd7f4bfb3928183e3bf7de3908ad40c4415defd2d6a8ee5a51961d23bc86755745c79796fd7daf32cafe022417637f00bb06e2638fb13523fda879637ae43f1e8d360ef1b5365e90957a9c7659e39a2b5777518c726b8894828703b31491480f0743710c191363f53441fc22cb7d10a1bf12e03847484352bd4ec0ab2b646023593a073606f3c64f8cfd153794a7c5cbff94b6ce49e2ad4079d973586eb9ac5be055299f8feab8c800b9b54e1e36f5c31eb90212a7c5426a783307e63348e5025c2df78434514d0f90f4faf887e81e691ec1a1debcc57b4935eefaef754ba7435a41a1a7bda997320c63aa2580ce32cca132d58c6799086b7a4c4b18975886ec2b77a7fc05497ca8fba4bb493063399dc7a0b07fb7fd54356719b3c4b3fc93de995641938ef2ada11cee2b5967736f9878875bab0f86ff960eedb474d6b7f922b3ad0179ba781924cc24f7e07f2512ee3e5cc4dda77adc411daa069e167ae20c319807c57baa5b5296dd8c8fff6592602010e3c9358a9b3d7a01db9e0393318a9e5094200dcc572ff61a81388243221f51f592c143f0affa79f1dc6698f7528ee54e6e755a2990e22c039aec34a70d3a946e777c7e5300caff1bc06031a9fa2ecdd3972cf8a059c3fa952f4a3306c05c70b258bfd13494446ad1b7372055917a37227353552bf52dd6a1a71aff1b2fbd2b78703fdebd33987a483f9d5211205b4b1cf91480f1438570d564a1e6000c4d98b3ade81d86bafbca2172256752e76e231f67025f6b1b1fe0b0f93a6afb3d089e310db5164b161a77dec025aaf3afb965a48500b0b92d0c040b3e76499bfac2c93c4e9c341ae4a5f749f441f8b5e10e5f5f4d13783945e0a4edf1fa772bd7643e838edb0c9896fbb93d6256d1d4513b09818aa4318e4a0d97356ba122b65f557a92cf97a83434f1d21f1cb7a6efbe4fe3e2b9d5cfb382927c302457bc23bac5119ee7b323ae0187115f3f54d0c3c9a7102dc83690ae31542a574c9148bc6b8f848d535d4f597d5cc3aeb6fc0a149ac726a6e695733355a4ab4ed7be535ac285a2251eb4839768a1e743831dae39742b274144f495992f6400ae1f183c364d18131f85c6b429c686466df8805ba26f637b01b634bfeb7dd86f4ee3f8697f93106e0bf21c8f3f35d2f887f30ad2acb8bb67378cfd78e83f30160d36b21397bf47b01d1e773abf5aa26d33901be5aa8e4a5d1537198d47c3b3b081d193871f0235d26c1cb8006a360d1da12a30a2b9a0346063a370706e6002601a8d6813aef31872b00aa64bb976bcf0baf2cd6e7e9fac49785d42f9bcd81c076faa1efc14c7083a6fbcb99a341274e98f2ddd7a8a2455e05b0904ae1286d879b3aa2c1760325c4f2b5ec52a5841bafe4f1b14890e7a8dd3e2446f1d7df0f0b5e3fb2857e96d9aae315ab310690ca1f4bf7304aaf1d17865ee706a330825da687c9791c67ca066d1a08bba8b9156eca6d2a729fc1a8072ee0679187ce97ea1cff2169f86ec118c8f3cd4fe4f86bb94f49fc5904dbfcbd37bf641ff0fb90b82d8e4652eb15d3e75e3f53dee6c24f0f13146db2a3cb2559dddf2873cf853cbc9cb6dc12fd73fb8ab9dc8bf65b41325566098eab959f564ecc3aa394a981f236def8bf6e0fb437a8dcd425e5abfaf0ec1e669fd04614dcd7d951c32457ac6361ffe398cfd280dc3c2af9e364a068bbe90555d924fbe91cf198c72bb89ac1a7b81c8ae23246da4bc220cdec71b12d6c707caddb65a48f7ffe940db24626634bb9478fdf74cc25ec59c7e522faa17c5e944c351c03935b0c85d58c43842763608bbb48f2b988168ec009a079ef83ebc9423ea6cb2bafc72d469b082ad0c9e7a5745d3e</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">请输入密码</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    
    <categories>
      
      <category>数据中台</category>
      
    </categories>
    
    
    <tags>
      
      <tag>数据中台</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>数据中台-01-前因后果-为什么说数据中台是大数据的下一站？</title>
    <link href="/posts/2022/05/e4c863a2.html"/>
    <url>/posts/2022/05/e4c863a2.html</url>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="5ef013dd4c113b74fb1c173f59c744ae364f594d632a44fe4ab6eaf5cb4c0d02">4e4fc70cc91fd42566446082a751780fd5618d041572b8bed7c41bda7a5fe16038be3debec314ec22c9c0454600299556499792d68f992adcd938137e8287b9d837a30876b9f110bcd0dfe659d14a93eeb2227c523f6b6395bed85bf688938a1c3638a4b4fbdeb41be75e28f76dbc2b5fc31e7c865670edfe18ddce3812f8900fdaf3e1d4404267cb1446505eb460ff781b61441cd69088f354151e530f89c0070c0ac4921c2fb74581e6b9e868f3b8b3254f0b120f7b173eddd94cedee0df3eba0f93dbebf5a6caa0d5d5accf8b01e0be7c781d7dc0590f010ff370172a7be560724d8f32af1112f6ad85fa6e6aa0fd50dbee084d63be97f90870174534fc41cdc37c1a5b86c9e62406a505c43d9844a62cfb41bd88c65e82e82cd53c668964217d81002c8e70bdf84f369eeb18c7b1f8d9ec45fe73babb5f65ea3b37f379bdbd3be6faf8cfe365b6beb78e1cd4d8395ac0dd19672efc23105b25fa8ca4d76e4425feda33dff36945df5d2b694cb979b891a20607c40f4cfeb1a548096442ae74f757ce7d23fa5b47bacd4e8a2df856f20c031e2a1fb818ed049d9812ac43080e0142e23e8fd181a380d7499b698abcbe0ef390c11ab9a0e061fbdf9c844564b8923c2d1c73edb13e4380348199e7218aa2f68395eefb63a9bec888031c9349e031bdff4531cfe555339139db2ea042f01b15b89fadd26264d22d118ef180e291ebc8387393ebdbe3757a2b1242dd1f3f662bd315ffb868c750042db4bf0783bad5bf1644790c174c5e185c588ceda8a80c000f58c6d8eba70c180ba75e9b9bbe3591499bbb10af20df0df7369bb242ba2db5356f6a5a4db0710eff35d67eef42ac5d64b82d83ef41453182db27aab0bb5d9fc7fc2d6763a16b1084cd6e0d7a007f7f3d51f57d3ad765cddce5c6be092e3c4deecb60c047969b1f2a792f41aa96434f661c978220df23e898d6ec449b03bffa1c5383bb9e3f6687ee77ce524e4a2644f2a635ceb38e2922c836e34ef58901a921c0e24dbeeab328c8f43b57c4f6afc302fb5d9a5e05704e1d0f0cc124cef9b294388f74c95a9090b40ddc6dd683a576c3af71826e48a09b9675f06e9edbfc972850e31101da2233fc720dab32ceff94f151103164aadcb3c48189857c9eea8dbc8e0bd2c4596115539d1e9f1c497f47a55465cdf99a8c1e761296293c417c28fad9b43cb848e13ee9a293c6fc4847f615bc9cdec1157a53654e06c5289cbef9d337822435c1c1d091d86c1ea72048f2760cb10d51a2a0a7e9312d2b8bb236755653a3cb0ca770df30561918f523ce11bfc01d34e7881ed7b17311b4103fe4c1585fc63c7b71fd2c51dd48c04732c665fd4d48acfa8b1e32a80ee59f034ef7342aa50c8a824c363f81ff50d393a508569000b1f470a4c6d81d8cee0927700d7fc0a85096356a618a24fc0183bf7373fd3ed9a9ce14c1e671626b6a60f44405750aadd13fe2362d76bb132ca28114ddcca9f9639fd1fef85ec3fb043a3e69ededdb75e4e0ec55632c614f99eeabc85cfe8d6bb29233fa1d27c6bd3d4e1792d03bf634eb2b42070f9eb2f6ee1b8db45f5eec07519e18cd8dee3a189b5b3c18831ae70698d08a2b6df2066fa6faf59f6fd3c27967ff37199a3a5de22ec83e819883058ba2b6023f41520e172dca7f9545caddec2463899f1f0a921397186095ad1e8ddc1e24d7c5c74f73a43dcd226a62b0471afd398c98eba87465b096a8cd47a2e19f1cc9a0f7eb8549e576d3099961742ce7e0c513fc5e43b3a343164d0e5a62c5a3b8ef3d2dae00b516333f39c2bd9f339b72a72b400e31ff143f169ee5f917aaffcb97d10e91748365e45a0b2d221cc0ad4c096935c918f2388b47c76330af9ebb48859f043bb02326132f18f5284037feb22344c2076d370bcb01174e00e7733fef9234ae36d7f8759c5efb256baa410b768addbffc165931e9fb2aea97dcd122299bbdce68417b8c3799e8569655e77598078268b71f1ca919a484e067e6a19e5e182128753683407223ceff759d4a7cae618651776d0b624929b0731d788c5f43a566ab5b989574dc8491fd2c24475e109bddccaf96b553efa428704a3b75e6268163cf9236e90e1e480c0ac3a4f744dc82a13f267ea3046d928c4c5f87438734e3fd387507c839ec927f3df64142c4bf188a0f814a679068a9d83eea658e547887d3936c0deb7fd94b7e1e78c642779fe0c0b55ab97d56515d39b8ec84429eb6bca7692a1f150d8a6cde34746ed88a950985b225bc2748772ef3ab74a3ddf96504854991c2e713ed4f8fc9622e7245b22bab264c129683753483b2ff364490ed9000a8dc8305ef5d897ba2de055285733f3b88674b98a27c335f7d17733594333cafd91ef3447ec142027c4e73b87a928941cc98b88879a7c224d6ff5c20177155199d22ca85067d4b5b6efbeef8020dcd762c31a9bb06e91d65d08dab3ed3c5da2ab1e263db3027e66801dcbac192f19a3bec2360748173fe16227667a5f19e97cfd820b0bcd97a8de01d0c07ee2ab4e00810f3396d76129f34e5f99a40cdf959f6175d723fbe658ab41a7157ac2bf2ddfca98317d90333c0f270731a0cd205f916e9ef53334d98dc672f7cb594a98a01661096329cc1f4bf00cffa6c8024bffe8e89f4ce93be9a78e72b417cf3adc9310d03c00aadf9318ceea0e25c3b8e968af1f799a40807bc4b36ffc451587516ea8ebe31ee72b082e27194ce50d70207a575367ad945ef1dbdc7647bf51443e33e0f6ad7eeb0d28752977c1c0a1e4794ebca787ca290f40b03fe7b5c89b9eb95bc9291e597cb8fb5a4ef7be85628f327ba3c2c99b734ca21a7a0bff1b83cdb822ff90f05b7fc9c1043a09b7576afcc3b6ff3482ef50a2d0535cca3689a38ef29b34c9ee4bda03e415049549bbb9ea9ad0a992d08f4650a677598f6e1ca8f42542143bd3e32653b07c5693cb84631388981af19df707b3b648879d4a3e9838f5c7ca22bbf9c984b5624fc3908f33880b277af4a356c5719f8e88dfeadbb0c9d5397e1dcc6989a0449ce5cb0ac490156bb16ceb4e69a380fc9bd6514c81cccc26885e127d6c814d760f9e352c1a64463c1d1f83cfc749a084f3be329586f1ff650fc35a4b6629de49947ff53f9a192372e91bccbda51c8afcb484c78ed80752c44154aba4c462af877da064bbfe9ac22b0660e882aedced3032fe7237e675ec744df0206e07737ec3099dadf34c79082cb0ef3ed33e4d9dfce54022afae9c519bd3882b54cb28f2b34b263dfcfde1529fdc4f9772ff80e8c2a9550c89328df0a1f688235c29b4688d7d4f46866dd3d0a4a778a8149273babe143fcc1d1e5943f1eb2ae63ba1446c29ee8500cd3ed3964de4203a74133ec0a4a7f38bc2a93432d0273704abdfa46975d4bc416111953e9a4480336f82bb58fb2a32dd8abe077886e8045e8a589c158449d8cdbeba2e24ecfcde50408efdec7f9ae11f953335076e2a3af6f7dd9e5759ef553b5fcea953d35885c904c3135275795db66fc7a71fce4aef708f588f92319abbc343c8aa57242cd8d46192761653c283b91d96301570b9f8d972787c6877dce078a3a346fb1e01589a6ea46e3b84b5ca74bd50e730eb32b50889555481a418c69b3bc187f10fc853b74577d221d3abe202dd2a3f6b4599097ed8c254f3905db8548e778f0f14d86f1177e83ce2fd4ed4d5492f39a85e6908a360b2733443cefd116b461bea45c94ed22914d68de4522e1dcdb28a1369746585feae79377d2d9a822e76eb15b77cfc9aa4171c59ad8c4cc52da0826bbc57481d02db84f8a737a314fd609effec9a03e39c54e4d2eaab5d444f6d0d7e5399a6ec8267719bf3d43eb2c65840f53b6ea50e5dc2d88bb84c61126883c19f5de5d613f67e4069be14e0a26ceb2b42e3c5d7f549d887203f5c0420c43debcc669441ef47b7a279ed42d752a6f97a65dbc4f38a890e3c6acb67ca3f07d864b7e74ff8106b8a7eb3655680f668efce5f23e4979f1c0aa26491559583fd56fe8368bb90af8aa1fce32e1d096607d207d2027daa7744797e5caf87a351839b92d0aaf46d76326be551850c278eb186c1eeb0901bce3bbcad6d80e927412f8f0d6e9d0c078ba73479d2f5a694cba853878e83de7857af2cd073f08c8d7e80fd77f8f332673331b15442ba918a3d75ed311517ecf8db9deb1b9bce53c2a9d04e8f22072c808d408cc10653c340800fe5486536eec6a6ef265b8adc3671cb52681a05b1960b26a86b71783e1f00da6eb3d656ebefaebebf6cb140c8341bce0813a0035afdd77e83707dd648c140952c0f0188e58548c3aedb3219161e46274cdd27f044c6364ff8de51c4bc90fe8dafe36f4b783fdd26250332b2695d408346dbb52a0c3c7b7f34c81ee8785f8206e00bb3db6c0cd5048747dc7216b57e0dccae71d64348c033f0d757bd9697bfbabfc576f7ebb04529bd652e421f3b26d11bc1465a471a5dc7a012fcce03974f659eab150308726a185bde583a7ffeb04556c7d92d597d09dc4def6c4724933fc19ef19b99759afd0fbf3943b1111283e8ebb1994b660d46698580c7f501a95d5c5259c5e6f7677880cec0faaa9df4ea48938f3087eec5eeb2564acf3b2f081427b9e21f47ff162f46fb707212f9b6195fd1ab5dfacc00da5298cadf6fe4cd91efd183bc835f269fa7c2da6a63fa480773e5283415ab16ea48a26b932438c27f5b197e053f6ce83f3edcdfc7cfc4deb4e98c1b591a07385ec4ff093e4416f7be607ba4f0b9b2a092e96b90f081d081905fa6fbc5eebfcc62c57958459564b40f299b1e6edcb2898274626c82d92068e73ccae6b581738e61bde2839e655b89fe21ed4b6736743c75ba81cd0c2f11a931f9c91e9e299f0c484a390f76820d72ef2ff4824bcbfc0f533210ffd4cd95ec4dd13de1b3f1f240fde5949da4402215f0d5b4c57cfb822be3dc356188a2288e4680c323ba54c48f1af970c7ae94977eb7c8f743cd767e4488eac993af5d877da73cde622ef50b48783424c082dbcf77a4e343c9eb538d67073d479c8482c7bbb3bd5ae5825e6380eff88bea4b52df30817cf395aad23ba115dca84c7140429c790da0716d3ac0fa6c12b939dca58717da98fa46e03275ae8776e14f5035cb3dbf5b0f2478681dddfbd7cf7d263d87086959a37875c98904adec18a5c3e84a537038ac171abc778c3c91e1fa17e2421815e677d2c391b74b52220df325005f03356d999fa60ab0d6a89382d6bf78bd7bc5e1085d78fac00da1f21c3900ab83302e0b255bed0a6a74bd7999f05110518c25b2842f3371a5e27f801286d59dc75d0e8e0a6f1432f9cbbac230dd98fe7525e26187e3b781fe648754200f8fb36231a3f74bd9a03c3e60b5ffc5e27603d41ab388a2fe57c3d8c505306c2f7a913d8f7a005226747fcf63b417be1b3ada505f72226dc67c63dd40459108b0db4a75f5b4544046b8c4bcbdc5f68b72a11a159129ef2cbb974ee29463fa57ace493250ee89b3dd42191c73e319d37329f86330031d8506d11b51659e2f6efb483b99c3ba92043f2c47a1199ce4a1615710631608f87856bfefb6a52b55515fe6a04106785ff5702d1678494aea1187286282cf6688adad8c00555a29b9ead7ebfdaf5a8d0a8503f06adaed5563db84370bc3b0882edf5ad31dd94b3bb5771cf6aa538cb0f247dfcaa946b56bcb57278fb441658b05e5ab3ca6be105a5263addc684d6a816d9518011a090b4049d8e64782522101dc4e37fa0d61eca91f4474e022f4d8cc58acbf9d1feba77d830afeffe871098d0dc29aa4b1edf88ee225ad4247bc1b29e31e4c9212ca21864787548c3f8a02d4e89897a066b0dd785c3579418dae5a2aa97cd7df24cec3ea1710ee966e37494916bb32af532c4792e166e2df55fbd99d45014f254637e6f874dc3e81abb0f5aeea7f5cf5036bfbb1695ebbcdf1ffdc76f366a3551f7f6aac51586328822e7d5da0d4d19410a46585bf990fc4c4af96691fe6cc1dcbcc189a5e745a6dd33e775b0741ca7ff96d8979eb43cd2a0fd538bdead72358cf5a47d8da0ccbba3c4150177ea6e46e6b853b4b3273b658606fff43ab3adacf7c7c51b6a661dcd520e53a9415a0a49366d3f6d8522b4958f05d280ee0e03ee87014efbb3f976cec9cbb080062ab06a74270248d914e8c69aaac64f84a581861400229c6a5c6e0a572fbf338e8cbd492d81965671283de3ce229488abe8ee282f3e77fb3a3c4a4d422d58470bb16818e1276fab839c3eb291d41e93e1ec6f1fe9371bccd90007ff20aa9864625ead298f2eec234ea181ca70cf816f1f0e40834644e1a2b49a7ef195d68ade2270915e445f0abbd4e64bd0695d415a515ec6418106fb2ca4fd260cb1e2f63aae9184959fd0043ff107a3ad93add09f524faf0209c8ec0f23f608b6d012ca4095a853f4b313309897250b8bda50c2ca5116dc657b4cef85548346835426bbf5af6eb181cdec8130d20e4de608e5eab1c5b8c14dd9680e57ee574073ed0fe6f522b929540085eb96060e84a7e45def51bfa79bbbbca57d669de17c2bad293a3225765547fc1393f4411a0255d0ac20713c54efe4032fb2dd67cad5b0016c1dbff270d2b13e4735ee44fcea28c9baf019ea12bbbe271766bd6dbcc8e5555c2c16f21438f3e1f299166816235de5f4f3082c904ecb9f1a9d4a532262becb2c9a383704de9821e276222b3aa028c6bc55ab927a549a93a8701defefb0c03363aca1a163b00c7cb0a746541e5fe79faa34c731ce3887e0945bfefaa16427d935558f68c277187002032a39e440df7e59f2993b2c7309d30dc444243a5ab7586fb0728d704970b2707833c6be3a5c22cb79619201d98c631764962f390620c5068991e502e987c79edcb073217e2839cc87f4c3ad874d063c51162dcec816c2911fba1c12cdeb18ca8cc0bda72479f44aeef30a92cdf8d58905e1b92c7e53a6a687bf638b41a8f21ab9381387d8f22845fc2303893a8b0783d7b10bc873222d719856ac91ec9f91fd5eace5b68faccc4cf1e7518345745dc59890239f0d1f90a2cdadedd2d80577a29d7fd555e3441749cca29422c9a719ad527a1f785cf36bc06ff41fefa351ddb87a96db7388e885ff90df07e8378f36280df0f971c5366e4bfc9d65197c6bef137bf56740422959f3971aa4b1979cc8c86200dcb78133243e93263fcf9b13efa3090ab62e14d4340ddf5adbcbf8e60bfc4a595544093d9c190f7de7151126eb41a1bb8f0c4825d718f0cff7e3214cba05282ec78a40f5e76c7d256510ac8375ab5a829c3192e9a1d1333c25f0e0c425bfa001476bd912685c22e079528fcf62ebbc24d5854772127195f773db6f247a3a26e53d42f19b9641947661926264f3258345a2b6aeb12161e7cf8d2dd9d042ff4a8a6da6a9c2b666b2407ef3bd6bc55977b03afed696ebb74b5e5e7cac9c7b7acb4116b365a711d66554e6f4ab524fe2fb138a80c69c1a153f37345540264f0cea9f0607b51e4a61d3b5840b05738e3ef36db3160010735fd787171b879b4f3a1b54401eeb68154766b42b431816959d02a40688262d16eec37f927d8fc343eb162a4a559cc9006c9855788ad8739215dd9efcff5ec97cff9a728f0c5b7451bceddc8e4b3c6d90e53cbc394f6b09988821b9c6f641bcdd13e30223efb8a30e0dfc5d99c7d7320f76e072d79675631c504ec6bc5594ffd91b9a0f74cc0a03e209dec09818e264d9fc594bd4f2c3104fbab68c4b9a363e78305842f04b59cb45adb8761f510bd46ef41a8089a9f97b316a5acdf1feb006e62d05189d9d4e5c7249bdabcf0f44c09708848ec5230bd8f3a440bced3898d4e83efec2b248fad5ca1c6efd4160b301872a6b9824bdf184fe5c8c207dd2b15bb75e9e490b5b2b55542bad0d946702ed42eb7213dc5c53ced065026612dd4cc856673606838a2b8f36f9380642b7a4f0fed038c8a52b2741329b57c054fbec12aac57e643e0d68c6e73a6eeea57c1fe9355224a3c10f0870867bf231c7bc39f5022ec90d8dc0c0f0c58272bc628473e834f4a4572150f3494308fd92abd203b64b033dc1522131657a0ce59d7ef29a5f1a44ea0b7b71f7770449a7af4f1348573c84da0c94f4ae0710a867f08caebbe6ec4ae0c24c44ff8b1592e591f1494172a7ce86acede71aed24beb22795f87749391f95d41fe0bcfa779680ad5f55ff7dcbea48d3e2b8cbab5a2aa72999923628b450268625141e2b3b3d1e47715d901423e7a78a3d9f0c634bf4f4099c9836d1300b920df7955fdce54b193e9f3be2d5e61a929777091961994f47547da206855825c59a78fdf28cd5c804d6fe349074bb2a3f32253a5c5bb977ef24ce54a3b727c30e41ca1c81e51a546e370cb385fe4849846fe89f1e135e4a260d841eb414c073b12a15bd917f8515176a266742b41c7f69597f1fc0384c848e8454477832496e0bc2ccf9460695bf97eb5fb8b1d720b0513846dcffd3b10c2a360892e89747b24c0303c00e19d0f2e858c13c89d43f35223efd82136473525ccb58eedf2a2bf9fc0b699b306149bc1cddee913ec094f7589d9787d98071069756ca0814c7fd3bb6870a150e8a6d0b8fb589891afd3a06760e00a6ed082915f1ed8226982f4dff6bfc54b39de154bd11011739987fff2718ee337427009fe8c815b7261aff7da2328d7a00883d851779fee9a2bc6db22b7d54279edf2a226726d795fda588525a7a3f629e0249d745652c67da3d99d74593f7394568f78264bd79e812075b656505f1cdac7eb2dcae486ed5d026167db60965eeb3be0c5dc7e8e822f8169b1bb244528daebc64d009e6b567c3dc1c070b65e5ee9aa2d4e707793809afc077c784ffeeebe7ad1934e72cf469077e76997aa0d256275388f39aa70a9fe6ea46eb9ff5d906431ecf7c9e53fdbc468e03e73a3e7bc964c7ba32336a95fa651f660ce298e23f79720e99d8c8869389c37f3c2219ca06613b8d722c74b214697d95f01cbc6bea5b544ac97a0018dd15471186a93b74e6d8cf3b08e97d653a094c0b656ed1b57557dc61c1861f454dbd460bdccc62efa9b23db6f477d1eb7cd9bbe26a054f4ac2cd6c050ab8e853aced68257583c77c47698a7ef6286a66649ecae9831efc064c29459381f2ed52ed7ad19b8a018fe2b24f1d7b627ad91dd7ee8512a16b79916b9e90f3d5e5012dbe482fb40a1e6a2018ab5ddf436ab6c260d434a57f15f0be6300f62896e797b5de1c6485a083b2b9821ce223fc04d1384c1f653867bb9047b33aef4cb9ad0b0240c88f50ed1f627877845aaba57084c475e41fcb6780244c12ca039b1e7e644d54e3ba779293242cbac1b86c235121bbad2d943dadd683869e63c6623ea66bcbc66a94c8666e1dacfb3d83b2a593b48204f1ec09acb44eec30c8df613b00cfd1387a5fd1a082d18168fdfaf890a06313fb478b23f2981a039e9669b58912daa65a8890116d0d52d8ab4238988ad499efe20de25a65c67b58b4a02bcc02b3e58051fd475694fb1a07cf36d038bb743d8788ec3df18567d6559cc1e4851a9706d3daac9b00f3f54db1e7421186dfe1b6ee205cce62a710f719401943e1af10b560cc5e828a24c99dfa3cb0fbf01790e0394db7150ab118d501ba1ace55539daaa8cf8ac107f1f4557a59050d9cae0b526bb050d50450a5f76c44a5adc746635a190a179e268e071a109179aaabb9b1e53f8d55a4f216ad22304a86ade7e9324988c3f08e385b5d6a232b719e361f4b0ad430c8fbab0d51d9ba5c4955cf53000c9a3dc6f8491f8c8974ce7b140512527ec79f63756bae30ccd12b7da92a2d77a518334024948368e5183174b396e6190cb7ef63a7baee02406e1d8b3298aada23e8aec0e14a94b75b067680534165b6bfda6e2fbe2dd646277b348add5710de98c3b09316ff42789de2451c69e583f1e83b53f2d659b9e855070a3c962bbe613d00c7dbf9b89940a44040e6e59132f081b9f193b903428a6354d6d2e99c5982a8e3df7d4e65295ceaccf83b861e1f0dfe88ce3c59cf2b30fd28c06e0112f299b347d837b7e275a9140d1cdd4f334f42bc6ce0dc757ec4fae38b65a0ea9a91213b0c5ef363303b8c493ed4e8d9d9827354236e17d742198fa7c0df21c6283c61e78ad1a442dc9ec8139354307c9c9d5a646b76158d4edf11ff65237ba21ef5ce074c82b1950d58a3640836af930f83ec689180dd775031b29f8707746f17711a2ae4de0ec7393fafad251b9445b0872d5e50322ef9e8dd3574ee11cc1471ab5a20861baae2151747eac564348c9e92ddbdd82645fc747845952ba3bba77af37798af83dff2e4a5b736a860833d015ee86e35fbcd58d5bf1c3c4cbf7a2fa08725443ceec29689bd591435b6564e83ce19155c6c3c1643e679a85421cb8694435e0258283c7ac55c1e514033fc27868ebd67f0913f39cc5f3036dd131088a583c95fd71731554b1740942f3d685b42ddc35754800fc7919ab559fe8d0939bccc12c5f5203b790132448db90ccc6a43a270dedf467bc42cc864e6132987f7fc860faa62f23153c9f8527eb1abac46613a463a879515de0993dbc5e8325f55a7832078c736635c6a2ff5ab5c575cdb263bece0d07678e55a89a0a5a45a19d2b5370969a11458d0d989373f29e1fe8eb5b3079b8fc62a67dacb86ef9d8af86fe7b15ef81b79c82129e0a79a31b9f394b4fc94544ba09c69b1726b7ba9baa2f49c59f1eddd49ec39202933f411cefbc719661674dac52d74c06f3cd4bedbe6c72a0449d6ff097a656667b007d595f95d1bcd2474d55daec81f63576788c484e48d988b9caaf4150b51e4d1d0151c2545f0ee59bbd4361eee20944861d9e6a70e436a21ab29a070cd2c1299bc4e681725d96a42e7835a4654502a849cc9d7107b63348db127427a05e077a9e22fc1735eee3ea4371c2a7c2e3842b9e22608cbd20cdc7e6a90af49902aad889fc1e6501a4ea2cf3d2c4a3a3da7fa4f3acbe25e5b9ecf202f0307b9a0c76c45877ceb171526879be8ed7f6000333a422a84bea23e9a832c925557aa9816ed2c909ab6d52fc893f404d45d573efc775ad3af168b660dae8adab9d6a4139c43218cbf46af533d19de3574efe89d14774a093abfdde00917a23ab526a54fbb130d0383ec109833d69637c309c2299968faa78abcc27662791356bf892a9c21f2f0f315e379d0321b24b17f5cfa0cffe5b9569b0f5aabe256b97d7c1ccd3de551288ae0d937d967141572dffbe6af6f86f3a7de037a7d3a67ab6b923ae575bb32ff0dd92154fe0c9d98f20f9f12d1e10ef2d5c2931d6212039bc247f2b9c87e80eb3a796f25505e94ab7d98c9fc99c94e35c545bd6738ad2e460c2fcd2bb9ad6d261513bed759b3c3dd83b679a5058664b512d8f654b923de5e21455d102ec4a12792d222ca9f483646638bcdc6d4d1af7da949269d78b8ac5ee406229c1188750d6083181515030e4804038750257eefd70047cacc5124f73d77f14b38308b13bdafbb55fc204714ab93c854d1816fa8425f72a096a384d3a295d1a8b9bb40ab0ee3b57ac4d91a64c5083a2b487cb40c893437edbc4b76de956f66366e69a57e051d911fa939b86fda224f8cc265cb67d8c0258106afc4666baa8c99691175802d3dd5af0f9355247427fc39f4e1c9ca7058869e5796172e6e404d790bcdb025eaeb588424f7cc927d6b9c67660c8ef68ff37b8193148d687aeae30d8f3a72a9a9f0e416d550daa8cc39cb4ecbc40f3beae0455f64be217c7ce0741a865d62c0846a68b12e32c2e1ef1b899ed676fe9ae280189cbc814e4b3a2961fd4b903a19a67b9a2fff644958b31707a84377ff16ba9fdd1dd7ad0188a26a45fa94496d59f78436c185a2babedfe8578e0cf9c888a5c709d7578ee52e0e4213a2b037d92904bae8c9bab7a43e1bcfaed036ce951aed027028ab944589881b04809578da5cb3e25470eec6a87222aa7578e18a7c861f38bfa96ab962b84f0a3d1793e6b8f5f0d9b95f3e52b94b7e2f2b8a3f6c74131d1bcda748aee55e4b1dd599d6c3fe5b469337d435970b13227144138c8d74dc821bb7961bc89a881cfd119c5920cf6fdbba48377016993436161ea0acaead50b5d765f56561d6140af2689590cc078cd10d185e49b036614971d7c352e38deaa6da18a71dcc0d5903c8775327027b0126856a910c57047ba910f066556b7925d47f7d6aa069804cc0c965d518d28aba3785b527ae2457a9e23782c63348ff976c97e35a7c07250899e0341c74a391dd163779c29ef7136881e57a278e02cd1c33c2aed7b1c68027806a211b60ebcebc2f126d0474d27bcaa952668f87530cdd15a0e72ea9e2aea553d01d2f71bd71342376b48aef12f067987ccfb9ddfec2b410470ce48699c95121a840955af1641d978ec35c703c8de5581f8738021a8158e4ae55802b0eecbb00abedcca26a1a4766ffb8cafe2610230c5c22f4d2ea26dcc9c0147d3185bdae5798a9002cf72750eaafe927de0f9432cbb32cc156f7c93787ddd7c003be422f0ccc14778d2df96ae45ba7dd36bf049f0429c9e1fc85cc3773dd89e4b0a2f44e7b7f963cfac9f56876da18ccf83dea0b1a0f7cae99c36d85722dca01a5d9914a8d44028e63f40f84482cfdcd0dd7b44bcc312d4970b8570eb591e01b0d25886a9d20d6b6fd7adcafa62a0e2968b8c0ff4275fd057439dfa5f62b348013153e5590b7137b9a42a2496b006a217755fe8737ea00915a037736d09b0013461e9a48a557fee2f3f4702b03f304fd7be7ef2b6d5e354df51c80f9117d92d2871bfbc6f0fde5776e45adc00eb79b8cb9aa135bf583c3d61843b6352fe954e661cea498d87cff88b55dcbbaa3da513f27dabde08b8eac21a6dd4dd12477e6680846b74a8ac181b215ddebf751564ce6c1a26ab39ecf4fc080369180499d0e011fb63a04d81fb7bf4abc36038e2340fa4f0175872da32c45e9efa9a33491ef84d94ceaf6e276de34e9882e4ddfdfd9422546f69b89c3c7aa63a58134b0d9eb2f89d914a11642f455d6838ce311f83977cebaead42f2bde1d7d5ab15a11472fcaf913ab6cd6c7cf657533c42a243b77a0aa19efa6ac41578ca3b26b8c4f9d239b51a3f9bd74e42074962f911771683685f5aede3084ecc9c6a027044998187d4edc85e69d68e9b9c8452e986a393f089c8d51f15c5ccda15bd1d6f381d925b0bb97d69aa8157949bb471c11d03acb929f2d49905de1199e32f4cb25f665117ab1a3c607b9f03d8dc005fdcd9e8ae337de24e6a39a0588f6550820ba68d08f4cab42e92087d303940eeac062933d87020fe153e15fd02437311512f1e3011b7527cd122f36aebca469d72aa1f93cc56c6fa25aef4fce7d744d1b2538ee4b36a796f4f5e7e362e645d76528af345abd7f288b215501c4af06aba3695cbbbe090535bb3583f073c0333978abfc2cf0e6fd60822702e20407948de8400819352bbe1fd88f19b1e45c9ae80fdf25ec7b9ac6382270c60940ff20f4490eb65d80f13601f1a5a730b8b8fbba224392b905d6ca2b3db8e19e5a8950db8cd81b247f9bb27f0695bcf962fbedc8c259c6b5cbc487dc802d170526405acd952c9aa610177177c44894a88046f46826e8b6c31a5b3336f26c8383f2f502877d55acc5de52d77fedf1ffc3804e3913fb60a58a652f03fb1d31a211e640bf9c989770c43cd84a45eae39c5358faafa7b2f606b2f554f6e1d499d735aed435a1dafb81646adbfdd6a32356f9f80a6082e5695e535ba1cf88b1d4d9f5b77ebf231243e6ea2e0664ee538b999ded3bee65eafafdd0072f48096a0fe0de1dd30a80a97f6fb7a9d48947aa763ae78d13fbe1c9ad90d9a2f8e4fb7d75eab3c8be0acaa93e8d9514cde09af9577bd5ab22f839c9683bba6a6f41eda25e4d9c2cce060d43f41807df4b1cfd6e32fe16877da4f9b63233041a5594512a1b6211f6c40ac281e0ecb7d6e0c0d2395ddfbb936d8c0cdeaf174cc9675b87eecb0a31d1550d91c3eaf7de42ff50fc2fc54a6a666d377864eb30324cb07405fd0d4c69528f757a97e7f022215514c0dae4a6e0d19ab91286ea4e9fd0f5ede163ddd444daf954043145acec115fbf025938f5df78936746a9ba991591776832b0935a7572e75163081089bcd7e925847d1bcb1043b29ef74987620423cf3f3243e6b3f70bcb2eed5a1c25371a9d43a3ef0ea138f330684bfe69a90d16473fafeecbacd0f620eeecf733033923ae4990c1ccd737c1d77092573b0dfd5d69f4e74a873019664e312ab3646a258c98c2667ebde775fbe56dcdf128781ab9ce91fb4841696cc7097936f96bba22739652559003abf02a1b684c815be1b71d0823f0375b81099690145931798585b89071a2a6324b76e8cd2bc88fb8837180f73c6157f1be02bc2f212e88bb72453cd28a57497def8da625f9d3615b4840baa72d2536162d0ca5cce39a5e648f9bf55d3206441b5a605072fdac2c4eb4d84ba7e7d7cb8d8ee2cec722e3033b74c94c3c72ee09dacb429c3aed34fec53452f1d5b77b630bf5a2daf121178bb7c5e56a04e415b78ac11b56e012efba412f14e363e444be798a2e27e47a6dfc78a5cea0d2418a63f416f34b7021ee4d7468d6fd81c624f9420b77865a3c408782fac41d9c7c6082009c84d8d061fa1370127639eb95b0453dd2339dde80550e2a74d0c262b033c5d70ae0dc63e242b518657cc9a22e90fb4b83e42c3ee060d390730e8fd4b53b96460f7d70a31eb6f8b0641d2ff6f19d0e0acf752ea0cc584012c5903efb65eea0af32ec84317351c30f3d369aeb5b2166b5d92854e28d8fef38bdaf848796d9bc3ec00efeefb6d8c4b3678dace9cdda5b53398a54e0a3ec5d89e2437ddd1cb634e6d9c92f26d8df12c432dbd5fb8d4f50d52591c6e727631e4328051640dc74da5aa1b58b0d6eb567445f9645a87e67162084f58d3fd8f31a7b9c9a17e3391543083d511e8173e9dc30345673e43c6ceea9424366ef6da992951ec02b9e0347f079d5a489bb8d968c4e93e634ac33fbf0d43622e707eeb3cffe19f43c36b4792afdbc9fd1a9a4983aee38ab20d9063d4c4a6655e60bda0442bee3cb6d83bc3b8879071f083b55741d5af1b6e48095de32be3622b0bc35dcd0912125e8792e4a5712e7e581d8786757104e8b9b2ebaff5d5b4c5ffdfe8876f310d979abafa91bb150c31402e3e0cb2c461ffe80082f6116b715d01f5d8d935a0fee08774f4a533c36d2a4d82eca0d42d1cca75852a8b06da00901641d2e5bcddd9fc4b2878f636e3d51a1e198123def09895875a5be9204fe19ed69805d0c831b718eeed5912b4118a2520d7cbf5dca5bb837fe497a733c30d71793cb3e86783b92bf5b583c2372fa5715225da2c72a2f93cb553276e6fd5a238007f055b097b67a92f81722710c013bf2b81edadb07907afbf43636c12f15cf1cbd3234096704c4b57f44005e76544de3e39c78308068a0b4ac7d043e4e45a68c7dfa915fefd6805543896705f99745478521231ce87b0b1fccdd6ab55592718e10538bb35725c419c1c3d8fe19db234f5a124070328a44791acdc938f64bf83b1dd8e1772ead3d58de86203c27bb2e3997e5703e72f80d818a4eca3c495c0626c8ce1c9c69f26c41fa638815f719a9fd13fd794d70a4a645f8bdfcb5846221ca972a5b9841cf210a95c68a4b3f702bf16108aeda2c8b61786d00d61aa12f7f00f46dbb3a5de1fab10c5e01a0aa5dd39c1962384808fa62088b11855b043afd4bf38e1922a6443e17cef72971e202e6d394a4f41c92d6e1a60f517ac3707be7db945441e48274f8b6c420b331f95331e18eab3a50afe5c888b537e2657e9257d5d2e713ef65975936498291796403a4b70576ac9e2ddc393ba0ea3f1acc29a64cb33f7feebac0c566e5649279902c63cff1f03ed8701eb26641261309fc7f79535b18c9f21d94d33fa410a1c68fe36775ae13cd598bf57c821d7f92e59ac41905dabb93455603726f67dd0fdb0f28f6a768f530d2d59b5df80985096911271a9f1389bd9bc84a8ced2e9086f120d8dfea9b7cc9b8d42e951d5e426c83bee5feb4bfd937934f31f3e65afe42c79dfc75c564dd1aee3bf80bfd347902a2e649cb625b6394d90386143d655bba949eb56fa0028b163241fe284efee1bc7856fa42643277ecdac0be2bbff3a458174ae87535dd3d096a57218fb586b5a8d93005e73da6dd0297d5fa1ae63c865033527163edf22695c401224159529a4d56813d7e3b2821789189a28ef846790baaa7956d4cd4c55bca4318241c338a3aa1dd04a941e05327f3c73dc980eed83addee00ea557f2262e03c760f43330c37403c953df237a0cbc3603e048cef1c4a4f083c413206a61f27c1d9370946fa2edbfcbb79daf98c725197d17a4f195e5da9524f985e9d09be86ef711dc2a17b35d1dc9d53cbe98ba16a7034debf35c3d4cd9823063af0eae4e6312aebf48a906446b684ddbb956ff78434f79fe2269b50760581d27020fab2558524950a3ebe44533a071198c838f7c3e3a00b33faa19e5accbca46c02dfbe0c6496bae1e85ba493240253cdff372d3ca2061d10bb01516ce99835da5d231c14f4dcce4c0740911c2fc0c0fd04d0b8edb2aa09d9e24ddfb9693fc714f880ef84185b30d98bb0c494997cd7da921a3fbfa421e6ef77f5aa6d4545675273a0c731683e8fa8d9f64f2cc023300e504ac863bd59b9531bf11d16efa241759e2c35eea4dc68132f343ce1d9a1b8df9d4868c2c45462593c8463e122c079c7ec354d3b6acde191527c767358e5da7f53f3f0aac99286872b712673f9fe24aaab769157586f2ffa6fc319bb3b90c8090a435c9549e4cfb63d4fea4699e3988b07867013b8620993d23d93582973175e8d1d020b22ff71ddd9b8465e40d322351729be2acd8a4b92a05962ce2eb69814ccdd9cfd6605bad467b46d475e527e5d676ecb9af15e2fbb3b146d7456749f4ab3c2749cea93575f29f7c27280ce41034b4f16d34f348ed884eaca6d91ae01ac93cefbc0bfb05f040327154edb14e3d08942e1b7bbb37c6c50b14f5880e7d02b8619b7bb553a0ba4fde8ed600c5e00cab26dadf119e85d40ca3ad19e8f00a1a6323feb0aac6d92e8ac7f29cdf62fcaf0ba472962e4584591182c33eee7c0d24048d7f1e6564c2fdc4c4ba38f87076cb645ffa10b65b0ad08f72dbe57303332e5acffcf87322f3fcb29670d723097402f2cae9167a76fa286528f5ddb9ff4babe5e2845c93cb37bc86da577419bd70c8c4f2f99d63b3749263d462e58f1a9698def137f8e57aacd7044a23afe56dece0b96eb20b6228f4a2d6126f1e9513b1efe1890dfd9049e333d3669ea8439d4f6b28af42a5e87960438d983941d405d9d4cb4724ee1b846142563072cbc1a9c1c08a241988a2983b1601b027cd59072925380b15d5fdef84cfe33fc6b2891a8a9d9805ec0d10086c627ea2492d1eed69da2a9ef3ab6a4284f896e317ffc0fbd4147696292a8464cc3ce72ed76b0d57391dd49e9c6d91b8bc4bb069b631db6ba786acb99249da9d3f4ea0ff2790786bdbaafbbabd5f17cae80077016654f3d344761dd847c832209a7432e5897783618f300e25303b75d5a77207bd3ca26999d6bc0b26ae54541edb2e973aa9130da6c9d383cb493d168e22e79043835fb4f22a032b17f18549dd564aa58551e2cb68a8f0134110b0fee22d52b52afe78c1ecbef4d9a6df66a0f95aa60692db03ee0b32f919b0d06915b2623f4dfdc91e6bcab84f8060111d4b0445b8cbb869db290f7f99293c4de16122a71627cfd5b2cb6ec1155bd445222a46ecad79fb7e35ad60d562fa7fd4431bec55802aee4cf934758148de499ccf4f382dd0d61e30ba627f6d6fb9c769644eebf2e5b091760189b5c99440be729911f2f70a0c9d35ec5e2a607be349289271f37e56f0284636e6c0a040e5c7f6a18cfd048fc7cc96be606a02204b067f530a9118b45673d0dde0e2a223b412b649e72e4f1e3cbeb0e1cf92b4e41094520f861a1c211b2fc168ae256a48038557d78a03e0fb0b1a4687ba148749794c8af2d569fe142da869346c1f1e9d157925e0d3adba735e766cc2c4314f066716c0e1838924d23ac28846609c9d7e7781d20fb6b559404f48682da1162265f41ae0ed0d5b492b844365cb7e0223ca704d4e78a6b356e1e9acc7c52901ce3b13ec53d0831aa017c87b35ec8dc1838bb83ade1d107f8eb39dd1bf29b57cc1678aac1e390ead2a357294bcdce1caab8631bf3fea8153f8330d36352df69c438f0484ce9a0f47a3d4d7bb6bce047e09bee8ac64481b24bd8175f623286727263cadc16202a4fd001047cadf4ab3337689ff552516ae3c4aeafe856ed9aa0b9bf8154036e10d9f8f0bdb8d892ad5eae1523c32fdeb6226a8c0bf1f48a9dd405db8072b6d2b791d00cf016934ca3146488d150cb6bf75693bf794efdf417731825d7faf0d82a41b11932cc6c36eba3ab985206fa063bbc1a7786a3a9865c352347aabcadefcb8027cc9bb2ca20fad6ea3002b95231292722f4914bce0a6dcd1494b248d1dce7476b03a038c1f8337137048bdf986f6ecc7b7fd15d3a31b96f5658993ad5fa63688787d9882de3210d5dfe85388ba83b4f479d37d00f26698a0a971a1cac64a0ce4224cf0ac8a90ee13d1425301b1bc4fd1d6059904330bf0cfff7f974a74a40afc2ad0e68589170ee74bf7868527248086c5beb3a4e8792f5000f9d814742a4fa8d92bb2679d02e9389c9699306518903d9b62fd481ef46f42cc761a00c0f859781a09af2755c5d362d61c2fb4e1f720fcc76d807284414c94d25512de367cfbd261cb222a5627e58cce7167999394e5480bd8b8bac3b5e2c79e18c3b821da5643434ce08eb14862bbbcafa99ac3c1c3a98fe083ec866576534e8c5fdf5750ad7d11da580eb562656de63be4c5ca4373081a3d8f587cefccdd686290c7abbc2a39eb8c28b174ac3486a2c629793d155714bd9570b2a51ba5b1187858fb2a2c5f452e56455d0c5da812a90c320c482f9fe40a6ea8ad55db52239b7365e61a68cd8f31832752cec851b90e97ba3864f5cd392638641e3dd03190371396b5d1b355cca1b54ff31d9291e544c86ac8254b5d941b81c67f9d7fba0eb08798b25ab219b74027a616ca559fba851114f5f429447c5667b33d1f72594abc87d3911d13e17bcc52cc3d3050f6882320ae6c76cdd83830f119d15e6fcb8cd59b862298385ef9b07cb967dba68aef9ee3b505c7aa6d97a89b4b274e37ae2d1a563c3e66e0f7619c15f736e1cf4852b98d5e2e91773911d71387a7f6f4020c7c671d715dd2099c7ec04adc275168cb44daaa36c3809493ed544d99561a5d5caa77e4e5b41950ae0e882a9991bbbfbe428a1059e0adb0d31ff68c32abe4ad776d3b1e429e8776105128c3feabce59e9d1b3c1e7731cde42eb5d394b4918ead148fe671ed50b59e9285d629e361167a05f586d958a4162832f907c269142d0376e9b1e6d41e0e9a8907e578fe083c42bdfe3739d5884f620d5486ee6127ebd537d36ae7bd91a367958b8d258035b221c8766856c58bd15440b1c4464aab470860b058a4592098ad7fcb27eed5994431ff96aae227fdbd59f2f624cf3e68a49acc1c69879a68776d19d19c6c4be287f355bea05b03b055886d6bed372608ab595e0ce3e69e184611e204d9871549cc7470abc7e90c9840765f59966d0ae94bdeaa8fa58f71e9bc5eb7a9b7b968fe9a04db31102d8e02f9792080433dc616700e135acab59e1ba55ef758ff4c71717453e7415e21a9912549f64d36e307d12b60cb543b58dfa0ab356dc86b4ed49de37cfe150ee5bc914d4a7198e7f6404fddf401f663405ded10181137fac8061a497d6f991b136bbdbe4d8c9d5ebd5fd37e8a63d948261a577d6f5c4188e6a1b1ec49805a6a627b6991795443429a29389561d5bf4a0d0fa086412ff68f5fc2a02494ba92a41f3c30cc771da3dc2faeac927500685ef0c4b33f478f4931dd4713b2781f3e071818dce58aef2905d09dc6d5a1cf37701c050e439689f1e6238d31504af6a6faf1cb3dc4d218250c6bd507772c13625e775d7ebc9b0540dbfdb2dc2f050ec9e1365676e5db21ca118ed3c60fb63c3c16243d81e57e6f25b1abf76cdc719e8ac7bdb79d6381e4daaa7123a135b01ada08374143d1d5c399bd063b364eb8528716c97f9eef5d6d183028b3bf36fd3c73c8517152c87eb25b54be0f2341831d057fa53fe0009404bde94b17a6a114cd72fcdb0be1a620b8f87bf98f9bdf8f9f1cd0c5e17111a773ef9bdc5af70994d5a6f12f4d7f88eff45b758dd62723ec5eb0fab56d77caa1bdab990d6a238b53422c739a6e426de375e0d3e1476ae75fc833112776be77d1e321667370772a7a89f1be0e6e43ce9d1d5b5167f3b5da58b9abe63a2c028fe3bf4b2e16e76fb154809eb0f94fa16fd49b57c36e0ea7f4261798306a4344639dffc355e1f1efea8cc6d65fae3b96f1cd1e12c08fa29e28bf4e72f5654cd3a0bb866b4a5d593a954068205a2db94f5d1b99af08367f2386c22c051daf61ea99bd69c96ebd1c3061ea28454310b19dd4644ef242c7789b8fb63218eeea5c99bcf4ad1c49a409d3fc64f6a549a85e6bad3ff5f63f3f121202bb25a3398e46535ab7d0a4bb2b458deb63594ee25c4d6a0b2cd2e377bf1cd7097d79803c345b601f6a1482ed9e4c2bb62cf8cdc0d470d9f80724a4ea2bf21d2a31ad12bef8252bbed7ebe6ae5bfb59e593236ccbf38e5aa20b7713c856462f54a2985b56f2d2526ef75703b99c4b801c96a4199caf02af0d0dd2404b3228bcd8f79381da281680e2dcc2e063f9d177a7eadb476a5672ad7305a8995d0a4fc9407ea764e05879f97876002b94d9b52b47a1ac8d445e1b5a416791d030e32a99b12c1509481f795f816337a0817e2d3b44baadefb503c1bddde4f96419ff6e7b60fc3f8ab7b0304c57b871c033c32adeae59e82b4d2e05a8759fe12a677a6d130f70f995cfca40ccad09c1d35ea4e915b0ec4570fd75e95ed619d5219974ecf61f61604389c454f4ef3ba05c31f162037f49e41733754d3eabe07333cf95960a233d3ce61c64d841641b1c828fa748bf9dea6e65504469354870140f50881649c1333b0b082ad29560f8128f6229e346af92a7916514dc301d5c15155af88f027dc1d6a8adaf5d7b8181f63377dbebc6994324adfe10c29c117262c5f65b194e705e01936115005d8f5e3f68f0469ed9286120f906e8173be36df1853c092490754d484dcca57d1585a7cfd2befbd7f4fb1f881831b4157d39a1c018ba44ddd19739d2de3614ee61c048c7277640bda6d32f47939f326453789aee3ab3c5c26f5bb1f7dd62b1a8995a29bc045cc8a34def32c4a4a4c3eaa411a536adb4272efbe7edf91e22c2afb531340fc4174b203310a</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">请输入密码</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    
    <categories>
      
      <category>数据中台</category>
      
    </categories>
    
    
    <tags>
      
      <tag>数据中台</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>解决hexo博客标签页配置问题</title>
    <link href="/posts/2022/05/1f7c6f4a.html"/>
    <url>/posts/2022/05/1f7c6f4a.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><p>本文介绍hexo博客搭建标签页, 并且找了网上各种解决标签页部署404问题，最后终于找到有效的解决解决方案</p><h3 id="新建页面"><a href="#新建页面" class="headerlink" title="新建页面"></a>新建页面</h3><p>利用hexo新建一个页面。输入以下命令。</p><p><code>hexo new page tags</code></p><h3 id="修改页面头部"><a href="#修改页面头部" class="headerlink" title="修改页面头部"></a>修改页面头部</h3><p>在根目录下的<code>source</code> 文件夹中找到 <code>tags</code> 文件夹，并打开里面的index.md文件。</p><p>在根目录下的<code>source</code> 文件夹中找到 <code>tags</code> 文件夹，并打开里面的index.md文件。<br>在头部里面添加以下代码：</p><p><code>layout: tags  //此databases可以任取，但为方便管理，推荐这样取名。并且需要记住此名称，因为后面还需要用到。</code></p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">title</span>: tags<br><span class="hljs-attribute">date</span>: <span class="hljs-number">2022</span>-<span class="hljs-number">05</span>-<span class="hljs-number">24</span> <span class="hljs-number">00</span>:<span class="hljs-number">55</span>:<span class="hljs-number">21</span><br><span class="hljs-attribute">type</span>: tags<br><span class="hljs-attribute">layout</span>: tags<br></code></pre></td></tr></table></figure><h3 id="主题配置文件"><a href="#主题配置文件" class="headerlink" title="主题配置文件"></a>主题配置文件</h3><p>在配置文件里面，根目录的配置文件。找到类似的代码的地方。如：友链页、自定义页、关于页、标签页、分类页、归档页等写配置的地方。不一定和这个一模一样的，找到类似的代码的地方即可</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs nix"><span class="hljs-params">menu:</span><br>    <span class="hljs-operator">-</span> &#123; <span class="hljs-params">key:</span> <span class="hljs-string">&quot;home&quot;</span>, <span class="hljs-params">link:</span> <span class="hljs-string">&quot;/&quot;</span>, <span class="hljs-params">icon:</span> <span class="hljs-string">&quot;iconfont icon-home-fill&quot;</span> &#125;<br>    <span class="hljs-operator">-</span> &#123; <span class="hljs-params">key:</span> <span class="hljs-string">&quot;archive&quot;</span>, <span class="hljs-params">link:</span> <span class="hljs-string">&quot;/archives/&quot;</span>, <span class="hljs-params">icon:</span> <span class="hljs-string">&quot;iconfont icon-archive-fill&quot;</span> &#125;<br>    <span class="hljs-operator">-</span> &#123; <span class="hljs-params">key:</span> <span class="hljs-string">&quot;category&quot;</span>, <span class="hljs-params">link:</span> <span class="hljs-string">&quot;/categories/&quot;</span>, <span class="hljs-params">icon:</span> <span class="hljs-string">&quot;iconfont icon-category-fill&quot;</span> &#125;<br>    <span class="hljs-operator">-</span> &#123; <span class="hljs-params">key:</span> <span class="hljs-string">&quot;tag&quot;</span>, <span class="hljs-params">link:</span> <span class="hljs-string">&quot;/tags/&quot;</span>, <span class="hljs-params">icon:</span> <span class="hljs-string">&quot;iconfont icon-tags-fill&quot;</span> &#125;<br>    <span class="hljs-operator">-</span> &#123; <span class="hljs-params">key:</span> <span class="hljs-string">&quot;about&quot;</span>, <span class="hljs-params">link:</span> <span class="hljs-string">&quot;/about/&quot;</span>, <span class="hljs-params">icon:</span> <span class="hljs-string">&quot;iconfont icon-user-fill&quot;</span> &#125;<br>    <span class="hljs-comment">#- &#123; key: &quot;links&quot;, link: &quot;/links/&quot;, icon: &quot;iconfont icon-link-fill&quot; &#125;</span><br></code></pre></td></tr></table></figure><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs nix"><br><span class="hljs-comment">#---------------------------</span><br><span class="hljs-comment"># 标签页</span><br><span class="hljs-comment"># Tag Page</span><br><span class="hljs-comment">#---------------------------</span><br><span class="hljs-params">tag:</span><br>  <span class="hljs-params">enable:</span> <span class="hljs-literal">true</span><br>  <span class="hljs-params">banner_img:</span> <span class="hljs-symbol">/img/default.png</span><br>  <span class="hljs-params">banner_img_height:</span> <span class="hljs-number">80</span><br>  <span class="hljs-params">banner_mask_alpha:</span> <span class="hljs-number">0.3</span><br>  <span class="hljs-params">tagcloud:</span><br>    <span class="hljs-params">min_font:</span> <span class="hljs-number">15</span><br>    <span class="hljs-params">max_font:</span> <span class="hljs-number">30</span><br>    <span class="hljs-params">unit:</span> px<br>    <span class="hljs-params">start_color:</span> <span class="hljs-string">&quot;#BBBBEE&quot;</span><br>    <span class="hljs-params">end_color:</span> <span class="hljs-string">&quot;#337ab7&quot;</span><br></code></pre></td></tr></table></figure><h3 id="确定ejs文件"><a href="#确定ejs文件" class="headerlink" title="确定ejs文件"></a>确定ejs文件</h3><p>这也是最重要的一步。添加文件。在主题目录（themes文件夹）下，打开自己的主题文件夹，找到 layout 文件夹，如果有tags.ejs即可，没有则，需要复制about.ejs 文件（根据自行的配置，找对应的文件）一份，并将其命名为 tags.ejs （名称即在第四步中的那个名称）。</p><p>然后修改，其实就只是修改了第三行的代码，其他的都没有改变。将第三行代码原来的 about 改为了 tags 而已。这个名称就是第四步里面的名称。</p><h3 id="文章加入标签"><a href="#文章加入标签" class="headerlink" title="文章加入标签"></a>文章加入标签</h3><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs subunit">title: 解决hexo博客标签页配置问题<br>date: 2022<span class="hljs-string">-05</span><span class="hljs-string">-24</span> 07:52:43<br><span class="hljs-keyword">tags:</span> hexo<br></code></pre></td></tr></table></figure><hr><p>以上为建立标签页的步骤，至此正常来说标签页就已经搭建完成可以正常使用。</p><p>但我的博客Fluid主题就是报页面不存在，不过应该跟主题没关系。</p><p>尝试过各种方案并且删除tags文件夹再重建后，依然不行。以下是亲测有效的解决方案</p><h2 id="解决标签页访问404问题"><a href="#解决标签页访问404问题" class="headerlink" title="解决标签页访问404问题"></a>解决标签页访问404问题</h2><h4 id="探索过程"><a href="#探索过程" class="headerlink" title="探索过程"></a>探索过程</h4><p>hexo s上去可以正常显示标签页，但是hexo g和hexo d部署上去就不能正常显示。</p><p>至此开始搜索hexo本地预览跟部署服务器不一致怎么解决。</p><p>搜索到可以查看提交到GitHub的repository，结果发现提交的是Tags文件夹，博客的url访问尝试改成Tags则可以正常访问。而我创建的tags文件夹。于是考虑提交git时候是不是自动转成大写了。</p><p>结果检索发现Git配置默认忽略了大小写</p><p>检查hexo生成的<code>.deploy_git</code>文件夹内的文件名确实是大写的，而使用<code>hexo d</code>提交到github上之后的目录还是小写，这是因为git默认是忽略大小写的！.deploy_git是隐藏文件夹。mac本 command + shit + ，即可展示隐藏文件夹。</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgdeposit_git.png"></p><h4 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h4><ol><li>删除<code>.deploy_git</code>目录</li><li>再次运行<code>hexo d</code>提交，hexo会重置git仓库，并重新生成所有文件!</li><li>打开github查看，问题解决！</li></ol><p>可以使用下面语句设置git大小写敏感，防止下次出现这样的问题：</p><p><code>git config core.ignorecase false</code></p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgignorecase.png"></p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>博客</category>
      
    </categories>
    
    
    <tags>
      
      <tag>hexo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Doris数据模型</title>
    <link href="/posts/2022/05/83e15f84.html"/>
    <url>/posts/2022/05/83e15f84.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><p>本文介绍Doris的三种模型及其使用场景</p><p>Doris 的数据模型主要分为3类:</p><table><thead><tr><th>模型</th><th align="left">关键字</th><th>特点</th></tr></thead><tbody><tr><td>明细模型</td><td align="left">DUPLICATE KEY</td><td>默认模型</td></tr><tr><td>聚合模型</td><td align="left">AGGREGATE KEY</td><td>按照AGGREGATE KEY指定的字段进行聚合</td></tr><tr><td>更新模型</td><td align="left">UNIQUE KEY</td><td>按照UNIQUE KEY指定的字段为唯一键，如果重复则覆盖</td></tr></tbody></table><hr><h2 id="Duplicate-明细模型"><a href="#Duplicate-明细模型" class="headerlink" title="Duplicate 明细模型"></a>Duplicate 明细模型</h2><h3 id="适用场景"><a href="#适用场景" class="headerlink" title="适用场景"></a>适用场景</h3><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs scss"><span class="hljs-number">1</span>.需要保留原始的数据(例如，原始的日志，操作记录等)<br><span class="hljs-number">2</span>.分析方式不固定，因为查询方式很灵活，所以传统的预聚合方式难以命中<br><span class="hljs-number">3</span>.数据更新不频繁，产生后就不太会发生变化<br><span class="hljs-number">4</span>.唯一健需要很多个字段组合在一起<br></code></pre></td></tr></table></figure><h3 id="模型原理"><a href="#模型原理" class="headerlink" title="模型原理"></a>模型原理</h3><p>Doris根据明细模型制定的key维护排序列，表中的数据会按照排序列进行排序存储</p><p>在查询中，如果有相关排序列的过滤条件时，Doris能够快速地过滤数据，降低整个查询的时间。 DUPLICATE KEY更贴切的名称应该为 “Sorted Column</p><h3 id="使用案例"><a href="#使用案例" class="headerlink" title="使用案例"></a>使用案例</h3><p>创建表的默认数据模型就是明细模型，当导入Doris明细模型表中完全相同的两行数据时，Doris会认为是两行数据。</p><p>在使用过程中，将关联或者过滤字段放在DUPLICATE KEY里，这里注意DUPLICATE KEY必须按照顺序依次排在建表语句前面，否则会报错。</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">IF</span> <span class="hljs-keyword">EXISTS</span> demo_esc_commerce_config;<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> demo_esc_commerce_config (<br>id <span class="hljs-type">varchar</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;主键id&#x27;</span>,<br>commerce_model tinyint(<span class="hljs-number">4</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;贸易模式&#x27;</span>,<br>country_code <span class="hljs-type">varchar</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;所在地区&#x27;</span>,<br>entity_id <span class="hljs-type">varchar</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;关联贸易主体id&#x27;</span>,<br>currency_code <span class="hljs-type">varchar</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;结算币种&#x27;</span>,<br>status tinyint(<span class="hljs-number">4</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;状态&#x27;</span>,<br><span class="hljs-keyword">INDEX</span> idx_country_code (country_code)<br>)<br>DUPLICATE KEY (id,commerce_model,country_code)<br><span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;贸易配置表&#x27;</span><br>DISTRIBUTED <span class="hljs-keyword">BY</span> HASH(id,commerce_model) BUCKETS <span class="hljs-number">1</span><br>PROPERTIES<br>(<br>  &quot;replication_num&quot; = &quot;3&quot;<br>);<br></code></pre></td></tr></table></figure><hr><h2 id="聚合模型"><a href="#聚合模型" class="headerlink" title="聚合模型"></a>聚合模型</h2><h3 id="适用场景-1"><a href="#适用场景-1" class="headerlink" title="适用场景"></a>适用场景</h3><p>在数据分析领域中，有很多场景需要对数据进行统计和汇总</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs arcade"><span class="hljs-number">1.</span>业务看指标基本都是汇总数据，例如<span class="hljs-built_in">sum</span>，<span class="hljs-built_in">count</span>等类型查询<br><span class="hljs-number">2.</span>不需要查询明细数据<br><span class="hljs-number">3.</span>原始数据不会被频繁更新，只会追加新数据<br></code></pre></td></tr></table></figure><h3 id="模型原理-1"><a href="#模型原理-1" class="headerlink" title="模型原理"></a>模型原理</h3><p>Doris会将指标按照相同的维度进行聚合。当多条数据具有相同的维度时，Doris会把指标根据sum，max，min等类型进行聚合。这个是建表时候指定的。</p><p>从而能够减少查询时所需要的处理的数据量，提升查询的效率。</p><p>数据举例：</p><table><thead><tr><th>date</th><th>country</th><th>Pv</th></tr></thead><tbody><tr><td>2022-05-23</td><td>CHN</td><td>1</td></tr><tr><td>2022-05-23</td><td>CHN</td><td>2</td></tr><tr><td>2022-05-23</td><td>USA</td><td>3</td></tr></tbody></table><p>在Doris的聚合模型的表中，存储内容会从三条数据变两条数据</p><table><thead><tr><th>date</th><th>country</th><th>Pv</th></tr></thead><tbody><tr><td>2022-05-23</td><td>CHN</td><td>3</td></tr><tr><td>2022-05-23</td><td>USA</td><td>3</td></tr></tbody></table><h3 id="使用案例-1"><a href="#使用案例-1" class="headerlink" title="使用案例"></a>使用案例</h3><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">IF</span> <span class="hljs-keyword">EXISTS</span> demo_aggregate;<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> demo_esc_commerce_config (<br><span class="hljs-type">date</span> <span class="hljs-type">date</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;日期&#x27;</span>,<br>country <span class="hljs-type">varchar</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;国家&#x27;</span>,<br>pv bitint sum <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;page views&#x27;</span>,<br><span class="hljs-keyword">INDEX</span> idx_country_code (country_code)<br>)<br><span class="hljs-keyword">AGGREGATE</span> KEY (<span class="hljs-type">date</span>,country)<br>DISTRIBUTED <span class="hljs-keyword">BY</span> HASH(country) BUCKETS <span class="hljs-number">1</span><br>PROPERTIES<br>(<br>  &quot;replication_num&quot; = &quot;3&quot;<br>);<br></code></pre></td></tr></table></figure><p>聚合模型目前支持的聚合函数有SUM，MIN，MAX，REPLACE</p><h4 id="Tips"><a href="#Tips" class="headerlink" title="Tips:"></a>Tips:</h4><p>在 Doris 的聚合模型中，count(*) 这种查询的开销<strong>非常大</strong>。</p><p>在 count(<em>) 查询中，Doris 必须扫描所有的 AGGREGATE KEY 列（这里就是</em> <em>user_id</em> <em>和</em> <em>date</em>），并且聚合后，才能得到语意正确的结果。当聚合列非常多时，count(*) 查询需要扫描大量的数据。</p><p>因此，当业务上有频繁的 count(*) 查询时，我们建议用户通过增加一个**值恒为 1 的，聚合类型为 SUM 的列来模拟 count(*)**。如刚才的例子中的表结构，我们修改如下：</p><p>增加一个 count 列，并且导入数据中，该列值<strong>恒为 1</strong>。则 select count(<em>) from table; 的结果等价于 select sum(count) from table;。而后者的查询效率将远高于前者。不过这种方式也有使用限制，就是用户需要自行保证，不会重复导入 AGGREGATE KEY 列都相同的行。否则，select sum(count) from table; 只能表述原始导入的行数，而不是 select count(</em>) from table; 的语义。</p><p>另一种方式，就是 <strong>将如上的</strong> <strong>count</strong> <strong>列的聚合类型改为 REPLACE，且依然值恒为 1</strong>。那么 select sum(count) from table; 和 select count(*) from table; 的结果将是一致的。并且这种方式，没有导入重复行的限制。</p><hr><h2 id="更新模型"><a href="#更新模型" class="headerlink" title="更新模型"></a>更新模型</h2><h3 id="适用场景-2"><a href="#适用场景-2" class="headerlink" title="适用场景"></a>适用场景</h3><p>在有些分析场景中，分析的数据经常会发生变化。对于这些分析场景的需求，可以使用Doris的更新模型UNIQUE KEY来实现。</p><p>以下是一些适用更新模型的场景：</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs">1.已经写入的数据有大量的更新需求<br>2.需要进行实时数据分析<br>3.需要保证端到端的一致性（即保证不会重复插入）<br></code></pre></td></tr></table></figure><h3 id="模型原理-2"><a href="#模型原理-2" class="headerlink" title="模型原理"></a>模型原理</h3><p>Doris存储内部会给每一个批次导入数据分配一个版本号，在查询的时候对于主键相同的两条数据，会根据版本的大小进行返回，版本大的被返回，版本小的不会被返回。</p><table><thead><tr><th>ID</th><th>value</th><th>_version</th></tr></thead><tbody><tr><td>1</td><td>100</td><td>1</td></tr><tr><td>1</td><td>101</td><td>2</td></tr><tr><td>2</td><td>100</td><td>3</td></tr><tr><td>2</td><td>103</td><td>4</td></tr></tbody></table><p>那么用户能够看到的数据如下：</p><table><thead><tr><th>ID</th><th>value</th></tr></thead><tbody><tr><td>1</td><td>100</td></tr><tr><td>2</td><td>102</td></tr></tbody></table><p>通过这种机制，Doris可以支持对于频繁更新数据的分析</p><h3 id="使用案例-2"><a href="#使用案例-2" class="headerlink" title="使用案例"></a>使用案例</h3><p>例如订单分析场景中，经常会有根据订单状态进行的统计分析需求。</p><p>因为订单状态经常改表，而create_time和order_id不会改变，并且经常会在查询中作为过滤条件。所以可以将create_time和order_id两个列作为这个表的主键（UNIQUE KEY定义）</p><p>以下是建表例子：</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">IF</span> <span class="hljs-keyword">EXISTS</span> ods.ods_esc_usr_company_business_country;<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> ods.ods_esc_usr_company_business_country (<br>  id <span class="hljs-type">varchar</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;id&#x27;</span>,<br>  company_id <span class="hljs-type">varchar</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;公司id&#x27;</span>,<br>  country_code <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;国家编码&#x27;</span>,<br>  country_name <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;国家名称&#x27;</span>,<br>  creator <span class="hljs-type">varchar</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;创建人&#x27;</span>,<br>  modifier <span class="hljs-type">varchar</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;修改人&#x27;</span>,<br>  create_time datetime  <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;创建时间&#x27;</span>,<br>  update_time datetime  <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>  <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;更新时间&#x27;</span><br>)<br><span class="hljs-keyword">UNIQUE</span> KEY (id,company_id)<br><span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;已开通代销资质国家&#x27;</span><br>DISTRIBUTED <span class="hljs-keyword">BY</span> HASH(id,company_id) BUCKETS <span class="hljs-number">1</span><br>PROPERTIES<br>(<br>&quot;replication_num&quot; = &quot;3&quot;<br>);<br><br></code></pre></td></tr></table></figure><h4 id="Tips-1"><a href="#Tips-1" class="headerlink" title="Tips:"></a>Tips:</h4><p>如果业务对实时性的要求是分钟级别，那么每分钟导入一次更新数据即可，不需要秒级的导入。</p><h3 id="数据模型的选择建议"><a href="#数据模型的选择建议" class="headerlink" title="数据模型的选择建议"></a>数据模型的选择建议</h3><p>因为数据模型在建表时就已经确定，且<strong>无法修改</strong>。所以，选择一个合适的数据模型<strong>非常重要</strong>。</p><ol><li><p>Aggregate 模型可以通过预聚合，极大地降低聚合查询时所需扫描的数据量和查询的计算量，非常适合有固定模式的报表类查询场景。但是该模型对 count(*) 查询很不友好，同时因为固定了 Value 列上的聚合方式，在进行其他类型的聚合查询时，需要考虑语意正确性。</p></li><li><p>Unique 模型针对需要唯一主键约束的场景，可以保证主键唯一性约束。但是<strong>无法利用 ROLLUP 等预聚合带来的查询优势</strong>（因为本质是 REPLACE，没有 SUM 这种聚合方式）。</p></li><li><p>Duplicate 适合任意维度的 Ad-hoc 查询。虽然同样无法利用预聚合的特性，但是不受聚合模型的约束，可以发挥列存模型的优势（只读取相关列，而不需要读取所有 Key 列）。</p></li></ol></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>Doris</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Doris</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>hexo博客使用手册</title>
    <link href="/posts/2022/05/4a5fd96.html"/>
    <url>/posts/2022/05/4a5fd96.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><p>本文介绍利用hexo写博客的常用命令和功能</p><p>包括创建博客，预览文章，部署博客，文章加密，更换主题，免费图床</p><h3 id="新建文章"><a href="#新建文章" class="headerlink" title="新建文章"></a>新建文章</h3><h4 id="文章"><a href="#文章" class="headerlink" title="文章"></a>文章</h4><p>在博客目录下输入以下命令时，会默认使用post布局，然后自动在<code>source\_posts</code>目录生成一个文章名.md文件：</p><p><code>hexo n 文章名 # 例如 hexo n hexo博客使用手册</code></p><p>另外如果在_config.yml配置文件中将有设置文章的目录post_asset_folder: true</p><p>则上述命令还会创建同名文件夹</p><p>当然你还可以指定布局：</p><p><code>$ hexo n [layout_name] draft1</code></p><p>该命令创建了一个使用特定布局的名为draft1的文章。</p><p>打开之前创建的text1.md文件，我们可以看到文章开头包含以下内容：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-meta">---</span><br><span class="hljs-attr">title:</span> <span class="hljs-string">text1</span><br><span class="hljs-attr">date:</span> <span class="hljs-number">2022-05-23 13:29:36</span><br><span class="hljs-attr">tags:</span> <span class="hljs-string">hexo</span><br><span class="hljs-attr">categories:</span> <span class="hljs-string">blog</span><br><span class="hljs-meta">---</span><br></code></pre></td></tr></table></figure><p>你显示的内容可能未必与我一样，不必担心, 这是可以自定义的。只需要知道，上面的内容在hexo被称作<strong>Front-matter，实际上就是该文章的一些变量，用于实现一些特定的功能</strong>。比如使<code>author: yuting</code>，那么渲染后的文章中将显示文章作者为<code>yuting</code>。</p><p>如何自定义布局呢？实际上，布局是一个markdown文件，它们保存在<code>scaffolds/</code>目录下，可以看到hexo自带的三种布局其实就是三个<code>.md</code>文件：</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgscaffolds.png"></p><p>而每一个文件中的内容实际只包含一个Front-matter。</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgscanfolds_post.png"></p><p>因此，你可以在这里修改布局或者建立新的布局，然后创建文章时使用这些布局。</p><h4 id="草稿"><a href="#草稿" class="headerlink" title="草稿"></a>草稿</h4><p>使用<code>hexo n draft draft1</code>命令将在<code>source\</code>目录下创建<code>_drafts</code>目录，并生成一个<code>draft1.md</code>文件。</p><p>当你编辑完草稿后，可以把文章推送到<code>_posts</code>目录下，通过下面的命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">hexo publish &lt;file_name&gt;<br></code></pre></td></tr></table></figure><p>可以使用<code>hexo --draft</code>命令可以查看已有草稿。</p><h4 id="编辑文章"><a href="#编辑文章" class="headerlink" title="编辑文章"></a>编辑文章</h4><p>以下将介绍一些markdown语法。由于markdown在不同平台的实现略有不用，因此下面的内容只会介绍hexo默认支持的语法。此外，由于主题不同，不同机器显示效果也有会一定差异。</p><p>以下是本人操作的环境：</p><p>编辑器：typora（可以自行去下载）</p><p>hexo主题：Fluid</p><p>操作系统：mac</p><h5 id="插入图片"><a href="#插入图片" class="headerlink" title="插入图片"></a>插入图片</h5><p><code>![]() 小括号（）里添加图片链接 []添加图片名称，也可以不写</code></p><h5 id="标题"><a href="#标题" class="headerlink" title="标题"></a>标题</h5><p><code>##### 标题 #一个表示一级标题，注意文字和#之间有空格</code></p><h5 id="加粗"><a href="#加粗" class="headerlink" title="加粗"></a>加粗</h5><p><code>**加粗** </code></p><h5 id="代码块"><a href="#代码块" class="headerlink" title="代码块"></a>代码块</h5><p><code>``` ```</code></p><h5 id="插入视频"><a href="#插入视频" class="headerlink" title="插入视频"></a>插入视频</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">video</span> <span class="hljs-attr">width</span>=<span class="hljs-string">&quot;480&quot;</span> <span class="hljs-attr">height</span>=<span class="hljs-string">&quot;320&quot;</span> <span class="hljs-attr">controls</span>&gt;</span><br> <span class="hljs-tag">&lt;<span class="hljs-name">source</span> <span class="hljs-attr">src</span>=<span class="hljs-string">video_path</span>&gt;</span><br> <span class="hljs-tag">&lt;/<span class="hljs-name">video</span>&gt;</span><br></code></pre></td></tr></table></figure><h5 id="引用区块"><a href="#引用区块" class="headerlink" title="引用区块"></a>引用区块</h5><figure class="highlight node-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs node-repl"><span class="hljs-meta prompt_">&gt;</span> <span class="language-javascript">这也是引用</span><br><span class="hljs-meta prompt_">&gt;</span><br><span class="hljs-meta prompt_">&gt;</span> <span class="language-javascript">引用<span class="hljs-number">1</span></span><br><span class="hljs-meta prompt_">&gt;</span><br><span class="hljs-meta prompt_">&gt;</span> <span class="language-javascript">饮用<span class="hljs-number">2</span></span><br></code></pre></td></tr></table></figure><h3 id="预览文章"><a href="#预览文章" class="headerlink" title="预览文章"></a>预览文章</h3><p>编写好markdown文章后接下来就需要渲染、生成静态文件，启动本地端口查看效果了。</p><p>启动本地端口命令：<code>hexo server</code>或 <code>hexo s</code></p><p>生成静态文件之后，便要启动本地端口。然后localhost:4000</p><p>删除静态文件命令：<code>hexo clean</code></p><p>生成静态文件命令：<code>hexo generate</code>或 <code>hexo g</code></p><p>部署静态文件命令：<code>hexo d</code></p><h3 id="文章加密"><a href="#文章加密" class="headerlink" title="文章加密"></a>文章加密</h3><p><strong>安装hexo-blog-encrypt插件</strong></p><p><code>在hexo目录下 npm install hexo-blog-encrypt</code></p><p>在<code>/Hexo/_config.yml</code>文件中添加内容:</p><p>encrypt: </p><p>​     enable:true</p><p><strong>使用插件</strong></p><p>在想要使用加密功能的Blog头部加上对应文字</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-meta">---    </span><br><span class="hljs-attr">password:</span> <span class="hljs-string">smile</span>   <br><span class="hljs-attr">abstract:</span> <span class="hljs-string">Welcome</span> <span class="hljs-string">to</span> <span class="hljs-string">my</span> <span class="hljs-string">blog,</span> <span class="hljs-string">enter</span> <span class="hljs-string">password</span> <span class="hljs-string">to</span> <span class="hljs-string">read.</span> <br><span class="hljs-attr">message:</span> <span class="hljs-string">密码输入框上描述性内容</span><br><span class="hljs-meta">---</span><br></code></pre></td></tr></table></figure><ul><li>password: 该Blog使用的密码</li><li>abstract: Blog摘要文字（少量）</li><li>message: 密码框上的描述性文字</li></ul><h3 id="更换主题"><a href="#更换主题" class="headerlink" title="更换主题"></a>更换主题</h3><p>以fluid主题举例子</p><p>1.在GitHub上克隆你喜欢的hexo主题到本地博客的根目录的theme文件夹下</p><p>  获取最新版本</p><p>  方式1⃣️：</p><p>  Hexo 5.0.0 版本以上，推荐通过 npm 直接安装，进入博客目录执行命令：</p><p><code>npm install --save hexo-theme-fluid</code></p><p>然后在博客目录下创建 <code>_config.fluid.yml</code>，将主题_config.yml内容复制过去</p><p>当同时存在 <code>_config.fluid.yml</code>和<code>_config.yml</code>时，_config.yml配置无效</p><p>  方式2⃣️：（我博客目前是这种方法）</p><p> 下载 <a href="https://https//github.com/fluid-dev/hexo-theme-fluid/releases">最新 release 版本</a>解压到 themes 目录，并将解压出的文件夹重命名为 <code>fluid</code></p><p>2.指定主题</p><p>如下修改 Hexo 博客目录中的 <code>_config.yml</code>：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">theme:</span> <span class="hljs-string">fluid</span>  <span class="hljs-comment"># 指定主题</span><br><br><span class="hljs-attr">language:</span> <span class="hljs-string">zh-CN</span>  <span class="hljs-comment"># 指定语言，会影响主题显示的语言，按需修改</span><br></code></pre></td></tr></table></figure><p>参考fluid主题操作手册 <a href="https://hexo.fluid-dev.com/">https://hexo.fluid-dev.com/</a></p><p>Fluid 是基于 Hexo 的一款 Material Design 风格的主题，由</p><p> <a href="https://github.com/fluid-dev">Fluid-dev</a>负责开发与维护。</p><p>主题 GitHub: <a href="https://github.com/fluid-dev/hexo-theme-fluid"></a></p><p>预览网站：<a href="https://hexo.fluid-dev.com/">Fluid’s blog</a>,   <a href="https://zkqiang.cn/">zkqiang’s blog</a></p><h3 id="免费图床"><a href="#免费图床" class="headerlink" title="免费图床"></a>免费图床</h3><p>在尝试通过 Coding 持续集成自动将 GitHub 仓库实时同步到 Coding 仓库 失败后，果断采用 PicGo + GitHub 搭建个人图床工具，并且成功了。呜呜呜</p><p>Coding 持续集成我一直构建失败</p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgCoding_%E6%9E%84%E5%BB%BA%E5%A4%B1%E8%B4%A5.png"></p><p>Coding构建可以参考：<a href="https://hexo.fluid-dev.com/posts/coding-imagehost/">Coding构建</a>   ,我就不做介绍了，我都没构建成功😩</p><h5 id="PicGo-GitHub-搭建个人图床工具"><a href="#PicGo-GitHub-搭建个人图床工具" class="headerlink" title="PicGo + GitHub 搭建个人图床工具"></a>PicGo + GitHub 搭建个人图床工具</h5><p><strong>1.Github仓库设置</strong></p><p>流程：新建 public 仓库 -&gt; 创建 token -&gt; 复制 token 备用</p><p>​    <strong>新建 public 仓库 ：</strong></p><p>​    点击 git 主页右上角的 <code>+</code> 创建 <code>New repository</code>；</p><p>​    填写仓库信息，例如我就创建了一个 <code>PicGo</code> 的仓库。这里注意，仓库得设置为 <code>Public</code> 因为后面通过客户端访问算是外部访问，因此无法访问 <code>Private</code> ，这样的话图片传上来之后只能存储不能显示。所以要设置为 <code>Public</code>。</p><p>​    <strong>创建 token并复制保存</strong></p><p>此时仓库已经建立，点击右上角头像，然后进入设置；</p><p>在页面最下找到 <code>Developer settings</code>，点击进入；</p><p><code>Personal access tokens</code> 创建 <code>token</code>；</p><p>填 description（也是随心填），勾选复选框 repo ，接着到页面底部 <code>Generate token</code> 就完成了；</p><p>然后复制生成一串字符 token，这个 token 只出现一次，所以要保存一下（我一般记在微信收藏）。</p><p><strong>2.PicGo 客户端配置</strong></p><p><strong>下载&amp;安装</strong>  <a href="https://github.com/Molunerfinn/PicGo">PicGo</a></p><p><strong>配置</strong></p><p>仓库名      即你的仓库名<br>分支名      默认 master<br>Token      就是刚刚复制的那一串字符<br>存储路径 这个可以填也可以不填，填了的话图片就上传到 git 中 data 这个文件夹<br>域名         <code>https://raw.githubusercontent.com/yefcion/cloudimg/master</code></p><p>域名要改一下 格式 <code>https://raw.githubusercontent.com/[username]/[仓库名]/master</code></p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgPicGo_setting.png"></p><p>然后点确定就可以了。</p><p>然后关于上传的快捷键设置。默认的是 Mac 按键，推荐改成 <code>Ctrl + alt +c</code>。</p><p>综上，操作完成。</p><p>本方案唯一缺点，不能私人。但是考虑到 GitHub 上传的图在列表里没法预览，应该没人会闲着没事翻记录。。</p><p>​     </p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>博客</category>
      
    </categories>
    
    
    <tags>
      
      <tag>hexo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>hexo博客从win8迁移到mac</title>
    <link href="/posts/2022/05/54f54a8c.html"/>
    <url>/posts/2022/05/54f54a8c.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><p>本文介绍：如何从hexo博客从win8迁移到mac</p><p>最近换电脑，然后看到同组大佬的hexo博客已经写到130+，在大佬的刺激下准备把之前荒废的博客重新打理起来。</p><h3 id="环境准备"><a href="#环境准备" class="headerlink" title="环境准备"></a>环境准备</h3><p><strong>1.安装brew</strong></p><p><code>/bin/zsh -c &quot;$(curl -fsSL https://gitee.com/cunkai/HomebrewCN/raw/master/Homebrew.sh)&quot;</code></p><p>请输入序号：输入1即可</p><p>安装完成后关闭终端界面</p><p>查看是否安装完成</p><p><code>brew --version</code></p><p><img src="https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgbrew_version.png"></p><p><strong>2.安装git和node.js</strong></p><p><code>brew install git </code></p><p><code>brew install node</code></p><p><strong>3. 安装hexo</strong></p><p>建立博客的根目录</p><p><code>mkdir blog #这里目录名字自己任意取名</code> </p><p>在根目录下安装hexo</p><p><code>npm install -g hexo</code></p><p>安装完成后会生成blog&#x2F;node_modules文件夹和 blog&#x2F;package-lock.json、package.json文件（这两文件不存在的话会导致hexo s、hexo g、hexo d等hexo命令失效，当时我是误删了这两文件一度怀疑人生）</p><h3 id="部署博客"><a href="#部署博客" class="headerlink" title="部署博客"></a>部署博客</h3><p><strong>4.初始化hexo</strong></p><p>环境准备完毕之后初始化hexo</p><p><code>cd blog </code></p><p><code>hexo init</code></p><p><code>hexo s #部署到本地localhost预览 </code></p><p>访问localhost:4000查看是否成功初始化</p><p><strong>5. 生成ssh密钥</strong></p><p><code>ssh-keygen -t rsa -C &quot;youremail@example.com&quot; #github注册邮箱</code></p><p>运行后进入.ssh文件夹:</p><p><code>cd ～/.ssh</code></p><p>查看id_rsa.pub文件，复制里面的所有内容</p><p><code>cat id_rsa.pub</code></p><p>网页打开github设置：<strong>setting -》 ssh and gpg keys</strong>，添加新的ssh key，把刚才复制的内容粘贴进去。</p><p>保存后，邮箱会收到一封验证邮件，记得通过验证。</p><h3 id="文件迁移"><a href="#文件迁移" class="headerlink" title="文件迁移"></a>文件迁移</h3><p><strong>6.文件配置转移</strong></p><p>将win8里博客根目录下的：</p><p>_config.yml,</p><p>scaffolds,</p><p>source,</p><p>themes</p><p>复制并覆盖到mac博客根目录下。</p><p><strong>🌟关于如何windows如何传输文件到mac</strong></p><p>同一网络下。</p><p>windows：文件夹属性 -&gt; 共享 -&gt; 共享（得到网路路径）</p><p>mac：访达 -&gt; 连接服务器 -&gt; 输入smb:&#x2F;&#x2F;网络路径</p><p><strong>7.测试博客是否成功迁移</strong></p><ul><li>使用hexo s、hexo g、hexo d测试，无报错即成功。</li></ul><p><strong>问题1: 当输入hexo g时可能会出现</strong></p><p><code>Enter passphrase for key ‘/Users/mac/.ssh/id_rsa </code></p><ul><li><p>这里就是要输入密码，每次输入密码比较麻烦</p></li><li><p>在终端输入<code>ssh-add ~/.ssh/id_rsa</code> 然后输入本机密码之后</p></li></ul><p>​        会出现<code>Identity added: /Users/tingyu/.ssh/id_rsa (这里会显示github注册邮箱)</code>，之后hexo部署都不需要输入密码了</p><p><strong>问题2: spawn failed</strong></p><p>多系统混合编写导致的问题</p><p><code>cd进.deploy_git文件夹，输入git config –global core.autocrlf false</code></p><p>参考链接：<a href="https://blog.csdn.net/soyawww/article/details/118147820">https://blog.csdn.net/soyawww/article/details/118147820</a></p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>博客</category>
      
    </categories>
    
    
    <tags>
      
      <tag>hexo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>python-应用-实现2048</title>
    <link href="/posts/2019/12/db1df04d.html"/>
    <url>/posts/2019/12/db1df04d.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><hr><p>本篇文章是利用python 实现2048小游戏<br>目的：为了提高自己的编程思路</p><p>环境：win8+python3.6+curses模块 Pycharm<br>适用人群：python入门+想用python做点事情的朋友们</p><p>大家可能都玩过2048，我记得那时候还蛮火的。不过那个时候我还没有接触编程，根本想不到自己今天还会写代码。。</p><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><p><strong>游戏规则</strong>：玩家通过 w s a d 控制数字移动方向，达成 2048 这个数字即获胜。</p><p>每次可以选择一个方向移动，数字便会朝这个方向移动，如果遇到相同数字就相加，遇到不同数字或者边界就停止移动。同时会在空白的地方生成 2 或者 4 的随机数字。通过不断相撞、相加，最后达成 2048 这个数字。</p><p><strong>编程思路：</strong></p><p><strong>1.首先想象一下游戏的几个状态：</strong></p><p>状态1：初始化状态(也就是刚开始游戏）<br>状态2：游戏中(Game ing……)<br>状态3：你赢了(Win)<br>状态4：你输了(Game Over)</p><p><strong>2.用户行为</strong></p><p>用户通过行为(action)改变来完成一个游戏状态到另一个游戏状态的该表，比如用户上移，下移，左移，右移，重置和退出。</p><p><strong>3.由一个状态转化到另一个状态</strong></p><p>分析一下从一个状态到下一个状态的所有可能性：<br>1.当上一个状态是初始化(Init)状态时，下一个状态肯定是游戏中(Game ing…)的状态。</p><p>2.当上一个状态为游戏中(Game ing…)的状态时，下一个状态要根据用户的输入来判断，如用户输入Restart,则下一个状态返回为初始化状态(Init)，如用户输入Exit的时候，下一个状态转换为退出游戏(Exit),</p><p>用户还可以上下左右移动，这时候下一个状态可能是你输了(Game Over)或者你赢了(Win)，再或者继续游戏。</p><p>3.当上一个状态为你输了(Game Over)，用户输入Restart，下一个状态可能为初始化(Init)状态，用户输入Exit的时候，下一个状态转换为退出游戏(Exit)。</p><p>4.当上一个状态为你赢了(Win)，用户输入Restart，下一个状态可能为初始化(Init)状态，用户输入Exit的时候，下一个状态转换为退出游戏(Exit)。</p><p>其中3和4神似，可以合并起来得到not_game的功能。</p><p>上述文字用图表示如下：</p><p>! [ 图片来自实验楼] ( <a href="http://m.qpic.cn/psc?/V10c1VbY1Y4Fvm/3pY6KhS62k*1Vm7UATlxq*dT9N4M9SFdcoa2exyDwTjMQRzdwgQxzI3eywPjhcCPWMtBAbo8u2e.zNSVqh5WGr9RvKTwx9YMevj37h84A.s!/b&amp;bo=ZgKCAQAAAAADF9U!&amp;rf=viewer_4&amp;t=5">http://m.qpic.cn/psc?/V10c1VbY1Y4Fvm/3pY6KhS62k*1Vm7UATlxq*dT9N4M9SFdcoa2exyDwTjMQRzdwgQxzI3eywPjhcCPWMtBAbo8u2e.zNSVqh5WGr9RvKTwx9YMevj37h84A.s!/b&amp;bo=ZgKCAQAAAAADF9U!&amp;rf=viewer_4&amp;t=5</a> )</p><p><strong>另外除非用户按代表退出的按键(Exit)或者游戏被玩死了,否则游戏一直被挂起。</strong></p><p>根据以上分析，下面可以初略的搭建程序大致的框架：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>(<span class="hljs-params">stdscr</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">init</span>():<br>        <span class="hljs-comment"># 重置游戏棋盘</span><br>        game_field.reset()<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;Game&#x27;</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">game</span>():<br>        <span class="hljs-comment"># 画出 GameOver 或者 Win 的界面</span><br>        game_field.draw(stdscr)<br>        <span class="hljs-comment"># 读取用户输入得到action，判断是重启游戏还是结束游戏</span><br>        action = get_user_action(stdscr)<br><br>        <span class="hljs-keyword">if</span> action ==<span class="hljs-string">&#x27;Restart&#x27;</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;Init&#x27;</span><br>        <span class="hljs-keyword">if</span> action==<span class="hljs-string">&#x27;Exit&#x27;</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;Exit&#x27;</span><br>        <span class="hljs-keyword">if</span> game_field.move(action):<br>            <span class="hljs-keyword">if</span> game_field.is_win():<br>                <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;Win&#x27;</span><br>            <span class="hljs-keyword">if</span> game_field.is_gameover():<br>                <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;Gameover&#x27;</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;Game&#x27;</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">not_game</span>(<span class="hljs-params">state</span>):<br>        <span class="hljs-comment"># 画出 GameOver 或者 Win 的界面</span><br>        game_field.draw(stdscr)<br>        <span class="hljs-comment"># 读取用户输入得到action，判断是重启游戏还是结束游戏</span><br>        action = get_user_action(stdscr)<br>        responses = defaultdict(<span class="hljs-keyword">lambda</span>:state)<br>        responses[<span class="hljs-string">&#x27;Restart&#x27;</span>], responses[<span class="hljs-string">&#x27;Exit&#x27;</span>] = <span class="hljs-string">&#x27;Init&#x27;</span>,<span class="hljs-string">&#x27;Exit&#x27;</span><br>        <span class="hljs-keyword">return</span> responses[action]<br><br><span class="hljs-comment"># 游戏盘的四种状态</span><br>    state_actions=&#123;<br>        <span class="hljs-string">&#x27;Init&#x27;</span>:init,<br>        <span class="hljs-string">&#x27;Win&#x27;</span>:<span class="hljs-keyword">lambda</span>:not_game(<span class="hljs-string">&#x27;Win&#x27;</span>),<br>        <span class="hljs-string">&#x27;Gameover&#x27;</span>:<span class="hljs-keyword">lambda</span>:not_game(<span class="hljs-string">&#x27;Gameover&#x27;</span>),<br>        <span class="hljs-string">&#x27;Game&#x27;</span>:game<br>    &#125;<br><br>    game_field = GameField(win=<span class="hljs-number">2048</span>)<br>    state = <span class="hljs-string">&#x27;Init&#x27;</span><br>    <span class="hljs-keyword">while</span> state!=<span class="hljs-string">&#x27;Exit&#x27;</span>:<br>        state = state_actions[state]()<br></code></pre></td></tr></table></figure><p>4.丰富框架<br>大体的骨架搭好了，下面让它完善起来。</p><p>分为两类：<br>第一类，把它叫做通用工具类。</p><p>这两个操作主要是用户在操作游戏之后对棋盘状态的变化以及修改，拥有这两个函数能够节省不少的代码量。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">transpose</span>(<span class="hljs-params">field</span>):<br>    <span class="hljs-keyword">return</span> [<span class="hljs-built_in">list</span>(row) <span class="hljs-keyword">for</span> row <span class="hljs-keyword">in</span> <span class="hljs-built_in">zip</span>(*field)]<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">invert</span>(<span class="hljs-params">field</span>):<br>    <span class="hljs-keyword">return</span> [row[::-<span class="hljs-number">1</span>] <span class="hljs-keyword">for</span> row <span class="hljs-keyword">in</span> field]<br></code></pre></td></tr></table></figure><p>如下为用户输入函数：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python">actions = [<span class="hljs-string">&#x27;Up&#x27;</span>, <span class="hljs-string">&#x27;Left&#x27;</span>, <span class="hljs-string">&#x27;Down&#x27;</span>, <span class="hljs-string">&#x27;Right&#x27;</span>, <span class="hljs-string">&#x27;Restart&#x27;</span>, <span class="hljs-string">&#x27;Exit&#x27;</span>]<br><span class="hljs-comment"># 分别用 W（上），A（左），S（下），D（右），R（重置），Q（退出），进行输入来操作游戏，这里考虑到大写锁定键锁定的情况：</span><br>letter_codes = [<span class="hljs-built_in">ord</span>(c) <span class="hljs-keyword">for</span> c <span class="hljs-keyword">in</span> <span class="hljs-string">&#x27;WASDRQwasdrq&#x27;</span>]<br>actions_dict = <span class="hljs-built_in">dict</span>(<span class="hljs-built_in">zip</span>(letter_codes, actions*<span class="hljs-number">2</span>))<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_user_action</span>(<span class="hljs-params">keyboard</span>):<br>    char = <span class="hljs-string">&#x27;N&#x27;</span><br>    <span class="hljs-comment">#阻塞＋循环，直到获得用户有效输入才返回对应行为：</span><br>    <span class="hljs-keyword">while</span> char <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> actions_dict:<br>        char = keyboard.getch()<br>    <span class="hljs-keyword">return</span> actions_dict[char]<br></code></pre></td></tr></table></figure><p>第二大类：棋盘类<br>包含重置棋盘、棋盘走一步、判断输赢、绘制游戏界面、随机生成一个 2 或者 4、判断能否移动的功能。</p><p>重置棋盘</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#重置棋盘</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">reset</span>(<span class="hljs-params">self</span>):<br>    <span class="hljs-keyword">if</span> <span class="hljs-variable language_">self</span>.score&gt;<span class="hljs-variable language_">self</span>.highscore:<br>        <span class="hljs-variable language_">self</span>.highscore = <span class="hljs-variable language_">self</span>.score<br>    <span class="hljs-variable language_">self</span>.score = <span class="hljs-number">0</span><br>    <span class="hljs-variable language_">self</span>.field = [[<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-variable language_">self</span>.width)] <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-variable language_">self</span>.height)]<br>    <span class="hljs-variable language_">self</span>.spawn()<br>    <span class="hljs-variable language_">self</span>.spawn()<br></code></pre></td></tr></table></figure><p>棋盘走一步</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">move</span>(<span class="hljs-params">self,direction</span>):<br>    <span class="hljs-comment">#一行相左合并</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">move_row_left</span>(<span class="hljs-params">row</span>):<br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">tighten</span>(<span class="hljs-params">row</span>): <span class="hljs-comment">#把零散的非零单元挤到一块</span><br>            new_row = [i <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> row <span class="hljs-keyword">if</span> i!=<span class="hljs-number">0</span>]<br>            new_row+=[<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(row)-<span class="hljs-built_in">len</span>(new_row))]<br>            <span class="hljs-keyword">return</span> new_row<br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">merge</span>(<span class="hljs-params">row</span>):<br>            pair=<span class="hljs-literal">False</span><br>            new_row=[]<br>            <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(row)):<br>                <span class="hljs-keyword">if</span> pair:<br>                    <span class="hljs-comment"># 合并后，加入乘 2 后的元素在 0 元素后面</span><br>                    new_row.append(<span class="hljs-number">2</span>*row[i])<br>                    <span class="hljs-variable language_">self</span>.score+=<span class="hljs-number">2</span>*row[i]<br>                    pair=<span class="hljs-literal">False</span><br>                <span class="hljs-keyword">else</span>:<br>                    <span class="hljs-keyword">if</span> i+<span class="hljs-number">1</span>&lt;<span class="hljs-built_in">len</span>(row) <span class="hljs-keyword">and</span> row[i]==row[i+<span class="hljs-number">1</span>]:<br>                        pair=<span class="hljs-literal">True</span><br>                        <span class="hljs-comment"># 不能合并，新列表中加入该元素</span><br>                        new_row.append(<span class="hljs-number">0</span>)<br>                    <span class="hljs-keyword">else</span>:<br>                        new_row.append(row[i])<br>            <span class="hljs-keyword">assert</span> <span class="hljs-built_in">len</span>(new_row)==<span class="hljs-built_in">len</span>(row)<br>            <span class="hljs-keyword">return</span> new_row<br>        <span class="hljs-comment"># 先挤到一块再合并再挤到一块</span><br>        <span class="hljs-keyword">return</span> tighten(merge(tighten(row)))<br><br>    <span class="hljs-comment"># 创建 moves 字典，把不同的棋盘操作作为不同的 key，对应不同的方法函数</span><br>    moves=&#123;&#125;<br>    moves[<span class="hljs-string">&#x27;Left&#x27;</span>] = <span class="hljs-keyword">lambda</span> filed:[move_row_left(row) <span class="hljs-keyword">for</span> row <span class="hljs-keyword">in</span> filed]<br>    moves[<span class="hljs-string">&#x27;Right&#x27;</span>] = <span class="hljs-keyword">lambda</span> filed:invert(moves[<span class="hljs-string">&#x27;Left&#x27;</span>](invert(filed)))<br>    moves[<span class="hljs-string">&#x27;Up&#x27;</span>] = <span class="hljs-keyword">lambda</span> field:transpose(moves[<span class="hljs-string">&#x27;Left&#x27;</span>](transpose(field)))<br>    moves[<span class="hljs-string">&#x27;Down&#x27;</span>] = <span class="hljs-keyword">lambda</span> field:transpose((moves[<span class="hljs-string">&#x27;Right&#x27;</span>](transpose(field))))<br><br>    <span class="hljs-keyword">if</span> direction <span class="hljs-keyword">in</span> moves:<br>        <span class="hljs-keyword">if</span> <span class="hljs-variable language_">self</span>.move_is_possible(direction):<br>            <span class="hljs-variable language_">self</span>.field = moves[direction](<span class="hljs-variable language_">self</span>.field)<br>            <span class="hljs-comment">#生成一个随机2或者4</span><br>            <span class="hljs-variable language_">self</span>.spawn()<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br></code></pre></td></tr></table></figure><p>判断输赢</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 判断输赢</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">is_win</span>(<span class="hljs-params">self</span>):<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">any</span>(<span class="hljs-built_in">any</span>(i&gt;=<span class="hljs-variable language_">self</span>.win_value <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> row) <span class="hljs-keyword">for</span> row <span class="hljs-keyword">in</span> <span class="hljs-variable language_">self</span>.field)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">is_gameover</span>(<span class="hljs-params">self</span>):<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">any</span>(<span class="hljs-variable language_">self</span>.move_is_possible(move) <span class="hljs-keyword">for</span> move <span class="hljs-keyword">in</span> actions)<br></code></pre></td></tr></table></figure><p>绘制游戏界面</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">draw</span>(<span class="hljs-params">self, screen</span>):<br>     help_string1 = <span class="hljs-string">&#x27;(W)Up (S)Down (A)Left (D)Right&#x27;</span><br>     help_string2 = <span class="hljs-string">&#x27;     (R)Restart (Q)Exit&#x27;</span><br>     gameover_string = <span class="hljs-string">&#x27;           GAME OVER&#x27;</span><br>     win_string = <span class="hljs-string">&#x27;          YOU WIN!&#x27;</span><br>     <span class="hljs-keyword">def</span> <span class="hljs-title function_">cast</span>(<span class="hljs-params">string</span>):<br>         screen.addstr(string+<span class="hljs-string">&#x27;\n&#x27;</span>)<br><br>     <span class="hljs-comment"># 绘制水平分割线</span><br>     <span class="hljs-keyword">def</span> <span class="hljs-title function_">draw_hor_separator</span>():<br>         line = <span class="hljs-string">&#x27;+&#x27;</span>+(<span class="hljs-string">&#x27;+------&#x27;</span> * <span class="hljs-variable language_">self</span>.width + <span class="hljs-string">&#x27;+&#x27;</span>)[<span class="hljs-number">1</span>:]<br>         <span class="hljs-comment"># defaultdict传入为函数时，可以实现value为某个常量，使用lambda可以使得代码更为简洁</span><br>         separator = defaultdict(<span class="hljs-keyword">lambda</span>: line)<br>         <span class="hljs-comment">#hasattr(object, name) 判断object对象中是否存在name属性</span><br>         <span class="hljs-comment"># python中的函数是一种对象，它有属于对象的属性。函数还可以自定义自己的属性。注意，属性是和对象相关的，和作用域无关。</span><br>         <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">hasattr</span>(draw_hor_separator,<span class="hljs-string">&#x27;counter&#x27;</span>):<br>             draw_hor_separator.counter=<span class="hljs-number">0</span><br>         cast(separator[draw_hor_separator.counter])<br>         draw_hor_separator.counter+=<span class="hljs-number">1</span><br><br>     <span class="hljs-keyword">def</span> <span class="hljs-title function_">draw_row</span>(<span class="hljs-params">row</span>):<br>         cast(<span class="hljs-string">&#x27;&#x27;</span>.join(<span class="hljs-string">&#x27;|&#123;: ^5&#125; &#x27;</span>.<span class="hljs-built_in">format</span>(num) <span class="hljs-keyword">if</span> num &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">else</span> <span class="hljs-string">&#x27;|      &#x27;</span> <span class="hljs-keyword">for</span> num <span class="hljs-keyword">in</span> row) + <span class="hljs-string">&#x27;|&#x27;</span>)<br><br>     screen.clear()<br><br>     cast(<span class="hljs-string">&#x27;SCORE: &#x27;</span> + <span class="hljs-built_in">str</span>(<span class="hljs-variable language_">self</span>.score))<br>     <span class="hljs-keyword">if</span> <span class="hljs-number">0</span> != <span class="hljs-variable language_">self</span>.highscore:<br>         cast(<span class="hljs-string">&#x27;HGHSCORE: &#x27;</span> + <span class="hljs-built_in">str</span>(<span class="hljs-variable language_">self</span>.highscore))<br><br>     <span class="hljs-keyword">for</span> row <span class="hljs-keyword">in</span> <span class="hljs-variable language_">self</span>.field:<br>         draw_hor_separator()<br>         draw_row(row)<br>     draw_hor_separator()<br><br>     <span class="hljs-keyword">if</span> <span class="hljs-variable language_">self</span>.is_win():<br>         cast(win_string)<br>     <span class="hljs-keyword">else</span>:<br>         <span class="hljs-keyword">if</span> <span class="hljs-variable language_">self</span>.is_gameover():<br>             cast(gameover_string)<br>         <span class="hljs-keyword">else</span>:<br>             cast(help_string1)<br>     cast(help_string2)<br><br></code></pre></td></tr></table></figure><p>随机生成一个 2 或者 4</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">spawn</span>(<span class="hljs-params">self</span>):<br>    new_element = <span class="hljs-number">4</span> <span class="hljs-keyword">if</span> randrange(<span class="hljs-number">100</span>) &gt; <span class="hljs-number">89</span> <span class="hljs-keyword">else</span> <span class="hljs-number">2</span><br>    (i, j) = choice([(i, j) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-variable language_">self</span>.width) <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-variable language_">self</span>.height) <span class="hljs-keyword">if</span> <span class="hljs-variable language_">self</span>.field[i][j] == <span class="hljs-number">0</span>])<br>    <span class="hljs-variable language_">self</span>.field[i][j] = new_element<br></code></pre></td></tr></table></figure><p>判断能否移动</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 判断是否能移动</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">move_is_possible</span>(<span class="hljs-params">self, dictions</span>):<br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">row_is_left_moveable</span>(<span class="hljs-params">row</span>):<br>            <span class="hljs-keyword">def</span> <span class="hljs-title function_">change</span>(<span class="hljs-params">i</span>):<br>                <span class="hljs-comment"># 当左边有空位（0），右边有数字时，可以向左移动</span><br>                <span class="hljs-keyword">if</span> row[i] == <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> row[i + <span class="hljs-number">1</span>] != <span class="hljs-number">0</span>:<br>                    <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>                <span class="hljs-comment"># 当左边有一个数和右边的数相等时，可以向左合并</span><br>                <span class="hljs-keyword">if</span> row[i] != <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> row[i + <span class="hljs-number">1</span>] == row[i]:<br>                    <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br><br>            <span class="hljs-keyword">return</span> <span class="hljs-built_in">any</span>(change(i) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(row) - <span class="hljs-number">1</span>))<br><br>        check = &#123;&#125;<br>        <span class="hljs-comment"># 判断矩阵每一行有没有可以左移动的元素</span><br>        check[<span class="hljs-string">&#x27;Left&#x27;</span>] = <span class="hljs-keyword">lambda</span> field: <span class="hljs-built_in">any</span>(row_is_left_moveable(row) <span class="hljs-keyword">for</span> row <span class="hljs-keyword">in</span> field)<br>        <span class="hljs-comment"># 判断矩阵每一行有没有可以右移动的元素。这里只用进行判断，所以矩阵变换之后，不用再变换复原</span><br>        check[<span class="hljs-string">&#x27;Right&#x27;</span>] = <span class="hljs-keyword">lambda</span> field: check[<span class="hljs-string">&#x27;Left&#x27;</span>](invert(field))<br><br>        check[<span class="hljs-string">&#x27;Up&#x27;</span>] = <span class="hljs-keyword">lambda</span> field: check[<span class="hljs-string">&#x27;Left&#x27;</span>](transpose(field))<br><br>        check[<span class="hljs-string">&#x27;Down&#x27;</span>] = <span class="hljs-keyword">lambda</span> field: check[<span class="hljs-string">&#x27;Right&#x27;</span>](transpose(field))<br><br>        <span class="hljs-keyword">if</span> dictions <span class="hljs-keyword">in</span> check:<br>            <span class="hljs-keyword">return</span> check[dictions](<span class="hljs-variable language_">self</span>.field)<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br><br></code></pre></td></tr></table></figure><p>附录：</p><ul><li>附所有源代码</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#!user/bin/env/python3</span><br><span class="hljs-comment"># -*- coding:utf-8 -*-</span><br><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> defaultdict<br><span class="hljs-keyword">from</span> random <span class="hljs-keyword">import</span> randrange, choice<br><span class="hljs-keyword">import</span> curses<br><br>actions = [<span class="hljs-string">&#x27;Up&#x27;</span>, <span class="hljs-string">&#x27;Left&#x27;</span>, <span class="hljs-string">&#x27;Down&#x27;</span>, <span class="hljs-string">&#x27;Right&#x27;</span>, <span class="hljs-string">&#x27;Restart&#x27;</span>, <span class="hljs-string">&#x27;Exit&#x27;</span>]<br><span class="hljs-comment"># 分别用 W（上），A（左），S（下），D（右），R（重置），Q（退出），进行输入来操作游戏，这里考虑到大写锁定键锁定的情况：</span><br>letter_codes = [<span class="hljs-built_in">ord</span>(c) <span class="hljs-keyword">for</span> c <span class="hljs-keyword">in</span> <span class="hljs-string">&#x27;WASDRQwasdrq&#x27;</span>]<br>actions_dict = <span class="hljs-built_in">dict</span>(<span class="hljs-built_in">zip</span>(letter_codes, actions*<span class="hljs-number">2</span>))<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_user_action</span>(<span class="hljs-params">keyboard</span>):<br>    char = <span class="hljs-string">&#x27;N&#x27;</span><br>    <span class="hljs-comment">#阻塞＋循环，直到获得用户有效输入才返回对应行为：</span><br>    <span class="hljs-keyword">while</span> char <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> actions_dict:<br>        char = keyboard.getch()<br>    <span class="hljs-keyword">return</span> actions_dict[char]<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">transpose</span>(<span class="hljs-params">field</span>):<br>    <span class="hljs-keyword">return</span> [<span class="hljs-built_in">list</span>(row) <span class="hljs-keyword">for</span> row <span class="hljs-keyword">in</span> <span class="hljs-built_in">zip</span>(*field)]<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">invert</span>(<span class="hljs-params">field</span>):<br>    <span class="hljs-keyword">return</span> [row[::-<span class="hljs-number">1</span>] <span class="hljs-keyword">for</span> row <span class="hljs-keyword">in</span> field]<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">GameField</span>(<span class="hljs-title class_ inherited__">object</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self,height=<span class="hljs-number">4</span>, width=<span class="hljs-number">4</span>, win=<span class="hljs-number">2048</span></span>):<br>        <span class="hljs-variable language_">self</span>.height = height<br>        <span class="hljs-variable language_">self</span>.width = width<br>        <span class="hljs-variable language_">self</span>.win_value =win <span class="hljs-comment">#过关分数</span><br>        <span class="hljs-variable language_">self</span>.score = <span class="hljs-number">0</span>      <span class="hljs-comment">#当前分数</span><br>        <span class="hljs-variable language_">self</span>.highscore =<span class="hljs-number">0</span>   <span class="hljs-comment">#最高分数</span><br>        <span class="hljs-variable language_">self</span>.reset()        <span class="hljs-comment">#棋盘重置</span><br><br>    <span class="hljs-comment">#重置棋盘</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">reset</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">if</span> <span class="hljs-variable language_">self</span>.score&gt;<span class="hljs-variable language_">self</span>.highscore:<br>            <span class="hljs-variable language_">self</span>.highscore = <span class="hljs-variable language_">self</span>.score<br>        <span class="hljs-variable language_">self</span>.score = <span class="hljs-number">0</span><br>        <span class="hljs-variable language_">self</span>.field = [[<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-variable language_">self</span>.width)] <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-variable language_">self</span>.height)]<br>        <span class="hljs-variable language_">self</span>.spawn()<br>        <span class="hljs-variable language_">self</span>.spawn()<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">move</span>(<span class="hljs-params">self,direction</span>):<br>        <span class="hljs-comment">#一行相左合并</span><br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">move_row_left</span>(<span class="hljs-params">row</span>):<br>            <span class="hljs-keyword">def</span> <span class="hljs-title function_">tighten</span>(<span class="hljs-params">row</span>): <span class="hljs-comment">#把零散的非零单元挤到一块</span><br>                new_row = [i <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> row <span class="hljs-keyword">if</span> i!=<span class="hljs-number">0</span>]<br>                new_row+=[<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(row)-<span class="hljs-built_in">len</span>(new_row))]<br>                <span class="hljs-keyword">return</span> new_row<br>            <span class="hljs-keyword">def</span> <span class="hljs-title function_">merge</span>(<span class="hljs-params">row</span>):<br>                pair=<span class="hljs-literal">False</span><br>                new_row=[]<br>                <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(row)):<br>                    <span class="hljs-keyword">if</span> pair:<br>                        <span class="hljs-comment"># 合并后，加入乘 2 后的元素在 0 元素后面</span><br>                        new_row.append(<span class="hljs-number">2</span>*row[i])<br>                        <span class="hljs-variable language_">self</span>.score+=<span class="hljs-number">2</span>*row[i]<br>                        pair=<span class="hljs-literal">False</span><br>                    <span class="hljs-keyword">else</span>:<br>                        <span class="hljs-keyword">if</span> i+<span class="hljs-number">1</span>&lt;<span class="hljs-built_in">len</span>(row) <span class="hljs-keyword">and</span> row[i]==row[i+<span class="hljs-number">1</span>]:<br>                            pair=<span class="hljs-literal">True</span><br>                            <span class="hljs-comment"># 不能合并，新列表中加入该元素</span><br>                            new_row.append(<span class="hljs-number">0</span>)<br>                        <span class="hljs-keyword">else</span>:<br>                            new_row.append(row[i])<br>                <span class="hljs-keyword">assert</span> <span class="hljs-built_in">len</span>(new_row)==<span class="hljs-built_in">len</span>(row)<br>                <span class="hljs-keyword">return</span> new_row<br>            <span class="hljs-comment"># 先挤到一块再合并再挤到一块</span><br>            <span class="hljs-keyword">return</span> tighten(merge(tighten(row)))<br><br>        <span class="hljs-comment"># 创建 moves 字典，把不同的棋盘操作作为不同的 key，对应不同的方法函数</span><br>        moves=&#123;&#125;<br>        moves[<span class="hljs-string">&#x27;Left&#x27;</span>] = <span class="hljs-keyword">lambda</span> filed:[move_row_left(row) <span class="hljs-keyword">for</span> row <span class="hljs-keyword">in</span> filed]<br>        moves[<span class="hljs-string">&#x27;Right&#x27;</span>] = <span class="hljs-keyword">lambda</span> filed:invert(moves[<span class="hljs-string">&#x27;Left&#x27;</span>](invert(filed)))<br>        moves[<span class="hljs-string">&#x27;Up&#x27;</span>] = <span class="hljs-keyword">lambda</span> field:transpose(moves[<span class="hljs-string">&#x27;Left&#x27;</span>](transpose(field)))<br>        moves[<span class="hljs-string">&#x27;Down&#x27;</span>] = <span class="hljs-keyword">lambda</span> field:transpose((moves[<span class="hljs-string">&#x27;Right&#x27;</span>](transpose(field))))<br><br>        <span class="hljs-keyword">if</span> direction <span class="hljs-keyword">in</span> moves:<br>            <span class="hljs-keyword">if</span> <span class="hljs-variable language_">self</span>.move_is_possible(direction):<br>                <span class="hljs-variable language_">self</span>.field = moves[direction](<span class="hljs-variable language_">self</span>.field)<br>                <span class="hljs-comment">#生成一个随机2或者4</span><br>                <span class="hljs-variable language_">self</span>.spawn()<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>            <span class="hljs-keyword">else</span>:<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br><br>    <span class="hljs-comment"># 判断输赢</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">is_win</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">any</span>(<span class="hljs-built_in">any</span>(i&gt;=<span class="hljs-variable language_">self</span>.win_value <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> row) <span class="hljs-keyword">for</span> row <span class="hljs-keyword">in</span> <span class="hljs-variable language_">self</span>.field)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">is_gameover</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">any</span>(<span class="hljs-variable language_">self</span>.move_is_possible(move) <span class="hljs-keyword">for</span> move <span class="hljs-keyword">in</span> actions)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">draw</span>(<span class="hljs-params">self, screen</span>):<br>        help_string1 = <span class="hljs-string">&#x27;(W)Up (S)Down (A)Left (D)Right&#x27;</span><br>        help_string2 = <span class="hljs-string">&#x27;     (R)Restart (Q)Exit&#x27;</span><br>        gameover_string = <span class="hljs-string">&#x27;           GAME OVER&#x27;</span><br>        win_string = <span class="hljs-string">&#x27;          YOU WIN!&#x27;</span><br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">cast</span>(<span class="hljs-params">string</span>):<br>            screen.addstr(string+<span class="hljs-string">&#x27;\n&#x27;</span>)<br><br>        <span class="hljs-comment"># 绘制水平分割线</span><br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">draw_hor_separator</span>():<br>            line = <span class="hljs-string">&#x27;+&#x27;</span>+(<span class="hljs-string">&#x27;+------&#x27;</span> * <span class="hljs-variable language_">self</span>.width + <span class="hljs-string">&#x27;+&#x27;</span>)[<span class="hljs-number">1</span>:]<br>            <span class="hljs-comment"># defaultdict传入为函数时，可以实现value为某个常量，使用lambda可以使得代码更为简洁</span><br>            separator = defaultdict(<span class="hljs-keyword">lambda</span>: line)<br>            <span class="hljs-comment">#hasattr(object, name) 判断object对象中是否存在name属性</span><br>            <span class="hljs-comment"># python中的函数是一种对象，它有属于对象的属性。函数还可以自定义自己的属性。注意，属性是和对象相关的，和作用域无关。</span><br>            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">hasattr</span>(draw_hor_separator,<span class="hljs-string">&#x27;counter&#x27;</span>):<br>                draw_hor_separator.counter=<span class="hljs-number">0</span><br>            cast(separator[draw_hor_separator.counter])<br>            draw_hor_separator.counter+=<span class="hljs-number">1</span><br><br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">draw_row</span>(<span class="hljs-params">row</span>):<br>            cast(<span class="hljs-string">&#x27;&#x27;</span>.join(<span class="hljs-string">&#x27;|&#123;: ^5&#125; &#x27;</span>.<span class="hljs-built_in">format</span>(num) <span class="hljs-keyword">if</span> num &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">else</span> <span class="hljs-string">&#x27;|      &#x27;</span> <span class="hljs-keyword">for</span> num <span class="hljs-keyword">in</span> row) + <span class="hljs-string">&#x27;|&#x27;</span>)<br><br>        screen.clear()<br><br>        cast(<span class="hljs-string">&#x27;SCORE: &#x27;</span> + <span class="hljs-built_in">str</span>(<span class="hljs-variable language_">self</span>.score))<br>        <span class="hljs-keyword">if</span> <span class="hljs-number">0</span> != <span class="hljs-variable language_">self</span>.highscore:<br>            cast(<span class="hljs-string">&#x27;HGHSCORE: &#x27;</span> + <span class="hljs-built_in">str</span>(<span class="hljs-variable language_">self</span>.highscore))<br><br>        <span class="hljs-keyword">for</span> row <span class="hljs-keyword">in</span> <span class="hljs-variable language_">self</span>.field:<br>            draw_hor_separator()<br>            draw_row(row)<br>        draw_hor_separator()<br><br>        <span class="hljs-keyword">if</span> <span class="hljs-variable language_">self</span>.is_win():<br>            cast(win_string)<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-keyword">if</span> <span class="hljs-variable language_">self</span>.is_gameover():<br>                cast(gameover_string)<br>            <span class="hljs-keyword">else</span>:<br>                cast(help_string1)<br>        cast(help_string2)<br><br>    <span class="hljs-comment"># 随机生成一个 2 或者 4</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">spawn</span>(<span class="hljs-params">self</span>):<br>        new_element = <span class="hljs-number">4</span> <span class="hljs-keyword">if</span> randrange(<span class="hljs-number">100</span>) &gt; <span class="hljs-number">89</span> <span class="hljs-keyword">else</span> <span class="hljs-number">2</span><br>        (i, j) = choice([(i, j) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-variable language_">self</span>.width) <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-variable language_">self</span>.height) <span class="hljs-keyword">if</span> <span class="hljs-variable language_">self</span>.field[i][j] == <span class="hljs-number">0</span>])<br>        <span class="hljs-variable language_">self</span>.field[i][j] = new_element<br><br>    <span class="hljs-comment"># 判断是否能移动</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">move_is_possible</span>(<span class="hljs-params">self, dictions</span>):<br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">row_is_left_moveable</span>(<span class="hljs-params">row</span>):<br>            <span class="hljs-keyword">def</span> <span class="hljs-title function_">change</span>(<span class="hljs-params">i</span>):<br>                <span class="hljs-comment"># 当左边有空位（0），右边有数字时，可以向左移动</span><br>                <span class="hljs-keyword">if</span> row[i] == <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> row[i + <span class="hljs-number">1</span>] != <span class="hljs-number">0</span>:<br>                    <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>                <span class="hljs-comment"># 当左边有一个数和右边的数相等时，可以向左合并</span><br>                <span class="hljs-keyword">if</span> row[i] != <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> row[i + <span class="hljs-number">1</span>] == row[i]:<br>                    <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br><br>            <span class="hljs-keyword">return</span> <span class="hljs-built_in">any</span>(change(i) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(row) - <span class="hljs-number">1</span>))<br><br>        check = &#123;&#125;<br>        <span class="hljs-comment"># 判断矩阵每一行有没有可以左移动的元素</span><br>        check[<span class="hljs-string">&#x27;Left&#x27;</span>] = <span class="hljs-keyword">lambda</span> field: <span class="hljs-built_in">any</span>(row_is_left_moveable(row) <span class="hljs-keyword">for</span> row <span class="hljs-keyword">in</span> field)<br>        <span class="hljs-comment"># 判断矩阵每一行有没有可以右移动的元素。这里只用进行判断，所以矩阵变换之后，不用再变换复原</span><br>        check[<span class="hljs-string">&#x27;Right&#x27;</span>] = <span class="hljs-keyword">lambda</span> field: check[<span class="hljs-string">&#x27;Left&#x27;</span>](invert(field))<br><br>        check[<span class="hljs-string">&#x27;Up&#x27;</span>] = <span class="hljs-keyword">lambda</span> field: check[<span class="hljs-string">&#x27;Left&#x27;</span>](transpose(field))<br><br>        check[<span class="hljs-string">&#x27;Down&#x27;</span>] = <span class="hljs-keyword">lambda</span> field: check[<span class="hljs-string">&#x27;Right&#x27;</span>](transpose(field))<br><br>        <span class="hljs-keyword">if</span> dictions <span class="hljs-keyword">in</span> check:<br>            <span class="hljs-keyword">return</span> check[dictions](<span class="hljs-variable language_">self</span>.field)<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>(<span class="hljs-params">stdscr</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">init</span>():<br>        <span class="hljs-comment"># 重置游戏棋盘</span><br>        game_field.reset()<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;Game&#x27;</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">game</span>():<br>        <span class="hljs-comment"># 画出 GameOver 或者 Win 的界面</span><br>        game_field.draw(stdscr)<br>        <span class="hljs-comment"># 读取用户输入得到action，判断是重启游戏还是结束游戏</span><br>        action = get_user_action(stdscr)<br><br>        <span class="hljs-keyword">if</span> action ==<span class="hljs-string">&#x27;Restart&#x27;</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;Init&#x27;</span><br>        <span class="hljs-keyword">if</span> action==<span class="hljs-string">&#x27;Exit&#x27;</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;Exit&#x27;</span><br>        <span class="hljs-keyword">if</span> game_field.move(action):<br>            <span class="hljs-keyword">if</span> game_field.is_win():<br>                <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;Win&#x27;</span><br>            <span class="hljs-keyword">if</span> game_field.is_gameover():<br>                <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;Gameover&#x27;</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;Game&#x27;</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">not_game</span>(<span class="hljs-params">state</span>):<br>        <span class="hljs-comment"># 画出 GameOver 或者 Win 的界面</span><br>        game_field.draw(stdscr)<br>        <span class="hljs-comment"># 读取用户输入得到action，判断是重启游戏还是结束游戏</span><br>        action = get_user_action(stdscr)<br>        responses = defaultdict(<span class="hljs-keyword">lambda</span>:state)<br>        responses[<span class="hljs-string">&#x27;Restart&#x27;</span>], responses[<span class="hljs-string">&#x27;Exit&#x27;</span>] = <span class="hljs-string">&#x27;Init&#x27;</span>,<span class="hljs-string">&#x27;Exit&#x27;</span><br>        <span class="hljs-keyword">return</span> responses[action]<br><br><span class="hljs-comment"># 游戏盘的四种状态</span><br>    state_actions=&#123;<br>        <span class="hljs-string">&#x27;Init&#x27;</span>:init,<br>        <span class="hljs-string">&#x27;Win&#x27;</span>:<span class="hljs-keyword">lambda</span>:not_game(<span class="hljs-string">&#x27;Win&#x27;</span>),<br>        <span class="hljs-string">&#x27;Gameover&#x27;</span>:<span class="hljs-keyword">lambda</span>:not_game(<span class="hljs-string">&#x27;Gameover&#x27;</span>),<br>        <span class="hljs-string">&#x27;Game&#x27;</span>:game<br>    &#125;<br><br>    curses.use_default_colors()<br><br>    game_field = GameField(win=<span class="hljs-number">2048</span>)<br>    state = <span class="hljs-string">&#x27;Init&#x27;</span><br>    <span class="hljs-keyword">while</span> state!=<span class="hljs-string">&#x27;Exit&#x27;</span>:<br>        state = state_actions[state]()<br><br>curses.wrapper(main)<br></code></pre></td></tr></table></figure><ul><li>curses包的安装：<br>问题：windows系统如果直接用pip install下载会报错<br>解决办法：<br>去网址下载<a href="http://www.lfd.uci.edu/~gohlke/pythonlibs/#curses">http://www.lfd.uci.edu/~gohlke/pythonlibs/#curses</a>(如果点击下载出现file not find，请fq下载)</li></ul><p>在下载目录运行如下命令：<br>pip install –upgrade curses-2.2+utf8-cp36-cp36m-win_amd64.whl</p><ul><li>可视化游戏网址：<a href="https://play2048.co/">https://play2048.co/</a></li></ul><hr><iframe src="https://rawcdn.githack.com/YUTING0907/donate-page-yu/df1732a5993401f9d372918c3f7680ca0e1c2ca3/simple/index.html " style="overflow-x:hidden;overflow-y:hidden; border:0xp none #fff; min-height:240px; width:100%;"  frameborder="0" scrolling="no"></iframe></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>参加市北-GMIS 2019的感悟</title>
    <link href="/posts/2019/07/bde68aee.html"/>
    <url>/posts/2019/07/bde68aee.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><hr><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p><strong>市北-GMIS-2019全球数据智能峰会</strong>，由机器之心主办，上海市市北高新技术服务业园区承办。 </p><p> 大会以【拥抱数智经济，赋能产业生态】为主题，共进行24场主题演讲、2个主论坛、2个圆桌论坛、4个session、1场AI画展，举行了为期2天的行业峰会。不仅带来联邦学习、认知智能、AutoML等前瞻技术，同时关注技术的落地工程运用。</p><p><strong>1day AM：主论坛-Data That Empowers</strong><br>[外链图片转存失败(img-BZe2nmqa-1563797092570)(<a href="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/hcNHN.1Ba57CNGmcrIvPH*7obf64Bf2lB5dkBTgDCHc!/b/dL4AAAAAAAAA&amp;bo=*gc4BAAAAAARF.U!&amp;rf=viewer_4&amp;t=5)%5D">http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/hcNHN.1Ba57CNGmcrIvPH*7obf64Bf2lB5dkBTgDCHc!/b/dL4AAAAAAAAA&amp;bo=*gc4BAAAAAARF.U!&amp;rf=viewer_4&amp;t=5)]</a></p><p><strong>1day PM： 2个session</strong></p><ul><li>Session1:前沿研究与技术趋势</li><li>Session2:数据智能落地项目与发展启示</li></ul><p>[外链图片转存失败(img-2Me63GjJ-1563797125923)(<a href="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/8mK4OkX..1hzROHhRLQEQd4LWkQqSJIy.dW9vcjIlmU!/b/dFIBAAAAAAAA&amp;bo=cwY4BAAAAAARF2k!&amp;rf=viewer_4&amp;t=5)%5D">http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/8mK4OkX..1hzROHhRLQEQd4LWkQqSJIy.dW9vcjIlmU!/b/dFIBAAAAAAAA&amp;bo=cwY4BAAAAAARF2k!&amp;rf=viewer_4&amp;t=5)]</a></p><p><strong>2day AM：主论坛-Data That Empowers</strong></p><p><strong>2day PM： 2个session</strong></p><ul><li>Session1：数据思维与工程实践</li><li>Session2：智能应用与产业生态</li></ul><hr><h2 id="正文：参加峰会的笔记"><a href="#正文：参加峰会的笔记" class="headerlink" title="正文：参加峰会的笔记"></a>正文：参加峰会的笔记</h2><h2 id="【POWER-AI】"><a href="#【POWER-AI】" class="headerlink" title="【POWER AI】"></a>【POWER AI】</h2><p>  <em><strong>[空间信息技术及在大数据中的应用]（中科院院士王建宇分享）</strong></em></p><p>现在的空间信息技术</p><ul><li>王建宇院士对曾经的报道称美国的卫星的分辨率可以达到将地面报纸的标题看清的新闻进行了辟谣。</li><li>虽然不能看清报纸，但是全球顶尖卫星可以做到0.1m的分辨率，也就是说可以清晰的识别车辆行人、建筑。人的运动轨迹也能一览无遗。</li></ul><p> 空间信息技术可以做以下用途：</p><ul><li>卫星监控的图像可以用来分析人口密度，从而反映出城市发展的模式</li><li>对军事打击的评估</li><li>分析高光谱、叶绿素、蛋白氮等的含量预测农作物的产量</li><li>农场主可以足不出户的观察农作物的涨势，并且可以及时发现病虫害</li></ul><p>展望：技术转换成落地应用还需一段时间</p><hr><h2 id="【AI-for-Smarter-Enterprises】（Hans-Uszkoreit-欧洲科学院院士、德国人工智能研究中心-DFKI-科学董事-）"><a href="#【AI-for-Smarter-Enterprises】（Hans-Uszkoreit-欧洲科学院院士、德国人工智能研究中心-DFKI-科学董事-）" class="headerlink" title="【AI for Smarter Enterprises】（Hans Uszkoreit 欧洲科学院院士、德国人工智能研究中心(DFKI)科学董事 ）"></a>【AI for Smarter Enterprises】（Hans Uszkoreit 欧洲科学院院士、德国人工智能研究中心(DFKI)科学董事 ）</h2><ul><li><p><strong>两种不同类型的学习系统</strong><br> Systems based on knowledge 学习知识<br>Systems based on behaviour   学习行为</p></li><li><p><strong>两种不同类型的学习系统的区别</strong></p></li></ul><p> [谷歌的机器学习翻译系统并不能理解你的语句，但却能够完成翻译工作，这是因为它的算法从大量数据中学习人类的翻译方法，从而让阅读的人类可以理解翻译后的内容。」</p><p>[现在的自动驾驶系统,它并不了解交通法规，但能够通过多次的训练，让它获得自动驾驶的能力]</p><p>不管是谷歌翻译器还是自动驾驶系统，它们都不是了解了规则，他们学习的是行为，而非知识。</p><p><strong>「想要实现超越人类的 AI 能力，我们要在基于知识、基于规则和机器学习系统中找到交叉的部分，真正的超级 AI 是超越人类的，但仍然不是人类形式的智能——它不会是伊隆·马斯克所说的超级智能。」</strong></p><p><strong>AI研究会经过4个阶段：</strong></p><p><em><strong>第一是  启发式系统 Heuristic Systems<br>第二是  基于知识的系统 Knowledge-Based Systems<br>第三是  学习系统 Learning Systems<br>第四是 认知系统 Cognitive Systems</strong></em><br>[外链图片转存失败(img-wEVoZ71H-1565490762322)(<a href="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/tHS5INhlTE.E*EA1lAa7b24LfO.SPqJEvDBULjGGws8!/b/dEgBAAAAAAAA&amp;bo=PAY4BAAAAAARFyY!&amp;rf=viewer_4&amp;t=5)%5D">http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/tHS5INhlTE.E*EA1lAa7b24LfO.SPqJEvDBULjGGws8!/b/dEgBAAAAAAAA&amp;bo=PAY4BAAAAAARFyY!&amp;rf=viewer_4&amp;t=5)]</a></p><p>[目前我们正处于第三阶段中，我们开发了例如神经网络、深度学习这样的学习系统，现阶段面临的挑战就是如何把这些就是整合起来建立认知系统。]</p><p>「商业决策需要思考大量不同来源的内容。世界是动态变化的，我们不能简单地使用过去知识训练过的算法来对现在的问题进行决策，总会有意外发生，所以这里需要人类把关。」</p><hr><h2 id="【不要让机器假装智能】（李航-字节跳动科技有限公司人工智能实验室总监、IEEE会士、ACM杰出科学家"><a href="#【不要让机器假装智能】（李航-字节跳动科技有限公司人工智能实验室总监、IEEE会士、ACM杰出科学家" class="headerlink" title="【不要让机器假装智能】（李航 字节跳动科技有限公司人工智能实验室总监、IEEE会士、ACM杰出科学家)"></a>【不要让机器假装智能】（李航 字节跳动科技有限公司人工智能实验室总监、IEEE会士、ACM杰出科学家)</h2><p>这次峰会主要是去看李航老师和吴恩达老师的，想必大家都知道李航老师的《统计学习方法》、吴恩达老师的《机器学习》和《深度学习》课程。在业内基本大家都看过的课程和书籍。</p><p><strong>对话机器人领域</strong><br>李航老师说在对话机器人领域，实现开放式对话仍然面临巨大挑战，现在对话机器人还只能做到一问一答式的对话。</p><p>对话是两个人需要交流感情，交换信息，在真实的对话场景中，聊天不断被终止，设置、恢复。要做到真正的像人一样去定义任务、产生任务、完成任务，这涉及到人工智能的方方面面，是非常具有挑战性的问题。</p><p>结合在字节跳动与华为对话系统的开发经验，李航老师总结了设计对话系统的四条规则：</p><ul><li>1.要能够在一个场景中自封闭，让用户不论怎么说，能够完成一件事情、一个功能。</li><li>2.机器不可能 100% 理解，失败的时候，一定要能比较自然地应对。</li><li>3.对话不仅仅是语言的问题，也包括情感和文化因素，需要加入社交因素让对话更富情感。</li><li>4.不要让系统装智能。</li></ul><p>李航老师还提到一句话那就是优雅的失败，虽然现阶段对话机器人还做不到那么智能，但有的时候机器的不智能并不是一种缺陷，还反而更显可爱。</p><hr><h2 id="【人工智能多模态的未来】-贾佳亚-香港中文大学终身教授、腾讯优图实验室杰出科学家"><a href="#【人工智能多模态的未来】-贾佳亚-香港中文大学终身教授、腾讯优图实验室杰出科学家" class="headerlink" title="【人工智能多模态的未来】(贾佳亚 香港中文大学终身教授、腾讯优图实验室杰出科学家)"></a>【人工智能多模态的未来】(贾佳亚 香港中文大学终身教授、腾讯优图实验室杰出科学家)</h2><p>当我们对机器人是说，请给我拿桌子上左边的那个瓶子。机器人要做哪些事情。<br>首先需要识别语音、识别图像、再需要3D建模、分析结构化信息。<br>对于人类来说非常简单的一个问题，对于机器人来说却是非常难完成的。AI 解决这个问题需要语言模型、三维建模、自动导航、图像分析等多种能力。</p><p>在多模态 AI 方面，腾讯正在开发一套手语翻译器。</p><hr><hr><iframe src="https://rawcdn.githack.com/YUTING0907/donate-page-yu/df1732a5993401f9d372918c3f7680ca0e1c2ca3/simple/index.html " style="overflow-x:hidden;overflow-y:hidden; border:0xp none #fff; min-height:240px; width:100%;"  frameborder="0" scrolling="no"></iframe></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    
    <tags>
      
      <tag>峰会</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Python -笔记 -内部类&amp;日期格式</title>
    <link href="/posts/2019/04/525c1d8c.html"/>
    <url>/posts/2019/04/525c1d8c.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><hr><p><strong>本文适用对象：</strong></p><p>python初级打怪～</p><p>本文介绍两个python的小知识点，内部类和日期格式转换</p><hr><h3 id="内部类"><a href="#内部类" class="headerlink" title="内部类"></a><strong>内部类</strong></h3><p>内部类顾名思义就是类内部包含的类，就叫内部类</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs ruby"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Car</span>: <span class="hljs-comment">#外部类</span><br>    <span class="hljs-keyword">class</span> <span class="hljs-title class_">Door</span>: <span class="hljs-comment"># 内部类</span><br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">open</span>(<span class="hljs-params"><span class="hljs-variable language_">self</span></span>):<br>            print(<span class="hljs-string">&quot;open door&quot;</span>)<br><br>    <span class="hljs-keyword">class</span> <span class="hljs-title class_">Wheel</span>:<br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">run</span>(<span class="hljs-params"><span class="hljs-variable language_">self</span></span>):<br>            print(<span class="hljs-string">&quot;car run&quot;</span>)<br><br><span class="hljs-keyword">if</span> __name__ ==<span class="hljs-string">&quot;__main__&quot;</span>:<br>    car = <span class="hljs-title class_">Car</span>() <span class="hljs-comment">#实例化外部类</span><br>    backDoor = <span class="hljs-title class_">Car</span>.<span class="hljs-title class_">Door</span>()  <span class="hljs-comment"># 实例化内部类 第一种方法</span><br>    frontDoor = car.<span class="hljs-title class_">Door</span>()  <span class="hljs-comment"># 因为car已经实例化外部类，再次实例化Car的内部类 第二种方法</span><br>    backDoor.open()<br>    frontDoor.open()<br></code></pre></td></tr></table></figure><p>以上代码列举了调用内部类的两种方法<br>第一种调用内部类的方法是：<br><strong>通过外部类直接调用，不实例化外部类。</strong><br>第二种调用内部类的方法是：<br><strong>通过外部类的实例化对象调用</strong></p><hr><h4 id="日期格式："><a href="#日期格式：" class="headerlink" title="日期格式："></a><strong>日期格式：</strong></h4><p>字符格式转换成日期格式</p><figure class="highlight sas"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sas">import datetime<br>datetime.datetime.strp<span class="hljs-meta">time</span>(<span class="hljs-string">&#x27;2019-04-13&#x27;</span>, <span class="hljs-string">&#x27;%Y-%m-%d&#x27;</span>)<br>＃<span class="hljs-keyword">output</span>：2019-04-1３ 00:00:00<br></code></pre></td></tr></table></figure><p>六天后的时间</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs stylus">import datetime<br>now = datetime<span class="hljs-selector-class">.datetime</span><span class="hljs-selector-class">.strptime</span>(<span class="hljs-string">&#x27;2019-04-13&#x27;</span>, <span class="hljs-string">&#x27;%Y-%m-%d&#x27;</span>)<br>times = <span class="hljs-string">&#x27;2019-04-13&#x27;</span><br>endnow = now+datetime<span class="hljs-selector-class">.timedelta</span>(days=<span class="hljs-number">6</span>)<br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(endnow)</span></span><br>＃output：<span class="hljs-number">2019</span>-<span class="hljs-number">04</span>-<span class="hljs-number">19</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span><br></code></pre></td></tr></table></figure><p>时间转换成字符串</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs stylus">import datetime<br>now = datetime<span class="hljs-selector-class">.datetime</span><span class="hljs-selector-class">.strptime</span>(<span class="hljs-string">&#x27;2019-04-13&#x27;</span>, <span class="hljs-string">&#x27;%Y-%m-%d&#x27;</span>)<br>times = <span class="hljs-string">&#x27;2019-04-13&#x27;</span><br>endnow = now+datetime<span class="hljs-selector-class">.timedelta</span>(days=<span class="hljs-number">6</span>)<br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(endnow.strftime(<span class="hljs-string">&#x27;%Y-%m-%d&#x27;</span>)</span></span>)<br>＃output：<span class="hljs-number">2019</span>-<span class="hljs-number">04</span>-<span class="hljs-number">19</span><br></code></pre></td></tr></table></figure><hr><iframe src="https://rawcdn.githack.com/YUTING0907/donate-page-yu/df1732a5993401f9d372918c3f7680ca0e1c2ca3/simple/index.html " style="overflow-x:hidden;overflow-y:hidden; border:0xp none #fff; min-height:240px; width:100%;"  frameborder="0" scrolling="no"></iframe></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Python -笔记 -单例模式(Singleton)实现</title>
    <link href="/posts/2019/04/55dc5fbe.html"/>
    <url>/posts/2019/04/55dc5fbe.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><hr><p><strong>本文适用对象：</strong></p><p>python正在进阶的人儿~<br>高级 Python 语法，涉及装饰器</p><hr><p>  不管是编写类还是函数都是变量之间的传来传去，最简单粗暴的方式就是全局变量。确实在很多场景下用全局变量很方便。不过如果代码规模增大，并且有多个文件的时候，全局变量就会变得比较混乱。你可能不知道在哪个文件中定义了相同类型甚至重名的全局变量，造成悲剧。</p><p>这里介绍一种设计模式，<strong>单例模式</strong></p><h3 id="What"><a href="#What" class="headerlink" title="What"></a><strong>What</strong></h3><p><strong>单例模式是什么？</strong>单例是一种设计模式，应用该模式的类只会生成一个实例。</p><p>单例模式保证了在程序的不同位置都可以且仅可以取到同一个对象实例：如果实例不存在，会创建一个实例；如果已存在就会返回这个实例。因为单例是一个类，所以你也可以为其提供相应的操作方法，以便于对这个实例进行管理。</p><h3 id="Why"><a href="#Why" class="headerlink" title="Why"></a><strong>Why</strong></h3><p><strong>那么为什么要用单例设计模式呢？</strong><br>举个例子来说，比如你开发一款游戏软件，游戏中需要有“场景管理器”这样一种东西，用来管理游戏场景的切换、资源载入、网络连接等等任务。这个管理器需要有多种方法和属性，在代码中很多地方会被调用，且被调用的必须是同一个管理器，否则既容易产生冲突，也会浪费资源。这种情况下，单例模式就是一个很好的实现方法。</p><h3 id="How"><a href="#How" class="headerlink" title="How"></a><strong>How</strong></h3><p>怎么实现单例设计模式？<br>下面提供３种实现方法：</p><ul><li>使用函数装饰器实现单例</li><li>使用类装饰器实现单例</li><li>使用 <strong>new</strong> 关键字实现单例</li></ul><h4 id="使用函数装饰器实现单例："><a href="#使用函数装饰器实现单例：" class="headerlink" title="使用函数装饰器实现单例："></a><strong>使用函数装饰器实现单例</strong>：</h4><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">def singleton(cls):<br>    _instance = &#123;&#125;<br><br>    def inner():<br>        <span class="hljs-keyword">if</span> cls <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> _instance:<br>            _instance[cls] = cls()<br>        <span class="hljs-keyword">return</span> _instance[cls]<br><br>    <span class="hljs-keyword">return</span> inner<br><br>@singleton<br><span class="hljs-keyword">class</span> <span class="hljs-symbol">Cla</span>(<span class="hljs-symbol">object</span>):<br>    <span class="hljs-symbol">def</span> <span class="hljs-symbol">__init__</span>(<span class="hljs-symbol">self</span>):<br>        <span class="hljs-symbol">pass</span><br><br><span class="hljs-symbol">cls1</span> = <span class="hljs-symbol">Cla</span>()<br><span class="hljs-symbol">cls2</span> = <span class="hljs-symbol">Cla</span>()<br><span class="hljs-symbol">print</span>(<span class="hljs-symbol">id</span>(<span class="hljs-symbol">cls1</span>) == <span class="hljs-symbol">id</span>(<span class="hljs-symbol">cls2</span>))<br></code></pre></td></tr></table></figure><p>输出结果：</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada"><span class="hljs-literal">True</span><br></code></pre></td></tr></table></figure><p>在 Python 中，id 关键字可用来查看对象在内存中的存放位置，这里 cls1 和 cls2 的 id 值相同，说明他们指向了同一个对象。</p><p>代码的设计思路是使用<strong>不可变的类地址</strong>作为键，其<strong>实例</strong>作为值。每次创造实例时，首先查看该类是否存在实例。存在的话直接返回该实例即可，否则新建一个实例并存放在字典中。</p><h4 id="使用类装饰器实现单例"><a href="#使用类装饰器实现单例" class="headerlink" title="使用类装饰器实现单例"></a><strong>使用类装饰器实现单例</strong></h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Singleton</span>(<span class="hljs-title class_ inherited__">object</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, cls</span>):<br>        <span class="hljs-variable language_">self</span>._cls = cls<br>        <span class="hljs-variable language_">self</span>._instance = &#123;&#125;<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__call__</span>(<span class="hljs-params">self, *args, **kwargs</span>):<br>        <span class="hljs-keyword">if</span> <span class="hljs-variable language_">self</span>._cls <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> <span class="hljs-variable language_">self</span>._instance:<br>            <span class="hljs-variable language_">self</span>._instance[<span class="hljs-variable language_">self</span>._cls] = <span class="hljs-variable language_">self</span>._cls()<br>        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">self</span>._instance[<span class="hljs-variable language_">self</span>._cls]<br><br><span class="hljs-meta">@Singleton</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Cla1</span>(<span class="hljs-title class_ inherited__">object</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">pass</span><br><br>cls1 = Cla1()<br>cls2 = Cla1()<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">id</span>(cls1)==<span class="hljs-built_in">id</span>(cls2))<br></code></pre></td></tr></table></figure><p>使用 类装饰器实现单例的原理和 函数装饰器 实现的原理相似<br>－－－－－－－－－－－－－－－－－－－－－－<br><strong>补充：装饰器</strong><br>简单地说：他们是修改其他函数的功能的函数<br>他们有助于让我们的代码更简短，也更Pythonic（Python范儿）</p><p>首先在理解装饰器之前我们要先理解，<strong>从函数中返回函数</strong>，<strong>将函数作为参数传给另一个函数</strong>这两个概念。<br><strong>１.从函数中返回函数</strong><br>举个例子：</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs ruby"><span class="hljs-keyword">def</span> <span class="hljs-title function_">hi</span>(<span class="hljs-params">name=<span class="hljs-string">&quot;yasoob&quot;</span></span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">greet</span>():<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;now you are in the greet() function&quot;</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">welcome</span>():<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;now you are in the welcome() function&quot;</span><br><br>    <span class="hljs-keyword">if</span> name == <span class="hljs-string">&quot;yasoob&quot;</span>:<br>        <span class="hljs-keyword">return</span> greet<br>    <span class="hljs-symbol">else:</span><br>        <span class="hljs-keyword">return</span> welcome<br><br>a = hi()<br>print(a)<br><br><span class="hljs-comment">#outputs: &lt;function hi.&lt;locals&gt;.greet at 0x000000B36FE96488&gt;</span><br><br><span class="hljs-comment">#上面清晰地展示了`a`现在指向到hi()函数中的greet()函数</span><br><span class="hljs-comment">#现在试试这个</span><br><span class="hljs-comment">#outputs: now you are in the greet() function</span><br><br></code></pre></td></tr></table></figure><p>再次看看这个代码。在 if&#x2F;else 语句中我们返回 greet 和 welcome，而不是 greet() 和 welcome()。为什么那样？这是因为当你把一对小括号放在后面，这个函数就会执行；<br>然而如果你不放括号在它后面，那它可以被到处传递，并且可以赋值给别的变量而不去执行它。<br>当我们写下 a &#x3D; hi()，hi() 会被执行，而由于 name 参数默认是 yasoob，所以函数 greet 被返回了。如果我们把语句改为 a &#x3D; hi(name &#x3D; “ali”)，那么 welcome 函数将被返回。我们还可以打印出 hi()()，这会输出 now you are in the greet() function。</p><p><strong>２.将函数作为参数传给另一个函数</strong></p><figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs isbl"><span class="hljs-variable">def</span> <span class="hljs-function"><span class="hljs-title">hi</span>():</span><br><span class="hljs-function">    <span class="hljs-title">print</span>(<span class="hljs-string">&#x27;Hello Big data industry!!!!!&#x27;</span>)</span><br><br><span class="hljs-variable">def</span> <span class="hljs-function"><span class="hljs-title">dosomethingBeforehi</span>(<span class="hljs-variable">func</span>):</span><br><span class="hljs-function">    <span class="hljs-title">print</span>(<span class="hljs-string">&quot;I am echo!!!!!!&quot;</span>)</span><br>    <span class="hljs-function"><span class="hljs-title">func</span>()</span><br><br><span class="hljs-function"><span class="hljs-title">dosomethingBeforehi</span>(<span class="hljs-variable">hi</span>)</span><br></code></pre></td></tr></table></figure><p>现在你已经具备所有必需知识，来进一步学习装饰器真正是什么了。装饰器让你在一个函数的前后去执行代码。<br><strong>你的第一个装饰器</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">a_new_decorator</span>(<span class="hljs-params">a_func</span>):<br> <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapTheFunction</span>():<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;I am doing some boring work before executing a_func()&quot;</span>)<br> <br>        a_func()<br> <br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;I am doing some boring work after executing a_func()&quot;</span>)<br> <br>    <span class="hljs-keyword">return</span> wrapTheFunction<br> <br><span class="hljs-keyword">def</span> <span class="hljs-title function_">a_function_requiring_decoration</span>():<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;I am the function which needs some decoration to remove my foul smell&quot;</span>)<br><br>a_function_requiring_decoration = a_new_decorator(a_function_requiring_decoration)<br><span class="hljs-comment">#now a_function_requiring_decoration is wrapped by wrapTheFunction()</span><br> <br>a_function_requiring_decoration()<br><span class="hljs-comment">#outputs:I am doing some boring work before executing a_func()</span><br><span class="hljs-comment">#        I am the function which needs some decoration to remove my foul smell</span><br><span class="hljs-comment">#        I am doing some boring work after executing a_func()</span><br></code></pre></td></tr></table></figure><p>现在你也许疑惑，我们在代码里并没有使用 @ 符号？那只是一个简短的方式来生成一个被装饰的函数。这里是我们如何使用 @ 来运行之前的代码：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">a_new_decorator</span>(<span class="hljs-params">a_func</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapTheFunction</span>():<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;I am doing some boring work before executing a_func()&quot;</span>)<br><br>        a_func()<br><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;I am doing some boring work after executing a_func()&quot;</span>)<br><br>    <span class="hljs-keyword">return</span> wrapTheFunction<br><span class="hljs-meta">@a_new_decorator</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">a_function_requiring_decoration</span>():<br>    <span class="hljs-string">&quot;&quot;&quot;Hey you! Decorate me!&quot;&quot;&quot;</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;I am the function which needs some decoration to &quot;</span><br>          <span class="hljs-string">&quot;remove my foul smell&quot;</span>)<br><br>a_function_requiring_decoration()<br><span class="hljs-comment"># outputs: I am doing some boring work before executing a_func()</span><br><span class="hljs-comment">#         I am the function which needs some decoration to remove my foul smell</span><br><span class="hljs-comment">#         I am doing some boring work after executing a_func()</span><br></code></pre></td></tr></table></figure><p>蓝本规范:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> functools <span class="hljs-keyword">import</span> wraps<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">decorator_name</span>(<span class="hljs-params">f</span>):<br><span class="hljs-meta">    @wraps(<span class="hljs-params">f</span>)</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">decorated</span>(<span class="hljs-params">*args, **kwargs</span>):<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> can_run:<br>            <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Function will not run&quot;</span><br>        <span class="hljs-keyword">return</span> f(*args, **kwargs)<br>    <span class="hljs-keyword">return</span> decorated<br> <br><span class="hljs-meta">@decorator_name</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">func</span>():<br>    <span class="hljs-keyword">return</span>(<span class="hljs-string">&quot;Function is running&quot;</span>)<br> <br>can_run = <span class="hljs-literal">True</span><br><span class="hljs-built_in">print</span>(func())<br><span class="hljs-comment"># Output: Function is running</span><br> <br>can_run = <span class="hljs-literal">False</span><br><span class="hljs-built_in">print</span>(func())<br><span class="hljs-comment"># Output: Function will not run</span><br></code></pre></td></tr></table></figure><p><strong>注意：</strong>@wraps接受一个函数来进行装饰，并加入了复制函数名称、注释文档、参数列表等等的功能。这可以让我们在装饰器里面访问在装饰之前的函数的属性</p><p>－－－－－－－－－－－－－－－－－－－－－－</p><h4 id="使用-new-关键字实现单例"><a href="#使用-new-关键字实现单例" class="headerlink" title="使用 new 关键字实现单例"></a><strong>使用 <strong>new</strong> 关键字实现单例</strong></h4><p>在说这个实现之前，首先我们需要知道Python 中一个类和一个实例是通过哪些方法以怎样的顺序被创造的。</p><p>简单来说，<strong>元类(metaclass)</strong> 可以通过方法 <strong>metaclass</strong> 创造了类(class)，而**类(class)**通过方法 <strong>new</strong> 创造了实例(instance)。</p><p>元类可以理解成类的爸爸，在python世界，拥有一个永恒的道，那就是“type”。type就是道。如此广袤无垠的python生态圈，都是由type产生出来的。在这里有一句很太极生两仪，两仪生四象，四象生八卦的话帮助理解python生态圈～</p><p><strong>道生一，一生二，二生三，三生万物。</strong><br>－道 即是 type<br>－一 即是 metaclass(元类，或者叫类生成器)<br>－二 即是 class(类，或者叫实例生成器)<br>－三 即是 instance(实例)<br>－万物 即是 实例的各种属性与方法，我们平常使用python时，调用的就是它们。</p><p>在单例模式应用中，在创造类的过程中或者创造实例的过程中稍加控制达到最后产生的实例都是一个对象的目的。</p><p>使用 <strong>new</strong> 方法在创造实例时进行干预，达到实现单例模式的目的</p><figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs isbl"><span class="hljs-variable">class</span> <span class="hljs-function"><span class="hljs-title">Singleton</span>(<span class="hljs-variable"><span class="hljs-class">object</span></span>):</span><br><span class="hljs-function">    <span class="hljs-variable">_instance</span> = <span class="hljs-variable">None</span></span><br><span class="hljs-function">    <span class="hljs-variable">def</span> <span class="hljs-title">__new__</span>(<span class="hljs-variable">cls</span>):</span><br><span class="hljs-function">        <span class="hljs-variable"><span class="hljs-keyword">if</span></span> <span class="hljs-variable">cls._instance</span> <span class="hljs-variable">is</span> <span class="hljs-variable">None</span>:</span><br><span class="hljs-function">            <span class="hljs-variable">cls._instance</span> = <span class="hljs-variable"><span class="hljs-class">object</span>.__new__</span>(<span class="hljs-variable">cls</span>)</span><br>        <span class="hljs-variable">return</span> <span class="hljs-variable">cls._instance</span><br>    <span class="hljs-variable">def</span> <span class="hljs-function"><span class="hljs-title">__init__</span>(<span class="hljs-variable">self</span>):</span><br><span class="hljs-function">        <span class="hljs-variable">pass</span></span><br><span class="hljs-function"></span><br><span class="hljs-function"><span class="hljs-variable">single</span> = <span class="hljs-title">Singleton</span>()</span><br><span class="hljs-variable">single2</span> = <span class="hljs-function"><span class="hljs-title">Singleton</span>()</span><br><span class="hljs-function"><span class="hljs-title">print</span>(<span class="hljs-title">id</span>(<span class="hljs-variable">single</span>)==<span class="hljs-title">id</span>(<span class="hljs-variable">single2</span>))</span><br></code></pre></td></tr></table></figure><h4 id="总结："><a href="#总结：" class="headerlink" title="总结："></a><strong>总结：</strong></h4><p>１.什么是单例模式？<br>单例是一种设计模式，应用该模式的类只会生成一个实例。<br>２.为什么要用单例模式？<br>举例：一款游戏软件只能有一个控制面板<br>３.怎么实现单例模式？<br>　函数装饰器实现单例<br>　类装饰器实现单例<br>　<strong>new</strong> 关键字实现单例</p><hr><p>参考：<br><a href="https://blog.csdn.net/qq_40523737/article/details/81107089">Python单例模式(Singleton)的N种实现</a><br><a href="http://python.jobbole.com/88795/">两句话掌握 Python 最难知识点——元类</a><br><a href="http://www.runoob.com/w3cnote/python-func-decorators.html">Python 函数装饰器</a></p><hr><iframe src="https://rawcdn.githack.com/YUTING0907/donate-page-yu/df1732a5993401f9d372918c3f7680ca0e1c2ca3/simple/index.html " style="overflow-x:hidden;overflow-y:hidden; border:0xp none #fff; min-height:240px; width:100%;"  frameborder="0" scrolling="no"></iframe></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Machine Learning-笔记 -XGBoost教程</title>
    <link href="/posts/2019/03/10463353.html"/>
    <url>/posts/2019/03/10463353.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><h3 id="【1】前言"><a href="#【1】前言" class="headerlink" title="【1】前言"></a>【1】前言</h3><ul><li>XGBoost, 全名(eXtreme Gradient Boosting)，Kaggle大杀器，在数据挖掘比赛上，Everybody knows it！！！</li><li>XGBoost作者：陈天奇（华盛顿大学）</li><li>XGBoost前身:XGBoost是Boosting算法的其中一种,是在GBDT的基础上进行改进，使之更强大，适用于更大范围.</li><li>算法发布时间在2014年</li></ul><hr><p>本文适用对象：<br>1.了解决策树族群：决策森林，Adaboost，GBDT等<br>2.了解bagging，boosting<br>3.准备在机器学习道路上越走越远的朋友<br>4.高能数学预警：泰勒公式、梯度下降法了解一下下，但是我是不愿意看这些深奥的数学公式。</p><p>链接：<br><a href="https://github.com/YUTING0907/Markdown_pic/blob/master/xgboost/BoostedTree.pdf">【天奇大神PPT传送门】</a></p><hr><h3 id="【2】算法原理简述"><a href="#【2】算法原理简述" class="headerlink" title="【2】算法原理简述"></a>【2】算法原理简述</h3><h5 id="1-Review-of-key-concepts-of-supervised-learning-监督学习到底在学什么"><a href="#1-Review-of-key-concepts-of-supervised-learning-监督学习到底在学什么" class="headerlink" title="(1)Review of key concepts of supervised learning | 监督学习到底在学什么"></a><strong>(1)Review of key concepts of supervised learning | 监督学习到底在学什么</strong></h5><ul><li>label(标签)<br>根据带有标签的数据学习出一套规则，给另外没有标签的测试集打上标签。</li><li>假设函数(Hypothesis)</li><li>目标函数（Objective Function）&#x3D; 损失函数(Cost Function) + 正则化（Regularization）</li><li>minimize Objective Function 最小化目标函数</li></ul><p>在监督学习算法学习的过程中，其实就是最小化目标函数的过程，找到让目标函数最小化的一组参数。其中：</p><ul><li>损失函数表示模型对训练数据的拟合程度，loss越小，代表模型预测的越准.</li><li>正则化项衡量模型的复杂度，regularization越小，代表模型模型的复杂度越低。</li><li>目标函数越小，代表模型越好</li></ul><h5 id="2-Regression-Tree-and-Ensemble-决策树在做什么"><a href="#2-Regression-Tree-and-Ensemble-决策树在做什么" class="headerlink" title="(2) Regression Tree and Ensemble | 决策树在做什么"></a><strong>(2) Regression Tree and Ensemble | 决策树在做什么</strong></h5><ul><li>一种模仿人类做决定的思维方式构建的算法</li><li>信息增益（Information Gain）：决定分裂节点，主要是为了减少损失loss</li><li>最大深度：会影响模型复杂度</li><li>树的剪枝：主要为了减少模型复杂度，而复杂度被‘树枝的数量’影响</li><li>回归树不止用于做回归，还可以做分类、排序等，主要依赖于目标函数的定义</li></ul><h5 id="3-Gradient-Boosting-How-do-we-learn"><a href="#3-Gradient-Boosting-How-do-we-learn" class="headerlink" title="(3) Gradient Boosting(How do we learn)"></a><strong>(3) Gradient Boosting(How do we learn)</strong></h5><p>XGBoost 与前身 GBDT比较优势在于</p><ul><li><strong>1.损失函数</strong>：GBDT是一阶，XGB是二阶泰勒展开</li><li><strong>2.XGB的损失函数可以自定义</strong></li><li><strong>3.XGB加入正则</strong>：XGB的目标函数进行了优化，有正则项，减少过拟合，控制模型复杂度</li><li><strong>4.XGB运行速度快</strong>：决策树的学习最耗时的一个步骤就是对特征的值进行排序,在进行节点的分裂的时候，需要计算每个特征的增益。Xgboost在训练之前，预先对数据进行了排序，然后保存为block结构，后面的迭代中重复使用这个结构，大大减小计算量。各个特征的增益计算就可以开多线程进行。</li><li><strong>5.内置交叉验证</strong>: 允许每轮boosting迭代中用交叉检验，以便获取最优 Boosting_n_round 迭代次数，可利用网格搜索grid search和交叉检验cross validation进行调参。</li><li><strong>6.预剪枝：</strong><br>GBDT：分裂到负损失，分裂停止;<br> XGB：一直分裂到指定的最大深度（max_depth），然后回过头剪枝。如某个点之后不再正值，去除这个分裂。优点是，当一个负损失(-2)后存在一个正损失(+10)，(-2+10&#x3D;8&gt;0)求和为正，保留这个分裂。</li></ul><h3 id="【3】参数说明"><a href="#【3】参数说明" class="headerlink" title="【3】参数说明"></a>【3】参数说明</h3><p>  XGBoost的参数多到让人发指，下面只列举部分常用参数，所有参数的官方说明文档，请点击<a href="https://xgboost.readthedocs.io/en/latest/parameter.html">官方文档说明</a><br>  XGBoost的参数可以归为3类：</p><h5 id="1-General-parameters-通用参数"><a href="#1-General-parameters-通用参数" class="headerlink" title="(1) General parameters 通用参数"></a><strong>(1) General parameters 通用参数</strong></h5><p>该参数控制在提升（boosting）过程中使用哪种booster，常用的booster有树模型（tree）和线性模型（linear model）</p><ul><li><strong>booster [default&#x3D;gbtree]</strong><br> 有两种模型可以选择gbtree和gblinear。gbtree使用基于树的模型进行提升计算，gblinear使用线性模型进行提升计算。缺省值为gbtree</li><li><strong>silent [default&#x3D;0]</strong><br>取0时表示打印出运行时信息，取1时表示以缄默方式运行，不打印运行时的信息。缺省值为0</li><li><strong>nthread</strong> [default to maximum number of threads available if not set] <ul><li>XGBoost运行时的线程数。缺省值是当前系统可以获得的最大线程数。</li><li>如果你希望以最大速度运行，建议不设置这个参数，模型将自动获得最大线程</li></ul></li><li><strong>num_pbuffer</strong> [set automatically by xgboost, no need to be set by user]<br>size of prediction buffer, normally set to number of training instances. The buffers are used to save the prediction results of last boosting step.</li><li><strong>num_feature</strong> [set automatically by xgboost, no need to be set by user]<br>  boosting过程中用到的特征维数，设置为特征个数。XGBoost 会自动设置，不需要手工设置</li></ul><h5 id="2-Booster-parameters参数"><a href="#2-Booster-parameters参数" class="headerlink" title="(2) Booster parameters参数"></a><strong>(2) Booster parameters参数</strong></h5><ul><li><strong>Parameters for Tree Booster</strong><br> - <strong>eta [default&#x3D;0.3]</strong><br>     - 为了防止过拟合，更新过程中用到的收缩步长。在每次提升计算之后，算法会直接获得新特征的权重。 eta通过缩减特征的权重使提升计算过程更加保守。<br> 通常最后设置eta为0.01~0.2<br>     - 取值范围为：[0,1]<ul><li><strong>gamma [default&#x3D;0]</strong><br>  - minimum loss reduction required to make a further partition on a leaf node of the tree. the larger, the more conservative the algorithm will be <strong>；</strong><br>  - range: [0,∞] <strong>；</strong><br>   -  模型在默认情况下，对于一个节点的划分只有在其loss function 得到结果大于0的情况下才进行，而gamma 给定了所需的最低loss function的值 <strong>；</strong><br>     - gamma值使得算法更conservation，且其值依赖于loss function ，在模型中应该进行调参 <strong>。</strong></li><li><strong>max_depth [default&#x3D;6]</strong><br>  - 树的最大深度。缺省值为6 <strong>；</strong><br>  - 取值范围为：[1,∞] <strong>；</strong><br>  - 指树的最大深度 <strong>；</strong><br>  - 树的深度越大，则对数据的拟合程度越高（过拟合程度也越高）。即该参数也是控制过拟合 <strong>；</strong><br>   - 建议通过交叉验证（xgb.cv ) 进行调参 <strong>；</strong><br>  通常取值：3-10 <strong>；</strong></li><li><strong>min_child_weight [default&#x3D;1]</strong><br>-  孩子节点中最小的样本权重和。如果一个叶子节点的样本权重和小于min_child_weight则拆分过程结束。在现行回归模型中，这个参数是指建立每个模型所需要的最小样本数。该成熟越大算法越conservative。即调大这个参数能够控制过拟合 <strong>;</strong><ul><li>取值范围为: [0,∞]</li></ul></li><li><strong>max_delta_step [default&#x3D;0]</strong> <ul><li>如果取值为0，那么意味着无限制。如果取为正数，则其使得xgboost更新过程更加保守。</li><li>取值范围为：[0,∞]</li><li>通常不需要设置这个值，但在使用logistics 回归时，若类别极度不平衡，则调整该参数可能有效果</li></ul></li><li>subsample [default&#x3D;1] <ul><li>用于训练模型的子样本占整个样本集合的比例。如果设置为0.5则意味着XGBoost将随机的从整个样本集合中抽取出50%的子样本建立树模型，这能够防止过拟合。</li><li>取值范围为：(0,1]</li></ul></li><li>colsample_bytree [default&#x3D;1]<br>  在建立树时对特征随机采样的比例。缺省值为1</li><li>colsample_bylevel[default&#x3D;1]<br> 通常不使用，因为subsample和colsample_bytree已经可以起到相同的作用了</li></ul></li><li><strong>Parameters for Linear Booster and Tweedie Regression</strong><ul><li><strong>lambda [default&#x3D;0]</strong><br>  L2 正则的惩罚系数<br>  用于处理XGBoost的正则化部分。通常不使用，但可以用来降低过拟合</li><li><strong>alpha [default&#x3D;0]</strong><br>  L1 正则的惩罚系数<br>  当数据维度极高时可以使用，使得算法运行更快。</li><li><strong>lambda_bias</strong><br>  在偏置上的L2正则。缺省值为0（在L1上没有偏置项的正则，因为L1时偏置不重要）</li></ul></li></ul><h5 id="3-Learning-Task-parameters"><a href="#3-Learning-Task-parameters" class="headerlink" title="(3) Learning Task parameters"></a><strong>(3) Learning Task parameters</strong></h5><ul><li><p><strong>objective [ default&#x3D;reg:linear ]</strong></p><ul><li>“reg:linear” –线性回归。</li><li>“reg:logistic” –逻辑回归。</li><li>“binary:logistic” –二分类的逻辑回归问题，输出为概率。</li><li>“binary:logitraw” –二分类的逻辑回归问题，输出的结果为wTx。</li><li>“count:poisson” –计数问题的poisson回归，输出结果为poisson分布。<br>   在poisson回归中，max_delta_step的缺省值为0.7。(used to safeguard optimization)</li><li>“multi:softmax” –让XGBoost采用softmax目标函数处理多分类问题，同时需要设置参数num_class（类别个数）</li><li>“multi:softprob” –和softmax一样，但是输出的是ndata * nclass的向量，可以将该向量reshape成ndata行nclass列的矩阵。每行数据表示样本所属于每个类别的概率。</li><li>“rank:pairwise” –set XGBoost to do ranking task by minimizing the pairwise loss</li></ul></li><li><p><strong>base_score [ default&#x3D;0.5 ]</strong><br>the initial prediction score of all instances, global bias</p></li><li><p><strong>eval_metric [ default according to objective ]</strong><br>  校验数据所需要的评价指标，不同的目标函数将会有缺省的评价指标（rmse for regression, and error for classification, mean average precision for ranking）</p><ul><li>“rmse”: root mean square error</li><li>“logloss”: negative log-likelihood</li><li>“error”: Binary classification error rate. It is calculated as #(wrong cases)&#x2F;#(all cases). For the predictions, the evaluation will regard the instances with prediction value larger than 0.5 as positive instances, and the others as negative instances.</li><li>“merror”: Multiclass classification error rate. It is calculated as #(wrong cases)&#x2F;#(all cases).</li><li>“mlogloss”: Multiclass logloss</li><li>“auc”: Area under the curve for ranking evaluation</li><li>“ndcg”:Normalized Discounted Cumulative Gain</li><li>“map”:Mean average precision</li></ul></li><li><p><strong>seed [ default&#x3D;0 ]</strong><br><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/aOr8BZHt*q6uyFpj2aEFCLoBAyu*6MYDD*iL8zMnsK8!/b/dDQBAAAAAAAA&bo=ZQEYAQAAAAADF08!&rf=viewer_4&t=5"></p></li></ul><hr><h3 id="【4】代码实现：python"><a href="#【4】代码实现：python" class="headerlink" title="【4】代码实现：python"></a>【4】代码实现：python</h3><h5 id="1-API接口说明"><a href="#1-API接口说明" class="headerlink" title="(1)API接口说明"></a><strong>(1)API接口说明</strong></h5><p>目前为止，xgb model 有两个接口</p><ul><li>import xgboost </li><li>from xgboost import XGBClassifier</li></ul><h5 id="2-XGBoost调参"><a href="#2-XGBoost调参" class="headerlink" title="(2) XGBoost调参"></a><strong>(2) XGBoost调参</strong></h5><ul><li>方法一：直接调参，调用 xgboost包 的 XGBClassifier()<br>可以对其参数进行手动修改，default参数如下<br><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/TLeI9lRonq7NAgF68hz5M8bI.ExHoesibyN39nBmL2w!/b/dL8AAAAAAAAA&bo=PQJ0AAAAAAADF3k!&rf=viewer_4&t=5"></li><li>方法二： 随机调参。<br>使用 xgb.cv，这里同样可以使用KFold()</li></ul><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-keyword">from</span> sklearn.cross_validation import KFold<br>kf = KFold(len(train_feat), <span class="hljs-attribute">n_folds</span>=5, <span class="hljs-attribute">shuffle</span>=<span class="hljs-literal">True</span>, <span class="hljs-attribute">random_state</span>=520)<br><span class="hljs-keyword">for</span> i, (train_index, test_index) <span class="hljs-keyword">in</span> enumerate(kf):<br>        # 将测试集均分 取一份当测试集<br>xgb_train = xgb.DMatrix(train_feat[predictors].iloc[train_index], train_feat[label].iloc[train_index])<br>xgb_eval = xgb.DMatrix(train_feat[predictors].iloc[test_index], train_feat[label].iloc[test_index])<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;..........开始第&#123;&#125;轮训练&quot;</span>.format(i))<br></code></pre></td></tr></table></figure><p>注: xgb.cv()这里的cv()函数是进行了k折叠交叉验证，它不是一个参数搜索功能</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd<br><span class="hljs-keyword">import</span> xgboost <span class="hljs-keyword">as</span> xgb<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br><span class="hljs-keyword">import</span> random<br><span class="hljs-keyword">from</span> ggplot <span class="hljs-keyword">import</span> *<br><span class="hljs-keyword">import</span> seaborn <span class="hljs-keyword">as</span> sns<br><span class="hljs-keyword">from</span> sklearn.metrics <span class="hljs-keyword">import</span> accuracy_score, f1_score, precision_score, recall_score, classification_report, confusion_matrix,mean_squared_error<br><br>train_path = <span class="hljs-string">&#x27;D:/Pywork/Titanic/train.csv&#x27;</span><br>test_path = <span class="hljs-string">&#x27;D:/Pywork/Titanic/test.csv&#x27;</span><br>train = pd.read_csv(train_path)<br>test = pd.read_csv(test_path)<br><br><br>best_param = <span class="hljs-built_in">list</span>()<br>best_logloss = np.Inf<br>best_logloss_index = <span class="hljs-number">0</span><br>X_hote = pd.get_dummies(X_train)<br><span class="hljs-built_in">print</span>(X_hote.info())<br>dtrain = xgb.DMatrix(X_hote, y_train)<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">50</span>):<br>    xgb_params = &#123;<br>        <span class="hljs-string">&#x27;objective&#x27;</span>: <span class="hljs-string">&quot;binary:logistic&quot;</span>,<br>        <span class="hljs-string">&#x27;max_depth&#x27;</span>: np.random.randint(<span class="hljs-number">6</span>, <span class="hljs-number">11</span>), <span class="hljs-comment"># 构建树的深度，越大越容易过拟合</span><br>        <span class="hljs-string">&#x27;eta&#x27;</span>: np.random.uniform(<span class="hljs-number">.01</span>, <span class="hljs-number">.3</span>), <span class="hljs-comment"># 如同学习率</span><br>        <span class="hljs-string">&#x27;gamma&#x27;</span>: np.random.uniform(<span class="hljs-number">0.0</span>, <span class="hljs-number">0.2</span>),<span class="hljs-comment"># gamma最小损失调节范围</span><br>        <span class="hljs-string">&#x27;subsample&#x27;</span>: np.random.uniform(<span class="hljs-number">.6</span>, <span class="hljs-number">.9</span>), <span class="hljs-comment"># 随机采样训练样本</span><br>        <span class="hljs-string">&#x27;colsample_bytree&#x27;</span>: np.random.uniform(<span class="hljs-number">.5</span>, <span class="hljs-number">.8</span>), <span class="hljs-comment"># 生成树时进行的列采样</span><br>        <span class="hljs-string">&#x27;min_child_weight&#x27;</span>: np.random.randint(<span class="hljs-number">1</span>, <span class="hljs-number">41</span>),<br>        <span class="hljs-string">&#x27;max_delta_step&#x27;</span>: np.random.randint(<span class="hljs-number">1</span>, <span class="hljs-number">11</span>),<br>        <span class="hljs-string">&#x27;silent&#x27;</span>: <span class="hljs-number">1</span><br>    &#125;<br>    cv_nfold = <span class="hljs-number">5</span><br>    cv_nround = <span class="hljs-number">50</span><br>    bst_cv1 = xgb.cv(params=xgb_params,  <span class="hljs-comment"># 这是一个字典，里面包含着训练中的参数关键字和对应的值</span><br>                     dtrain=dtrain, <span class="hljs-comment"># 训练的数据</span><br>                     num_boost_round=cv_nround, <span class="hljs-comment"># 这是指提升迭代的个数</span><br>                      <span class="hljs-comment"># evals  这是一个列表，用于对训练过程中进行评估列表中的元素 evals = [(dtrain,’train’)]</span><br>                     <span class="hljs-comment"># feval,自定义评估函数</span><br>                     <span class="hljs-comment"># verbose_eval(可以输入布尔型或数值型)，也要求evals 里至少有 一个元素。</span><br>                     <span class="hljs-comment"># 如果为True ,则对evals中元素的评估结果会输出在结果中；如果输入数字，假设为5，则每隔5个迭代输出一次</span><br>                     nfold=cv_nfold,<br>                     seed=<span class="hljs-number">0</span>,<br>                     metrics=[<span class="hljs-string">&quot;auc&quot;</span>, <span class="hljs-string">&quot;rmse&quot;</span>, <span class="hljs-string">&quot;error&quot;</span>, <span class="hljs-string">&quot;logloss&quot;</span>],<br>                     maximize=<span class="hljs-literal">False</span>, <span class="hljs-comment"># 是否对评估函数进行最大化</span><br>                     early_stopping_rounds=<span class="hljs-number">10</span>,<br>                     verbose_eval=<span class="hljs-literal">None</span>,<br>                     )<br><br>    min_logloss = <span class="hljs-built_in">min</span>(bst_cv1[<span class="hljs-string">&#x27;test-logloss-mean&#x27;</span>])<br>    min_logloss_index = bst_cv1.index[bst_cv1[<span class="hljs-string">&#x27;test-logloss-mean&#x27;</span>] == <span class="hljs-built_in">min</span>(bst_cv1[<span class="hljs-string">&#x27;test-logloss-mean&#x27;</span>])][<span class="hljs-number">0</span>]<br><br>    <span class="hljs-keyword">if</span> min_logloss &lt; best_logloss:<br>        best_logloss = min_logloss<br>        best_logloss_index = min_logloss_index<br>        best_param = xgb_params<br><br>nround = best_logloss_index<br><span class="hljs-built_in">print</span>(best_logloss)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;best_round = %d&#x27;</span> % (nround))<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;best_param : ------------------------------&#x27;</span>)<br><span class="hljs-built_in">print</span>(best_param)  <span class="hljs-comment"># 显示最佳参数组合，到后面真正的模型要用</span><br>plt.figure()<br>plt.plot(bst_cv1[<span class="hljs-string">&#x27;train-logloss-mean&#x27;</span>], <span class="hljs-string">&#x27;g&#x27;</span>, label=<span class="hljs-string">&#x27;train&#x27;</span>)<br>plt.plot(bst_cv1[<span class="hljs-string">&#x27;test-logloss-mean&#x27;</span>], <span class="hljs-string">&#x27;r&#x27;</span>, label=<span class="hljs-string">&#x27;test&#x27;</span>)<br><span class="hljs-built_in">print</span>(plt.show())<br></code></pre></td></tr></table></figure><ul><li>方法三：使用 gridsearch 和 cross validation</li></ul><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs stylus">from sklearn<span class="hljs-selector-class">.grid_search</span> import GridSearchCV<br>params = &#123;<span class="hljs-string">&#x27;max_depth&#x27;</span>:<span class="hljs-selector-attr">[i for i in range(2,7)]</span>,<span class="hljs-string">&#x27;n_estimators&#x27;</span>:<span class="hljs-selector-attr">[j for j in range(100,1100,200)]</span>,<span class="hljs-string">&#x27;learning_rate&#x27;</span>:<span class="hljs-selector-attr">[0.05,0.1,0.25,0.5,0.1]</span><br>         &#125;<br>xgbc_best = <span class="hljs-built_in">XGBClassifier</span>()<br>gs = <span class="hljs-built_in">GridSearchCV</span>(xgbc_best,params,n_jobs=-<span class="hljs-number">1</span>,cv=<span class="hljs-number">5</span>,verbose=<span class="hljs-number">1</span>)<br>gs<span class="hljs-selector-class">.fit</span>(X_train,y_train)<br></code></pre></td></tr></table></figure><h5 id="3-绘制-train-x2F-test-的-auc-x2F-rmse-x2F-error"><a href="#3-绘制-train-x2F-test-的-auc-x2F-rmse-x2F-error" class="headerlink" title="(3) 绘制 train&#x2F;test 的 auc&#x2F;rmse&#x2F;error"></a><strong>(3) 绘制 train&#x2F;test 的 auc&#x2F;rmse&#x2F;error</strong></h5><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs routeros">def xgb_plot(input, output):<br>    history = input<br>    train_history = history.iloc[:, 8:16].assign(id=[i+1 <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> history.index])<br>    train_history[<span class="hljs-string">&#x27;Class&#x27;</span>] = <span class="hljs-string">&#x27;train&#x27;</span><br>    test_history = history.iloc[:, 0:8].assign(id=[i+1 <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> history.index])<br>    test_history[<span class="hljs-string">&#x27;Class&#x27;</span>] = <span class="hljs-string">&#x27;test&#x27;</span><br>    train_history.columns = [<span class="hljs-string">&quot;auc_mean&quot;</span>, <span class="hljs-string">&quot;auc_std&quot;</span>, <span class="hljs-string">&quot;error_mean&quot;</span>, <span class="hljs-string">&quot;error_std&quot;</span>, <span class="hljs-string">&quot;logloss_mean&quot;</span>, <span class="hljs-string">&quot;logloss_std&quot;</span>, <span class="hljs-string">&quot;rmse_mean&quot;</span>, <span class="hljs-string">&quot;rmse_std&quot;</span>, <span class="hljs-string">&quot;id&quot;</span>, <span class="hljs-string">&quot;Class&quot;</span>]<br>    test_history.columns = [<span class="hljs-string">&quot;auc_mean&quot;</span>, <span class="hljs-string">&quot;auc_std&quot;</span>, <span class="hljs-string">&quot;error_mean&quot;</span>, <span class="hljs-string">&quot;error_std&quot;</span>, <span class="hljs-string">&quot;logloss_mean&quot;</span>, <span class="hljs-string">&quot;logloss_std&quot;</span>, <span class="hljs-string">&quot;rmse_mean&quot;</span>, <span class="hljs-string">&quot;rmse_std&quot;</span>, <span class="hljs-string">&quot;id&quot;</span>, <span class="hljs-string">&quot;Class&quot;</span>]<br>    his = pd.concat([train_history, test_history])<br><br>    <span class="hljs-keyword">if</span> output == <span class="hljs-string">&quot;auc&quot;</span>:<br>        his[<span class="hljs-string">&#x27;y_min_auc&#x27;</span>] = his[<span class="hljs-string">&#x27;auc_mean&#x27;</span>]-his[<span class="hljs-string">&#x27;auc_std&#x27;</span>]<br>        his[<span class="hljs-string">&#x27;y_man_auc&#x27;</span>] = his[<span class="hljs-string">&#x27;auc_mean&#x27;</span>]+his[<span class="hljs-string">&#x27;auc_std&#x27;</span>]<br>        auc = ggplot(his, aes(<span class="hljs-attribute">x</span>=<span class="hljs-string">&#x27;id&#x27;</span>, <span class="hljs-attribute">y</span>=<span class="hljs-string">&#x27;auc_mean&#x27;</span>, <span class="hljs-attribute">ymin</span>=<span class="hljs-string">&#x27;y_min_auc&#x27;</span>, <span class="hljs-attribute">ymax</span>=<span class="hljs-string">&#x27;y_man_auc&#x27;</span>, <span class="hljs-attribute">fill</span>=<span class="hljs-string">&#x27;Class&#x27;</span>))+geom_line()+geom_ribbon(alpha=0.5)+labs(x=&quot;nround&quot;,y=&#x27;&#x27;,title = <span class="hljs-string">&quot;XGB Cross Validation AUC&quot;</span>)<br>        return auc<br>    <span class="hljs-keyword">if</span> output == <span class="hljs-string">&quot;rmse&quot;</span>:<br>        his[<span class="hljs-string">&#x27;y_min_rmse&#x27;</span>] = his[<span class="hljs-string">&#x27;rmse_mean&#x27;</span>] - his[<span class="hljs-string">&#x27;rmse_std&#x27;</span>]<br>        his[<span class="hljs-string">&#x27;y_man_rmse&#x27;</span>] = his[<span class="hljs-string">&#x27;rmse_mean&#x27;</span>] + his[<span class="hljs-string">&#x27;rmse_std&#x27;</span>]<br>        rmse = ggplot(his, aes(<span class="hljs-attribute">x</span>=<span class="hljs-string">&#x27;id&#x27;</span>, <span class="hljs-attribute">y</span>=<span class="hljs-string">&#x27;rmse_mean&#x27;</span>, <span class="hljs-attribute">ymin</span>=<span class="hljs-string">&#x27;y_min_rmse&#x27;</span>, <span class="hljs-attribute">ymax</span>=<span class="hljs-string">&#x27;y_man_rmse&#x27;</span>, <span class="hljs-attribute">fill</span>=<span class="hljs-string">&#x27;Class&#x27;</span>)) + geom_line() + geom_ribbon(<span class="hljs-attribute">alpha</span>=0.5) + labs(<span class="hljs-attribute">x</span>=<span class="hljs-string">&quot;nround&quot;</span>, <span class="hljs-attribute">y</span>=<span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-attribute">title</span>=<span class="hljs-string">&quot;XGB Cross Validation RMSE&quot;</span>)<br>        return (rmse)<br>    <span class="hljs-keyword">if</span> output == <span class="hljs-string">&quot;error&quot;</span>:<br>        his[<span class="hljs-string">&#x27;y_min_error&#x27;</span>] = his[<span class="hljs-string">&#x27;error_mean&#x27;</span>] - his[<span class="hljs-string">&#x27;error_std&#x27;</span>]<br>        his[<span class="hljs-string">&#x27;y_man_error&#x27;</span>] = his[<span class="hljs-string">&#x27;error_mean&#x27;</span>] + his[<span class="hljs-string">&#x27;error_std&#x27;</span>]<br>        <span class="hljs-built_in">error</span> = ggplot(his, aes(<span class="hljs-attribute">x</span>=<span class="hljs-string">&#x27;id&#x27;</span>, <span class="hljs-attribute">y</span>=<span class="hljs-string">&#x27;error_mean&#x27;</span>, <span class="hljs-attribute">ymin</span>=<span class="hljs-string">&#x27;y_min_error&#x27;</span>, <span class="hljs-attribute">ymax</span>=<span class="hljs-string">&#x27;y_man_error&#x27;</span>, <span class="hljs-attribute">fill</span>=<span class="hljs-string">&#x27;Class&#x27;</span>)) + geom_line() + geom_ribbon(<span class="hljs-attribute">alpha</span>=0.5) + labs(<span class="hljs-attribute">x</span>=<span class="hljs-string">&quot;nround&quot;</span>, <span class="hljs-attribute">y</span>=<span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-attribute">title</span>=<span class="hljs-string">&quot;XGB Cross Validation ERROR&quot;</span>)<br>        return (error)<br></code></pre></td></tr></table></figure><ul><li>横坐标是迭代次数</li><li>train曲线和test曲线的相差程度，可以侧面反映模型复杂度，检验是否过拟合</li></ul><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">xgb_plot</span><span class="hljs-params">(bst_cv1, <span class="hljs-string">&#x27;auc&#x27;</span>)</span></span><br></code></pre></td></tr></table></figure><p><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/y8Dm0rNkvvoO4EXLCTQT*qSCvZwyBYPBvkZweT7h6ok!/b/dL4AAAAAAAAA&bo=EgQ3AgAAAAADFxE!&rf=viewer_4&t=5"></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">xgb_plot</span><span class="hljs-params">(bst_cv1,<span class="hljs-string">&#x27;rmse&#x27;</span>)</span></span><br></code></pre></td></tr></table></figure><p><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/0lHqHpsTCuA8173eyPQ7KXVLsk6NQI*DZPFBixu8APk!/b/dDYBAAAAAAAA&bo=HARvAgAAAAADF0c!&rf=viewer_4&t=5"></p><h5 id="4-建模，进行预测，打印评估指标"><a href="#4-建模，进行预测，打印评估指标" class="headerlink" title="(4) 建模，进行预测，打印评估指标"></a><strong>(4) 建模，进行预测，打印评估指标</strong></h5><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-comment"># 利用上面调参结果： best_param</span><br><br>md_1 = xgb.train(best_param, dtrain, <span class="hljs-attribute">num_boost_round</span>=nround)<br>dtest = xgb.DMatrix(X_test)<br>xgbc_y_predict = [1 <span class="hljs-keyword">if</span> value &gt;= 0.5 <span class="hljs-keyword">else</span> 0 <span class="hljs-keyword">for</span> value <span class="hljs-keyword">in</span> md_1.predict(dtest)]<br><br>accuracy = accuracy_score(y_test, xgbc_y_predict )<br>f1_score = f1_score(y_test,predictions)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Accuracy: %.2f%%&quot;</span> %(accuracy * 100.0))<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;F1 Score: %.2f%%&quot;</span> %(f1_score * 100.0))<br><br><span class="hljs-comment"># save model</span><br>md_1.save_model(<span class="hljs-string">&#x27;xgb.model&#x27;</span>)<br></code></pre></td></tr></table></figure><ul><li>方法二： 使用 XGBClassifier()</li></ul><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">md_2</span> = XGBClassifier(**best_param)                   # <span class="hljs-number">2</span>个*号，允许直接填入字典格式的param<br><span class="hljs-attribute">md_2</span>.fit(X_train, y_train)  <br><br><span class="hljs-attribute">ypred</span> = md_2.predict(X_test)<br><span class="hljs-attribute">predictions</span> =<span class="hljs-meta"> [round(value) for value in ypred]</span><br><br><span class="hljs-comment"># 打印评估指标</span><br><span class="hljs-attribute">MSE</span> = mean_squared_error(y_test, predictions)<br><span class="hljs-attribute">print</span>(<span class="hljs-string">&quot;MSE: %.2f%%&quot;</span> % (MSE * <span class="hljs-number">100</span>.<span class="hljs-number">0</span>))  <br><span class="hljs-attribute">accuracy</span> = accuracy_score(y_test, predictions)<br><span class="hljs-attribute">print</span>(<span class="hljs-string">&quot;Accuracy: %.2f%%&quot;</span> % (accuracy * <span class="hljs-number">100</span>.<span class="hljs-number">0</span>))<br><span class="hljs-attribute">f1_score</span> = f1_score(y_test, predictions)<br><span class="hljs-attribute">print</span>(<span class="hljs-string">&quot;F1 Score: %.2f%%&quot;</span> % (f1_score * <span class="hljs-number">100</span>.<span class="hljs-number">0</span>))<br></code></pre></td></tr></table></figure><h5 id="5-绘制Importance排序图"><a href="#5-绘制Importance排序图" class="headerlink" title="(5) 绘制Importance排序图"></a><strong>(5) 绘制Importance排序图</strong></h5><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">ax</span> = xgb.plot_importance(md_1, height=<span class="hljs-number">0</span>.<span class="hljs-number">5</span>)<br><span class="hljs-attribute">fig</span> = ax.figure<br><span class="hljs-attribute">fig</span>.set_size_inches(<span class="hljs-number">25</span>,<span class="hljs-number">20</span>)                  # 可调节图片尺寸和紧密程度<br><span class="hljs-attribute">plt</span>.show()<br></code></pre></td></tr></table></figure><h5 id="6-根据Importance进行特征筛选"><a href="#6-根据Importance进行特征筛选" class="headerlink" title="(6) 根据Importance进行特征筛选"></a><strong>(6) 根据Importance进行特征筛选</strong></h5><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-comment"># sorted(list(selection_model.booster().get_score(importance_type=&#x27;weight&#x27;).values()),reverse = True)</span><br><br>importance_plot = pd.DataFrame(&#123;<span class="hljs-string">&#x27;feature&#x27;</span>:list(X_train.columns),<span class="hljs-string">&#x27;importance&#x27;</span>:md_2.feature_importances_&#125;)<br>importance_plot = importance_plot.sort_values(<span class="hljs-attribute">by</span>=<span class="hljs-string">&#x27;importance&#x27;</span>)<br>importance_plot = importance_plot.reset.index(<span class="hljs-attribute">drop</span>=<span class="hljs-literal">True</span>)<br>thresholds = importance_plot.importance<br>thresholds_valid = np.unique(thresholds[thresholds != 0])<br><br><br><span class="hljs-keyword">for</span> thresh <span class="hljs-keyword">in</span> thresholds_valid:<br><br># select features using threshold<br>selection = SelectFromModel(md_2, <span class="hljs-attribute">threshold</span>=thresh, <span class="hljs-attribute">prefit</span>=<span class="hljs-literal">True</span>)<br>select_X_train = selection.transform(X_train)<br># train model<br>selection_model = XGBClassifier(*<span class="hljs-number">*be</span>st_param)<br>selection_model.fit(select_X_train, y_train)<br># eval model<br>select_X_test = selection.transform(X_test)<br>y_pred = selection_model.predict(select_X_test)<br>predictions = [round(value) <span class="hljs-keyword">for</span> value <span class="hljs-keyword">in</span> y_pred]<br>accuracy = accuracy_score(y_test, predictions)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Thresh=%.4f, n=%d, Accuracy: %.2f%%&quot;</span> % (thresh, select_X_train.shape[1], accuracy<span class="hljs-number">*100</span>.0))<br><br><br>thresh = 0.034<br>selected_features = list(importance_plot[importance_plot.importance &gt; thresh][<span class="hljs-string">&#x27;feature&#x27;</span>])<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;selected features are :\n %s&#x27;</span>%selected_features)<br>select_X_train = X_train[selected_features]                        # 筛选Importance符合阈值的特征集<br><br>n_features = selected_X_train.shape[1]<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;total: %d features are selected&#x27;</span> %n_features)<br><br>selection_model = XGBClassifier(*<span class="hljs-number">*be</span>st_param)                                   <br>selection_model.fit(select_X_train, y_train)<br><br>select_X_test = X_test[selected_features]<br>y_pred = selection_model.predict(select_X_test)<br>predictions = [round(value) <span class="hljs-keyword">for</span> value <span class="hljs-keyword">in</span> y_pred]<br>accuracy = accuracy_score(y_test, predictions)<br>f1_score = f1_score(y_test, predictions)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Accuracy: %.2f%%&quot;</span> % (accuracy * 100.0))<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;F1 Score: %.2f%%&quot;</span> % (f1_score * 100.0))<br></code></pre></td></tr></table></figure><p>至于是先调参，再做变量筛选，还是先筛选后调参，或是反复调参反复筛选，纯凭个人喜号。</p><h5 id="7-绘制决策树"><a href="#7-绘制决策树" class="headerlink" title="(7)绘制决策树"></a><strong>(7)绘制决策树</strong></h5><p>参考:<a href="http://codewithzhangyi.com/2018/06/01/XGBOOST%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E/">codewithzhangyi.com</a><br>这里我没有绘制决策树，参考一个很棒的小姐姐个人网站，她的这篇文章中有写。</p><hr><p>参考：<br><a href="https://xgboost.readthedocs.io/en/latest/">官方使用手册</a><br><a href="http://codewithzhangyi.com/">codewithzhangyi.com</a><br><a href="https://www.cnblogs.com/wj-1314/p/9402324.html">Python机器学习笔记：XgBoost算法</a></p><hr><iframe src="https://rawcdn.githack.com/YUTING0907/donate-page-yu/df1732a5993401f9d372918c3f7680ca0e1c2ca3/simple/index.html " style="overflow-x:hidden;overflow-y:hidden; border:0xp none #fff; min-height:240px; width:100%;"  frameborder="0" scrolling="no"></iframe></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>Machine Learning</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Machine Learning</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Machine Learning-实战 Titanic生存预测</title>
    <link href="/posts/2019/03/1aaf565f.html"/>
    <url>/posts/2019/03/1aaf565f.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><p>本文是机器学习实战片,例子是kaggle上老经典的例子了，Titanic生存预测<br>目的是了解机器学习的大体流程。文末百度网盘链接中包含本文用到的数据集和代码。</p><p><strong>环境</strong><br>win8, python3,jupyter notebook</p><p><strong>目录</strong></p><ul><li>项目背景</li><li>数据概览</li><li>数据预处理</li><li>特征分析</li><li>特征工程</li><li>构建模型</li></ul><h3 id="1-项目背景"><a href="#1-项目背景" class="headerlink" title="1.项目背景"></a>1.项目背景</h3><p>泰坦尼克号是当时世界上体积最庞大内部设施最豪华的客运轮船，当时泰坦尼克号的乘船事件可谓轰动全球，相信大家都看过那部经典电影。泰坦尼克号将乘客分为三个等级: 三等舱位于船身较下层也最便宜，一等舱是整艘船最为昂贵奢华的部分，二等舱在其中间。在这次灾难中能否幸存下来难免会有些运气成分, 但是有些人比其他人更可能生存下来, 比如妇女, 儿童和上层阶级。在电影中出现过让”女人和孩子先走“的台词。</p><h3 id="2-数据概览"><a href="#2-数据概览" class="headerlink" title="2.数据概览"></a>2.数据概览</h3><p>项目共提供了两份数据，train.csv文件作为训练集构建与生存相关的模型；另一份test.csv文件则用作测试集, 用我们构建出来的模型预测生存情况.</p><table><thead><tr><th>字段</th><th>字段含义</th></tr></thead><tbody><tr><td>PassengerId</td><td>乘客编号</td></tr><tr><td>Survived</td><td>是否生还，0表示未生还，1表示生还</td></tr><tr><td>Pclass</td><td>船票种类，折射处乘客的社会地位，1表示上层阶级，2表示中层阶级，3表示底层阶级</td></tr><tr><td>Sex</td><td>性别，男性为male，女性为female</td></tr><tr><td>Age</td><td>年龄，不满1岁的年龄为小数</td></tr><tr><td>SibSp</td><td>该乘客同船的兄弟姐妹及配偶的数量</td></tr><tr><td>Parch</td><td>该乘客同船的父母以及儿女的数量</td></tr><tr><td>Ticket</td><td>船票编号</td></tr><tr><td>Fare</td><td>买票的费用</td></tr><tr><td>Cabin</td><td>船舱编号</td></tr><tr><td>Embarked</td><td>代表在哪里上的船</td></tr></tbody></table><h5 id="2-1读取数据："><a href="#2-1读取数据：" class="headerlink" title="2.1读取数据："></a>2.1读取数据：</h5><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs subunit">import pandas as pd<br>train = pd.read_csv(&#x27;..\train.csv&#x27;)<br><span class="hljs-keyword">test </span>= pd.read_csv(&#x27;..\test.csv&#x27;)<br></code></pre></td></tr></table></figure><h5 id="2-2查看前五行数据"><a href="#2-2查看前五行数据" class="headerlink" title="2.2查看前五行数据"></a>2.2查看前五行数据</h5><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs scss">train<span class="hljs-selector-class">.head</span>()<br></code></pre></td></tr></table></figure><p><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/5y42.3hfvuBqT3H9fdp*wG2wuqDV0eXAxUYHTvF*igc!/b/dL8AAAAAAAAA&bo=0wOxAAAAAAADF1M!&rf=viewer_4&t=5"></p><h5 id="2-3查看数据表整体信息"><a href="#2-3查看数据表整体信息" class="headerlink" title="2.3查看数据表整体信息"></a>2.3查看数据表整体信息</h5><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros">train.<span class="hljs-built_in">info</span>()<br>test.<span class="hljs-built_in">info</span>()<br></code></pre></td></tr></table></figure><p><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/nLZfras9IrjU4mJwrqA.zvkgTJ5MjqhlIWq4CcHL28A!/b/dLkAAAAAAAAA&bo=kAH.AQAAAAADF1w!&rf=viewer_4&t=5"></p><h3 id="3-数据预处理"><a href="#3-数据预处理" class="headerlink" title="3.数据预处理"></a>3.数据预处理</h3><p>训练集中 Age Embarked  Cabin有缺省值<br>测试集中 Age Fare Cabin有缺省值 但根据经验常识Cabin船舱编号排除在特征外</p><pre><code class="hljs">train[&#39;Embarked&#39;].value_counts()</code></pre><h4 id="3-1对缺失值进行填充"><a href="#3-1对缺失值进行填充" class="headerlink" title="3.1对缺失值进行填充"></a>3.1对缺失值进行填充</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs stylus">train<span class="hljs-selector-attr">[<span class="hljs-string">&#x27;Embarked&#x27;</span>]</span><span class="hljs-selector-class">.fillna</span>(<span class="hljs-string">&#x27;S&#x27;</span>,inplace=True)<br>train<span class="hljs-selector-attr">[<span class="hljs-string">&#x27;Age&#x27;</span>]</span><span class="hljs-selector-class">.fillna</span>(train<span class="hljs-selector-attr">[<span class="hljs-string">&#x27;Age&#x27;</span>]</span><span class="hljs-selector-class">.mean</span>(),inplace=True)<br>test<span class="hljs-selector-attr">[<span class="hljs-string">&#x27;Age&#x27;</span>]</span><span class="hljs-selector-class">.fillna</span>(test<span class="hljs-selector-attr">[<span class="hljs-string">&#x27;Age&#x27;</span>]</span><span class="hljs-selector-class">.mean</span>(),inplace=True)<br>test<span class="hljs-selector-attr">[<span class="hljs-string">&#x27;Fare&#x27;</span>]</span><span class="hljs-selector-class">.fillna</span>(test<span class="hljs-selector-attr">[<span class="hljs-string">&#x27;Fare&#x27;</span>]</span><span class="hljs-selector-class">.mean</span>(),inplace=True)<br></code></pre></td></tr></table></figure><h4 id="3-2类型转换"><a href="#3-2类型转换" class="headerlink" title="3.2类型转换"></a>3.2类型转换</h4><p>数据类型转换格式如下：运用函数astype()</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus">train<span class="hljs-selector-attr">[<span class="hljs-string">&#x27;Age&#x27;</span>]</span>  = train<span class="hljs-selector-attr">[<span class="hljs-string">&#x27;Age&#x27;</span>]</span><span class="hljs-selector-class">.astype</span>(int)<br></code></pre></td></tr></table></figure><h4 id="4-特征分析"><a href="#4-特征分析" class="headerlink" title="4.特征分析"></a>4.特征分析</h4><p>在11个特征中, 哪些是和幸存相关的呢?</p><ul><li>Sex<br>在泰坦尼克号的电影中，有句台词是让女人和小孩先走，这里的性别肯定相关性高了，我们看看数据</li></ul><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs clean"><span class="hljs-keyword">import</span> seaborn <span class="hljs-keyword">as</span> sns<br><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br><span class="hljs-keyword">from</span> pylab <span class="hljs-keyword">import</span> mpl<br>mpl.rcParams[<span class="hljs-string">&#x27;font.sans-serif&#x27;</span>] = [<span class="hljs-string">&#x27;SimHei&#x27;</span>]  #解决seaborn中文字体显示问题<br>plt.rcParams[<span class="hljs-string">&quot;figure.dpi&quot;</span>] =mpl.rcParams[<span class="hljs-string">&#x27;axes.unicode_minus&#x27;</span>] = <span class="hljs-literal">False</span> # 解决保存图像是负号<span class="hljs-string">&#x27;-&#x27;</span>显示为方块的问题<br>%matplotlib <span class="hljs-keyword">inline</span><br>train[train[<span class="hljs-string">&#x27;Survived&#x27;</span>]==<span class="hljs-number">1</span>].groupby(<span class="hljs-string">&#x27;Sex&#x27;</span>)[<span class="hljs-string">&#x27;Survived&#x27;</span>].value_counts()<br><br>sns.barplot(x=<span class="hljs-string">&#x27;Sex&#x27;</span>,y=<span class="hljs-string">&#x27;Survived&#x27;</span>,data=train)<br></code></pre></td></tr></table></figure><p><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/kVo0VoSsmHJzFU*SF572VUMNDvlUSNkOImvlrc*Joqc!/b/dL8AAAAAAAAA&bo=ewHfAAAAAAADF5c!&rf=viewer_4&t=5"><br>可以从柱状图中看出男女的生成比例很明显的不一样。所以Sex是一个强特征。</p><ul><li>Pclass 对于船舱等级, 一等舱是整个船最昂贵奢华的地方, 有钱人才能享受, 想必一等舱的有钱人比三等舱的穷人更容易幸存, 到底是不是呢? 用数据说话</li></ul><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus">sns<span class="hljs-selector-class">.pointplot</span>(<span class="hljs-attribute">x</span>=<span class="hljs-string">&#x27;Pclass&#x27;</span>,y=<span class="hljs-string">&#x27;Survived&#x27;</span>,hue=<span class="hljs-string">&#x27;Sex&#x27;</span>,data=train<br>              ,palette=&#123;<span class="hljs-string">&#x27;male&#x27;</span>:<span class="hljs-string">&#x27;blue&#x27;</span>,<span class="hljs-string">&#x27;female&#x27;</span>:<span class="hljs-string">&#x27;pink&#x27;</span>&#125;,markers=<span class="hljs-selector-attr">[<span class="hljs-string">&#x27;*&#x27;</span>,<span class="hljs-string">&#x27;o&#x27;</span>]</span>,linestyles=<span class="hljs-selector-attr">[<span class="hljs-string">&#x27;-&#x27;</span>,<span class="hljs-string">&#x27;--&#x27;</span>]</span>)<br></code></pre></td></tr></table></figure><p><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/ATQPPmZoeVRZ16JcGmjyBXPZ5OtYtLqjCgWWj6P*BlY!/b/dC8BAAAAAAAA&bo=awHjAAAAAAADF7s!&rf=viewer_4&t=5"><br>可以看到一等舱人员的幸存机会远大于三等舱, 果然和船舱等级相关.</p><ul><li><p>Age<br><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/O8Bvm6BCCjAFqnEfpKKyP5nODQ0JFDsPgEdDA4HnMSQ!/b/dLYAAAAAAAAA&bo=WAHmAAAAAAADF40!&rf=viewer_4&t=5"><br>可以看到女人普遍存活率都很高，男性在0-10岁之间存活率高，显然年龄是有影响的。</p></li><li><p>SibSp 从之前的描述性统计了解到, 兄弟姐妹与配偶的人数最多为8, 最少为0, 哪个更容易生存呢?<br><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/nwU24IyRk5CFZqTzKQLk*sv2Kx5Pblpabo86QfuzizA!/b/dL8AAAAAAAAA&bo=TgHjAAAAAAADF54!&rf=viewer_4&t=5"><br>可以看出关键时候，有兄弟姐妹和配偶的会提高存活几率，1到2个为宜，多了容易全部die</p></li><li><p>Parch 该乘客同船的父母以及儿女的数量,看看船上有父母孩子的存活率会不会更高呢？<br><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/2cyYwyi.A1J1OF0xnM014uLhb3hl8EeQVQifaBNbIYI!/b/dL8AAAAAAAAA&bo=egHkAAAAAAADF60!&rf=viewer_4&t=5"><br>由上图可以看吹1-3个存活率会更高，毕竟人多力量大。但这个力量也不能太大，太大容易翻船哈哈哈。</p></li></ul><h4 id="5-特征工程"><a href="#5-特征工程" class="headerlink" title="5.特征工程"></a>5.特征工程</h4><p>对分类特征进行向量化</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-comment">#采用DictVectorizer对特征向量化</span><br><span class="hljs-comment"># DictVectorizer为分类（也称为标称，离散）特征实现所谓的one-of-K或“one-hot（独热）”编码</span><br><span class="hljs-keyword">from</span> sklearn.feature_extraction import DictVectorizer<br>dict_vec = DictVectorizer(<span class="hljs-attribute">sparse</span>=<span class="hljs-literal">False</span>)<br>X_train = dict_vec.fit_transform(X_train.to_dict(<span class="hljs-attribute">orient</span>=<span class="hljs-string">&#x27;record&#x27;</span>))<br>X_test = dict_vec.fit_transform(X_test.to_dict(<span class="hljs-attribute">orient</span>=<span class="hljs-string">&#x27;record&#x27;</span>))<br><br><span class="hljs-comment"># 查看特征：dict_vec.feature_names_</span><br></code></pre></td></tr></table></figure><h4 id="6-构建模型"><a href="#6-构建模型" class="headerlink" title="6.构建模型"></a>6.构建模型</h4><p>使用随机森林和Xgboost分别进行模型训练</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs stylus">#从sklearn.ensemble中导入RandomForestClassifier<br>from sklearn<span class="hljs-selector-class">.ensemble</span> import RandomForestClassifier<br>#使用默认配置初始化RandomForestClassifier<br>rfc = <span class="hljs-built_in">RandomForestClassifier</span>()<br><br>#使用默认配置的RandomForestClassifier进行预测操作<br>rfc<span class="hljs-selector-class">.fit</span>(X_train,y_train)<br>rfc_y_predict = rfc<span class="hljs-selector-class">.predict</span>(X_test)<br>rfc_submission = pd<span class="hljs-selector-class">.DataFrame</span>(&#123;<span class="hljs-string">&#x27;PassengerId&#x27;</span>:test<span class="hljs-selector-attr">[<span class="hljs-string">&#x27;PassengerId&#x27;</span>]</span>,<span class="hljs-string">&#x27;Survived&#x27;</span>:rfc_y_predict&#125;)<br>rfc_submission<span class="hljs-selector-class">.to_csv</span>(<span class="hljs-string">&#x27;D:\\Pywork\\Titanic\\rfc_submission.csv&#x27;</span>,index=False)<br><br>from sklearn<span class="hljs-selector-class">.cross_validation</span> import cross_val_score<br>#使用<span class="hljs-number">5</span>折交叉验证的方法在训练集上分别对默认配置的RandomForestClassifier以及XGBClassifier进行性能评估，并获得平均分类准确性的得分<br><span class="hljs-function"><span class="hljs-title">cross_val_score</span><span class="hljs-params">(rfc,X_train,y_train,cv=<span class="hljs-number">5</span>)</span></span><span class="hljs-selector-class">.mean</span>()<br><br>#从流行包xgboost中导入XGBClassifier进行交叉验证<br>from xgboost import XGBClassifier<br>xgbc = <span class="hljs-built_in">XGBClassifier</span>()<br><span class="hljs-function"><span class="hljs-title">cross_val_score</span><span class="hljs-params">(xgbc,X_train,y_train,cv=<span class="hljs-number">5</span>)</span></span><span class="hljs-selector-class">.mean</span>()<br></code></pre></td></tr></table></figure><p>使用并行网络的方式寻找更好的超参数组合，以期待进一步提高XGBClassifier的预测性能</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs stylus">from sklearn<span class="hljs-selector-class">.grid_search</span> import GridSearchCV<br>params = &#123;<span class="hljs-string">&#x27;max_depth&#x27;</span>:<span class="hljs-selector-attr">[i for i in range(2,7)]</span>,<span class="hljs-string">&#x27;n_estimators&#x27;</span>:<span class="hljs-selector-attr">[j for j in range(100,1100,200)]</span>,<span class="hljs-string">&#x27;learning_rate&#x27;</span>:<span class="hljs-selector-attr">[0.05,0.1,0.25,0.5,0.1]</span><br>         &#125;<br>xgbc_best = <span class="hljs-built_in">XGBClassifier</span>()<br>gs = <span class="hljs-built_in">GridSearchCV</span>(xgbc_best,params,n_jobs=-<span class="hljs-number">1</span>,cv=<span class="hljs-number">5</span>,verbose=<span class="hljs-number">1</span>)<br>gs<span class="hljs-selector-class">.fit</span>(X_train,y_train)<br></code></pre></td></tr></table></figure><p>检查优化完成后的超参数配置<br>print(gs.best_score_)<br>print(gs.best_params_)</p><p>最后进行模型预测</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-comment">#使用经过超参数配置的XGBClassfier对测试数据的预测结果存储在文件xgbc_best_submission中</span><br>xgbc_best_y_predict = gs.predict(X_test)<br>xgbc_best_submission = pd.DataFrame(&#123;<span class="hljs-string">&#x27;PassengerId&#x27;</span>:test[<span class="hljs-string">&#x27;PassengerId&#x27;</span>],<span class="hljs-string">&#x27;Survived&#x27;</span>:xgbc_best_y_predict&#125;)<br><span class="hljs-comment">#将默认配置的RandomForestClassifier对测试数据的预测结果存储在文件rfc_submission.csv中。</span><br>xgbc_best_submission.to_csv(<span class="hljs-string">&#x27;D:\\Pywork\\Titanic\\xgbc_best_submission.csv&#x27;</span>,<span class="hljs-attribute">index</span>=<span class="hljs-literal">False</span>)<br></code></pre></td></tr></table></figure><p>想要以上涉及到的源代码可以联系我<br>邮箱:<a href="mailto:&#x79;&#117;&#116;&#105;&#110;&#x67;&#57;&#53;&#x39;&#55;&#64;&#49;&#54;&#x33;&#x2e;&#99;&#111;&#109;">&#x79;&#117;&#116;&#105;&#110;&#x67;&#57;&#53;&#x39;&#55;&#64;&#49;&#54;&#x33;&#x2e;&#99;&#111;&#109;</a><br>百度网盘：<a href="https://pan.baidu.com/s/1vGq4Et2gReM58Dr_1O-v3Q">https://pan.baidu.com/s/1vGq4Et2gReM58Dr_1O-v3Q</a> 密码：uoqv</p><p>参考文章：</p><hr><iframe src="https://rawcdn.githack.com/YUTING0907/donate-page-yu/df1732a5993401f9d372918c3f7680ca0e1c2ca3/simple/index.html " style="overflow-x:hidden;overflow-y:hidden; border:0xp none #fff; min-height:240px; width:100%;"  frameborder="0" scrolling="no"></iframe></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>Machine Learning</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Machine Learning</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>北上广深租房信息的爬取和分析</title>
    <link href="/posts/2019/03/c0dcb36.html"/>
    <url>/posts/2019/03/c0dcb36.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><p>本文通过爬取链家租房网站的租房信息，对北上广深一线城市的租房信息进行分析。</p><p>以下是本篇的思维导图<br><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/CINppwwjU78GvqcZ*S*yH7xxzLe5RuJHujdorHtoH.k!/b/dLYAAAAAAAAA&bo=7wUDBAAAAAADJ.8!&rf=viewer_4&t=5"></p><h3 id="数据爬取"><a href="#数据爬取" class="headerlink" title="数据爬取"></a>数据爬取</h3><p>准备工作：安装mongdb数据库，爬取到的数据将保存在mongdb数据库</p><h4 id="1-首先找到爬取数据的路口"><a href="#1-首先找到爬取数据的路口" class="headerlink" title="1.首先找到爬取数据的路口"></a>1.首先找到爬取数据的路口</h4><p>进入链家网的租房网站可以发现规律提取传参<br><a href="https://m.lianjia.com/chuzu/sh/zufang/xujiahui">https://m.lianjia.com/chuzu/sh/zufang/xujiahui</a><br>规律提取如下：<br><a href="https://m.lianjia.com/chuzu/%7B%7D/zufang/%7B%7D">https://m.lianjia.com/chuzu/{}/zufang/{}</a> 其中第一个花括号里面是传入城市的缩写如：上海-sh，广州-gz，北京-bj，深圳-sz,第二个括号里面传入区域例如上海的徐汇区-xuhui</p><p>后面发现如果按照区域爬取每区最多只能获得2000条数据，后来解决的办法是先爬取各区的商圈，最终以各区商圈来爬数据，那么商圈怎么爬取</p><p>可以在网页中查看代码信息发现商圈被写在data-key后面，这样用正则表达式re.findall()就可以获取商圈<br>“data-type&#x3D;&quot;bizcircle&quot; data-key&#x3D;&quot;(.*)&quot; class&#x3D;&quot;oneline &quot;&gt;”</p><h4 id="2-找到api数据接口"><a href="#2-找到api数据接口" class="headerlink" title="2.找到api数据接口"></a>2.找到api数据接口</h4><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">url = <span class="hljs-string">&#x27;https://app.api.lianjia.com/Rentplat/v1/house/list?city_id=&#123;&#125;&amp;condition=&#123;&#125;/rt&#123;&#125;&amp;limit=30&amp;offset=&#123;&#125;&amp;request_ts=&#123;&#125;&amp;scene=list&#x27;</span>.format(<span class="hljs-keyword">info</span>[<span class="hljs-number">0</span>], bc_name,type_code, idx*<span class="hljs-number">30</span>, <span class="hljs-type">int</span>(<span class="hljs-type">time</span>.time()))<br></code></pre></td></tr></table></figure><p>通过分析网页可以找到上面的api数据接口，其中<br>info[0]：110000(北京),310000(上海),440100(广州),440300(深圳)<br>bc_name：上面爬下来的商圈<br>type_code：（整租）200600000001、（合租）200600000002<br>idx:爬取的页数<br>time.time():当前时间戳</p><p>爬取到什么时候停止？当一页返回的条数小于30时，我们判断爬取完成。返回的条数在上面爬取上面链接中的数据里会有一个total，对应存的就是当页的条数</p><p>后面会用到经纬度制作租房地点的热力图，所以还需爬取经纬度信息。经纬度信息包含在上面返回的m_url网页中，还需要再爬取m_url一层，到这里数据爬取的分析工作基本完成</p><h3 id="3-数据保存"><a href="#3-数据保存" class="headerlink" title="3.数据保存"></a>3.数据保存</h3><p>将上面爬取到的数据保存在mongodb中,拿到mongodb连接对象，新建一个表，伪代码如下：</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs routeros"> host = os.environ.<span class="hljs-built_in">get</span>(<span class="hljs-string">&#x27;MONGODB_HOST&#x27;</span>, <span class="hljs-string">&#x27;127.0.0.1&#x27;</span>)  # 本地数据库<br><span class="hljs-built_in"> port </span>= os.environ.<span class="hljs-built_in">get</span>(<span class="hljs-string">&#x27;MONGODB_PORT&#x27;</span>, <span class="hljs-string">&#x27;27017&#x27;</span>)  # 数据库端口<br>mongo_url = <span class="hljs-string">&#x27;mongodb://&#123;&#125;:&#123;&#125;&#x27;</span>.format(host, port)<br>mongo_db = os.environ.<span class="hljs-built_in">get</span>(<span class="hljs-string">&#x27;MONGODB_DATABASE&#x27;</span>, <span class="hljs-string">&#x27;Lianjia&#x27;</span>)<span class="hljs-built_in"></span><br><span class="hljs-built_in">client </span>= MongoClient(mongo_url)<br>self.db = client[mongo_db]<br>self.db[<span class="hljs-string">&#x27;zufang&#x27;</span>].create_index(<span class="hljs-string">&#x27;m_url&#x27;</span>, <span class="hljs-attribute">unique</span>=<span class="hljs-literal">True</span>)  # 以m端链接为主键进行去重<br></code></pre></td></tr></table></figure><p>将需要存储的字段封装在item这个字典里，以upsert的方式更新在表里即可。</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus">self<span class="hljs-selector-class">.db</span><span class="hljs-selector-attr">[<span class="hljs-string">&#x27;zufang&#x27;</span>]</span><span class="hljs-selector-class">.update_one</span>(&#123;<span class="hljs-string">&#x27;m_url&#x27;</span>: item<span class="hljs-selector-attr">[<span class="hljs-string">&#x27;m_url&#x27;</span>]</span>&#125;, &#123;<span class="hljs-string">&#x27;$set&#x27;</span>: item&#125;, upsert=True)<br></code></pre></td></tr></table></figure><h3 id="数据清理"><a href="#数据清理" class="headerlink" title="数据清理"></a>数据清理</h3><p>数据清理的步骤一般包括</p><ul><li>去除不需要的数据</li><li>去除&#x2F;补全缺失数据</li><li>去除&#x2F;修改格式和内容错误的数据</li><li>去除&#x2F;修改逻辑错误的数据</li></ul><p><strong>去除不需要的数据</strong>：删除_id</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-comment"># 数据清洗</span><br><span class="hljs-comment"># 1. 去掉“_id”列</span><br><span class="hljs-built_in">del</span> <span class="hljs-keyword">data</span>[<span class="hljs-string">&#x27;_id&#x27;</span>]<br></code></pre></td></tr></table></figure><p>一般DataFrame会自动生成_id作为唯一标识，里面是随机生成的一串字符串<br><strong>去除&#x2F;补全缺失数据</strong>：将None值用numpy.nan填充</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"># <span class="hljs-string">&#x27;distance&#x27;</span>, <span class="hljs-string">&#x27;latitude&#x27;</span>, <span class="hljs-string">&#x27;longitude&#x27;</span>因为有None，需另外处理<br>def None_distance(<span class="hljs-keyword">data</span>):<br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">data</span> <span class="hljs-keyword">is</span> None:<br>        <span class="hljs-keyword">return</span> np.nan<br>    <span class="hljs-keyword">else</span>:int(<span class="hljs-keyword">data</span>)<br><br>def None_latlon(<span class="hljs-keyword">data</span>):<br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">data</span> <span class="hljs-keyword">is</span> None or <span class="hljs-keyword">data</span>==<span class="hljs-string">&#x27;&#x27;</span>:<br>        <span class="hljs-keyword">return</span> np.nan<br>    <span class="hljs-keyword">else</span>:<span class="hljs-keyword">return</span> float(<span class="hljs-keyword">data</span>)<br><span class="hljs-keyword">data</span>[<span class="hljs-string">&#x27;distance&#x27;</span>] = <span class="hljs-keyword">data</span>[<span class="hljs-string">&#x27;distance&#x27;</span>].apply(None_distance)<br><span class="hljs-keyword">data</span>[<span class="hljs-string">&#x27;latitude&#x27;</span>] = <span class="hljs-keyword">data</span>[<span class="hljs-string">&#x27;latitude&#x27;</span>].apply(None_latlon)<br><span class="hljs-keyword">data</span>[<span class="hljs-string">&#x27;longitude&#x27;</span>] = <span class="hljs-keyword">data</span>[<span class="hljs-string">&#x27;longitude&#x27;</span>].apply(None_latlon)<br></code></pre></td></tr></table></figure><p><strong>去除&#x2F;修改格式和内容错误的数据</strong>：</p><ul><li>在房屋大小的一列中，包含-，一个范围区间，同样的租金范围那一列里也有，这里将取左边右边两值得平均值.<figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-meta"># 5. rent_area观察excel里的样例数据发现 有的是个范围带有&#x27;-‘</span><br><span class="hljs-title">def</span> get_aver(<span class="hljs-class"><span class="hljs-keyword">data</span>):</span><br>    <span class="hljs-keyword">if</span> isinstance(<span class="hljs-class"><span class="hljs-keyword">data</span>,str) and &#x27;-&#x27; in <span class="hljs-keyword">data</span>:</span><br>        low,high = <span class="hljs-class"><span class="hljs-keyword">data</span>.split(&#x27;-&#x27;)</span><br>        return (int(low)+int(high))/<span class="hljs-number">2</span><br>    <span class="hljs-keyword">else</span>:<br>        return int(<span class="hljs-class"><span class="hljs-keyword">data</span>)</span><br><br><span class="hljs-class"><span class="hljs-keyword">data</span>[&#x27;rent_area&#x27;] = <span class="hljs-keyword">data</span>[&#x27;rent_area&#x27;].apply(<span class="hljs-title">get_aver</span>)</span><br></code></pre></td></tr></table></figure></li><li>数据类型转换<figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-meta"># 数据类型转换</span><br><span class="hljs-title">for</span> i <span class="hljs-keyword">in</span> [&#x27;bathroom_num<span class="hljs-string">&#x27;,&#x27;</span>bedroom_num<span class="hljs-string">&#x27;,&#x27;</span>hall_num<span class="hljs-string">&#x27;,&#x27;</span>rent_price_listing&#x27;]:<br>    <span class="hljs-class"><span class="hljs-keyword">data</span>[i] = <span class="hljs-keyword">data</span>[i].astype(<span class="hljs-title">int</span>)</span><br></code></pre></td></tr></table></figure><strong>去除&#x2F;修改逻辑错误的数据</strong>:<br>房间小于5平<br>卫生间异常多的数据<br>卧室异常多的数据</li></ul><h3 id="数据分析"><a href="#数据分析" class="headerlink" title="数据分析"></a>数据分析</h3><h4 id="1-各城市的租房分布怎么样？"><a href="#1-各城市的租房分布怎么样？" class="headerlink" title="1.各城市的租房分布怎么样？"></a>1.各城市的租房分布怎么样？</h4><p>看看北上广深房源都在哪个区域分布多，哪个区域少,首先来看看北京<br><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/GMDN4VjvYjZaZwcfnZxhPhjvA.hKs375oIDgXoyNoCA!/b/dMIAAAAAAAAA&bo=8gMUAgAAAAADN*U!&rf=viewer_4&t=5"><br><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/N17NpFmhtNQeYlB2ZPgzg9d7VE9mhnLkluLBJ5.I1.k!/b/dDcBAAAAAAAA&bo=nwYJBAAAAAADF6Y!&rf=viewer_4&t=5"><br>北京的租房房源一共有19068条，可以看到北京的房源主要集中在2环到四环内，其中朝阳区的房源最多，几乎占到北京所有房源的1&#x2F;3，丰台、海淀次之。</p><p><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/u6dXz3a7Rc38QFi3.iilLnLm2yam*ryEfoqC0.dcO2g!/b/dL8AAAAAAAAA&bo=*AMUAgAAAAADN*s!&rf=viewer_4&t=5"><br><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/Tyb*OkGycyZoa01js2At1JJ5Xk4hxAhObm78Jr2G*10!/b/dFMBAAAAAAAA&bo=NgYJBAAAAAADFw8!&rf=viewer_4&t=5"><br>上海房源数据一共有26115条，浦东占到快7000条，比例接近1&#x2F;4，在偏远地区金山崇明基本看不到房源。</p><p><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/*cYulEBdxoe7qDj1nIezaBH5zPxv0wx1NWBnYhPZPcg!/b/dDcBAAAAAAAA&bo=AQRAAgAAAAADN1U!&rf=viewer_4&t=5"><br><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/OwnbF0sPPq2VGAxPSIIS9RdqSI4XkUVuAdwXkX.VVcs!/b/dMAAAAAAAAAA&bo=IgYJBAAAAAADFxs!&rf=viewer_4&t=5"><br>广州的房源在四个城市中是最多的，一共有40022条。主要集中在天河、白云、番禺、增城以及珠海地区。其中天河、白云、番禺均超过7000条。<br><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/DZb6Jn4M.Wee3Cnt8P9ynH8PqikNrJQbofhykaG.KyE!/b/dLkAAAAAAAAA&bo=dgYJBAAAAAADF08!&rf=viewer_4&t=5"><br>深圳的房源共21638条，主要还是分布在南山区、龙岗区、宝安区以及福田区，龙华区。</p><h4 id="2-城市各区域的租金分布怎么样"><a href="#2-城市各区域的租金分布怎么样" class="headerlink" title="2.城市各区域的租金分布怎么样"></a>2.城市各区域的租金分布怎么样</h4><p><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/IOTmJbo1ouIDk*uRqQhf7pCU*uNIDqWcS1GPC57aCCk!/b/dMAAAAAAAAAA&bo=WAKQAQAAAAADF*k!&rf=viewer_4&t=5"><br>由图，北京每平方米租金top10的商圈，平均在200元左右，最贵的商圈在东单，每平方米要237元，也就是说要在东单住一个20平的房子，一个月需要4770元，组一个70平的房子，需要16590元.<br><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/L6U2bjCbvJGW6*qCRBIfD9yvKu4pHmXRXXZDPgrJdAw!/b/dLYAAAAAAAAA&bo=WAKQAQAAAAADF*k!&rf=viewer_4&t=5_"><br>上海每平方米平均租金top10的商区租金要比北京低一点，平均在170左右，其中租金最高的是新天地，租60平的房子需要10610元。</p><p><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/EtfpprPfUAn76SDpcuo9ZQT*ZLNIBj9C4*T66XAg*gk!/b/dLYAAAAAAAAA&bo=WAKQAQAAAAADF*k!&rf=viewer_4&t=5"><br>相比较北京和上海而言广州的每平方米租金的top10就更平易近人一点，除了二沙岛、人民北的房租贵一点，其他均在1500以下。<br><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/c6ci3ypvMrqS0JNYoZPSP.aZUxxlOJA9NcuDruTtiws!/b/dL8AAAAAAAAA&bo=WAKQAQAAAAADF*k!&rf=viewer_4&t=5"><br>深圳前10的商圈，深圳湾以193元每平方米领先，其次是香蜜湖和福田中心，大体上比上海每平方米少10元左右。</p><h4 id="3-房间大小对每平方米租金的影响"><a href="#3-房间大小对每平方米租金的影响" class="headerlink" title="3.房间大小对每平方米租金的影响"></a>3.房间大小对每平方米租金的影响</h4><p>北京<br><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/OG6kfRxwy2bGO1sV9Jcq4AeeW0Q3.8JJs7AAlePgoJA!/b/dMMAAAAAAAAA&bo=HAJvAQAAAAADF0I!&rf=viewer_4&t=5" alt="北京"><br>上海<br><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/GFde9NUrcISX3FCr*coiDFLrieKjKXVJqL*2uSOPUKw!/b/dLkAAAAAAAAA&bo=HAJvAQAAAAADF0I!&rf=viewer_4&t=5"><br>广州<br><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/jR3GLleCUyBlYnwkwwpncpu6PcrgSNp65jXZdY5uVCU!/b/dL8AAAAAAAAA&bo=HAJvAQAAAAADF0I!&rf=viewer_4&t=5"><br>深圳<br><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/cTalbuRWBs1YzeyImh3xlmyUXNkIr3rszDx6YT98ios!/b/dL8AAAAAAAAA&bo=HAJvAQAAAAADF0I!&rf=viewer_4&t=5"><br>由上面4张图可以知道不管在哪个城市，出租面积在10-20之间的房子每平方米的租金是最贵的。所以最划算的租房方式是找几个认识的小伙伴一起租大一点的房子。</p><h4 id="4-北上广深租房时房客更看重什么？"><a href="#4-北上广深租房时房客更看重什么？" class="headerlink" title="4.北上广深租房时房客更看重什么？"></a>4.北上广深租房时房客更看重什么？</h4><p>以下是北上广深四大城市房源最多的3种户型<br><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/S6KSz8Q5oZvvsTPEcHY*J6YzWkiYOHJU7ktlMbWZEtU!/b/dLgAAAAAAAAA&bo=WAKQAQAAAAADF*k!&rf=viewer_4&t=5"><br><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/OQFaF0tIYMFX3vv*O3zV35NG8xq8t9F6E1G6GIFdvA8!/b/dLYAAAAAAAAA&bo=WAKQAQAAAAADF*k!&rf=viewer_4&t=5"><br><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/spKDaHx2gWRWkm3XWBTeaGp8dnlwcaG.Wc4KwUEcK14!/b/dMMAAAAAAAAA&bo=WAKQAQAAAAADF*k!&rf=viewer_4&t=5"><br><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/OzlBub6076*dDI5Y71EtgCz4mZ1AS227jKIPIGA6Mpg!/b/dL4AAAAAAAAA&bo=WAKQAQAAAAADF*k!&rf=viewer_4&t=5"><br>可见北上广都偏爱2室1厅1卫的房子，而深圳一枝独秀，一室一卫的出租房比较多。整体来看四个城市都是小户型多。<br>最后根据房屋的标签进行统计，绘制了词云图。</p><p>北京租房词云图<br><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/16XgV.RpRZJf.FeZruq6aeVR3XegzICXmUhbNSNqUQA!/b/dFMBAAAAAAAA&bo=6ANsAgAAAAADF7c!&rf=viewer_4&t=5"><br>上海租房词云图<br><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/sLW7BFrXPXrGkgB1XQnQqjbpOp1YJxa0C6FcS.2CgEE!/b/dLkAAAAAAAAA&bo=6ANsAgAAAAADF7c!&rf=viewer_4&t=5"><br>广州租房词云图<br><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/CaadOj9Z*JRYYqdISpyoCifbYNlE.hWp6Y*BvAK7l2k!/b/dLYAAAAAAAAA&bo=6ANsAgAAAAADF7c!&rf=viewer_4&t=5"><br>深圳租房词云图<br><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/ynkJmSqSxlHwWQPnQhLC300HQxY.JgwnEnwvbV4E8gI!/b/dFQBAAAAAAAA&bo=6ANsAgAAAAADF7c!&rf=viewer_4&t=5"><br>可见北京不集中供暖可能会活不下去，hhhhhhh；<br>北上广深都看中离地铁近；<br>广州租房流行独栋公寓；<br>深圳、广州对租客性别有限制。</p><p>想要以上涉及到的源代码可以联系我<br>邮箱:<a href="mailto:&#121;&#117;&#x74;&#x69;&#110;&#x67;&#x39;&#53;&#57;&#x37;&#64;&#x31;&#54;&#51;&#46;&#x63;&#x6f;&#x6d;">&#121;&#117;&#x74;&#x69;&#110;&#x67;&#x39;&#53;&#57;&#x37;&#64;&#x31;&#54;&#51;&#46;&#x63;&#x6f;&#x6d;</a></p><p>参考文章：<br>公众号：Alfred数据室<br><a href="http://mp.weixin.qq.com/s?__biz=MzIyMDExNjE0Mg==&mid=2247483899&idx=1&sn=65252ed83b6040849ff35e4d7894f178&chksm=97d1a43aa0a62d2cdfea824ffe1a6dd0c8ac4e63b6a0e9646e5f5d8cb874f42c32cbd22ec165&mpshare=1&scene=23&srcid=0323DJGmpLoSbKuF1Ijqec46#rd">北上广深租房图鉴</a></p><hr><iframe src="https://rawcdn.githack.com/YUTING0907/donate-page-yu/df1732a5993401f9d372918c3f7680ca0e1c2ca3/simple/index.html " style="overflow-x:hidden;overflow-y:hidden; border:0xp none #fff; min-height:240px; width:100%;"  frameborder="0" scrolling="no"></iframe></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    
    <tags>
      
      <tag>Data Analysis</tag>
      
      <tag>爬虫</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>构建自己的投资理财体系(1.了解各种投资品)</title>
    <link href="/posts/2019/03/4445ff90.html"/>
    <url>/posts/2019/03/4445ff90.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><h3 id="一-培养理财意识"><a href="#一-培养理财意识" class="headerlink" title="一.培养理财意识"></a>一.培养理财意识</h3><p>   如果你问有什么技能是越早开始学习越好的，那投资理财一定算一项。因为越早开始享受复利的魔力越大。投资理财是在大学里面学不到的一门学问，但却又是越早学习越好的技能。</p><p> 下面给大家看一张图，体会一下复利的魔力。<br><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/grdO*7KalE3kSDIqutCBRnfrtQXbxC7v3j3OewWKlow!/b/dFYBAAAAAAAA&bo=9AGJAQAAAAARF10!&rf=viewer_4&t=5"><br>50年后，从图中可以看到单利和复利在财富上的巨大分野。巴菲特老爷爷曾经说过复利是世界第八大奇迹。<br><strong>That compound interest was the 8th Wonder of the World or something like that.</strong></p><p>所以理财是越早开始越好的，接下来看看复利的公式</p><ul><li>最终收益&#x3D; 本金* （1+ 收益率）^ 时间</li></ul><p>如果你还是大学生，或者刚毕业本金不够多，没关系我们开始时间早啊，赢在了时间上。然后再想办法让自己的本金变多，怎么让自己本金变多，积累第一笔资金的方法就是<strong>开源节流</strong>。在节流上：分清必要，需要，想要，在需要和想要上做减法。在开源上：可以去做做兼职，大学生嘛什么都不多就是时间多，但是在找兼职上也尽量找一些能提升自己能力的兼职。</p><p>看到这里大家应该都是有学习投资理财的意识的，很好这是开始学习的很重要的一步，在我去年刚开始学习投资理财的时候，有一个小伙伴说了这么一句话，**“在别人眼里看来改变旧观念就像传销一样，而我心甘情愿被理财传销”**。我最开始想要学习投资理财是因为，感觉每年过年回家然后再回上海，虽然新年伊始，但是你都几乎可以把年底你能赚的钱算死。这种感觉很可怕，不想生活就这么一眼可以看到头，这是我学习理财的初衷。</p><h4 id="时间的量化思维"><a href="#时间的量化思维" class="headerlink" title="时间的量化思维"></a>时间的量化思维</h4><p><strong>理财不仅是投资这么狭隘，更多的还有思维的建立。</strong><br>我们在日常生活中，对于开销的理解，多以金钱来量化，很少有人会把时间也计算在内，大多数人在工作和生活中，更多地注意金钱，而很少注意“时间”。有一则小故事讲的是，某位富翁不小心掉了几百美元，路人见状后告知，谁知他头也不回的走了，因为他心里在盘算，在弯腰把几百美元捡起来的这几秒钟时间里，他能赚到更多的钱。富人的财产可以高出普通人数千万倍，但其拥有的时间却无法高出普通人一倍。我们应该下意识的培养时间的量化思维，尽量花时间去武装大脑，而不是为了节约开支而浪费大把时间。</p><h4 id=""><a href="#" class="headerlink" title=""></a></h4><h4 id="分清资产和负债"><a href="#分清资产和负债" class="headerlink" title="分清资产和负债"></a>分清资产和负债</h4><p>穷人为什么穷？因为他们不断地买入负债或没有可持续利用价值的东西.<br>富人的第一个秘密：资产品种丰富，给自己带来更多收入，不用单一依靠工资！相对应的穷人的死穴：就是毫无任何资产可言！生活的唯一的经济支柱就是工资！什么是资产，什么是负债。《富爸爸和穷爸爸》里说过<br>资产就是能把钱放进你口袋里的东西，它能给你不断带来收入，而负债则是把钱从你口袋里取走的东西。我们应该尽量增加资产，减少负债。</p><h3 id="二-了解各种投资品及其风险"><a href="#二-了解各种投资品及其风险" class="headerlink" title="二.了解各种投资品及其风险"></a>二.了解各种投资品及其风险</h3><p><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/RdN7zRIpuSCik.TyJmhg0oLxsYl*qNBgwl8Ze8*iujs!/b/dL4AAAAAAAAA&bo=jASfAgAAAAARFzU!&rf=viewer_4&t=5"><br>这张投资金字塔图我觉得蛮经典的，列举了市面上常见的各种投资品，从金字塔的底部到金字塔顶部，越往上走风险越高。我们存在银行里的活期存款其实也算是一种投资方式，只是回报率很少而已。</p><p>下面来详细说明一下常见的投资品以及它们的特点：<br>首先从风险低的<strong>货币基金</strong>说起，说到货币基金可能大家很陌生，但是说到余额宝大家肯定都知道。余额宝就是货币基金的一种，它的运作方式是由基金公司把散户的钱集中起来，拿去做无风险的投资，买银行的大额存单或者定期存款什么的。但这厮因为拿到的钱多，就可以和银行叫板，自行商定利率，拿到更高的利息。这也是为什么比活期存款利息高的原因。除了大部分用来投资银行存款外，基金公司也会投资债券，票据之类的，投资方向都是很安全的。</p><p><strong>国债逆回购</strong><br>其实说白了就是借钱给别人，是一种短期贷款。个人把自己的资金借出去，获得固定的利息收益。借款人（一般都是大企业）用自己的国债（或达到一定评级的债券）作为抵押获得这笔借款，到期后还本付息。当市场缺钱（银行系统冲业绩、企业公司短期拆借）的时候，企业就会在各种渠道通过高额利息来借钱，国债逆回购就是其中一个渠道。年末季末月末，国债逆回购利率都会比较高。因为在你和借款人之间，既有债券的抵押，中间还有中国证券登记结算有限公司在监督管理，如果借款人还不出来钱，中登公司会帮你把钱要回来；<br><strong>所以它的特点是:安全，永不亏本.</strong><br>国债逆回购的品种一共有 18 种，沪、深两市各 9 种,沪市为国债逆回购，深市为企业债逆回购,上交所购买的品种，10w元起买，只有少量资金的就不适合沪市啦，深交所回购产品1000元起购。券商app里都可购买，参与国债逆回购的前提必须要开户。</p><p><strong>债券</strong>根据借款主体的不同可以分为国债、地方政府债、企业债。也就是国家、地方政府和企业向人民群众借钱，约定一个日期还本付息，自然而然风险也就低了，风险低，利息也就相应低一些了。一般债券收益率在5%-7%之间</p><p><strong>基金</strong>稍微有了解一点的就知道，基金分为货币基金，债券基金，混合基金和股票基金。其中<strong>货币基金</strong>和<strong>债券基金</strong>的篮子里面都是装的国债、地方政府债、公司债等，只不过不同点在于债券基金除了投资债券还可以投资股票，但是债券的占比必须要在80%以上。除了投资债券的比例不同，年限也不同，货币基金投资的一般是1年以内的短期债券，而债券基金则一般是1年以上的债券。<strong>股票基金</strong>因为投资股票的占比在80%以上，所以风险也是最高的。其中股票基金又包含被动投资的指数基金和主动性的主动股票基金，相当于是一篮子股票，有专业人士基金经理帮忙打理。<strong>指数基金</strong>是指追踪特定的指数，并按照这个指数成分股的比例买入同样的股票组合。在A股市场一共有5只主要的指数，</p><ul><li>上证50(由沪市规模大、流动性好的最具代表性的50只股票组成），</li><li>沪深300(由上海和深圳两个交易所所挑选出来的市值排名前300的上市公司组成)</li><li>中证500(沪深两市前800的上市公司中，前500入了沪深300，剩下的500家就组成了中证500指数）</li><li>创业板指数(专门在创业板上市的小型创业公司组成)</li><li>红利指数(由高分红的企业组成的指数)</li></ul><p><strong>股票</strong>这里举一个非常简化的例子帮助理解股票的本质，假设小明开了一家饼干店需要30万，但是钱不够还差10万，于是他来找你借钱，但是把这钱你说不用还，但是以后饼干店赚了钱三分之一的利润是我的。买了一家公司的股票你就成了这家公司的股东，能不能赚到钱，取决于这家公司的经营状况。</p><p><strong>P2P</strong> 就是民间借贷，银行借款的标准较高，所以催生出了个人借钱给个人的P2P。P2P平台就是小额资金直接融资的交易场所，但是由于目前征信系统不完善，去年就听到很多P2P公司跑路的新闻。所以对于这类产品能不碰就不碰。</p><p><strong>外汇 、期货 、贵金属 、实物收藏品</strong>这些都是风险极其高的产品，不懂行的人就不要轻易碰啦。</p><h3 id="三-培养自己的投资理财体系"><a href="#三-培养自己的投资理财体系" class="headerlink" title="三.培养自己的投资理财体系"></a>三.培养自己的投资理财体系</h3><h5 id="资产配置"><a href="#资产配置" class="headerlink" title="资产配置"></a>资产配置</h5><p>了解常见的投资品后，后期还需要在学习和实践中提炼一套适合自己的投资理财体系，首先涉及到资产配置。在这方面有一个著名的资产配置的方法就是标准普尔家庭配置象限图.<img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/qCXfz*iH4jtvXT.o9QphIOcOL7o1t5tovAqkabAbiW0!/b/dLkAAAAAAAAA&bo=8gHRAAAAAAADFxA!&rf=viewer_4&t=5"><br>在这张图上，把钱的用途分成了四份</p><ul><li>1.短期消费<br>这一部分钱用来作为短期消费，平时吃饭逛街买衣服看电影，偶尔出去旅行一次，买书学习等等，钱都从这里出，一般占家庭资产的 <strong>10%</strong>,它最大的要点：满足我们的短期消费。另外预留 3-6 个月的生活费作为应急金、梦想相册基金、短期内需要用到的钱</li><li>2.意外重疾保障<br>这个账户保障突发大额开销，一定要专款专用，保障在家庭成员出现意外事故、重大疾病时，有足够的钱来保命,一般占家庭资产的 **20%**，为的是以小博大</li><li>3.保本升值<br>也是长期收益账户。一般占家庭资产的 **40%**，为保障家庭成员的养老金、子女教育金、留给子女的钱等。这个账户重点是保本升值，一定要保证本金不能有损失，并要抵御通货膨胀的侵蚀，所以收益不一定很高，但却是长期稳定的。第四个账户其实很适合基金定投之类的投资，这就是一个很好的储蓄方式</li><li>4.重在收益<br>这个账户为家庭创造高收益，往往是通过你的智慧，用你最擅长的方式为家庭赚钱，包括你投资的股票、主动型基金、房产等,一般占家庭资产的 **30%**。通过投资来为家庭创造收益，用有风险的投资创造高回报。</li></ul><h5 id="股票投资流派"><a href="#股票投资流派" class="headerlink" title="股票投资流派"></a>股票投资流派</h5><p>做好了资产配置，你就需要找到自己的投资流派，你很多时候会听到周围人说我是投机者，股市行情好的时候，投机者跟着股市上涨的势头，炒一波短线，赚一波块钱，但这很容易踏空，因为股市不可预测，一不小心就买在了山顶。<br>我更倾向于价值投资，股市说到底是<strong>什么时候买，什么时候卖，买什么</strong>三件事情。买在相对低点，卖在相对高点。而价值投资对于资产的估值让我更清楚在低估的时候买，在高估的时候卖。短期来看，股价是由供求决定的。但长期来看，是由它的内在价值决定的。<br>那么<strong>价值投资赚的是谁的钱</strong>,这里有一个公式：<br>资产的收益 &#x3D; 胀 通货膨胀 + 出 自身产出 +  价格的波动<br>价值投资者赚的就是以上三部分的钱，一是央行放水的钱。二是优秀上市公司发展盈利带来的钱。三就是割韭菜的钱。</p><ul><li>央行放水。导致大量的钱涌入股市，助推股价高涨，通常发生在降息周期。同时央行放水，导致通货膨胀，最终导致资产价格的上涨。所以对抗通胀最好的办法是买入资产。</li><li>优秀上市公司发展盈利带来的钱。这个也很好理解。企业盈利之后的分红，公司净资产增加导致的股价上涨都是这部分钱。</li><li>格雷厄姆把股市比作市场先生，市场先生一会情绪高涨，一会情绪低落，反映到股价上，就是牛熊市的转换。正是因为市场的波动，给了价值投资者在低估时买入和高估时卖出的机会，从而取得超额收益。</li></ul><h3 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h3><p><strong>1.培养理财意识</strong><br>复利是世界第八大奇迹，理财越早开始，越能享受复利的魔力<br><strong>2.了解各种投资品及其风险</strong><br>货币基金、国债逆回购、债券、基金、股票、外汇、期货、贵金属风险从低到高<br><strong>3.培养自己的投资理财体系</strong><br>做好资产配置，做投资前一定想清楚其中的底层逻辑。买股票就是买入一家公司成为它的股东，搞清楚买什么？什么时候买？以及什么时候卖？</p><hr><iframe src="https://rawcdn.githack.com/YUTING0907/donate-page-yu/df1732a5993401f9d372918c3f7680ca0e1c2ca3/simple/index.html " style="overflow-x:hidden;overflow-y:hidden; border:0xp none #fff; min-height:240px; width:100%;"  frameborder="0" scrolling="no"></iframe></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    
    <tags>
      
      <tag>投资理财</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>《流浪地球》电影评论的爬取和分析</title>
    <link href="/posts/2019/03/541405ad.html"/>
    <url>/posts/2019/03/541405ad.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><p>本文在猫眼电影上爬取了《流浪地球》的上万评论,并对其评论进行分析</p><h3 id="爬虫-爬取数据"><a href="#爬虫-爬取数据" class="headerlink" title="爬虫-爬取数据"></a>爬虫-爬取数据</h3><h4 id="找到评论网页地址"><a href="#找到评论网页地址" class="headerlink" title="找到评论网页地址"></a>找到评论网页地址</h4><p>先打开猫眼官网找到《流浪地球》的介绍页面：<a href="https://maoyan.com/films/248906">https://maoyan.com/films/248906</a><br><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/DlzZZcnQmJlcg**2UJdVofzhw1drFquhmgZJnbTisuM!/b/dFIBAAAAAAAA&bo=ZwPdAQAAAAADJ7o!&rf=viewer_4&t=5" alt="在这里插入图片描述"></p><ul><li>打开开发者工具</li><li>转换成手机浏览(因为网页版的评论数据只显示部分短评)<br>点击红色箭头指向的位置，然后按F12键刷新，这时候我们就可以看到所有评论了<br><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/JRF2hjEvkSVM1lW8xlO5RUgFLHO1pGd2.PrJGm8oDog!/b/dDUBAAAAAAAA&bo=ywPFAQAAAAADFz4!&rf=viewer_4&t=5" alt="在这里插入图片描述"><h4 id="获取评论请求地址"><a href="#获取评论请求地址" class="headerlink" title="获取评论请求地址"></a>获取评论请求地址</h4>在点击打开“查看全部533685条讨论”后，屏幕上的评论往下拉，会发现浏览器的网络展示中会不断加载新页面，网络请求多出来了comments.json的请求：<br><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/t4bi2nk3sPPDCunbWpdBJSGco4pUaYEYjCC.RMMQjo0!/b/dL4AAAAAAAAA&bo=DQNIAgAAAAADF3Y!&rf=viewer_4&t=5"></li></ul><p>复制出几个comments.json页面的URL做比较寻找规律</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">http</span>://m.maoyan.com/review/v2/comments.json?movieId=<span class="hljs-number">248906</span>&amp;userId=-<span class="hljs-number">1</span>&amp;offset=<span class="hljs-number">0</span>&amp;limit=<span class="hljs-number">15</span>&amp;ts=<span class="hljs-number">0</span>&amp;level=<span class="hljs-number">2</span>&amp;type=<span class="hljs-number">3</span><br><span class="hljs-attribute">http</span>://m.maoyan.com/review/v2/comments.json?movieId=<span class="hljs-number">248906</span>&amp;userId=-<span class="hljs-number">1</span>&amp;offset=<span class="hljs-number">15</span>&amp;limit=<span class="hljs-number">15</span>&amp;ts=<span class="hljs-number">1552143388614</span>&amp;level=<span class="hljs-number">2</span>&amp;type=<span class="hljs-number">3</span><br><span class="hljs-attribute">http</span>://m.maoyan.com/review/v2/comments.json?movieId=<span class="hljs-number">248906</span>&amp;userId=-<span class="hljs-number">1</span>&amp;offset=<span class="hljs-number">30</span>&amp;limit=<span class="hljs-number">15</span>&amp;ts=<span class="hljs-number">1552143388614</span>&amp;level=<span class="hljs-number">2</span>&amp;type=<span class="hljs-number">3</span><br><br></code></pre></td></tr></table></figure><p>可以发现规律：</p><ul><li>初始页面的ts值为0,随后会有ts值，且保持不变。这里的ts是当前的时间戳,看、可以用如下代码查看</li></ul><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-comment">#coding:UTF-8</span><br>import <span class="hljs-keyword">time</span><br><span class="hljs-comment">#毫秒转换成秒</span><br>timeStamp = <span class="hljs-keyword">int</span>(<span class="hljs-number">1552143388614</span>/<span class="hljs-number">1000</span>)<br><span class="hljs-comment">#转换成localtime</span><br>localTime = time.localtime(timeStamp)<br><span class="hljs-comment">#转换成新的时间格式(2017-09-16 11:28:54)</span><br>strTime = time.strftime(<span class="hljs-string">&quot;<span class="hljs-variable">%Y</span>-<span class="hljs-variable">%m</span>-<span class="hljs-variable">%d</span> <span class="hljs-variable">%H</span>:<span class="hljs-variable">%M</span>:<span class="hljs-variable">%S</span>&quot;</span>, localTime)<br><span class="hljs-keyword">print</span>(strTime)<br></code></pre></td></tr></table></figure><ul><li>offset是请求评论开始的序号，limit为请求的条数</li></ul><p>再看返回的json结果：</p><ul><li>data.comments中是评论的具体内容</li><li>paging中通过hasMore来告诉我们是否还有更多（判断是否继续抓取）</li></ul><p><strong>构造请求url 方法一</strong></p><p>根据上面的分析，我们构造请求的url就很明确了：</p><ul><li>从offset&#x3D;0&amp;limit&#x3D;15开始</li><li>通过返回的paging.hasMore来判断是否继续抓取</li><li>下一个抓取的url中offset+&#x3D;limit</li></ul><p><strong>只能抓取1000条？！</strong></p><p>根据上述分析，在返回的json数据中是可以看到总评论数的，但是实际抓取的时候，在offset超过1000之后，返回的数据中hasMore就变成了false。</p><p>于是尝试通过浏览器一直下拉刷新，到达offset超过1000的情况，发现页面会不停的发送请求，但也无法获取数据。</p><p>那应该就是网站做了控制，不允许offset超过1000。</p><p><strong>构造请求URL 方法二</strong></p><p>那么就要考虑其他构造url的方法来抓取了。先观察下每个请求返回的信息：</p><p>发现每个comment里都包含有一个time信息，可以发现后台是按照时间顺序的，每分钟一个间隔，那么就可以考虑根据每次返回comment中的时间来更新url中的ts即可。</p><p>由于不确定每次请求返回的数据中包含了多长的时间段，且返回的第一个评论时间戳与第二个评论是不同的，所以抓取思路如下：</p><ul><li>获取请求数据</li><li>记录第一个时间戳</li><li>记录第二个时间戳</li><li>当遇到第三个时间戳时，将ts设置为第二个时间戳，重新构造url</li><li>如果单次抓取中每遇到第三个时间戳，则通过修改offset来继续抓取，直到遇到第三个时间戳</li></ul><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs vim">def parse_json(data):<br>    <span class="hljs-keyword">global</span> <span class="hljs-built_in">count</span><br>    <span class="hljs-keyword">global</span> offset<br>    <span class="hljs-keyword">global</span> limit<br>    <span class="hljs-keyword">global</span> <span class="hljs-keyword">ts</span><br>    ts_duration = <span class="hljs-keyword">ts</span><br>    <span class="hljs-keyword">res</span> = json.loads(data)<br>    comments = <span class="hljs-keyword">res</span>[<span class="hljs-string">&#x27;data&#x27;</span>][<span class="hljs-string">&#x27;comments&#x27;</span>]<br>    <span class="hljs-keyword">for</span> comment in comments:<br>        comment_time = comment[<span class="hljs-string">&#x27;time&#x27;</span>]<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">ts</span> == <span class="hljs-number">0</span>:<br>            <span class="hljs-keyword">ts</span> = comment_time<br>            ts_duration = comment_time<br>        <span class="hljs-keyword">if</span> comment_time != <span class="hljs-keyword">ts</span> <span class="hljs-built_in">and</span> <span class="hljs-keyword">ts</span> == ts_duration:<br>            ts_duration = comment_time<br>        <span class="hljs-keyword">if</span> comment_time !=ts_duration:<br>            <span class="hljs-keyword">ts</span> = ts_duration<br>            offset = <span class="hljs-number">0</span><br>            <span class="hljs-keyword">return</span> get_url()<br>        <span class="hljs-keyword">else</span>:<br>            content = comment[<span class="hljs-string">&#x27;content&#x27;</span>].strip().replace(<span class="hljs-string">&#x27;\n&#x27;</span>, <span class="hljs-string">&#x27;。&#x27;</span>)<br>            <span class="hljs-keyword">print</span>(<span class="hljs-string">&#x27;get comment &#x27;</span> + str(<span class="hljs-built_in">count</span>))<br>            <span class="hljs-built_in">count</span> += <span class="hljs-number">1</span><br>            write_txt(time.<span class="hljs-built_in">strftime</span>(<span class="hljs-string">&quot;%Y-%m-%d %H:%M:%S&quot;</span>,time.<span class="hljs-built_in">localtime</span>(comment_time/<span class="hljs-number">1000</span>)) + <span class="hljs-string">&#x27;##&#x27;</span> + content + <span class="hljs-string">&#x27;\n&#x27;</span>)<br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">res</span>[<span class="hljs-string">&#x27;paging&#x27;</span>][<span class="hljs-string">&#x27;hasMore&#x27;</span>]:<br>        offset += limit<br>        <span class="hljs-keyword">return</span> get_url()<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">return</span> None<br></code></pre></td></tr></table></figure><p>这里贴出另一个思路完整代码</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># coding: utf-8</span><br><br><span class="hljs-comment"># 导入爬虫所需工具库</span><br><span class="hljs-keyword">import</span> time,  random<br><span class="hljs-keyword">import</span> datetime <span class="hljs-keyword">as</span> dt<br><span class="hljs-keyword">import</span> requests<br><span class="hljs-keyword">import</span> json<br><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd<br><br><span class="hljs-comment"># 8个备用user_agents</span><br>user_agents = [<br>    &#123;<span class="hljs-string">&#x27;User-Agent&#x27;</span>: <span class="hljs-string">&#x27;MQQBrowser/26 Mozilla/5.0 (Linux; U; Android 2.3.7; zh-cn; MB200 Build/GRJ22;\</span><br><span class="hljs-string">            CyanogenMod-7) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1&#x27;</span>&#125;,<br>    &#123;<span class="hljs-string">&#x27;User-Agent&#x27;</span>: <span class="hljs-string">&#x27;Mozilla/5.0 (hp-tablet; Linux; hpwOS/3.0.0; U; en-US) AppleWebKit/534.6 \</span><br><span class="hljs-string">            (KHTML, like Gecko) wOSBrowser/233.70 Safari/534.6 TouchPad/1.0&#x27;</span>&#125;,<br>    &#123;<span class="hljs-string">&#x27;User-Agent&#x27;</span>: <span class="hljs-string">&#x27;Mozilla/5.0 (compatible; MSIE 9.0; Windows Phone OS 7.5;\</span><br><span class="hljs-string">            Trident/5.0; IEMobile/9.0; HTC; Titan)&#x27;</span>&#125;,<br>    &#123;<span class="hljs-string">&#x27;User-Agent&#x27;</span>: <span class="hljs-string">&#x27;Mozilla/5.0 (SymbianOS/9.4; Series60/5.0 NokiaN97-1/20.0.019;\</span><br><span class="hljs-string">            Profile/MIDP-2.1 Configuration/CLDC-1.1) AppleWebKit/525 (KHTML, like Gecko) BrowserNG/7.1.18124&#x27;</span>&#125;,<br>    &#123;<span class="hljs-string">&#x27;User-Agent&#x27;</span>: <span class="hljs-string">&#x27;Mozilla/5.0 (Linux; U; Android 3.0; en-us; Xoom Build/HRI39) \</span><br><span class="hljs-string">            AppleWebKit/534.13 (KHTML, like Gecko) Version/4.0 Safari/534.13&#x27;</span>&#125;,<br>    &#123;<span class="hljs-string">&#x27;User-Agent&#x27;</span>: <span class="hljs-string">&#x27;Mozilla/5.0 (iPod; U; CPU iPhone OS 4_3_3 like Mac OS X; en-us)\</span><br><span class="hljs-string">            AppleWebKit/533.17.9 (KHTML, like Gecko) Version/5.0.2 Mobile/8J2 Safari/6533.18.5&#x27;</span>&#125;,<br>    &#123;<span class="hljs-string">&#x27;User-Agent&#x27;</span>: <span class="hljs-string">&#x27;Mozilla/5.0 (iPad; U; CPU OS 4_3_3 like Mac OS X; en-us) \</span><br><span class="hljs-string">            AppleWebKit/533.17.9 (KHTML, like Gecko) Version/5.0.2 Mobile/8J2 Safari/6533.18.5&#x27;</span>&#125;,<br>    &#123;<span class="hljs-string">&#x27;User-Agent&#x27;</span>: <span class="hljs-string">&#x27;Mozilla/5.0 (Linux; U; Android 2.3.7; en-us; Nexus One Build/FRF91)\</span><br><span class="hljs-string">            AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1&#x27;</span>&#125;,<br>]<br><span class="hljs-comment"># 创建爬虫类</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">MovieSpider</span>(<span class="hljs-title class_ inherited__">object</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, filename</span>):<br>        <span class="hljs-variable language_">self</span>.headers = user_agents<br>        <span class="hljs-variable language_">self</span>.filename = filename<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_data</span>(<span class="hljs-params">self, header, url</span>):<br>        <span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">        功能：访问url的网址，获取网页内容并返回</span><br><span class="hljs-string">        参数：url,目标网页的url</span><br><span class="hljs-string">        返回：目标网页的html内容</span><br><span class="hljs-string">        &#x27;&#x27;&#x27;</span><br>        <span class="hljs-keyword">try</span>:<br>            r = requests.get(url, headers=header)<br>            r.raise_for_status()<br>            <span class="hljs-keyword">return</span> r.text<br>        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>            <span class="hljs-built_in">print</span>(e)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">parse_data</span>(<span class="hljs-params">self, html</span>):<br>        <span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">        功能：提取 html 页面信息中的关键信息，并整合一个数组并返回</span><br><span class="hljs-string">        参数：html 根据 url 获取到的网页内容</span><br><span class="hljs-string">        返回：存储有 html 中提取出的关键信息的数组</span><br><span class="hljs-string">        &#x27;&#x27;&#x27;</span><br>        json_data = json.loads(html)[<span class="hljs-string">&#x27;cmts&#x27;</span>]<br>        comments = []<br><br>        <span class="hljs-keyword">try</span>:<br>            <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> json_data:<br>                comment = []<br>                <span class="hljs-comment"># 提取影评中的6条数据：nickName(昵称),cityName(城市),content(评语)，</span><br>                <span class="hljs-comment"># score(评分),startTime(评价时间),gender(性别)</span><br>                comment.append(item[<span class="hljs-string">&#x27;nickName&#x27;</span>])<br>                comment.append(item[<span class="hljs-string">&#x27;cityName&#x27;</span>] <span class="hljs-keyword">if</span> <span class="hljs-string">&#x27;cityName&#x27;</span> <span class="hljs-keyword">in</span> item <span class="hljs-keyword">else</span> <span class="hljs-string">&#x27;&#x27;</span>)<br>                comment.append(item[<span class="hljs-string">&#x27;content&#x27;</span>].strip().replace(<span class="hljs-string">&#x27;\n&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>))<br>                comment.append(item[<span class="hljs-string">&#x27;score&#x27;</span>])<br>                comment.append(item[<span class="hljs-string">&#x27;startTime&#x27;</span>])<br>                comment.append(item[<span class="hljs-string">&#x27;gender&#x27;</span>] <span class="hljs-keyword">if</span> <span class="hljs-string">&#x27;gender&#x27;</span> <span class="hljs-keyword">in</span> item <span class="hljs-keyword">else</span> <span class="hljs-string">&#x27;&#x27;</span>)<br>                comment.append(item[<span class="hljs-string">&#x27;userLevel&#x27;</span>] <span class="hljs-keyword">if</span> <span class="hljs-string">&#x27;userLevel&#x27;</span> <span class="hljs-keyword">in</span> item <span class="hljs-keyword">else</span> <span class="hljs-string">&#x27;&#x27;</span>)<br>                comment.append(item[<span class="hljs-string">&#x27;userId&#x27;</span>] <span class="hljs-keyword">if</span> <span class="hljs-string">&#x27;userId&#x27;</span> <span class="hljs-keyword">in</span> item <span class="hljs-keyword">else</span> <span class="hljs-string">&#x27;&#x27;</span>)<br><br>                comments.append(comment)<br><br>            <span class="hljs-keyword">return</span> comments<br><br>        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>            <span class="hljs-built_in">print</span>(comment)<br>            <span class="hljs-built_in">print</span>(e)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">save_data</span>(<span class="hljs-params">self, comments</span>):<br>        <span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">        功能：将comments中的信息输出到文件中/或数据库中。</span><br><span class="hljs-string">        参数：comments 将要保存的数据</span><br><span class="hljs-string">        &#x27;&#x27;&#x27;</span><br>        df = pd.DataFrame(comments)<br>        df.to_csv(<span class="hljs-variable language_">self</span>.filename, mode=<span class="hljs-string">&#x27;a&#x27;</span>, encoding=<span class="hljs-string">&#x27;utf_8_sig&#x27;</span>,<br>                  index=<span class="hljs-literal">False</span>, sep=<span class="hljs-string">&#x27;,&#x27;</span>, header=<span class="hljs-literal">False</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">run</span>(<span class="hljs-params">self, time_lists</span>):<br>        <span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">        功能：爬虫调度器，根据规则每次生成一个新的请求 url，爬取其内容，并保存到本地。</span><br><span class="hljs-string">        &#x27;&#x27;&#x27;</span><br>        <span class="hljs-comment">#         start_time = dt.datetime.now().strftime(&#x27;%Y-%m-%d  %H:%M:%S&#x27;)</span><br>        start_time = time_lists[<span class="hljs-number">0</span>]  <span class="hljs-comment"># 电影上映时间，评论爬取到此截至</span><br>        end_time = time_lists[-<span class="hljs-number">1</span>]  <span class="hljs-comment"># 电影上映时间，评论爬取到此截至</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;*******************&#x27;</span>)<br><br>        <span class="hljs-comment"># 抓取评论信息</span><br>        i = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">while</span> start_time &gt; end_time:<br>            i += <span class="hljs-number">1</span><br>            <span class="hljs-keyword">if</span> i % <span class="hljs-number">10</span> == <span class="hljs-number">0</span>:<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;已爬取%s页评论&#x27;</span> % i)<br>            url = <span class="hljs-string">&#x27;http://m.maoyan.com/mmdb/comments/movie/248906.json?_v_=            yes&amp;offset=0&amp;startTime=&#x27;</span> + start_time.replace(<br>                <span class="hljs-string">&#x27;  &#x27;</span>, <span class="hljs-string">&#x27;%20&#x27;</span>)<br>            header = random.choice(<span class="hljs-variable language_">self</span>.headers)<br>            time.sleep(<span class="hljs-number">0.05</span>)<br>            html = <span class="hljs-literal">None</span><br><br>            <span class="hljs-keyword">try</span>:<br>                html = <span class="hljs-variable language_">self</span>.get_data(header, url)<br>            <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;*************************&#x27;</span>)<br>                time.sleep(<span class="hljs-number">0.83</span>)<br>                html = <span class="hljs-variable language_">self</span>.get_data(url)<br>                <span class="hljs-built_in">print</span>(e)<br><br>            <span class="hljs-keyword">else</span>:<br>                time.sleep(<span class="hljs-number">0.3</span>)<br><br>            <span class="hljs-comment"># 解析评论信息</span><br>            comments = <span class="hljs-variable language_">self</span>.parse_data(html)<br>            start_time = comments[<span class="hljs-number">14</span>][<span class="hljs-number">4</span>]<br><br>            start_time = dt.datetime.strptime(<br>                start_time, <span class="hljs-string">&#x27;%Y-%m-%d  %H:%M:%S&#x27;</span>) + dt.timedelta(seconds=-<span class="hljs-number">1</span>)<br>            start_time = dt.datetime.strftime(start_time, <span class="hljs-string">&#x27;%Y-%m-%d  %H:%M:%S&#x27;</span>)<br><br>            <span class="hljs-variable language_">self</span>.save_data(comments)<br><br><span class="hljs-comment"># 通过改变时间点，选择爬取信息所处的时间段</span><br>t1 = [<span class="hljs-string">&#x27;2019-02-12  18:59:59&#x27;</span>, <span class="hljs-string">&#x27;2019-02-05  00:00:00&#x27;</span>]<br>time_lists = t1<br>filename = <span class="hljs-string">&#x27;流浪地球%s_comments.csv&#x27;</span> % time_lists[<span class="hljs-number">1</span>].split()[<span class="hljs-number">0</span>]<br>spider = MovieSpider(filename)<br>spider.run(time_lists)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;爬取信息结束&#x27;</span>)<br></code></pre></td></tr></table></figure><h3 id="数据分析"><a href="#数据分析" class="headerlink" title="数据分析"></a>数据分析</h3><ul><li>读取数据<br>前面已经将评论的时间和内容通过<code>csv</code>的格式保存下来，并使用<code>;</code>分割。这里我们将使用<code>pandas</code>读取<code>csv</code>并进行统计处理</li></ul><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-class"><span class="hljs-keyword">data</span> = pd.read_csv(&#x27;./<span class="hljs-title">data</span>.<span class="hljs-title">csv&#x27;</span>)</span><br><span class="hljs-class"><span class="hljs-keyword">data</span>.info()</span><br></code></pre></td></tr></table></figure><ul><li><p>数据详情<br>共有102580条数据；<br>包含字段：<br>评论内容、性别、评论ID、评论者昵称、回复数量、评分、时间、点赞数量、评论者ID、评论者等级</p></li><li><p>清理数据</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-comment"># 删除无用数据</span><br><span class="hljs-keyword">data</span> = data.dropna(axis = <span class="hljs-number">0</span>, how = <span class="hljs-string">&quot;any&quot;</span>)<br><span class="hljs-comment"># 删除重复评论</span><br><span class="hljs-keyword">data</span> = data.drop_duplicates(subset=<span class="hljs-string">&#x27;content&#x27;</span>)<br><span class="hljs-comment"># 将本来是object类型的time，转换成时间类型</span><br><span class="hljs-keyword">data</span>[<span class="hljs-string">&#x27;time&#x27;</span>] = pd.to_datetime(<span class="hljs-keyword">data</span>[<span class="hljs-string">&#x27;time&#x27;</span>],format=<span class="hljs-string">&#x27;%Y-%m-%d %H:%M:%S&#x27;</span>)<br><span class="hljs-comment"># 日期筛选为上映后的日期</span><br><span class="hljs-keyword">data</span> = <span class="hljs-keyword">data</span>[<span class="hljs-type">data</span>[<span class="hljs-string">&#x27;time&#x27;</span>]&gt;=<span class="hljs-type">pd.to_datetime</span>(<span class="hljs-string">&#x27;2019-02-05 00:00:00&#x27;</span>)]<br><span class="hljs-comment"># 将时间设置为index</span><br>data.set_index(<span class="hljs-keyword">data</span>[<span class="hljs-string">&#x27;time&#x27;</span>],inplace=True)<br></code></pre></td></tr></table></figure></li><li><p>分析问题<br>1.总体评价如何？<br>2.总体评价的时间走向如何？<br>3.高分的评价理由是什么？<br>4.低分的评价理由是什么？<br>5.低分的人群有哪些特征？（性别、等级）<br>6.低分跟哪位演员有关？</p></li></ul><p> <strong>总体评价如何？</strong></p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-keyword">from</span> pyecharts import Bar<br><span class="hljs-keyword">from</span> pyecharts import Overlap<br><span class="hljs-keyword">from</span> pyecharts import Line<br><br>score_total = data[<span class="hljs-string">&#x27;score&#x27;</span>].value_counts().sort_index()<br>bar = Bar(<span class="hljs-string">&#x27;《流浪地球》各评分数量&#x27;</span>,<span class="hljs-attribute">width</span>=700)<br>overlap = Overlap(<span class="hljs-attribute">width</span>=700)<br>bar.<span class="hljs-built_in">add</span>(<span class="hljs-string">&quot;&quot;</span>, score_total.index, score_total.values, <span class="hljs-attribute">is_label_show</span>=<span class="hljs-literal">True</span>,<br>       <span class="hljs-attribute">bar_category_gap</span>=<span class="hljs-string">&#x27;40%&#x27;</span>, label_color = [<span class="hljs-string">&#x27;#130f40&#x27;</span>],<br>       <span class="hljs-attribute">legend_text_size</span>=18,xaxis_label_textsize=18,yaxis_label_textsize=18)<br>line = Line(<span class="hljs-string">&quot;&quot;</span>, <span class="hljs-attribute">width</span>=700)<br>line.<span class="hljs-built_in">add</span>(<span class="hljs-string">&quot;&quot;</span>,score_total.index, score_total.values+500,<span class="hljs-attribute">is_smooth</span>=<span class="hljs-literal">True</span>)<br>overlap.<span class="hljs-built_in">add</span>(bar)<br>overlap.<span class="hljs-built_in">add</span>(line)<br>overlap<br></code></pre></td></tr></table></figure><p><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/cpKS154bQyeLY02bQ96*Ib6SRAy1z1xyKt0XBlHR6Zg!/b/dFMBAAAAAAAA&bo=vAKQAQAAAAADFx0!&rf=viewer_4&t=5" alt="在这里插入图片描述"><br> 低分占比</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-comment"># 低分占比 &lt;5</span><br><span class="hljs-attribute">score_total</span>[:<span class="hljs-number">5</span>].sum()/score_total.sum()*<span class="hljs-number">100</span><br></code></pre></td></tr></table></figure><p>高分占比 8</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-comment"># 高分占比 8</span><br><span class="hljs-attribute">score_total</span>[<span class="hljs-number">8</span>:].sum()/score_total.sum()*<span class="hljs-number">100</span><br></code></pre></td></tr></table></figure><p>满分占比</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-comment"># 满分占比</span><br><span class="hljs-attribute">score_total</span>[<span class="hljs-number">10</span>:].sum()/score_total.sum()*<span class="hljs-number">100</span><br></code></pre></td></tr></table></figure><p>通过上述分析计算，高分占比达到90%以上，满分占比也高达70%以上，可以看出《流浪地球》整体评分很高</p><p><strong>高分的评价理由是什么？</strong></p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs routeros">import jieba<br><span class="hljs-keyword">from</span> collections import Counter<br><span class="hljs-keyword">from</span> pyecharts import WordCloud<br><br><span class="hljs-comment"># 比较偏的就不可以被正确分词了 add_word函数提供了解决方法</span><br>jieba.add_word(<span class="hljs-string">&#x27;屈楚萧&#x27;</span>)<br>jieba.add_word(<span class="hljs-string">&#x27;刘启&#x27;</span>)<br>jieba.add_word(<span class="hljs-string">&#x27;吴京&#x27;</span>)<br>jieba.add_word(<span class="hljs-string">&#x27;刘培强&#x27;</span>)<br>jieba.add_word(<span class="hljs-string">&#x27;李光洁&#x27;</span>)<br>jieba.add_word(<span class="hljs-string">&#x27;王磊&#x27;</span>)<br>jieba.add_word(<span class="hljs-string">&#x27;吴孟达&#x27;</span>)<br>jieba.add_word(<span class="hljs-string">&#x27;达叔&#x27;</span>)<br>jieba.add_word(<span class="hljs-string">&#x27;韩子昂&#x27;</span>)<br>jieba.add_word(<span class="hljs-string">&#x27;赵今麦&#x27;</span>)<br>jieba.add_word(<span class="hljs-string">&#x27;韩朵朵&#x27;</span>)<br><br>swords = [x.strip() <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> open (<span class="hljs-string">&#x27;stopwords.txt&#x27;</span>,<span class="hljs-attribute">encoding</span>=<span class="hljs-string">&#x27;utf-8&#x27;</span>)]<br><br>def plot_word_cloud(data, swords):<br>    text = <span class="hljs-string">&#x27;&#x27;</span>.join(data[<span class="hljs-string">&#x27;content&#x27;</span>])<br>    words = list(jieba.cut(text))<br>    ex_sw_words = []<br>    <span class="hljs-keyword">for</span> word <span class="hljs-keyword">in</span> words:<br>        <span class="hljs-keyword">if</span> len(word)&gt;1 <span class="hljs-keyword">and</span> (word <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> swords):<br>            ex_sw_words.append(word)<br>    c = Counter()<br>    c = Counter(ex_sw_words)<br>    wc_data = pd.DataFrame(&#123;<span class="hljs-string">&#x27;word&#x27;</span>:list(c.keys()), <span class="hljs-string">&#x27;counts&#x27;</span>:list(c.values())&#125;).sort_values(<span class="hljs-attribute">by</span>=<span class="hljs-string">&#x27;counts&#x27;</span>, <span class="hljs-attribute">ascending</span>=<span class="hljs-literal">False</span>).head(100)<br>    wordcloud = WordCloud(<span class="hljs-attribute">width</span>=1300, <span class="hljs-attribute">height</span>=620)<br>    wordcloud.<span class="hljs-built_in">add</span>(<span class="hljs-string">&quot;&quot;</span>, wc_data[<span class="hljs-string">&#x27;word&#x27;</span>], wc_data[<span class="hljs-string">&#x27;counts&#x27;</span>], word_size_range=[20, 100])<br>    return wordcloud<br><span class="hljs-comment"># 高分的评价</span><br>plot_word_cloud(<span class="hljs-attribute">data</span>=data[data[<span class="hljs-string">&#x27;score&#x27;</span>]&gt;6], <span class="hljs-attribute">swords</span>=swords)<br></code></pre></td></tr></table></figure><p><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/Suvm.I8ESBV9Fkc3Bn5PHLMX4QQBcl3X9.4tLRCicRQ!/b/dL8AAAAAAAAA&bo=FAVsAgAAAAADN20!&rf=viewer_4&t=5" alt="在这里插入图片描述"></p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-meta"># nlargest函数不需要排序直接看最大的</span><br><span class="hljs-title">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-class"><span class="hljs-keyword">data</span>[<span class="hljs-keyword">data</span>[&#x27;score&#x27;]&gt;6].nlargest(10, &#x27;<span class="hljs-title">upCount&#x27;</span>)[&#x27;content&#x27;]:</span><br>    print(i+<span class="hljs-string">&#x27;<span class="hljs-char escape_">\n</span>&#x27;</span>)<br></code></pre></td></tr></table></figure><p>通过热度词云可以看出，《流浪地球》评分高的原因是因为中国国产的科幻片，特效的制作精良。</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-comment"># 低分的评价</span><br>plot_word_cloud(<span class="hljs-attribute">data</span>=data[data[<span class="hljs-string">&#x27;score&#x27;</span>]&lt;5], <span class="hljs-attribute">swords</span>=swords)<br></code></pre></td></tr></table></figure><p><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/c1TmBZ57ca1AEW4KqsGBt4tYqpisemfDnSInFfkEjto!/b/dC0BAAAAAAAA&bo=FAVsAgAAAAADN20!&rf=viewer_4&t=5" alt="在这里插入图片描述"><br>通过上图低分词云可以看出，网友评论低分的原因是因为剧情，虽然在中国科幻片上特效制作精良，算是中国国产科幻片里程碑作品，但剧情欠佳。</p><p><strong>低分的人群有哪些特征？（性别、等级）</strong></p><p>观众总体的性别占比</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-comment"># 总体的性别比例</span><br>gender_total = data[<span class="hljs-string">&#x27;gender&#x27;</span>].value_counts()<br>bar = Bar(<span class="hljs-string">&quot;《流浪地球》观众性别&quot;</span>, <span class="hljs-attribute">width</span>=700)<br>bar.<span class="hljs-built_in">add</span>(<span class="hljs-string">&quot;&quot;</span>,[<span class="hljs-string">&#x27;未知&#x27;</span>, <span class="hljs-string">&#x27;男&#x27;</span>, <span class="hljs-string">&#x27;女&#x27;</span>],gender_total.values, <span class="hljs-attribute">is_stack</span>=<span class="hljs-literal">True</span>, <span class="hljs-attribute">is_label_show</span>=<span class="hljs-literal">True</span>,<br>               <span class="hljs-attribute">bar_category_gap</span>=<span class="hljs-string">&#x27;60%&#x27;</span>, label_color = [<span class="hljs-string">&#x27;#130f40&#x27;</span>],<br>       <span class="hljs-attribute">legend_text_size</span>=18,xaxis_label_textsize=18,yaxis_label_textsize=18)<br>bar<br></code></pre></td></tr></table></figure><p><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/1esG2QMjcqJC1.mYkRqhwpW9AksjehmcW2LJxEQfpTg!/b/dD4BAAAAAAAA&bo=vAKQAQAAAAADFx0!&rf=viewer_4&t=5" alt="在这里插入图片描述"><br>低分观众的性别占比</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs routeros">gender_low = data[data[<span class="hljs-string">&#x27;score&#x27;</span>]&lt;5][<span class="hljs-string">&#x27;gender&#x27;</span>].value_counts()<br><br>bar = Bar(<span class="hljs-string">&quot;《流浪地球》低分评论观众性别&quot;</span>, <span class="hljs-attribute">width</span>=700)<br>bar.<span class="hljs-built_in">add</span>(<span class="hljs-string">&quot;&quot;</span>,[<span class="hljs-string">&#x27;未知&#x27;</span>, <span class="hljs-string">&#x27;男&#x27;</span>, <span class="hljs-string">&#x27;女&#x27;</span>],gender_low.values, <span class="hljs-attribute">is_stack</span>=<span class="hljs-literal">True</span>, <span class="hljs-attribute">is_label_show</span>=<span class="hljs-literal">True</span>,<br>        <span class="hljs-attribute">bar_category_gap</span>=<span class="hljs-string">&#x27;60%&#x27;</span>, label_color = [<span class="hljs-string">&#x27;#130f40&#x27;</span>],<br>       <span class="hljs-attribute">legend_text_size</span>=18,xaxis_label_textsize=18,yaxis_label_textsize=18)<br>bar<br></code></pre></td></tr></table></figure><p><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/R7Q0V7LQMy*UacK3XIfKxxNisOP7KhjRJ3epJzoU2OM!/b/dDMBAAAAAAAA&bo=vAKQAQAAAAADFx0!&rf=viewer_4&t=5" alt="在这里插入图片描述"><br>可以看出低分观众在男女比例上跟总体的男女比例基本一致</p><p><strong>高低分跟哪位演员有关？</strong></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs stylus">mapping = &#123;<span class="hljs-string">&#x27;liucixin&#x27;</span>:<span class="hljs-string">&#x27;刘慈欣|大刘&#x27;</span>, <span class="hljs-string">&#x27;guofan&#x27;</span>:<span class="hljs-string">&#x27;郭帆&#x27;</span>, <span class="hljs-string">&#x27;quchuxiao&#x27;</span>:<span class="hljs-string">&#x27;屈楚萧|刘启|户口&#x27;</span>, <span class="hljs-string">&#x27;wujing&#x27;</span>:<span class="hljs-string">&#x27;吴京|刘培强&#x27;</span>, <br>           <span class="hljs-string">&#x27;liguangjie&#x27;</span>:<span class="hljs-string">&#x27;李光洁|王磊&#x27;</span>, <span class="hljs-string">&#x27;wumengda&#x27;</span>:<span class="hljs-string">&#x27;吴孟达|达叔|韩子昂&#x27;</span>, <span class="hljs-string">&#x27;zhaojinmai&#x27;</span>:<span class="hljs-string">&#x27;赵今麦|韩朵朵&#x27;</span>&#125;<br><span class="hljs-keyword">for</span> key,values <span class="hljs-keyword">in</span> mapping<span class="hljs-selector-class">.items</span>():<br>    data<span class="hljs-selector-attr">[key]</span> = data<span class="hljs-selector-attr">[<span class="hljs-string">&#x27;content&#x27;</span>]</span><span class="hljs-selector-class">.str</span><span class="hljs-selector-class">.contains</span>(values)<br><br>staff_count = pd<span class="hljs-selector-class">.Series</span>(&#123;key: data<span class="hljs-selector-class">.loc</span><span class="hljs-selector-attr">[data[key]</span>,<span class="hljs-string">&#x27;score&#x27;</span>]<span class="hljs-selector-class">.count</span>() <span class="hljs-keyword">for</span> key <span class="hljs-keyword">in</span> mapping<span class="hljs-selector-class">.keys</span>()&#125;)<span class="hljs-selector-class">.sort_values</span>()<br>staff_count<br><br>bar = <span class="hljs-built_in">Bar</span>(<span class="hljs-string">&quot;《流浪地球》演职员总体提及次数&quot;</span>, <span class="hljs-attribute">width</span>=<span class="hljs-number">700</span>)<br>bar<span class="hljs-selector-class">.add</span>(<span class="hljs-string">&quot;&quot;</span>,<span class="hljs-selector-attr">[<span class="hljs-string">&#x27;李光洁&#x27;</span>,<span class="hljs-string">&#x27;郭帆&#x27;</span>,<span class="hljs-string">&#x27;赵今麦&#x27;</span>,<span class="hljs-string">&#x27;吴孟达&#x27;</span>,<span class="hljs-string">&#x27;屈楚萧&#x27;</span>,<span class="hljs-string">&#x27;刘慈欣&#x27;</span>,<span class="hljs-string">&#x27;吴京&#x27;</span>]</span>,staff_count<span class="hljs-selector-class">.values</span>,is_stack=True, is_label_show=True<br>       ,bar_category_gap=<span class="hljs-string">&#x27;60%&#x27;</span>,label_color = <span class="hljs-selector-attr">[<span class="hljs-string">&#x27;#130f40&#x27;</span>]</span><br>        ,legend_text_size=<span class="hljs-number">18</span>,xaxis_label_textsize=<span class="hljs-number">18</span>,yaxis_label_textsize=<span class="hljs-number">18</span>)<br>bar<br></code></pre></td></tr></table></figure><p><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/rnGVOTZd7zmRNS1tc4g0i8rfqLGHXuj8YMkHRGFC6NI!/b/dLgAAAAAAAAA&bo=vAKQAQAAAAADFx0!&rf=viewer_4&t=5" alt="在这里插入图片描述"></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs stylus">staff_low = pd<span class="hljs-selector-class">.Series</span>(&#123;key: data<span class="hljs-selector-class">.loc</span><span class="hljs-selector-attr">[data[key]</span>&amp;(data<span class="hljs-selector-attr">[<span class="hljs-string">&#x27;score&#x27;</span>]</span>&lt;<span class="hljs-number">5</span>),<span class="hljs-string">&#x27;score&#x27;</span>]<span class="hljs-selector-class">.count</span>() <span class="hljs-keyword">for</span> key <span class="hljs-keyword">in</span> mapping<span class="hljs-selector-class">.keys</span>()&#125;)<span class="hljs-selector-class">.sort_values</span>()<br><br>staff_count_pct = np<span class="hljs-selector-class">.round</span>(staff_low/staff_count*<span class="hljs-number">100</span>, <span class="hljs-number">2</span>)<span class="hljs-selector-class">.sort_values</span>()<br><br>bar = <span class="hljs-built_in">Bar</span>(<span class="hljs-string">&quot;《流浪地球》演职员低分评论提及百分比&quot;</span>, <span class="hljs-attribute">width</span>=<span class="hljs-number">700</span>)<br>bar<span class="hljs-selector-class">.add</span>(<span class="hljs-string">&quot;&quot;</span>,<span class="hljs-selector-attr">[<span class="hljs-string">&#x27;郭帆&#x27;</span>,<span class="hljs-string">&#x27;刘慈欣&#x27;</span>,<span class="hljs-string">&#x27;李光洁&#x27;</span>,<span class="hljs-string">&#x27;屈楚萧&#x27;</span>,<span class="hljs-string">&#x27;赵今麦&#x27;</span>,<span class="hljs-string">&#x27;吴京&#x27;</span>,<span class="hljs-string">&#x27;吴孟达&#x27;</span>]</span>,staff_count_pct<span class="hljs-selector-class">.values</span>,is_stack=True,is_label_show=True,bar_category_gap=<span class="hljs-string">&#x27;60%&#x27;</span>,label_color = <span class="hljs-selector-attr">[<span class="hljs-string">&#x27;#130f40&#x27;</span>]</span><br>       ,legend_text_size=<span class="hljs-number">18</span>,xaxis_label_textsize=<span class="hljs-number">18</span>,yaxis_label_textsize=<span class="hljs-number">18</span>)<br>bar<br></code></pre></td></tr></table></figure><p><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/aOLybbDPCMTpLrTYK3d.SNPKptH3AFEWdqp0fGHRf2o!/b/dD4BAAAAAAAA&bo=vAKQAQAAAAADFx0!&rf=viewer_4&t=5" alt="在这里插入图片描述"></p><h3 id="参考："><a href="#参考：" class="headerlink" title="参考："></a><strong>参考：</strong></h3><p><a href="https://segmentfault.com/a/1190000018242134">https://segmentfault.com/a/1190000018242134</a></p><hr><iframe src="https://rawcdn.githack.com/YUTING0907/donate-page-yu/df1732a5993401f9d372918c3f7680ca0e1c2ca3/simple/index.html " style="overflow-x:hidden;overflow-y:hidden; border:0xp none #fff; min-height:240px; width:100%;"  frameborder="0" scrolling="no"></iframe></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Data Analysis</tag>
      
      <tag>爬虫</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Machine-Learning-笔记 -Bagging&amp;Boosting</title>
    <link href="/posts/2019/01/50f2007f.html"/>
    <url>/posts/2019/01/50f2007f.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><p>本文介绍Bagging和Boosting的概念以及运用它们的集成学习算法Adaboost。</p><h3 id="Bagging-amp-Boosting"><a href="#Bagging-amp-Boosting" class="headerlink" title="Bagging &amp; Boosting"></a><strong>Bagging &amp; Boosting</strong></h3><p>Bagging和Boosting都是将多个弱分类器集成起来形成一个强分类器，俗话说三个臭皮匠顶个诸葛亮。<br>首先介绍Bagging</p><h4 id="Bagging"><a href="#Bagging" class="headerlink" title="Bagging"></a><strong>Bagging</strong></h4><p>Bagging(bootstrap aggregating) ,采用一种有放回的抽样方式，每轮从原始样本集中使用Bootstraping的方法抽取n个训练样本，而bootstrap是一种有放回的抽样方法。</p><p>Bagging的算法过程如下：</p><ol><li>从原始样本中抽取训练集，每一轮从中抽取N个样本。共进行K轮抽取，得到K个训练集。</li><li>每个训练集用来训练一个模型，K个训练集共得到K个模型</li><li>对于分类问题：将上面得到的K个模型采用投票的方式得到分类结果；对于回归问题：计算上述模型的均值作为最后的结果。</li></ol><p>注：这里的投票方式，可以采用每个模型不同的投票数的方式，可以给某个模型权重比大。也可以每个模型一样的权重。打个比方说，这就像你在买股票的时候，你有来自各方面的消息，有一个来自这家公司的高层，你跟他是朋友，他告诉你现在公司经营良好，市场份额逐年攀升，那么这时候这位高管朋友的消息一定给的权重大，因为这个是比其他更重要的信息。<br>运用Bagging的典型集成模型为随机森林。</p><h4 id="Boosting"><a href="#Boosting" class="headerlink" title="Boosting"></a><strong>Boosting</strong></h4><p>Bagging是通过有放回的抽样方式来构建强分类器，那么Boosting呢？Boosting则是通过在上一个弱分类器的基础上，通过提高那些在前一轮被弱分类器分错样例的权值，减小前一轮分对样例的权值，来使得分类器对误分的数据有较好的效果</p><p>运用Boosting的集成模型有Adaboost、GBDT、Xgboost。限于篇幅大小，这篇文章只介绍Adaboost，后续文章中再介绍另外两种算法。</p><h3 id="Adaboost"><a href="#Adaboost" class="headerlink" title="Adaboost"></a><strong>Adaboost</strong></h3><p>Adaboost该算法先通过对N个训练样本的学习得到第一个弱分类器。然后增大犯错样本的权重，进行下一轮弱分类器的训练，最终得到一个强分类器。</p><p>Adaboost算法的大体描述为以下三步：<br>首先初始化训练数据，假设有N个训练样本数据，每个样本数据的权重为1&#x2F;N，可以表示为<br>D1(i) &#x3D; (W1,W2,W3,W4,…Wn)&#x3D;[1&#x2F;N,1&#x2F;N,1&#x2F;N…1&#x2F;N]</p><p>第二步，训练弱分类器Ht,如果某个训练样本被错误分类，那么在构造下一个训练集中，它对应的权重要增大；相反，如果某个训练样本被正确分类，那么它的权重就减小。</p><p>   a.选取一个当前误差率最低的弱分类器h,作为第t个基本分类器Ht,并计算该分类器在Dt分布上的误差et。<br>   b.计算该弱分类器在最终分类器所占的权重(弱分类器用at表示)：<br>$$a_t &#x3D;\ln(\sqrt{\frac{1-e_t}{e_t}})$$<br>   c.更新训练样本的权值分布Dt+1:<br>$$D_{t+1} &#x3D; \frac{D_t(i)exp(-a_iy_iH_t(x_i))}{Z_t} $$<br>其中：$$归一化常数Z_t&#x3D;2\sqrt{e_t(1-e_t)}$$</p><p><strong>说明：</strong><br><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/QR*Fk74acZJgXDxWzEgd*DQT2vpOU5cSP10Zu6P5gnk!/b/dL8AAAAAAAAA&bo=OATLAQAAAAARF9Y!&rf=viewer_4&t=5"><br>从上面推导可得<br>错误分类样本，权重更新：<br>$$D_{t+1}(i) &#x3D; \frac{D_t(i)}{2e_i}$$<br>正确分类样本，权重更新：<br>$$D_{t+1}(i) &#x3D; \frac{D_t(i)}{2(1-e_i)}$$</p><p>第三步，将各个训练得到的弱分类器组合成一个强分类器，各个弱分类器的训练过程结束后，加大分类误差率小的弱分类器的权重，使其在最终的分类函数中起着较大的决定作用。而降低分类误差率大的弱分类器的权重，使其在最终的分类函数中起着较小的决定作用。<br>$$H_{final}&#x3D;sign(f(x))&#x3D;sign(\sum_{t&#x3D;1}^T a_tH_t(x))$$</p><h3 id="Adaboost算法实例："><a href="#Adaboost算法实例：" class="headerlink" title="Adaboost算法实例："></a><strong>Adaboost算法实例：</strong></h3><p>将这10个样本作为训练数据，根据X和Y的对应关系，把这10个数据分为两类，其中用“+”表示类别1，用“O”表示类别-1.如图所示训练样本，弱分类器采用平行于坐标轴的直线。<br><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/N0Rkanv6x1NzMozPz0IuBIXknW4yxVGqe6Sis.xOCNE!/b/dLkAAAAAAAAA&bo=OAS6AwAAAAARF6U!&rf=viewer_4&t=5"><br><strong>初始化</strong>：令每个权值w1i &#x3D; 1&#x2F;N &#x3D; 0.1，其中，N &#x3D; 10，i &#x3D; 1,2, …, 10，然后分别对于t&#x3D; 1,2,3, …等值进行迭代（t表示迭代次数，表示第t轮）</p><p><strong>第一次迭代t&#x3D;1：</strong><br>初始的权值分布D1为1&#x2F;N（10个数据，每个数据的权值皆初始化为0.1），D1&#x3D;[0.1,  0.1, 0.1, 0.1, 0.1, 0.1,0.1, 0.1, 0.1, 0.1]</p><p>在权值分布D1的情况下，取已知的三个弱分类器h1、h2和h3中误差率最小的分类器作为第1个基本分类器H1(x)（三个误差率都是0.3，那就取第一个吧）</p><p>在分类器H1(x)&#x3D;h1情况下，样本点“5 7 8”被错分，因此基本分类器H1(x)的误差率为：e1&#x3D;0.3<br>根据误差率e1计算Ht的权重:<br>$$a_1&#x3D;\frac{1}{2}ln(\frac{1-0.3}{0.3})&#x3D;0.4236$$<br>然后更新训练样本数据的权值分布，用于下一轮迭代，对于正确分类的训练样本“1 2 3 4 6 9 10”（共七个）的权值更新：<br> $$D_2(i) &#x3D; \frac{D_1(i)}{2(1-e_1)}&#x3D;\frac{1}{10}*\frac{1}{2(1-0.3)}&#x3D;\frac1{14}$$<br>对于错误分类的训练样本“5 7 8”（共三个）的权值更新：<br>$$D_2(i) &#x3D; \frac{D_1(i)}{2e_1}&#x3D;\frac{1}{10}<em>\frac{1}{2</em>0.3}&#x3D;\frac1{6}$$</p><p>这样在第一轮结束后，最后得到的各个样本数据新的权值分布为：D2&#x3D;[1&#x2F;14,1&#x2F;14,1&#x2F;14,1&#x2F;14,1&#x2F;6,1&#x2F;14,1&#x2F;6,1&#x2F;6,1&#x2F;14,1&#x2F;14]</p><p>可得分类函数f1(x)&#x3D;a1H1(x)&#x3D;0.4236H1(x)，这时，强分类器的训练错误为0.3</p><p><strong>第二次迭代t&#x3D;2：</strong></p><pre><code class="hljs">在权值分布D2的情况下，再取三个弱分类器h1、h2和h3中误差率最小的分类器作为第2个基本分类器H2(x)：1)　当取弱分类器h1=X1=2.5时，此时被错分的样本点为“5 7 8”：误差率e=1/6+1/6+1/6=3/6=1/2；2)　当取弱分类器h2=X1=8.5时，此时被错分的样本点为“3 4 6”：误差率e=1/14+1/14+1/14=3/14；3)　当取弱分类器h3=X2=6.5时，此时被错分的样本点为“1 2 9”:误差率e=1/14+1/14+1/14=3/14；</code></pre><p>因此选取当前最小的分类器h2作为第2个基本分类器H2(x),显然H2(x)把样本“3 4 6”分错了，根据D2可以得知他们的权值D2(3)&#x3D;1&#x2F;14,D2(4)&#x3D;1&#x2F;14,D2(6)&#x3D;1&#x2F;14,所以H2(x)在训练集上的误差率：e2&#x3D;3 * 1&#x2F;14 &#x3D; 3&#x2F;14</p><p>根据误差率e2计算Ht的权重:<br>$$a_2&#x3D;\frac{1}{2}ln(\frac{1-3&#x2F;14}{3&#x2F;14})&#x3D;0.6496$$<br>对于正确分类的训练样本的权值更新：<br>$$D_3(i) &#x3D; \frac{D_2(i)}{2(1-e_2)}&#x3D;\frac{7}{11}D_2(i)$$<br>对于错误分类的训练样本的权值更新：<br>$$D_3(i) &#x3D; \frac{D_2(i)}{2e_2}&#x3D;\frac{7}{3}D_2(i)$$</p><p>经过第2轮后，最后得到各个样本数据新的权值分布：<br>D3&#x3D;[1&#x2F;22,1&#x2F;22,1&#x2F;6,1&#x2F;6,7&#x2F;66,1&#x2F;6,7&#x2F;66,7&#x2F;66,1&#x2F;22,1&#x2F;22]<br>分类函数f2(x) &#x3D; 0.4236H1(x)+0.6496H2(x),此时组合两个基本的分类函数错分类点为”3 4 6”</p><p><strong>第三次迭代t&#x3D;3：</strong></p><pre><code class="hljs">在权值分布D3的情况下，再取三个弱分类器h1、h2和h3中误差率最小的分类器作为第3个基本分类器H3(x)：1)当取弱分类器h1=X1=2.5时，此时被错分的样本点为“5 7 8”：误差率e=7/66+7/66+7/66=7/22；2)当取弱分类器h2=X1=8.5时，此时被错分的样本点为“3 4 6”：误差率e=1/6+1/6+1/6=1/2=0.5；3)当取弱分类器h3=X2=6.5时，此时被错分的样本点为“1 2 9”：误差率e=1/22+1/22+1/22=3/22；</code></pre><p>选取当前最小的分类器h3作为第3个基本分类器H3(x),显然H3(x)把样本“1 2 9”分错了，根据D3可以得知他们的权值D3(1)&#x3D;1&#x2F;22,D3(2)&#x3D;1&#x2F;22,D3(9)&#x3D;1&#x2F;22,所以H3(x)在训练集上的误差率：e3&#x3D;3 * 1&#x2F;22 &#x3D; 3&#x2F;22</p><p>根据误差率e3计算Ht的权重:<br>$$a_3&#x3D;\frac{1}{2}ln(\frac{1-3&#x2F;22}{3&#x2F;22})&#x3D;0.9229$$<br>对于正确分类的训练样本的权值更新：<br>$$D_4(i) &#x3D; \frac{D_3(i)}{2(1-e_3)}&#x3D;\frac{11}{19}D_3(i)$$<br>对于错误分类的训练样本的权值更新：<br>$$D_4(i) &#x3D; \frac{D_3(i)}{2e_3}&#x3D;\frac{11}{3}D_3(i)$$</p><p>经过第3轮后，最后得到各个样本数据新的权值分布：<br>D4&#x3D;[1&#x2F;6,1&#x2F;6,11&#x2F;114,11&#x2F;114,7&#x2F;114,11&#x2F;114,7&#x2F;114,7&#x2F;114,1&#x2F;6,1&#x2F;38]<br>分类函数f3(x) &#x3D; 0.4236H1(x)+0.6496H2(x)+0.9229H3(x),此时组合三个基本的强分类函数在数据集上有0个误分类点。至此，结束整个训练过程。<br>最终得到的强分类器为：<br>$$H_{final}&#x3D;sign(\sum_{t&#x3D;1}^T a_tH_t(x))&#x3D;sign(0.4236H_1(x)+0.6496H_2(x)+0.9229H_3(x)$$</p><p>以上是Adaboost的全过程</p><h3 id="参考："><a href="#参考：" class="headerlink" title="参考："></a><strong>参考：</strong></h3><p>pan_jinquan博客：<a href="https://blog.csdn.net/guyuealian/article/details/70995333">https://blog.csdn.net/guyuealian/article/details/70995333</a><br>林轩田 机器学习技法</p><hr><iframe src="https://rawcdn.githack.com/YUTING0907/donate-page-yu/df1732a5993401f9d372918c3f7680ca0e1c2ca3/simple/index.html " style="overflow-x:hidden;overflow-y:hidden; border:0xp none #fff; min-height:240px; width:100%;"  frameborder="0" scrolling="no"></iframe></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>Machine Learning</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Machine Learning</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Machine Learning-笔记 -决策树</title>
    <link href="/posts/2019/01/aca57def.html"/>
    <url>/posts/2019/01/aca57def.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><h3 id="决策树"><a href="#决策树" class="headerlink" title="决策树"></a><strong>决策树</strong></h3><p>本文介绍的是决策树算法原理</p><p>决策树是一种基本的回归与分类算法，是一种模仿人类做决定的思维方式构建的算法，在分类问题中，是基于特征对实例进行分类的过程，决策树本质上是从训练数据集中归纳出一组分类规则。</p><p>例如下面这个例子。对下班时间、约会情况、提交截止时间这些条件进行判断，从而决定是否要进行在线课程测试。我们模拟一下今天晚上要不要上课决定的过程。这可能取决于下班时间，如果18：30之前就下班了，那有充足的时间，可以去上课。但可能还取决于今天有没有约会，要是有约会，这个课怕是也上不成了。另一种情况，今天要加班到21：30，这时可能要看看今天是不是里交作业的期限，或者离交作业的期限还早。</p><p>把上面的决策过程画成图如下：<br><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/zhC4zsM5.r55QvKFGVPHpe7KZF3Ok1V2xAXvtsIkzV8!/b/dL8AAAAAAAAA&bo=4AE2AQAAAAARF*Y!&rf=viewer_4&t=5"><br>决策树学习算法包含<strong>特征选择</strong>、<strong>决策树生成</strong>与<strong>决策树的剪枝</strong>过程。</p><p>决策树学习常用的算法有ID3，C4.5,与CART，下面结合这些算法分别叙述决策树学习的特征选择、决策树的生成和剪枝过程。</p><h3 id="特征选择"><a href="#特征选择" class="headerlink" title="特征选择"></a><strong>特征选择</strong></h3><p>决策树的第一步是选择属性判断结点，那么通过什么来决定选择哪一个属性呢？<br>这就需要引入熵的概念和信息增益的概念，1948年，香农提出了 ”<strong>信息熵</strong>(entropy)“的概念，一条信息的信息量大小和它的不确定性有直接的关系，要搞清楚一件非常非常不确定的事情，或者是我们一无所知的事情，需要了解大量信息&#x3D;&#x3D;&gt;信息量的度量就等于不确定性的多少。<br>例子：猜世界杯冠军，假如一无所知，猜多少次？每个队夺冠的几率不是相等的，比特(bit)来衡量信息的多少。<br>采用如下方式求信息熵：<br><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/M3xhIVYF2YDeNDrsfZ9N*nxzIPhen1dBIT9uDyKfgP4!/b/dL8AAAAAAAAA&bo=tAFKAAAAAAADF80!&rf=viewer_4&t=5"><br>当每个球队夺冠概率相等时候，由上面的式子可以求得<br>H &#x3D; -(1&#x2F;32<em>log1&#x2F;32+ 1&#x2F;32</em>log1&#x2F;32+…+1&#x2F;32<em>log1&#x2F;32)<br>&#x3D;-[1&#x2F;32</em>(-5)*32] &#x3D; 5<br>32支参加世界杯夺冠球队的信息熵是5，也就是你5次可以猜对那支球队夺冠。<br><strong>变量的不确定性越大，熵也越大。</strong></p><p><strong>信息增益</strong><br>特征A对训练集D的信息增益g(D,A),定义为集合D的经验熵H(D)与特征A在给定条件下D的经验条件熵H(D|A)之差。<br>                    g(D,A)&#x3D;H(D)-H(D|A)</p><p> 例：有如下数据集,分别有年龄、有工作、有自己的房子、信贷情况4个特征，根据这些特征判断是否批准借贷申请。<br><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/PMaYRc4iFbzStp4l3TvsITRsKFTYN4oQx7AB76qTxHk!/b/dL8AAAAAAAAA&bo=eQY4BAAAAAARF2M!&rf=viewer_4&t=5"></p><p>每个特征的信息增益的计算过程如下：<br><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/yNeCh1UYjpEgClSMkbBPdrnXZTk2OBVNl.I2cBJg4y8!/b/dL4AAAAAAAAA&bo=OAS0BQAAAAARF60!&rf=viewer_4&t=5"><br>ID3算法的核心是在决策树上应用信息增益准则选择特征，递归地构建决策树。但以信息增益作为划分训练数据集的特征，存在偏向于选择取值较多的特征的问题。这里使用<strong>信息增益比</strong>可以对这一问题进行校正。</p><p>信息增益比定义为其信息增益g(D,A)与训练数据集D关于特征A的值的熵HA(D)之比。<br>C4.5算法与ID3算法类似，只是C4.5对ID3的算法进行了改进，C4.5在生成树的过程中，用信息增益比来筛选特征。</p><h3 id="决策树的生成"><a href="#决策树的生成" class="headerlink" title="决策树的生成"></a><strong>决策树的生成</strong></h3><p>决策树的基本思想是递归的过程：</p><ul><li><strong>1) 开始构建根结点，选择一个最优特征，按照这一特征将数据集分割成子集，使得各个子集有一个在当前条件下最好的分类。</strong></li><li><strong>2) 如果样本都在同一类，则该结点成树叶</strong></li><li><strong>3) 否则选择最有分类能力的属性作为决策树的当前结点</strong></li><li><strong>4) 根据当前决策结点属性取值的不同，将训练样本数据集分成若干子集，每个取值形成一个分支，有几个取值形成几个分支。重复进行先前的步骤</strong></li></ul><h3 id="决策树的剪枝"><a href="#决策树的剪枝" class="headerlink" title="决策树的剪枝"></a><strong>决策树的剪枝</strong></h3><p><strong>决策树什么时候停下来</strong><br>1.一种最直观的方式是当每个子节点只有一种类型的记录时停止，但是这样往往会使得树的节点过多，导致过拟合问题（Overfitting）。<br>2.另一种是人工设置最小的阀值，当前节点中的记录数低于一个最小的阀值，那么就停止分割，将max(P(i))对应的分类作为当前叶节点的分类。</p><p>决策树生成算法递归地产生决策树，直到不能继续下去为止。这样产生的树往往对训练数据的分类很准确，但对未知的数据分类却没有那么准确。解决这个问题的办法是考虑决策树的复杂度，对已经生成的决策树进行简化。<br>决策树通过极小化误差函数Ca(T) &#x3D; C(T)+a|T|来实现剪枝，|T|表示模型复杂度，C(T)表示模型对训练数据的预测误差。在对训练数据的预测误差和决策树复杂度之间做一个平衡。</p><h3 id="CART算法"><a href="#CART算法" class="headerlink" title="CART算法"></a><strong>CART算法</strong></h3><p>CART算法是通过基尼指数Gini筛选特征，然后递归的构建二叉树，再进行剪枝的过程。基尼指数其表征了特征的不纯度，以下为计算 GINI 公式<br>$$GINI(D)&#x3D;1-\sum_{i&#x3D;1}^n p(i)^2$$<br>我们取一个极端情况，如果数据集合中的类别只有一类，那么<br>GINI(D）&#x3D;0，当集合中有两类，概率分别是1&#x2F;2，那么Gini(D)&#x3D;1&#x2F;2, 说明Gini(D)越小，则数据集D的纯度越高。</p><p>现在很多python集成模型，比如sklearn，决策树里都默认是CART算法，采用基尼指数划分数据，因为基尼指数和熵计算在误差率上几乎没有差异，而基尼指数又规避了计算log的过程，这样当数据量很大时，就会节约大量的时间。</p><p><strong>参考资料：</strong><br>台大林轩田的机器学习技法—第九课<br>《统计学习方法》李航</p><hr><iframe src="https://rawcdn.githack.com/YUTING0907/donate-page-yu/df1732a5993401f9d372918c3f7680ca0e1c2ca3/simple/index.html " style="overflow-x:hidden;overflow-y:hidden; border:0xp none #fff; min-height:240px; width:100%;"  frameborder="0" scrolling="no"></iframe></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>Machine Learning</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Machine Learning</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>熟读《影响力》,把销售小哥看得更透</title>
    <link href="/posts/2019/01/97c3c9fa.html"/>
    <url>/posts/2019/01/97c3c9fa.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><p>   深谙心理学的销售人员可以说是一种很恐怖的存在，房产中介销售商可以利用<strong>稀缺性</strong>，让本来犹豫不决的你，立马支付了定金。他可能会编造出一个假想的客户，告诉你说，等会我还有一个客户，他很喜欢这套房子，您要是犹豫不决的话，我不敢保证下午这套房子还没卖出去哦。汽车销售员可以利用<strong>对比心理</strong>让你额外买了一套车险，因为在相比刚刚支付的车的价格，后面随之销售的车险的价格就显得有点微不足道了，这时候的成功率就会更高。大街上推销课程的销售员可以利用<strong>互惠原理</strong>,先给你送一个精美的小礼物，拼命强调小礼物是免费的。人们听说是免费的就很容易接受这份小礼物。当接受礼物了之后，他接下来会要求你进他们的站点去了解一下他们推销的产品，这时你因为拿到了小礼物，觉得拒绝他的这个要求好像有点不近人情，所以就跟着去了。</p><p>有一些顺从业者给我们虚假信号，利用人的心理，试图刺激我们的捷径反应，达到让自己盈利的目的。而我们却浑然不知。《影响力》为了避免有人谋求私利误导规则，列举了以下心理原则，它们影响了人们顺从一个要求的倾向性。</p><h3 id="对比原理"><a href="#对比原理" class="headerlink" title="对比原理"></a><strong>对比原理</strong></h3><p>假设有人走进一家时尚男装店，说自己想要买三件套的西服和一件毛衣。如果你是售货员，你该先给他看哪样东西，好让他花最多的钱呢？服装店指点销售人员，要先给顾客看贵的东西。依照人们的常识，顺序应该反过来才对：要是人们买西服时就花了大把的钱，他恐怕不愿再多花钱买毛衣了。但服装商们心知肚明的。他们依照对比原理来设计销售策略：先卖西服，因为顾客接下来买毛衣的时候，哪怕它再贵，价格跟西服比起来，也显得没那么高了。</p><h3 id="互惠原理"><a href="#互惠原理" class="headerlink" title="互惠原理"></a><strong>互惠原理</strong></h3><p>机场的一个行人，正匆匆穿过一个人群拥挤的区域。红十字协会的募捐员走到他的面前，递给他一朵花。这个人吃了一惊，把花接住了。但他马上反应过来，想把花还回去，说自己并不需要花。募捐员说，这是协会的一份礼物，他可以保留的。不过要是，他能够捐一些钱，帮助协会做更多的善举，协会将不胜感激。此时，内心的矛盾从脸上阔散到了全身。他的身体从募捐者的身上移开，似乎要走，但随即又被互惠原理的力量拉回来。他从口袋里摸出几美元，对方礼貌的接下了。</p><p>很明显，在上面的例子中，互惠原理迫使对方接受小馈赠，使得下一步的行动进行的更加容易。人们在互惠原理的压力下往往会更容易做出自己本不愿意做的举动。</p><p>互惠原理还有另一个特点，也容易遭人利用。尽管它确立起来是为了促进伙伴之间的平等交流，但却也可以用来实现完全不平等的结果。它比直接给人恩惠再索取回报的方式更加微妙。</p><p>罗伯特走在大街上，碰到了一个十一二岁的男孩子。他做了自我介绍，并说童子军一年一度的马戏表演就要在本周六晚上举行了，他正在卖门票。他问罗伯特是否愿意购买5美元的门票。罗伯特可不想把大好的周末时光耗在看童子军马戏表演上，于是拒绝了。“好吧”。他说，“要是比不想买门票，买几根巧克力棒如何？才一块钱”罗伯特买了两根，但立刻意识到发生了点怪事，因为：a.罗伯特对巧克力棒没什么兴趣。b.罗伯特喜欢钞票c.罗伯特手里拿着巧克力棒傻傻的站在那儿。d.小孩拿着罗伯特的钞票走了</p><p>这种技巧被叫做“<strong>拒绝-后撤</strong>”术，指的是你想让我答应你的某个要求，为了提高获胜的概率，你可以先向我提出一个大一些的要求，你再提一个稍微小的要求，这个要求才是你真正的目的。倘若你的要求设置的巧妙，我会把你的第二个要求看成是一种对我的让步，并感到自己这边也应该让让步。于是就顺从了第二个要求。</p><p><strong>互惠原理之所以能够屡试不爽的原因是：亏欠感让人很不舒服；违背互惠原理，接受而不是试图回报他人善举的人，是不受社会群体欢迎的。</strong></p><p>如何破功：<br>要怎么样才能抵消互惠这种社会原理的影响呢？一旦激活，它的力量就会铺天盖地压下来，强大得让我们根本无法抵挡。这样看来，不让它激活似乎是个好办法。我们应该抢先出手，拒绝请求者的善意或者让步，大概可以让我们避免跟互惠原理发生冲突。理论上听起来好像很不错。但是，我们需要时刻处于备战状态吗？他靠近我是要干嘛？我们总是戒备森严，看起来像只斗鸡。很显然这不是理想的解决方案。另一种有效的解决方案是<strong>倘若别人的提议我们确实赞同，那就不妨接受它</strong>；<strong>倘若这一提议别有所图，那我们就置之不理</strong>。具体来说就是，有人给了我们一个恩惠，我们大可以接受下来，同时认识到将来有回报他的义务。跟别人达成这样的协议，并不意味着这个人能通过互惠原理利用我们。相反，要是最初的善意其实是专门设计为了刺激我们回报以更大恩惠的圈套、机关或者诡计，那情况就完全不一样了。一旦我们确定最初的恩惠并非出于善意，而是一个顺从的伎俩，那我们就不必受它影响了，该怎么做就怎么做。</p><h3 id="承偌和一致"><a href="#承偌和一致" class="headerlink" title="承偌和一致"></a><strong>承偌和一致</strong></h3><p>在美国，一些玩具商在面临季节性波动的时候，总很难有好的方法改善这种情况，销售最好的时候当然是在圣诞节了，但是在接下来几个月里销售额往往会一落千丈，因为父母们在圣诞节给孩子买了礼物，一段时间他们的玩具预算已经花掉了，他们坚决拒绝在圣诞节后在为孩子买礼物。商家就会面临一个进退两难的问题，怎么样在接下来的几个月了保持消费者对玩具的需求呢？</p><p>如何让刚刚在圣诞节已经花钱的父母，心甘情愿的再花钱为他们已经有太多玩具的孩子再买一件玩具呢？他们是这样做的：在圣诞节前几周就开始为一些特别的玩具做一些吸引人的广告。孩子看到了他们就会央求父母送她这个玩具当做圣诞礼物。这时这些玩具公司就开始执行他们的天才计划了：他们故意不充分的供应这些玩具。大部分家长会发现玩具卖完了，所以只好买一些价值差不多的玩具来代替。这些代替品的供应是足足的。圣诞节过后，这些商家又会把广告拿出来从新播放。这一下，小家伙们就会跑去父母那里哭着说“你答应过我要买的，你答应过的”，家长们只好履行他们的诺言，因为如果不履行承偌，无疑在孩子面前做了一个坏榜样。他们是完完全全被自己之前做出的承诺打败。</p><p>承偌和一致的原理其实很简单，人人都有一种言行一致的愿望，一旦我们作出了一个选择，或者采取了某种立场，我们就会立刻碰到来自内心或者外部的压力，迫使我们按照承诺说的那样去做。在这样的压力下，我们会想方设法地以行动证明之前的决定是正确的。</p><p>如何破功：<br>心理学证据表明，面对一样东西，我们总是先体验到感觉，过上短暂的一瞬间后，才能将之理性化。如果我们多注意训练自己，应该可以在感觉十分轻微还来不及给自己找各种借口时，发现自己是不是在为言行一致找借口。打个比方说：停在加油站的自助加油站跟前，在这里汽油的广告要比本地区其他加油站每加仑低两分钱时，但等把加油泵拿起来，才发现泵上的标价要比广告价要高两分。服务员说价格几天前刚刚调整过了，还来不及把招牌的价格改过来。这时你脑海里可能跳出好些留下来加油的理由——“我必须得加油了”，“我好像记得我的车子用这个牌子的汽油开起来更顺畅”。这时，你需要判断这些理由到底是真的还是自己找的借口。</p><h3 id="社会认同"><a href="#社会认同" class="headerlink" title="社会认同"></a><strong>社会认同</strong></h3><p>在基尤加登斯，一个凶手跟踪一位妇女，并对其施以三次攻击，而皇后区38位尊敬的、遵纪守法的公民们却漠然视之。有两次他们的声音、他们卧室突然亮起的灯光打断了凶手的攻击，把他吓跑了。可他两次都回来了，重新跟上他，用刀子捅她，悲剧发生期间没有一个人打电话报警，知道妇女死后，才有一个目击者报了警。</p><p>出现这样的冷漠社会事件，社会心理学提出了一种最让人难以置信的解释：目击者都没有报警，恰恰是因为当时有38个人在场。没人帮忙，正是因为有那么多的旁观者。因为周围有其他可以帮忙的人，单个人要承担的责任就减少了。再者因为，多元无知效应，很多时候是目击者不知道到底发生什么事情了，碰到这种不确定的情况，人很自然地会根据周围其他人的行动来加以判断。尤其是在我们觉得这些人跟自己相似的时候，这种效率发挥的作用更大。</p><p>如何破功：<br>人们很容易认为当很多人在做相同的事情，他们必然知道一些我们不知道的事情。尤其在我们并不确定的时候，我们很乐意对这种集体智慧投入极大的信任。其次，人群很多时候都是错的，因为群体的成员并不是根据优势信息才采取行动，而只是基于社会认同原理在做反应。《乌合之众》在群体意识上描述得很详尽。所以我们需要确认自己不是在被社会证据误导，这时可以用该环境下的客观事实、先前的经验、我们自己的判断与之进行对比。确保它没有出乱子。</p><h3 id="喜好"><a href="#喜好" class="headerlink" title="喜好"></a><strong>喜好</strong></h3><p>我们大多数人总是更容易答应自己认识和喜欢的人所提出的要求。顺从专业人士会采用喜好原则来达到自己的目的，比如人们会对长得好看的人更宽容，除了好看的长相，还有相似性同样能让人产生好感，现在好多销售培训项目现在都敦促学员“模仿和迎合”顾客的身体姿态、语气和口头表达风格，因为这些方面的相似之处都能够带来积极的效果。</p><p>如何破功：<br>在跟顺从专业人士接触的时候，我们只需关注跟好感有关的一件事就行：我们是不是觉得自己超乎寻常、迅速、热烈地喜欢上对方？只要发现这种感觉，我们就要保持警惕了，他可能采取了某种手法，而这时我们就可以采用必要的反击对策，在我们做出顺从决定时，把提出请求的人和请求本身从感性上分开，只根据生意的好坏做决定。我们用顺从专业人士自己最青睐的社交柔道之术，不去压抑好感因素产生的影响力，听凭这些因数发挥力量，然后用这股力量反过来对付那些想从中获利的人。这股力量越大，其发作用力也越强。</p><h3 id="权威"><a href="#权威" class="headerlink" title="权威"></a><strong>权威</strong></h3><p>在国外，有一些餐厅的服务员因为底薪太低，要靠客人给的小费补足收入。在一家高档餐厅里，有一个厉害人物，他叫文森特，经过他手点的菜单总是价目比较高，他收到的小费也总是很丰富。他有一大堆方法，会根据不同的情有针对性的使用。面对8-12个人的大聚餐，文森特会在第一个人点餐的时候，不管她点什么，总是会做出同样的反应，眉头紧锁，手在点餐单上打转，之后飞快地扭头过去瞅一眼经理那儿。他稍稍朝餐桌倾过身子说：“今晚这道菜恐怕不够好，我可以向您推荐这个吗（推荐菜单上比顾客刚刚点的稍微便宜一点）?”他把自己打扮得像这家店里的权威人物，清楚今晚哪样菜好，哪样不好。他像顾客证明他并非是只顾着自己兜里的钱，而是把顾客的最大利益放在心上。这时候，他等到众人点餐完毕，“你们愿意让我帮你们选一些红酒来搭配吗？”经过之前的铺垫，顾客们都会微笑的点头表示同意。这样便通过优雅的态度既提高了顾客的消费总额，又提高了自己的消费。</p><h3 id="稀缺"><a href="#稀缺" class="headerlink" title="稀缺"></a><strong>稀缺</strong></h3><p>倘若瑕疵把一件东西变得稀缺了，垃圾也能化身成为值钱的宝贝。参与竞争稀缺资源的感觉，对人有着强大的刺激性。<br>它的力量主要来自两个方面：</p><p>第一，<strong>和其他影响力武器一样，稀缺性原理钻了我们思维捷径上的空子</strong>。我们都知道，难以得到的东西往往比容易得到的东西要好，因此，我们倾向于根据获得一样的东西的难易程度来判断它的质量。也就是说，稀缺原理成立的一个重要原因在于，根据它做出判断，大部分时候是正确的。</p><p>第二，机会越来越少的话，我们的选择自由也会随之丧失，而我们本身又都痛恨失去本该拥有的自由。保住既得利益的愿望，是心理逆反理论的核心。</p><p>根据心理逆反理论，只要选择的自由受到限制或者威胁，保护自由的需求就会使我们得到它们的愿望愈发强烈。因此，一旦短缺或者其他因素妨碍我们获取某物，我们就会比以前更想得到它，更想占有它，跟这种妨碍对着干。两岁的孩子和十几岁的少年是逆反心理最旺盛的，这是一个成长的必经阶段。</p><p>每当有东西获取起来比以前更难，我们拥有他的自由受了限制，我们就越发想要得到它。不过我们很少意识到是逆反心理带来了这种迫切感，而只知道是自己想要。为了解释这种莫名的渴望，我们开始给它安上各种积极的品质，比如探索欲，好奇心，与众不同。</p><p>如何破功：<br>在这种情况下，要知道稀缺的东西并不因为难以弄到手，就变得更好吃、更好听、更好听、更好玩。</p><hr><iframe src="https://rawcdn.githack.com/YUTING0907/donate-page-yu/df1732a5993401f9d372918c3f7680ca0e1c2ca3/simple/index.html " style="overflow-x:hidden;overflow-y:hidden; border:0xp none #fff; min-height:240px; width:100%;"  frameborder="0" scrolling="no"></iframe></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    
    <tags>
      
      <tag>life</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Machine Learning-笔记 -SVM</title>
    <link href="/posts/2019/01/c23cbdd.html"/>
    <url>/posts/2019/01/c23cbdd.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><p>本文介绍的是SVM算法原理(NG的ML课程笔记)</p><p>适应人群：想了解SVM原理的</p><p>为了好好理解SVM算法的原理，我们先从逻辑回归开始。</p><p>逻辑函数的假设函数(Hypothesis)如下图：<br><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/HVBY*luEKsAWFVFT6oee4DGr*VkgUwIb*0y4kuaN.x0!/b/dDcBAAAAAAAA&bo=nAJlAQAAAAADF8g!&rf=viewer_4&t=5"><br>下面将用Z代替等号右边</p><p>$$Z&#x3D;Θ^TX $$</p><h3 id="逻辑回归用来做什么"><a href="#逻辑回归用来做什么" class="headerlink" title="逻辑回归用来做什么"></a><strong>逻辑回归用来做什么</strong></h3><p>很显然逻辑回归用来分类，如果有一个y&#x3D;1的样本，我们希望h(x)趋近1，因为我们想正确地将此样本分类，这就意味着当h(x) 趋近于 1 时，Z应当远大于0，用数学符号表示Z&gt;&gt;0,从上图可以看出当Z&gt;&gt;0是对应的函数输出是1；相反，如果我们有另外一个样本，即y&#x3D;0。我们希望假设函数的输出值将趋近于 0，对应的Z要远远小于0，Z&lt;&lt;0</p><p>进一步观察逻辑回归的代价函数,每一个样本都会为代价函数做贡献。现在，考虑两种情况，一种是 y 等于 1 的情况；另一种是 y 等于 0 的情况。</p><p>在第一种情况中，假设y&#x3D;1，此时在目标函数中只需有第一项起作用，因为 y 等于 1 时，(1-y) 项将等于0。画出关于 z 的函数，你会看到左下角的这条曲线，当z增大时，z 对应的值会变的非常小。对整个代价函数而言，影响也非常小。这也就解释了，为什么逻辑回归在观察到正样本 y&#x3D;1 时，试图将z设置得非常大。因为，在代价函数中的这一项会变的非常小。<br><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/hzVtQJF*zGgUxoMzif6lIwh6gZhiubtZXOURit1R63I!/b/dL4AAAAAAAAA&bo=nAKLAQAAAAADJxY!&rf=viewer_4&t=5"></p><h3 id="建立SVM-支持向量机"><a href="#建立SVM-支持向量机" class="headerlink" title="建立SVM(支持向量机)"></a><strong>建立SVM(支持向量机)</strong></h3><p>现在开始建立支持SVM(向量机)，首先从这个代价函数开始,一点点修改<br>$$ \log(1- \frac{1} {1+e^{-Z}})$$<br>红线画出的函数表示将要用的代价函数<br><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/m3oxpA4dmsJjWc6kPaVuGmOsbXDehBKpNIXSYUbNQn4!/b/dL8AAAAAAAAA&bo=hwFfAQAAAAADF.o!&rf=viewer_4&t=5"><br>新的代价函数将会水平的从这里到右边 (图外),到了这里已经非常接近逻辑回归中使用的代价函数了。只是这里是由两条线段组成，即位于右边的水平部分和位于左边的直线部分，先别过多的考虑左边直线部分的斜率，这并不是很重要.</p><p>我们用一个新的代价函数来代替逻辑函数，即这条从 0 点开始的水平直线，然后是一条斜线。左边的函数，我称之为 Cos t1(z)，同时，右边函数我称它为 Cos t0(z)。这里的下标是指在代价函数中，对应的 y&#x3D;1 和 y&#x3D;0 的情况.<br><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/LDxD6g7vF5Hv24*xtYGVTg06PeeIpgIDKrm9cLfhbBU!/b/dMIAAAAAAAAA&bo=fQFCAQAAAAADFw0!&rf=viewer_4&t=5"></p><h3 id="开始构建SVM-支持向量机"><a href="#开始构建SVM-支持向量机" class="headerlink" title="开始构建SVM(支持向量机)"></a><strong>开始构建SVM(支持向量机)</strong></h3><p><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/LqBf*CXhMKdG*f1P6CuvCfdDJkrhCX0wvSLeUtKBrgs!/b/dL8AAAAAAAAA&bo=pQJxAQAAAAADJ9U!&rf=viewer_4&t=5"><br>上面是逻辑回归当中使用的代价函数J(Θ),SVM在这里稍微做个转变,把括号里的log函数分别用上面提到的 Cos t1(z)和Cos t0(z)替换，然后再加上正则项。</p><p>这里我们有两项：第一是训练样本的代价，第二个是我们的正则化项，我们不得不去用这一项来平衡.这就相当于我们想要最小化 A 加上正则化参数λ，然后乘以其他项 B 对吧？这里的 A 表示这里的第一项，同时我用 B 表示第二项，但不包括λ，我们不是优化这里的 A+λ×B.</p><p>我们依照惯例使用一个不同的参数称为 C，那么，我现在删掉这里的λ，并且用常数 C 来代替。同时改为优化目标，C×A+B 因此SVM hypothesis可以表示为<br><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/aePvUWA*0mJ4xkJvYnELd*mxTc37Ax22ztT*MEFwv3U!/b/dDcBAAAAAAAA&bo=gAJGAQAAAAADJ8c!&rf=viewer_4&t=5"></p><p>现在让我们考虑一下，最小化这些代价函数的必要条件是什么.如果你有一个正样本，y 等于 1.则只有在 z 大于等于 1 时,代价函数 cost 1 (z)才等于 0.换句话说，如果你有一个正样本，我们会希望Θ^TX  &gt;&#x3D;1，反之，如果 y 是等于 0 的，我们观察一下，函数 cost 0 (z)，它只有在 z&lt;&#x3D;1的区间里函数值为 0，这是支持向量机的一个有趣性质。</p><p>我接下来会考虑一个特例，将这个常数 C 设置成一个非常大,比如我们假设 C 的值为 100000 或者其它非常大的数，然后来观察支持向量机会给出什么结果？如果 C 非常大，则最小化代价函数的时候，我们将会很希望找到一个使第一项为 0 的最优解。因此，让我们尝试在代价项的第一项为 0 的情形下理解该优化题。</p><p>第一项为0，必须是c乘以0，所以这将遵循以下约束，y  (i )是等于 1,Z &gt;&#x3D;1,如果 y  (i )是等于 0的,Z&lt;&#x3D;-1.当你最小化这个关于变量 θ 的函数的时候，你会得到一个非常有趣的决策边界。那么就只剩下第二项，这个优化目标函数可以被写成等于<br>$$  \frac{1}{2}||Θ^2||<br>$$<br>具体而言，如果你考察这样一个数据集，其中有正样本，也有负样本，可以看到这个数据集是线性可分的。我的意思是，存在一条直线把正负样本分开。当然有多条不同的直线，可以把正样本和负样本完全分开。<br><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/TaY.XOPn8wB6ywygqVKTVfGr1bWGA03qtFNZygBkxL8!/b/dL8AAAAAAAAA&bo=GQIyAQAAAAADFxo!&rf=viewer_4&t=5"><br>比如，这就是一个决策边界可以把正样本和负样本分开。但是多多少少这个看起来并不是非常自然是么?</p><p>或者我们可以画一条更差的决策界，这是另一条决策边界，可以将正样本和负样本分开，但仅仅是勉强分开，这些决策边界看起来都不是特别好的选择，支持向量机将会选择这个黑色的决策边界，相较于之前我用粉色或者绿色画的决策界。这条黑色的看起来好得多.在分离正样本和负样本上它显得的更好。数学上来讲，这是什么意思呢？这条黑线有更大的距离，这个距离叫做间距 (margin).因此支持向量机有时被称为 大间距分类器，而这其实是求解上面优化问题的结果。</p><h3 id="大间隔分类背后的数学原理"><a href="#大间隔分类背后的数学原理" class="headerlink" title="大间隔分类背后的数学原理"></a><strong>大间隔分类背后的数学原理</strong></h3><p>首先复习一下关于向量内积的知识,假设我有两个向量，u 和 v 。uT<em>v 叫做向量 u 和 v 之间的内积。向量的内积在几何上的表示为将 v 投影到 u上，p 是 v 投影到向量 u 上的长度, uT</em>v &#x3D;p * ||u||。<br>顺便说一句，uT<em>v&#x3D;vT</em>u。最后一点，需要注意的就是 p 值，p 事实上是有符号的。如果 u 和 v 之间的夹角小于 90 度，那么那条红线的长度 p 是正值。然而如果这个夹角大于 90 度，则 p 将会是负的。</p><p>我们接下来将会使用这些关于向量内积的性质试图来理解支持向量机中的目标函数。<br><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/eQeKytLiAttggAuvBaWBxt.eF2wx2e6O0u4R5MpKHRo!/b/dDQBAAAAAAAA&bo=tAKQAQAAAAADJyU!&rf=viewer_4&t=5"><br>接下来忽略掉截距，令 θ 0  &#x3D; 0,这样更容易画示意图。我将特征数 n 置为 2，因此我们仅有两个特征 x 1 和 x 2 ，现在 我们来看一下目标函数，支持向量机的优化目标函数。当我们仅有两个特征，即n&#x3D;2时，这个式子可以写作：<br>$$  \frac{1}{2}(Θ^2_1+Θ^2_2) &#x3D; \frac{1}{2}(\sqrt{Θ^2_1+Θ^2_2})^2&#x3D;  \frac{1}{2}||Θ||^2<br>$$<br>因此支持向量机做的全部事情，就是 极小化参数向量 θ  范数的平方 ， 或者说长度的平方.</p><p>现在我将要看看这些项：<br>我们考察一个单一的训练样本，我有一个正样本在这里，用一个叉来表示这个样本x(i),意思是在水平轴上取值为x1(i),在竖直轴上取值为x2(i).，我们有一个参数向量我会将它也画成向量。我将 θ 1 画在横轴这里，将 θ 2  画在纵轴这里，那么内积θT*X(i)将会是什么呢？</p><p>使用我们之前的方法，我们计算的方式就是我将训练样本投影到参数向量 θ,θT*X(i)&#x3D;P*||θ||&#x3D;θ1*X1+θ2*X2</p><p>转换一下约束：Z&gt;&#x3D;1或者Z&lt;&#x3D;-1时，约束是被P(i)*θ&gt;&#x3D;1,或者&lt;&#x3D;-1代替，因为θT*X(i)&#x3D;P*||θ||.</p><p><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/.pPSCQwwf7DkZ3F1.kOrwXPVq*kiV7CQQjCCS6ngkYQ!/b/dLgAAAAAAAAA&bo=bgJ1AQAAAAADFyo!&rf=viewer_4&t=5"></p><p>前面提到的代价函数可以被写成等于<br>$$  \frac{1}{2}||Θ^2||$$<br>现在，继续使用之前的简化，即 θ 0 &#x3D;0。(θ 过原点)<br>要想最小化代价函数，必须使得θ的范式尽可能小。但是不要忘了一个前提当为正样本时，P(i)*||Θ||&gt;&#x3D;1,所以必须满足P尽可能的大。而P是特征向量X在参数向量Θ的投影。这个投影长度越大，说明产生间距越大。这就是支持向量机如何能有效地产生大间距分类的原因。</p><p><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/*Z4h0eBDl68ALF9H4Avsr.rLJUSRgWtkD7MEI1etaI8!/b/dDYBAAAAAAAA&bo=rgELAQAAAAADF5c!&rf=viewer_4&t=5"><br>看这条绿线，这个绿色的决策界。我们希望正样本和负样本投影到 θ 的值大。要做到这一点的唯一方式就是选择这条绿线做决策界。这是大间距决策界来区分开正样本和负样本这个间距的值。这个间距的值就是 p (1) p (2) p (3) 等等的值。通过让间距变大，支持向量机最终可以找到一个较小的 θ 范数。这正是支持向量机中最小化目标函数的目的。</p><h3 id="核函数"><a href="#核函数" class="headerlink" title="核函数"></a><strong>核函数</strong></h3><p>以上介绍的一条直线就可以划分边界的情况，是线性核函数，但很多情况是不能简单的用一条直线就能够划分边界出来的。这时就需要换用更复杂的核函数。这里仅仅列举一下常用的核函数。</p><ul><li>高斯核函数（Gaussian Kernel）</li><li>sigmoid核函数</li><li>线性核函数 </li><li>多项式核函数</li></ul><h3 id="一些规则"><a href="#一些规则" class="headerlink" title="一些规则"></a><strong>一些规则</strong></h3><p>下面是一些普遍使用的准则：<br>n 为特征数，m 为训练样本数。</p><ul><li>如果相较于 m 而言，n 要大许多，即训练集数据量不够支持我们训练一个复杂的非线性模型，我们选用逻辑回归模型或者不带核函数的支持向量机。</li><li>如果 n 较小，而且 m 大小中等，例如 n 在 1-1000 之间，而 m 在 10-10000 之间，使用高斯核函数的支持向量机。</li><li>如果 n 较小，而 m 较大，例如 n 在 1-1000 之间，而 m 大于 50000，则使用支持向量机会非常慢，解决方案是创造、增加更多的特征，然后使用逻辑回归或不带核函数的支持向量机。</li></ul><p>SVM优点：主要在于它的代价函数是凸函数，不存在局部最小值</p><hr><iframe src="https://rawcdn.githack.com/YUTING0907/donate-page-yu/df1732a5993401f9d372918c3f7680ca0e1c2ca3/simple/index.html " style="overflow-x:hidden;overflow-y:hidden; border:0xp none #fff; min-height:240px; width:100%;"  frameborder="0" scrolling="no"></iframe></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>Machine Learning</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Machine Learning</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>做计划，不是一份愿望清单...</title>
    <link href="/posts/2018/12/b65547cb.html"/>
    <url>/posts/2018/12/b65547cb.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><p>做计划，不是一份愿望清单……</p><p>2018年最后一天了，你的愿望是不是改一改时间2019还能继续用，为什么新年愿望总实现不了？就真的只是愿望放在那儿一年又一年。当看到别人纤细苗条的身材，穿漂亮的衣服，而自己眼看漂亮的裙子不合身，急了眼，于是在愿望清单上加上一条，减肥瘦身，每天去健身房。事后坚持一个星期都坚持不下来。对于自己定下来的看书计划，一个星期看一本书，晚上捧着书就开始呼呼大睡。一个月过去了才看到第一章。从明天开始我要早起背单词，第二天你摆好pose发朋友圈，配上文字，今天有早起背单词，早晨的空气是真的新鲜。第三天，你因为下雨，计划又延后。</p><h3 id="为什么定下的目标总是实现不了？"><a href="#为什么定下的目标总是实现不了？" class="headerlink" title="为什么定下的目标总是实现不了？"></a>为什么定下的目标总是实现不了？</h3><p>我们总说，工作一年学到的东西比大学四年学到的都要多，为什么？因为大学里的东西很多都没有实操性，有的课本几十年没有更新换代，案例也是一些老掉牙的案例。拿理科生，工科生必学的基础课“线性代数”举例来说，从1997年以后，美国新出版的线性代数教材几乎全部采用了计算机算题，而我国教材中找不到一本用计算机的，全靠手算。我在念这门课的时候，完全被这繁琐的演算，搞得一点兴趣没有。你说这门课难吗，其实并不难，只是在学的时候你根本不知道它可以做什么用。毕业后我慢慢开始接触到机器学习(Machine Learning)，深度学习(Deep-Learning),数据挖掘(Data-Mining)这些后，我发现线性代数学好了是多么有用，因为上述领域中要求数学基础知识中，有一项就是线性代数，矩阵的运算只要一步就可以解决的问题，而for需要套很多层，速度还慢。而这些用处我在大学课堂上根本体会不到，就像又不会拿线性代数去买菜一样，大学里很多课程形同虚设。学了也没有学到精髓。<strong>因为它不是你的刚需。</strong>我现在就特别想爬进机器学习领域，我想去发觉那些类似于亚马逊发现超市将啤酒和尿布摆在一起卖，会莫名的销量好一样，去发现一些潜在的规律，我觉得那将会是很有意义的工作。</p><p>再来看为什么定下的目标总是实现不了，<strong>是因为没那么想实现,是因为那不是你的刚需，你看每天早起背英语的过程太痛苦了，改变实在太难了，现状好像也没有那么糟糕，于是“愿望”就被搁置了。等到年终的时候，就只是愿望了。</strong> 当愿望是刚需时，都不用逼迫自己，你都会每天努力去实现它。与其在新年伊始，开始列愿望清单，不如多想想自己想要什么样的生活？用结果作导向。</p><p>我记得罗胖在一次直播中，描绘得到的宏伟蓝图的时候说过，当你不知道你现在做的事会不会成功时，你不妨设想一下，你希望它十年后是什么样子。以结果为导向，你就知道你现在要做什么了，而且更加清楚你现在做的事的意义。</p><h3 id="制定合理且具体的计划"><a href="#制定合理且具体的计划" class="headerlink" title="制定合理且具体的计划"></a>制定合理且具体的计划</h3><p>我曾在知乎上看到过一个概念，[<strong>NLP理解层次</strong>]。它是这么说的，对于一件事的理解，我们可以分为6个不同的层次。理解层次越高的人，解决问题的能力也越强。举一个事例，帮助理解 。</p><p>“我现在对这个工作不满意”</p><h4 id="第5流人才"><a href="#第5流人才" class="headerlink" title="第5流人才"></a>第5流人才</h4><ul><li><strong>又名:怨妇</strong></li><li><strong>所处理解层次：环境</strong></li><li><strong>典型思考模式：不怪我，都是你们的错！</strong><br>处在理解层次最底层第六层次的人,遇到问题时，他会首先把问题归结为「<strong>因为环境的不好</strong>」而产生的问题， 把一些都归结于环境，就是除自己以外的一切。我对这个工作不满意，是因为领导无能，公司办公室政治严重。</li></ul><p><strong>而他在寻找解决办法的路径上，也会从改变环境的角度思考。比如：</strong><br>我不喜欢这个工作，我换一个就是，此处不留爷自有留爷处。</p><p>这一类人总是不停的在抱怨，好像就只有他们的生活命运多舛，在《这个杀手不太冷》中，小女孩问里昂，生活总是这样还是只有小时候是这样，里昂回答always。谁不是一面不想活了又拼命活着。<br>她们似乎好像也知道抱怨不好？但为什么他们还是在不断抱怨呢？那就是因为他们的理解层次处在了最低的「环境层」，并不是他们想抱怨，而是在他眼里，除了看到环境之外，再也无法看到其他的了。因此，他们能想到的最好办法，也就只能是换个更好的环境了。</p><h4 id="第4流人才"><a href="#第4流人才" class="headerlink" title="第4流人才"></a>第4流人才</h4><ul><li><strong>又名:行动派</strong></li><li><strong>所处理解层次：行动</strong></li><li><strong>典型思考模式：我还不够努力！</strong><br>这里我们往上走了一层，来到第二个层次「行为」。处在这一层次的人，当问题发生的时候，他首先会把问题归结成「因为我的努力还不够」而产生的问题。比如：<br>我对这个工作不满意。是因为我的能力还不够，没有看到这个工作给你带来的潜在意义。<br>收入太低？因为我还不够努力…<br>总之，发生了问题，先从自身找原因，看看是不是因为自己偷懒了？是不是努力程度还不够？</li></ul><p>你会发现，处在这一层次，环境问题并不是什么问题了，变得没那么重要了，你发现没有越往上走，看到的点越不一样，换句话说，当你处在环境层次时，你觉得可能跨不去的坎，在行动层次的人来说根本就不是什么问题。</p><p><strong>而他在寻找解决办法的路径上，也会从行为的层面思考。比如：</strong><br>几年没涨工资了，今天开始多加班。<br>业绩不好，我多联系一下别的客户</p><p>但是，是不是努力了，所有问题都解决了呢。学生时代有些学生就是很努力，一天学到晚，但成绩就是上不去。努力的确是成功的一个必要条件，但远远不是充分条件。现在网上到处充斥着鸡汤，今天又是元气满满的一天哟。这种鸡汤喝所谓的成功学。它们只告诉了你要努力，却没有给你方法，它们只是帮助你脱离了最低的「环境」层，来到了第二低的「行为」层！以为给你打一针鸡血，你就开始奋斗了，就一定能成功了！只靠努力却在目标的道路上背道而驰，感动地只有你自己。</p><h4 id="第3流人才"><a href="#第3流人才" class="headerlink" title="第3流人才"></a>第3流人才</h4><ul><li><strong>又名:战术家</strong></li><li><strong>所处理解层次：能力</strong></li><li><strong>典型思考模式：方法总比问题多！</strong><br>理解层次处在「能力」层次的人，当问题发生的时候，首先会把问题归结成是「因为我的能力不足」而产生的。所以，他们也会在「能力」这个层次里去寻找更好的「方法」来解决问题。比如：<br>开的火锅店生意不太好，是因为我的经营模式太陈旧，我需要学习新的方法…比如，可以通过社群经济的方式来降低我的获客成本。<br><strong>这类人有非常强大的学习能力和应用能力，能把学习到的知识，转化为可操作的方法，进而改善效率，解决问题</strong></li></ul><p>他们清楚的知道太阳底下没有新鲜事，你现在遇到的问题，前人一定都遇到过，说不定还已经编成书了。如果你能走到这个层次，既有「行为层」的勤奋努力，又有「能力层」的方法套路，普通的问题已经难不倒你了，你总能找到办法来解决它们。这里说的每提高一个层次，并不是说就不要下一个层次了，而是在原来的基础上，上升了一个思考层次。</p><p>到这里已经是我们人的意识能想到的最高层次了。那肯定有人问了，还有什么问题是你有能力解决不了的事呢？答案是，你没抓住问题是什么，病急乱投医。什么意思，你在着手解决问题之前，你得先清楚，你要解决的问题是什么？比如一个门店人烟稀少，导致现状的原因看上去有很多，哪个才是最重要的问题？</p><ul><li>是团队管理的问题？营销方式的问题？还是商业模式的问题？</li><li>是应该打折清库存减少损失，准备关门？还是战略转型，坚持到底？<br>每一个选择都意味着不同的问题，一旦选择出了问题，没有抓住主要矛盾，你那优秀的「能力」和「行动力」只会让你越走越远。提高做选择题的能力，接下来需要进入下一层。</li></ul><h4 id="第2流人才"><a href="#第2流人才" class="headerlink" title="第2流人才"></a>第2流人才</h4><ul><li><strong>又名:战略家</strong></li><li><strong>所处理解层次：BVR（信念&#x2F;价值观&#x2F;规条）</strong></li><li><strong>典型思考模式：什么才是更重要的？</strong></li></ul><p>什么是BVR？</p><ul><li><strong>B（Believe）：信念</strong>，你相信什么是对的？</li><li><strong>V（Value）：价值观</strong>，你认为A和B哪个更重要？<br>我们说三观不合，不能做朋友，我向往海洋，而你却说那里淹死过很多人。我们每个人都会有一个价值衡量尺度，有的人觉得享乐重要，就优先享乐，把赚到的钱去换不同的体验，比如去国外旅游。有些人觉得挣钱重要，就把省着钱留下来。</li><li><strong>R（Rule）：规条</strong>,做人做事的原则。每个人有自己做事的原则，这些原则就来自于信念和价值。我有一条自己的原则是：答应别人的事，一定做到。而背后的信念其实是说到做到。诚信大于一切，就是觉得诚信最重要。</li></ul><p>处在「BVR层」的人，当问题发生的时候，首先会先思考「哪个是最重要的问题？」、「除了我看到的这些问题，还有什么更重要的问题是我没有看到的？」</p><p>BVR更多的是在有一个客观的价值标准时，你选择那个对你来说更有价值的问题去解决。BVR的缺陷，当遇到主观选择题的时候，我们不知道该怎么办。这时我们再往上走一个层次。</p><h4 id="第1流人才"><a href="#第1流人才" class="headerlink" title="第1流人才"></a>第1流人才</h4><ul><li><strong>又名:觉醒者</strong></li><li><strong>所处理解层次：身份</strong></li><li><strong>典型思考模式：因为我是XXX，所以我会XXX</strong><br>广大的股民朋友们都知道股神巴菲特，但是在自己选股择时的时候，有没有想过如果我是巴菲特，我此时会怎么做到。除了巴菲特，利弗莫尔同样在股票界享有声明。当你想想自己是利弗莫尔时，又会有怎样的不一样。这最后让你做决定的是你想成为谁，<strong>当你想清楚自己的「身份」定位后，就应该围绕它配套相应的BVR，再构建你的能力圈，并做出相应的计划与行动，你就会成为第一流的人才！</strong><br>第一流人才再往上走一层，是顶级的人才。</li></ul><h4 id="顶级人才"><a href="#顶级人才" class="headerlink" title="顶级人才"></a>顶级人才</h4><ul><li><strong>又名:领袖&#x2F;伟人</strong></li><li><strong>所处理解层次：精神&#x2F;使命</strong></li><li><strong>典型思考模式：人活着就是为了改变世界！</strong><br>理解层次的最高层次「精神」,精神是什么？就是你与世界的关系。也就是我们经常听到的「人生使命」，你来到这个世界是为了什么？这个层次所有的思考都是利他主义，现在全球气候越来越暖，我要做什么来改变这个现状。我要怎样才能推动时代的进步。像马丁路德金，解放黑人奴隶制度。乔布斯，活着就是为了改变世界。</li></ul><h4 id="根据NLP理解层次我们再来制定自己明确的目标。"><a href="#根据NLP理解层次我们再来制定自己明确的目标。" class="headerlink" title="根据NLP理解层次我们再来制定自己明确的目标。"></a>根据<strong>NLP理解层次</strong>我们再来制定自己明确的目标。</h4><p>这里还有一个很好用的制定目标的原则“<strong>SMART原则</strong>”<br><strong>即目标应当是具体的(Specific)、可以衡量的(Measurable)、可以达到的(Attainable)、与其他目标具有一定的相关性的(Relevant)、具有明确的截止期限的(Time-bound)。</strong></p><p><strong>比如我2019的愿望清单是：</strong></p><ul><li>想爬进数据挖掘领域</li><li>继续完成EF的课程</li><li>投资理财</li><li>读书</li></ul><p>对于第一个愿望，想爬进数据挖掘领域，我在文章前面说过了，我想去发觉那些类似于亚马逊发现超市将啤酒和尿布摆在一起卖，会莫名的销量好一样，去发现一些潜在的规律，我觉得那将会是很有意义的工作。所以我想成为这个专业领域的人，好了，有了这个目标，我该向下培养什么能力呢？我去查了招聘网站的任职要求。</p><ul><li><strong>1.熟悉常用算法</strong></li></ul><ul><li>决策树</li><li>逻辑回归</li><li>SVM</li><li>k-means</li><li>GBDT</li><li>XGBOOST</li><li>PCA<br>对于这个要求，我再把目标打散，一个一个算法攻克</li></ul><ul><li><strong>2.熟练使用SQL</strong><br>因为我现在的工作日常就是写SQL，所以不太需要额外训练。</li><li><strong>3.至少一门统计分析工具python&#x2F;R&#x2F;spss</strong><br>人生苦短我用python，再具体化一点，每天leecode上刷一道题，两个星期做一次总结。</li><li><strong>4.参加kaggle比赛</strong><br>我准备先复现2018CCF BDCI《供应链需求预测》和《基金间的相关性预测》一等奖的开源思路，上半年参加两次比赛。</li></ul><p>对于第二个愿望，继续完成EF的课程。具体可衡量一点就是在20190126前，完成level9的练习，每个星期2-3次online-group lesson，offline F2F twice a week, offline workshop twice a week。20190126后花一个月复习level4到level9的课程内容。20190630之前完成中高级(level10-12)课程。年底完成高级课程。</p><p>对于第三个愿望，复习香帅的北大金融学课，一课一课重新做复习笔记。每天一篇。一个月对一个上市公司进行研究，并写研究报告。</p><h3 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h3><ul><li>首先介绍了为什么定下的目标总是实现不了？是因为定下的目标都不是的刚需。</li><li>然后引入NLP理解层次，分为6个层次，精神、身份、BVR(信念&#x2F;价值观&#x2F;规条)、能力、行为、环境。</li><li>制定自己明确的目标(SMART原则)</li></ul><hr><iframe src="https://rawcdn.githack.com/YUTING0907/donate-page-yu/df1732a5993401f9d372918c3f7680ca0e1c2ca3/simple/index.html " style="overflow-x:hidden;overflow-y:hidden; border:0xp none #fff; min-height:240px; width:100%;"  frameborder="0" scrolling="no"></iframe></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    
    <tags>
      
      <tag>life</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Machine Learning-实战 电信行业智能套餐个性化匹配</title>
    <link href="/posts/2018/12/2308fc18.html"/>
    <url>/posts/2018/12/2308fc18.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><p>本文是关于BDCI 2018-面向电信行业存量用户的智能套餐个性化匹配模型大赛 TOP1开源代码的实现</p><h2 id="运行环境"><a href="#运行环境" class="headerlink" title="运行环境"></a>运行环境</h2><ul><li><strong>windows</strong></li><li><strong>python3.6</strong></li><li><strong>pandas sklearn xgboost</strong> <h2 id="赛事说明"><a href="#赛事说明" class="headerlink" title="赛事说明"></a>赛事说明</h2></li></ul><p>赛事链接<a href="https://www.datafountain.cn/competitions/311/details/data-evaluation">面向电信行业存量用户的智能套餐个性化匹配模型</a></p><p>可以参看链接，里面有详细的训练集数据说明，里面包含了如下信息：<br>数据说明<br>作品要求<br>评分方式</p><h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><p>我复现了top1的解决方案，以下是top1的解决方案：</p><h3 id="1-数据探查"><a href="#1-数据探查" class="headerlink" title="1.数据探查"></a><strong>1.数据探查</strong></h3><h5 id="分类label"><a href="#分类label" class="headerlink" title="分类label"></a><strong>分类label</strong></h5><p>根据赛事说明，该比赛是一个多分类的问题，对应着有11种套餐，首先看看这11种套餐的分布情况，可以看出它们的分布较为不均。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#导入数据</span><br>path = <span class="hljs-string">&#x27;D:/Pywork/2018_CCF_BDCI_CHINA_TOP1/project/preliminary_training_set/train_all.csv&#x27;</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">import_data</span>(<span class="hljs-params">path</span>):<br>    train_data = pd.read_csv(path, low_memory=<span class="hljs-literal">False</span>)<br>    <span class="hljs-keyword">return</span> train_data<br><br>train_data = import_data(path)<br><br><span class="hljs-comment"># current_service 条形图</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">service_view</span>(<span class="hljs-params">train_data,categories</span>):<br>    data_by_service = train_data.groupby(categories).size().reset_index(name=<span class="hljs-string">&#x27;counts&#x27;</span>)<br>    data_by_service[categories] = data_by_service[categories].astype(<span class="hljs-built_in">str</span>)<br>    <span class="hljs-built_in">print</span>(data_by_service)<br>    <span class="hljs-comment"># 随机生成几种颜色，reshape第二个参数-1指随着N变化，第一维度填满有剩就来填第二维</span><br>    <span class="hljs-comment"># 生成的是随机的N组三通道(r,g,b)的颜色</span><br>    N = <span class="hljs-number">7</span><br>    colors = np.random.rand(N * <span class="hljs-number">3</span>).reshape(N, -<span class="hljs-number">1</span>)<br>    fig, ax = plt.subplots()<br><br>    ax.bar(data_by_service[categories], data_by_service[<span class="hljs-string">&#x27;counts&#x27;</span>], color=colors)<br>    plt.xticks(rotation=<span class="hljs-number">270</span>)<br>    plt.xlabel(categories)<br>    plt.ylabel(<span class="hljs-string">&#x27;counts&#x27;</span>)<br>    plt.show()<br><span class="hljs-built_in">str</span> = <span class="hljs-string">&#x27;current_service&#x27;</span><br>service_view(train_data,<span class="hljs-built_in">str</span>)<br></code></pre></td></tr></table></figure><p><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/E.Y6SXlAuAZdQj0B0gLQ01oNeJ6d9fTl6fpWJMuVF5U!/b/dLYAAAAAAAAA&bo=gALgAQAAAAADF1E!&rf=viewer_4&t=5"></p><p>多分类问题，典型的评价指标为<strong>macro-f1</strong>：首先针对每个套餐类别，统计分别统计TP（预测答案正确），FP（错将其他类预测为本类），FN（本类标签预测为其他类标）。计算<strong>Precision</strong>(精确率)和<strong>Recall</strong>(召回率)</p><p><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/2CgTAjY8XgkPczB78E3PLBNvufN45qQ.lN*Y3ZNflc8!/b/dL4AAAAAAAAA&bo=vQHsAAAAAAADF2I!&rf=viewer_4&t=5"></p><p>举个具体场景的例子：</p><p>假如某个班级有男生80人,女生20人,共计100人.<br>目标是找出所有女生.<br>现在某人挑选出50个人,其中20人是女生,另外还错误的把30个男生也当作女生挑选出来了.<br>作为评估者的你需要来评估(evaluation)下他的工作<br><img src="http://pjqhk6p7v.bkt.clouddn.com/tp_fp.png"><br>通过表格可以得出：<br>TP:20<br>FP:30<br>FN:0<br>TN:50</p><p>精确率(precision)$$P &#x3D; \frac{TP}{TP+FP}$$<br>召回率(recall)的公式是：$$R&#x3D;\frac{TP}{TP+NP}$$,</p><p>首先我们可以计算<strong>精确率(precision)</strong>:很容易，我们可以得到,他把其中70(20女+50男)人判定正确了,而总人数是100人，所以它的accuracy就是70%(70 &#x2F; 100).</p><p><strong>召回率(recall)</strong>:它计算的是所有”正确被检索的item(TP)”占所有”应该检索到的item(TP+FN)”的比例,所以它的recall为100%.<br>如果单看某一个指标，预测结果是不会被正确衡量的。比如在以上例子中，如果我全部判断为女生，则召回率可以达到100%，单看召回率它是一个非常准确的预测，但此时你能说该模型的预测效果好吗，很显然不能。所以必须结合P,R一起看。结合起来最常见的方法应该就是F-Measure了，有些地方也叫做F-Score：<br>$$F&#x3D;\frac{(a^2+1)P*R} {a^2(P+R)}$$<br>当参数a&#x3D;1时，就是最常见的F1了：<br>$$F1 &#x3D; \frac{2PR} {P+R} $$</p><p>回到赛题，在得到每个类别下的F1-score后，对各个类别的F1-score求均值，得到最后的评测结果，计算方式如下：<br>$$score&#x3D;\frac 1n\sum{f1_k}$$</p><h5 id="原始特征与标签相关性"><a href="#原始特征与标签相关性" class="headerlink" title="原始特征与标签相关性"></a>原始特征与标签相关性</h5><p>以下是关于原始特征<strong>service_type和label相关性的观察图表</strong>：<br><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/KY5lH8e4LrLIXcvf7VHrq708jx51ArS2kVKuYJVXiGM!/b/dLkAAAAAAAAA&bo=sARtAgAAAAADF.k!&rf=viewer_4&t=5"><br>可以明显的看出一个规律，service_type可以将套餐分为两个部分，这两个部分是没有交叉的，其中一类有8个，另外一类有3个。这给我们比赛带来一个思路是，可以分模型预测。</p><p><strong>关于age和label相关性的观察图表：</strong><br><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/X5b5TqayXddoVT.HM*t6M24cdgZGjZxdJrepRtMBaoc!/b/dL4AAAAAAAAA&bo=gALgAQAAAAADF1E!&rf=viewer_4&t=5"></p><p>我们可以看到对于年龄来讲，基本上符合电信用户群体的分布,但是有很多0岁的异常值，对于异常值,可以先不做处理，或填充-1.</p><p><strong>关于gender和label相关性的观察图表：</strong><br><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/AQZ*DQ*mGsh*7Wi53H.sJja7P16s76WXyP5mfYD8SOM!/b/dL8AAAAAAAAA&bo=gALgAQAAAAADF1E!&rf=viewer_4&t=5"><br>我们观察到性别中有0 的缺省值，对于这部分，我们使用了两种方法处理，一种是填充service_type对应字段的众数，和原始值。最终选取了原始值.</p><h3 id="2-数据预处理"><a href="#2-数据预处理" class="headerlink" title="2.数据预处理"></a><strong>2.数据预处理</strong></h3><p>首先将分类的label映射到0-11数字当中便于处理</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus">train<span class="hljs-selector-attr">[<span class="hljs-string">&#x27;label&#x27;</span>]</span> = train<span class="hljs-selector-attr">[<span class="hljs-string">&#x27;current_service&#x27;</span>]</span><span class="hljs-selector-class">.map</span>(p)<br></code></pre></td></tr></table></figure><p>为了避免利用pandas.read_csv()导入的类型不统一。可以传入dtype&#x3D;set_str，pandas.read_csv(dtype&#x3D;set_str),来指定类型，set_str是自己创建的字典，每个字段指向的类型，均可自己设定。</p><p>对于年龄，话费不合理的值，用nan值替换。</p><h3 id="3-特征工程"><a href="#3-特征工程" class="headerlink" title="3.特征工程"></a><strong>3.特征工程</strong></h3><p>(1)关联规则<br>受max-encoding的方法的启发，对有关联关系的话费字段，1_total_fee, 2_total_fee, 3_total_fee, 4_total_fee四个字段的构建关联规则，这样可以利用整体信息，对话费字段这个强特征进行降维编码。使得其数据更加具有代表性<br>(2) 业务特征<br>业务特征的部分，我们深入研究了联通的套餐消费场景，从比赛的一开始，首先就通过联通官网以及消费论坛认真的开始调研工作，深入了解了联通的各种套餐特点和用户群差别。通过熟悉套餐的特性，我们可以为各种特定用户群推荐适宜他们的套餐，比如腾讯天王卡玩腾讯游戏看腾讯视频不花钱是深度腾讯用户的福音，蚂蚁大宝卡则可以赠送2g无差别流量给高流量消费者。联通传统套餐的各种优惠活动，比如预充值冲100返流量和话费，适合平时那些流量和话费不够用的用户，充值返话费则适合那些薅羊毛的用户。对此我们针对用户的流量和通话做了一系列特征，比例、差值，求和等，力求尽可能的描绘出一幅用户画像。</p><p>提出了以下几种针对业务的特征：</p><ol><li>话费减去16元是否是整数</li><li>流量的有效数字是否是27的整数倍</li><li>话费的有效数字能否被15乘除</li><li>话费是否是整数（用户可能未超套餐）</li><li>连续两个月套餐的差值能否被5,10,15,27,30等计费单元整除</li><li>四个月话费的最小值</li><li>计算流量的平均单价</li><li>计算通话时间的平均单价</li><li>等等…</li></ol><p> 伪代码如下：</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-comment"># 平均值 按照行 axis=1</span><br>data[month_fee[:4]].mean(<span class="hljs-attribute">axis</span>=1)<br>data[month_fee[:3]].mean(<span class="hljs-attribute">axis</span>=1)<br>data[month_fee[:2]].mean(<span class="hljs-attribute">axis</span>=1)<br>data[month_fee[:4]].std(<span class="hljs-attribute">axis</span>=1)<br><br><span class="hljs-comment"># CV 变异系数 = 标准差/平均数 </span><br><span class="hljs-comment"># 反映数据离散程度的绝对值，可以认为变异系数和极差、标准差和方差一样，可以消除测量尺度和量纲的影响</span><br>data[<span class="hljs-string">&#x27;total_fee_std4&#x27;</span>] / (data[<span class="hljs-string">&#x27;total_fee_mean4&#x27;</span>] + 0.1)<br><br><span class="hljs-comment"># 四个月最大，最小话费</span><br>data[month_fee[:4]].max(<span class="hljs-attribute">axis</span>=1)<br>data[month_fee[:4]].min(<span class="hljs-attribute">axis</span>=1)<br><br><span class="hljs-comment"># 电话时间 差，和，最小，最大</span><br>data[<span class="hljs-string">&#x27;service2_caller_time&#x27;</span>]-data[<span class="hljs-string">&#x27;service1_caller_time&#x27;</span>]<br>data[<span class="hljs-string">&#x27;service2_caller_time&#x27;</span>]+data[<span class="hljs-string">&#x27;service1_caller_time&#x27;</span>]<br>data[[<span class="hljs-string">&#x27;service2_caller_time&#x27;</span>, <span class="hljs-string">&#x27;service1_caller_time&#x27;</span>]].min(<span class="hljs-attribute">axis</span>=1)<br>data[[<span class="hljs-string">&#x27;service2_caller_time&#x27;</span>, <span class="hljs-string">&#x27;service1_caller_time&#x27;</span>]].max(<span class="hljs-attribute">axis</span>=1)<br><br><span class="hljs-comment">#  话费是否是整数</span><br>data[<span class="hljs-string">&#x27;&#123;&#125;_1&#x27;</span>.format(fee)] = ((data[fee] % 1 == 0) &amp; (data[fee] != 0))<br>data[<span class="hljs-string">&#x27;&#123;&#125;_01&#x27;</span>.format(fee)] = ((data[fee] % 0.1 == 0) &amp; (data[fee] != 0))<br><br><span class="hljs-comment"># 分组标准化</span><br>def grp_standard(data,keys,names,<span class="hljs-attribute">drop</span>=<span class="hljs-literal">False</span>):<br>    <span class="hljs-keyword">for</span> name <span class="hljs-keyword">in</span> names:<br>        new_name = name <span class="hljs-keyword">if</span> drop <span class="hljs-keyword">else</span> name + <span class="hljs-string">&#x27;_&#x27;</span> + keys + <span class="hljs-string">&#x27;_&#x27;</span> + <span class="hljs-string">&#x27;standardize&#x27;</span><br>        mean_std = data.groupby(keys, <span class="hljs-attribute">as_index</span>=<span class="hljs-literal">False</span>)[name].agg(&#123;<span class="hljs-string">&#x27;mean&#x27;</span>: <span class="hljs-string">&#x27;mean&#x27;</span>, <span class="hljs-string">&#x27;std&#x27;</span>: <span class="hljs-string">&#x27;std&#x27;</span>&#125;)<br>        data = data.merge(mean_std, <span class="hljs-attribute">on</span>=keys, <span class="hljs-attribute">how</span>=<span class="hljs-string">&#x27;left&#x27;</span>)<br>        data[new_name] = ((data[name]-data[<span class="hljs-string">&#x27;mean&#x27;</span>])/data[<span class="hljs-string">&#x27;std&#x27;</span>]).fillna(0).astype(np.float32)<br>        # 防止除0报错<br>        data[new_name] = data[new_name].replace(-np.inf, 0).fillna(0)<br>        data.drop([<span class="hljs-string">&#x27;mean&#x27;</span>, <span class="hljs-string">&#x27;std&#x27;</span>], <span class="hljs-attribute">axis</span>=1, <span class="hljs-attribute">inplace</span>=<span class="hljs-literal">True</span>)<br>        return data<br><br><span class="hljs-comment"># 按照 合约类型 标准化</span><br> data = grp_standard(data, <span class="hljs-string">&#x27;contract_type&#x27;</span>, [<span class="hljs-string">&#x27;1_total_fee_log&#x27;</span>], <span class="hljs-attribute">drop</span>=<span class="hljs-literal">False</span>)<br> <span class="hljs-built_in">..</span><span class="hljs-built_in">..</span><span class="hljs-built_in">..</span><span class="hljs-built_in">..</span><span class="hljs-built_in">..</span><span class="hljs-built_in">..</span><span class="hljs-built_in">..</span><br> #  年龄分组<br>data[<span class="hljs-string">&#x27;age_scatter&#x27;</span>] = pd.qcut(data[<span class="hljs-string">&#x27;age&#x27;</span>], 5)<br>data = grp_standard(data, <span class="hljs-string">&#x27;age_scatter&#x27;</span>, [<span class="hljs-string">&#x27;1_total_fee_log&#x27;</span>], <span class="hljs-attribute">drop</span>=<span class="hljs-literal">False</span>) <br><span class="hljs-built_in">..</span><span class="hljs-built_in">..</span><span class="hljs-built_in">..</span><span class="hljs-built_in">..</span><span class="hljs-built_in">..</span><span class="hljs-built_in">..</span><span class="hljs-built_in">..</span><br><span class="hljs-comment"># online_time 分组</span><br>data[<span class="hljs-string">&#x27;online_time_scatter&#x27;</span>] = pd.qcut(data[<span class="hljs-string">&#x27;online_time&#x27;</span>], 5)<br>data = grp_standard(data, <span class="hljs-string">&#x27;online_time_scatter&#x27;</span>, [<span class="hljs-string">&#x27;1_total_fee_log&#x27;</span>], <span class="hljs-attribute">drop</span>=<span class="hljs-literal">False</span>)<br><span class="hljs-built_in">..</span><span class="hljs-built_in">..</span><span class="hljs-built_in">..</span><span class="hljs-built_in">..</span><span class="hljs-built_in">..</span><span class="hljs-built_in">..</span><span class="hljs-built_in">..</span><span class="hljs-built_in">..</span><span class="hljs-built_in">..</span><br><span class="hljs-comment"># 热编码</span><br>data = pd.get_dummies(data, columns=[<span class="hljs-string">&#x27;contract_type&#x27;</span>], <span class="hljs-attribute">dummy_na</span>=-1)<br>data = pd.get_dummies(data, columns=[<span class="hljs-string">&#x27;net_service&#x27;</span>], <span class="hljs-attribute">dummy_na</span>=-1)<br>data = pd.get_dummies(data, columns=[<span class="hljs-string">&#x27;complaint_level&#x27;</span>], <span class="hljs-attribute">dummy_na</span>=-1)<br>    <br></code></pre></td></tr></table></figure><h3 id="3-构建模型"><a href="#3-构建模型" class="headerlink" title="3.构建模型"></a><strong>3.构建模型</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs python">params = &#123;<span class="hljs-string">&#x27;objective&#x27;</span>: <span class="hljs-string">&#x27;multi:softprob&#x27;</span>,<br>         <span class="hljs-string">&#x27;eta&#x27;</span>: <span class="hljs-number">0.5</span>,<br>         <span class="hljs-string">&#x27;max_depth&#x27;</span>: <span class="hljs-number">6</span>,<br>         <span class="hljs-string">&#x27;silent&#x27;</span>: <span class="hljs-number">1</span>,<br>         <span class="hljs-string">&#x27;num_class&#x27;</span>: <span class="hljs-number">3</span>,<br>         <span class="hljs-string">&#x27;eval_metric&#x27;</span>: <span class="hljs-string">&quot;mlogloss&quot;</span>,<br>         <span class="hljs-string">&#x27;min_child_weight&#x27;</span>: <span class="hljs-number">3</span>,<br>         <span class="hljs-string">&#x27;subsample&#x27;</span>: <span class="hljs-number">0.7</span>,<br>         <span class="hljs-string">&#x27;colsample_bytree&#x27;</span>: <span class="hljs-number">0.7</span>,<br>         <span class="hljs-string">&#x27;seed&#x27;</span>: <span class="hljs-number">66</span><br>         &#125;<br><span class="hljs-comment"># 单独拿 service_type=1出来训练 train_feat1</span><br>train_preds1, test_preds1 = xgb_cv(params, train_feat1, test_feat1, predictors1)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;xgb_cv函数返回的test_preds1的类&#123;&#125;&quot;</span>.<span class="hljs-built_in">format</span>(<span class="hljs-built_in">type</span>(test_preds1)))<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">xgb_cv</span>(<span class="hljs-params">params, train_feat, test_feat, predictors, label=<span class="hljs-string">&#x27;label&#x27;</span>,groups=<span class="hljs-literal">None</span>,cv=<span class="hljs-number">5</span>,stratified=<span class="hljs-literal">True</span></span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;开始CV 5折训练...&#x27;</span>)<br>    t0 = time.time()<br>    <span class="hljs-comment"># train_feat[label].nunique() 不同label的个数</span><br>    train_preds = np.zeros((<span class="hljs-built_in">len</span>(train_feat), train_feat[label].nunique()))<br>    test_preds = np.zeros((<span class="hljs-built_in">len</span>(test_feat), train_feat[label].nunique()))<br>    xgb_test = xgb.DMatrix(test_feat[predictors])<br>    models = []<br>    <span class="hljs-comment"># len(train_feat)个样本分成 5个样本集</span><br>    kf = KFold(<span class="hljs-built_in">len</span>(train_feat), n_folds=<span class="hljs-number">5</span>, shuffle=<span class="hljs-literal">True</span>, random_state=<span class="hljs-number">520</span>)<br>    <span class="hljs-keyword">for</span> i, (train_index, test_index) <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(kf):<br>        <span class="hljs-comment"># 将测试集均分 取一份当测试集</span><br>        xgb_train = xgb.DMatrix(train_feat[predictors].iloc[train_index], train_feat[label].iloc[train_index])<br>        xgb_eval = xgb.DMatrix(train_feat[predictors].iloc[test_index], train_feat[label].iloc[test_index])<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;..........开始第&#123;&#125;轮训练&quot;</span>.<span class="hljs-built_in">format</span>(i))<br>        params = &#123;<span class="hljs-string">&#x27;objective&#x27;</span>: <span class="hljs-string">&#x27;multi:softprob&#x27;</span>, <span class="hljs-comment"># 多分类的问题</span><br>                  <span class="hljs-string">&#x27;eta&#x27;</span>: <span class="hljs-number">0.1</span>,                    <span class="hljs-comment"># 如同学习率</span><br>                  <span class="hljs-string">&#x27;max_depth&#x27;</span>: <span class="hljs-number">6</span>,                <span class="hljs-comment"># 构建树的深度，越大越容易过拟合</span><br>                  <span class="hljs-string">&#x27;silent&#x27;</span>: <span class="hljs-number">1</span>,      <span class="hljs-comment"># 取0时表示打印出运行时信息，取1时表示以缄默方式运行，不打印运行时信息。缺省值为0</span><br>                  <span class="hljs-string">&#x27;num_class&#x27;</span>: <span class="hljs-number">11</span>,  <span class="hljs-comment"># 类别数，与 multisoftmax 并用</span><br>                  <span class="hljs-string">&#x27;eval_metric&#x27;</span>: <span class="hljs-string">&quot;mlogloss&quot;</span>,  <span class="hljs-comment"># 评价指标 negative log-likelihood</span><br>                  <span class="hljs-string">&#x27;min_child_weight&#x27;</span>: <span class="hljs-number">3</span>,<br>                  <span class="hljs-string">&#x27;subsample&#x27;</span>: <span class="hljs-number">0.7</span>,   <span class="hljs-comment"># 随机采样训练样本</span><br>                  <span class="hljs-string">&#x27;colsample_bytree&#x27;</span>: <span class="hljs-number">0.7</span>,  <span class="hljs-comment"># 生成树时进行的列采样</span><br>                  <span class="hljs-string">&#x27;seed&#x27;</span>: <span class="hljs-number">66</span><br>                  &#125; <span class="hljs-keyword">if</span> params <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span> <span class="hljs-keyword">else</span> params<br>        watchlist = [(xgb_train, <span class="hljs-string">&#x27;train&#x27;</span>), (xgb_eval, <span class="hljs-string">&#x27;val&#x27;</span>)]<br>        clf = xgb.train(params,<br>                        xgb_train,<br>                        num_boost_round=<span class="hljs-number">3000</span>,<br>                        evals=watchlist,<br>                        verbose_eval=<span class="hljs-number">50</span>,<br>                        early_stopping_rounds=<span class="hljs-number">50</span>)<br>        <span class="hljs-comment"># 每次更新的是从训练集中划出来的一部分测试集</span><br>        train_preds[test_index] += clf.predict(xgb_eval)<br>        <span class="hljs-comment"># xgb_test 是 xgb.DMatrix(test_feat) 的返回值</span><br>        test_preds += clf.predict(xgb_test)<br>        models.append(clf)<br>        pickle.dump(models, <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;xgb_&#123;&#125;.model&#x27;</span>.<span class="hljs-built_in">format</span>(datetime.datetime.now().strftime(<span class="hljs-string">&#x27;%Y%m%d_%H%M%S&#x27;</span>)), <span class="hljs-string">&#x27;+wb&#x27;</span>))<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;用时&#123;&#125;秒&#x27;</span>.<span class="hljs-built_in">format</span>(time.time()-t0))<br>        <span class="hljs-keyword">return</span> train_preds, test_preds/<span class="hljs-number">5</span><br><br></code></pre></td></tr></table></figure><p>xgb_cv函数解读：划分数据集的方法采用K折交叉验证，K折交叉验证具体实现是</p><ul><li>将数据集平均分割成K个等份<br><strong>sklearn.cross_validation.KFold</strong>(len(train_feat), n_folds&#x3D;5, shuffle&#x3D;True, random_state&#x3D;520)<br><strong>n_folds&#x3D;5</strong>，K折验证的K值；默认3，最小为2<br><strong>shuffle</strong>默认False;shuffle会对数据产生随机搅动(洗牌)<br><strong>random_state</strong>默认None，随机种子</li><li>使用1份数据作为测试数据，其余作为训练数据</li><li>计算测试准确率</li><li>使用不同的测试集，重复2、3步骤</li><li>对测试准确率做平均，作为对未知数据预测准确率的估计</li></ul><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">params</span> = &#123;<span class="hljs-string">&#x27;objective&#x27;</span>: <span class="hljs-string">&#x27;multi:softprob&#x27;</span>, <span class="hljs-meta"># 多分类的问题</span><br>          <span class="hljs-string">&#x27;eta&#x27;</span>: <span class="hljs-number">0.1</span>,                    <span class="hljs-meta"># 如同学习率</span><br>          <span class="hljs-string">&#x27;max_depth&#x27;</span>: <span class="hljs-number">6</span>,                <span class="hljs-meta"># 构建树的深度，越大越容易过拟合</span><br>          <span class="hljs-string">&#x27;silent&#x27;</span>: <span class="hljs-number">1</span>,      <span class="hljs-meta"># 取0时表示打印出运行时信息，取1时表示以缄默方式运行，不打印运行时信息。缺省值为0</span><br>          <span class="hljs-string">&#x27;num_class&#x27;</span>: <span class="hljs-number">11</span>,  <span class="hljs-meta"># 类别数，与 multisoftmax 并用</span><br>          <span class="hljs-string">&#x27;eval_metric&#x27;</span>: <span class="hljs-string">&quot;mlogloss&quot;</span>,  <span class="hljs-meta"># 评价指标 negative log-likelihood</span><br>          <span class="hljs-string">&#x27;min_child_weight&#x27;</span>: <span class="hljs-number">3</span>,<br>          <span class="hljs-string">&#x27;subsample&#x27;</span>: <span class="hljs-number">0.7</span>,   <span class="hljs-meta"># 随机采样训练样本</span><br>          <span class="hljs-string">&#x27;colsample_bytree&#x27;</span>: <span class="hljs-number">0.7</span>,  <span class="hljs-meta"># 生成树时进行的列采样</span><br>          <span class="hljs-string">&#x27;seed&#x27;</span>: <span class="hljs-number">66</span><br>          &#125; <span class="hljs-keyword">if</span> <span class="hljs-keyword">params</span> <span class="hljs-keyword">is</span> None <span class="hljs-keyword">else</span> <span class="hljs-keyword">params</span><br></code></pre></td></tr></table></figure><p><strong>xgb.train(params, xgb_train,num_boost_round&#x3D;3000,<br>evals&#x3D;watchlist, verbose_eval&#x3D;50, early_stopping_rounds&#x3D;50)</strong><br>**params:**训练的参数，上面代码块中有详细的解释<br>**xgb_train:**训练的数据</p><p>测试集的预测结果取5次的平均。</p><p>代码链接：<a href="https://pan.baidu.com/s/1VcY_BWTLPcONr2WGgr7bZA">https://pan.baidu.com/s/1VcY_BWTLPcONr2WGgr7bZA</a><br>密码：idgg</p><p>参考：</p><ul><li><a href="https://mp.weixin.qq.com/s/hOjLTNEBAt3DNiT6F-yHCw">机器学习初学者</a></li><li><a href="https://blog.csdn.net/iyuanshuo/article/details/80142730">Xgboost参数</a></li></ul><hr><iframe src="https://rawcdn.githack.com/YUTING0907/donate-page-yu/df1732a5993401f9d372918c3f7680ca0e1c2ca3/simple/index.html " style="overflow-x:hidden;overflow-y:hidden; border:0xp none #fff; min-height:240px; width:100%;"  frameborder="0" scrolling="no"></iframe></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>Machine Learning</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Machine Learning</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>你对一万小时定律有什么误解?</title>
    <link href="/posts/2018/12/28ddaee5.html"/>
    <url>/posts/2018/12/28ddaee5.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><h3 id="认识刻意练习"><a href="#认识刻意练习" class="headerlink" title="认识刻意练习"></a>认识刻意练习</h3><p>   有没有那么一本书里的内容让你觉得相见恨晚？《刻意练习》是我觉得相见恨晚的一本书，里面的学习方法对我的触动很大。</p><p>   我们都听过一万小时定律，意思是说要成为一个领域的专家，需要一万个小时，这被很多人误解我只要花够一万个小时在某个领域，我就可以成为那个领域的专家。其实这种为了完成任务式的一万个小时根本没有用。我想格拉德威尔先生在《异类》一书中提出一万小时定律的本意并不是为了强调那一万个小时。</p><p>   接下来看看一万个小时究竟有什么问题，驳斥1万小时定律可以玩一个巧妙的思想游戏，这就是古希腊哲学家欧布里德<br>（Eubulides）提出的沙堆悖论（Sorites paradox）：<br>1粒沙子不是堆。如果1粒沙子不是堆，那么2粒沙子也不是堆；如果2粒沙子不是堆，那么3粒沙子也不是堆；以此类推，9999粒沙子也不是堆；因此，1万粒沙子还不是堆。<strong>“破解”沙堆悖论时，我们经常不得不设定一个固定的边界</strong>。如果我们说“1万粒沙粒是一堆沙”，那么少于1万粒沙粒组成的就不能称之为一堆沙。那么这样区分9999粒沙和10001粒沙就有点不合理。这样不得不设定一个可变的边界，但是这个边界是多少呢？我们现在并不知道。那么最初设定的“1万粒沙粒是一堆沙”作为知识的价值就被削减了。<strong>练习的成果并不与时间呈正相关，这一点，也取决于练习方法</strong>。<strong>刻意练习是成为某一个领域专家的正确练习方式，而并不是时间量的达标</strong>。</p><h3 id="刻意练习的必要条件-—有目的的练习"><a href="#刻意练习的必要条件-—有目的的练习" class="headerlink" title="刻意练习的必要条件 —有目的的练习"></a>刻意练习的必要条件 —有目的的练习</h3><p><strong>有目的的练习</strong>是我们迈向<strong>刻意练习</strong>的第一步，有目的的练习具有以下四个特征：</p><p> <strong>1. 有目的的练习具有定义明确的特定目标</strong><br> 假想一个音乐学生，给自己设定了一个目标“连续三次，不犯任何错误，以适当的速度弹奏完曲子”，和一个完整的弹奏完一首曲子没有设置明确的目标的学生相比，谁的进步更快，明显是后者，因为如果不制定这样的目标，根本没办法判断练习是否是正确了。</p><p><strong>2.有目的的练习是专注的</strong><br>在进行练习时，必须把全部集中力放在你的任务上。</p><p><strong>3.有目的的练习包含反馈</strong><br>不论你在努力做什么事情，都需要反馈来准确辨别你在哪些方面还有不足，以及怎么会存在这些不足。如果没有反馈（要么是你自己给自己提出的，要么是局外人给你提出的），你不可能搞清楚你在哪些方面还需提高，或者你现在离实现你的目标有多远。</p><p><strong>4.有目的的练习需要走出舒适区</strong><br>走出舒适区，意味着要试着做一些你以前没做过的事情。有时候，你也许发现，做一些没做过的事情，相对较为容易，然后你会继续逼迫自己。但有时候，你偶然碰到了那些让你感到很难做好的事情，似乎你永远也做不了。想办法去逾越这些障碍，是通向有目的的练习的隐藏钥匙。试着做不同的事情，而非更难的事情。</p><p><strong>总结一下有目的的练习:</strong><br>走出你的舒适区，但要以专注的方式制订明确的目标，为达到那些目标制订一个计划，并且想出监测你的进步的方法。哦，还要想办法保持你的动机。</p><p>  有目的的练习只能保证人体短时间的记忆，当有目的练习达到瓶颈时，我们需要另找办法。这时我们就需要在有目的的练习上再建立心理表征，心理表征是什么呢? </p><h3 id="创建心理表征"><a href="#创建心理表征" class="headerlink" title="创建心理表征"></a>创建心理表征</h3><p>  心理表征是一种与我们大脑正在思考的某个物体、某个观点、某些信息或者其他任何事物相对应的心理结构，或具体或抽象。一个简单的例子是视觉形象。例如，一提到蒙娜丽莎，很多人马上便会在脑海中“看到”那幅著名油画的形象；那个形象就是蒙娜丽莎在他们脑海中的心理表征。由于各个行业或领域之间心理表征的细节具有极大差异，我们难以给出一个十分清晰的顶层定义，但基本上，这些表征是信息预先存在的模式（比如事实、图片、规则、关系，等等），这些模式保存在长时记忆之中，可以用于有效且快速地顺应某些类型的局面。对于所有的心理表征，有一点是相同的：尽管短时记忆存在局限，但它们使得人们可以迅速地处理大量信息。</p><p>而创建心理表征是《刻意练习》中的重要环节，艾利克森在《刻意练习》之中提出了刻意练习的指向与本质，它就是长时记忆。核心观点就是，那些处于中上水平的人们，拥有一种较强的记忆能力：长时记忆。长时记忆正是区分卓越者与一般人的一个重要能力。</p><p>长时记忆的培养要点主要有以下几个：<br>◆<strong>赋予意义，精细编码：</strong><br>（准）专家们能非常快地明白自己领域的单词与术语，在存<br>储信息的时候，可以有意识地采取元认知的各项加工策略。</p><p>◆<strong>提取结构或模式：</strong><br>往往需要将专业领域的知识、提取结构或者模式以更好的方式存储。比如，专家级的开发者善用设计模式。</p><p>◆<strong>加快速度、增加连接：</strong><br>通过大量重复的刻意练习，专家在编码与提取过程方面比新<br>手都快很多，增加了长时记忆与工作记忆之间的各种通路。</p><p>所以，刻意练习的本质是去买SSD硬盘，而不是纯粹卖苦力，更不是帮畅销书作者们营销，喊喊热血口号：1万小时，今天，你坚持了吗？</p><h3 id="如何实践刻意练习"><a href="#如何实践刻意练习" class="headerlink" title="如何实践刻意练习"></a>如何实践刻意练习</h3><p>  首先，它需要一个已经得到合理发展的行业或领域，也就是说，在那一行业或领域之中，最杰出的从业者已达到一定程度的表现水平，使他们与其他刚刚进入该行业或领域的人们明显地区分开来。<strong>找出杰出人物和其他人的差别</strong>。一旦你已经辨认出某个行业或领域中的杰出人物，下一步就是<strong>有针对性地思考他们都做了些什么</strong>，使自己从同一个行业或领域中那些成就不太卓著的人之中脱颖而出，同时<strong>还要思考哪些训练方法帮助他们实现了卓越</strong>。问题的一部分出在心理表征发挥的关键作用。在许多行业或领域之中，心理表征质量的高低将最杰出人物和其他人区分开来。</p><p><strong>其次，自己设计练习方法，设定明确的目标与计划</strong>。</p><p><strong>最后用“三个F”创建有效的心理表征</strong>。这三个F，其实是以字母F开头三个单词，即：<strong>专注</strong>（focus）、<strong>反馈</strong>（feedback）以及<strong>纠正</strong>（fix it）。将技能分解成一些组成部分，以便反复地练习，并且有效地分析、确定你的不足之处，然后想出各种办法来解决它们。</p><p>小tips：富兰克林如何提高写作技巧</p><p>  富兰克林首先偶然看到了一期英国杂志《观察者》,被里面高质量的文章深深吸引，他立下目标决定也要写出这样高质量的文章。于是他开始观察，一旦他忘记了文章中的一些句子的措辞，可以怎样以最为接近的方式重写那些句子。所以他选择了自己喜欢的几篇文章，然后写下对每个内容的简短描述，只要能够让他回想起来句子是什么意思就行。</p><p>  不久，他开始厌倦从一开始自己写下的线索中重写文章。他的目的不是复写这些文章，他的目的是要让自己写的文章和它们一样用词精炼，描写细致入微。所以他写完后，开始对比文章，在必要时纠正自己的版本，这教会了富兰克林如何明确且中肯地表达观点。</p><p>  后来他发现自己的词汇积累量并不像《观察者》的投稿者那样丰富，并不是说他不认识，而是无法在写作时“文思泉涌，信手拈来”。为了这一目标，他想出了前一种练习的变体，他确定，写诗将迫使他想出不同的词语。因此他找到《观察者》杂志的一些文章，并将他们改写成诗句。再接下来，等待了足够多的时间之后，再把这些诗句改写成散文。这使他形成了一个习惯，就是找到正确的词汇，并且增加对词汇的积累量，以至于他可以迅速从记忆中调用这些词汇。</p><p>  最后，富兰克林再来完善文章的总体结构和逻辑。他找来《观察者》的文章，为每一个句子都写下一些提示的线索，并把顺序打乱，使词汇处于完全无序的状态。然后等到足够长的时间，它忘记那些文章如何措辞，再一次复写文章。他找来从某一篇文章中摘抄下来的、没有按顺序排列的提示线索，并按他认为最符合逻辑的顺序来排列，根据每条线索写出一些句子，并将自己写的结果与最初的文章进行对比。这样的练习，迫使他小心翼翼地思考怎样在文章中理清思路。如果他发现，在文章中的某些地方，他整理的思路与原文作者的思路不一致，他会纠正自己，并试着从这些错误中学习。</p><p>我们可以类比富兰克林提高写作技巧的方法来制定自己的刻意练习方法。</p><iframe src="https://rawcdn.githack.com/YUTING0907/donate-page-yu/df1732a5993401f9d372918c3f7680ca0e1c2ca3/simple/index.html " style="overflow-x:hidden;overflow-y:hidden; border:0xp none #fff; min-height:240px; width:100%;"  frameborder="0" scrolling="no"></iframe></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    
    <tags>
      
      <tag>life</tag>
      
      <tag>study skills</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>搭建自己的个人网站(彩蛋)</title>
    <link href="/posts/2018/12/565e99e7.html"/>
    <url>/posts/2018/12/565e99e7.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><p>本篇彩蛋是基于上两篇个人网站搭建系列博文增加新的功能（评论、打赏）<br>以Anisina主题为例</p><p>难度指数：♥♥<br>系统环境：win8</p><h2 id="评论功能"><a href="#评论功能" class="headerlink" title="评论功能"></a>评论功能</h2><p>本文采用的是valine评论系统，首先你需要注册一个<a href="https://leancloud.cn/">leancloud</a>账户,然后创建一个应用来存储管理评论内容,注册和创建新应用完了之后，就完成了准备工作。</p><p><strong>1.准备工作就绪后，然后修改 Anisina主题配置文件 _config.yml</strong></p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs nix"><span class="hljs-comment"># Valine comment system https://valine.js.org</span><br><span class="hljs-params">valine:</span> <br>  <span class="hljs-params">enable:</span> <span class="hljs-literal">true</span><br>  <span class="hljs-params">appid:</span>  KPXIfOuMVwWIv2Skprm5gYB<br>  <span class="hljs-params">appkey:</span> f92SiTdYRrLO0zwfdQ<br>  <span class="hljs-params">verify:</span> <span class="hljs-literal">false</span> <span class="hljs-comment">#验证码</span><br>  <span class="hljs-params">notify:</span> <span class="hljs-literal">false</span> <span class="hljs-comment">#评论回复提醒</span><br>  <span class="hljs-params">avatar:</span> mm <span class="hljs-comment">#评论列表默认头像样式</span><br>  <span class="hljs-params">placeholder:</span> Just go go <span class="hljs-comment">#评论框占位符</span><br>  <br><span class="hljs-params">CDN:</span><br>  <span class="hljs-params">valine:</span> http:<span class="hljs-operator">//</span>unpkg.com<span class="hljs-operator">/</span>valine@<span class="hljs-number">1.2</span>.<span class="hljs-number">0</span><span class="hljs-operator">-</span>beta1<span class="hljs-operator">/</span>dist<span class="hljs-operator">/</span>Valine.min.js<br></code></pre></td></tr></table></figure><p>这里的appid，appkey可在创建的新应用的设置里面查看<br>新应用名称&gt;设置&gt;应用Key<br><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/TzCVOAq*UEKUbBlUDelxgRYGM3KQVijH5xouYp4MJB4!/b/dL4AAAAAAAAA&bo=IgLrAQAAAAADF*g!&rf=viewer_4&t=5"></p><p><strong>2.修改 Anisina&#x2F;layout&#x2F;_partial&#x2F;article.ejs</strong></p><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs mel">&lt;% <span class="hljs-keyword">if</span> (!index &amp;&amp; post.comments)&#123; %&gt;<br>    &lt;% <span class="hljs-keyword">if</span> (theme.duoshuo.on) &#123; %&gt;<br>      &lt;%- partial(<span class="hljs-string">&#x27;comments/duoshuo&#x27;</span>, &#123;<br>          key: post.path,<br>          title: post.title,<br>          url: config.url+url_for(post.path),<br>          &#125;) %&gt;<br>    &lt;% &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (theme.youyan.on) &#123; %&gt;<br>        &lt;%- partial(<span class="hljs-string">&#x27;comments/youyan&#x27;</span>) %&gt;<br>    &lt;% &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (theme.disqus.on) &#123; %&gt;<br>        &lt;%- partial(<span class="hljs-string">&#x27;comments/disqus&#x27;</span>, &#123;<br>            shortname: theme.disqus.shortname<br>          &#125;) %&gt;<br>    &lt;% &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (config.disqus_shortname) &#123; %&gt;<br>        &lt;%- partial(<span class="hljs-string">&#x27;comments/disqus&#x27;</span>, &#123;<br>            shortname: config.disqus_shortname<br>          &#125;) %&gt;<br>   &lt;% &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (theme.valine.on)&#123; %&gt;<br>       &lt;%- partial(<span class="hljs-string">&#x27;comments/valine&#x27;</span>, &#123;<br>           key: post.slug,<br>           title: post.title,<br>           url: config.url+url_for(post.path)<br>       &#125;) %&gt;<br>    &lt;% &#125; %&gt;<br>&lt;% &#125; %&gt;<br><br></code></pre></td></tr></table></figure><p><strong>3.创建 layout&#x2F;_partial&#x2F;comments&#x2F;valine.ejs 文件</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">section</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;comments&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;margin: 2em; padding: 2em; background: rgba(255, 255, 255, 0.5)&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;vcomment&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;comment&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;//cdn1.lncld.net/static/js/3.0.4/av-min.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;&lt;%- theme.CDN.valine %&gt;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">      <span class="hljs-keyword">new</span> <span class="hljs-title class_">Valine</span>(&#123;</span><br><span class="language-javascript">        <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#vcomment&#x27;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">notify</span>: <span class="hljs-string">&#x27;&lt;%= theme.valine.notify %&gt;&#x27;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">verify</span>: <span class="hljs-string">&#x27;&lt;%= theme.valine.verify %&gt;&#x27;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">app_id</span>: <span class="hljs-string">&quot;&lt;%= theme.valine.appid %&gt;&quot;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">app_key</span>: <span class="hljs-string">&quot;&lt;%= theme.valine.appkey %&gt;&quot;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">placeholder</span>: <span class="hljs-string">&quot;&lt;%= theme.valine.placeholder %&gt;&quot;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">avatar</span>: <span class="hljs-string">&quot;&lt;%= theme.valine.avatar %&gt;&quot;</span></span><br><span class="language-javascript">      &#125;);</span><br><span class="language-javascript">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span><br></code></pre></td></tr></table></figure><p>完成，部署hexo后就可以看到评论功能新增上去了</p><h2 id="打赏功能"><a href="#打赏功能" class="headerlink" title="打赏功能"></a>打赏功能</h2><p>效果可以先预览一下</p><iframe src="https://rawcdn.githack.com/YUTING0907/donate-page-yu/df1732a5993401f9d372918c3f7680ca0e1c2ca3/simple/index.html " style="overflow-x:hidden;overflow-y:hidden; border:0xp none #fff; min-height:240px; width:100%;"  frameborder="0" scrolling="no"></iframe><p><strong>1.首先到我的github页去Fork 一下这个项目donate-page-yu</strong><br><a href="https://github.com/YUTING0907">https://github.com/YUTING0907</a><br>这个我是Fork 了TinyJay的repositories </p><p><strong>2.然后在donate-page-yu&#x2F;simple&#x2F;images&#x2F;下</strong> 修改你的支付宝，微信收款等其他收款码，当然你也可以不修改, 扫我的收款码就可以了~</p><p><strong>3.进入这个路径：donate-page&#x2F;simple&#x2F;index.html,复制该路径，然后进入</strong><a href="http://raw.githack.com/">http://raw.githack.com/</a> <strong>生成对应的访问链接。</strong><br><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/XTbfuH3ETb1NM2DJo.MKvH9ByYiaV4R0R0mUsWgD8EI!/b/dL8AAAAAAAAA&bo=zwQMAgAAAAADF*c!&rf=viewer_4&t=5"></p><p><strong>4.修改iframe</strong></p><p>将下面的代码中src对应的网页指向改为刚刚生成的网页，之后将下面的iframe代码块放到文章中就可以了</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs routeros">&lt;iframe <span class="hljs-attribute">src</span>=<span class="hljs-string">&quot;https://rawcdn.githack.com/YUTING0907/donate-page-yu/df1732a5993401f9d372918c3f7680ca0e1c2ca3/simple/index.html </span><br><span class="hljs-string">&quot;</span> <span class="hljs-attribute">style</span>=<span class="hljs-string">&quot;overflow-x:hidden;overflow-y:hidden; border:0xp none #fff; min-height:240px; width:100%;&quot;</span>  <br><span class="hljs-attribute">frameborder</span>=<span class="hljs-string">&quot;0&quot;</span> <span class="hljs-attribute">scrolling</span>=<span class="hljs-string">&quot;no&quot;</span>&gt;&lt;/iframe&gt;<br></code></pre></td></tr></table></figure><iframe src="https://rawcdn.githack.com/YUTING0907/donate-page-yu/df1732a5993401f9d372918c3f7680ca0e1c2ca3/simple/index.html " style="overflow-x:hidden;overflow-y:hidden; border:0xp none #fff; min-height:240px; width:100%;"  frameborder="0" scrolling="no"></iframe></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>博客</category>
      
    </categories>
    
    
    <tags>
      
      <tag>hexo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>一个人越过越年轻是喜还是悲</title>
    <link href="/posts/2018/12/a206b8ce.html"/>
    <url>/posts/2018/12/a206b8ce.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><h2 id="一个人越过越年轻是喜还是悲"><a href="#一个人越过越年轻是喜还是悲" class="headerlink" title="一个人越过越年轻是喜还是悲"></a><strong>一个人越过越年轻是喜还是悲</strong></h2><p>故事发生一战结束初期，一位名叫Gateau的知名钟表匠受邀为火车站制作一个大钟，他儿子在战争中失去了生命，他希望时间可以倒转，战争没有发生，世界和平，儿子重返家园。所以把大钟做成了倒转的模样。</p><p>就在这时，一个新生儿降临在一个有着124年做纽扣生意历史的家族中，虽是新生儿却没有那般吹弹可破的皮肤，生下来就是充满褶皱的脸，各方面都很糟糕，像极了八十岁的老人。</p><p>它一出生，她妈妈就难产死了，爸爸也因为他奇丑无比而抛弃了他，把他扔在老人院门口，襁褓里只夹带了18美分。</p><p>本杰明被好心的Queenie收养，巧的是跟一群老人生活在一起，他跟周围老人一样坐轮椅，但却像孩子一样对这个世界一无所知。他听着老人们讲述自己的一生。</p><p>等到他五岁的时候，他慢慢学会了走路。他在老人公寓遇到了后来带他开始航海之旅的船长，当船长问本杰明一生碰过几个女人时，他说一个也没有，那时的本杰明虽然长得老，但也才十几岁。船长带他去妓院爽了一把。那一夜他异常的兴奋</p><p>本杰明在老人公寓还遇到了一个眼眸无比清澈的女孩子黛西，他们在很小的就认识了。那时候本杰明外貌还是很老，但是黛西却说我觉得你跟别人不一样。</p><p>本杰明感觉自己的身体一天比一天年轻，在18岁的时候，离开了家乡，他答应黛西无论到哪里，都会给她寄明信片。本杰明随着船长去远航，期间遭遇了日本偷袭珍珠港，船长的船要做军用，而船上的水手自然而然的变成了海军，包括本杰明。有一天夜里，他们遇上了日军军船，那天晚上死了很多人。船长死了，还有一个前天夜里把自己所有积蓄拿出来托付给本杰明，叫他寄给她的妻儿，说他一直在想他们。可能由于在老人院，经历了太多周围的人的生生死死，本杰明很平静但很惋惜。<br><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/TpYccEQe4Sdm37iY82dXvgz94s8pNTQYwAMg48vbs88!/b/dLkAAAAAAAAA&bo=OATUAgAAAAARF8o!&rf=viewer_4&t=5"></p><p>同时黛西也在慢慢长大，成了有名的芭蕾舞舞者，也与别的男孩谈过恋爱，但即使晚上睡在别人旁边，黛西也总会在睡觉前说，晚安，本杰明。直到一次意外车祸，她再也不能跳舞。本杰明千里迢迢赶过来照顾她，但黛西却赶他走，因为她看着本杰明越来越年轻英俊，而自己这般窘态。本杰明一直在暗中关心她，直到她的腿能再次下床走路。</p><p>他们在一次次错过与过错中，终于在两个人生命的中点遇见，在一切都刚刚好的时间，他们疯狂醉入爱河。两人有了小baby，是个女孩，在女孩儿满一周岁，他给她办了周岁生日party后，本杰明选择离开她们，在女儿还对他没有印象的时候。他对黛西说，我不想你到时候养两个孩子，你应该给卡洛琳找一个成熟的爸爸，而不是玩伴。他从他亲身父亲那里得到了一笔遗产，他什么都没带走，走的时候只穿走了一件夹克。就像他一出生那样，他的一生必定写满不平凡，爱而不能陪在挚爱的人身边，有着比别人多的孤独。<strong>在不顺心的时候，你可以像疯狗那样发狂，你可以破口大骂，诅咒命运，但到头来，还是得放手。</strong><br><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/QgIQbqM8q0EQQSt*PMqKEY4YAt*EEjc3Sh8d1YJ8xsc!/b/dLkAAAAAAAAA&bo=OASiAwAAAAARF70!&rf=viewer_4&t=5"><br>本杰明慢慢变小，慢慢地很多事都不记得了，只是一直念着黛西。他后来回到那个老人公寓，变小的本杰明变得很难管，他们后来找来黛西，黛西那时也已人入黄昏，看着小本杰明感慨万千，最后他变成婴儿，死在了黛西的怀里。本杰明给女儿写过很多信一封都没有寄出去。<br>他说：“我希望 可以领着你 上第一天学”，“我希望你伤心的时候有我安慰”，“我希望可以在你睡前吻你”，“我希望 可以在你身边 教你钢琴”，“我希望可以告诉你 别去追那邦楞头小子”，“我希望我可以当你的爸爸”。<br><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/MnQQ.H..FNfcP3mztTF5OzkjBoWfl4r0JtIrz0aZp4Y!/b/dL8AAAAAAAAA&bo=OAQJBAAAAAARFxE!&rf=viewer_4&t=5"><br><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/.X9*xY8iy0HnUi9zw1NZDQo5Krdn4ujHDgobnTh6eDQ!/b/dDYBAAAAAAAA&bo=OASiAwAAAAARF70!&rf=viewer_4&t=5"></p><p>整个电影在黛西和本杰明的女儿的叙述中娓娓道来的，在她妈妈黛西即将老死的病房里，在本杰明记录自己一生的日记本里，女孩在妈妈将死的一刻才知道这个凄美的故事。看完电影，好像走完了一生。</p><iframe src="https://rawcdn.githack.com/YUTING0907/donate-page-yu/df1732a5993401f9d372918c3f7680ca0e1c2ca3/simple/index.html " style="overflow-x:hidden;overflow-y:hidden; border:0xp none #fff; min-height:240px; width:100%;"  frameborder="0" scrolling="no"></iframe></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    
    <tags>
      
      <tag>life</tag>
      
      <tag>movies</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>搭建自己的个人网站(下)</title>
    <link href="/posts/2018/12/3bf5cea0.html"/>
    <url>/posts/2018/12/3bf5cea0.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><p>本篇个人网站搭建系列博文是基于:GitHub+Hexo。<br>难度指数：♥♥<br>系统环境：win8</p><p>修饰上篇搭建的个人网站框架(包括theme主题设置、头像的设置、以及图片的显示、链接上自己的RSS)</p><h2 id="Hexo克隆主题"><a href="#Hexo克隆主题" class="headerlink" title="Hexo克隆主题"></a>Hexo克隆主题</h2><p>在初始化hexo后，也就是执行hexo init 命令后会给一个默认的主题：landscape。里面还有一篇写好的示例文章：Hello World</p><h4 id="选择喜欢的主题"><a href="#选择喜欢的主题" class="headerlink" title="选择喜欢的主题"></a>选择喜欢的主题</h4><p>觉得不喜欢可以换主题，以下链接可以供你挑选自己喜欢的主题<br><a href="https://hexo.io/themes">Themes</a></p><p>我选择的是Aisina，这里就以Aisina为例，讲主题的配置</p><h4 id="通过git命令下载"><a href="#通过git命令下载" class="headerlink" title="通过git命令下载"></a>通过git命令下载</h4><p>找到之后通过git命令下载<br>界面右侧，在主题的repository点击clone 复制一下那个地址<br><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/O*u6Zb9euiuiSSnDUbQKGeA0FADpHFfcQT6RASgQNwg!/b/dDQBAAAAAAAA&bo=yQRWAgAAAAADF6s!&rf=viewer_4&t=5"></p><h4 id="在你计算机本地文件夹-YUTING0907-github-io-x2F-themes-x2F-下新建一个文件夹Anisina"><a href="#在你计算机本地文件夹-YUTING0907-github-io-x2F-themes-x2F-下新建一个文件夹Anisina" class="headerlink" title="在你计算机本地文件夹 YUTING0907.github.io&#x2F;themes&#x2F; 下新建一个文件夹Anisina"></a>在你计算机本地文件夹 YUTING0907.github.io&#x2F;themes&#x2F; 下新建一个文件夹Anisina</h4><p>执行复制代码</p><pre><code class="hljs">$ git clone 复制的地址  themes/Anisina</code></pre><p>后面还可以将自己博客个性化装饰~</p><h4 id="修改整站配置文件"><a href="#修改整站配置文件" class="headerlink" title="修改整站配置文件"></a>修改整站配置文件</h4><p>配置文件是 _config.yml，在YUTING0907.github.io目录下，可以用记事本打开，但推荐用Nodepad++或者UE打开。</p><p>修订清单如下，文档内有详细注释，可按注释逐个修订</p><pre><code class="hljs"># Hexo Configuration## Docs: https://hexo.io/docs/configuration.html## Source: https://github.com/hexojs/hexo/# Sitetitle: YUTINGsubtitle: 2019 TO BE YOUR YEARdescription: &quot;YUTING在 Github 上的个人博客&quot;keywords: MLauthor: Echo Yulanguage: zh-CNtimezone: Asia/Shanghai</code></pre><p>​<br>    # custom Site settings<br>    # more detail check out docs<br>    SEOTitle: YUTING’s blog<br>    header-img: &#x2F;&#x2F;o7bkkhiex.bkt.clouddn.com&#x2F;lion-blur-bg.jpg<br>    email: <a href="mailto:&#89;&#85;&#x54;&#73;&#x4e;&#71;&#x39;&#53;&#57;&#55;&#x40;&#x31;&#54;&#x33;&#46;&#x63;&#x6f;&#x6d;">&#89;&#85;&#x54;&#73;&#x4e;&#71;&#x39;&#53;&#57;&#55;&#x40;&#x31;&#54;&#x33;&#46;&#x63;&#x6f;&#x6d;</a></p><pre><code class="hljs">favicon: # your favicon png# custom end</code></pre><p>​<br>    # URL<br>    ## If your site is put in a subdirectory, set url as ‘<a href="http://yoursite.com/child&#39;">http://yoursite.com/child&#39;</a> and root as ‘&#x2F;child&#x2F;‘<br>    url: <a href="http://yuting0907.github.io/">http://YUTING0907.github.io</a><br>    root: &#x2F;<br>    permalink: :year&#x2F;:month&#x2F;:day&#x2F;:title&#x2F;<br>    permalink_defaults:</p><p>​<br>​<br>    # SNS settings<br>    # RSS:<br>    weibo_username: ytfantastic<br>    zhihu_username: yu-ting-66-78<br>    github_username: YUTING0907<br>    twitter_username: YUTING<br>    facebook_username: YUTING<br>    linkedin_username:  </p><pre><code class="hljs"># Build settingsanchorjs: false          # if you want to customize anchor. check out line:181 of `post.html`</code></pre><p>​<br>    # Disqus settings<br>    disqus_username: </p><pre><code class="hljs"># Duoshuo settingsduoshuo_username:  # 你的多说帐号# Share component is depend on Comment so we can NOT use share only.duoshuo_share: true    # set to false if you want to use Comment without Sharing# Use livereuse_livere:# Valine comment system https://valine.js.orgvaline:   enable: false  appid:  #Leancloud应用的appId  appkey:  #Leancloud应用的appKey  verify: false #验证码  notify: false #评论回复提醒  avatar: mm #评论列表默认头像样式  placeholder: Just go go #评论框占位符# Analytics settings# Baidu Analyticsba_track_id:# Google Analyticsga_track_id:             # Format: UA-xxxxxx-xxga_domain:# Featured Tagsfeatured-tags: true                     # whether or not using Feature-Tagsfeatured-condition-size: 1              # A tag will be featured if the size of it is more than this condition value# friendsfriends:  # 友链</code></pre><p>​<br>​<br>    # Directory<br>    source_dir: source<br>    public_dir: public<br>    tag_dir: tags<br>    archive_dir: archives<br>    category_dir: categories<br>    code_dir: downloads&#x2F;code<br>    i18n_dir: :lang<br>    skip_render:</p><pre><code class="hljs"># Writingnew_post_name: :title.md # File name of new postsdefault_layout: posttitlecase: false # Transform title into titlecaseexternal_link: true # Open external links in new tabfilename_case: 0render_drafts: falsepost_asset_folder: truerelative_link: falsefuture: truehighlight:  enable: true  line_number: true  auto_detect: false  tab_replace:</code></pre><p>​<br>    # Home page setting<br>    # path: Root path for your blogs index page. (default &#x3D; ‘’)<br>    # per_page: Posts displayed per page. (0 &#x3D; disable pagination)<br>    # order_by: Posts order. (Order by date descending by default)<br>    index_generator:<br>      path: ‘’<br>      per_page: 10<br>      order_by: -date</p><pre><code class="hljs"># Category &amp; Tagdefault_category: uncategorizedcategory_map:tag_map:# Date / Time format## Hexo uses Moment.js to parse and display date## You can customize the date format as defined in## http://momentjs.com/docs/#/displaying/format/date_format: YYYY-MM-DDtime_format: HH:mm:ss# Pagination## Set per_page to 0 to disable paginationper_page: 10pagination_dir: page# Extensions## Plugins: https://hexo.io/plugins/## Themes: https://hexo.io/themes/theme: Anisinamarkdown:  plugins:    - markdown-it-abbr    - markdown-it-footnote    - markdown-it-ins    - markdown-it-sub    - markdown-it-sup    - markdown-it-emoji# Deployment## Docs: https://hexo.io/docs/deployment.htmldeploy:  type: git  repository: git@github.com:YUTING0907/YUTING0907.github.io.git  branch: master</code></pre><p>​<br>    # Qiniu imageView2 API<br>    # More info <a href="http://developer.qiniu.com/code/v6/api/kodo-api/image/imageview2.html">http://developer.qiniu.com/code/v6/api/kodo-api/image/imageview2.html</a><br>    clip-content: “?imageView2&#x2F;1&#x2F;w&#x2F;1400&#x2F;h&#x2F;400&#x2F;interlace&#x2F;1&#x2F;q&#x2F;90”<br>    clip-avatar: “?imageView2&#x2F;2&#x2F;w&#x2F;300&#x2F;h&#x2F;300&#x2F;interlace&#x2F;1&#x2F;q&#x2F;90”<br>    clip-home-post-bg: “?imageView2&#x2F;1&#x2F;w&#x2F;800&#x2F;h&#x2F;300&#x2F;interlace&#x2F;1&#x2F;q&#x2F;70”</p><pre><code class="hljs"># post default imagespost-default-img: &quot;5.gif&quot; #博文默认的图片post-default-img-mobile: #移动端显示的图片# search api , set your custom keyswiftype_key: </code></pre><p>​<br>    # archive page title<br>    archive:<br>        title: archives<br>        description: 可以根据归档日期检索所有文件</p><pre><code class="hljs"># Sidebar settingssidebar: truesidebar-about-description: &quot;看看你的时间都花在哪了&quot;sidebar-avatar: /image/20181215001153.jpg    # img CDN pathcdn-url: &quot;http://pjqhk6p7v.bkt.clouddn.com/&quot;reward_comment: 坚持原创技术分享，您的支持将鼓励我继续创作！wechatpay: /image/WeChatQR.jpgalipay: /image/aipay.jpg  post_copyright:  enable: true   author: yuting   copyright_text: 作者拥有版权，请注明出处转载。</code></pre><p>​<br>    # create by yuting</p><pre><code class="hljs">#gitmentgitment:  #id：  owner: YUTING0907  repo: YUTING0907.github.io  client:     id: d9972ee4a19b27a1c952     secret: 717a42cc6c5bb05dbf6b53180def49e7e4e42501</code></pre><h4 id="在Github上设置OAuth-Apps"><a href="#在Github上设置OAuth-Apps" class="headerlink" title="在Github上设置OAuth Apps"></a>在Github上设置OAuth Apps</h4><p><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/rHYddItm.czImPrq4LkOLNBA6a4sI3MOcBU1oT*pxLc!/b/dL8AAAAAAAAA&bo=FQU5AgAAAAADFxk!&rf=viewer_4&t=5"></p><p>生成一个OAuth Apps<br>然后在 _config.yml里设置上id，secret,如下图</p><pre><code class="hljs">#gitmentgitment:  #id：  owner: YUTING0907  repo: YUTING0907.github.io  client:     id: d9972ee4a1     secret: 717a42cc6c5bb05dbf6b5318</code></pre><h4 id="启用新下载的主题"><a href="#启用新下载的主题" class="headerlink" title="启用新下载的主题"></a>启用新下载的主题</h4><p>在刚打开的的_config.yml 文件中，找到“# Extensions”，把默认主题 landscape 修改为刚刚下载下来的主题名：Aisina。</p><h4 id="更新主题"><a href="#更新主题" class="headerlink" title="更新主题"></a>更新主题</h4><p>git bash 里执行</p><pre><code class="hljs">$ cd themes/主题名$ git pull</code></pre><p>每次修改都要hexo g 生成一下<br>再hexo d部署一下</p><h3 id="头像设置（侧边栏的个人简介）"><a href="#头像设置（侧边栏的个人简介）" class="headerlink" title="头像设置（侧边栏的个人简介）"></a>头像设置（侧边栏的个人简介）</h3><pre><code class="hljs">Sidebar settingssidebar: truesidebar-about-description: &quot;看看你的时间都花在哪了&quot;sidebar-avatar: /image/20181215001153.jpg   </code></pre><p>sidebar-avatar后面跟的就是你想设置的头像，事先你需要把照片放在image目录下。<br>sidebar-about-description就是描述</p><p><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/SbJ1ZOnLnpvS1gm8OhOJrR7zbl5ryDTGti7fLcy7iQw!/b/dL8AAAAAAAAA&bo=6gBGAQAAAAADF58!&rf=viewer_4&t=5"></p><p>这是我设置成功后的效果。</p><h3 id="图片的显示"><a href="#图片的显示" class="headerlink" title="图片的显示"></a>图片的显示</h3><h5 id="1-1设置站点配置-config-yml"><a href="#1-1设置站点配置-config-yml" class="headerlink" title="1.1设置站点配置_config.yml"></a>1.1设置站点配置_config.yml</h5><p>post_asset_folder: true</p><h5 id="1-2-cdn-url"><a href="#1-2-cdn-url" class="headerlink" title="1.2 cdn-url"></a>1.2 cdn-url</h5><p>   注册一个你自己的七牛CDN ，然后拷贝你自己的CDN URL</p><p>在七牛里上传图片</p><p><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/mHc17tcJoHv8gOszj14QM.oRNhvP7NU8MgFoM2CTYOE!/b/dDIBAAAAAAAA&bo=DwVFAgAAAAADF38!&rf=viewer_4&t=5"></p><p>复制外链</p><p>这里可以不选择运用七牛<br>还可以安装插件</p><pre><code class="hljs">npm install https://github.com/CodeFalling/hexo-asset-image --save</code></pre><p> 这个插件在运行hexo n “xxxx”来生成新md博文时，&#x2F;source&#x2F;_posts文件夹内除了xxxx.md文件还有一个同名的文件夹，你可以讲要引用的照片放在此目录下。然后只需要在xxxx.md中按照markdown的格式引入图片：</p><pre><code class="hljs">! [ 这里输入图片描述] ( xxxx/图片名.jpg )</code></pre><p>这里我没有尝试成功，我看网上有很多引用成功的都是在hexo g生成页面后，进入public文件中查看相关字段，可以发现，html标签内的语句是&lt; img src&#x3D;”…xxxx&#x2F;图片名.jpg”&gt;，而不是&lt; img src&#x3D;”xxxx&#x2F;图片名.jpg&gt;，而我生成的是&lt; img src&#x3D;”xxxx&#x2F;图片名.jpg&gt;，不知道什么原因。大家可以尝试造作一下。</p><h5 id="1-3-运用-复制过来的连接"><a href="#1-3-运用-复制过来的连接" class="headerlink" title="1.3 运用![](复制过来的连接)"></a>1.3 运用<code>![](复制过来的连接)</code></h5><p><code>![](复制过来的连接)</code>格式即可在文章中显示照片。</p><p>博文标题背景图片</p><pre><code class="hljs">header-img: &quot;http://sometest.png&quot;</code></pre><p>如果你没有设置的话，会默认使用 _config.yml 下 post-default-img指定的背景图像</p><p>使用 cdn 标签，切换单页面背景图片的URL</p><pre><code class="hljs">cdn: &#39;header-off&#39; header-img: &quot;http://www.imagestest.com/god.png&quot;</code></pre><h3 id="链接weibo，知乎，github"><a href="#链接weibo，知乎，github" class="headerlink" title="链接weibo，知乎，github"></a>链接weibo，知乎，github</h3><pre><code class="hljs"># RSS:weibo_username: ytfantasticzhihu_username: yu-ting-66-78github_username: YUTING0907twitter_username: YUTINGfacebook_username: YUTINGlinkedin_username: </code></pre><p>上述配置可以在你的网站上链接上你的weibo，知乎，github等平台页面。前提是你要设置weibo域名，知乎域名等平台域名，不懂如何设置域名可以自行百度啦<del>操作很简单的</del></p><iframe src="https://rawcdn.githack.com/YUTING0907/donate-page-yu/df1732a5993401f9d372918c3f7680ca0e1c2ca3/simple/index.html " style="overflow-x:hidden;overflow-y:hidden; border:0xp none #fff; min-height:240px; width:100%;"  frameborder="0" scrolling="no"></iframe></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>博客</category>
      
    </categories>
    
    
    <tags>
      
      <tag>hexo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>搭建自己的个人网站(上)</title>
    <link href="/posts/2018/12/22eeffe1.html"/>
    <url>/posts/2018/12/22eeffe1.html</url>
    
    <content type="html"><![CDATA[<div id="readmore-container"><p>本篇个人网站搭建系列博文是基于:GitHub+Hexo。<br>难度指数：♥♥<br>系统环境：win8</p><p><strong>前言：</strong>真正搭建这个网站框架的时间也就花了两个晚上，不需要你有多么深厚的编程基础，可能会遇到一些坑，就需要你遇到问题解决问题的能力了，还有搜功，因为很多你遇到的问题很多人都遇到了，太阳底下没有新鲜事儿，会搜索基本解决了大多数问题。</p><h3 id="第一步：准备必要的软件"><a href="#第一步：准备必要的软件" class="headerlink" title="第一步：准备必要的软件"></a>第一步：准备必要的软件</h3><p><strong>1.Git下载</strong><br>     <a href="https://git-scm.com/downloads">Git</a>,选择适合自己电脑的环境，一路Next下来就行了。</p><p><strong>2、安装node.js</strong><br>    <a href="http://nodejs.cn/">node.js</a>,也是基于自己的电脑环境选择下载，下载最新版本，在Windows安装时务必选择全部组件，包括勾选<code>Add to Path</code>。安装完成后，在Windows环境下，打开命令行提示符，输入<code>node -v</code>，看到版本号正常输出，则安装完成。<br>           <img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/rm7.QvW1mxRhb6sdXnYhiskAulDc0JF9F0bBkPmX50s!/b/dFYBAAAAAAAA&bo=4AAqAAAAAAADF*g!&rf=viewer_4&t=5" alt="在这里插入图片描述"></p><h3 id="第二步：Github注册与配置"><a href="#第二步：Github注册与配置" class="headerlink" title="第二步：Github注册与配置"></a>第二步：Github注册与配置</h3><h4 id="1-注册Github"><a href="#1-注册Github" class="headerlink" title="1.注册Github"></a>1.注册Github</h4><p>点击→<a href="https://github.com/">https://github.com</a>右上角sign up<br><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/5x0MOWtEd4jqwAH5TXRe1qhXefHiOiLCsLpl0vLFZ04!/b/dFQBAAAAAAAA&bo=eQRqAgAAAAADFyc!&rf=viewer_4&t=5" alt="在这里插入图片描述"><br>注册完成后，记住自己的用户名，因为后续个人网站的网址格式为：username.github.io<br>这个username就是你的github用户名。<br>这里我的GitHub账号是：YUTING0907<br>个人网站：YUTING0907.github.io<br>你后续也可以自己绑定域名，叫个更炫酷的名字XXX.com</p><h4 id="2-创建Repository"><a href="#2-创建Repository" class="headerlink" title="2.创建Repository"></a>2.创建Repository</h4><p>登陆GitHub，点击右上角的+，会出现New repository创建一个与你博客相关你的Repository进行管理，之后你的博客都会在GitHub的这个Repository里同步更新。<br><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/*bhCJMsQQlH5*0hTH7p1in230nG62njUjBHVSaqhKn0!/b/dD4BAAAAAAAA&bo=DQVSAgAAAAADF2o!&rf=viewer_4&t=5" alt="在这里插入图片描述"></p><p>Repository的名字是username.github.io，比如我的YUTING0907.github.io。其余可以先不填，点击Create repository</p><h4 id="3-配置SSH-Keys"><a href="#3-配置SSH-Keys" class="headerlink" title="3.配置SSH Keys"></a>3.配置SSH Keys</h4><p>SSH Keys用来使本地git项目与GitHub联系，这样能在GitHub上的博客项目是最新更新的。</p><p>检查SSH Keys的设置<br><strong>I. 开始–所有应用–找到git bash</strong></p><p><strong>II. 检查你电脑里现有的SSH Key</strong><br>   $ cd ~&#x2F;.ssh<br>如果显示 No such file or directory，说明这是你第一次用git<br><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/3KDk1iRk5gEdR1LEgUg.TqHLInCwu2ZEY7D9QyUCZ*4!/b/dAgBAAAAAAAA&bo=NAE5AAAAAAADFz4!&rf=viewer_4&t=5" alt="在这里插入图片描述"></p><p><strong>III. 接下来生成新的SSH Key:</strong><br>$ ssh-keygen -t rsa -C “邮件地址”<br>Generating public&#x2F;private rsa key pair.<br>Enter file in which to save the key (&#x2F;Users&#x2F;your_user_directory&#x2F;.ssh&#x2F;id_rsa):&lt;回车就好&gt;</p><p>这里的邮箱地址，输入注册 Github 的邮箱地址</p><p> 然后系统会要你输入密码：<br>Enter passphrase (empty for no passphrase):&lt;设置密码&gt;<br>Enter same passphrase again:&lt;再次输入密码&gt;</p><p>再回车，这里会提示你输入一个密码，作为你提交项目时使用</p><p><strong>注意：</strong>输入密码的时候没有输入痕迹的，不要以为什么也没有输入。<br>最后看到这样的界面，就成功设置ssh key了：<br><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/mYRnwZ8YFWIqmMRyqUbc5ob0slTpOiDo96NSAVjeo08!/b/dLwAAAAAAAAA&bo=5gEpAQAAAAADF*0!&rf=viewer_4&t=5" alt="在这里插入图片描述"></p><h4 id="IV-添加SSH-Key到GitHub上"><a href="#IV-添加SSH-Key到GitHub上" class="headerlink" title="IV. 添加SSH Key到GitHub上"></a>IV. 添加SSH Key到GitHub上</h4><p>在本地文件夹找到id_rsa.pub文件，看上面的图片第四行的位置告诉你存在哪里了，没有的话可能是隐藏了，勾选一下文件扩展名 隐藏的项目。</p><p>回到你的GitHub主页，右上角点击头像选中Setting</p><p>继续选中左边菜单栏的SSH and GPG keys</p><p>Title最好写，随便写。否则可能出现各种各样的二逼问题<br>Key部分就是放刚才复制的内容了，点击Add SSH key</p><h4 id="V-测试"><a href="#V-测试" class="headerlink" title="V.测试"></a>V.测试</h4><p>git bash里输入代码：<code>$ ssh -T git@github.com</code> </p><pre><code class="hljs">The authenticity of host &#39;GitHub.com (52.74.227.119)&#39; can&#39;t be established.RSA key fingerprint is 16:27:ac:a5:76:28:2d:36:63:1b:56:4d:eb:df:a6:48.Are you sure you want to continue connecting (yes/no)</code></pre><p>输入yes，回车<br>按照提示输入刚才设置的密码，回车<br>You’ve successfully authenticated…<br>设置成功！</p><h4 id="VI-设置用户信息"><a href="#VI-设置用户信息" class="headerlink" title="VI.设置用户信息"></a>VI.设置用户信息</h4><pre><code class="hljs">$ git config --global user.name &quot;YUTING0907&quot; </code></pre><p>&#x2F;&#x2F;输入注册时的username</p><pre><code class="hljs">$ git config --global user.email  &quot;YUTING9597@163.COM&quot; </code></pre><p>&#x2F;&#x2F;填写注册邮箱<br>把名称和邮箱替换成你自己的,SSH Key就配置成功啦！<br>本机已成功连接到 github。</p><h3 id="第三步：搭建Hexo博客"><a href="#第三步：搭建Hexo博客" class="headerlink" title="第三步：搭建Hexo博客"></a>第三步：搭建Hexo博客</h3><p><strong>利用npm命令安装hexo</strong><br>npm Node Package Manager是随同NodeJS一起安装的包管理工具，想了解更多可以自行去百度。</p><pre><code class="hljs">$ npm install -g hexo</code></pre><p>安装完成后，在本地创建一个与 Repository中博客项目同名的文件夹username.github.io(如D:&#x2F;YUTING0907.github.io)在文件夹上点击鼠标右键,选择 Git bash here（可以代替命令行指示符的存在~）,【这一步的作用是因为以后博客部署和更新都要在此文件夹下】</p><p><strong>hexo初始化</strong></p><pre><code class="hljs">hexo init</code></pre><p><strong>安装依赖包</strong></p><pre><code class="hljs">$ npm install</code></pre><p>这里我踩坑了，<br><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/95hREaV7iXFGebAzGGu01Ayke2nVXhftPOPm1vntWyg!/b/dL8AAAAAAAAA&bo=rQFfAQAAAAADF8A!&rf=viewer_4&t=5" alt="在这里插入图片描述"></p><p>然后上百度、google各种找解决办法，后来发现是因为<br>Your versions of node and npm are years old and no longer supported。版本太低了，后来更新node.js版本就好了.<br><a href="https://github.com/npm/npm/issues/8488">npm install 报错解决办法</a><br>这里放上更新node.js的方法<br>方法一：执行下列代码</p><pre><code class="hljs">npm install npm@latest -g</code></pre><p>但我的电脑出现了如下报错，如有朋友出现更新错误，课移步方法二。<br>C:\Users\lenovo\AppData\Roaming\npm\node_modules\npm\bin\npm-cli.js:79<br>      let notifier &#x3D; require(‘update-notifier’)({pkg})<br>      ^^^<br>方法二:<br>1.到node官网（<a href="https://nodejs.org/en/%EF%BC%89">https://nodejs.org/en/）</a><br>下载最新版或者官网推荐版本，我下载的是10.14.1。</p><p>2.将下载的文件安装到之前安装node.js的地方<br>通过where node命令查看node路径<br><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/IPFuuHtZ8RT5DD1PnwVAUJeaBY3smLyDDB3Yvka.x4g!/b/dL4AAAAAAAAA&bo=AQEoAAAAAAADFxo!&rf=viewer_4&t=5" alt="在这里插入图片描述"></p><p>将刚刚下载的文件放到上面查到的路径中<br>双击刚刚下载的文件,点击next 具体安装方法和之前第一次安装一样，但是【<strong>注意在选择路径的时候要选成上面查到的node路径中</strong>】</p><p>3.安装完成。通过npm -v和node -v查看当前版本号</p><p><strong>确保git部署</strong></p><pre><code class="hljs">$ npm install hexo-deployer-git --save</code></pre><p><strong>本地查看</strong><br>做到这里恭喜你😀，现在已经搭建好本地的 Hexo 博客了，执行完下面的命令就可以到浏览器输入 localhost:4000 查看到啦！<br>$ hexo g   &#x2F;&#x2F;生成更新网站<br>$ hexo s   &#x2F;&#x2F;这一步是让你可以在本地localhost:4000可以浏览网站，一个服务预览的作用，退出服务按ctrl+c<br>$ hexo d &#x2F;&#x2F;部署网站</p><p>【小提醒】如果在配置 SSH key 时设置了密码，执行 hexo d 命令上传文件时需要输入密码进行确认，会出现一个小框框，让你输入密码，你输入密码即可部署更新。</p><p>执行完 hexo init 命令后会给一个默认的主题：landscape</p><h3 id="最后一步：将博客部署到username-github-io"><a href="#最后一步：将博客部署到username-github-io" class="headerlink" title="最后一步：将博客部署到username.github.io"></a>最后一步：将博客部署到username.github.io</h3><p><strong>复制SSH码</strong></p><p>进入 Github 个人主页中的 Repository，复制新建的独立博客项目username.github.io的 SSH码<br><img src="http://m.qpic.cn/psb?/V10c1VbY1Y4Fvm/3S8S4ph4RLihnpcoxSNWWtYoCcwUhNHDmmzmJVypCeQ!/b/dLgAAAAAAAAA&bo=cgQpAgAAAAADF28!&rf=viewer_4&t=5" alt="在这里插入图片描述"></p><p><strong>编辑整站配置文件</strong><br>打开 D:&#x2F;username.github.io&#x2F;_config.yml,把刚刚复制的 SSH码粘贴到repository：后面</p><pre><code class="hljs">deploy:  type: git  repository: git@github.com:username/username.github.io.git  branch: master</code></pre><p>冒号后一定要空一格。否则会报FATAL can not read a block mapping entry的错。</p><p>当当当当~~到这里你已经拥有一个属于自己的网站，可能有点简陋，但是整个框架已经搭起来了。期待下一篇把网站拾掇得更好吧。</p><p>搭建参考：<br><a href="http://codewithzhangyi.com/archives/">如何搭建自己的个人网站</a></p><p><a href="https://blog.csdn.net/H_duolalu/article/details/80215580">更新node</a></p><p><a href="https://github.com/npm/npm/issues/8488">npm install错误</a></p><iframe src="https://rawcdn.githack.com/YUTING0907/donate-page-yu/df1732a5993401f9d372918c3f7680ca0e1c2ca3/simple/index.html " style="overflow-x:hidden;overflow-y:hidden; border:0xp none #fff; min-height:240px; width:100%;"  frameborder="0" scrolling="no"></iframe></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var isEncrypt = document.getElementById('hexo-blog-encrypt');var allowMobile = false;if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {try {var plugin = new ReadmorePlugin();plugin.init({"type": "hexo","id": "readmore-container","name": "YutingNotFound","blogId": "04372-4551209630277-002","qrcode": "https://raw.githubusercontent.com/YUTING0907/PicGo/main/imgYUTING__PHOTO_.jpg","keyword": "验证码","random": "1","height": "auto","expires": "36500","lockToc": "yes","interval": "60","baseUrl": "","tocSelector": ""});} catch(e) {console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);}}</script>]]></content>
    
    
    <categories>
      
      <category>博客</category>
      
    </categories>
    
    
    <tags>
      
      <tag>hexo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>2019 do better</title>
    <link href="/posts/2018/12/cdbf6d29.html"/>
    <url>/posts/2018/12/cdbf6d29.html</url>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="8ed8979d0508b09518c66494f925444300e6dd93fed69e9af2b417c82009c2c1">0a7e00277d1118ebcbb3ab2eced6aaa30ecf553a34266b37d769487fc2cfe35da253122506bca9b64ebf4ebb69c9c184db1d1908e6499be5959c2bad162f2baf8f79eb4cd295a66a627e25791b73b3061f5a93733d4e5a8e1eb1f9bad7ab72595211e3eb5c45919ea96aa8634fd0e2c265780d22b39f0e62df5b0f7ff1d61a6e61be31eb7ac3a49b05d280a0bd0792779a98eaec238ca4c3b74470fc44a392d2d85101be29b91d3df50833c196e7bccf7ed9ea31f998c0de041dc404760a465067eff2df210d1a0c47c5496dfbce2490fb9414ed7c446cc14f53a92b11dae6a3b64f8b8a875327103737ba00cb8633885605c97e75967e153d9edf7aa1573684675b3ef19566361308d24be972d42058a636548ab50cf321365766244b2d231331e383dc8e5e5b78928c9f1562a080754ac7fdf6103640194d1dc4e127054c273d1b0e6f0ce1fc80d654af1952bcadac5343779ae7ad1d19dc4ec0b0ff33202f1d7c553b903a1c5a49f6b1692348c767713b20eae6ebb8f52a77bde24c58eaf6b3c292a7f3fd0bd8c9afc72cde40718cd4f284550c75d55c26a1bdbfcd7cbd50dc2d0a0d97b567c56ae58398652125febf892a61f58cae416d3211cc5f2811bbaf4a78f949dbc0e517b564c8915be7230188dad57aa196d7b0231e13b9a3bbafa3a4f568abdcb593010574d809b0d230450d1a4b82a919ccf8da65fdb2a994aa10202066c088084468765a4e4b79d243021bfb6838ddbb175d43bd0ad305300ed0109d43d7b7ba21a9f0ca0d7b6a9692873338bc7fe08e3363e138403ebb162ca4a37c013a685274f84d99a32e19aac71126343fa9713ccf296628da1746b889f63ebe3ac8a1c8605a0d66e2bf03e0c82c0fbfc601fa5cb7f3cc418ee6dd5ac40354aec6a61b644b7b33e98775389f80dfc6745e3ecc29ae46ba7d5f5ec50161d7abe7d51d4902ebbbeae1d087eb656896f4fb1ac7c122deb62972e76f9adb93e7696d78bec394d70576ad30cb40cb78ec310f1bb87c2760f49ea404194ad93fc22936a518ae8f1f66882175da1d937ff005293a1ad4bffbbb4b51bf4933afa8b6de4e17f62e4613e1248ddcbf46ded2be2ddf553391243e86e2c333de94ca1ee659bab482f7c1964d04fb5504bbda559fb0e511650874c51fa73ebcd1a70766a9c388787a4fc0ca741811d8cf8576877fd09901532d740afbd7c3761de43bed2f70b513fe1e806fd200ee2869ef0cc9db6444077b1e79364889d3f1b97384e23a43c1d84551a6adf358ce66c462bca89f3aec50e173525e6fbdf2615216311c2a23c90cb828ac830e223e6f4ce6982a4c1c8a8c4d85e140b05cca2a81df416df451090a5344257b846e13b9e20a96e834043b1c4a7f370b510363b2f57a077f726039b5a9e9c2e6c83b3849d4213b203a06bcff763d0839c0604e361a550e4ea16c3580fb090c0edfe80de2d4e2ac4070fe9e8c513f244e0075a8a613cac9b648a66502dd5ce7ea355301dbd037499ef19583cb0f1be323bc82a89b60f65d90f5a4cf0c656f778b682992b9aca228a45ae82fa990350b2bd6f08a2d13831b8bdc609cd1f08a3394fd0cbc5cf6df78d0643e2f6c015e775bfd17ba8f33241b6a0bdb5673e6c6d01eac8c73c60a43cea7ecedcf7eeb4f37ca60ede811eef7dd5e6e9e30d15bdf928adf1302f9ac935c84d30f700c93c525e5597323360af38bc45b0e909eb02fed6d043b31e334512e6de4169dab43aaf182c88e1c3bac1e358933ac5ffe7e493abd586830f4b5e5884d944378df0a7a17aea097207c51a62c08b8d153297c4d6d06c2d19db3b5fedb77c3c28f89f5bbff19aedac395cc21aa037d44a7a7f805302697d4b464133440bbf2983ac2aec07ee74ff6627ec17cf534409996ad7af5b8f56813d5f5de80e069a5470ba0116a2401d68ffee81e2e6c4086359ba1f353a17c5696f1a74e455d27cfa8917eebffc27744d4672b38ed91cb1153d023c7b2dbfa74fb5e7d06e063e3f5bad6b00f48b1d935f766357467223f892b82ca6c190bea6fbf32258b1c1b32591ce149b3cf75a9d3239162fdc8b39ee02fa4808daa3f575c1157120c19d553a9d4526409b7db79897be3d4c660a9b4837d0845fb73899406f6e4a097f5ba714aa077ad3c900daba6b85b36022c6ddc9278351c6c906f9d7a34e8c9deab943355bde2696ac5459ceadc7d4c20a187f69c1607a31cc032c8c6b6992b8621368ce68a09a2a50c0f5e35f3d6dc2309eb04e17ed8579eed379e5fcfc53e5aa0c71e741067f3573f799e72d3cad6809f6d5849f9446e0c17446cb3091e58dc173368efc3506c2733f0c48e83fa3fea1145f6c831c57e1742958c098ff18c9bbc9ae53305dbc58febe6a16c36eedbe3e30a686f80c573f1def99b22081852645d496d386b12f1b9d498a5acfa74e7010fde2f28857c3832ef1f2970538ee2755368f8f0a94868a2152440c04ba02e92fd253a9d5c44325ac9bb64515da70ddcff9be7b410c271df5ed3079020d30c75f6bc117f648a8a8c7eedda69fed1b467c8f9241908b673e491262fce85c1c32362388fdfd828053ba6f58c89e5981e0d6f2e50539ce96a53aaf68fdec5bebe7bc99f4909082ab857635c46618ffb92ec8b01ca9846f45433ccf27502bd0f6558d9c18a4353b0678b39c4613f5184dbc608a4761b13a5cafc46ca2277a39f490595bcfcf58042fdacc5ae05151e5a79c13a60fc3bd493a8e805136042fe9dcf70a7894ded7cbc52543149ef95bab5c0b52862b7934080c1f61731c23b720646535e8ad5d54b62b36baddc29153435ac396e4b0d2b5e609383c6e8998d4af6e54b5ebd9a7cdc125d9b43d345ea5fddafa9878c8b24a3e5e1383c5daddef3d6092a3ecb15dbfdf8bc575dfd6074bc8328918663f8a8c77e3b53f74e4885cbdb1ca904ee20bd9ba6270093270ded2f3861fe604c29e5a62f9be892892127355d1c30a84f84bae11bed0b73a11a333cdac3c799fcd04659dede2d877dd9e5a2613c72c3b77137f03dce6412499af64ed1e14a349125bc050c0e5525a46701efd3efc588f5db0b07338eb7702719e26a34a774bfc063d23fc2c09850bc1501703af8d8c2e830083b2dea31b84c652d3c87ce5c0f64fbb72c9cfce4f5909f49cb97389382fd4c0da95e0975744386b23da09c5ca8a22779a3dc7c5f63eb1c8c721566043f0fedba7a62012062d77c7c004aa7c3341b7b88f3585e3559f92e48a10b73c49a8effefa7fee2543f44e1dfa61fbf0a0fcece812b929df8947da1b025bea102fd33fa0352afb8fab870e7028104a607bef9a9e543cc71448878ef907191e61e1a8b8f539457b045d01800389f0fa9840aba512802dca84d9ae8336f097c3a46bd6350fdacc072ae5064b7137f9b0f26872ea9</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">请输入密码</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    
    
    <tags>
      
      <tag>life</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
